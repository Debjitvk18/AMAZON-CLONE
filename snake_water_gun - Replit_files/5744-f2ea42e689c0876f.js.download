"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5744],{39603:function(e,n,r){var t=r(74985),i=r(48306),l=r.n(i);r(50959);n.Z=function(e){var n=e.maxLength,r=void 0===n?140:n,i=e.value,a=void 0===i?"":i,o=e.hideLabel,u=void 0!==o&&o;return(0,t.BX)("div",{className:"jsx-59d2089b8a0ab881",children:[a.length," / ",r," ",u?"":"characters",(0,t.tZ)(l(),{id:"59d2089b8a0ab881",children:"div.jsx-59d2089b8a0ab881{color:var(--foreground-dimmer);font-size:.75em;text-align:right;margin-top:var(--space-8)}"})]})}},49142:function(e,n,r){r.d(n,{Z:function(){return F}});var t=r(72006),i=r(4405),l=r(2272),a=r(74985),o=r(50959),u=r(88254),s=r(12318),c=r(61284),d=r(85368),p=r(39541),v=r(45510),f=r(39137),h=r(84607),m=r(90355),g=r(56169),Z=r(39603),R=r(43004),k=r(58288),w=r(27630),_=r(53783),b=r(43119),y=r(71440),S=r(53667),x=r(24635);function E(){var e=(0,b.Z)(["\n  query ForkModal {\n    currentUser {\n      id\n      url\n      image\n      username\n      ...ReplOwnerCurrentUser\n      teams {\n        id\n        ...ReplOwnerTeam\n      }\n    }\n  }\n  ","\n  ","\n"]);return E=function(){return e},e}var T={},U=(0,y.Ps)(E(),S.s,S.a);var I=r(7493),B=r(23142),C=function(e){var n=e.onFork,r=e.hideModal,t=e.initialTitle,i=e.initialDescription,u=void 0===i?"":i,b=e.initialPrivacy,y=e.teamContext,S=e.currentUser,x=e.template,E=o.useRef(null),T=(0,g.H)(),U=(0,l.Z)((0,k.Y)(S,y),2),B=U[0],C=U[1],F=(0,l.Z)((0,I.c)(B,S,b||!1),3),P=F[0],G=F[1],L=F[2],O=(0,s.Y)(t,(function(e){if(e)return e.length>60?{message:"Must be no longer than 60 characters"}:void 0})),N=(0,s.Y)(u,(function(e){if(e&&e.length>m.p)return{message:"Must be no longer than ".concat(m.p," characters")}}));o.useEffect((function(){E.current&&E.current.focus()}),[E]);var D="Team"===B.__typename?B.id:null,X=Boolean(D);return(0,a.tZ)("form",{onSubmit:function(e){e.preventDefault(),O.validate()||N.validate()||(n(D,O.value.trim(),N.value,P),r())},children:(0,a.BX)(d.G,{css:[p.l0.colWithGap(16)],children:[(0,a.tZ)(c.h4,{variant:"headerDefault",level:2,children:x?"Use Template":"Fork Repl"}),(0,a.BX)(d.G,{css:[p.l0.colWithGap(16)],children:[(0,a.BX)(d.G,{css:[p.l0.colWithGap(4)],children:[(0,a.BX)(d.G,{css:[p.l0.flex.row,p.l0.justify.spaceBetween,p.l0.align.end],children:[(0,a.tZ)(R._,{for:T("name"),children:"Name"}),(0,a.tZ)(Z.Z,{maxLength:60,value:O.value,hideLabel:!0})]}),(0,a.tZ)(f.II,{ref:E,className:"repl-title-input",placeholder:"Name your Repl",onChange:function(e){return O.setValue(e.target.value)},onFocus:function(e){return e.target.select()},value:O.value,onBlur:O.handleBlur,id:T("name")}),O.error?(0,a.tZ)(c.xv,{css:[p.l0.color.accentNegativeStronger],multiline:!1,children:O.error.message}):null]}),(0,a.BX)(d.G,{css:[p.l0.colWithGap(4)],children:[(0,a.BX)(d.G,{css:[p.l0.flex.row,p.l0.justify.spaceBetween,p.l0.align.end],children:[(0,a.tZ)(R._,{for:T("description"),children:"Description"}),(0,a.tZ)(Z.Z,{maxLength:m.p,value:N.value,hideLabel:!0})]}),(0,a.tZ)(f.B,{maxLength:m.p,value:N.value,onChange:function(e){return N.setValue(e.target.value)},placeholder:"What does this Repl do?",css:[p.l0.minHeight(96),p.l0.maxHeight(128),{resize:"vertical"}],id:T("description")})]}),(0,a.tZ)(_.P,{context:"fork_modal",isPrivate:P,setIsPrivate:G,privacyState:L,isTeam:X})]}),S.teams.length>0?(0,a.BX)(d.G,{css:[p.l0.colWithGap(8)],children:[(0,a.tZ)(R._,{for:T("owner"),children:"Owner"}),(0,a.tZ)(w.Z,{id:T("owner"),currentUser:S,initialSelectedUsername:B.username,onChange:function(e){return C(e.username)}})]}):null,(0,a.BX)(d.G,{css:[p.l0.rowWithGap(12),p.l0.justify.end],children:[(0,a.tZ)(v.zx,{onClick:r,text:"Cancel",type:"button"}),(0,a.tZ)(v.zx,{colorway:"primary",type:"submit",disabled:Boolean(O.error||N.error),text:x?(0,a.tZ)(a.HY,{children:"Use Template"}):(0,a.tZ)(a.HY,{children:"Fork Repl"}),iconLeft:(0,a.tZ)(h.Z,{})})]})]})})};function F(e){var n=function(e){var n=(0,t.Z)({},T,e);return x.a(U,n)}({fetchPolicy:"cache-and-network",ssr:!1,onError:function(e){u.$e((function(n){n.setTag("fork-modal",!0),u.Tb(e)}))}}),r=n.data,l=n.loading,o=n.error;if(l)return(0,a.tZ)(c.xv,{color:"dimmer",multiline:!1,children:"Loading..."});if(o)return(0,a.tZ)(c.xv,{multiline:!1,children:"Something went wrong."});if(!r)return null;var s=r.currentUser;return s?(0,a.tZ)(C,(0,i.Z)((0,t.Z)({},e),{currentUser:s})):(0,a.tZ)(B.o,{loginTitle:"Login to fork this Repl",signupTitle:"Signup to fork this Repl",description:"",textOnSuccess:"Success!",onSuccess:function(){},onFailure:function(){},trackSource:"fork"})}},43743:function(e,n,r){r.d(n,{Z:function(){return R}});var t=r(72006),i=r(4405),l=r(2272),a=r(50959),o=r(90171),u=r(13233),s=r(43119),c=r(71440),d=r(50216);function p(){var e=(0,s.Z)(["\n  mutation ForkReplCreateRepl($input: CreateReplInput!) {\n    createRepl(input: $input) {\n      ... on Repl {\n        id\n        url\n        isPrivate\n        language\n        origin {\n          id\n          isOwner\n        }\n        source {\n          release {\n            id\n            repl {\n              id\n              title\n              owner {\n                ... on User {\n                  id\n                  username\n                }\n                ... on Team {\n                  id\n                  username\n                }\n              }\n            }\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return p=function(){return e},e}var v={},f=(0,c.Ps)(p());function h(e){var n=(0,t.Z)({},v,e);return d.D(f,n)}var m=r(11116),g=r(625),Z=r(8586);function R(){var e,n,r,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=s.onFork,d=s.onError,p=s.navigateAfterFork,v=void 0===p||p,f=(0,o.useRouter)(),R=(0,u.Z)().showError,k=(0,m.Z)(),w=(0,l.Z)(h({onCompleted:function(e){var n="Repl"===(null===e||void 0===e?void 0:e.createRepl.__typename)?e.createRepl:null;if(n&&(c&&c(e),v))if("/replEnvironmentDesktop"!==f.pathname&&"/replEnvironmentMobile"!==f.pathname)f.push({pathname:k,query:{replUrl:n.url}},{pathname:n.url});else{var r=n.url+(f.query.lite?"?lite=".concat(f.query.lite.toString()):"");window.location.href=r}}}),2),_=w[0],b=w[1],y="UserError"===(null===(e=b.data)||void 0===e?void 0:e.createRepl.__typename)?null===(n=b.data)||void 0===n?void 0:n.createRepl.message:null===(r=b.error)||void 0===r?void 0:r.message;a.useEffect((function(){y&&(R(y),d&&d())}),[y,R,d]);var S=a.useCallback((function(e){var n=e.originId,r=e.replReleaseId,l=e.teamId,a=e.title,o=e.description,u=e.isPrivate,s=e.trackingData,c=e.forkToPersonal;(0,g.j)(g.U3.FORK_REQUESTED,s),_({variables:{input:{originId:n,replReleaseId:r,teamId:l,title:a,isPrivate:u,description:o,forkToPersonal:c,gitRemoteUrl:""}}}).then((function(e){var l,a,o,u,c,d,p,v,f,h,m,R,k,w,_="Repl"===(null===(l=e.data)||void 0===l?void 0:l.createRepl.__typename)?e.data.createRepl:null;_&&(0,g.j)(g.U3.REPL_CREATED,(0,i.Z)((0,t.Z)({isSignup:!1,isOnboarding:!1},s),{isForked:!0,isPrivate:_.isPrivate,replId:_.id,isRenamed:!1,language:_.language,isSelfForked:!!(null===(a=_.origin)||void 0===a?void 0:a.isOwner),isTemplateFork:Boolean(r),originId:n,templateReplId:(null===(o=_.source)||void 0===o||null===(u=o.release)||void 0===u||null===(c=u.repl)||void 0===c?void 0:c.id)||void 0,templateTitle:null===(d=_.source)||void 0===d||null===(p=d.release)||void 0===p||null===(v=p.repl)||void 0===v?void 0:v.title,templateOwner:null===(f=_.source)||void 0===f||null===(h=f.release)||void 0===h||null===(m=h.repl)||void 0===m||null===(R=m.owner)||void 0===R?void 0:R.username,templateType:(null===(k=_.source)||void 0===k||null===(w=k.release)||void 0===w?void 0:w.repl)?(0,Z.lw)(_.source.release.repl):void 0}))}))}),[_]),x=!!(b.loading||b.data&&"Repl"===b.data.createRepl.__typename);return[S,{loading:x}]}},67541:function(e,n,r){var t=r(57135),i=r(96583),l=r(24824);n.Z=function(){var e=(0,t.Z)((function(e,n){var r,t,a;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return e?(r=e.user,[3,4]):[3,1];case 1:return(t=n.getState().user)&&t.userInfo.isLoggedIn&&t.userInfo?(r=t.userInfo,[3,4]):[3,2];case 2:return[4,(0,l.LK)("/is_authenticated")];case 3:(a=i.sent()).success&&(r=a.user),i.label=4;case 4:return r&&(e&&(r=JSON.parse(JSON.stringify(r))),n.dispatch({type:"FETCH_USER_INFO_SUCCESS",user:r})),[2,{user:r}]}}))}));return function(n,r){return e.apply(this,arguments)}}()},90355:function(e,n,r){r.d(n,{p:function(){return t}});var t=1e3}}]);
//# sourceMappingURL=5744-f2ea42e689c0876f.js.map