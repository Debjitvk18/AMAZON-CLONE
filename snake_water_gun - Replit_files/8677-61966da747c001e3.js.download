"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8677],{67541:function(e,n,t){var r=t(57135),i=t(96583),o=t(24824);n.Z=function(){var e=(0,r.Z)((function(e,n){var t,r,l;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return e?(t=e.user,[3,4]):[3,1];case 1:return(r=n.getState().user)&&r.userInfo.isLoggedIn&&r.userInfo?(t=r.userInfo,[3,4]):[3,2];case 2:return[4,(0,o.LK)("/is_authenticated")];case 3:(l=i.sent()).success&&(t=l.user),i.label=4;case 4:return t&&(e&&(t=JSON.parse(JSON.stringify(t))),n.dispatch({type:"FETCH_USER_INFO_SUCCESS",user:t})),[2,{user:t}]}}))}));return function(n,t){return e.apply(this,arguments)}}()},90024:function(e,n,t){t.d(n,{FW:function(){return m},NH:function(){return v}});var r=t(72006),i=t(43119),o=t(71440),l=t(3481),u=t(84757),a=t(24635);function s(){var e=(0,i.Z)(["\n  fragment PublishReplData on Repl {\n    id\n    url\n    title\n    description\n    iconUrl\n    lastPublishedAt\n    publishedAs\n    imageUrl\n    isRenamed\n    templateInfo {\n      iconUrl\n    }\n    replViewSettings {\n      id\n      defaultView\n      replImage\n      replFile\n    }\n    tags {\n      id\n      isOfficial\n    }\n    currentUserPermissions {\n      containerWrite\n      publish\n      changeIconUrl\n    }\n    ...CrosisContextRepl\n    ...PublishedReplShareInfoReplData\n  }\n  ","\n  ","\n"]);return s=function(){return e},e}function c(){var e=(0,i.Z)(["\n  fragment PublishCurrentUser on CurrentUser {\n    id\n    image\n    isTemplateDeveloper: hasRole(role: TEMPLATE_DEVELOPER)\n    ...CrosisContextCurrentUser\n  }\n  ","\n"]);return c=function(){return e},e}function d(){var e=(0,i.Z)(["\n  query PublishCurrentUser {\n    currentUser {\n      id\n      ...PublishCurrentUser\n    }\n  }\n  ","\n"]);return d=function(){return e},e}var p={},m=(0,o.Ps)(s(),l.C,u.B),h=(0,o.Ps)(c(),l.D),f=(0,o.Ps)(d(),h);function v(e){var n=(0,r.Z)({},p,e);return a.a(f,n)}},84757:function(e,n,t){t.d(n,{B:function(){return o}});var r=t(43119);function i(){var e=(0,r.Z)(["\n  fragment PublishedReplShareInfoReplData on Repl {\n    id\n    url\n    publishedAs\n    title\n  }\n"]);return i=function(){return e},e}var o=(0,t(71440).Ps)(i())},80866:function(e,n,t){t.d(n,{Z:function(){return D}});var r=t(57135),i=t(96583),o=t(74985),l=(t(50959),t(39137)),u=t(85368),a=t(61284),s=t(39541),c=t(45510),d=t(25198),p=t(56169),m=t(51631),h=t(12318),f=t(76735),v=t(35207),g=t(625),Z=t(22642),b=t(33594),y=(0,t(82568).X)({content:[s.l0.p(8),s.l0.colWithGap(16)],section:[s.l0.colWithGap(8)]});function w(e){var n=e.header;return(0,o.tZ)(b.Q,{headerContent:n,children:(0,o.BX)(u.G,{css:y.content,children:[(0,o.BX)(u.G,{css:y.section,children:[(0,o.tZ)(a.xv,{multiline:!1,children:"Bold Text"}),(0,o.tZ)(a.xv,{color:"dimmer",multiline:!1,children:"**bold**"})]}),(0,o.BX)(u.G,{css:y.section,children:[(0,o.tZ)(a.xv,{multiline:!1,children:"Italic Text"}),(0,o.tZ)(a.xv,{color:"dimmer",multiline:!1,children:"__italic__"})]}),(0,o.BX)(u.G,{css:y.section,children:[(0,o.tZ)(a.xv,{multiline:!1,children:"Links"}),(0,o.tZ)(a.xv,{color:"dimmer",multiline:!1,children:"[Link Name](https://yourlink.com)"})]}),(0,o.BX)(u.G,{css:y.section,children:[(0,o.tZ)(a.xv,{multiline:!1,children:"Images"}),(0,o.tZ)(a.xv,{color:"dimmer",multiline:!1,children:"![Image alt text](https://linktoyourimage.com)"})]}),(0,o.BX)(u.G,{css:y.section,children:[(0,o.tZ)(a.xv,{multiline:!1,children:"Header Text"}),(0,o.tZ)(a.xv,{color:"dimmer",multiline:!1,children:"# Header"})]}),(0,o.BX)(u.G,{css:[s.l0.colWithGap(8)],children:[(0,o.tZ)(a.xv,{multiline:!1,children:"Code Blocks"}),(0,o.BX)(a.xv,{color:"dimmer",multiline:!1,children:["```",(0,o.tZ)("br",{}),"this is for large, multiline code blocks",(0,o.tZ)("br",{}),"```"]})]}),(0,o.BX)(u.G,{css:[s.l0.colWithGap(8)],children:[(0,o.tZ)(a.xv,{multiline:!1,children:"Inline Code"}),(0,o.tZ)(a.xv,{color:"dimmer",multiline:!1,children:"`this is for code in the middle of sentences`"})]}),(0,o.BX)(u.G,{css:[s.l0.colWithGap(8)],children:[(0,o.tZ)(a.xv,{multiline:!1,children:"Horizontal Rules"}),(0,o.tZ)(a.xv,{color:"dimmer",multiline:!1,children:"***"})]})]})})}var C=u.K.form;function R(e){return 0===e.trim().length?{message:"You cannot leave this empty."}:e.length>100?{message:"The title should not be longer than ".concat(100," characters.")}:void 0}function T(e){return 0===e.trim().length?{message:"You cannot leave this empty."}:e.length>5e3?{message:"The description should not be longer than ".concat(5e3," characters.")}:void 0}function D(e){var n,t,b=e.repl,y=e.source,D=e.onDone,x=(0,p.H)(),G=x("titleIdInput"),P=x("descriptionIdInput"),_=(0,h.Y)("",R),U=(0,h.Y)("",T),E=(0,v.O)();return(0,o.BX)(C,{onSubmit:function(){var e=(0,r.Z)((function(e){return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return e.preventDefault(),_.validate()||U.validate()?[2]:[4,E.publish({input:{replId:b.id,title:_.value,body:U.value}})];case 1:return n.sent().error||((0,g.j)(g.U3.UPDATE_SHARED,{source:y,replType:b.publishedAs===m.O2.Template?"template_repl":"regular_repl"}),D()),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),css:[s.l0.colWithGap(16)],children:[(0,o.tZ)(a.h4,{level:1,variant:"headerDefault",children:"Add an update"}),(0,o.BX)(a.xv,{multiline:!1,children:["Explain what has changed about this"," ",b.publishedAs===m.O2.Template?"Template":"Repl","."]}),(0,o.BX)(u.G,{css:s.l0.colWithGap(8),children:[(0,o.BX)(u.G,{css:s.l0.colWithGap(4),children:[(0,o.tZ)("label",{css:s.l0.color.foregroundDimmer,htmlFor:G,children:"Title"}),(0,o.tZ)(l.II,{id:G,onChange:function(e){_.setValue(e.target.value)},disabled:E.loading,placeholder:"Give your post a title"})]}),_.error?(0,o.tZ)(d.E,{icon:(0,o.tZ)(f.Z,{}),text:null===(n=_.error)||void 0===n?void 0:n.message,colorway:"negative"}):null]}),(0,o.BX)(u.G,{css:s.l0.colWithGap(8),children:[(0,o.BX)(u.G,{css:s.l0.colWithGap(4),children:[(0,o.tZ)("label",{css:s.l0.color.foregroundDimmer,htmlFor:P,children:"Description"}),(0,o.tZ)(l.B,{id:P,onChange:function(e){U.setValue(e.target.value)},css:[s.l0.width("100%"),{minHeight:s.TV.space128,maxHeight:s.TV.space256,resize:"vertical",lineHeight:s.TV.lineHeightDefault}],disabled:E.loading,placeholder:"Write something about this post"})]}),U.error?(0,o.tZ)(d.E,{icon:(0,o.tZ)(f.Z,{}),text:null===(t=U.error)||void 0===t?void 0:t.message,colorway:"negative"}):null]}),(0,o.tZ)(w,{header:"Style your description with Markdown"}),E.error?(0,o.tZ)(d.E,{icon:(0,o.tZ)(f.Z,{}),colorway:"negative",text:E.error}):null,(0,o.tZ)(c.zx,{text:E.loading?"Sharing update...":"Share update",type:"submit",colorway:"primary",disabled:Boolean(E.loading||_.error||U.error),css:{alignSelf:"end"},iconLeft:(0,o.tZ)(Z.Z,{})})]})}},35207:function(e,n,t){t.d(n,{O:function(){return f}});var r=t(57135),i=t(2272),o=t(96583),l=t(72006),u=t(43119),a=t(71440),s=t(90024),c=t(50216);function d(){var e=(0,u.Z)(["\n  mutation PublishReplCreatePost($input: CreateReplPost2Input!) {\n    createReplPost2(input: $input) {\n      ... on Post {\n        id\n        repl {\n          id\n          ...PublishReplData\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}var p={},m=(0,a.Ps)(d(),s.FW);function h(e){var n,t,r,i,o,l,u;return e.error?e.error.message||"Something went wrong publishing your Repl":"NotFoundError"===(null===(n=e.data)||void 0===n||null===(t=n.createReplPost2)||void 0===t?void 0:t.__typename)||"UnauthorizedError"===(null===(r=e.data)||void 0===r||null===(i=r.createReplPost2)||void 0===i?void 0:i.__typename)||"UserError"===(null===(o=e.data)||void 0===o||null===(l=o.createReplPost2)||void 0===l?void 0:l.__typename)?e.data.createReplPost2.message:(null===(u=e.data)||void 0===u?void 0:u.createReplPost2)&&"Post"!==e.data.createReplPost2.__typename?"Something went wrong publishing your Repl":void 0}function f(){var e=(0,i.Z)(function(e){var n=(0,l.Z)({},p,e);return c.D(m,n)}(),2),n=e[0],t=e[1],u=function(){var e=(0,r.Z)((function(e){var r,i;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:if(r=e.input,t.loading)return[2,{data:null,error:null}];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,n({variables:{input:r}})];case 2:return[2,{data:(i=o.sent()).data,error:h(i)}];case 3:return o.sent(),[2,{data:null,error:"Something went wrong publishing your Repl"}];case 4:return[2]}}))}));return function(n){return e.apply(this,arguments)}}();return{publish:u,data:t.data,loading:t.loading,error:h(t)}}},53212:function(e,n,t){t.d(n,{Z:function(){return Ze}});var r=t(2272),i=t(74985),o=t(51631),l=t(80731),u=t(50959),a=t(2041),s=t(85368),c=t(39541),d=t(61284),p=t(45510),m=t(39137),h=t(72006),f=t(43119),v=t(71440),g=t(50216);function Z(){var e=(0,f.Z)(["\n  mutation ReportRepl($replId: String, $reason: String!) {\n    createBoardReport(replId: $replId, reason: $reason) {\n      id\n    }\n  }\n"]);return Z=function(){return e},e}var b={},y=(0,v.Ps)(Z());var w=t(13233),C=t(70719),R=s.K.form;function T(e){var n=e.replId,t=e.onDone,o=(0,u.useState)(""),l=o[0],a=o[1],f=(0,w.Z)(),v=f.showConfirm,Z=f.showError,T=(0,r.Z)(function(e){var n=(0,h.Z)({},b,e);return g.D(y,n)}({variables:{replId:n,reason:l},onCompleted:function(){v("Repl reported"),t()},onError:function(e){Z(e.message)}}),2),D=T[0],x=T[1].loading;return(0,i.BX)(s.G,{css:[c.l0.colWithGap(24)],children:[(0,i.tZ)(d.xv,{variant:"subheadBig",multiline:!1,children:"Report Repl"}),(0,i.BX)(R,{onSubmit:function(e){e.preventDefault(),l?D():Z("Not reported. No reason specified.")},css:[c.l0.colWithGap(32)],children:[(0,i.tZ)(s.G,{css:[c.l0.colWithGap(8)],children:(0,i.tZ)(m.B,{placeholder:"Why do you want to report this Repl?",value:l,onChange:function(e){return a(e.currentTarget.value)},css:[c.l0.minHeight(64),c.l0.maxHeight(128),{resize:"vertical"}]})}),(0,i.BX)(s.G,{css:[c.l0.rowWithGap(16),c.l0.justify.end],children:[(0,i.tZ)(s.G,{children:(0,i.tZ)(p.zx,{type:"button",text:"Cancel",onClick:function(){return t()}})}),(0,i.tZ)(s.G,{children:(0,i.tZ)(p.zx,{disabled:x,text:x?"Reporting":"Report Repl",type:"submit",colorway:"negative",iconLeft:(0,i.tZ)(C.Z,{}),onClick:function(){return t()}})})]})]})]})}function D(){var e=(0,f.Z)(["\n  mutation WarnUser($username: String!, $reason: String!) {\n    warnUser(username: $username, reason: $reason) {\n      ... on Warning {\n        id\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return D=function(){return e},e}var x={},G=(0,v.Ps)(D());var P=t(76735),_=s.K.form;function U(e){var n=e.username,t=e.onDone,o=(0,u.useState)(""),l=o[0],a=o[1],f=(0,w.Z)(),v=f.showConfirm,Z=f.showError,b=(0,r.Z)(function(e){var n=(0,h.Z)({},x,e);return g.D(G,n)}({onCompleted:function(e){var n=e.warnUser;"UserError"===n.__typename?Z(n.message):v("The user has been warned.")}}),2),y=b[0],C=b[1].loading;return(0,i.BX)(s.G,{css:[c.l0.colWithGap(24)],children:[(0,i.tZ)(d.h4,{level:1,variant:"headerDefault",children:"Warn the author of the Repl?"}),(0,i.BX)(_,{onSubmit:function(e){e.preventDefault(),l&&n?(y({variables:{username:n,reason:l}}),t()):Z("Please provide a reason.")},css:[c.l0.colWithGap(24)],children:[(0,i.tZ)(m.B,{placeholder:"Reason for warning the user",value:l,onChange:function(e){return a(e.currentTarget.value)},css:{resize:"none",minHeight:40}}),(0,i.BX)(s.G,{css:[c.l0.rowWithGap(8),c.l0.justify.end],children:[(0,i.tZ)(p.zx,{type:"button",text:"Cancel",onClick:function(){return t()}}),(0,i.tZ)(p.zx,{disabled:C,colorway:"negative",text:C?"Warning user...":"Yes, warn this user",type:"submit",iconLeft:(0,i.tZ)(P.Z,{})})]})]})]})}function E(){var e=(0,f.Z)(["\n  mutation BanUserFromCommunity($username: String!, $reason: String!) {\n    banCommunityUser(username: $username, reason: $reason) {\n      ... on BannedBoardUser {\n        id\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return E=function(){return e},e}var B={},S=(0,v.Ps)(E());var I=t(60803),W=s.K.form;function H(e){var n=e.username,t=e.onDone,o=(0,u.useState)(""),l=o[0],a=o[1],f=(0,w.Z)(),v=f.showConfirm,Z=f.showError,b=(0,r.Z)(function(e){var n=(0,h.Z)({},B,e);return g.D(S,n)}({onCompleted:function(e){var n=e.banCommunityUser;"UserError"===n.__typename?Z(n.message):v("The user has been banned.")}}),2),y=b[0],C=b[1].loading;return(0,i.BX)(s.G,{css:[c.l0.colWithGap(24)],children:[(0,i.tZ)(d.h4,{level:1,variant:"headerDefault",children:"Ban the author of the Repl?"}),(0,i.tZ)(d.xv,{children:"Are you sure you want to ban this user? All their Repls will be deleted and they will no longer be able to access their account."}),(0,i.BX)(W,{onSubmit:function(e){e.preventDefault(),l&&n?(y({variables:{username:n,reason:l}}),t()):Z("Please provide a reason.")},css:[c.l0.colWithGap(24)],children:[(0,i.tZ)(s.G,{css:[c.l0.colWithGap(8)],children:(0,i.tZ)(m.B,{placeholder:"Reason for banning the user",value:l,onChange:function(e){return a(e.currentTarget.value)},css:{resize:"none",minHeight:40}})}),(0,i.BX)(s.G,{css:[c.l0.rowWithGap(8),c.l0.justify.end],children:[(0,i.tZ)(p.zx,{type:"button",text:"Cancel",onClick:function(){return t()}}),(0,i.tZ)(p.zx,{disabled:C,colorway:"negative",text:C?"Banning user...":"Yes, ban this user",type:"submit",iconLeft:(0,i.tZ)(I.Z,{})})]})]})]})}var X=t(65897),k=t(57135),A=t(96583),z=t(90024);function F(){var e=(0,f.Z)(["\n  mutation UnpublishTemplate($input: DeleteReplDeploymentInput!) {\n    deleteReplDeployment(input: $input) {\n      ... on Repl {\n        id\n        ...PublishReplData\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return F=function(){return e},e}var $={},O=(0,v.Ps)(F(),z.FW);var L=t(62405),N=s.K.form;function Y(e){var n=e.replId,t=e.onDone,o=(0,w.Z)(),l=o.showConfirm,u=o.showError,a=(0,r.Z)(function(e){var n=(0,h.Z)({},$,e);return g.D(O,n)}({variables:{input:{replId:n}}}),2),m=a[0],f=a[1];return(0,i.BX)(s.G,{css:[c.l0.colWithGap(24)],children:[(0,i.tZ)(d.h4,{level:1,variant:"headerDefault",children:"Unpublish Template from Community?"}),(0,i.BX)(N,{onSubmit:function(){var e=(0,k.Z)((function(e){var n,r,i,o;return(0,A.__generator)(this,(function(a){switch(a.label){case 0:e.preventDefault(),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,m()];case 2:return o=a.sent(),[3,4];case 3:return a.sent(),u("Something went wrong. Please try again."),[3,4];case 4:if("Repl"===(null===o||void 0===o||null===(n=o.data)||void 0===n?void 0:n.deleteReplDeployment.__typename))l("Template successfully unpublished");else if("NotFoundError"===(null===o||void 0===o||null===(r=o.data)||void 0===r?void 0:r.deleteReplDeployment.__typename)||"UserError"===(null===o||void 0===o||null===(i=o.data)||void 0===i?void 0:i.deleteReplDeployment.__typename))return u(o.data.deleteReplDeployment.message),[2];return t(),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),css:[c.l0.colWithGap(24)],children:[(0,i.tZ)(d.xv,{children:"Unpublishing a Template will remove it from the Templates page. The Repl itself will not be deleted, and you can always re-publish the Template again later."}),(0,i.BX)(s.G,{css:[c.l0.rowWithGap(8),c.l0.justify.end],children:[(0,i.tZ)(p.zx,{type:"button",text:"Cancel",onClick:function(){return t()}}),(0,i.tZ)(p.zx,{disabled:f.loading,colorway:"negative",text:f.loading?"Unpublishing Template...":"Yes, unpublish this Template",type:"submit",iconLeft:(0,i.tZ)(L.Z,{})})]})]})]})}var j=t(27849);function q(){var e=(0,f.Z)(["\n  mutation ReviewTemplateReview($input: ReviewTemplateInput!) {\n    reviewTemplate(input: $input) {\n      ... on TemplateReview {\n        id\n        repl {\n          id\n          ...ReplViewReplActionsPermissions\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return q=function(){return e},e}var M={},V=(0,v.Ps)(q(),j.jN);var K=t(58027),J=t(88132),Q=t(12318),ee=s.K.form;function ne(e){var n=e.replId,t=e.replSlug,o=e.reviewType,l=e.onDone,u=(0,w.Z)(),a=u.showConfirm,f=u.showError,v=(0,Q.Y)("promote"===o?t.toLowerCase():"",(function(e){if(!/a-z0-9-/.test(e))return{message:"Slug should only contain lowercase letters, numbers and hyphens"}})),Z="Something went wrong ".concat("promote"===o?"promoting":"demoting"," this Template"),b=(0,r.Z)(function(e){var n=(0,h.Z)({},M,e);return g.D(V,n)}({variables:{input:{replId:n,shouldPromote:"promote"===o,landingPageSlug:v.value||null}},onError:function(e){var n=e.message;f(n)},onCompleted:function(e){"TemplateReview"===e.reviewTemplate.__typename?(a("Template successfully ".concat("promote"===o?"promoted":"demoted")),l()):"UnauthorizedError"===e.reviewTemplate.__typename||"UserError"===e.reviewTemplate.__typename?f(e.reviewTemplate.message):f(Z)}}),2),y=b[0],C=b[1];return(0,i.BX)(s.G,{css:[c.l0.colWithGap(24)],children:[(0,i.tZ)(d.h4,{level:1,variant:"headerDefault",children:"promote"===o?"Promote Template":"Demote Template?"}),(0,i.BX)(ee,{onSubmit:function(){var e=(0,k.Z)((function(e){return(0,A.__generator)(this,(function(n){return e.preventDefault(),y(),[2]}))}));return function(n){return e.apply(this,arguments)}}(),css:[c.l0.colWithGap(24)],children:["promote"===o?(0,i.BX)(i.HY,{children:[(0,i.tZ)(d.xv,{children:"Promoting a Template will show the Template in the Create Repl modal. It will also make a landing page if you set a URL below."}),(0,i.BX)(s.G,{css:[c.l0.rowWithGap(8),c.l0.justify.end,c.l0.align.center],children:[(0,i.tZ)(d.xv,{multiline:!1,children:"replit.com/template/"}),(0,i.tZ)(m.II,{placeholder:"landing-page-slug",value:v.value||"",onChange:function(e){return v.setValue(e.target.value)}})]})]}):(0,i.tZ)(d.xv,{children:"Demoting a Template will remove the Template from the Create Repl modal."}),(0,i.BX)(s.G,{css:[c.l0.rowWithGap(8),c.l0.justify.end],children:[(0,i.tZ)(p.zx,{type:"button",text:"Cancel",onClick:function(){return l()}}),"promote"===o?(0,i.tZ)(p.zx,{type:"submit",disabled:C.loading,colorway:"primary",iconLeft:(0,i.tZ)(K.Z,{}),text:C.loading?"Promoting Template...":"Promote Template"}):(0,i.tZ)(p.zx,{type:"submit",disabled:C.loading,colorway:"negative",iconLeft:(0,i.tZ)(J.Z,{}),text:C.loading?"Demoting Template...":"Demote Template"})]})]})]})}var te=t(22642),re=t(1050),ie=t(96351),oe=t(84815);function le(){var e=(0,f.Z)(["\n  mutation HidePostToggleHiddenPost($postId: Int!, $isHidden: Boolean!) {\n    toggleHiddenPost(postId: $postId, isHidden: $isHidden) {\n      ... on Post {\n        id\n        isHidden\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return le=function(){return e},e}var ue={},ae=(0,v.Ps)(le());var se=s.K.form;function ce(e){var n=e.post,t=e.onDone,o=(0,w.Z)(),l=o.showConfirm,u=o.showError,a=(0,r.Z)(function(e){var n=(0,h.Z)({},ue,e);return g.D(ae,n)}({variables:{postId:n.id,isHidden:!n.isHidden},onCompleted:function(e){"Post"===e.toggleHiddenPost.__typename?n.isHidden?l("Post removed from the community."):l("Post allowed on community."):"NotFoundError"===e.toggleHiddenPost.__typename||"UserError"===e.toggleHiddenPost.__typename?u(e.toggleHiddenPost.message):u("An unexpected error occurred."),t()},onError:function(){u("Something went wrong. Please try again.")}}),2),m=a[0],f=a[1].loading,v=n.isHidden?"Yes, show this post":"Yes, hide this post",Z=n.isHidden?"Showing...":"Hiding...",b=n.isHidden?"Show this post to the Community":"Hide this post from the Community";return(0,i.BX)(s.G,{css:[c.l0.colWithGap(24)],children:[(0,i.tZ)(d.xv,{variant:"subheadBig",children:b}),(0,i.BX)(se,{onSubmit:function(e){e.preventDefault(),m()},css:[c.l0.colWithGap(32)],children:[(0,i.tZ)(d.xv,{children:"Hiding a post will remove it from the Community feeds, but the post will still be viewable to the creator. Showing a post will make it so all users will be able to discover this post though community feeds."}),(0,i.BX)(s.G,{css:[c.l0.rowWithGap(8),c.l0.justify.end],children:[(0,i.tZ)(s.G,{children:(0,i.tZ)(p.zx,{type:"button",text:"Cancel",onClick:t})}),(0,i.tZ)(s.G,{children:(0,i.tZ)(p.zx,{disabled:f,colorway:"negative",text:f?Z:v,type:"submit",iconLeft:(0,i.tZ)(L.Z,{})})})]})]})]})}var de,pe=t(90171),me=t(80866),he=t(51523),fe=t(16798),ve=t(82568);!function(e){e.warnAuthor="warnAuthor",e.banAuthor="banAuthor",e.reportRepl="reportRepl",e.unpublish="unpublish",e.unpublishTemplate="unpublishTemplate",e.promoteTemplate="promoteTemplate",e.demoteTemplate="demoteTemplate",e.modUnpublish="modUnpublish",e.modHide="modHide",e.update="update"}(de||(de={}));var ge=(0,ve.X)({item:[c.l0.rowWithGap(8),c.l0.align.center],destructiveItem:[c.l0.color.accentNegativeStronger],modPill:[c.l0.color.foregroundDefault,{textTransform:"uppercase"}]});function Ze(e){var n,t,c,p=e.repl,m=e.post,h=e.currentUser,f=e.source,v=(0,r.Z)(u.useState(null),2),g=v[0],Z=v[1],b=new Map,y=(0,pe.useRouter)(),w="/replEnvironmentDesktop"===y.pathname||"/replEnvironmentMobile"===y.pathname,R=(0,he.aq)(p);if(p.currentUserPermissions.containerWrite&&!w&&b.set("edit",{label:"Edit in Workspace",onClick:function(){return y.push(R.href,R.as)},icon:(0,i.tZ)(re.Z,{})}),p.currentUserPermissions.publish&&p.publishedAs&&p.publishedAs!==o.O2.Template&&b.set("update",{label:"Add an update",onClick:function(){return Z(de.update)},icon:(0,i.tZ)(te.Z,{})}),b.set("report",{label:"Report",isDestructive:!0,onClick:function(){return Z(de.reportRepl)},icon:(0,i.tZ)(C.Z,{})}),(null===h||void 0===h?void 0:h.isModerator)&&(b.set("warning",{label:"Warning",isMod:!0,icon:(0,i.tZ)(P.Z,{}),onClick:function(){return Z(de.warnAuthor)},isDestructive:!0}),b.set("banauthor",{label:"Ban author",isMod:!0,icon:(0,i.tZ)(I.Z,{}),onClick:function(){return Z(de.banAuthor)},isDestructive:!0}),null!==p.lastPublishedAt)){var D=(null===m||void 0===m?void 0:m.isHidden)?(0,i.tZ)(oe.Z,{}):(0,i.tZ)(L.Z,{}),x=(null===m||void 0===m?void 0:m.isHidden)?"Show post to Community":"Hide post from Community";m&&b.set("visibility",{label:x,icon:D,isMod:!0,isDestructive:!0,onClick:function(){return Z(de.modHide)}}),b.set("modunpublish",{label:"Unpublish Repl",isMod:!0,icon:(0,i.tZ)(I.Z,{}),isDestructive:!0,onClick:function(){return Z(de.modUnpublish)}})}(null===h||void 0===h?void 0:h.isAdmin)&&p.publishedAs===o.O2.Template&&((null===(c=p.templateReview)||void 0===c?void 0:c.promoted)?b.set("demote",{label:"Demote Template",icon:(0,i.tZ)(J.Z,{}),isDestructive:!0,onClick:function(){return Z(de.demoteTemplate)}}):b.set("promote",{label:"Promote Template",icon:(0,i.tZ)(K.Z,{}),onClick:function(){return Z(de.promoteTemplate)}}));return p.currentUserPermissions.publish&&null!==p.lastPublishedAt&&b.set("unpublish",{label:"Unpublish from Community",icon:(0,i.tZ)(L.Z,{}),isDestructive:!0,onClick:function(){return Z(de.unpublish)}}),p.publishedAs===o.O2.Template&&p.currentUserPermissions.publish&&b.set("unpublishtemplate",{label:"Unpublish Template",icon:(0,i.tZ)(L.Z,{}),isMod:!0,isDestructive:!0,onClick:function(){return Z(de.unpublishTemplate)}}),b.size?(0,i.BX)(i.HY,{children:[(0,i.tZ)(l.ZE,{icon:(0,i.tZ)(fe.Z,{}),onAction:function(e){var n;return null===(n=b.get(e))||void 0===n?void 0:n.onClick()},children:Array.from(b).map((function(e){var n=(0,r.Z)(e,2),t=n[0],o=n[1];return(0,i.tZ)(l.ck,{children:(0,i.BX)(s.G,{css:[ge.item,o.isDestructive&&ge.destructiveItem],children:[o.icon,(0,i.tZ)(d.xv,{multiline:!1,children:o.label}),o.isMod?(0,i.tZ)(ie.D,{text:"mod",css:ge.modPill}):null]})},t)}))}),(0,i.tZ)(a.u,{isOpen:g===de.reportRepl,onRequestClose:function(){return Z(null)},children:(0,i.tZ)(T,{replId:p.id,onDone:function(){return Z(null)}})}),(0,i.tZ)(a.u,{isOpen:g===de.unpublish,onRequestClose:function(){return Z(null)},children:(0,i.tZ)(X.Z,{repl:p,onDone:function(){return Z(null)},source:f})}),(0,i.tZ)(a.u,{isOpen:g===de.warnAuthor,onRequestClose:function(){return Z(null)},children:(0,i.tZ)(U,{username:null===(n=p.owner)||void 0===n?void 0:n.username,onDone:function(){return Z(null)}})}),(0,i.tZ)(a.u,{isOpen:g===de.banAuthor,onRequestClose:function(){return Z(null)},children:(0,i.tZ)(H,{username:null===(t=p.owner)||void 0===t?void 0:t.username,onDone:function(){return Z(null)}})}),(0,i.tZ)(a.u,{isOpen:g===de.unpublishTemplate,onRequestClose:function(){return Z(null)},children:(0,i.tZ)(Y,{replId:p.id,onDone:function(){return Z(null)}})}),(0,i.tZ)(a.u,{isOpen:g===de.demoteTemplate,onRequestClose:function(){return Z(null)},children:(0,i.tZ)(ne,{replId:p.id,replSlug:p.slug,reviewType:"demote",onDone:function(){return Z(null)}})}),(0,i.tZ)(a.u,{isOpen:g===de.promoteTemplate,onRequestClose:function(){return Z(null)},children:(0,i.tZ)(ne,{replId:p.id,replSlug:p.slug,reviewType:"promote",onDone:function(){return Z(null)}})}),(0,i.tZ)(a.u,{isOpen:g===de.modUnpublish,onRequestClose:function(){return Z(null)},children:(0,i.tZ)(X.Z,{repl:p,onDone:function(){return Z(null)},source:f})}),(0,i.tZ)(a.u,{isOpen:g===de.update,onRequestClose:function(){return Z(null)},children:(0,i.tZ)(me.Z,{repl:p,onDone:function(){return Z(null)},source:f})}),m&&(0,i.tZ)(a.u,{isOpen:g===de.modHide,onRequestClose:function(){return Z(null)},children:(0,i.tZ)(ce,{post:m,onDone:function(){return Z(null)}})})]}):null}},65897:function(e,n,t){t.d(n,{Z:function(){return C}});var r=t(2272),i=t(74985),o=(t(50959),t(85368)),l=t(39541),u=t(61284),a=t(45510),s=t(51631),c=t(72006),d=t(43119),p=t(71440),m=t(27849),h=t(50216);function f(){var e=(0,d.Z)(["\n  mutation UnpublishReplUnpublish($input: UnpublishReplFromCommunityInput!) {\n    unpublishReplFromCommunity(input: $input) {\n      ... on Repl {\n        id\n        ...ReplViewReplActionsPermissions\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}var v={},g=(0,p.Ps)(f(),m.jN);var Z=t(13233),b=t(625),y=t(62405),w=o.K.form;function C(e){var n=e.repl,t=e.source,d=e.onDone,p=(0,Z.Z)(),m=p.showConfirm,f=p.showError,C=(0,r.Z)(function(e){var n=(0,c.Z)({},v,e);return h.D(g,n)}({variables:{input:{replId:n.id}},onCompleted:function(e){if("Repl"===e.unpublishReplFromCommunity.__typename){var r=e.unpublishReplFromCommunity,i=r.runCount,o=r.likeCount,l=r.commentCount;(0,b.j)(b.U3.REPL_UNPUBLISHED,{source:t,numRuns:i,numLikes:o,numComments:l,replType:n.publishedAs===s.O2.Template?"template_repl":"regular_repl"}),m("Repl removed from the community.")}else"NotFoundError"===e.unpublishReplFromCommunity.__typename||"UnauthorizedError"===e.unpublishReplFromCommunity.__typename?f(e.unpublishReplFromCommunity.message):f("An unexpected error occurred.");d()},onError:function(){f("Something went wrong. Please try again.")},update:function(e){e.modify({id:e.identify({__typename:"Repl",id:n.id}),fields:{comments:function(e,n){return n.DELETE},tags:function(e,n){return n.DELETE}}})}}),2),R=C[0],T=C[1].loading;return(0,i.BX)(o.G,{css:[l.l0.colWithGap(24)],children:[(0,i.tZ)(u.xv,{variant:"subheadBig",children:"Unpublish this Repl from the Community"}),(0,i.BX)(w,{onSubmit:function(e){e.preventDefault(),R()},css:[l.l0.colWithGap(32)],children:[(0,i.tZ)(u.xv,{children:"Unpublishing a Repl will remove it from the Community. This action will delete all associated posts and tags. The Repl and all its comments will still be visible in your profile, but will not be shown in the Community or Trending views anymore. You can always re-publish the Repl again later."}),(0,i.BX)(o.G,{css:[l.l0.rowWithGap(8),l.l0.justify.end],children:[(0,i.tZ)(o.G,{children:(0,i.tZ)(a.zx,{type:"button",text:"Cancel",onClick:function(){return d()}})}),(0,i.tZ)(o.G,{children:(0,i.tZ)(a.zx,{disabled:T,colorway:"negative",text:T?"Unpublishing...":"Yes, unpublish this Repl",type:"submit",iconLeft:(0,i.tZ)(y.Z,{})})})]})]})]})}}}]);
//# sourceMappingURL=8677-61966da747c001e3.js.map