"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[671],{13455:function(e,n,t){t.d(n,{Z:function(){return v}});var r=t(2272),i=t(74985),o=t(50959),l=t(66482),a=t(48468),c=t(45510),u=t(85368),s=t(39541),d=t(33594),m=t(82568),p=t(56169),h=u.K.div,f=(0,m.X)({container:[s.l0.colWithGap(8)],contentContainer:[s.l0.position.relative],buttonContainer:[s.l0.align.start]});function v(e){var n=e.children,t=e.collapsedHeight,s=(0,r.Z)(o.useState(!1),2),m=s[0],v=s[1],Z=(0,p.D)(),g="".concat("ExpandableContent"+Z),b="".concat("ExpandableContent"+Z),C=(0,d.b)({defaultExpanded:!1}),R=C.isExpanded,x=C.toggle,w=(0,a.Z)((function(e){var n=e.height;void 0!==n&&v(n>t)}));return(0,i.BX)(u.G,{css:f.container,children:[(0,i.tZ)(u.G,{css:f.contentContainer,children:(0,i.tZ)(u.G,{id:b,"aria-labelledby":m?g:void 0,css:!R&&m?{height:t,overflow:"hidden",maskImage:"linear-gradient(to top, transparent, black 64px, black)"}:void 0,children:(0,i.tZ)(h,{ref:w,children:n})})}),m?(0,i.tZ)(u.G,{css:f.buttonContainer,children:(0,i.tZ)(c.zx,{outlined:!1,stretch:!1,small:!0,onClick:x,text:"Show ".concat(R?"Less":"More"),iconRight:(0,i.tZ)(l.Z,{rotate:R?180:0}),id:g,"aria-expanded":R,"aria-controls":b})}):null]})}},40570:function(e,n,t){var r=t(74985),i=t(85368),o=t(39541),l=t(82568),a=t(45510),c=t(33137),u=(0,l.X)({containerStretch:[o.l0.rowWithGap(1),o.l0.flex.growAndShrink(1)],containerShrink:o.l0.rowWithGap(1),ctaStretch:[o.l0.borderRadius(8,0,0,8),o.l0.flex.growAndShrink(1)],ctaShrink:o.l0.borderRadius(8,0,0,8),count:o.l0.borderRadius(0,8,8,0)});n.Z=function(e){return(0,r.BX)(i.G,{css:e.stretch?u.containerStretch:u.containerShrink,children:[(0,r.tZ)(a.zx,{colorway:e.colorway,iconLeft:e.icon,stretch:e.stretch,onClick:e.onClick,text:e.text,css:e.stretch?u.ctaStretch:u.ctaShrink}),(0,r.tZ)(a.zx,{colorway:e.colorway,onClick:e.onCountClick,text:(0,c.d)(e.count),css:u.count})]})}},42131:function(e,n,t){t.d(n,{Z:function(){return d}});var r=t(72006),i=t(43119),o=t(71440),l=t(7958),a=t(24635);function c(){var e=(0,i.Z)(["\n  query PublicForks(\n    $replId: String!\n    $count: Int!\n    $after: String\n    $search: String\n  ) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        publicForkCount\n        releasesForkCount\n        publishedAs\n        publicForks(count: $count, after: $after, search: $search) {\n          items {\n            id\n            ...ReplPostReplCardRepl\n          }\n          pageInfo {\n            nextCursor\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return c=function(){return e},e}var u={},s=(0,o.Ps)(c(),l.n);function d(e){return function(e){var n=(0,r.Z)({},u,e);return a.a(s,n)}({variables:e})}},23258:function(e,n,t){t.d(n,{Z:function(){return M},S:function(){return A}});var r=t(57135),i=t(72006),o=t(4405),l=t(96583),a=t(74985),c=t(50959),u=t(43119),s=t(71440);function d(){var e=(0,u.Z)(["\n  fragment PostBodyTextAreaUser on User {\n    id\n    username\n    image\n  }\n"]);return d=function(){return e},e}function m(){var e=(0,u.Z)(["\n  query PostBodyTextAreaUsernameSearch($query: String!, $limit: Int) {\n    usernameSearch(query: $query, limit: $limit) {\n      id\n      ...PostBodyTextAreaUser\n    }\n  }\n  ","\n"]);return m=function(){return e},e}var p=(0,s.Ps)(d()),h=(0,s.Ps)(m(),p);var f=t(94716),v=t(2272),Z=t(11066),g=t.n(Z),b=t(57835),C=t(21371);var R=t(77478),x=t(81962),w=t(9970),y=t(91669),k=t(8023),B=t(32905);function G(e){var n=e.initialValue,t=e.textTriggers,i=(0,c.useState)(n||""),o=i[0],a=i[1],u=(0,c.useRef)(null),s=function(e){var n=e.textTriggers,t=e.applySuggestion,r=(0,c.useRef)(null),i=(0,v.Z)((0,b.Z)(n),2),o=i[0].suggestions,l=i[1],a=(0,C.Kb)({items:(null===o||void 0===o?void 0:o.results)||[],defaultHighlightedIndex:0,isOpen:Boolean(o),onSelectedItemChange:function(e){var n=e.selectedItem;if(o&&n){var i=r.current;if(i){var l=o.applySuggestion({targetValue:i.value,suggestionValue:n.value}),a=l.fullValue,c=l.cursorIndex;t({fullValue:a,cursorIndex:c})}}}}),u=(0,c.useMemo)((function(){if(o&&r.current)return g()(r.current,o.textTrigger.index)}),[o]);return{ref:(0,c.useCallback)((function(e){r.current=e,l(e)}),[l]),suggestions:null===o||void 0===o?void 0:o.results,caretCoordinates:u,combobox:a}}({textTriggers:t,applySuggestion:function(e){var n=e.cursorIndex,t=e.fullValue;a(t),setTimeout((function(){u.current&&u.current.setSelectionRange(n,n)}))}}),d=s.combobox,m=s.caretCoordinates,p=s.suggestions,h=s.ref,Z=function(e){var n=(0,c.useRef)(null),t=(0,f.Z)(e.onChange),i=(0,f.Z)(e.onError),o=(0,c.useCallback)((function(e){n.current=e}),[]),a=(0,c.useCallback)(function(){var e=(0,r.Z)((function(e){var r,o,a,c,u,s,d,m,p,h,f,v;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:if(!(r=n.current))return[2];o=r.value,a=r.selectionStart?r.selectionStart:o.length,c=e.map((function(e){return"![Uploading ".concat(e.name,"...]()")})),u=o.substr(0,a),s=o.substr(a),d=(0,w.Z)(c),u&&d.unshift(u),s&&d.push(s),t.current(d.join("\n")),m=[],l.label=1;case 1:return l.trys.push([1,3,,4]),[4,(0,y.L0)(e)];case 2:return m=l.sent(),[3,4];case 3:return p=l.sent(),i.current(p),[2];case 4:h=[],l.label=5;case 5:return l.trys.push([5,7,,8]),[4,Promise.all(m.map((function(e){return(0,k.mh)(e,B.N.CommunityPost)})))];case 6:return h=l.sent(),[3,8];case 7:return f=l.sent(),i.current(f),[2];case 8:return n.current?(v=c.reduce((function(n,t,r){var i=e[r].name.replace(/\.[^/.]+$/,""),o=h[r],l=(0,x.Z)(o,Error)?"Error uploading":o.url;return n.replace(t,"![".concat(i,"](").concat(l,")"))}),n.current.value),t.current(v),[2]):[2]}}))}));return function(n){return e.apply(this,arguments)}}(),[t,i]),u=(0,c.useCallback)((function(e){var n=Array.from(e.clipboardData.items).filter((function(e){return"file"===e.kind})).map((function(e){return e.getAsFile()})).filter((function(e){return null!==e}));n.length&&a(n)}),[a]);return{ref:o,handleFiles:a,handlePaste:u}}({onChange:a,onError:function(){}}),G=Z.handleFiles,S=Z.handlePaste,E=Z.ref,P=(0,v.Z)((0,R.Z)((function(e){null!==e&&G(e)})),2)[1],I=(0,c.useCallback)((function(e){u.current=e,h(e),E(e)}),[h,E]),X=(0,c.useCallback)((function(e,n){var t;null===(t=u.current)||void 0===t||t.setSelectionRange(e,n)}),[]);return{ref:I,value:o,setValue:a,dropZoneHandlers:P,handlePaste:S,combobox:d,caretCoordinates:m,suggestions:p,setSelectionRange:X}}var S=t(25498),E=t(29838),P=t(97858),I=t(12341),X=t(12379),U=t(39541),T=t(61284),H=t(39137),_=t(85368),D=t(56169),W=_.K.div,F=_.K.li;function A(e){return V.apply(this,arguments)}function V(){return(V=(0,r.Z)((function(e){return(0,l.__generator)(this,(function(n){switch(n.label){case 0:if(!X.l)throw new Error("Expected apolloClient");return[4,X.l.query({query:h,variables:{query:e,limit:5}})];case 1:return[2,n.sent().data.usernameSearch]}}))}))).apply(this,arguments)}function M(e){var n,t=e.onChange,u=e.initialValue,s=e.autoFocus,d=e.placeholder,m=e.onKeyDown,p=e.onBlur,h=e.onFocus,v=e.userSearch,Z=e.showLabel,g=(0,c.useRef)(u),b=(0,f.Z)(t),C=function(e){var n=e.initialValue,t=e.userSearch,i=void 0===t?A:t,o=G({initialValue:n,textTriggers:{"@":function(){var e=(0,r.Z)((function(e){return(0,l.__generator)(this,(function(n){switch(n.label){case 0:return[4,i(e)];case 1:return[2,n.sent().map((function(e){return{icon:(0,a.tZ)(S.Z,{alt:e.username,src:e.image,size:16}),value:e.username}}))]}}))}));return function(n){return e.apply(this,arguments)}}()}});return o}({initialValue:u,userSearch:v}),R=C.setSelectionRange;(0,E.Z)((function(){b.current(C.value)}),[C.value]),(0,c.useEffect)((function(){if(s&&g.current){var e=g.current.length;R(e,e)}}),[s,R]);var x=(0,D.H)();return(0,a.BX)(W,(0,o.Z)((0,i.Z)({css:{position:"relative"}},C.combobox.getComboboxProps()),{children:[(0,a.BX)(_.G,{css:[U.l0.colWithGap(4)],children:[Z?(0,a.tZ)("label",{htmlFor:x("description"),children:(0,a.tZ)(T.xv,{color:"dimmer",variant:"small",multiline:!1,children:"Description"})}):null,(0,a.tZ)(H.B,(0,o.Z)((0,i.Z)({autoSize:!0},C.combobox.getInputProps({placeholder:d||"Write something about this post",ref:C.ref,onKeyDown:function(e){C.combobox.isOpen||"ArrowUp"!==e.key&&"ArrowDown"!==e.key||(e.nativeEvent.preventDownshiftDefault=!0),m&&m(e)},onBlur:p,onFocus:h,value:C.value,onChange:function(e){return C.setValue(e.currentTarget.value)},onPaste:C.handlePaste,autoFocus:s})),{css:[U.l0.width("100%"),{minHeight:U.TV.space32,resize:"vertical"}],id:x("description")}))]}),(0,a.tZ)(W,(0,o.Z)((0,i.Z)({},C.combobox.getMenuProps()),{css:[{position:"absolute"},C.caretCoordinates&&{top:C.caretCoordinates.top+C.caretCoordinates.height,left:C.caretCoordinates.left-4}],children:(null===(n=C.suggestions)||void 0===n?void 0:n.length)?(0,a.tZ)(P.Z,{css:{position:"relative",maxWidth:180},children:C.suggestions.map((function(e,n){return(0,a.tZ)(F,(0,o.Z)((0,i.Z)({},C.combobox.getItemProps({item:e,index:n})),{children:(0,a.tZ)(I.Z,{title:e.value,selected:C.combobox.selectedItem===e,highlighted:C.combobox.highlightedIndex===n,icon:e.icon?(0,a.tZ)(_.G,{children:e.icon}):void 0})}),e.value)}))}):null}))]}))}},36994:function(e,n,t){t.d(n,{EQ:function(){return F},Ex:function(){return D},Sh:function(){return W},Yt:function(){return I},g4:function(){return G},l0:function(){return H},nQ:function(){return E},pl:function(){return T},tE:function(){return S},wb:function(){return X}});var r=t(74985),i=t(50959),o=t(80731),l=t(2757),a=t(85368),c=t(66482),u=t(77712),s=t(55923),d=t(23258),m=t(22642),p=t(1050),h=t(70719),f=t(33814),v=t(62405),Z=t(84815),g=t(54873),b=t(15544),C=t(39541),R=t(3923),x=t(90349),w=t(61284),y=t(45510),k=t(70804),B=t(82568);function G(e){var n=e.onClick;return(0,r.tZ)(y.zx,{small:!0,onClick:n,outlined:!0,text:"Reply",colorway:"primary",css:[C.l0.p(4),{background:"transparent",borderColor:"transparent"}]})}function S(e){var n=e.onClick,t=e.repliesCount,i=e.isExpanded,o="".concat(i?"Hide":"View"," ").concat(t," ").concat((0,l.Z)("reply",t));return(0,r.tZ)(y.zx,{small:!0,onClick:n,outlined:!0,text:o,css:[C.l0.color.foregroundDimmer,C.l0.p(4),{background:"transparent",borderColor:"transparent","&> span":{marginRight:2}}],iconRight:(0,r.tZ)(c.Z,{size:12,rotate:i?0:270})})}var E,P=a.K.a;function I(e){var n=e.user,t=e.size,i=void 0===t?32:t;return(0,r.tZ)(s.Z,{username:n.username,children:(0,r.tZ)(u.ZP,{user:n,children:(0,r.tZ)(x.q,{size:i,username:n.username,src:n.image})})})}function X(e){var n=e.user,t=e.action,i=e.timeCreated;return(0,r.BX)(a.G,{css:[C.l0.flex.row,C.l0.align.center,C.l0.flex.wrap,{maxWidth:"100%",gap:C.TV.space4}],children:[(0,r.tZ)(s.Z,{username:n.username,children:(0,r.tZ)(u.ZP,{user:n,children:(0,r.tZ)(P,{css:[{color:"inherit"}],children:n.username})})}),t?(0,r.tZ)(w.xv,{color:"dimmer",multiline:!1,children:t}):null,(0,r.tZ)(R.E,{date:i,textColor:"dimmest",textVariant:"small"})]})}!function(e){e.Edit="Edit",e.Delete="Delete",e.Report="Report",e.Settings="Settings",e.Hide="Hide comment",e.Show="Show comment",e.CopyLink="Copy Link"}(E||(E={}));var U=(0,B.X)({item:[C.l0.rowWithGap(8),C.l0.align.center],destructiveItem:[C.l0.color.accentNegativeStronger],modPill:[C.l0.color.foregroundDefault,{textTransform:"uppercase"}]});function T(e){var n=e.canEdit,t=e.canDelete,i=e.canReport,l=e.canEditSettings,c=e.canHideComment,u=e.canShowComment,s=e.onAction,d=e.className,m=[];return m.push({label:E.CopyLink,icon:(0,r.tZ)(b.Z,{})}),n&&m.push({label:E.Edit,icon:(0,r.tZ)(p.Z,{})}),i&&m.push({label:E.Report,icon:(0,r.tZ)(h.Z,{})}),l&&m.push({label:E.Settings,icon:(0,r.tZ)(f.Z,{})}),c&&m.push({label:E.Hide,icon:(0,r.tZ)(v.Z,{})}),u&&m.push({label:E.Show,icon:(0,r.tZ)(Z.Z,{})}),t&&m.push({label:E.Delete,isDestructive:!0,icon:(0,r.tZ)(g.Z,{})}),m.length?(0,r.tZ)(a.G,{className:d,children:(0,r.tZ)(o.ZE,{icon:(0,r.tZ)(k.Z,{}),onAction:function(e){return s(e)},children:m.map((function(e){return(0,r.tZ)(o.ck,{children:(0,r.BX)(a.G,{css:[U.item,e.isDestructive&&U.destructiveItem],children:[e.icon,(0,r.tZ)(w.xv,{multiline:!1,children:e.label})]})},e.label)}))})}):null}var H=a.K.form,_=i.createContext(void 0);function D(){return i.useContext(_)}var W=_.Provider;function F(e){var n=e.initialValue,t=e.placeholder,o=e.onCancel,l=e.onSubmit,c=e.hideControls,u=e.buttonText,s=void 0===u?"Comment":u,p=e.buttonIcon,h=void 0===p?(0,r.tZ)(m.Z,{}):p,f=e.error,v=(0,i.useState)(!1),Z=v[0],g=v[1],b=(0,i.useState)(n),R=b[0],x=b[1],k=D();return(0,r.BX)(H,{css:[C.l0.colWithGap(8)],onSubmit:function(e){e.preventDefault(),l(R)},children:[(0,r.tZ)(d.Z,{onKeyDown:function(e){"Enter"===e.key&&e.metaKey&&l(R)},initialValue:R,placeholder:t,onChange:x,onFocus:function(){return g(!0)},userSearch:k}),f?(0,r.BX)(a.G,{css:[C.l0.flex.column,C.l0.colWithGap(8)],children:[(0,r.tZ)(w.xv,{css:[C.l0.color.redDefault],children:f})," ",(0,r.BX)(w.xv,{multiline:!1,children:["For more information,"," ",(0,r.tZ)("a",{href:"https://docs.replit.com/hosting/browsing-publishing-repls",target:"_blank",children:"check out the guidelines."})]})]}):null,Z||!c?(0,r.BX)(a.G,{css:[C.l0.rowWithGap(8),C.l0.justify.end],children:[(0,r.tZ)(y.zx,{text:"Cancel",onClick:function(e){g(!1),o&&o(e)}}),(0,r.tZ)(y.zx,{type:"submit",text:s,onClick:function(){},iconLeft:h,colorway:"primary",disabled:!R})]}):null]})}},80671:function(e,n,t){t.d(n,{G:function(){return Le},Z:function(){return Ne}});var r=t(57389),i=t(72006),o=t(4405),l=t(2272),a=t(9970),c=t(74985),u=t(50959),s=t(43312),d=t(51631),m=t(37459),p=t(625),h=t(57135),f=t(96583),v=t(19075),Z=t(39541),g=t(90171),b=t(85368),C=t(61284),R=t(71417),x=t(51034),w=t(13233),y=t(2757),k=t(35458);function B(e){var n=e.count;return n>0?(0,c.BX)(b.G,{css:[Z.l0.rowWithGap(4),Z.l0.align.center],children:[(0,c.tZ)(C.xv,{multiline:!1,children:n}),(0,c.tZ)(C.xv,{color:"dimmer",multiline:!1,children:(0,y.Z)("comment",n)})]}):(0,c.tZ)(C.xv,{color:"dimmer",children:"No comments yet"})}function G(e){var n,t=e.repl,r=(0,w.Z)(),a=r.showConfirm,u=r.showError,s=(0,l.Z)((0,x.k2)({onError:function(e){return u(e.message)},onCompleted:function(e){var n,t=e.setReplCommentSettings;"UserError"!==t.__typename?"Repl"===t.__typename&&a("Comments "+((null===(n=t.commentSettings)||void 0===n?void 0:n.enabled)?"enabled":"disabled")):u(t.message)}}),1),d=s[0],m=!(null===t||void 0===t?void 0:t.commentSettings)||t.commentSettings.enabled;return(0,c.BX)(b.G,{css:[Z.l0.rowWithGap(8),Z.l0.justify.spaceBetween,Z.l0.align.start],children:[(0,c.tZ)(b.G,{css:[Z.l0.flex.growAndShrink(1)],children:m?(0,c.tZ)(B,{count:t.commentCount}):(0,c.tZ)(C.xv,{color:"dimmer",children:"Adding comments has been turned off for this Repl."})}),(null===(n=t.currentUserPermissions)||void 0===n?void 0:n.changeCommentSettings)?(0,c.BX)(b.G,{css:[Z.l0.rowWithGap(8),Z.l0.align.center],children:[(0,c.tZ)(C.xv,{multiline:!1,children:"Allow comments"}),(0,c.tZ)(k.Z,{isOn:m,onChange:function(){return d({variables:{input:{replId:t.id,enabled:!m}},optimisticResponse:{__typename:"RootMutationType",setReplCommentSettings:(0,o.Z)((0,i.Z)({},t),{commentSettings:{__typename:"ReplCommentSetting",id:-1,enabled:!m}})}})}})]}):null]})}var S=t(23258),E=t(36994),P=t(32104);function I(e){var n,t,l,s=e.replId,d=(0,g.useRouter)().query,m=(0,v.ex)({ssr:!1,variables:{replId:s,after:d.after?d.after.toString():void 0,count:25}}),p=m.data,x=m.loading,w=m.fetchMore,y=m.refetch,k="Repl"===(null===p||void 0===p?void 0:p.repl.__typename)?p.repl:null,B=!(!k||"User"!==(null===(n=k.owner)||void 0===n?void 0:n.__typename))&&(null===k||void 0===k?void 0:k.owner.isBlockingCurrentUser),I=null===p||void 0===p?void 0:p.currentUser,X=null===k||void 0===k?void 0:k.comments.pageInfo,U=(0,u.useMemo)((function(){return k&&I?function(e){var n,t=e.repl,i=e.currentUser,o="User"===(null===(n=t.owner)||void 0===n?void 0:n.__typename)?(0,r.Z)({},t.owner.username,t.owner):{};return t.comments.items.forEach((function(e){e.user&&(o[e.user.username]=e.user),e.replies&&e.replies.forEach((function(e){(null===e||void 0===e?void 0:e.user)&&(o[e.user.username]=e.user)}))})),t.multiplayers.forEach((function(e){o[e.username]=e})),i&&delete o[i.username],Object.values(o)}({repl:k,currentUser:I}):[]}),[k,I]),T=!(null===k||void 0===k?void 0:k.commentSettings)||k.commentSettings.enabled,H=(l=U,function(){var e=(0,h.Z)((function(e){var n,t;return(0,f.__generator)(this,(function(r){switch(r.label){case 0:return n=null===e||void 0===e?void 0:e.toLowerCase(),(t=l.filter((function(e){return!n||e.username.toLowerCase().includes(n)}))).length<5&&e?[4,(0,S.S)(e)]:[3,2];case 1:r.sent().forEach((function(e){t.some((function(n){return n.username===e.username}))||t.push(e)})),r.label=2;case 2:return[2,t.slice(0,5)]}}))}));return function(n){return e.apply(this,arguments)}}());return(0,c.BX)(b.G,{css:[Z.l0.colWithGap(16)],children:[x?(0,c.BX)(b.G,{css:[Z.l0.rowWithGap(4),Z.l0.align.center],children:[(0,c.tZ)(P.Z,{}),(0,c.tZ)(C.xv,{multiline:!1,children:"Loading comments..."})]}):null,k&&!B?(0,c.BX)(c.HY,{children:[(0,c.BX)(E.Sh,{value:H,children:[(0,c.tZ)(G,{repl:k}),I&&T?(0,c.tZ)(R.H,{onComment:function(){return y()},replId:k.id,placeholder:k?"Say something about ".concat(k.title):""}):null,null===(t=k.comments)||void 0===t?void 0:t.items.filter((function(e){var n;return Boolean(null===e||void 0===e||null===(n=e.currentUserPermissions)||void 0===n?void 0:n.canHideComment)||!e.isHidden})).map((function(e){return(0,c.tZ)(R.x,{commentsEnabled:T,comment:e,onReply:function(){return y()},onDelete:function(){return y()}},e.id)}))]}),(null===X||void 0===X?void 0:X.nextCursor)&&k?(0,c.tZ)(b.G,{children:(0,c.tZ)("a",{href:k.url+"?after="+X.nextCursor,onClick:function(e){e.preventDefault(),x||w({variables:{after:X.nextCursor},updateQuery:function(e,n){if(!n||!n.fetchMoreResult)return e;var t="Repl"===e.repl.__typename?e.repl:null;if(!t)return e;var r=n.fetchMoreResult,l="Repl"===r.repl.__typename?r.repl:null;return l?(0,o.Z)((0,i.Z)({},r),{repl:(0,o.Z)((0,i.Z)({},l),{comments:(0,o.Z)((0,i.Z)({},l.comments),{items:(0,a.Z)(t.comments.items).concat((0,a.Z)(l.comments.items))})})}):e}})},children:x?"Loading...":"Load more comments"})}):null]}):null,k&&B?(0,c.BX)(b.G,{css:[Z.l0.colWithGap(24),Z.l0.align.center,Z.l0.textAlign.center],children:[(0,c.tZ)(C.xv,{variant:"subheadBig",children:"You\u2019re blocked"}),(0,c.BX)(C.xv,{multiline:!1,children:["You can\u2019t follow, comment or see"," ",k.owner&&"User"===k.owner.__typename?k.owner.username:"user","\u2019s Repls on their profile."]})]}):null]})}var X=t(93762),U=t(40570),T=t(49142),H=t(43743),_=t(82893),D=t.n(_),W=t(64450),F=t(51523),A=t(17755),V=t(77712),M=t(55923),L=t(38822),$=t(50946),O=t(33137),z=t(77551),N=t(82568),q=t(13455),Q=b.K.a,Y=function(){return(0,c.tZ)(C.xv,{color:"dimmest",multiline:!1,children:"\xb7"})},j=(0,N.X)({container:Z.l0.colWithGap(12),ownerWrapper:[Z.l0.colWithGap(8),(0,r.Z)({},Z.BC.min("tabletMin"),[Z.l0.rowWithGap(8),Z.l0.justify.spaceBetween,Z.l0.align.center])],owner:[Z.l0.flex.row,Z.l0.align.center,Z.l0.flex.wrap,{gap:Z.TV.space8}],username:Z.l0.color.foregroundDefault,info:[Z.l0.flex.row,Z.l0.flex.wrap,Z.l0.align.center,Z.l0.pb(4),{gap:4}],forkedUser:[Z.l0.rowWithGap(2),Z.l0.display.inlineFlex],forkedUserLink:Z.l0.color.foregroundDefault,tags:[Z.l0.flex.wrap,Z.l0.flex.row,Z.l0.pt(8),{gap:6}],li:{listStyle:"none"},pillLink:{padding:4,borderRadius:8,color:Z.TV.foregroundDimmer,":hover":{color:Z.TV.foregroundDefault}}});function K(e){var n,t,r,l,a,u,s,d=e.repl,m=e.currentUser,p=d.owner,h=d.lastPublishedAt||(null===(n=d.deployment)||void 0===n||null===(t=n.activeRelease)||void 0===t?void 0:t.timeCreated)||d.timeCreated,f=p&&p.id===(null===m||void 0===m?void 0:m.id);return(0,c.BX)(b.G,{css:j.container,children:[(0,c.tZ)(b.G,{css:j.ownerWrapper,children:p?(0,c.tZ)(c.HY,{children:(0,c.BX)(b.G,{css:j.owner,dataCy:"cover-page-user",children:[(0,c.tZ)(M.Z,{inline:!0,username:p.username,children:(0,c.tZ)(V.ZP,{user:p,children:(0,c.tZ)(Q,{css:j.username,children:(0,c.tZ)(A.n,{username:p.username,src:(null===p||void 0===p?void 0:p.image)||null,small:!0})})})}),(0,c.tZ)(C.xv,{variant:"small",multiline:!1,children:"User"===p.__typename&&p.followerCount>0?"".concat((0,O.d)(p.followerCount)," ").concat((0,y.Z)("follower",p.followerCount)):null}),!f&&(0,c.tZ)(z.Z,{subtle:!0,small:!0,user:p})]})}):(0,c.tZ)(A.n,{small:!0,src:null,username:"[deleted]"})}),(0,c.BX)(b.G,{children:[(0,c.BX)(b.G,{css:j.info,children:[h?(0,c.tZ)(C.xv,{color:"dimmer",multiline:!1,children:new Date(h).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}):null,d.runCount>0?(0,c.BX)(c.HY,{children:[(0,c.tZ)(Y,{}),(0,c.BX)(C.xv,{color:"dimmer",multiline:!1,children:[(0,O.d)(d.runCount)," ",(0,y.Z)("run",d.runCount)]})]}):null,(null===(r=d.source)||void 0===r||null===(l=r.deployment)||void 0===l||null===(a=l.repl)||void 0===a?void 0:a.owner)&&!(null===(u=d.origin)||void 0===u?void 0:u.owner)?(0,c.BX)(c.HY,{children:[(0,c.tZ)(Y,{}),(0,c.BX)(b.G,{css:[Z.l0.rowWithGap(4),Z.l0.align.center],children:[(0,c.BX)(C.xv,{color:"dimmer",multiline:!1,children:["Made with"," "]}),(0,c.tZ)(D(),(0,o.Z)((0,i.Z)({},(0,F.aq)(d.source.deployment.repl)),{passHref:!0,children:(0,c.tZ)(Q,{children:d.source.deployment.repl.templateLabel})}))]})]}):null,(null===(s=d.origin)||void 0===s?void 0:s.owner)?(0,c.BX)(c.HY,{children:[(0,c.tZ)(Y,{}),(0,c.BX)(C.xv,{color:"dimmer",multiline:!1,children:["Forked from"," ",(0,c.BX)(b.G,{css:j.forkedUser,children:[(0,c.tZ)(V.ZP,{user:d.origin.owner,css:j.forkedUserLink,children:(0,c.tZ)("a",{children:d.origin.owner.username})}),(0,c.tZ)(C.xv,{multiline:!1,children:"/"}),(0,c.tZ)(D(),(0,o.Z)((0,i.Z)({},(0,F.aq)(d.origin)),{css:j.forkedUserLink,children:(0,c.tZ)("a",{children:d.origin.title})}))]})]})]}):null]}),d.description?(0,c.tZ)(q.Z,{collapsedHeight:116,children:(0,c.tZ)(W.Z,{children:d.description})}):null,d.tags.length?(0,c.tZ)(b.G,{children:(0,c.tZ)(b.G,{tag:"ul","aria-label":"Tags",css:j.tags,children:d.tags.map((function(e){var n=(0,L.M6)(e.id);return(0,c.tZ)("li",{css:j.li,children:(0,c.tZ)($.P,{text:"#"+e.id,css:j.pillLink,href:n.href,as:n.as})},e.id)}))})}):null]})]})}var J,ee,ne=t(1966),te=t(6933),re=t(62376),ie=t(63128),oe=t(2041),le=t(45510),ae=t(86302),ce=t(33280),ue=t(66539),se=t(39137),de=t(90273),me=t(84607),pe=t(8622),he=t(32973),fe=t(88541),ve=t(73853),Ze=t(34338),ge=t(96966),be=t(77511),Ce=t(53212),Re=t(82655),xe=t(18171),we=t(48506),ye=t(8885),ke=t(67121),Be=t(87138),Ge=t(80336),Se=t(1050),Ee=t(1809),Pe=t(15544),Ie=t(49287),Xe=t(42131),Ue=t(23142),Te=t(29203),He=t(60566),_e=(0,s.F4)("\n  0% { opacity: 1; }\n  50% { opacity: 0.7; }\n  100% { opacity: 1; }\n"),De=(0,s.F4)("\n  0% { transform: rotate(0.3deg); }\n  50% { transform: rotate(-0.3deg); }\n  100% { transform: rotate(0.3deg); }\n"),We={transparent:(0,s.iv)([Z.l0.width(32),{borderColor:"transparent"}]),squareButton:(0,s.iv)([Z.l0.width(32)]),loadingBlock:(0,s.iv)([Z.l0.borderRadius(8),{animation:_e+" 2s infinite"}]),jiggle:(0,s.iv)({animation:De+" 0.2s infinite linear"}),cross:(0,s.iv)([Z.l0.backgroundColor.redDefault,Z.l0.borderRadius("full"),Z.l0.position.absolute,Z.l0.width(20),Z.l0.height(20),Z.l0.center,Z.l0.top(-10),Z.l0.right(-10),Z.l0.cursor.pointer])};!function(e){e.ForksModal="ForksModal",e.AuthPrompt="AuthPrompt",e.ForkModal="ForkModal",e.AddExampleModal="AddExampleModal"}(J||(J={}));var Fe=(0,N.X)({buttons:[Z.l0.rowWithGap(8),Z.l0.align.center,Z.l0.width("100%"),Z.l0.pt(16),Z.l0.pb(4),Z.l0.px(8),Z.l0.overflowX("auto"),{scrollbarWidth:"none","&::-webkit-scrollbar":{height:0}}],templateWrapper:[Z.l0.pt(16),Z.l0.pb(4),Z.l0.overflowX("auto"),(ee={flexDirection:"row",gap:8},(0,r.Z)(ee,Z.BC.min("tabletMax"),{flexDirection:"column",gap:12}),(0,r.Z)(ee,"scrollbarWidth","none"),(0,r.Z)(ee,"&::-webkit-scrollbar",{height:0}),ee)],templateButton:(0,r.Z)({paddingLeft:8,flexGrow:0},Z.BC.min("tabletMax"),{flexGrow:1,paddingRight:16}),buttonsForTemplate:[Z.l0.rowWithGap(8),Z.l0.pr(16),Z.l0.align.center,(0,r.Z)({},Z.BC.min("tabletMax"),[Z.l0.pl(8)])],iconButtons:[Z.l0.flex.row,{marginLeft:-2,gap:Z.TV.space8}]});function Ae(e){var n,t=e.repl,r=e.currentUser,a=e.runRepl,u=e.stopRepl,s=e.runState,m=e.connectionState,h=e.showUrlOutput,f=e.isFileTreeOpen,v=e.setIsFileTreeOpen,Z=e.activeModal,C=e.setActiveModal,R=(0,l.Z)((0,H.Z)(),2),x=R[0],y=R[1].loading,k=(0,w.Z)().showConfirm,B=(0,fe.P5)({controlName:"flag-repl-analytics",logFlagToAnalytics:!1}),G=(0,c.tZ)(X.DZ,{runCount:0,runState:s,connectionState:m,publishedAs:t.publishedAs,run:a,stop:u}),S=t.currentUserPermissions.containerWrite,E=t.publishedAs===d.O2.Template,P=S&&B&&t.analyticsUrl?(0,c.tZ)(ue.u,{tooltip:"Repl Analytics",children:(0,c.tZ)(ae.Z,{iconLeft:(0,c.tZ)(de.Z,{}),stretch:!0,href:t.analyticsUrl,text:"",css:We.squareButton})}):null,I=h?(0,c.tZ)(ue.u,{tooltip:"Open in new tab",children:(0,c.tZ)(ae.Z,{iconLeft:(0,c.tZ)(he.Z,{}),text:"",href:t.prodUrl,target:"_blank",onClick:function(){return(0,p.j)(p.U3.COVER_PAGE_NEW_TAB_OPENED)},css:We.squareButton})}):null,_=S?(0,c.tZ)(ue.u,{tooltip:f?"Hide code":"Show code",children:(0,c.tZ)(le.zx,{iconLeft:(0,c.tZ)(Ee.Z,{}),text:"",onClick:function(){return v((function(e){return!e}))},css:We.squareButton})}):(0,c.tZ)(le.zx,{text:f?"Hide code":"Show code",onClick:function(){return v((function(e){return!e}))}}),D=(0,c.tZ)(le.zx,{iconLeft:(0,c.tZ)(Pe.Z,{}),text:"",onClick:function(){(0,He.Z)("".concat(window.location.origin).concat(t.url)).then((function(){k("Repl link copied to clipboard!")}))},css:We.squareButton}),W=E||!S,F=E?{text:y?"Forking...":"Use Template",icon:(0,c.tZ)(pe.Z,{}),count:t.releasesForkCount,stretch:W}:{text:y?"Forking...":"Fork",icon:(0,c.tZ)(me.Z,{}),count:t.publicForkCount,stretch:W},A=(0,c.tZ)(U.Z,(0,o.Z)((0,i.Z)({},F),{onClick:function(){if(!r)return C(J.AuthPrompt),void(0,p.j)(p.U3.SIGNUP_REQUESTED,{from:"cover-page",location:"fork",authFormPlacement:"modal"});y||C(J.ForkModal)},icon:(0,c.tZ)(me.Z,{}),colorway:W?"primary":void 0,onCountClick:function(){return C(J.ForksModal)}})),V=(0,c.tZ)(oe.u,{maxWidth:512,isOpen:"ForksModal"===Z,onRequestClose:function(){return C(null)},children:(0,c.tZ)(ne.Z,{replId:t.id})}),M=(0,c.tZ)(oe.u,{isOpen:Z===J.ForkModal,onRequestClose:function(){return C(null)},children:(0,c.tZ)(T.Z,{onFork:function(e,n,r,i){var o,l;x({originId:t.id,teamId:e,title:n,description:r,isPrivate:i,replReleaseId:(null===(o=t.deployment)||void 0===o||null===(l=o.activeRelease)||void 0===l?void 0:l.id)||void 0,forkToPersonal:!e,trackingData:{forkSource:"coverPage",isApp:t.publishedAs===d.O2.App,isTemplate:t.publishedAs===d.O2.Template}})},initialTitle:t.title,initialDescription:null!==(n=t.description)&&void 0!==n?n:"",initialPrivacy:!1,hideModal:function(){return C(null)},teamContext:null===r||void 0===r?void 0:r.username,template:t.publishedAs===d.O2.Template})}),L=(0,g.useRouter)(),$=!(0,be.Vg)(L)?(0,c.tZ)(ge.ZP,{repl:t,currentUser:r,surface:!1}):null,O=S?(0,c.BX)(c.HY,{children:[V,M]}):(0,c.BX)(c.HY,{children:[(0,c.tZ)(Ue.Z,{isOpen:Z===J.AuthPrompt,onClose:function(){return C(null)},loginTitle:"Log in to fork this Repl",signupTitle:"Sign up to fork this Repl",description:"Create an account to fork this Repl and add it to your account.",textOnSuccess:"Success!",showAnimationOnSuccess:!0,onSuccess:function(){C(J.ForkModal)},onFailure:function(){},trackSource:"fork"}),V,M]}),z=(0,c.tZ)(Ce.Z,{repl:t,currentUser:r,source:"coverPage"});return W?(0,c.BX)(c.HY,{children:[(0,c.BX)(b.G,{css:Fe.templateWrapper,children:[(0,c.tZ)(b.G,{css:Fe.templateButton,children:A}),(0,c.BX)(b.G,{css:Fe.buttonsForTemplate,children:[G,$,_,D,(0,c.BX)(b.G,{css:Fe.iconButtons,children:[P,I,z]})]})]}),O]}):(0,c.BX)(c.HY,{children:[(0,c.BX)(b.G,{css:Fe.buttons,children:[G,A,$,_,(0,c.BX)(b.G,{css:Fe.iconButtons,children:[P,I,z]})]}),O]})}function Ve(e){var n=e.className,t=e.children;return(0,c.tZ)(b.G,{css:$e.section,className:n,children:t})}var Me=(0,N.X)({container:[Z.l0.flex.growAndShrink(1),(0,r.Z)({},(0,Ze.et)("tabletMax"),{height:"calc(100vh - 60px)",flexDirection:"row"})],viewer:[Z.l0.p(12),(0,r.Z)({height:"calc(57vw + 51px)",margin:"16px 16px 0px",border:"1px solid "+Z.TV.outlineDimmest,borderRadius:8,overflow:"hidden","> *":{height:"100%"}},(0,Ze.et)("tabletMax"),{flex:1,height:"100%",margin:0,border:"none",borderRadius:0})],viewerBlock:[We.loadingBlock,Z.l0.width("100%"),Z.l0.height("100%")],sidebar:[(0,r.Z)({height:"100%"},(0,Ze.et)("tabletMax"),{width:400,borderLeft:"1px solid "+Z.TV.outlineDimmest})],column:[Z.l0.align.center,Z.l0.rowWithGap(8)],block1:[We.loadingBlock,Z.l0.width(32),Z.l0.height(32),Z.l0.borderRadius("full")],block2:[We.loadingBlock,Z.l0.height(30)],block3:[We.loadingBlock,Z.l0.height(80)],comments:Z.l0.flex.growAndShrink(1),block4:[We.loadingBlock,Z.l0.height("100%")]});function Le(e){var n=e.embedded;return(0,c.BX)(b.G,{css:Me.container,children:[(0,c.tZ)(b.G,{css:Me.viewer,children:(0,c.tZ)(ie.Tg,{elevated:!0,css:Me.viewerBlock})}),(0,c.BX)(b.G,{css:[$e.sidebar],children:[(0,c.BX)(Ve,{children:[(0,c.BX)(b.G,{css:Me.column,children:[(0,c.tZ)(ie.Tg,{elevated:!0,css:Me.block1}),(0,c.tZ)(C.xv,{color:"dimmest",variant:"subheadBig",multiline:!1,children:"Loading..."})]}),(0,c.tZ)(ie.Tg,{elevated:!0,css:Me.block2}),(0,c.tZ)(ie.Tg,{elevated:!0,css:Me.block3})]}),n?null:(0,c.tZ)(ce.R,{}),(0,c.tZ)(Ve,{css:Me.comments,children:(0,c.tZ)(ie.Tg,{elevated:!0,css:Me.block4})})]})]})}var $e=(0,N.X)({page:[Z.l0.flex.growAndShrink(1),(0,r.Z)({},(0,Ze.et)("tabletMax"),{height:"calc(100vh - 60px)",flexDirection:"row"})],viewer:[Z.l0.p(8),(0,r.Z)({height:"calc(57vw + 51px)","> *":{height:"100%"}," iframe":{borderRadius:0}},(0,Ze.et)("tabletMax"),{flex:1,height:"100%",margin:0,border:"none",borderRadius:0,"& .xterm-viewport":{borderRadius:"0 !important"}})],output:[Z.l0.borderRadius(4),Z.l0.border({color:Z.TV.outlineDimmest}),Z.l0.overflow("hidden")],sidebar:(0,r.Z)({},(0,Ze.et)("tabletMax"),{height:"100%",overflow:"auto",width:400}),section:[Z.l0.p(8),Z.l0.pb(16),Z.l0.colWithGap(8)],dividerEmbedded:{width:"calc(100% - 12px)",alignSelf:"flex-end"},examples:[Z.l0.colWithGap(12)],examplesHeader:[Z.l0.flex.row,Z.l0.justify.spaceBetween],examplesButtons:[Z.l0.rowWithGap(8)],examplesTitle:[Z.l0.colWithGap(4)],addExampleInput:[Z.l0.flex.growAndShrink(1)],addExampleModal:[Z.l0.p(4),Z.l0.colWithGap(16)],addExampleForks:[Z.l0.colWithGap(16)]});function Oe(e){var n,t,r=e.repl,s=e.addExample,d=(0,l.Z)(u.useState(""),2),m=d[0],p=d[1],h=(0,Xe.Z)({replId:r.id,count:10,search:m}),f=h.data,v=h.loading,Z=h.fetchMore,g="Repl"===(null===f||void 0===f?void 0:f.repl.__typename)?f.repl:null,R=(null!==(t=null===g||void 0===g?void 0:g.publicForks.items)&&void 0!==t?t:[]).filter((function(e){return!r.examples.some((function(n){return n.id===e.id}))}));return(0,c.BX)(b.G,{css:$e.addExampleModal,children:[(0,c.tZ)(C.xv,{variant:"subheadBig",multiline:!1,children:"Add a Repl as example from forks"}),(0,c.tZ)(se.II,{css:$e.addExampleInput,value:m,onChange:function(e){return p(e.target.value)},placeholder:"Search for a Repl that uses this template"}),R.length>0?(0,c.tZ)(b.G,{css:$e.addExampleForks,children:R.map((function(e){return(0,c.tZ)(re.ZP,{repl:e,showOwner:!0,onReplClick:function(n){n.preventDefault(),confirm("Add Repl ".concat(e.title," as an example repl?"))&&s(e.id)}},e.id)}))}):null,v?(0,c.tZ)(P.Z,{}):null,(null===g||void 0===g||null===(n=g.publicForks)||void 0===n?void 0:n.pageInfo.nextCursor)?(0,c.tZ)(le.zx,{text:v?"Loading...":"Load more",onClick:function(){return Z({variables:{after:g.publicForks.pageInfo.nextCursor},updateQuery:function(e,n){if(!n||!n.fetchMoreResult)return e;var t="Repl"===e.repl.__typename?e.repl:null;if(!t)return e;var r=n.fetchMoreResult,l="Repl"===r.repl.__typename?r.repl:null;return l?(0,o.Z)((0,i.Z)({},r),{repl:(0,o.Z)((0,i.Z)({},l),{publicForks:(0,o.Z)((0,i.Z)({},l.publicForks),{items:(0,a.Z)(t.publicForks.items).concat((0,a.Z)(l.publicForks.items))})})}):e}})}}):null,v||0!==R.length?null:(0,c.tZ)(C.xv,{color:"dimmer",multiline:!1,children:"No Repls to show!"})]})}function ze(e){var n=e.repl,t=e.activeModal,r=e.setActiveModal,i=n.currentUserPermissions.containerWrite,o=(0,l.Z)(u.useState(!1),2),s=o[0],d=o[1],p=(0,l.Z)(u.useState(n.examples),2),h=p[0],f=p[1],v=(0,w.Z)().showError,Z=(0,l.Z)((0,m.Cn)({onCompleted:function(e){var n,t=e.setReplExamples;"Repl"===t.__typename?f(t.examples):(null===(n=t.__typename)||void 0===n?void 0:n.endsWith("Error"))&&"message"in t&&v(t.message)},onError:function(e){v(e.message)}}),2),g=Z[0],R=Z[1];return u.useEffect((function(){0===h.length&&d(!1)}),[h.length]),(0,c.BX)(b.G,{css:$e.examples,children:[(0,c.BX)(b.G,{css:$e.examplesTitle,children:[(0,c.BX)(b.G,{css:$e.examplesHeader,children:[(0,c.tZ)(C.xv,{variant:"subheadBig",multiline:!1,children:"Examples"}),i?(0,c.BX)(b.G,{css:$e.examplesButtons,children:[h.length>0?(0,c.tZ)(le.zx,{small:!0,iconLeft:(0,c.tZ)(Se.Z,{}),text:s?"Done":"Edit",colorway:s?"primary":void 0,onClick:function(){return d(!s)}}):null,(0,c.tZ)(le.zx,{small:!0,iconLeft:(0,c.tZ)(pe.Z,{}),text:"",onClick:function(){return r(J.AddExampleModal)}})]}):null]}),(0,c.tZ)(C.xv,{color:"dimmest",children:"Example Repls of what people can make from this template"})]}),h.map((function(e){return(0,c.BX)(b.G,{css:s?[We.jiggle]:[],children:[(0,c.tZ)(re.ZP,{repl:e,showOwner:!0,onReplClick:function(e){s&&e.preventDefault()}}),s?(0,c.tZ)(b.G,{tag:"button",alt:"delete",css:[We.cross],onClick:function(){R.loading||confirm("Delete example ".concat(e.title,"?"))&&g({variables:{input:{replId:n.id,exampleReplIds:h.filter((function(n){return n.id!==e.id})).map((function(e){return e.id}))}}})},children:(0,c.tZ)(Ge.Z,{})}):null]},e.id)})),(0,c.tZ)(oe.u,{isOpen:t===J.AddExampleModal,onRequestClose:function(){r(null)},children:(0,c.tZ)(Oe,{repl:n,addExample:function(e){g({variables:{input:{replId:n.id,exampleReplIds:(0,a.Z)(h.map((function(e){return e.id}))).concat([e])}}})}})})]})}function Ne(e){var n=e.repl,t=e.currentUser,r=e.embedded,i=(0,Re.Z)({enableDeeplinks:!0,repl:n,currentUser:t}),o=i.openFile,a=i.viewState,s=i.fs,m=i.dotReplit,p=i.runRepl,h=i.stopRepl,f=i.runState,v=i.bsodId,g=i.isFileTreeOpen,C=i.setIsFileTreeOpen,R=i.showUrlOutput,x=i.nonBsodUnrecoverableError,w=i.connectionState,y=(0,xe.Z)((function(){return{id:n.id,slug:n.slug,language:n.language}}),[n.id,n.language,n.slug]),k=(0,fe.P5)({controlName:"flag-template-examples",logFlagToAnalytics:!1}),B=n.currentUserPermissions.containerWrite,G=n.publishedAs===d.O2.Template,S="code"===(null===a||void 0===a?void 0:a.type)&&a.deeplink,E=(0,l.Z)(u.useState(S?S.path:null),2),P=E[0],U=E[1];u.useEffect((function(){U(S?S.path:null)}),[S,null===a||void 0===a?void 0:a.type]);var T=(0,l.Z)(u.useState(null),2),H=T[0],_=T[1];return x===ke.G.NotAllowed?(0,c.tZ)(we.Z.Provider,{value:y,children:(0,c.tZ)(Be.Z,{isOpen:!0})}):(0,c.BX)(b.G,{css:$e.page,children:[(0,c.tZ)(b.G,{css:$e.viewer,children:(0,c.tZ)(we.Z.Provider,{value:y,children:(0,c.tZ)(Te.S2,{children:v?(0,c.tZ)(ye.Z,{}):(0,c.tZ)(ie.Tg,{elevated:!0,css:$e.output,children:(0,c.tZ)(X.y6,{repl:n,runRepl:p,viewState:a,connectionState:w,activePath:P,isFileTreeOpen:g,setIsFileTreeOpen:C,openFile:o,fs:s,dotReplit:m})})})})}),(0,c.BX)(b.G,{css:[$e.sidebar],children:[(0,c.tZ)(Ae,{repl:n,currentUser:t,runRepl:p,stopRepl:h,runState:f,connectionState:w,showUrlOutput:R,isFileTreeOpen:g,setIsFileTreeOpen:C,activeModal:H,setActiveModal:_}),(0,c.BX)(Ve,{children:[(0,c.tZ)(te.Z,{repl:n,iconEditable:n.currentUserPermissions.changeIconUrl,hideActions:!0,small:!0,currentUser:t}),(0,c.tZ)(K,{repl:n,currentUser:t})]}),(0,c.tZ)(ce.R,{css:r&&$e.dividerEmbedded}),(null===t||void 0===t?void 0:t.isAdmin)&&window.location.search.includes("debug=1")?(0,c.BX)(c.HY,{children:[(0,c.tZ)(Ve,{children:(0,c.tZ)(b.G,{css:[Z.l0.colWithGap(16),Z.l0.p(4)],children:(0,c.tZ)(Ie.Z,{showFlag:!0,replId:n.id})})}),(0,c.tZ)(ce.R,{css:r&&$e.dividerEmbedded})]}):null,k&&G&&(n.examples.length>0||B)?(0,c.BX)(c.HY,{children:[(0,c.tZ)(Ve,{children:(0,c.tZ)(ze,{repl:n,activeModal:H,setActiveModal:_})}),(0,c.tZ)(ce.R,{})]}):null,(0,c.tZ)(Ve,{children:(0,c.tZ)(ve.Z,{replId:n.id})}),(0,c.tZ)(ce.R,{css:r&&$e.dividerEmbedded}),(0,c.tZ)(Ve,{children:(0,c.tZ)(I,{replId:n.id})})]})]})}},64450:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(74985),i=(t(50959),t(47900));function o(e){var n=e.children,t=e.className,o=e.useRemarkGfm;return(0,r.tZ)(i.ZP,{background:!1,skipHtml:!0,mentionsLink:!0,unwrapDisallowed:!0,lineBreaks:!0,className:t,useRemarkGfm:o,children:n})}},1966:function(e,n,t){t.d(n,{Z:function(){return v}});var r=t(72006),i=t(4405),o=t(9970),l=t(74985),a=(t(50959),t(61284)),c=t(85368),u=t(39541),s=t(45510),d=t(2757),m=t(62376),p=t(63128),h=t(42131),f=t(51631);function v(e){var n=e.replId,t=(0,h.Z)({replId:n,count:10}),v=t.data,Z=t.fetchMore,g=t.loading,b="Repl"===(null===v||void 0===v?void 0:v.repl.__typename)?v.repl:null;if(!b)return(0,l.tZ)(c.G,{css:[u.l0.colWithGap(8)],children:(0,l.tZ)(c.G,{children:g?(0,l.tZ)(a.xv,{color:"dimmest",variant:"subheadDefault",multiline:!1,children:"Loading forks..."}):null})});var C=b.publishedAs===f.O2.Template,R=b.publicForks,x=C?b.releasesForkCount:b.publicForkCount,w=R.items.length||0;return(0,l.BX)(c.G,{css:[u.l0.colWithGap(8)],children:[(0,l.BX)(c.G,{children:[null!==x?(0,l.BX)(c.G,{css:[u.l0.colWithGap(12)],children:[(0,l.BX)(c.G,{css:[u.l0.display.block],children:[(0,l.tZ)(a.xv,{variant:"subheadDefault",multiline:!1,children:x})," ",(0,l.BX)(a.xv,{color:"dimmest",variant:"subheadDefault",multiline:!1,children:[(0,d.Z)("forks",x),x!==w?" total":null]})]}),x>0&&w>0?(0,l.tZ)(a.xv,{variant:"subheadBig",multiline:!1,children:"Public forks"}):null,x>0&&0===w?(0,l.tZ)(a.xv,{variant:"subheadBig",multiline:!1,children:"No public forks"}):null]}):null,g?(0,l.tZ)(a.xv,{color:"dimmest",variant:"subheadDefault",multiline:!1,children:"Loading forks..."}):null]}),(0,l.BX)(c.G,{css:[u.l0.flex.growAndShrink(1),u.l0.colWithGap(24)],children:[(0,l.tZ)(c.G,{css:[{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:u.TV.space16,gridAutoFlow:"dense"}],children:R?R.items.map((function(e){return(0,l.tZ)(p.Tg,{background:"default",css:[u.l0.borderRadius(8)],children:(0,l.tZ)(m.ZP,{showOwner:!0,repl:e})},e.id)})):null}),(null===R||void 0===R?void 0:R.pageInfo.nextCursor)?(0,l.tZ)(s.zx,{disabled:g,text:g?"Loading...":"Load more",onClick:function(){g||Z({variables:{after:R.pageInfo.nextCursor},updateQuery:function(e,n){if(!n||!n.fetchMoreResult)return e;var t="Repl"===e.repl.__typename?e.repl:null;if(!t)return e;var l=n.fetchMoreResult,a="Repl"===l.repl.__typename?l.repl:null;return a?(0,i.Z)((0,r.Z)({},l),{repl:(0,i.Z)((0,r.Z)({},a),{publicForks:(0,i.Z)((0,r.Z)({},a.publicForks),{items:(0,o.Z)(t.publicForks.items).concat((0,o.Z)(a.publicForks.items))})})}):e}})}}):null]})]})}},66578:function(e,n,t){t.d(n,{P9:function(){return b},Qp:function(){return w},cT:function(){return k},cq:function(){return E},g:function(){return G},kz:function(){return I},oY:function(){return U},pn:function(){return H},xB:function(){return R}});var r=t(72006),i=t(43119),o=t(71440),l=t(3839),a=t(50216);function c(){var e=(0,i.Z)(["\n  fragment ReplViewCommentsUser on User {\n    id\n    username\n    image\n    fullName\n    isBlockingCurrentUser\n    ...UserLinkUser\n  }\n  ","\n"]);return c=function(){return e},e}function u(){var e=(0,i.Z)(["\n  fragment ReplViewCommentsReplComment on ReplComment {\n    id\n    body\n    repl {\n      id\n      url\n    }\n    timeCreated\n    currentUserPermissions {\n      id\n      edit\n      delete\n      canHideComment\n      report\n    }\n    user {\n      id\n      ...ReplViewCommentsUser\n    }\n    post {\n      id\n      title\n      canPin\n      canHide\n      canChangeBoard\n      canReport\n      hasReported\n    }\n    isHidden\n  }\n  ","\n"]);return u=function(){return e},e}function s(){var e=(0,i.Z)(["\n  fragment ReplViewCommentsReplCommentThread on ReplComment {\n    id\n    ...ReplViewCommentsReplComment\n    replies {\n      id\n      ...ReplViewCommentsReplComment\n    }\n  }\n  ","\n"]);return s=function(){return e},e}function d(){var e=(0,i.Z)(["\n  mutation ReplViewCreateReplComment($input: CreateReplCommentInput!) {\n    createReplComment(input: $input) {\n      ... on ReplComment {\n        id\n        ...ReplViewCommentsReplComment\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function m(){var e=(0,i.Z)(["\n  mutation ReplViewCreateReplCommentReply(\n    $input: CreateReplCommentReplyInput!\n  ) {\n    createReplCommentReply(input: $input) {\n      ... on ReplComment {\n        id\n        ...ReplViewCommentsReplComment\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}function p(){var e=(0,i.Z)(["\n  mutation ReplViewCommentsUpdateReplComment($input: UpdateReplCommentInput!) {\n    updateReplComment(input: $input) {\n      ... on ReplComment {\n        id\n        body\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return p=function(){return e},e}function h(){var e=(0,i.Z)(["\n  mutation ReplViewCommentsDeleteReplComment($id: Int!) {\n    deleteReplComment(id: $id) {\n      ... on ReplComment {\n        id\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return h=function(){return e},e}function f(){var e=(0,i.Z)(["\n  mutation ReplViewCommentsUpdateReplPost($input: UpdatePostInput!) {\n    updatePost(input: $input) {\n      post {\n        id\n        title\n      }\n    }\n  }\n"]);return f=function(){return e},e}function v(){var e=(0,i.Z)(["\n  mutation ToggleHiddenComment($commentId: Int!, $isHidden: Boolean!) {\n    toggleHiddenComment(commentId: $commentId, isHidden: $isHidden) {\n      ... on ReplComment {\n        id\n        ...ReplViewCommentsReplComment\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return v=function(){return e},e}function Z(){var e=(0,i.Z)(["\n  mutation ReportReplComment($commentId: Int!, $reason: String!) {\n    reportReplComment(replCommentId: $commentId, reason: $reason) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on BoardReport {\n        id\n      }\n    }\n  }\n"]);return Z=function(){return e},e}var g={},b=(0,o.Ps)(c(),l._),C=(0,o.Ps)(u(),b),R=(0,o.Ps)(s(),C),x=(0,o.Ps)(d(),C);function w(e){var n=(0,r.Z)({},g,e);return a.D(x,n)}var y=(0,o.Ps)(m(),C);function k(e){var n=(0,r.Z)({},g,e);return a.D(y,n)}var B=(0,o.Ps)(p());function G(e){var n=(0,r.Z)({},g,e);return a.D(B,n)}var S=(0,o.Ps)(h());function E(e){var n=(0,r.Z)({},g,e);return a.D(S,n)}var P=(0,o.Ps)(f());function I(e){var n=(0,r.Z)({},g,e);return a.D(P,n)}var X=(0,o.Ps)(v(),C);function U(e){var n=(0,r.Z)({},g,e);return a.D(X,n)}var T=(0,o.Ps)(Z());function H(e){var n=(0,r.Z)({},g,e);return a.D(T,n)}},71417:function(e,n,t){t.d(n,{x:function(){return ie},H:function(){return J}});var r=t(72006),i=t(4405),o=t(2272),l=t(74985),a=t(48306),c=t.n(a),u=t(50959),s=t(66578),d=t(63837),m=t(13233),p=t(64450),h=t(76357),f=t(23258),v=t(56169),Z=t(43119),g=t(71440),b=t(24635),C=t(50216);function R(){var e=(0,Z.Z)(["\n  fragment ReplPostSettingsPost on Post {\n    id\n    isAnnouncement\n    isPinned\n    isLocked\n    isHidden\n    board {\n      id\n      name\n    }\n  }\n"]);return R=function(){return e},e}function x(){var e=(0,Z.Z)(["\n  query ReplPostSettings($postId: Int!) {\n    boards {\n      id\n      name\n    }\n    post(id: $postId) {\n      id\n      canPin\n      canHide\n      canChangeBoard\n      board {\n        id\n        name\n      }\n      ...ReplPostSettingsPost\n    }\n  }\n  ","\n"]);return x=function(){return e},e}function w(){var e=(0,Z.Z)(["\n  mutation ReplPostSettingsUpdatePost($input: UpdatePostInput!) {\n    updatePost(input: $input) {\n      post {\n        id\n        ...ReplPostSettingsPost\n      }\n    }\n  }\n  ","\n"]);return w=function(){return e},e}var y={},k=(0,g.Ps)(R()),B=(0,g.Ps)(x(),k);var G=(0,g.Ps)(w(),k);var S=t(39541),E=t(85368),P=t(61284),I=t(34938),X=t(31854),U=E.K.label;function T(e){var n=e.children;return(0,l.tZ)(E.G,{css:[S.l0.rowWithGap(8),S.l0.align.center],children:n})}function H(e){var n,t=e.postId,i=function(e){p.loading||h&&m({variables:{input:(0,r.Z)({id:h.id},e)}})},a=(0,v.H)(),c=function(e){var n=(0,r.Z)({},y,e);return b.a(B,n)}({variables:{postId:t}}),u=c.data,s=c.loading,d=(0,o.Z)(function(e){var n=(0,r.Z)({},y,e);return C.D(G,n)}(),2),m=d[0],p=d[1];if(s)return null;var h="Post"===(null===u||void 0===u||null===(n=u.post)||void 0===n?void 0:n.__typename)?u.post:null,f=null===u||void 0===u?void 0:u.boards;if(!h||!f)return(0,l.tZ)(P.xv,{multiline:!1,children:"Something went wrong"});var Z={isPinned:a("isPinned"),isHidden:a("isHidden"),boardId:a("boardId")};return(0,l.BX)(E.G,{css:[S.l0.colWithGap(24)],children:[(0,l.tZ)(P.h4,{level:1,variant:"headerDefault",children:"Post settings"}),(0,l.BX)(E.G,{css:[S.l0.colWithGap(8)],children:[(0,l.BX)(T,{children:[(0,l.tZ)(I.X,{id:Z.isPinned,checked:Boolean(h.isPinned),onChange:function(){return i({isPinned:!h.isPinned})}}),(0,l.tZ)(U,{htmlFor:Z.isPinned,children:"Pin post to Community feed"})]}),h.canHide?(0,l.BX)(T,{children:[(0,l.tZ)(I.X,{id:Z.isHidden,checked:Boolean(h.isHidden),onChange:function(e){return i({isHidden:e.target.checked})}}),(0,l.tZ)(U,{htmlFor:Z.isHidden,children:"Hide post from listing"})]}):null]}),h.canChangeBoard?(0,l.BX)(T,{children:[(0,l.tZ)(X.P,{id:Z.boardId,placeholder:"Select a board",items:f.map((function(e){return{value:e,title:e.name}})),initialSelectedItem:h.board?{value:h.board,title:h.board.name}:void 0,onChange:function(e){return i({boardId:e.value.id})}}),(0,l.tZ)(U,{htmlFor:Z.isHidden,children:"Change board (requires reload)"})]}):null]})}var _=t(90171),D=t(77712),W=t(55923),F=t(3923),A=t(36994),V=t(625),M=t(62405),L=t(66539),$=t(39137),O=t(2041),z=t(45510),N=t(63128),q=t(25198),Q=t(70719),Y=E.K.form;function j(e){var n=e.commentId,t=e.onDone,r=(0,u.useState)(""),i=r[0],a=r[1],c=(0,m.Z)(),d=c.showConfirm,p=c.showError,h=(0,o.Z)((0,s.pn)({variables:{commentId:n,reason:i},onCompleted:function(e){"BoardReport"===e.reportReplComment.__typename?(d("Comment reported"),t()):p(e.reportReplComment.message)}}),2),f=h[0],v=h[1].loading;return(0,l.BX)(E.G,{css:[S.l0.colWithGap(24)],children:[(0,l.tZ)(P.h4,{level:2,variant:"subheadBig",children:"Report Comment"}),(0,l.BX)(Y,{onSubmit:function(e){e.preventDefault(),i?f():p("Please specify a reason to report this comment.")},css:[S.l0.colWithGap(32)],children:[(0,l.tZ)(E.G,{css:[S.l0.colWithGap(8)],children:(0,l.tZ)($.B,{placeholder:"Why do you want to report this comment?",value:i,onChange:function(e){return a(e.currentTarget.value)},css:[S.l0.minHeight(64),S.l0.maxHeight(128),{resize:"vertical"}]})}),(0,l.BX)(E.G,{css:[S.l0.rowWithGap(16),S.l0.justify.end],children:[(0,l.tZ)(E.G,{children:(0,l.tZ)(z.zx,{type:"button",text:"Cancel",onClick:function(){return t()}})}),(0,l.tZ)(E.G,{children:(0,l.tZ)(z.zx,{disabled:v,text:v?"Reporting":"Report Comment",type:"submit",colorway:"negative",iconLeft:(0,l.tZ)(Q.Z,{})})})]})]})]})}function K(e){var n=e.initialValue,t=e.commentId,r=e.onReply,i=e.onCancel,a=(0,u.useState)(null),c=a[0],d=a[1],m=(0,o.Z)((0,s.cT)({onCompleted:function(e){var n="ReplComment"===e.createReplCommentReply.__typename?e.createReplCommentReply:null;if(n)return(0,V.j)(V.U3.COMMENT_MADE,{source:"spotlight"}),void r(n);var t="UserError"===e.createReplCommentReply.__typename||"UnauthorizedError"===e.createReplCommentReply.__typename?e.createReplCommentReply.message:null;t&&d(t)}}),2),p=m[0],h=m[1];return(0,l.tZ)(A.EQ,{error:c,initialValue:n,onCancel:i,onSubmit:function(e){h.loading||p({variables:{input:{body:e,replCommentId:t}}})}})}function J(e){var n=e.replId,t=e.placeholder,r=e.onComment,i=e.autoFocus,a=void 0!==i&&i,c=e.onCancel,m=void 0===c?function(){}:c,p=(0,u.useState)(!1),h=p[0],f=p[1],v=(0,u.useState)(null),Z=v[0],g=v[1],b=(0,o.Z)((0,s.Qp)({onCompleted:function(e){var n="ReplComment"===e.createReplComment.__typename?e.createReplComment:null;if(n)return(0,V.j)(V.U3.COMMENT_MADE,{source:"spotlight"}),f(!0),void r(n);var t="UserError"===e.createReplComment.__typename||"UnauthorizedError"===e.createReplComment.__typename?e.createReplComment.message:null;t&&g(t)}}),2),C=b[0],R=b[1];return h?(0,l.tZ)(q.E,{icon:(0,l.tZ)(d.Z,{}),closable:!0,closeAction:function(){m(),f(!1)},colorway:"positive",text:"Comment added"}):(0,l.tZ)(A.EQ,{autoFocus:a,initialValue:"",placeholder:t,hideControls:!0,error:Z,onCancel:function(){m(),g(null)},onSubmit:function(e){R.loading||C({variables:{input:{body:e,replId:n}}})}})}var ee={background:S.TV.backgroundDefault,borderRadius:S.TV.borderRadius8,scrollPaddingTop:"100px",padding:S.TV.space8,border:"solid 2px ".concat(S.TV.accentPrimaryDimmer)};function ne(e){var n=e.comment,t=e.onReply,a=e.onDelete,f=e.replyToId,v=e.toggleRepliesButton,Z=e.commentsEnabled,g=(0,_.useRouter)().query,b=g.c,C=Number(b),R=(0,m.Z)().showNotice,x=(0,o.Z)((0,s.g)(),2),w=x[0],y=x[1],k=(0,o.Z)((0,s.cq)({variables:{id:n.id},onCompleted:function(){D(null),a(n)}}),2),B=k[0],G=k[1],P=(0,o.Z)((0,s.oY)({variables:{commentId:n.id,isHidden:!n.isHidden}}),1)[0],I=(0,u.useState)(!1),X=I[0],U=I[1],T=(0,u.useState)(null),H=T[0],D=T[1],W=H===A.nQ.Edit,F=n.user;(0,u.useEffect)((function(){var e;H===A.nQ.Hide||H===A.nQ.Show?P():H===A.nQ.CopyLink&&(null===n||void 0===n||null===(e=n.repl)||void 0===e?void 0:e.url)&&(window.navigator.clipboard.writeText(window.location.protocol+"//"+window.location.host+n.repl.url+"?c="+n.id).then((function(){R("Copied!")})),D(null))}),[H,P]);var V=(0,u.useRef)(null),$=C===n.id;if((0,u.useEffect)((function(){(null===V||void 0===V?void 0:V.current)&&$&&V.current.scrollIntoView({behavior:"smooth"})}),[$,g.c]),!F)return null;var z=n.currentUserPermissions,N=Boolean(z);return(0,l.BX)(E.G,{css:[S.l0.rowWithGap(8),{":hover .actions":{opacity:1},position:"relative"},$?ee:null],children:[(0,l.tZ)(E.G,{innerRef:V,css:[{position:"absolute",top:"-100px",left:"0"}]}),(0,l.tZ)(A.Yt,{user:F}),(0,l.BX)(E.G,{css:[S.l0.flex.growAndShrink(1),S.l0.colWithGap(4)],children:[(0,l.BX)(E.G,{css:[S.l0.align.center,S.l0.rowWithGap(16)],children:[(0,l.tZ)(A.wb,{user:F,timeCreated:n.timeCreated}),n.isHidden?(0,l.tZ)(L.u,{tooltip:"This comment is hidden",children:(0,l.tZ)(M.Z,{size:12,"alt-text":"This comment is hidden"})}):null]}),W?(0,l.tZ)(A.EQ,{buttonText:"Save",buttonIcon:(0,l.tZ)(d.Z,{}),initialValue:n.body,onSubmit:function(e){y.loading||(w({variables:{input:{id:n.id,body:e}},optimisticResponse:{__typename:"RootMutationType",updateReplComment:(0,i.Z)((0,r.Z)({},n),{body:e})}}),D(null))},onCancel:function(){return D(null)}}):(0,l.tZ)("div",{className:c().dynamic([["4174ac2fa2210099",[n.isHidden?"var(--foreground-dimmest)":"default"]]])+" comment-container",children:(0,l.tZ)(p.Z,{useRemarkGfm:!1,children:n.body})}),X?(0,l.tZ)(E.G,{css:[S.l0.pt(12)],children:(0,l.tZ)(K,{initialValue:"@".concat(F.username," "),commentId:f,onReply:function(e){t(e),U(!1)},onCancel:function(){return U(!1)}})}):(0,l.BX)(E.G,{css:[S.l0.rowWithGap(8),{marginLeft:-4}],children:[N&&!n.isHidden&&Z?(0,l.tZ)(A.g4,{onClick:function(){return U(!0)}}):null,v]})]}),W?null:(0,l.tZ)(E.G,{css:[X&&{visibility:"hidden"}],children:(0,l.tZ)(A.pl,{className:"actions",canEdit:Boolean(null===z||void 0===z?void 0:z.edit),canReport:Boolean(null===z||void 0===z?void 0:z.report),canEditSettings:!1,canDelete:Boolean(null===z||void 0===z?void 0:z.delete),onAction:D,canHideComment:Boolean(null===z||void 0===z?void 0:z.canHideComment)&&!n.isHidden,canShowComment:Boolean(null===z||void 0===z?void 0:z.canHideComment)&&Boolean(n.isHidden)})}),(0,l.tZ)(O.u,{isOpen:H===A.nQ.Delete,onRequestClose:function(){return D(null)},children:(0,l.tZ)(h.Z,{delete:function(){G.loading||B({variables:{id:n.id}})},entityType:"comment",hideModal:function(){return D(null)}})}),(0,l.tZ)(O.u,{isOpen:H===A.nQ.Report,onRequestClose:function(){return D(null)},children:(0,l.tZ)(j,{commentId:n.id,onDone:function(){return D(null)}})}),(0,l.tZ)(c(),{id:"4174ac2fa2210099",dynamic:[n.isHidden?"var(--foreground-dimmest)":"default"],children:".comment-container.__jsx-style-dynamic-selector .rendered-markdown{color:".concat(n.isHidden?"var(--foreground-dimmest)":"default","}")})]})}function te(e){var n=e.initialTitle,t=e.initialBody,r=e.onSubmit,i=e.onCancel,o=(0,u.useState)(n),a=o[0],c=o[1],s=(0,u.useState)(t),m=s[0],p=s[1],h=(0,A.Ex)(),Z=(0,v.H)();return(0,l.BX)(A.l0,{css:[S.l0.colWithGap(8),S.l0.mt(8)],onSubmit:function(e){e.preventDefault(),r({title:a,body:m})},children:[(0,l.BX)(E.G,{css:[S.l0.colWithGap(16)],children:[(0,l.BX)(E.G,{css:[S.l0.colWithGap(4)],children:[(0,l.tZ)("label",{htmlFor:Z("title"),children:(0,l.tZ)(P.xv,{color:"dimmer",variant:"small",multiline:!1,children:"Title"})}),(0,l.tZ)($.II,{value:a,placeholder:"Give your post a title",onChange:function(e){return c(e.currentTarget.value)},id:Z("title")})]}),(0,l.tZ)(f.Z,{onKeyDown:function(e){"Enter"===e.key&&e.metaKey&&r({title:a,body:m})},initialValue:m,onChange:p,userSearch:h,autoFocus:!1,showLabel:!0})]}),(0,l.BX)(E.G,{css:[S.l0.rowWithGap(8),S.l0.justify.end],children:[(0,l.tZ)(z.zx,{text:"Cancel",onClick:i}),(0,l.tZ)(z.zx,{type:"submit",iconLeft:(0,l.tZ)(d.Z,{}),text:"Save",onClick:function(){},colorway:"primary",disabled:t===m&&n===a})]})]})}function re(e){var n=e.post,t=e.comment,a=e.onReply,d=e.onDelete,f=e.replyToId,v=e.toggleRepliesButton,Z=e.commentsEnabled,g=(0,_.useRouter)().query.c,b=Number(g),C=(0,m.Z)(),R=C.showError,x=C.showNotice,w=(0,o.Z)((0,s.kz)({onError:function(e){return R(e.message)}}),2),y=w[0],k=w[1],B=(0,o.Z)((0,s.g)(),2),G=B[0],I=B[1],X=(0,o.Z)((0,s.cq)({variables:{id:t.id},onCompleted:function(){J(null),d(t)}}),2),U=X[0],T=X[1],V=(0,o.Z)((0,s.oY)({variables:{commentId:t.id,isHidden:!t.isHidden}}),1)[0],$=(0,u.useState)(!1),z=$[0],q=$[1],Q=(0,u.useState)(null),Y=Q[0],J=Q[1],ee=Y===A.nQ.Edit,ne=t.user;(0,u.useEffect)((function(){var e;Y===A.nQ.Hide||Y===A.nQ.Show?V():Y===A.nQ.CopyLink&&(null===t||void 0===t||null===(e=t.repl)||void 0===e?void 0:e.url)&&(window.navigator.clipboard.writeText(window.location.protocol+"//"+window.location.host+t.repl.url+"?c="+t.id).then((function(){x("Copied!")})),J(null))}),[Y,V]);var re=(0,u.useRef)(null),ie=b===t.id;if((0,u.useEffect)((function(){(null===re||void 0===re?void 0:re.current)&&ie&&(null===re||void 0===re||re.current.scrollIntoView({behavior:"smooth"}))}),[ie]),!ne)return null;var oe=t.currentUserPermissions,le=Boolean(oe),ae=Boolean(n.canPin||n.canChangeBoard||n.canHide);return(0,l.BX)(N.Tg,{css:[S.l0.rowWithGap(8),S.l0.backgroundColor.backgroundDefault,S.l0.borderRadius(8),S.l0.border({color:ie?S.TV.accentPrimaryDimmer:S.TV.backgroundHigher,width:ie?2:1}),{":hover .actions":{opacity:1},position:"relative"}],background:"default",children:[(0,l.tZ)(E.G,{innerRef:re,css:[{position:"absolute",top:"-100px",left:"0"}]}),(0,l.BX)(E.G,{css:[S.l0.flex.growAndShrink(1),S.l0.flex.column,{"& .rendered-markdown":{backgroundColor:"transparent"}}],children:[(0,l.BX)(N.Tg,{css:[S.l0.align.center,S.l0.rowWithGap(8),S.l0.p(8),S.l0.border({direction:"bottom",color:S.TV.backgroundHigher}),S.l0.borderRadius(8,8,0,0),S.l0.pr(8)],background:"higher",children:[(0,l.tZ)(A.Yt,{user:ne}),(0,l.tZ)(W.Z,{username:ne.username,children:(0,l.tZ)(D.ZP,{user:ne,children:(0,l.tZ)("a",{css:[{color:"inherit"}],className:c().dynamic([["4174ac2fa2210099",[t.isHidden?"var(--foreground-dimmest)":"default"]]]),children:ne.username})})}),(0,l.BX)(E.G,{css:[S.l0.flex.growAndShrink(1),S.l0.rowWithGap(4),S.l0.align.center,{overflow:"hidden"}],children:[(0,l.tZ)(P.xv,{color:"dimmest",multiline:!1,children:"published an update"}),(0,l.tZ)(P.xv,{color:"dimmest",multiline:!1,children:"\u2022"}),(0,l.tZ)(F.E,{date:t.timeCreated,textColor:"dimmest"}),t.isHidden?(0,l.tZ)(L.u,{tooltip:"This comment is hidden",children:(0,l.tZ)(M.Z,{size:12,"alt-text":"This comment is hidden"})}):null]}),ee?null:(0,l.tZ)(E.G,{css:[z&&{visibility:"hidden"}],children:(0,l.tZ)(A.pl,{className:"actions",canEdit:Boolean(null===oe||void 0===oe?void 0:oe.edit),canReport:n.canReport,canEditSettings:ae,canDelete:Boolean(null===oe||void 0===oe?void 0:oe.delete),onAction:J,canHideComment:Boolean(null===oe||void 0===oe?void 0:oe.canHideComment)&&!t.isHidden,canShowComment:Boolean(null===oe||void 0===oe?void 0:oe.canHideComment)&&Boolean(t.isHidden)})})]}),(0,l.BX)(E.G,{css:[S.l0.p(16),S.l0.flex.column,S.l0.colWithGap(8)],children:[ee?(0,l.tZ)(te,{initialTitle:n.title||"",initialBody:t.body,onSubmit:function(e){var o=e.title,l=e.body;I.loading||k.loading||(y({variables:{input:{id:n.id,title:o}},optimisticResponse:{__typename:"RootMutationType",updatePost:{__typename:"UpdatePostPayload",post:(0,i.Z)((0,r.Z)({},n),{title:o})}}}),G({variables:{input:{id:t.id,body:l}},optimisticResponse:{__typename:"RootMutationType",updateReplComment:(0,i.Z)((0,r.Z)({},t),{body:l})}}),J(null))},onCancel:function(){return J(null)}}):(0,l.BX)(l.HY,{children:[n.title?(0,l.tZ)(P.xv,{variant:"subheadBig",multiline:!1,children:n.title}):null,(0,l.tZ)("div",{className:c().dynamic([["4174ac2fa2210099",[t.isHidden?"var(--foreground-dimmest)":"default"]]])+" comment-container",children:(0,l.tZ)(p.Z,{useRemarkGfm:!1,children:t.body})})]}),ee?null:(0,l.tZ)(l.HY,{children:z?(0,l.tZ)(E.G,{css:[S.l0.pt(12)],children:(0,l.tZ)(K,{initialValue:"@".concat(ne.username," "),commentId:f,onReply:function(e){a(e),q(!1)},onCancel:function(){return q(!1)}})}):(0,l.BX)(E.G,{css:[S.l0.rowWithGap(2),{marginLeft:-4}],children:[le&&Z?(0,l.tZ)(A.g4,{onClick:function(){return q(!0)}}):null,v]})})]})]}),(0,l.tZ)(O.u,{isOpen:Y===A.nQ.Delete,onRequestClose:function(){return J(null)},children:(0,l.tZ)(h.Z,{delete:function(){T.loading||U({variables:{id:t.id}})},entityType:"post",hideModal:function(){return J(null)}})}),(0,l.tZ)(O.u,{isOpen:Y===A.nQ.Report,onRequestClose:function(){return J(null)},children:(0,l.tZ)(j,{commentId:t.id,onDone:function(){return J(null)}})}),(0,l.tZ)(O.u,{isOpen:Y===A.nQ.Settings,onRequestClose:function(){return J(null)},children:(0,l.tZ)(H,{postId:n.id})}),(0,l.tZ)(c(),{id:"4174ac2fa2210099",dynamic:[t.isHidden?"var(--foreground-dimmest)":"default"],children:".comment-container.__jsx-style-dynamic-selector .rendered-markdown{color:".concat(t.isHidden?"var(--foreground-dimmest)":"default","}")})]})}function ie(e){var n,t=e.comment,r=e.onReply,i=e.onDelete,o=e.commentsEnabled,a=(0,_.useRouter)().query.c,c=Number(a),s=t.replies,d=(0,u.useState)(s.some((function(e){return e.id===c}))),m=d[0],p=d[1],h=s.length,f=h?(0,l.tZ)(A.tE,{onClick:function(){return p((function(e){return!e}))},repliesCount:h,isExpanded:m}):null,v=(null===(n=t.post)||void 0===n?void 0:n.title)?t.post:null;return v?(0,l.BX)(l.HY,{children:[(0,l.tZ)(re,{replyToId:t.id,post:v,comment:t,toggleRepliesButton:f,onReply:function(e){p(!0),r(e)},onDelete:i,commentsEnabled:o}),m?(0,l.tZ)(E.G,{css:[S.l0.colWithGap(32),S.l0.pl(32)],children:s.filter((function(e){var n;return Boolean(null===(n=e.currentUserPermissions)||void 0===n?void 0:n.canHideComment)||!e.isHidden})).map((function(e){return(0,l.tZ)(ne,{commentsEnabled:o,comment:e,onReply:r,onDelete:i,replyToId:t.id},e.id)}))}):null]}):(0,l.BX)(E.G,{css:[S.l0.colWithGap(32)],children:[(0,l.tZ)(ne,{commentsEnabled:o,replyToId:t.id,comment:t,toggleRepliesButton:f,onReply:function(e){p(!0),r(e)},onDelete:i}),m&&0!==h?(0,l.tZ)(E.G,{css:[S.l0.colWithGap(32),S.l0.pl(32)],children:s.filter((function(e){var n;return Boolean(null===e||void 0===e||null===(n=e.currentUserPermissions)||void 0===n?void 0:n.canHideComment)||!e.isHidden})).map((function(e){return(0,l.tZ)(ne,{commentsEnabled:o,comment:e,onReply:r,onDelete:i,replyToId:t.id},e.id)}))}):null]})}},19075:function(e,n,t){t.d(n,{ex:function(){return m}});var r=t(72006),i=t(43119),o=t(71440),l=t(66578),a=t(51034),c=t(24635);function u(){var e=(0,i.Z)(["\n  query ReplViewComments($replId: String!, $count: Int = 100, $after: String) {\n    currentUser {\n      id\n      username\n    }\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        title\n        url\n        owner {\n          ... on User {\n            id\n            ...ReplViewCommentsUser\n          }\n          ... on Team {\n            id\n          }\n        }\n        multiplayers {\n          id\n          ...ReplViewCommentsUser\n        }\n        currentUserPermissions {\n          changeCommentSettings\n        }\n        commentSettings {\n          id\n          enabled\n        }\n        comments(count: $count, after: $after) {\n          items {\n            id\n            ...ReplViewCommentsReplCommentThread\n          }\n          pageInfo {\n            nextCursor\n          }\n        }\n        ...ReplViewReplCommentsHeaderRepl\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return u=function(){return e},e}var s={},d=(0,o.Ps)(u(),l.P9,l.xB,a.d4);function m(e){var n=(0,r.Z)({},s,e);return c.a(d,n)}},51034:function(e,n,t){t.d(n,{d4:function(){return s},k2:function(){return m}});var r=t(72006),i=t(43119),o=t(71440),l=t(50216);function a(){var e=(0,i.Z)(["\n  fragment ReplViewReplCommentsHeaderRepl on Repl {\n    id\n    commentCount\n    currentUserPermissions {\n      changeCommentSettings\n    }\n    commentSettings {\n      id\n      enabled\n    }\n  }\n"]);return a=function(){return e},e}function c(){var e=(0,i.Z)(["\n  mutation ReplViewReplCommentsHeaderSetReplCommentSettings(\n    $input: SetReplCommentSettingsInput!\n  ) {\n    setReplCommentSettings(input: $input) {\n      ... on Repl {\n        id\n        ...ReplViewReplCommentsHeaderRepl\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return c=function(){return e},e}var u={},s=(0,o.Ps)(a()),d=(0,o.Ps)(c(),s);function m(e){var n=(0,r.Z)({},u,e);return l.D(d,n)}},6933:function(e,n,t){t.d(n,{Z:function(){return x}});var r=t(72006),i=t(4405),o=t(2272),l=t(74985),a=t(50959),c=t(79908),u=t(39541),s=t(85368),d=t(43312),m=t(30826),p=t.n(m),h=function(e){var n=e.children,t=e.gap,r=void 0===t?32:t,i=(0,o.Z)(a.useState(!1),2),c=i[0],m=i[1],h=(0,o.Z)(a.useState(0),2),f=h[0],v=h[1],Z=(0,o.Z)(a.useState(0),2),g=Z[0],b=Z[1],C=a.useRef(null),R=a.useRef(null);a.useEffect((function(){var e=p()((function(){C.current&&R.current&&(v(C.current.offsetWidth),b(R.current.offsetWidth)),m(f>g)}),100);return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[f,g]);var x=32*(f+r),w=3e3/x*100,y=Math.min(Math.max(w,1),99),k=(0,d.F4)("\n    0% { transform: translateX(0%); }\n    ".concat(y,"% { transform: translateX(0%); }\n    100% { transform: translateX(calc(-100% - ").concat(r,"px)); }\n  ")),B={animation:c?"".concat(k," ").concat(x,"ms linear infinite"):"none"};return(0,l.tZ)("div",{ref:R,css:[u.l0.width("100%"),u.l0.overflow("hidden"),c?{maskImage:"linear-gradient(to left, transparent, black 16px, black)"}:null],children:(0,l.BX)(s.G,{css:[u.l0.flex.row,u.l0.width("max-content")],children:[(0,l.tZ)("div",{ref:C,css:B,children:n}),c?(0,l.tZ)("div",{"aria-hidden":!0,css:[B,{marginLeft:r}],children:n}):null]})})},f=t(61284),v=t(76735),Z=t(53212),g=t(89635),b=t(75863),C=t(25198),R=t(32905);function x(e){var n=e.repl,t=e.iconEditable,a=e.currentUser,d=e.hideActions,m=e.small,p=(0,o.Z)((0,c.cu)(),1)[0],x=(0,g.W)((function(e){return p({variables:{input:{id:n.id,iconUrl:e}},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:(0,i.Z)((0,r.Z)({},n),{iconUrl:e})}}})}));return(0,l.BX)(s.G,{css:[u.l0.colWithGap(8)],children:[(0,l.BX)(s.G,{css:[u.l0.rowWithGap(8),u.l0.align.center],children:[t?null:(0,l.tZ)(b.ZP,{iconUrl:n.iconUrl,alt:"",size:32}),t?(0,l.tZ)(g.Z,{size:32,value:x.previewUrl||n.iconUrl,onUpload:function(e){return x.uploadImage(e,R.N.ReplIcon)},isUploading:Boolean(x.previewUrl)}):null,(0,l.tZ)(h,{children:(0,l.tZ)(f.h4,{variant:m?"headerDefault":"headerBig",level:1,css:[u.l0.flex.growAndShrink(1),{wordBreak:"break-all"}],children:n.title})}),!d&&(0,l.tZ)(Z.Z,{repl:n,currentUser:a,source:"coverPage"})]}),x.error?(0,l.tZ)(s.G,{css:[u.l0.align.start],children:(0,l.tZ)(C.E,{icon:(0,l.tZ)(v.Z,{}),colorway:"negative",text:x.error,closable:!0,closeAction:x.clearError})}):null]})}},50946:function(e,n,t){t.d(n,{P:function(){return u}});var r=t(74985),i=(t(50959),t(82893)),o=t.n(i),l=t(85368),a=t(96351),c=l.K.a;function u(e){return(0,r.tZ)(o(),{as:e.as,href:e.href,passHref:!0,prefetch:e.prefetch,replace:e.replace,scroll:e.scroll,shallow:e.shallow,children:(0,r.BX)(c,{ref:e.innerRef,className:e.className,rel:e.rel,role:"link",target:e.target,onClick:e.onClick,css:[(0,a.E)({colorway:e.colorway,clickable:!0,iconLeft:!!e.iconLeft,iconRight:!!e.iconRight}),{color:"inherit",transition:"background-color 120ms ease-out, color 120ms ease-out"}],children:[e.iconLeft,(0,r.tZ)("span",{children:e.text}),e.iconRight]})})}}}]);
//# sourceMappingURL=671-b873b825ee5b57e3.js.map