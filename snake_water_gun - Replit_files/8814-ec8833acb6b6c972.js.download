"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8814],{28814:function(t,e,i){i.d(e,{Dx:function(){return k},KS:function(){return p},Vt:function(){return x},c1:function(){return M},ir:function(){return A},jN:function(){return y},lC:function(){return h},p0:function(){return u}});var s=i(69994),n=i(14806),o=i(92522);class r{constructor(t,e,i){this.from=t,this.to=e,this.diagnostic=i}}class a{constructor(t,e,i){this.diagnostics=t,this.panel=e,this.selected=i}static init(t,e,i){let n=t,o=i.facet(R).markerFilter;o&&(n=o(n));let r=s.p.set(n.map((t=>t.from==t.to||t.from==t.to-1&&i.doc.lineAt(t.from).to==t.from?s.p.widget({widget:new I(t),diagnostic:t}).range(t.from):s.p.mark({attributes:{class:"cm-lintRange cm-lintRange-"+t.severity+(t.markClass?" "+t.markClass:"")},diagnostic:t}).range(t.from,t.to))),!0);return new a(r,e,l(r))}}function l(t,e=null,i=0){let s=null;return t.between(i,1e9,((t,i,{spec:n})=>{if(!e||n.diagnostic==e)return s=new r(t,i,n.diagnostic),!1})),s}function c(t,e){let i=t.startState.doc.lineAt(e.pos);return!(!t.effects.some((t=>t.is(h)))&&!t.changes.touchesRange(i.from,i.to))}function d(t,e){return t.field(g,!1)?e:e.concat(n.Py.appendConfig.of(O))}function u(t,e){return{effects:d(t,[h.of(e)])}}const h=n.Py.define(),f=n.Py.define(),m=n.Py.define(),g=n.QQ.define({create:()=>new a(s.p.none,null,null),update(t,e){if(e.docChanged){let i=t.diagnostics.map(e.changes),s=null;if(t.selected){let n=e.changes.mapPos(t.selected.from,1);s=l(i,t.selected.diagnostic,n)||l(i,null,n)}t=new a(i,t.panel,s)}for(let i of e.effects)i.is(h)?t=a.init(i.value,t.panel,e.state):i.is(f)?t=new a(t.diagnostics,i.value?Z.open:null,t.selected):i.is(m)&&(t=new a(t.diagnostics,t.panel,i.value));return t},provide:t=>[s.mH.from(t,(t=>t.panel)),s.tk.decorations.from(t,(t=>t.diagnostics))]});function p(t){let e=t.field(g,!1);return e?e.diagnostics.size:0}const v=s.p.mark({class:"cm-lintRange cm-lintRange-active"});function b(t,e,i){let{diagnostics:s}=t.state.field(g),n=[],o=2e8,r=0;s.between(e-(i<0?1:0),e+(i>0?1:0),((t,s,{spec:a})=>{e>=t&&e<=s&&(t==s||(e>t||i>0)&&(e<s||i<0))&&(n.push(a.diagnostic),o=Math.min(t,o),r=Math.max(s,r))}));let a=t.state.facet(R).tooltipFilter;return a&&(n=a(n)),n.length?{pos:o,end:r,above:t.state.doc.lineAt(o).to<r,create:()=>({dom:w(t,n)})}:null}function w(t,e){return(0,o.Z)("ul",{class:"cm-tooltip-lint"},e.map((e=>T(t,e,!1))))}const k=t=>{let e=t.state.field(g,!1);e&&e.panel||t.dispatch({effects:d(t.state,[f.of(!0)])});let i=(0,s.Sd)(t,Z.open);return i&&i.dom.querySelector(".cm-panel-lint ul").focus(),!0},y=t=>{let e=t.state.field(g,!1);return!(!e||!e.panel)&&(t.dispatch({effects:f.of(!1)}),!0)},x=t=>{let e=t.state.field(g,!1);if(!e)return!1;let i=t.state.selection.main,s=e.diagnostics.iter(i.to+1);return!(!s.value&&(s=e.diagnostics.iter(0),!s.value||s.from==i.from&&s.to==i.to))&&(t.dispatch({selection:{anchor:s.from,head:s.to},scrollIntoView:!0}),!0)},C=s.lg.fromClass(class{constructor(t){this.view=t,this.timeout=-1,this.set=!0;let{delay:e}=t.state.facet(R);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){let t=Date.now();if(t<this.lintTime-10)setTimeout(this.run,this.lintTime-t);else{this.set=!1;let{state:t}=this.view,{sources:e}=t.facet(R);Promise.all(e.map((t=>Promise.resolve(t(this.view))))).then((e=>{let i=e.reduce(((t,e)=>t.concat(e)));this.view.state.doc==t.doc&&this.view.dispatch(u(this.view.state,i))}),(t=>{(0,s.OO)(this.view.state,t)}))}}update(t){let e=t.state.facet(R);(t.docChanged||e!=t.startState.facet(R)||e.needsRefresh&&e.needsRefresh(t))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),R=n.r$.define({combine:t=>Object.assign({sources:t.map((t=>t.source))},(0,n.BO)(t.map((t=>t.config)),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null},{needsRefresh:(t,e)=>t?e?i=>t(i)||e(i):t:e}))});function A(t,e={}){return[R.of({source:t,config:e}),C,O]}function S(t){let e=[];if(t)t:for(let{name:i}of t){for(let t=0;t<i.length;t++){let s=i[t];if(/[a-zA-Z]/.test(s)&&!e.some((t=>t.toLowerCase()==s.toLowerCase()))){e.push(s);continue t}}e.push("")}return e}function T(t,e,i){var s;let n=i?S(e.actions):[];return(0,o.Z)("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},(0,o.Z)("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),null===(s=e.actions)||void 0===s?void 0:s.map(((i,s)=>{let r=!1,a=s=>{if(s.preventDefault(),r)return;r=!0;let n=l(t.state.field(g).diagnostics,e);n&&i.apply(t,n.from,n.to)},{name:c}=i,d=n[s]?c.indexOf(n[s]):-1,u=d<0?c:[c.slice(0,d),(0,o.Z)("u",c.slice(d,d+1)),c.slice(d+1)];return(0,o.Z)("button",{type:"button",class:"cm-diagnosticAction",onclick:a,onmousedown:a,"aria-label":` Action: ${c}${d<0?"":` (access key "${n[s]})"`}.`},u)})),e.source&&(0,o.Z)("div",{class:"cm-diagnosticSource"},e.source))}class I extends s.l9{constructor(t){super(),this.diagnostic=t}eq(t){return t.diagnostic==this.diagnostic}toDOM(){return(0,o.Z)("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class P{constructor(t,e){this.diagnostic=e,this.id="item_"+Math.floor(4294967295*Math.random()).toString(16),this.dom=T(t,e,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Z{constructor(t){this.view=t,this.items=[];this.list=(0,o.Z)("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:e=>{if(27==e.keyCode)y(this.view),this.view.focus();else if(38==e.keyCode||33==e.keyCode)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(40==e.keyCode||34==e.keyCode)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(36==e.keyCode)this.moveSelection(0);else if(35==e.keyCode)this.moveSelection(this.items.length-1);else if(13==e.keyCode)this.view.focus();else{if(!(e.keyCode>=65&&e.keyCode<=90&&this.selectedIndex>=0))return;{let{diagnostic:i}=this.items[this.selectedIndex],s=S(i.actions);for(let n=0;n<s.length;n++)if(s[n].toUpperCase().charCodeAt(0)==e.keyCode){let e=l(this.view.state.field(g).diagnostics,i);e&&i.actions[n].apply(t,e.from,e.to)}}}e.preventDefault()},onclick:t=>{for(let e=0;e<this.items.length;e++)this.items[e].dom.contains(t.target)&&this.moveSelection(e)}}),this.dom=(0,o.Z)("div",{class:"cm-panel-lint"},this.list,(0,o.Z)("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>y(this.view)},"\xd7")),this.update()}get selectedIndex(){let t=this.view.state.field(g).selected;if(!t)return-1;for(let e=0;e<this.items.length;e++)if(this.items[e].diagnostic==t.diagnostic)return e;return-1}update(){let{diagnostics:t,selected:e}=this.view.state.field(g),i=0,s=!1,n=null;for(t.between(0,this.view.state.doc.length,((t,o,{spec:r})=>{let a,l=-1;for(let e=i;e<this.items.length;e++)if(this.items[e].diagnostic==r.diagnostic){l=e;break}l<0?(a=new P(this.view,r.diagnostic),this.items.splice(i,0,a),s=!0):(a=this.items[l],l>i&&(this.items.splice(i,l-i),s=!0)),e&&a.diagnostic==e.diagnostic?a.dom.hasAttribute("aria-selected")||(a.dom.setAttribute("aria-selected","true"),n=a):a.dom.hasAttribute("aria-selected")&&a.dom.removeAttribute("aria-selected"),i++}));i<this.items.length&&!(1==this.items.length&&this.items[0].diagnostic.from<0);)s=!0,this.items.pop();0==this.items.length&&(this.items.push(new P(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),s=!0),n?(this.list.setAttribute("aria-activedescendant",n.id),this.view.requestMeasure({key:this,read:()=>({sel:n.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:t,panel:e})=>{t.top<e.top?this.list.scrollTop-=e.top-t.top:t.bottom>e.bottom&&(this.list.scrollTop+=t.bottom-e.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),s&&this.sync()}sync(){let t=this.list.firstChild;function e(){let e=t;t=e.nextSibling,e.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;t!=i.dom;)e();t=i.dom.nextSibling}else this.list.insertBefore(i.dom,t);for(;t;)e()}moveSelection(t){if(this.selectedIndex<0)return;let e=l(this.view.state.field(g).diagnostics,this.items[t].diagnostic);e&&this.view.dispatch({selection:{anchor:e.from,head:e.to},scrollIntoView:!0,effects:m.of(e)})}static open(t){return new Z(t)}}function D(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function B(t){return D(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const L=s.tk.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:B("#d11")},".cm-lintRange-warning":{backgroundImage:B("orange")},".cm-lintRange-info":{backgroundImage:B("#999")},".cm-lintRange-hint":{backgroundImage:B("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});s.SJ;const O=[g,s.tk.decorations.compute([g],(t=>{let{selected:e,panel:i}=t.field(g);return e&&i&&e.from!=e.to?s.p.set([v.range(e.from,e.to)]):s.p.none})),(0,s.bF)(b,{hideOn:c}),L];function M(t,e){let i=t.field(g,!1);if(i&&i.diagnostics.size)for(let s=n.Xs.iter([i.diagnostics]);s.value;s.next())e(s.value.spec.diagnostic,s.from,s.to)}},92522:function(t,e,i){function s(){var t=arguments[0];"string"==typeof t&&(t=document.createElement(t));var e=1,i=arguments[1];if(i&&"object"==typeof i&&null==i.nodeType&&!Array.isArray(i)){for(var s in i)if(Object.prototype.hasOwnProperty.call(i,s)){var o=i[s];"string"==typeof o?t.setAttribute(s,o):null!=o&&(t[s]=o)}e++}for(;e<arguments.length;e++)n(t,arguments[e]);return t}function n(t,e){if("string"==typeof e)t.appendChild(document.createTextNode(e));else if(null==e);else if(null!=e.nodeType)t.appendChild(e);else{if(!Array.isArray(e))throw new RangeError("Unsupported child node: "+e);for(var i=0;i<e.length;i++)n(t,e[i])}}i.d(e,{Z:function(){return s}})}}]);
//# sourceMappingURL=8814-ec8833acb6b6c972.js.map