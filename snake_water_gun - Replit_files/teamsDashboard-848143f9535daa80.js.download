(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3727],{35525:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/teamsDashboard",function(){return t(34153)}])},53508:function(e,n,t){"use strict";var r=t(74985),a=(t(50959),t(39541)),i=t(85368),o=t(61284);n.Z=function(e){var n=e.text;return(0,r.BX)(i.G,{css:[a.l0.flex.row,a.l0.align.center],children:[(0,r.tZ)(i.G,{css:[a.l0.mr(8),{borderBottom:"1px solid ".concat(a.TV.backgroundHighest),width:a.TV.space8}]}),(0,r.tZ)(o.xv,{css:[a.l0.color.foregroundDimmest,a.l0.flex.shrink(1)],children:n}),(0,r.tZ)(i.G,{css:[a.l0.ml(8),a.l0.flex.grow(2),{borderBottom:"1px solid ".concat(a.TV.backgroundHighest),width:a.TV.space16}]})]})}},67541:function(e,n,t){"use strict";var r=t(57135),a=t(96583),i=t(24824);n.Z=function(){var e=(0,r.Z)((function(e,n){var t,r,o;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return e?(t=e.user,[3,4]):[3,1];case 1:return(r=n.getState().user)&&r.userInfo.isLoggedIn&&r.userInfo?(t=r.userInfo,[3,4]):[3,2];case 2:return[4,(0,i.LK)("/is_authenticated")];case 3:(o=a.sent()).success&&(t=o.user),a.label=4;case 4:return t&&(e&&(t=JSON.parse(JSON.stringify(t))),n.dispatch({type:"FETCH_USER_INFO_SUCCESS",user:t})),[2,{user:t}]}}))}));return function(n,t){return e.apply(this,arguments)}}()},93153:function(e,n,t){"use strict";t.d(n,{Ke:function(){return m},Y1:function(){return v}});var r=t(72006),a=t(43119),i=t(71440),o=t(24635),l=t(50216);function s(){var e=(0,a.Z)(["\n  query TeamOrganization($id: Int!) {\n    teamOrganization(id: $id) {\n      ... on TeamOrganization {\n        id\n        name\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n"]);return s=function(){return e},e}function c(){var e=(0,a.Z)(["\n  mutation updateTeamOrganization($input: UpdateTeamOrganizationInput!) {\n    updateTeamOrganization(input: $input) {\n      ... on TeamOrganization {\n        id\n        name\n      }\n    }\n  }\n"]);return c=function(){return e},e}var u={},d=(0,i.Ps)(s());function m(e){var n=(0,r.Z)({},u,e);return o.a(d,n)}var h=(0,i.Ps)(c());function v(e){var n=(0,r.Z)({},u,e);return l.D(h,n)}},47161:function(e,n,t){"use strict";t.d(n,{u:function(){return g}});var r=t(74985),a=t(50959),i=t(82893),o=t.n(i),l=t(16022),s=t(17807),c=t(61284),u=t(39541),d=t(85368),m=t(63128),h=t(80336),v=t(87076),f=d.K.a,p=d.K.button,g=a.forwardRef((function(e,n){var t=e.className,i=e.colorway,g=e.closable,Z=e.icon,b=e.text,T=e.closeAction,x=(0,r.BX)(r.HY,{children:[Z&&a.cloneElement(Z,{size:16}),(0,r.tZ)(c.xv,{css:u.l0.flex.growAndShrink(1),variant:"small",children:b})]}),y=i?l.Br[i].default:u.TV.accentPrimaryDefault,w=[u.l0.rowWithGap(4),u.l0.align.center,u.l0.p(4),u.l0.pl(8),u.l0.borderRadius(8),u.l0.flex.growAndShrink(1),i?(0,l.Ss)(i):s.gU.filledAndOutlined,{"&:focus-within":{boxShadow:"0 0 0 2px "+y}}];return(0,r.BX)(d.G,{css:w,children:["href"in e?(0,r.tZ)(o(),{as:e.as,href:e.href,passHref:!0,prefetch:e.prefetch,replace:e.replace,scroll:e.scroll,shallow:e.shallow,children:(0,r.tZ)(f,{ref:n,className:t,rel:e.rel,role:"link",target:e.target,css:[u.l0.reset.button,u.l0.rowWithGap(8),u.l0.center,u.l0.flex.growAndShrink(1)],children:x})}):(0,r.tZ)(p,{ref:n,className:t,onClick:e.onClick,type:e.type,css:[u.l0.reset.button,u.l0.rowWithGap(8),u.l0.center,u.l0.flex.growAndShrink(1)],children:x}),g?(0,r.tZ)(m.Tg,{elevated:!0,css:[u.l0.flex.grow(0),{background:"transparent"}],children:(0,r.tZ)(v.h,{alt:"Close",tooltipHidden:!0,colorway:i,onClick:T,children:(0,r.tZ)(h.Z,{})})}):null]})}));g.displayName="StatusBannerButton"},34153:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return qt}});var r=t(57135),a=t(57389),i=t(2272),o=t(96583),l=t(74985),s=t(50959),c=t(72006),u=t(43119),d=t(71440),m=t(25476),h=t(24635);function v(){var e=(0,u.Z)(["\n  fragment TeamsDashboardTeam on Team {\n    id\n    username\n    memberCount\n  }\n"]);return v=function(){return e},e}function f(){var e=(0,u.Z)(["\n  fragment TeamsDashboardTeamOrganization on TeamOrganization {\n    id\n    name\n    isOwner\n    isAdmin\n    isVerified\n    showVerificationBadge\n    canBeDeleted\n    customer {\n      id\n      stripeCustomerId\n    }\n    quantity\n    teams {\n      id\n      ...TeamCard\n    }\n    archivedTeamsCount\n    unsubscribedTeamsCount\n    capabilities {\n      isExpired: isExpiring(daysFromNow: 0)\n      isExpiringIn30Days: isExpiring(daysFromNow: 30)\n      isEducationPlan\n      isBusinessPlan\n      isPerSeatPlan\n      isFlatPlan\n      canAddEducationTeam\n      canCreateNewTeam\n      availableSeats\n      memberCount\n    }\n    userPermissions {\n      canViewOrgSettings\n      canDeleteOrg\n      canLeaveOrg\n      canRemoveOrgAdmins\n      canRemoveOrgOwners\n      canAddOrgAdmins\n      canAddOrgOwners\n      canEditBilling\n      canCreateTeamsInOrg\n    }\n    inviteLink {\n      id\n      code\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function p(){var e=(0,u.Z)(['\n  query TeamsDashboard {\n    currentUser {\n      id\n      email\n      canCreateNewFreeTeam\n      showVerifyTeacherBanner\n      capabilities {\n        canCreateEduTrial\n      }\n      freeTeams {\n        id\n        ...TeamCard\n      }\n      educationTeamOrgs: teamOrganizations(subscriptionType: EDUCATION) {\n        id\n        ...TeamsDashboardTeamOrganization\n      }\n      proTeamOrgs: teamOrganizations(subscriptionType: PRO) {\n        id\n        ...TeamsDashboardTeamOrganization\n      }\n      isPrivacyLimitedAccess: hasPrivacyRole\n      hasTeamsKillswitch: gate(feature: "flag-killswitch-teams")\n    }\n  }\n  ',"\n  ","\n"]);return p=function(){return e},e}var g={},Z=(v(),(0,d.Ps)(f(),m.eL)),b=(0,d.Ps)(p(),m.eL,Z);var T=t(67541),x=t(82893),y=t.n(x),w=t(21020),C=t(56169),O=t(50216);function z(){var e=(0,u.Z)(["\n  fragment TeamsDeleteTeamModalTeam on Team {\n    id\n    username\n  }\n"]);return z=function(){return e},e}function G(){var e=(0,u.Z)(["\n  mutation TeamsDeleteTeamModalDeleteTeam($input: DeleteTeamInput!) {\n    deleteTeam(input: $input) {\n      ... on Team {\n        id\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return G=function(){return e},e}var _={},B=(z(),(0,d.Ps)(G()));var E=t(39541),I=t(61284),S=t(85368),D=t(45510),P=t(39137),X=t(2041),k=t(13233),U=t(54873),N=function(e){var n=e.team,t=e.isOpen,r=e.onRequestClose,a=e.onDelete,o=(0,k.Z)(),u=o.showConfirm,d=o.showError,m=(0,C.H)()("confirmName"),h=n.displayName||n.username,v=(0,i.Z)(s.useState(""),2),f=v[0],p=v[1],g=f===h,Z=(0,i.Z)(function(e){var n=(0,c.Z)({},_,e);return O.D(B,n)}({variables:{input:{teamId:n.id}},onCompleted:function(e){"Team"===e.deleteTeam.__typename?(a(),u("Team deleted"),r()):"UserError"===e.deleteTeam.__typename&&(d(e.deleteTeam.message),r())},onError:function(e){var n=e.graphQLErrors[0].message||"Something went wrong when deleting this team";d(n),r()}}),2),b=Z[0],T=Z[1].loading;return(0,l.tZ)(X.u,{isOpen:t,onRequestClose:r,children:(0,l.BX)(S.G,{css:[E.l0.colWithGap(24)],tag:"form",children:[(0,l.BX)(I.h4,{variant:"headerDefault",level:1,css:E.l0.maxWidth("100%"),children:["Delete ",h,"?"]}),(0,l.BX)(S.G,{css:[E.l0.colWithGap(8)],children:[(0,l.tZ)(I.xv,{children:"Deleting will remove the Team from this Organization, and all Repls and Folders in this Team will be deleted. Are you sure you want to delete this Team?"}),(0,l.tZ)(I.xv,{children:"Be careful, deleting a Team cannot be undone. If you want to save the contents of the Team, consider archiving the Team instead."})]}),(0,l.BX)(S.G,{css:[E.l0.colWithGap(8)],children:[(0,l.BX)("label",{htmlFor:m,css:[E.l0.color.foregroundDimmer,{fontSize:E.TV.fontSizeSmall,lineHeight:E.TV.lineHeightSmall}],children:["Type the Team name (",h,") to delete"]}),(0,l.tZ)(P.II,{autoFocus:!0,disabled:T,id:m,value:f,placeholder:h,onChange:function(e){return p(e.currentTarget.value)}})]}),(0,l.BX)(S.G,{css:[E.l0.rowWithGap(12),E.l0.justify.end],children:[(0,l.tZ)(D.zx,{text:"Cancel",disabled:T,onClick:r}),(0,l.tZ)(D.zx,{iconLeft:(0,l.tZ)(U.Z,{}),disabled:!g||T,onClick:function(){return b()},text:"".concat(T?"Deleting Team...":"Yes, delete this Team"),colorway:"negative"})]})]})})};function F(){var e=(0,u.Z)(["\n  fragment LeaveTeamOutput on TeamOutput {\n    ... on Team {\n      id\n    }\n    ... on UserError {\n      message\n    }\n  }\n"]);return F=function(){return e},e}function M(){var e=(0,u.Z)(["\n  mutation TeamCardLeaveTeam($teamId: Int!) {\n    leaveTeam(teamId: $teamId) {\n      ...LeaveTeamOutput\n    }\n  }\n  ","\n"]);return M=function(){return e},e}var R={},W=(0,d.Ps)(F()),L=(0,d.Ps)(M(),W);var A=t(32835),V=function(e){var n=e.team,t=e.isOpen,r=e.onRequestClose,a=e.onLeave,o=(0,k.Z)(),s=o.showConfirm,u=o.showError,d=(0,i.Z)(function(e){var n=(0,c.Z)({},R,e);return O.D(L,n)}({variables:{teamId:n.id},onError:function(e){var n=e.graphQLErrors[0];n.message?u(n.message):u("Something went wrong when leaving this team")},onCompleted:function(e){e&&"Team"===e.leaveTeam.__typename?(a(),s("Successfully left team"),r()):e&&"UserError"===e.leaveTeam.__typename&&u(e.leaveTeam.message)}}),2),m=d[0],h=d[1].loading;return(0,l.tZ)(X.u,{isOpen:t,onRequestClose:r,children:(0,l.BX)(S.G,{css:[E.l0.colWithGap(24)],children:[(0,l.BX)(I.h4,{variant:"headerDefault",level:2,css:E.l0.maxWidth("100%"),children:["Leave ",n.displayName||n.username,"?"]}),(0,l.tZ)(I.xv,{children:"Are you sure you want to leave this Team? You will lose access to all of the Team\u2019s Repls and Folders."}),(0,l.BX)(S.G,{css:[E.l0.rowWithGap(12),E.l0.justify.end],children:[(0,l.tZ)(D.zx,{text:"Cancel",disabled:h,onClick:r}),(0,l.tZ)(D.zx,{iconLeft:(0,l.tZ)(A.Z,{}),disabled:h,onClick:function(){return m()},text:"Yes, leave Team",colorway:"negative"})]})]})})};function q(){var e=(0,u.Z)(["\n  mutation ArchiveTeamModalArchiveTeam($input: ArchiveTeamInput!) {\n    archiveTeam(input: $input) {\n      ... on Team {\n        id\n        archived\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n"]);return q=function(){return e},e}function $(){var e=(0,u.Z)(["\n  mutation UnarchiveTeamModalArchiveTeam($input: UnarchiveTeamInput!) {\n    unarchiveTeam(input: $input) {\n      ... on Team {\n        id\n        archived\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n"]);return $=function(){return e},e}var j={},H=(0,d.Ps)(q());var Y=(0,d.Ps)($());var K,J=t(98150),Q=function(e){var n=e.team,t=e.isOpen,r=e.onRequestClose,a=e.onArchive,o=(0,k.Z)(),s=o.showConfirm,u=o.showError,d=(0,i.Z)(function(e){var n=(0,c.Z)({},j,e);return O.D(H,n)}({variables:{input:{teamId:n.id}},onCompleted:function(e){"Team"===e.archiveTeam.__typename&&(s("Team archived"),a(),r()),"UserError"!==e.archiveTeam.__typename&&"UnauthorizedError"!==e.archiveTeam.__typename&&"NotFoundError"!==e.archiveTeam.__typename||u(e.archiveTeam.message)}}),2),m=d[0],h=d[1].loading,v=(0,i.Z)(function(e){var n=(0,c.Z)({},j,e);return O.D(Y,n)}({variables:{input:{teamId:n.id}},onCompleted:function(e){"Team"===e.unarchiveTeam.__typename&&(s("Team unarchived"),a(),r()),"UserError"!==e.unarchiveTeam.__typename&&"UnauthorizedError"!==e.unarchiveTeam.__typename&&"NotFoundError"!==e.unarchiveTeam.__typename||u(e.unarchiveTeam.message)}}),2),f=v[0],p=v[1].loading,g=h||p;return(0,l.tZ)(X.u,{isOpen:t,onRequestClose:r,children:(0,l.BX)(S.G,{css:[E.l0.colWithGap(32)],children:[(0,l.BX)(I.h4,{variant:"headerDefault",level:2,css:E.l0.maxWidth("100%"),children:[n.archived?"Unarchive":"Archive"," ",n.displayName||n.username,"?"]}),n.archived?(0,l.tZ)(I.xv,{children:"Unarchiving will show the Team in the Organization, and members will be able to create new Repls in the Team. You can archive again at any time."}):(0,l.BX)(S.G,{css:E.l0.colWithGap(8),children:[(0,l.tZ)(I.xv,{children:"Archiving will hide the Team from the Organization. Members will be able to access Repls created in this Team, but new Repls can not be created. You can unarchive the Team at any time."}),(0,l.tZ)(I.xv,{children:"Archiving is a good option if you are done with a Team, but want to retain access to the content in it."})]}),(0,l.BX)(S.G,{css:[E.l0.rowWithGap(12),E.l0.justify.end],children:[(0,l.tZ)(D.zx,{text:"Cancel",disabled:g,onClick:r}),(0,l.tZ)(D.zx,{iconLeft:(0,l.tZ)(J.Z,{}),disabled:g,onClick:function(){n.archived?f():m()},text:"".concat(n.archived?"Unarchive":"Yes, archive this"," Team"),colorway:n.archived?"primary":"negative"})]})]})})},ee=t(4421),ne=t(79637),te=t(87076),re=t(48667),ae=t(43312);!function(e){e.Leave="Leave Team",e.Delete="Delete Team",e.Archive="Archive Team",e.Unarchive="Unarchive Team"}(K||(K={}));var ie="@media screen and (min-width: ".concat(ee.j.tabletMin,"px)"),oe=function(e){var n=e.team;return(0,l.BX)(S.G,{css:[E.l0.flex.row,E.l0.align.center,E.l0.flex.shrink(2),E.l0.color.foregroundDefault,(0,a.Z)({},ie,{flexGrow:1})],children:[(0,l.tZ)(le,{imageUrl:n.image}),(0,l.tZ)(S.G,{css:[E.l0.flex.shrink(2)],children:(0,l.tZ)(I.xv,{multiline:!1,maxLines:1,variant:"subheadDefault",children:n.displayName||n.username})})]})},le=function(e){var n=e.imageUrl;return(0,l.tZ)(S.G,{tag:"span",css:[E.l0.mr(16),E.l0.borderRadius(16),{width:32,height:32,backgroundImage:"url(".concat(n,")"),backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"}]})},se=function(e){var n,t,r,o=e.team,c=e.onRemove,u=e.showBottomBorder,d=e.canJoinTeam,h=void 0!==d&&d,v=(0,k.Z)().showError,f=(0,i.Z)(s.useState(!1),2),p=f[0],g=f[1],Z=(0,i.Z)((0,m._O)({onCompleted:function(e){var n=e.joinTeamAsOrgAdmin;"Team"===n.__typename?c():"UserError"!==n.__typename&&"NotFoundError"!==n.__typename&&"UnauthorizedError"!==n.__typename||(v(n.message),g(!1))},onError:function(){g(!1)}}),1),b=Z[0],T=(0,ae.F4)("\n    0% {\n      transform: rotate(0deg);\n    }\n    100% {\n      transform: rotate(360deg);\n    }\n  "),x=(0,i.Z)(s.useState(null),2),C=x[0],O=x[1],z=function(){return O(null)},G=Boolean(null===(n=o.userPermissions)||void 0===n?void 0:n.canLeaveTeam),_=Boolean(null===(t=o.userPermissions)||void 0===t?void 0:t.canDeleteTeam),B=[];return Boolean(null===(r=o.userPermissions)||void 0===r?void 0:r.canArchiveTeam)&&B.push({label:o.archived?K.Unarchive:K.Archive,icon:(0,l.tZ)(J.Z,{}),isDestructive:!o.archived}),G&&B.push({label:K.Leave,icon:(0,l.tZ)(A.Z,{}),isDestructive:!0}),_&&B.push({label:K.Delete,icon:(0,l.tZ)(U.Z,{}),isDestructive:!0}),(0,l.BX)(S.G,{dataCy:"team-card-".concat(o.username),css:[E.l0.flex.row,E.l0.justify.spaceBetween,E.l0.mx(16),E.l0.py(16),{borderBottom:u?"1px solid ".concat(E.TV.backgroundHighest):"none"}],children:[(0,l.BX)(S.G,{css:[E.l0.flex.row,E.l0.justify.spaceBetween,E.l0.flex.shrink(2),(0,a.Z)({},ie,{flexGrow:1})],children:[h?(0,l.tZ)(oe,{team:o}):(0,l.tZ)(y(),{href:{pathname:"/teamProfile",query:{teamname:o.username}},as:"/team/".concat(o.username),passHref:!0,children:(0,l.tZ)("a",{children:(0,l.tZ)(oe,{team:o})})}),(0,l.tZ)(S.G,{css:[(0,a.Z)({display:"none"},ie,{display:"flex"})],children:(0,l.tZ)(w.C,{size:32,members:o.members.map((function(e){return e.user})),memberCount:o.memberCount})})]}),h&&p?(0,l.tZ)(te.h,{disabled:!0,css:[{alignSelf:"center",margin:"0 33px",animation:"".concat(T," 1s infinite linear")}],alt:"Joining team",children:(0,l.tZ)(re.Z,{})}):null,h&&!p?(0,l.tZ)(D.zx,{css:[E.l0.ml(8)],text:"Join Team",onClick:function(){g(!0),b({variables:{teamId:o.id}})}}):null,0===B.length||h?null:(0,l.BX)(l.HY,{children:[(0,l.tZ)(S.G,{css:[E.l0.ml(8)],children:(0,l.tZ)("div",{onClick:function(e){e.preventDefault()},children:(0,l.tZ)(ne.Z,{label:"Team Actions",items:B,dataCy:"team-actions-".concat(o.username),onItemClick:function(e){return O(e.label)}})})}),(0,l.tZ)(N,{isOpen:C===K.Delete,team:o,onDelete:c,onRequestClose:z}),(0,l.tZ)(V,{isOpen:C===K.Leave,team:o,onLeave:c,onRequestClose:z}),(0,l.tZ)(Q,{isOpen:C===K.Archive||C===K.Unarchive,team:o,onArchive:c,onRequestClose:z})]})]})},ce=t(9125);function ue(){var e=(0,u.Z)(["\n  query TeamsListSectionArchivedTeams($orgId: Int!) {\n    teamOrganization(id: $orgId) {\n      ... on TeamOrganization {\n        id\n        archivedTeams {\n          id\n          ...TeamCard\n        }\n      }\n    }\n  }\n  ","\n"]);return ue=function(){return e},e}function de(){var e=(0,u.Z)(["\n  query TeamsListSectionUnsubscribedTeams($orgId: Int!) {\n    teamOrganization(id: $orgId) {\n      ... on TeamOrganization {\n        id\n        unsubscribedTeams {\n          id\n          ...TeamCard\n        }\n      }\n    }\n  }\n  ","\n"]);return de=function(){return e},e}var me={},he=(0,d.Ps)(ue(),m.eL);var ve=(0,d.Ps)(de(),m.eL);var fe=t(90171),pe=t(32104),ge=t(58745),Ze=t(85268),be=t(63512),Te=t(93153),xe=t(1050),ye=t(12318),we=t(63837),Ce=function(e){var n=e.organization,t=(0,k.Z)(),r=t.showConfirm,a=t.showError,o=(0,i.Z)(s.useState(!1),2),c=o[0],u=o[1],d=(0,i.Z)((0,Te.Y1)({onCompleted:function(e){"TeamOrganization"===e.updateTeamOrganization.__typename&&(r("Success"),u(!1))},onError:function(e){var n=e.message;a(n),u(!1)}}),2),m=d[0],h=d[1].loading,v=(0,ye.Y)(n.name,(function(e){if(e.length<1)return{message:"Name is required"}}));return(0,l.tZ)(S.G,{css:[E.l0.flex.row,E.l0.align.center,E.l0.pb(32)],children:c?(0,l.tZ)("form",{onSubmit:function(e){e.preventDefault(),m({variables:{input:{id:n.id,name:v.value}}})},children:(0,l.BX)(S.G,{css:[E.l0.flex.row,E.l0.align.center],children:[(0,l.tZ)(P.II,{placeholder:"Organization name",value:v.value,onChange:function(e){return v.setValue(e.target.value)},autoFocus:!0}),(0,l.tZ)(D.zx,{text:"Cancel",onClick:function(){return u(!1)},css:[E.l0.ml(16)],disabled:h}),(0,l.tZ)(D.zx,{iconLeft:(0,l.tZ)(we.Z,{}),text:h?"Saving...":"Save",type:"submit",css:[E.l0.ml(16)],disabled:h,colorway:"primary"})]})}):(0,l.BX)(S.G,{css:[E.l0.flex.row,E.l0.align.center],children:[(0,l.tZ)(I.h4,{level:2,variant:"headerBig",css:[E.l0.pr(8)],children:n.name}),(0,l.tZ)(te.h,{alt:"Update organization name",size:24,onClick:function(){return u(!0)},children:(0,l.tZ)(xe.Z,{})})]})})},Oe=t(51631);function ze(){var e=(0,u.Z)(["\n  fragment MemberUser on User {\n    id\n    displayName\n    image\n  }\n"]);return ze=function(){return e},e}function Ge(){var e=(0,u.Z)(["\n  fragment MemberMgmtMember on TeamOrganizationMembership {\n    id\n    role\n    user {\n      id\n      ...MemberUser\n    }\n  }\n  ","\n"]);return Ge=function(){return e},e}function _e(){var e=(0,u.Z)(["\n  fragment TeamOrganizationPendingInvite on TeamOrganizationInvite {\n    id\n    usernameOrEmail\n    user {\n      id\n      ...MemberUser\n    }\n  }\n  ","\n"]);return _e=function(){return e},e}function Be(){var e=(0,u.Z)(["\n  fragment MemberMgmtOrg on TeamOrganization {\n    id\n    name\n    members {\n      id\n      ...MemberMgmtMember\n    }\n    pendingInvites {\n      id\n      ...TeamOrganizationPendingInvite\n    }\n    inviteLink {\n      id\n      code\n    }\n  }\n  ","\n  ","\n"]);return Be=function(){return e},e}function Ee(){var e=(0,u.Z)(["\n  query TeamOrgMemberMgmt($teamOrgId: Int!) {\n    teamOrganization(id: $teamOrgId) {\n      ...MemberMgmtOrg\n    }\n  }\n  ","\n"]);return Ee=function(){return e},e}function Ie(){var e=(0,u.Z)(["\n  mutation UpdateTeamOrgMemberRole($input: UpdateTeamOrganizationMemberInput!) {\n    updateTeamOrganizationMember(input: $input) {\n      ... on TeamOrganization {\n        id\n        ...MemberMgmtOrg\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return Ie=function(){return e},e}function Se(){var e=(0,u.Z)(["\n  mutation DeleteTeamOrgMember($input: DeleteTeamOrganizationMemberInput!) {\n    deleteTeamOrganizationMember(input: $input) {\n      ... on TeamOrganization {\n        id\n        ...MemberMgmtOrg\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return Se=function(){return e},e}function De(){var e=(0,u.Z)(["\n  mutation CreateTeamOrgInviteLink($orgId: Int!) {\n    createTeamOrgInviteLink(orgId: $orgId) {\n      ... on TeamOrganization {\n        id\n        ...MemberMgmtOrg\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return De=function(){return e},e}function Pe(){var e=(0,u.Z)(["\n  mutation DeleteTeamOrgInviteLink($orgId: Int!) {\n    deleteTeamOrgInviteLink(orgId: $orgId) {\n      ... on TeamOrganization {\n        id\n        ...MemberMgmtOrg\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return Pe=function(){return e},e}var Xe={},ke=(0,d.Ps)(ze()),Ue=(0,d.Ps)(Ge(),ke),Ne=(0,d.Ps)(_e(),ke),Fe=(0,d.Ps)(Be(),Ue,Ne),Me=(0,d.Ps)(Ee(),Fe);var Re=(0,d.Ps)(Ie(),Fe);var We=(0,d.Ps)(Se(),Fe);De();Pe();var Le=t(80731),Ae=t(63128),Ve=t(13565),qe=t(80336),$e=t(17755),je=t(70427),He=t(84358),Ye=t(99964),Ke=t(95572);function Je(e){var n=e.organization,t=e.createInvite,r=(0,i.Z)(s.useState(!1),2),a=r[0],o=r[1],c=(0,ye.Y)("",Ke.Z.isValidEmail),u=(0,He.Z)(c.value,250);(0,je.gJ)({variables:{query:u,limit:5},onCompleted:function(e){var n=e.usernameSearch;n&&h(n)}});var d=(0,i.Z)(s.useState([]),2),m=d[0],h=d[1],v=s.useCallback((function(e){var r="";r=e||c.value,t({variables:{input:{usernameOrEmail:r,orgId:n.id}}}),c.setValue(""),h([])}),[t,n,c]),f=(0,i.Z)(s.useState(!1),2),p=f[0],g=f[1],Z=(0,Ye.Z)((function(){return g(!1)}),[]);s.useEffect((function(){m.length>0?g(!0):g(!1)}),[m]);var b=(0,C.H)();return(0,l.tZ)(S.G,{children:a?(0,l.tZ)(Ae.Tg,{background:"higher",css:[E.l0.p(16),E.l0.borderRadius(8)],children:(0,l.BX)(S.G,{children:[(0,l.BX)(S.G,{css:[E.l0.flex.row,E.l0.justify.spaceBetween,E.l0.mb(16)],children:[(0,l.BX)(I.xv,{variant:"subheadDefault",multiline:!1,children:["Add admin to ",n.name]}),(0,l.tZ)(te.h,{alt:"Close add admin or org dialog",onClick:function(){return o(!1)},children:(0,l.tZ)(qe.Z,{})})]}),(0,l.BX)(S.G,{css:[E.l0.mb(32)],children:[(0,l.tZ)("label",{htmlFor:b("usernameOrEmail"),children:(0,l.tZ)(I.xv,{variant:"small",color:"dimmer",multiline:!1,children:"Invite with username or email"})}),(0,l.tZ)("form",{onSubmit:function(){},children:(0,l.BX)(S.G,{css:[E.l0.flex.row,E.l0.mt(4)],innerRef:Z,children:[(0,l.BX)(S.G,{css:[{flexGrow:2}],children:[(0,l.tZ)(P.II,{placeholder:"Type a username or email address",value:c.value,onChange:function(e){return c.setValue(e.target.value)},id:b("usernameOrEmail")}),p?(0,l.tZ)(S.G,{css:[E.l0.backgroundColor.backgroundHighest,E.l0.borderRadius(8),{position:"relative",border:"1px solid ".concat(E.TV.outlineDefault)}],children:(0,l.tZ)(Le.v2,{label:"Returned users from search",onAction:v,children:m.map((function(e){return(0,l.tZ)(Le.ck,{"aria-label":e.username,children:(0,l.tZ)($e.n,{src:e.image,username:e.username,small:!0})},e.username)}))})}):null]}),(0,l.tZ)(D.zx,{type:"submit",text:"Invite",iconLeft:(0,l.tZ)(Ve.Z,{}),css:[E.l0.ml(16)],onClick:function(){return v()},disabled:Boolean(c.error)})]})})]})]})}):(0,l.tZ)(S.G,{css:[E.l0.flex.row],children:(0,l.tZ)(D.zx,{iconLeft:(0,l.tZ)(Ve.Z,{}),text:"Add Org Admin or Owner",onClick:function(){return o(!0)},colorway:"primary",stretch:!1})})})}var Qe=t(53508);function en(){var e=(0,u.Z)(["\n  mutation CreateTeamOrgInvite($input: CreateTeamOrgInviteInput!) {\n    createTeamOrganizationInvite(input: $input) {\n      ... on TeamOrganization {\n        id\n        ...MemberMgmtOrg\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return en=function(){return e},e}function nn(){var e=(0,u.Z)(["\n  mutation DeleteTeamOrgInvite($input: DeleteTeamOrgInviteInput!) {\n    deleteTeamOrganizationInvite(input: $input) {\n      ... on TeamOrganization {\n        id\n        ...MemberMgmtOrg\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return nn=function(){return e},e}var tn={},rn=(0,d.Ps)(en(),Fe);var an=(0,d.Ps)(nn(),Fe);var on,ln=function(e){var n=e.image;return(0,l.tZ)(S.G,{tag:"span",css:[E.l0.mr(16),E.l0.borderRadius(16),{width:32,height:32,backgroundSize:"cover",backgroundImage:"url(".concat(n,")"),backgroundRepeat:"no-repeat",backgroundPosition:"center"}]})},sn=function(e){var n=e.organization,t=e.currentUserId,r=(0,k.Z)().showError,a=(0,i.Z)(s.useState([]),2),o=a[0],u=a[1],d=(0,i.Z)(s.useState([]),2),m=d[0],v=d[1],f=function(e){u(e.members),v(e.pendingInvites)},p=function(e){r(e.message)},g=function(e){var n=(0,c.Z)({},Xe,e);return h.a(Me,n)}({variables:{teamOrgId:n.id},onCompleted:function(e){var n;"TeamOrganization"===(null===(n=e.teamOrganization)||void 0===n?void 0:n.__typename)&&f(e.teamOrganization)},onError:function(e){p(e)}}).loading,Z=(0,i.Z)(function(e){var n=(0,c.Z)({},Xe,e);return O.D(Re,n)}({onCompleted:function(e){var n,t,r;"TeamOrganization"===(null===(n=e.updateTeamOrganizationMember)||void 0===n?void 0:n.__typename)?f(e.updateTeamOrganizationMember):"UnauthorizedError"!==(null===(t=e.updateTeamOrganizationMember)||void 0===t?void 0:t.__typename)&&"NotFoundError"!==(null===(r=e.updateTeamOrganizationMember)||void 0===r?void 0:r.__typename)||p(e.updateTeamOrganizationMember)},onError:function(e){p(e)}}),1),b=Z[0],T=(0,i.Z)(function(e){var n=(0,c.Z)({},Xe,e);return O.D(We,n)}({onCompleted:function(e){var n,t,r;"TeamOrganization"===(null===(n=e.deleteTeamOrganizationMember)||void 0===n?void 0:n.__typename)?f(e.deleteTeamOrganizationMember):"UnauthorizedError"!==(null===(t=e.deleteTeamOrganizationMember)||void 0===t?void 0:t.__typename)&&"NotFoundError"!==(null===(r=e.deleteTeamOrganizationMember)||void 0===r?void 0:r.__typename)||p(e.deleteTeamOrganizationMember)},onError:function(e){p(e)}}),1),x=T[0],y=(0,i.Z)(function(e){var n=(0,c.Z)({},tn,e);return O.D(rn,n)}({onCompleted:function(e){var n,t,r,a;"TeamOrganization"===(null===(n=e.createTeamOrganizationInvite)||void 0===n?void 0:n.__typename)?f(e.createTeamOrganizationInvite):"UserError"!==(null===(t=e.createTeamOrganizationInvite)||void 0===t?void 0:t.__typename)&&"UnauthorizedError"!==(null===(r=e.createTeamOrganizationInvite)||void 0===r?void 0:r.__typename)&&"NotFoundError"!==(null===(a=e.createTeamOrganizationInvite)||void 0===a?void 0:a.__typename)||p(e.createTeamOrganizationInvite)},onError:function(e){p(e)}}),1),w=y[0],C=(0,i.Z)(function(e){var n=(0,c.Z)({},tn,e);return O.D(an,n)}({onCompleted:function(e){var n,t,r,a;"TeamOrganization"===(null===(n=e.deleteTeamOrganizationInvite)||void 0===n?void 0:n.__typename)?f(e.deleteTeamOrganizationInvite):"UserError"!==(null===(t=e.deleteTeamOrganizationInvite)||void 0===t?void 0:t.__typename)&&"UnauthorizedError"!==(null===(r=e.deleteTeamOrganizationInvite)||void 0===r?void 0:r.__typename)&&"NotFoundError"!==(null===(a=e.deleteTeamOrganizationInvite)||void 0===a?void 0:a.__typename)||p(e.deleteTeamOrganizationInvite)},onError:function(e){p(e)}}),1),z=C[0];return g?(0,l.tZ)(S.G,{css:[E.l0.flex.row,E.l0.justify.center],children:(0,l.tZ)(pe.Z,{})}):(0,l.BX)(S.G,{children:[(0,l.tZ)(Je,{organization:n,createInvite:w}),(0,l.BX)(S.G,{children:[o.map((function(e,r){var a,i,o,s,c,u;return"User"!==(null===(a=e.user)||void 0===a?void 0:a.__typename)?null:(0,l.BX)(S.G,{css:[E.l0.flex.row,E.l0.justify.spaceBetween,E.l0.pt(16),E.l0.mt(16),{borderTop:0===r?"none":"1px solid ".concat(E.TV.backgroundHighest)}],children:[(0,l.BX)(S.G,{css:[E.l0.flex.row,E.l0.align.center],children:[(0,l.tZ)(ln,{image:e.user.image}),(0,l.BX)(S.G,{children:[(0,l.tZ)(I.xv,{variant:"subheadDefault",multiline:!1,children:"".concat(null===(i=e.user)||void 0===i?void 0:i.displayName).concat(t===e.user.id?" (you)":"")}),!1]})]}),(0,l.BX)(S.G,{css:[E.l0.flex.row,E.l0.align.center],children:[("admin"===e.role&&(null===(o=n.userPermissions)||void 0===o?void 0:o.canRemoveOrgAdmins)||"owner"===e.role&&(null===(s=n.userPermissions)||void 0===s?void 0:s.canRemoveOrgOwners))&&t!==e.user.id?(0,l.tZ)(te.h,{alt:"Remove user ".concat(e.user.displayName," with role ").concat(e.role),size:28,onClick:function(){var t;(null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t.id)&&x({variables:{input:{orgId:n.id,memberId:e.user.id,retainTeamAccess:!0}}})},children:(0,l.tZ)(U.Z,{})}):null,(null===(c=n.userPermissions)||void 0===c?void 0:c.canRemoveOrgOwners)&&t!==e.user.id?null:(0,l.tZ)(D.zx,{disabled:!0,text:"owner"===e.role?"Org Owner":"Org Admin",css:[E.l0.ml(8),E.l0.color.foregroundDefault]}),(null===(u=n.userPermissions)||void 0===u?void 0:u.canRemoveOrgOwners)&&t!==e.user.id?(0,l.tZ)(S.G,{css:[E.l0.ml(8)],children:(0,l.BX)(Le.ZE,{label:"owner"===e.role?"Org Owner":"Org Admin",onAction:function(t){var r,a;(null===e||void 0===e||null===(r=e.user)||void 0===r?void 0:r.id)&&b({variables:{input:{orgId:n.id,memberId:null===e||void 0===e||null===(a=e.user)||void 0===a?void 0:a.id,role:t}}})},children:[(0,l.tZ)(Le.ck,{children:"Org Owner"},Oe.fg.Owner),(0,l.tZ)(Le.ck,{children:"Org Admin"},Oe.fg.Admin)]})}):null]})]},e.id)})),m.length>0&&(0,l.BX)(S.G,{css:[E.l0.mt(16)],children:[(0,l.tZ)(Qe.Z,{text:"Pending Invitations"}),m.map((function(e,t){var r;return(0,l.BX)(S.G,{css:[E.l0.flex.row,E.l0.justify.spaceBetween,E.l0.mt(16),E.l0.pt(0===t?0:16),{borderTop:0===t?"none":"1px solid ".concat(E.TV.backgroundHighest)}],children:[(0,l.BX)(S.G,{css:[E.l0.flex.row,E.l0.align.center],children:[e.user?(0,l.tZ)(ln,{image:e.user.image}):null,(0,l.BX)(S.G,{children:[(0,l.tZ)(I.xv,{multiline:!1,variant:"subheadDefault",css:[E.l0.mb(e.user?4:0)],children:(null===(r=e.user)||void 0===r?void 0:r.displayName)||e.usernameOrEmail}),(e.user,null)]})]}),(0,l.tZ)(te.h,{alt:"Remove invite for user",size:28,onClick:function(){z({variables:{input:{orgId:n.id,inviteId:e.id}}})},children:(0,l.tZ)(U.Z,{})})]})}))]})]})]})},cn=function(e){var n=e.orgId;return(0,l.BX)(S.G,{children:[(0,l.tZ)(I.xv,{variant:"subheadBig",css:[E.l0.pt(8),E.l0.pb(16)],multiline:!1,children:"Manage Plan"}),(0,l.tZ)(I.xv,{multiline:!1,children:(0,l.tZ)("a",{href:"/stripe-customer-portal?orgId=".concat(n),children:"Change payment method, view invoices, and cancel subscription"})})]})},un=function(e){var n=e.text,t=e.selected,r=e.onClick,a=e.Icon,i=(0,ae.iv)({paddingTop:E.TV.space16,paddingBottom:E.TV.space24,backgroundColor:t?"default":E.TV.backgroundHigher});return(0,l.tZ)(S.G,{css:[E.l0.mx(4)],children:(0,l.tZ)(D.zx,{css:i,text:n,stretch:!1,iconLeft:(0,l.tZ)(a,{}),onClick:r})})},dn=function(e){var n=e.children,t=(0,ae.iv)({overflow:"hidden",borderBottom:"1px solid",borderColor:E.TV.backgroundHighest,height:32});return(0,l.tZ)(S.G,{css:t,children:(0,l.tZ)(S.G,{css:[E.l0.flex.row,E.l0.ml(16)],children:n})})};!function(e){e.MEMBERS="MEMBERS",e.BILLING="BILLING"}(on||(on={}));var mn=function(e){var n,t,r,a,o=e.isOpen,c=e.setClose,u=e.organization,d=e.currentUserId,m=(0,i.Z)(s.useState(on.MEMBERS),2),h=m[0],v=m[1],f=(null===(n=u.capabilities)||void 0===n?void 0:n.isBusinessPlan)?"".concat(u.capabilities.availableSeats,"/").concat(u.quantity," Members"):"Members",p=(null===u||void 0===u||null===(t=u.userPermissions)||void 0===t?void 0:t.canEditBilling)&&!(null===(r=u.capabilities)||void 0===r?void 0:r.isEducationPlan),g=Boolean(null===(a=u.customer)||void 0===a?void 0:a.stripeCustomerId);return(0,l.BX)(X.u,{isOpen:o,onRequestClose:c,noPadding:!0,maxWidth:872,children:[(0,l.tZ)(S.G,{css:[E.l0.p(16),E.l0.pb(0)],children:(0,l.tZ)(Ce,{organization:u})}),(0,l.BX)(dn,{children:[(0,l.tZ)(un,{text:f,Icon:Ze.Z,selected:h===on.MEMBERS,onClick:function(){return v(on.MEMBERS)}}),p&&g?(0,l.tZ)(un,{text:"Billing/Plan",Icon:be.Z,selected:h===on.BILLING,onClick:function(){return v(on.BILLING)}}):null]}),(0,l.BX)(S.G,{css:[E.l0.p(16)],children:[h===on.MEMBERS&&(0,l.tZ)(sn,{organization:u,currentUserId:d}),h===on.BILLING&&(0,l.tZ)(cn,{orgId:u.id})]})]})},hn=t(33814);function vn(e){var n=e.organization,t=e.onMenuItemSelected,r=[];return n&&n.userPermissions&&(n.userPermissions.canViewOrgSettings&&r.push({value:"OrgSettings",label:"Org Settings",icon:(0,l.tZ)(hn.Z,{})}),n.userPermissions.canDeleteOrg&&r.push({value:"DeleteOrg",label:"Delete Org",icon:(0,l.tZ)(U.Z,{}),isDestructive:!0}),n.userPermissions.canLeaveOrg&&r.push({value:"LeaveOrg",label:"Leave Org",icon:(0,l.tZ)(A.Z,{}),isDestructive:!0})),0===r.length?null:(0,l.tZ)(ne.Z,{label:"Org Actions",items:r,onItemClick:function(e){return t(e.value)}})}var fn=t(94971);function pn(){var e=(0,u.Z)(["\n  mutation DeleteTeamOrg($input: DeleteTeamOrganizationInput!) {\n    deleteTeamOrganization(input: $input) {\n      ... on TeamOrganization {\n        id\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n"]);return pn=function(){return e},e}var gn={},Zn=(0,d.Ps)(pn());var bn=function(e){var n=e.orgName,t=e.orgId,a=e.isOpen,s=e.canBeDeleted,u=e.onRequestClose,d=e.onOrgDeleted,m=(0,C.H)()("confirmName"),h=(0,k.Z)(),v=h.showError,f=h.showConfirm,p=(0,i.Z)(function(e){var n=(0,c.Z)({},gn,e);return O.D(Zn,n)}({onError:function(e){v(e.message)},onCompleted:function(e){"TeamOrganization"===e.deleteTeamOrganization.__typename?(f("Organization successfully deleted."),d(),y()):"NotFoundError"!==e.deleteTeamOrganization.__typename&&"UnauthorizedError"!==e.deleteTeamOrganization.__typename||v(e.deleteTeamOrganization.message)}}),2),g=p[0],Z=p[1].loading,b=(0,ye.Y)("",(function(e){if(e!==n)return{message:"Please type the organization name exactly"}})),T=Boolean(b.error),x=(0,ae.iv)({borderRadius:"".concat(E.TV.space8," !important")}),y=function(){b.setValue(""),u()},w=function(){var e=(0,r.Z)((function(e){return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return e.preventDefault(),b.validate()?[2]:[4,g({variables:{input:{orgId:t}}})];case 1:return n.sent(),[2]}}))}));return function(n){return e.apply(this,arguments)}}();return(0,l.tZ)(X.u,{isOpen:a,onRequestClose:y,children:(0,l.BX)(S.G,{css:[E.l0.colWithGap(24)],tag:"form",onSubmit:w,children:[(0,l.BX)(I.h4,{variant:"headerDefault",level:2,css:E.l0.maxWidth("100%"),children:["Delete ",n]}),s?(0,l.BX)(l.HY,{children:[(0,l.BX)(S.G,{css:E.l0.colWithGap(8),children:[(0,l.BX)(I.xv,{children:["Deleting ",n," will remove access to the Organization for anyone in the Organization, and any Teams in the Organization."]}),(0,l.tZ)(I.xv,{children:"It will also cancel the Organization\u2019s paid plan, if it has one, effective at the next billing cycle."}),(0,l.tZ)(I.xv,{children:"This cannot be undone!"})]}),(0,l.BX)(S.G,{css:[E.l0.colWithGap(8)],children:[(0,l.tZ)("label",{css:[E.l0.color.foregroundDimmer,{fontSize:E.TV.fontSizeSmall,lineHeight:E.TV.lineHeightSmall}],htmlFor:m,children:"Type the organization name to confirm"}),(0,l.tZ)(fn.ZP,{autoFocus:!0,required:!0,css:x,id:m,value:b.value,placeholder:"Type the organization name to confirm",onBlur:b.handleBlur,disabled:Z,validationResults:b.error?[{message:b.error.message,state:"error"}]:void 0,onChange:function(e){return b.setValue(e.currentTarget.value)}})]})]}):(0,l.tZ)(S.G,{css:E.l0.colWithGap(8),children:(0,l.tZ)(I.xv,{children:"This Organization has active Teams in it. Deleting Organizations with Teams is not currently supported. If you want to delete this Organization, please delete the Teams in the Organization first."})}),(0,l.BX)(S.G,{css:[E.l0.rowWithGap(12),E.l0.justify.end],children:[(0,l.tZ)(D.zx,{text:"Cancel",type:"button",onClick:y}),(0,l.tZ)(D.zx,{iconLeft:(0,l.tZ)(U.Z,{}),disabled:Z||T||!s,text:"Yes, Cancel Plan & Delete Organization",colorway:"negative",type:"submit"})]})]})})},Tn=t(34938);function xn(){var e=(0,u.Z)(["\n  mutation LeaveTeamOrg($input: DeleteTeamOrganizationMemberInput!) {\n    deleteTeamOrganizationMember(input: $input) {\n      ... on TeamOrganization {\n        id\n        ...MemberMgmtOrg\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return xn=function(){return e},e}var yn={},wn=(0,d.Ps)(xn(),Fe);var Cn=function(e){var n=e.orgName,t=e.currentUserId,r=e.orgId,a=e.isOpen,o=e.onRequestClose,u=e.onLeave,d=(0,k.Z)(),m=d.showError,h=d.showConfirm,v=(0,C.H)()("retainTeamAccess"),f=(0,i.Z)(s.useState(!0),2),p=f[0],g=f[1],Z=(0,i.Z)(function(e){var n=(0,c.Z)({},yn,e);return O.D(wn,n)}({onError:function(e){m(e.message)},onCompleted:function(e){"TeamOrganization"===e.deleteTeamOrganizationMember.__typename?(h("Successfully left ".concat(n)),u(),o()):"NotFoundError"!==e.deleteTeamOrganizationMember.__typename&&"UnauthorizedError"!==e.deleteTeamOrganizationMember.__typename||m(e.deleteTeamOrganizationMember.message)}}),2),b=Z[0],T=Z[1].loading;return(0,l.tZ)(X.u,{isOpen:a,onRequestClose:o,children:(0,l.BX)(S.G,{css:[E.l0.colWithGap(24)],children:[(0,l.BX)(I.h4,{variant:"headerDefault",level:2,css:E.l0.maxWidth("100%"),children:["Leave ",n]}),(0,l.tZ)(S.G,{css:E.l0.colWithGap(8),children:(0,l.BX)(I.xv,{children:["Are you sure you want to leave ",n,"? This will mean you will lose access to the Organization. If you are a member of any Teams in the Organization, you can optionally choose to keep access to those Teams you\u2019ve joined."]})}),(0,l.BX)(S.G,{css:E.l0.rowWithGap(8),children:[(0,l.tZ)(Tn.X,{id:v,checked:p,onChange:function(e){return g(e.target.checked)},disabled:T}),(0,l.tZ)("label",{css:E.l0.cursor.pointer,htmlFor:v,children:"Keep existing access to Teams"})]}),(0,l.BX)(S.G,{css:[E.l0.rowWithGap(12),E.l0.justify.end],children:[(0,l.tZ)(D.zx,{text:"Cancel",onClick:o}),(0,l.tZ)(D.zx,{iconLeft:(0,l.tZ)(A.Z,{}),text:"Yes, Leave Organization",colorway:"negative",disabled:T,onClick:function(){b({variables:{input:{orgId:r,memberId:t,retainTeamAccess:p}}})}})]})]})})};function On(){var e=(0,u.Z)(["\n  mutation CreateTeamForm($input: CreateTeamV2Input!) {\n    createTeamV2(input: $input) {\n      ... on Team {\n        id\n        ...TeamCard\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return On=function(){return e},e}var zn={},Gn=(0,d.Ps)(On(),m.eL);var _n=t(47161),Bn=t(84815),En=t(71338),In=t(24824),Sn=t(66539),Dn=t(93658),Pn=t(8622),Xn=function(e){var n=e.org,t=e.onCreate,a=e.onCancel,u=e.showStudentPrivacyCheckbox,d=(0,C.H)(),m=d("displayName"),h=d("teamUsername"),v=(0,i.Z)(s.useState(!1),2),f=v[0],p=v[1],g=(0,k.Z)().showError,Z=(0,ye.Y)("",(function(e){if(e.length>60)return{message:"Display name limited 60 characters"}})),b=(0,ye.Y)("",Ke.Z.teamUsername),T=(0,i.Z)(s.useState(!1),2),x=T[0],y=T[1],w=Boolean(Z.error||b.error),z=(0,i.Z)(function(e){var n=(0,c.Z)({},zn,e);return O.D(Gn,n)}({onError:function(e){g(e.message)},onCompleted:function(e){"Team"===e.createTeamV2.__typename?(t(e.createTeamV2),P()):"UserError"!==e.createTeamV2.__typename&&"UnauthorizedError"!==e.createTeamV2.__typename||g(e.createTeamV2.message)}}),2),G=z[0],_=z[1].loading,B=function(){var e=(0,r.Z)((function(){var e,n,t;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),a=Z.value,e=a.toLowerCase().replace(/\s+/g,"-").replace(/[^0-9a-z-]/g,"").replace(/^-|-$|--/g,"")||"team-".concat(Math.ceil(1e7*Math.random())),p(!0),[4,(0,In.uz)("/data/user/generate_username",{initialName:e,maxLength:28})];case 1:return n=r.sent(),t=n.username,b.setValue(t),p(!1),[3,3];case 2:return r.sent(),p(!1),g("Could not generate a unique username."),[3,3];case 3:return[2]}var a}))}));return function(){return e.apply(this,arguments)}}(),P=function(){Z.setValue(""),b.setValue(""),p(!1),a()},X=function(){var e=(0,r.Z)((function(e){var t;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:return e.preventDefault(),(t=Z.validate())?[3,2]:[4,b.validate()];case 1:t=r.sent(),r.label=2;case 2:return t?[2]:[4,G({variables:{input:{displayName:Z.value,username:b.value,orgId:null===n||void 0===n?void 0:n.id,privacyInvite:x}}})];case 3:return r.sent(),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),U=(0,ae.iv)({borderRadius:"".concat(E.TV.space8," !important")}),N=(0,ae.iv)({border:"none",background:"transparent",color:"inherit",font:"inherit",lineHeight:"normal",textDecoration:"underline",":disabled":{color:E.TV.foregroundDimmest},":not([disabled])":{cursor:"pointer"}}),F=_||f;return(0,l.BX)(S.G,{tag:"form",css:[E.l0.colWithGap(24)],onSubmit:X,children:[(0,l.BX)(S.G,{css:[E.l0.colWithGap(16)],children:[(0,l.tZ)(I.h4,{variant:"headerDefault",level:2,css:E.l0.maxWidth("100%"),children:n?"New Team in ".concat(n.name):"New Friends Team"}),n?(0,l.tZ)(_n.u,{icon:(0,l.tZ)(Bn.Z,{}),href:"https://docs.replit.com/teams-edu/assigning-user-roles",text:"This Team is in ".concat(n.name,". Organization owners can see the members and contents of this team. Click here to learn more about Organization roles.")}):null]}),(0,l.BX)(S.G,{css:[E.l0.colWithGap(4)],children:[(0,l.tZ)("label",{htmlFor:m,children:(0,l.tZ)(I.xv,{color:"dimmer",multiline:!1,children:"Team display name"})}),(0,l.tZ)(fn.ZP,{autoFocus:!0,disabled:F,css:U,id:m,value:Z.value,placeholder:"What should the Team be called?",onBlur:Z.handleBlur,validationResults:Z.error?[{message:Z.error.message,state:"error"}]:void 0,onChange:function(e){return Z.setValue(e.currentTarget.value)}})]}),(0,l.BX)(S.G,{css:[E.l0.colWithGap(4)],children:[(0,l.BX)(S.G,{css:[E.l0.rowWithGap(12),E.l0.align.start],children:[(0,l.BX)("label",{htmlFor:h,children:[" ",(0,l.tZ)(I.xv,{color:"dimmer",multiline:!1,children:"Team username"})]}),(0,l.tZ)("button",{disabled:F,css:[N],type:"button",onClick:B,children:"Generate Unique Username"})]}),(0,l.tZ)(fn.ZP,{required:!0,disabled:F,css:U,id:h,value:b.value,placeholder:"team-username",onBlur:b.handleBlur,validationResults:b.error?[{message:b.error.message,state:"error"}]:void 0,onChange:function(e){return b.setValue(e.currentTarget.value)}}),(0,l.BX)(S.G,{css:[E.l0.rowWithGap(4)],children:[(0,l.tZ)(En.Z,{size:12}),(0,l.tZ)(I.xv,{variant:"small",multiline:!1,children:"You can\u2019t change this after creating a Team! So pick carefully."})]})]}),u?(0,l.BX)(S.G,{css:[E.l0.rowWithGap(8)],children:[(0,l.tZ)(Tn.X,{id:d("privacyInvite"),checked:x,onChange:function(){return y(!x)}}),(0,l.tZ)("label",{htmlFor:d("privacyInvite"),children:"Click here if any of your students are under thirteen years of age."}),(0,l.tZ)(Sn.u,{placement:"auto",tooltip:"For compliance with COPPA and other privacy laws, please check this box to enable privacy mode access for students.",children:(0,l.tZ)(Dn.Z,{})})]}):null,(0,l.BX)(S.G,{css:[E.l0.rowWithGap(12),E.l0.justify.end],children:[(0,l.tZ)(D.zx,{text:"Cancel",type:"button",onClick:P,disabled:F}),(0,l.tZ)(D.zx,{iconLeft:(0,l.tZ)(Pn.Z,{}),disabled:w||F,text:"Create Team",colorway:"primary",type:"submit",dataCy:"create-team-submit"})]})]})},kn=t(2757);function Un(){var e=(0,u.Z)(["\n  fragment TeamsChangePlanModalPreviewInvoiceItemGroup on PreviewInvoiceLineItemGroup {\n    periodStart\n    periodEnd\n    type\n    items {\n      description\n      amount\n      quantity\n    }\n  }\n"]);return Un=function(){return e},e}function Nn(){var e=(0,u.Z)(["\n  query TeamsChangePlanModal($orgId: Int!) {\n    teamOrganization(id: $orgId) {\n      ... on TeamOrganization {\n        id\n        quantity\n        capabilities {\n          memberCount\n          availableSeats\n        }\n      }\n    }\n  }\n"]);return Nn=function(){return e},e}function Fn(){var e=(0,u.Z)(["\n  query TeamsChangePlanModalPreviewInvoice($input: PreviewInvoiceInput!) {\n    previewInvoice(input: $input) {\n      ... on PreviewInvoiceOutput {\n        total\n        balance\n        chargeDate\n        currentItems {\n          ...TeamsChangePlanModalPreviewInvoiceItemGroup\n        }\n        upcomingItems {\n          ...TeamsChangePlanModalPreviewInvoiceItemGroup\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return Fn=function(){return e},e}function Mn(){var e=(0,u.Z)(["\n  mutation TeamsChangePlanModalUpdateSubscription(\n    $input: UpdateSubscriptionInput!\n  ) {\n    updateSubscription(input: $input) {\n      ... on UpdateSubscriptionOutput {\n        subscriptions {\n          id\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return Mn=function(){return e},e}var Rn={},Wn=(0,d.Ps)(Un()),Ln=(0,d.Ps)(Nn());var An=(0,d.Ps)(Fn(),Wn);var Vn=(0,d.Ps)(Mn());var qn,$n=t(625),jn=t(25198),Hn=t(49500);!function(e){e[e.SelectSeats=0]="SelectSeats",e[e.PreviewInvoice=1]="PreviewInvoice",e[e.Confirmation=2]="Confirmation"}(qn||(qn={}));var Yn=999,Kn=(0,ae.iv)({borderRadius:"".concat(E.TV.space8," !important")}),Jn=function(e){var n=e.initialSeats,t=e.seats,r=e.memberCount,a=e.availableSeats,i=e.onCancel,o=e.onPreview,c=(0,C.H)()("orgSeats"),u=(0,ye.Y)(t,(function(e){return Number.isNaN(e)?{message:"Please enter a whole number"}:e?e<1?{message:"Please enter a whole number greater than or equal to ".concat(1)}:e>Yn?{message:"Please enter a whole number less than or equal to ".concat(Yn)}:void 0:void 0})),d=s.useMemo((function(){var e=u.value;return Number.isNaN(e)?"":e&&e>=1&&e<=Yn?"x $".concat(15,"/seat = $").concat(15*e,"/month"):void 0}),[u.value]),m=Boolean(u.error),h=(0,kn.Z)("seat",n),v=(0,kn.Z)("seat",a);return(0,l.tZ)(S.G,{children:(0,l.BX)(S.G,{css:[E.l0.colWithGap(48)],children:[(0,l.tZ)(I.h4,{level:1,variant:"headerDefault",children:"Update Seat Count"}),(0,l.BX)("form",{css:[E.l0.colWithGap(48)],onSubmit:function(e){e.preventDefault(),u.value&&o(u.value)},children:[(0,l.BX)(S.G,{css:[E.l0.colWithGap(12)],children:[(0,l.tZ)(jn.E,{text:"Your subscription includes ".concat(n," ").concat(h,". \n                You are currently using ").concat(r," of ").concat(n," ").concat(h,". \n                You have ").concat(a," ").concat(v," available.")}),(0,l.tZ)("label",{htmlFor:c,children:"Number of seats"}),(0,l.BX)(S.G,{css:[E.l0.rowWithGap(8),E.l0.align.center],children:[(0,l.tZ)(S.G,{children:(0,l.tZ)(fn.ZP,{type:"number",min:r,max:Yn,css:Kn,id:c,required:!0,value:u.value||void 0,onBlur:u.handleBlur,validationResults:u.error?[{message:u.error.message,state:"error"}]:void 0,onChange:function(e){return u.setValue(parseInt(e.currentTarget.value,10))}})}),(0,l.tZ)(I.xv,{variant:"subheadDefault",multiline:!1,children:d})]}),(0,l.tZ)(S.G,{children:(0,l.tZ)(I.xv,{children:"This will be charged monthly, starting with your next statement. You will also be charged or credited a prorated amount for the time left in this month for your increased or decreased seats at the beginning of your next statement."})})]}),(0,l.BX)(S.G,{css:[E.l0.rowWithGap(12),E.l0.justify.end],children:[(0,l.tZ)(D.zx,{text:"Cancel",type:"button",onClick:function(){return i()}}),(0,l.tZ)(Sn.u,{tooltip:"Please fix the errors above before checking out",isOpen:m,children:(0,l.tZ)(D.zx,{iconLeft:(0,l.tZ)(we.Z,{}),disabled:m||u.value===n,text:"Preview Changes",colorway:"primary",type:"submit"})})]})]})]})})},Qn=function(e){var n,t,r=e.orgId,a=e.seats,i=e.onCancel,o=e.onPreview,s=function(e){var n=(0,c.Z)({},Rn,e);return h.a(Ln,n)}({variables:{orgId:r}}),u=s.data,d=s.loading;if(!u||d)return(0,l.tZ)(S.G,{css:E.l0.align.center,children:(0,l.tZ)(pe.Z,{size:32})});var m="TeamOrganization"===u.teamOrganization.__typename&&u.teamOrganization.quantity,v="TeamOrganization"===u.teamOrganization.__typename&&(null===(n=u.teamOrganization.capabilities)||void 0===n?void 0:n.availableSeats),f="TeamOrganization"===u.teamOrganization.__typename&&(null===(t=u.teamOrganization.capabilities)||void 0===t?void 0:t.memberCount);return m&&"number"===typeof v&&"number"===typeof f?(0,l.tZ)(Jn,{initialSeats:m,seats:a||m,availableSeats:v,memberCount:f,onCancel:i,onPreview:o}):(0,l.tZ)(S.G,{children:(0,l.BX)(I.xv,{multiline:!1,children:["Something went wrong. Please"," ",(0,l.tZ)("a",{href:"https://replit.com/support",target:"_blank",rel:"noopener noreferrer",children:"contact support"}),"."]})})},et=function(e){return e.toLocaleString("en-US",{style:"currency",currency:"USD"})},nt=function(e){return e<0?(0,l.tZ)(I.xv,{css:{color:E.TV.accentPositiveStrongest},multiline:!1,children:et(Math.abs(e))}):(0,l.tZ)(I.xv,{css:{color:E.TV.accentNegativeStrongest},multiline:!1,children:et(e)})},tt=Intl.DateTimeFormat("en-US",{timeZone:"UTC",month:"2-digit",year:"numeric",day:"2-digit"}),rt=function(e){return tt.format(new Date(e))},at=function(e){var n=e.group;return(0,l.BX)(S.G,{css:[E.l0.colWithGap(8),E.l0.p(8),{border:"1px solid ".concat(E.TV.outlineDefault),borderRadius:E.TV.borderRadiusDefault}],children:[(0,l.BX)(S.G,{css:[E.l0.rowWithGap(4),E.l0.align.baseline],children:[(0,l.tZ)(I.xv,{variant:"subheadDefault",multiline:!1,children:"proration"===n.type?"Prorated billing period:":"Next billing period:"}),(0,l.BX)(I.xv,{css:{color:E.TV.foregroundDimmer},multiline:!1,children:["(",rt(n.periodStart)," - ",rt(n.periodEnd),")"]})]}),n.items.map((function(e){return(0,l.tZ)(S.G,{css:[E.l0.colWithGap(4)],children:(0,l.BX)(S.G,{css:[E.l0.flex.row,E.l0.justify.spaceBetween,E.l0.align.baseline],children:[(0,l.tZ)(I.xv,{multiline:!1,children:"proration"===n.type?e.amount>0?"Charge for remaining time, ".concat(e.quantity," seats:"):"Credit for unused time, ".concat(e.quantity," seats:"):e.description}),(0,l.tZ)(I.xv,{variant:"subheadDefault",multiline:!1,children:nt(e.amount)})]})})})),(0,l.tZ)(S.G,{css:{borderTop:"1px solid ".concat(E.TV.outlineDefault)}}),(0,l.BX)(S.G,{css:[E.l0.flex.row,E.l0.justify.spaceBetween,E.l0.align.baseline],children:[(0,l.tZ)(I.xv,{multiline:!1,children:"Amount due:"}),(0,l.tZ)(I.xv,{variant:"subheadDefault",multiline:!1,children:nt(n.items.reduce((function(e,n){return n.amount+e}),0))})]})]})},it=function(e){var n=e.group;return(0,l.BX)(S.G,{css:[E.l0.colWithGap(8),E.l0.p(8),{border:"1px solid ".concat(E.TV.outlineDefault),borderRadius:E.TV.borderRadiusDefault}],children:[(0,l.BX)(S.G,{css:[E.l0.rowWithGap(4),E.l0.align.baseline],children:[(0,l.tZ)(I.xv,{variant:"subheadDefault",multiline:!1,children:"proration"===n.type?"Prorated billing period:":"Next billing period:"}),(0,l.BX)(I.xv,{css:{color:E.TV.foregroundDimmer},multiline:!1,children:["(",rt(n.periodStart)," - ",rt(n.periodEnd),")"]})]}),n.items.map((function(e){return(0,l.tZ)(S.G,{css:[E.l0.colWithGap(4)],children:(0,l.BX)(S.G,{css:[E.l0.flex.row,E.l0.justify.spaceBetween,E.l0.align.baseline],children:[(0,l.tZ)(I.xv,{multiline:!1,children:"proration"===n.type?e.amount>0?"Charge for remaining time, ".concat(e.quantity," seats:"):"Credit for unused time, ".concat(e.quantity," seats:"):e.description}),(0,l.tZ)(I.xv,{variant:"subheadDefault",multiline:!1,children:nt(e.amount)})]})})})),(0,l.tZ)(S.G,{css:{borderTop:"1px solid ".concat(E.TV.outlineDefault)}}),(0,l.BX)(S.G,{css:[E.l0.flex.row,E.l0.justify.spaceBetween,E.l0.align.baseline],children:[(0,l.tZ)(I.xv,{multiline:!1,children:"Amount due:"}),(0,l.tZ)(I.xv,{variant:"subheadDefault",multiline:!1,children:nt(n.items.reduce((function(e,n){return n.amount+e}),0))})]})]})},ot=function(e){var n,t=e.orgId,r=e.seats,a=e.onBack,i=e.onConfirm,o=function(e){var n=(0,c.Z)({},Rn,e);return h.a(An,n)}({variables:{input:{orgId:t,product:{quantity:r}}}}),s=o.data,u=o.loading,d="PreviewInvoiceOutput"===(null===s||void 0===s||null===(n=s.previewInvoice)||void 0===n?void 0:n.__typename)&&s.previewInvoice,m=d&&d.upcomingItems.filter((function(e){return"proration"===e.type})),v=d&&d.upcomingItems.filter((function(e){return"subscription"===e.type}));return v&&v.length>1&&Hn.warn("More than one subscription group can not exist"),(0,l.tZ)(S.G,{children:u?(0,l.tZ)(S.G,{css:E.l0.align.center,children:(0,l.tZ)(pe.Z,{size:32})}):(0,l.BX)(S.G,{css:[E.l0.colWithGap(48)],children:[(0,l.tZ)(I.h4,{level:1,variant:"headerDefault",children:"Preview Subscription Changes"}),(0,l.BX)(S.G,{css:[E.l0.colWithGap(16)],children:[d?d.currentItems.map((function(e){return(0,l.BX)(S.G,{css:[E.l0.colWithGap(8),E.l0.p(8),{border:"1px solid ".concat(E.TV.outlineDefault),borderRadius:E.TV.borderRadiusDefault}],children:[(0,l.BX)(S.G,{css:[E.l0.rowWithGap(4),E.l0.align.baseline],children:[(0,l.tZ)(I.xv,{variant:"subheadDefault",multiline:!1,children:"Current billing period:"}),(0,l.BX)(I.xv,{css:{color:E.TV.foregroundDimmer},multiline:!1,children:["(",rt(e.periodStart)," -"," ",rt(e.periodEnd),")"]})]}),e.items.map((function(n){return(0,l.tZ)(S.G,{css:[E.l0.colWithGap(4)],children:(0,l.BX)(S.G,{css:[E.l0.flex.row,E.l0.justify.spaceBetween,E.l0.align.baseline],children:[(0,l.tZ)(I.xv,{multiline:!1,children:"proration"===e.type?n.amount>0?"Charge for ".concat(n.quantity," seats:"):"Credit for ".concat(n.quantity," seats:"):n.description}),(0,l.tZ)(I.xv,{variant:"subheadDefault",multiline:!1,children:nt(n.amount)})]})})}))]})})):null,m?m.map((function(e){return(0,l.tZ)(at,{group:e})})):null,v?v.map((function(e){return(0,l.tZ)(it,{group:e})})):null,(0,l.BX)(S.G,{css:E.l0.colWithGap(8),children:[(0,l.BX)(S.G,{css:[E.l0.flex.row,E.l0.justify.spaceBetween,E.l0.align.baseline],children:[(0,l.tZ)(I.xv,{variant:"subheadDefault",multiline:!1,children:"Total amount due next billing period:"}),(0,l.tZ)(I.xv,{variant:"subheadDefault",multiline:!1,children:d?et(d.total>0?d.total:0):null})]}),d&&0!==d.balance?(0,l.BX)(S.G,{css:[E.l0.flex.row,E.l0.justify.spaceBetween,E.l0.align.baseline],children:[(0,l.tZ)(I.xv,{multiline:!1,children:"Remaining balance after next billing period:"}),(0,l.tZ)(I.xv,{multiline:!1,children:d?nt(d.balance):null})]}):null,(0,l.BX)(S.G,{css:[E.l0.flex.row,E.l0.justify.spaceBetween,E.l0.align.baseline],children:[(0,l.tZ)(I.xv,{multiline:!1,children:"You will be billed on:"}),(0,l.tZ)(I.xv,{multiline:!1,children:d?rt(d.chargeDate):null})]})]})]}),(0,l.BX)(S.G,{css:[E.l0.rowWithGap(12),E.l0.justify.end],children:[(0,l.tZ)(D.zx,{text:"Back",type:"button",onClick:function(){return a()}}),(0,l.tZ)(D.zx,{iconLeft:(0,l.tZ)(we.Z,{}),disabled:u,text:"Confirm Changes",colorway:"primary",type:"submit",onClick:function(){return i()}})]})]})})},lt=function(e){var n,t,r,a,o=e.orgId,u=e.seats,d=e.onUpdated,m=(0,i.Z)(function(e){var n=(0,c.Z)({},Rn,e);return O.D(Vn,n)}({variables:{input:{orgId:o,product:{quantity:u}}},onCompleted:function(e){"UpdateSubscriptionOutput"===e.updateSubscription.__typename&&d()}}),2),h=m[0],v=m[1],f=v.data,p=v.loading,g=v.called;s.useEffect((function(){g||h()}),[]);var Z=f&&"UpdateSubscriptionOutput"===(null===(n=f.updateSubscription)||void 0===n?void 0:n.__typename)&&f.updateSubscription,b=f&&("UserError"===(null===(t=f.updateSubscription)||void 0===t?void 0:t.__typename)||"NotFoundError"===(null===(r=f.updateSubscription)||void 0===r?void 0:r.__typename)||"UnauthorizedError"===(null===(a=f.updateSubscription)||void 0===a?void 0:a.__typename))&&f.updateSubscription.message;return(0,l.tZ)(S.G,{children:p?(0,l.tZ)(S.G,{css:E.l0.align.center,children:(0,l.tZ)(pe.Z,{size:32})}):(0,l.BX)(S.G,{children:[b?(0,l.BX)(S.G,{css:[E.l0.colWithGap(24)],children:[(0,l.tZ)(I.h4,{variant:"headerDefault",level:1,children:"An error occurred"}),(0,l.tZ)(I.xv,{multiline:!1,children:b})]}):null,Z?(0,l.BX)(S.G,{css:[E.l0.colWithGap(24)],children:[(0,l.tZ)(I.h4,{variant:"headerDefault",level:1,children:"Successfully updated subscription"}),(0,l.tZ)(I.xv,{children:"All subscriptions changes, including any charges or credits, will appear on your next invoice."})]}):null]})})},st=function(e){var n=e.orgId,t=e.isOpen,r=e.onRequestClose,a=e.onSubscriptionUpdate,o=(0,i.Z)(s.useState(qn.SelectSeats),2),c=o[0],u=o[1],d=(0,i.Z)(s.useState(),2),m=d[0],h=d[1];s.useEffect((function(){t&&(0,$n.j)($n.U3.TEAMS_UPDATE_PLAN_MODAL_OPENED)}),[t]);var v,f=s.useCallback((function(){u(qn.SelectSeats),h(void 0),r()}),[r]);return c===qn.SelectSeats?v=(0,l.tZ)(Qn,{orgId:n,seats:m,onCancel:f,onPreview:function(e){h(e),u(qn.PreviewInvoice)}}):c===qn.PreviewInvoice&&m?v=(0,l.tZ)(ot,{orgId:n,seats:m,onBack:function(){return u(qn.SelectSeats)},onConfirm:function(){return u(qn.Confirmation)}}):c===qn.Confirmation&&m&&(v=(0,l.tZ)(lt,{orgId:n,seats:m,onUpdated:a})),(0,l.tZ)(X.u,{isOpen:t,onRequestClose:f,maxWidth:600,children:v})},ct=t(94045),ut=t(36443),dt=t(30504),mt="@media screen and (min-width: ".concat(ee.j.tabletMin,"px)"),ht=function(e){var n=e.organization,t=e.onRemove,r=(0,i.Z)(function(e){var n=(0,c.Z)({},me,e);return ce.t(ve,n)}({variables:{orgId:n.id}}),2),a=r[0],o=r[1],u=o.loading,d=o.data,m=o.refetch,h=o.called,v="TeamOrganization"===(null===d||void 0===d?void 0:d.teamOrganization.__typename)&&d.teamOrganization.unsubscribedTeams||[];return s.useEffect((function(){h&&m&&n.unsubscribedTeamsCount!==v.length&&m(),h||n.unsubscribedTeamsCount===v.length||a()}),[n.unsubscribedTeamsCount,v.length,a,m,h]),n.unsubscribedTeamsCount?(0,l.BX)(S.G,{css:[{width:"100%"}],children:[(0,l.tZ)(Qe.Z,{text:"".concat(n.unsubscribedTeamsCount," ").concat(1===n.unsubscribedTeamsCount?"team":"teams"," available to join")}),(0,l.BX)(S.G,{children:[u?(0,l.tZ)(S.G,{css:[E.l0.flex.row,E.l0.justify.center,E.l0.py(16)],children:(0,l.tZ)(pe.Z,{})}):null,v.map((function(e){return(0,l.tZ)(se,{canJoinTeam:!0,team:e,onRemove:function(){m&&m(),t()}},e.id)}))]})]}):null},vt=function(e){var n=e.organization,t=e.onRemove,r=(0,i.Z)(function(e){var n=(0,c.Z)({},me,e);return ce.t(he,n)}({variables:{orgId:n.id}}),2),a=r[0],o=r[1],u=o.loading,d=o.data,m=o.refetch,h=o.called,v="TeamOrganization"===(null===d||void 0===d?void 0:d.teamOrganization.__typename)&&d.teamOrganization.archivedTeams||[];return s.useEffect((function(){h&&m&&n.archivedTeamsCount!==v.length&&m(),h||n.archivedTeamsCount===v.length||a()}),[n.archivedTeamsCount,v.length,a,m,h]),n.archivedTeamsCount?(0,l.BX)(S.G,{css:[{width:"100%"}],children:[(0,l.tZ)(Qe.Z,{text:"Archived: ".concat(n.archivedTeamsCount," ").concat((0,kn.Z)("team",n.archivedTeamsCount))}),(0,l.BX)(S.G,{children:[u?(0,l.tZ)(S.G,{css:[E.l0.flex.row,E.l0.justify.center,E.l0.py(16)],children:(0,l.tZ)(pe.Z,{})}):null,v.map((function(e){return(0,l.tZ)(se,{team:e,onRemove:function(){m&&m(),t()}},e.id)}))]})]}):null},ft=function(e){var n,t,r,o,c,u=e.title,d=e.teams,m=e.organization,h=e.canCreateNewTeam,v=e.onRemove,f=e.onSubscriptionUpdate,p=e.currentUserId,g=(0,fe.useRouter)(),Z=(0,i.Z)(s.useState(!1),2),b=Z[0],T=Z[1],x=(0,i.Z)(s.useState(!1),2),y=x[0],w=x[1],C=s.useContext(ge.G).isGooglePlayStoreTWA,O=Number(g.query.addTeamForOrg)===(null===m||void 0===m?void 0:m.id)?"CreateTeam":null,z=(0,i.Z)(s.useState(O),2),G=z[0],_=z[1],B=(null===m||void 0===m?void 0:m.capabilities)?m.capabilities.memberCount:0,P=null;(null===m||void 0===m||null===(n=m.capabilities)||void 0===n?void 0:n.isBusinessPlan)&&m.isAdmin&&(P=null===m||void 0===m?void 0:m.quantity);var k=(null===m||void 0===m||null===(t=m.capabilities)||void 0===t?void 0:t.isExpired)&&m.isAdmin,U=function(){return _(null)},N=h||m&&Boolean(null===m||void 0===m?void 0:m.archivedTeamsCount);return(0,l.BX)(Ae.Tg,{css:[E.l0.borderRadius(8),E.l0.backgroundColor.backgroundDefault,!m&&E.l0.pt(16),{width:"100%",border:"1px solid ".concat(E.TV.backgroundHighest),overflow:"hidden"}],elevated:!0,children:[m?(0,l.tZ)(S.G,{css:[E.l0.p(16)],children:(0,l.BX)(S.G,{css:[E.l0.colWithGap(12)],children:[(0,l.BX)(S.G,{css:[E.l0.flex.row,E.l0.flex.grow(1),E.l0.justify.spaceBetween],children:[(0,l.tZ)(I.h4,{level:3,variant:"headerDefault",css:[E.l0.flex.shrink(2),E.l0.pt(8)],children:u}),(0,l.BX)(S.G,{css:[E.l0.flex.row,E.l0.align.center],children:[(null===m||void 0===m?void 0:m.isAdmin)?(0,l.tZ)(te.h,{alt:"Open organization managment",onClick:function(){return _("OrgSettings")},size:28,css:[E.l0.p(8),E.l0.mr(4)],children:(0,l.tZ)(hn.Z,{})}):null,m?(0,l.tZ)(vn,{organization:m,onMenuItemSelected:function(e){_(e)}}):null]})]}),k&&!(null===m||void 0===m||null===(r=m.capabilities)||void 0===r?void 0:r.isEducationPlan)?(0,l.tZ)(S.G,{css:[E.l0.width("fit-content")],children:(0,l.tZ)(_n.u,{colorway:"negative",text:"Subscription expired. Contact support to reactivate.",href:dt.av})}):null,(0,l.BX)(S.G,{css:[E.l0.flex.row,E.l0.align.center],children:[(0,l.tZ)(D.zx,{text:P?"".concat(B,"/").concat(P," ").concat((0,kn.Z)("User",P))+(C?"":": Add/Remove Seats"):"".concat(B," ").concat((0,kn.Z)("User",B)),iconLeft:(0,l.tZ)(Ze.Z,{}),disabled:!P||C,onClick:function(){return _("ChangePlan")},small:!0,css:[E.l0.mr(8),(0,a.Z)({display:"none"},mt,{display:"flex"})]}),(null===m||void 0===m?void 0:m.isAdmin)?(0,l.tZ)(D.zx,{text:"You are an org ".concat(m.isOwner?"owner":"admin"),disabled:!0,small:!0,css:[E.l0.mr(8),(0,a.Z)({display:"none"},mt,{display:"flex"})]}):null,k&&(null===m||void 0===m||null===(o=m.capabilities)||void 0===o?void 0:o.isEducationPlan)?(0,l.tZ)(D.zx,{text:"Teacher Verification Required",disabled:!0,colorway:"negative",outlined:!0,small:!0,css:[E.l0.mr(8),(0,a.Z)({display:"none"},mt,{display:"flex"})]}):null]})]})}):null,u?(0,l.tZ)(Qe.Z,{text:"You are a member of ".concat(d.length," ").concat((0,kn.Z)("team",d.length)," on the ").concat(u," organization")}):null,(0,l.tZ)(S.G,{children:d.length>0&&d.map((function(e,n){return(0,l.tZ)(se,{team:e,onRemove:v,showBottomBorder:n!==d.length-1||N},e.id)}))}),N?(0,l.BX)(S.G,{css:[E.l0.p(16),(0,a.Z)({},mt,{flexDirection:"row"})],children:[h?(0,l.tZ)(D.zx,{iconLeft:(0,l.tZ)(Pn.Z,{}),text:"New team in ".concat(null!==u&&void 0!==u?u:"Friends"),outlined:!0,onClick:function(){_("CreateTeam")}}):null,!!(null===m||void 0===m?void 0:m.archivedTeamsCount)&&(0,l.tZ)(D.zx,{css:[E.l0.justify.center,(0,a.Z)({marginTop:8},mt,{marginTop:0,marginLeft:8,border:"none",justifyContent:"flex-start"})],outlined:!0,text:"".concat(b?"Hide":"See"," archived Teams"),onClick:function(){return T(!b)},iconLeft:b?(0,l.tZ)(ct.Z,{}):(0,l.tZ)(ut.Z,{})}),!!(null===m||void 0===m?void 0:m.unsubscribedTeamsCount)&&(0,l.tZ)(D.zx,{css:[E.l0.justify.center,(0,a.Z)({marginTop:8},mt,{marginTop:0,marginLeft:8,border:"none",justifyContent:"flex-start"})],outlined:!0,text:y?"Show only subscribed teams":"Show all teams on organization",onClick:function(){return w(!y)}})]}):null,m&&b?(0,l.tZ)(vt,{organization:m,onRemove:v}):null,m&&y?(0,l.tZ)(ht,{organization:m,onRemove:v}):null,(0,l.tZ)(X.u,{isOpen:"CreateTeam"===G,onRequestClose:U,children:(0,l.tZ)(Xn,{org:m,onCancel:U,onCreate:function(e){U(),g.push({pathname:"/teamProfile",query:{teamname:e.username}},"/team/".concat(e.username))},showStudentPrivacyCheckbox:!!(null===m||void 0===m||null===(c=m.capabilities)||void 0===c?void 0:c.isEducationPlan)})}),m&&m.isAdmin?(0,l.tZ)(st,{orgId:m.id,isOpen:"ChangePlan"===G,onRequestClose:U,onSubscriptionUpdate:function(){return f&&f()}}):null,m&&p?(0,l.BX)(l.HY,{children:[(0,l.tZ)(bn,{canBeDeleted:m.canBeDeleted,orgId:m.id,orgName:m.name,isOpen:"DeleteOrg"===G,onRequestClose:U,onOrgDeleted:v}),(0,l.tZ)(Cn,{orgId:m.id,currentUserId:p,orgName:m.name,isOpen:"LeaveOrg"===G,onRequestClose:U,onLeave:v}),(0,l.tZ)(mn,{isOpen:"OrgSettings"===G,setClose:U,organization:m,currentUserId:p})]}):null]})},pt=t(35301),gt=t(25452),Zt=t(54111),bt=t(59240);function Tt(){var e=(0,u.Z)(["\n  fragment CreateEduOrgFormOrganization on TeamOrganization {\n    id\n    name\n  }\n"]);return Tt=function(){return e},e}function xt(){var e=(0,u.Z)(["\n  mutation CreateNewTeamsEduOrganization(\n    $input: CreateNewTeamsEduOrganizationInput!\n  ) {\n    createNewTeamsEduOrganization(input: $input) {\n      __typename\n      ... on TeamOrganization {\n        id\n        ...CreateEduOrgFormOrganization\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return xt=function(){return e},e}var yt={},wt=(0,d.Ps)(Tt()),Ct=(0,d.Ps)(xt(),wt);var Ot=t(48511),zt=function(){return(0,l.tZ)(S.G,{css:{borderBottom:"1px solid ".concat(E.TV.outlineDimmest)}})},Gt=function(){return(0,l.BX)(S.G,{css:[E.l0.colWithGap(8)],children:[(0,l.tZ)(I.h4,{level:2,variant:"headerDefault",children:"Oops, there was a problem."}),(0,l.tZ)(I.xv,{children:"Looks like you\u2019re a student in a Teams for Education organization already. Organization creation is only for teachers and faculty of approved education organizations. If that\u2019s you, please log out and create a new teacher account. You will then be able to create a new organization."})]})},_t=[{value:"k12",children:(0,l.BX)(S.G,{css:[E.l0.colWithGap(4)],children:[(0,l.tZ)(I.xv,{variant:"subheadDefault",multiline:!1,children:"K-12"}),(0,l.tZ)(I.xv,{variant:"small",multiline:!1,children:"Primary & secondary schools"})]})},{value:"higher_ed",children:(0,l.BX)(S.G,{css:[E.l0.colWithGap(4)],children:[(0,l.tZ)(I.xv,{variant:"subheadDefault",multiline:!1,children:"Higher Education"}),(0,l.tZ)(I.xv,{variant:"small",multiline:!1,children:"Colleges & universities"})]})},{value:"Vocational School",children:(0,l.BX)(S.G,{css:[E.l0.colWithGap(4)],children:[(0,l.tZ)(I.xv,{variant:"subheadDefault",multiline:!1,children:"Vocational School or Afterschool Program"}),(0,l.tZ)(I.xv,{variant:"small",multiline:!1,children:"Coding classes"})]})},{value:"Nonprofit",children:(0,l.BX)(S.G,{css:[E.l0.colWithGap(4)],children:[(0,l.tZ)(I.xv,{variant:"subheadDefault",multiline:!1,children:"Nonprofit"}),(0,l.tZ)(I.xv,{variant:"small",multiline:!1,children:"Nonprofit organizations & clubs"})]})},{value:"Online Platform, Out-of-School Program",children:(0,l.BX)(S.G,{css:[E.l0.colWithGap(4)],children:[(0,l.tZ)(I.xv,{variant:"subheadDefault",multiline:!1,children:"Online Platform, Out-of-School Program"}),(0,l.tZ)(I.xv,{variant:"small",children:"Independent educators through an online platform, afterschool programs, massive online open courses (MOOC), bootcamps"})]})},{value:"Curriculum and Content Provider",children:(0,l.BX)(S.G,{css:[E.l0.colWithGap(4)],children:[(0,l.tZ)(I.xv,{variant:"subheadDefault",multiline:!1,children:"Curriculum and Content Provider"}),(0,l.tZ)(I.xv,{variant:"small",multiline:!1,children:"Professional curriculum developers"})]})}],Bt=function(e){var n=e.onCancel,t=e.onOrgCreate,a=e.onUnauthorizedError,u=(0,C.H)(),d=u("orgName"),m=(0,k.Z)().showError,h=(0,i.Z)(function(e){var n=(0,c.Z)({},yt,e);return O.D(Ct,n)}({onError:function(e){m(e.message)},onCompleted:function(e){"TeamOrganization"===e.createNewTeamsEduOrganization.__typename?t(e.createNewTeamsEduOrganization):"UserError"===e.createNewTeamsEduOrganization.__typename?m(e.createNewTeamsEduOrganization.message):"UnauthorizedError"===e.createNewTeamsEduOrganization.__typename&&a()}}),2),v=h[0],f=h[1].loading,p=(0,ye.Y)("",(function(e){return 0===e.length?{message:"Organization name cannot be blank"}:e.length>60?{message:"Organization name is limited ".concat(60," characters")}:void 0})),g=(0,i.Z)(s.useState(!1),2),Z=g[0],b=g[1],T=Boolean(p.error)||!Z,x=(0,ae.iv)({borderRadius:"".concat(E.TV.space8," !important")}),y=(0,i.Z)(s.useState(_t[0].value),2),w=y[0],z=y[1],G=function(){var e=(0,r.Z)((function(){return(0,o.__generator)(this,(function(e){switch(e.label){case 0:return p.validate()?[2]:[4,v({variables:{input:{orgName:p.value}}})];case 1:return e.sent(),[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,l.BX)(S.G,{css:[E.l0.colWithGap(32)],tag:"form",onSubmit:function(e){e.preventDefault(),G()},children:[(0,l.tZ)(I.h4,{variant:"headerDefault",level:2,css:E.l0.maxWidth("100%"),children:"New Education Organization"}),(0,l.BX)(S.G,{css:[E.l0.colWithGap(12)],children:[(0,l.tZ)("label",{htmlFor:d,children:"Organization name"}),(0,l.tZ)(fn.ZP,{autoFocus:!0,required:!0,css:x,id:d,value:p.value,placeholder:"What should the Organization be called?",onBlur:p.handleBlur,validationResults:p.error?[{message:p.error.message,state:"error"}]:void 0,onChange:function(e){return p.setValue(e.currentTarget.value)},disabled:f})]}),(0,l.BX)(S.G,{css:[E.l0.colWithGap(12)],children:[(0,l.tZ)(I.xv,{variant:"text",multiline:!1,children:"Type of organization"}),(0,l.tZ)(Ot.E,{name:u("institutionType"),onChange:function(e){return z(e.target.value)},value:w,css:E.l0.colWithGap(12),children:_t.map((function(e){return(0,l.BX)(l.HY,{children:[(0,l.tZ)(zt,{}),(0,l.BX)(S.G,{css:[E.l0.rowWithGap(12)],children:[(0,l.tZ)(Ot.Y,{id:u(e.value),value:e.value,"data-cy":e.value}),(0,l.tZ)("label",{css:[E.l0.cursor.pointer],htmlFor:u(e.value),children:e.children})]})]})}))})]}),(0,l.BX)(S.G,{css:[E.l0.rowWithGap(8)],children:[(0,l.tZ)(Tn.X,{id:u("confirmTeacher"),checked:Z,onChange:function(){return b(!Z)},dataCy:"confirm-teacher"}),(0,l.tZ)("label",{htmlFor:u("confirmTeacher"),children:"I confirm that I am using Teams for Education for educational purposes."})]}),(0,l.BX)(S.G,{css:[E.l0.rowWithGap(12),E.l0.justify.end],children:[(0,l.tZ)(D.zx,{text:"Cancel",type:"button",onClick:n}),(0,l.tZ)(Sn.u,{tooltip:"Please fix the errors above before checking out",isOpen:T,children:(0,l.tZ)(D.zx,{disabled:T||f,iconLeft:(0,l.tZ)(we.Z,{}),text:"Create New Organization",colorway:"primary",type:"submit"})})]})]})},Et=function(e){var n=e.onCancel,t=e.onUpdate,r=e.canCreateEduTrial,a=(0,i.Z)(s.useState(),2),o=a[0],c=a[1],u=(0,i.Z)(s.useState(!1),2),d=u[0],m=u[1],h=(0,i.Z)(s.useState(!1),2),v=h[0],f=h[1];return o||v?v?(0,l.tZ)(Gt,{}):!d&&o?(0,l.BX)(S.G,{css:[E.l0.colWithGap(32)],children:[(0,l.BX)(I.h4,{variant:"headerDefault",level:2,css:E.l0.maxWidth("100%"),children:["Created ",o.name," Organization"]}),(0,l.BX)(I.xv,{children:["You have successfully created your ",o.name," trial Organization. Now you can create your first Team in the Organization."]}),(0,l.BX)(S.G,{css:[E.l0.rowWithGap(12),E.l0.justify.end],children:[(0,l.tZ)(D.zx,{text:"Cancel",type:"button",onClick:n}),(0,l.tZ)(D.zx,{iconLeft:(0,l.tZ)(we.Z,{}),text:"Create Team",colorway:"primary",onClick:function(){return m(!0)}})]})]}):(0,l.tZ)(Xn,{org:o,onCancel:n,onCreate:t,showStudentPrivacyCheckbox:!0}):(0,l.tZ)(Bt,{canCreateEduTrial:r,onCancel:n,onOrgCreate:function(e){c(e),t()},onUnauthorizedError:function(){return f(!0)}})},It=function(e){var n=e.onCancel,t=(0,C.H)(),r=t("orgName"),a=t("orgSeats"),i=(0,fe.useRouter)(),o=(0,ye.Y)("",(function(e){return 0===e.length?{message:"Organization name cannot be blank"}:e.length>60?{message:"Organization name is limited ".concat(60," characters")}:void 0})),s=(0,ye.Y)("10",(function(e){var n=parseInt(e,10);return Number.isNaN(n)?{message:"Please enter a whole number"}:n<1?{message:"Please enter a whole number greater than or equal to ".concat(1)}:n>999?{message:"Please enter a whole number less than or equal to ".concat(999)}:void 0})),c=Boolean(o.error||s.error),u=parseInt(s.value,10),d="x $".concat(15,"/seat");!Number.isNaN(u)&&u>=1&&u<=999&&(d+=" = $".concat(15*u,"/month"));var m=(0,ae.iv)({borderRadius:"".concat(E.TV.space8," !important")});return(0,l.BX)(S.G,{css:[E.l0.colWithGap(48)],tag:"form",onSubmit:function(e){e.preventDefault();var n=o.validate(),t=s.validate();if(!n&&!t){(0,$n.j)($n.U3.PLAN_SELECTED,{planID:"teams_pro_beta_per_seat_1mo_usd",source:i.pathname});var r="/stripe-checkout/teams_pro/beta_per_seat_1mo_usd"+"?quantity=".concat(s.value,"&orgName=").concat(encodeURIComponent(o.value));window.location.href=r}},children:[(0,l.tZ)(I.h4,{variant:"headerDefault",level:2,css:E.l0.maxWidth("100%"),children:"New pro Organization"}),(0,l.BX)(S.G,{css:[E.l0.colWithGap(12)],children:[(0,l.tZ)("label",{htmlFor:r,children:"Organization name"}),(0,l.tZ)(fn.ZP,{autoFocus:!0,required:!0,css:m,id:r,value:o.value,placeholder:"What should the Organization be called?",onBlur:o.handleBlur,validationResults:o.error?[{message:o.error.message,state:"error"}]:void 0,onChange:function(e){return o.setValue(e.currentTarget.value)}})]}),(0,l.BX)(S.G,{css:[E.l0.colWithGap(12)],children:[(0,l.tZ)("label",{htmlFor:a,children:"Number of seats"}),(0,l.BX)(S.G,{css:[E.l0.rowWithGap(8),E.l0.align.center],children:[(0,l.tZ)(S.G,{children:(0,l.tZ)(fn.ZP,{css:m,id:a,required:!0,value:s.value,onBlur:s.handleBlur,validationResults:s.error?[{message:s.error.message,state:"error"}]:void 0,onChange:function(e){return s.setValue(e.currentTarget.value)}})}),(0,l.tZ)(I.xv,{variant:"subheadDefault",multiline:!1,children:d})]})]}),(0,l.BX)(S.G,{css:[E.l0.rowWithGap(12),E.l0.justify.end],children:[(0,l.tZ)(D.zx,{text:"Cancel",type:"button",onClick:n}),(0,l.tZ)(Sn.u,{tooltip:"Please fix the errors above before checking out",isOpen:c,children:(0,l.tZ)(D.zx,{iconLeft:(0,l.tZ)(we.Z,{}),disabled:c,text:"Go to Checkout",colorway:"primary",type:"submit"})})]})]})},St=t(17807);function Dt(){var e=(0,fe.useRouter)();return(0,l.BX)(S.G,{css:[E.l0.p(16),E.l0.borderRadius(8),E.l0.flex.row,E.l0.justify.spaceBetween,E.l0.align.center,St.gU.filled,E.l0.backgroundColor.accentPrimaryDimmest],onClick:function(){e.push("/verify-teacher")},children:[(0,l.tZ)(I.xv,{variant:"subheadDefault",css:[E.l0.maxWidth("80%")],multiline:!1,children:"Please click here to verify your status as an approved educator."}),(0,l.tZ)(Sn.u,{placement:"left",tooltip:"By verifying that you are an approved educator you will be able to create Teams for Education organizations and gain access to higher compute power for your teams.",children:(0,l.tZ)(Dn.Z,{})})]})}var Pt=t(99397),Xt=t(86302),kt=function(e){var n=e.text,t=e.onClick,r=e.disabled,i=void 0!==r&&r,o=e.dataCy;return(0,l.tZ)(S.G,{css:[E.l0.colWithGap(8),E.l0.align.start,(0,a.Z)({},"@media (max-width: ".concat(ee.j.mobileMax,"px)"),{width:"100%",alignItems:"revert"})],children:(0,l.tZ)(D.zx,{iconLeft:(0,l.tZ)(Pn.Z,{}),text:n,onClick:t,disabled:i,"data-cy":o})})},Ut=function(e){var n=e.title,t=e.IconComponent;return(0,l.tZ)(S.G,{children:(0,l.BX)(S.G,{css:[E.l0.flex.row,E.l0.align.center],children:[(0,l.tZ)(S.G,{children:t}),(0,l.tZ)(I.xv,{css:[E.l0.px(8)],variant:"headerDefault",multiline:!1,children:n}),(0,l.tZ)(S.G,{css:{borderWidth:1,borderColor:"var(--outline-dimmest)",flexGrow:2}})]})})},Nt=function(e){var n=e.text,t=e.cta,r=e.onClick;return(0,l.tZ)(S.G,{css:[E.l0.borderRadius(4),E.l0.p(16),E.l0.mb(32),E.l0.backgroundColor.backgroundDefault,{width:"100%",border:"1px solid ".concat(E.TV.backgroundHighest)}],children:(0,l.BX)(S.G,{css:[E.l0.justify.center,E.l0.align.stretch],children:[(0,l.tZ)(S.G,{css:[E.l0.flex.grow(1),E.l0.p(16),E.l0.textAlign.center],children:(0,l.tZ)(I.xv,{children:n})}),(0,l.tZ)(S.G,{css:[E.l0.flex.row,E.l0.justify.center],children:(0,l.tZ)("a",{onClick:r,children:t})})]})})},Ft=function(e){var n=e.currentUserId,t=e.canCreateNewFreeTeam,r=e.canCreateEduTrial,o=e.freeTeams,c=e.educationTeamOrgs,u=e.businessTeamOrgs,d=e.onRemove,m=e.onUpdate,h=e.isPrivacyUser,v=e.showEducationVerificationBanner,f=(0,fe.useRouter)(),p=(0,i.Z)(s.useState(null),2),g=p[0],Z=p[1],b=function(){return Z(null)};return(0,l.BX)(S.G,{css:[E.l0.colWithGap(32)],children:[(0,l.BX)(S.G,{css:[E.l0.colWithGap(24)],children:[(0,l.tZ)(Ut,{IconComponent:(0,l.tZ)(Zt.Z,{size:24}),title:"Pro"}),!h&&(0,l.tZ)(kt,{text:"New Pro Organization",onClick:function(){return Z("CreateProOrg")}}),(0,l.tZ)(pt.gC,{spacing:4,children:u&&u.length?u.map((function(e){var t,r;return(0,l.tZ)(ft,{title:e.name,teams:e.teams,organization:e,canCreateNewTeam:(null===(t=e.userPermissions)||void 0===t?void 0:t.canCreateTeamsInOrg)&&(null===(r=e.capabilities)||void 0===r?void 0:r.canCreateNewTeam)&&!e.capabilities.isExpired,onRemove:d,onSubscriptionUpdate:m,currentUserId:n},e.id)})):(0,l.tZ)(Nt,{text:"Teams Pro is a place for coworkers to create prototypes and develop products.",cta:"Learn more",onClick:function(){return f.push("/site/teams-pro")}})})]}),(0,l.BX)(S.G,{css:[E.l0.colWithGap(24)],children:[(0,l.tZ)(Ut,{IconComponent:(0,l.tZ)(gt.Z,{size:24}),title:"Education"}),!h&&(0,l.BX)(S.G,{css:[E.l0.rowWithGap(12),(0,a.Z)({},"@media (max-width: ".concat(ee.j.mobileMax,"px)"),[E.l0.colWithGap(8)])],children:[(0,l.tZ)(kt,{text:"New Education Organization",onClick:function(){Z("CreateEduOrg")},dataCy:"add-new-edu-org"}),(0,l.tZ)(Xt.Z,{text:"Curriculum Hub",iconLeft:(0,l.tZ)(Pt.Z,{}),href:"/curriculum"})]}),v?(0,l.tZ)(Dt,{}):null,(0,l.tZ)(S.G,{children:(0,l.tZ)(S.G,{css:[E.l0.colWithGap(32)],children:c&&c.length?c.map((function(e){var t,r;return(0,l.tZ)(ft,{title:e.name,teams:e.teams,organization:e,canCreateNewTeam:(null===(t=e.userPermissions)||void 0===t?void 0:t.canCreateTeamsInOrg)&&(null===(r=e.capabilities)||void 0===r?void 0:r.canCreateNewTeam)&&!e.capabilities.isExpired,onRemove:d,onSubscriptionUpdate:m,currentUserId:n},e.id)})):(0,l.tZ)(Nt,{text:"Teams for Education is a place for teachers to create and manage student projects.",cta:"Try Teams for Education for free today",onClick:function(){return f.push("/teams/free-trial")}})})})]}),(0,l.BX)(S.G,{css:[E.l0.colWithGap(24)],children:[(0,l.tZ)(Ut,{IconComponent:(0,l.tZ)(bt.Z,{size:24}),title:"Friends"}),(0,l.tZ)(S.G,{children:(0,l.BX)(I.xv,{children:["Free starter teams. Limited to 5 teams of up to 10 members. Everything is public. Less processing power. Upgrade to"," ",(0,l.tZ)(y(),{href:"/site/teams-pro",children:"Teams Pro"})," or"," ",(0,l.tZ)(y(),{href:"/site/teams-for-education",children:"Teams for Education"})," ","for more power."]})}),o&&o.length?(0,l.tZ)(ft,{teams:o,canCreateNewTeam:t,onRemove:d}):(0,l.tZ)(Nt,{text:"Teams for Friends lets up to 10 people collaborate on shared Repls for free.",cta:"Create your first Team",onClick:function(){return f.push("/teams/add")}})]}),(0,l.tZ)(X.u,{isOpen:"CreateEduOrg"===g,onRequestClose:b,children:(0,l.tZ)(Et,{onUpdate:m,onCancel:b,canCreateEduTrial:r})}),(0,l.tZ)(X.u,{isOpen:"CreateProOrg"===g,onRequestClose:b,children:(0,l.tZ)(It,{onCancel:b})})]})},Mt=t(88254),Rt=t(65673),Wt=t(25495),Lt="@media screen and (min-width: ".concat(ee.j.mobileMax,"px)"),At=(0,ae.iv)((0,a.Z)({justifyContent:"center",padding:E.TV.space16},Lt,{padding:E.TV.space48})),Vt=function(){var e,n,t,r,a,o,u,d,m,v,f,p,Z=(0,fe.useRouter)(),T=Z.query.checkout,x=(0,k.Z)().showError,y=function(e){var n=(0,c.Z)({},g,e);return h.a(b,n)}({onError:function(e){x((0,Rt.Z)(e.message)),Mt.Tb(e)}}),w=y.data,C=y.loading,O=y.refetch,z=(0,i.Z)(s.useState(Boolean(T)),2),G=z[0],_=z[1],B=function(){T&&Z.replace("/teamsDashboard","/teams",{shallow:!0}),_(!1)},D=null===w||void 0===w||null===(e=w.currentUser)||void 0===e?void 0:e.isPrivacyLimitedAccess;return(null===w||void 0===w||null===(n=w.currentUser)||void 0===n?void 0:n.hasTeamsKillswitch)?(0,l.tZ)(Wt.Z,{title:"Teams",children:(0,l.tZ)(S.G,{css:At,children:(0,l.tZ)(I.h4,{level:1,variant:"headerBig",children:"Sorry for the inconvenience, Teams are temporarily unavailable."})})}):(0,l.BX)(Wt.Z,{title:"Teams",children:[G&&(0,l.tZ)(X.u,{isOpen:G,onRequestClose:B,children:T.startsWith("teams_pro")?(0,l.tZ)(It,{onCancel:B}):(0,l.tZ)(Et,{onUpdate:function(){return O()},onCancel:B,canCreateEduTrial:Boolean(null===w||void 0===w||null===(t=w.currentUser)||void 0===t||null===(r=t.capabilities)||void 0===r?void 0:r.canCreateEduTrial)})}),(0,l.tZ)(Ae.Tg,{css:E.l0.pageContent,children:(0,l.BX)(S.G,{css:[E.l0.colWithGap(24)],children:[(0,l.tZ)(S.G,{css:[E.l0.justify.spaceBetween],children:(0,l.tZ)(I.h4,{level:1,variant:"headerBig",children:"My Teams"})}),C?(0,l.tZ)(S.G,{css:[E.l0.justify.center,E.l0.align.center,E.l0.height("50vh")],className:"spinner-container",children:(0,l.tZ)(pe.Z,{})}):(0,l.tZ)(Ft,{currentUserId:null===w||void 0===w||null===(a=w.currentUser)||void 0===a?void 0:a.id,canCreateEduTrial:Boolean(null===w||void 0===w||null===(o=w.currentUser)||void 0===o||null===(u=o.capabilities)||void 0===u?void 0:u.canCreateEduTrial),canCreateNewFreeTeam:(null===w||void 0===w||null===(d=w.currentUser)||void 0===d?void 0:d.canCreateNewFreeTeam)||!1,freeTeams:(null===w||void 0===w||null===(m=w.currentUser)||void 0===m?void 0:m.freeTeams)||[],educationTeamOrgs:(null===w||void 0===w||null===(v=w.currentUser)||void 0===v?void 0:v.educationTeamOrgs)||[],businessTeamOrgs:(null===w||void 0===w||null===(f=w.currentUser)||void 0===f?void 0:f.proTeamOrgs)||[],onRemove:function(){return O()},onUpdate:function(){return O()},isPrivacyUser:Boolean(D),showEducationVerificationBanner:Boolean(null===w||void 0===w||null===(p=w.currentUser)||void 0===p?void 0:p.showVerifyTeacherBanner)})]})})]})};Vt.getInitialProps=function(){var e=(0,r.Z)((function(e){var n,t;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:return n=e.req,t=e.store,[4,(0,T.Z)(n,t)];case 1:return r.sent(),[2,{}]}}))}));return function(n){return e.apply(this,arguments)}}();var qt=Vt},11673:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,n){var t,r;(0,a.default)(e),"object"===i(n)?(t=n.min||0,r=n.max):(t=arguments[1],r=arguments[2]);var o=encodeURI(e).split(/%..|./).length-1;return o>=t&&("undefined"===typeof r||o<=r)};var r,a=(r=t(65455))&&r.__esModule?r:{default:r};function i(e){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}e.exports=n.default,e.exports.default=n.default},14709:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,n){if((0,r.default)(e),(n=(0,a.default)(n,c)).require_display_name||n.allow_display_name){var t=e.match(u);if(t){var s=t[1];if(e=e.replace(s,"").replace(/(^<|>$)/g,""),s.endsWith(" ")&&(s=s.substr(0,s.length-1)),!function(e){var n=e.replace(/^"(.+)"$/,"$1");if(!n.trim())return!1;if(/[\.";<>]/.test(n)){if(n===e)return!1;if(!(n.split('"').length===n.split('\\"').length))return!1}return!0}(s))return!1}else if(n.require_display_name)return!1}if(!n.ignore_max_length&&e.length>254)return!1;var p=e.split("@"),g=p.pop(),Z=g.toLowerCase();if(n.host_blacklist.includes(Z))return!1;var b=p.join("@");if(n.domain_specific_validation&&("gmail.com"===Z||"googlemail.com"===Z)){var T=(b=b.toLowerCase()).split("+")[0];if(!(0,i.default)(T.replace(/\./g,""),{min:6,max:30}))return!1;for(var x=T.split("."),y=0;y<x.length;y++)if(!m.test(x[y]))return!1}if(!1===n.ignore_max_length&&(!(0,i.default)(b,{max:64})||!(0,i.default)(g,{max:254})))return!1;if(!(0,o.default)(g,{require_tld:n.require_tld})){if(!n.allow_ip_domain)return!1;if(!(0,l.default)(g)){if(!g.startsWith("[")||!g.endsWith("]"))return!1;var w=g.substr(1,g.length-2);if(0===w.length||!(0,l.default)(w))return!1}}if('"'===b[0])return b=b.slice(1,b.length-1),n.allow_utf8_local_part?f.test(b):h.test(b);for(var C=n.allow_utf8_local_part?v:d,O=b.split("."),z=0;z<O.length;z++)if(!C.test(O[z]))return!1;if(n.blacklisted_chars&&-1!==b.search(new RegExp("[".concat(n.blacklisted_chars,"]+"),"g")))return!1;return!0};var r=s(t(65455)),a=s(t(12614)),i=s(t(11673)),o=s(t(28327)),l=s(t(51019));function s(e){return e&&e.__esModule?e:{default:e}}var c={allow_display_name:!1,require_display_name:!1,allow_utf8_local_part:!0,require_tld:!0,blacklisted_chars:"",ignore_max_length:!1,host_blacklist:[]},u=/^([^\x00-\x1F\x7F-\x9F\cX]+)</i,d=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~]+$/i,m=/^[a-z\d]+$/,h=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f]))*$/i,v=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+$/i,f=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*$/i;e.exports=n.default,e.exports.default=n.default},60936:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,n){return(0,r.default)(e),0===((n=(0,a.default)(n,o)).ignore_whitespace?e.trim().length:e.length)};var r=i(t(65455)),a=i(t(12614));function i(e){return e&&e.__esModule?e:{default:e}}var o={ignore_whitespace:!1};e.exports=n.default,e.exports.default=n.default},28327:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,n){(0,r.default)(e),(n=(0,a.default)(n,o)).allow_trailing_dot&&"."===e[e.length-1]&&(e=e.substring(0,e.length-1));!0===n.allow_wildcard&&0===e.indexOf("*.")&&(e=e.substring(2));var t=e.split("."),i=t[t.length-1];if(n.require_tld){if(t.length<2)return!1;if(!/^([a-z\u00A1-\u00A8\u00AA-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(i))return!1;if(/\s/.test(i))return!1}if(!n.allow_numeric_tld&&/^\d+$/.test(i))return!1;return t.every((function(e){return!(e.length>63)&&(!!/^[a-z_\u00a1-\uffff0-9-]+$/i.test(e)&&(!/[\uff01-\uff5e]/.test(e)&&(!/^-|-$/.test(e)&&!(!n.allow_underscores&&/_/.test(e)))))}))};var r=i(t(65455)),a=i(t(12614));function i(e){return e&&e.__esModule?e:{default:e}}var o={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1,allow_wildcard:!1};e.exports=n.default,e.exports.default=n.default},51019:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function e(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if((0,a.default)(n),!(t=String(t)))return e(n,4)||e(n,6);if("4"===t){if(!l.test(n))return!1;var r=n.split(".").sort((function(e,n){return e-n}));return r[3]<=255}if("6"===t)return!!c.test(n);return!1};var r,a=(r=t(65455))&&r.__esModule?r:{default:r};var i="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",o="(".concat(i,"[.]){3}").concat(i),l=new RegExp("^".concat(o,"$")),s="(?:[0-9a-fA-F]{1,4})",c=new RegExp("^("+"(?:".concat(s,":){7}(?:").concat(s,"|:)|")+"(?:".concat(s,":){6}(?:").concat(o,"|:").concat(s,"|:)|")+"(?:".concat(s,":){5}(?::").concat(o,"|(:").concat(s,"){1,2}|:)|")+"(?:".concat(s,":){4}(?:(:").concat(s,"){0,1}:").concat(o,"|(:").concat(s,"){1,3}|:)|")+"(?:".concat(s,":){3}(?:(:").concat(s,"){0,2}:").concat(o,"|(:").concat(s,"){1,4}|:)|")+"(?:".concat(s,":){2}(?:(:").concat(s,"){0,3}:").concat(o,"|(:").concat(s,"){1,5}|:)|")+"(?:".concat(s,":){1}(?:(:").concat(s,"){0,4}:").concat(o,"|(:").concat(s,"){1,6}|:)|")+"(?::((?::".concat(s,"){0,5}:").concat(o,"|(?::").concat(s,"){1,7}|:))")+")(%[0-9a-zA-Z-.:]{1,})?$");e.exports=n.default,e.exports.default=n.default},65455:function(e,n){"use strict";function t(e){return t="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){if(!("string"===typeof e||e instanceof String)){var n=t(e);throw null===e?n="null":"object"===n&&(n=e.constructor.name),new TypeError("Expected a string but received a ".concat(n))}},e.exports=n.default,e.exports.default=n.default},12614:function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;for(var t in n)"undefined"===typeof e[t]&&(e[t]=n[t]);return e},e.exports=n.default,e.exports.default=n.default}},function(e){var n=function(n){return e(e.s=n)};e.O(0,[7901,2550,7005,2949,898,1858,238,1020,9774,2888,179],(function(){return n(54186),n(35525)}));var t=e.O();_N_E=t}]);
//# sourceMappingURL=teamsDashboard-848143f9535daa80.js.map