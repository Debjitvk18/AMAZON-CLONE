"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1327,1410],{43117:function(e,n,t){t.d(n,{Z:function(){return s}});var r=t(74985),i=(t(50959),t(97754)),o=t.n(i),a=t(45510),u=t(61284),l=t(85368),c=t(39541);function s(e){return(0,r.tZ)("div",{className:o()("dialog",{"is-destructive":e.isDestructive}),children:(0,r.BX)(l.G,{css:[c.l0.colWithGap(24)],children:[(0,r.tZ)(u.h4,{variant:"headerDefault",level:2,children:e.title}),"string"===typeof e.children?(0,r.tZ)(u.xv,{children:e.children}):e.children,(0,r.BX)(l.G,{css:[c.l0.rowWithGap(12),c.l0.justify.end],children:[(0,r.tZ)(a.zx,{onClick:e.onCancel,text:"Cancel"}),(0,r.tZ)(a.zx,{colorway:e.isDestructive?"negative":"primary",onClick:e.onConfirm,text:e.confirmLabel||"Confirm"})]})]})})}},72338:function(e,n,t){t.d(n,{Q:function(){return i},h:function(){return o}});var r=t(14806),i=r.Py.define(),o=r.Py.define()},14260:function(e,n,t){t.d(n,{Z:function(){return w}});var r=t(74985),i=(t(50959),t(70844)),o=t(21769),a=t(6191),u=t(74768),l=t(48960),c=Array.prototype.concat,s=function(e){return{recursive:!!e.recursive,bail:e.bail&&e.bail>0?e.bail:1e3}},f=function(e){return"file"===e.kind},d=function(e){return"function"===typeof e.getAsEntry?e.getAsEntry():e.webkitGetAsEntry?e.webkitGetAsEntry():null},p=function(e){return c.apply([],e)},h=function(e,n,t,r){var i;return i=e.isDirectory?n.recursive?v(e,n,t+1,(0,l.join)(r,e.name)):Promise.resolve([]):function(e){return new Promise((function(n,t){e.file?e.file(n,t):n(null)})).catch((function(){return null}))}(e).then((function(e){return e&&(e.dirPath=(0,l.join)(r,e.name)),e?[e]:[]})),i},v=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.name;return e&&t<n.bail&&e.isDirectory&&e.createReader?new Promise((function(i){e.createReader().readEntries((function(e){return Promise.all(e.map((function(e){return h(e,n,t,r)}))).then((function(e){return i(p(e))}))}),(function(){return i([])}))})):Promise.resolve([])},g=v,m=function(e,n){return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return g(d(e),s(n))}(e,n).then((function(n){if(!n.length){var t=e.getAsFile();n=t?[t]:n}return n}))};var y={dragDropManager:(0,i.i)((function(e){var n=(0,o.PD)(e),t=n.handleTopDropCapture;return n.handleTopDropCapture=function(e){var r,i=n.monitor.getItemType();i===a.HTML||i===a.TEXT?(n.dropTargetIds=[],null===(r=n.currentNativeSource)||void 0===r||r.loadDataTransfer(e.dataTransfer),n.enterLeaveCounter.reset()):t.call(n,e);n.currentNativeSource&&(n.currentNativeSource.item.dirContent=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=s(n),new Promise((function(t){var r,i;(null===e||void 0===e||null===(r=e.dataTransfer)||void 0===r?void 0:r.items)?Promise.all(p(e.dataTransfer.items).filter((function(e){return f(e)})).map((function(e){return m(e,n)}))).then((function(e){return t(p(e))})):(null===e||void 0===e||null===(i=e.dataTransfer)||void 0===i?void 0:i.files)?t(p(e.dataTransfer.files)):t([])}))}(e,{recursive:!0}))},n}))};function w(e){return(0,r.tZ)(u.L.Provider,{value:y,children:e.children})}},49944:function(e,n,t){t.d(n,{x:function(){return s}});var r=t(74985),i=t(43312),o=t(39541),a=t(85368);function u(e,n){var t=0,r=[];return n.forEach((function(n){var i=n.from,o=n.to,a=e.slice(t,i);a&&r.push({text:a,match:!1});var u=e.slice(i,o);u&&r.push({text:u,match:!0}),t=o})),t<e.length&&r.push({text:e.slice(t),match:!1}),r}var l=(0,i.iv)([o.l0.flex.shrink(1),o.l0.truncate]),c={normal:{matched:o.TV.foregroundDefault,unmatched:o.TV.foregroundDimmer},dimmed:{matched:o.TV.foregroundDimmer,unmatched:o.TV.foregroundDimmest}};function s(e){var n,t=null===(n=e.highlight)||void 0===n?void 0:n.filter((function(e){return e.to>0})),i=e.dimmed?c.dimmed:c.normal;return(null===t||void 0===t?void 0:t.length)?(0,r.tZ)(a.G,{className:e.className,css:l,children:u(e.text,t).map((function(e,n){return(0,r.tZ)("span",{style:{fontWeight:e.match?o.TV.fontWeightBold:o.TV.fontWeightRegular,color:e.match?i.matched:i.unmatched},children:e.text},e.text+n)}))}):(0,r.tZ)(a.G,{className:e.className,style:{color:i.matched},css:l,children:e.text})}},94236:function(e,n,t){var r=t(74985),i=(t(50959),t(45447)),o=t(2041),a=t(40675);n.Z=function(e){var n=e.isOpen,t=e.setOpen,u=e.feature;return(0,r.tZ)(r.HY,{children:(0,r.tZ)(i.b5,{children:(0,r.tZ)(o.u,{isOpen:n,onRequestClose:function(){t(!1)},children:(0,r.tZ)(a.Z,{setFeedbackFormOpen:t,feature:u})})})})}},40417:function(e,n,t){var r=t(2272),i=t(74985),o=t(50959),a=t(85368),u=t(39541),l=t(61284),c=t(94236);n.Z=function(e){var n=e.feature,t=(0,r.Z)(o.useState(!1),2),s=t[0],f=t[1];return(0,i.BX)(i.HY,{children:[(0,i.tZ)(a.G,{onClick:function(){return f(!s)},children:(0,i.tZ)(l.xv,{multiline:!1,css:[u.l0.fontSize("inherit"),u.l0.color.accentPrimaryStronger,u.l0.cursor.pointer,{":hover":{color:u.TV.accentPrimaryStrongest}}],children:"Share feedback"})}),(0,i.tZ)(c.Z,{feature:n,isOpen:s,setOpen:f})]})}},89025:function(e,n,t){t.d(n,{Z:function(){return f}});var r=t(2272),i=t(74985),o=t(50959),a=t(45510),u=t(39137),l=t(85368),c=t(61284),s=t(39541);function f(e){var n=e.prompt,t=e.desc,f=e.type,d=e.placeholder,p=e.confirmText,h=e.loading,v=e.errorMessage,g=e.onCancel,m=e.onConfirm,y=e.isDanger,w=e.buttonIcon,b=(0,r.Z)(o.useState(),2),E=b[0],T=b[1];return(0,i.BX)(l.G,{css:[s.l0.colWithGap(24)],children:[(0,i.tZ)(c.h4,{variant:"headerDefault",level:2,children:n}),(0,i.tZ)(c.xv,{children:t}),(0,i.tZ)(u.II,{type:f,value:E,placeholder:d,autoFocus:!0,onChange:function(e){return T(e.target.value)}}),v?(0,i.tZ)(c.xv,{css:[s.l0.color.accentNegativeStronger],multiline:!1,children:v}):null,(0,i.BX)(l.G,{css:[s.l0.rowWithGap(12),s.l0.justify.end],children:[(0,i.tZ)(a.zx,{disabled:h,onClick:g,text:"Cancel"}),(0,i.tZ)(a.zx,{colorway:y?"negative":"primary",disabled:h,onClick:function(){return E&&m(E)},text:p||"Ok",iconLeft:w,dataCy:"prompt-confirm-button"})]})]})}},29203:function(e,n,t){t.d(n,{$X:function(){return p},Dm:function(){return f},S2:function(){return h},Uu:function(){return c},c1:function(){return d},wM:function(){return s}});var r=t(74985),i=t(92683),o=t(82325),a=t(91398),u=t(50959),l=(0,u.createContext)(void 0);function c(){var e=(0,u.useContext)(l);if(!e)throw new Error("Expected store in ghostwriter chat context");return e}function s(e){return(0,i.KO)(e,{store:c()})}function f(e){return(0,o.lV)((0,u.useCallback)((function(n){return n(e)}),[e]),{store:c()})}function d(e){return(0,i.Dv)(e,{store:c()})}function p(e){return(0,i.b9)(e,{store:c()})}function h(e){var n=e.children,t=(0,u.useRef)();return t.current||(t.current=(0,a.MT)()),(0,r.tZ)(l.Provider,{value:t.current,children:n})}},19522:function(e,n,t){t.d(n,{K:function(){return o}});var r=t(50959),i=t(98314);function o(e){(0,r.useEffect)((function(){e((0,i.r)(),{captureDraggingState:!0})}),[e])}},77478:function(e,n,t){t.d(n,{Z:function(){return i}});var r=t(50959);function i(e){var n=(0,r.useState)(!1),t=n[0],i=n[1],o=(0,r.useRef)(0),a=(0,r.useMemo)((function(){return{onDragEnter:function(e){e.preventDefault(),o.current++,i(!0)},onDragLeave:function(e){e.preventDefault(),o.current--,0===o.current&&i(!1)},onDrop:function(n){var t,r;n.preventDefault(),o.current=0,i(!1),n.persist();var a=Array.from(null!==(r=null===n||void 0===n||null===(t=n.dataTransfer)||void 0===t?void 0:t.files)&&void 0!==r?r:[]);0!==a.length?e(a):e(null)},onDragOver:function(e){e.preventDefault()}}}),[e]);return[t,a]}},13525:function(e,n,t){t.d(n,{b:function(){return i},c:function(){return o}});var r=t(18171);function i(e,n){return(0,r.Z)((function(){return o(n,e)}),[n,e])}function o(e,n){return{get current(){return e.get(n)},subscribe:function(t){return e.sub(n,(function(){return t(e.get(n))}))}}}},27562:function(e,n,t){t.d(n,{T:function(){return a},Z:function(){return o}});var r=t(50959),i=t(48506);function o(){var e=r.useContext(i.Z);if(!e)throw new Error("Expected Repl info to be in context");return e.language}function a(){return o().startsWith("html")}},55215:function(e,n,t){t.d(n,{V:function(){return v},Q:function(){return E}});var r=t(81962),i=t(72006),o=t(67642),a=t(66091),u=.5*(Math.sqrt(3)-1),l=(3-Math.sqrt(3))/6,c=new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),s=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Math.random;(0,a.Z)(this,e);var t="function"===typeof n?n:d(n);this.p=f(t),this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512);for(var r=0;r<512;r++)this.perm[r]=this.p[255&r],this.permMod12[r]=this.perm[r]%12}return e.prototype.noise2D=function(e,n){var t,r,i=this.permMod12,o=this.perm,a=0,s=0,f=0,d=(e+n)*u,p=Math.floor(e+d),h=Math.floor(n+d),v=(p+h)*l,g=e-(p-v),m=n-(h-v);g>m?(t=1,r=0):(t=0,r=1);var y=g-t+l,w=m-r+l,b=g-1+2*l,E=m-1+2*l,T=255&p,Z=255&h,x=.5-g*g-m*m;if(x>=0){var S=3*i[T+o[Z]];a=(x*=x)*x*(c[S]*g+c[S+1]*m)}var R=.5-y*y-w*w;if(R>=0){var C=3*i[T+t+o[Z+r]];s=(R*=R)*R*(c[C]*y+c[C+1]*w)}var k=.5-b*b-E*E;if(k>=0){var _=3*i[T+1+o[Z+1]];f=(k*=k)*k*(c[_]*b+c[_+1]*E)}return 70*(a+s+f)},e}();function f(e){for(var n=new Uint8Array(256),t=0;t<256;t++)n[t]=t;for(var r=0;r<255;r++){var i=r+~~(e()*(256-r)),o=n[r];n[r]=n[i],n[i]=o}return n}function d(e){var n=0,t=0,r=0,i=1,o=function(){var e=4022871197;return function(n){n=n.toString();for(var t=0;t<n.length;t++){var r=.02519603282416938*(e+=n.charCodeAt(t));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)}}();return n=o(" "),t=o(" "),r=o(" "),(n-=o(e))<0&&(n+=1),(t-=o(e))<0&&(t+=1),(r-=o(e))<0&&(r+=1),function(){var e=2091639*n+2.3283064365386963e-10*i;return n=t,t=r,r=e-(i=0|e)}}var p=new s;var h=t(49500);function v(e){var n=!1,t=0,r=0,i=null,o=function(u){if(n){var l=u-t;r+=l,t=u,i=window.requestAnimationFrame(o),e({elapsedTime:r,deltaTime:l,stop:a})}},a=function(){n&&(n=!1,i&&window.cancelAnimationFrame(i))};return{start:function(){n||(r=0,t=performance.now(),n=!0,i=window.requestAnimationFrame(o))},stop:a}}var g=function(){return(0,o.hd)(600,1200)},m=function(){return(0,o.hd)(1,3)},y=function(){return{width:(0,o.hd)(5,20),height:(0,o.hd)(5,20)}},w=function(){return(0,o.vF)()};function b(e){return Array.isArray(e)?(0,o.DQ)(e):(0,r.Z)(e,Function)?e():e}function E(){var e=!1,n=null,t=null,r=[],a=null,u={},l=function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=function(){var e=i.value;if(u[e])return"continue";var n=new Image;n.src=e,n.onerror=function(){h.error('Failed to load particle image "'.concat(e,'"'))},u[e]=n},a=e[Symbol.iterator]();!(n=(i=a.next()).done);n=!0)o()}catch(l){t=!0,r=l}finally{try{n||null==a.return||a.return()}finally{if(t)throw r}}};return{getIsInstalled:function(){return e},addParticles:function(e){for(var n=e.x,t=e.y,c=e.numParticles,s=void 0===c?150:c,f=e.spread,d=void 0===f?60:f,p=e.heading,h=void 0===p?90:p,v=e.airDrag,E=void 0===v?.9:v,T=e.color,Z=void 0===T?w:T,x=e.gravity,S=void 0===x?800:x,R=e.velocity,C=void 0===R?g:R,k=e.size,_=void 0===k?y:k,D=e.lifetime,I=void 0===D?m:D,A=e.flip,P=void 0===A||A,O=e.image,q=void 0===O?void 0:O,N=b(d),z=b(h),U=(0,o.Id)(N),F=(0,o.Id)(-z),G=b(s),L=0;L<G;L++){var B=F+(0,o.hd)(-U/2,U/2),M=b(C),W=b(_),j=W.width,H=W.height,X=b(I),Q=b(Z),V=b(E),K=b(n),Y=b(t),$=b(q);"string"===typeof $&&(u[$]||l([$]),$=u[$]),r.push((0,i.Z)({seed:(0,o.hd)(0,1e5),x:K,y:Y,gravity:S,airDrag:V,scaleX:1,scaleY:1,rotation:(0,o.hd)(0,(0,o.Id)(360)),velocityX:Math.cos(B)*M,velocityY:Math.sin(B)*M,angularVelocity:(0,o.hd)((0,o.Id)(-400),(0,o.Id)(400)),color:Q,alpha:1,width:j,height:H,flip:P,lifetime:X,lifetimeRemaining:X},$?{image:$,type:"image"}:{type:(0,o.DQ)(["rectangle","ellipse"])}))}null===a||void 0===a||a.start()},clearParticles:function(){r=[]},uninstall:function(){var r;e&&(n&&(null===(r=document.body)||void 0===r?void 0:r.contains(n))&&document.body.removeChild(n),a&&a.stop(),n=null,t=null,e=!1,u={})},install:function(){e||document&&document.body&&(n=function(){var e=document.createElement("canvas");return e.style.position="fixed",e.style.top="0px",e.style.left="0px",e.style.pointerEvents="none",e.style.zIndex="999999",e.width=document.documentElement.clientWidth,e.height=document.documentElement.clientHeight,e.id="replit-particles-simulation",e.setAttribute("role","image"),e.ariaHidden="true",e}(),(t=n.getContext("2d"))&&(document.body.appendChild(n),a=v((function(e){var i=e.deltaTime,a=e.stop;if(n&&t){var u=t,l=window.scrollX,c=window.scrollY;n.width!==document.documentElement.clientWidth&&(n.width=document.documentElement.clientWidth),n.height!==document.documentElement.clientHeight&&(n.height=document.documentElement.clientHeight),t.clearRect(0,0,n.width,n.height),r.map((function(e){return function(e){var n=e.particle,t=e.deltaTime;n.velocityY+=n.gravity*t/1e3,n.x+=n.velocityX*t/1e3,n.y+=n.velocityY*t/1e3,n.rotation+=n.angularVelocity*t/1e3,n.velocityX*=n.airDrag,n.velocityY*=n.airDrag,n.flip&&(n.scaleY=2*(0,o.WE)(n.lifetimeRemaining,.5));var r=(0,o.NC)(n.velocityX,n.velocityY),i=(0,o.$G)(n.velocityX,n.velocityY),a=r+.05*p.noise2D(n.seed,n.lifetimeRemaining);n.velocityX=Math.cos(a)*i,n.velocityY=Math.sin(a)*i,n.lifetimeRemaining-=t/1e3,n.lifetimeRemaining<=0?n.alpha=0:n.alpha=1-(n.lifetime-n.lifetimeRemaining)/n.lifetime}({particle:e,deltaTime:i})})),r.map((function(e){return function(e){var n=e.particle,t=e.ctx,r=e.scrollX,i=e.scrollY,o=n.width*n.scaleX,a=n.height*n.scaleY,u=n.x-r,l=n.y-i;t.save(),t.translate(u,l),t.rotate(n.rotation),t.globalAlpha=n.alpha,"image"===n.type?t.drawImage(n.image,-o/2,-a/2,o,a):"rectangle"===n.type?(t.fillStyle=n.color,t.fillRect(-o/2,-a/2,o,a)):"ellipse"===n.type&&(t.fillStyle=n.color,t.beginPath(),t.ellipse(0,0,o/2,a/2,0,0,2*Math.PI),t.fill()),t.restore()}({particle:e,ctx:u,scrollX:l,scrollY:c})})),0===(r=r.filter((function(e){return e.lifetimeRemaining>0}))).length&&a()}})),e=!0))},preloadImages:l,unloadImages:function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;delete u[a]}}catch(l){t=!0,r=l}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}}}}},31410:function(e,n,t){t.d(n,{$0:function(){return r.$},hd:function(){return i.hd},su:function(){return r.s}});var r=t(25220),i=t(67642)},25220:function(e,n,t){t.d(n,{$:function(){return f},s:function(){return r}});var r,i=t(72006),o=t(77637),a=t(50959),u=t(67642),l=t(55215),c=t(92355),s=(0,l.Q)();function f(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).preloadImages,n=(0,c.T)();a.useEffect((function(){return s.install(),function(){s.uninstall()}}),[]),a.useEffect((function(){e&&s.preloadImages(e)}),[e]);var t=function(e){n||s.addParticles(e)},r=function(e){var r=e.element,a=(0,o.Z)(e,["element"]);if(!n){var l=(0,u.tj)(r),c=l.x,s=l.y;t((0,i.Z)({x:c,y:s},a))}},l=function(e){n||s.addParticles((0,i.Z)({numParticles:125,spread:360,velocity:function(){return(0,u.hd)(400,900)},size:function(){return{width:(0,u.hd)(5,15),height:(0,u.hd)(5,25)}}},e))},f=function(e){var t=e.element,r=(0,o.Z)(e,["element"]);if(!n){var a=(0,u.tj)(t),c=a.x,s=a.y;l((0,i.Z)({x:c,y:s},r))}},d=function(e){var t=e.direction,r=(0,o.Z)(e,["direction"]);n||s.addParticles((0,i.Z)({heading:t},r))},p=function(e){var t=e.element,r=e.direction,a=(0,o.Z)(e,["element","direction"]);if(!n){var l=(0,u.tj)(t),c=l.x,f=l.y;s.addParticles((0,i.Z)({x:c,y:f,numParticles:100,velocity:function(){return(0,u.hd)(400,1500)},spread:60,size:function(){return{width:(0,u.hd)(5,15),height:(0,u.hd)(5,25)}},heading:r},a))}};return{fireBurst:t,fireBurstFrom:r,fireCircularBurst:l,fireCircularBurstFrom:f,fireDirectionalBurst:d,fireDirectionalBurstFrom:p}}!function(e){e[e.East=0]="East",e[e.NorthEast=45]="NorthEast",e[e.North=90]="North",e[e.NorthWest=135]="NorthWest",e[e.West=180]="West",e[e.SouthWest=225]="SouthWest",e[e.South=270]="South"}(r||(r={}))},67642:function(e,n,t){t.d(n,{$G:function(){return d},DQ:function(){return u},Id:function(){return s},NC:function(){return f},WE:function(){return h},hd:function(){return l},tj:function(){return o},vF:function(){return c}});var r=t(92039),i=t.n(r);function o(e){var n=function(e){var n=e.getBoundingClientRect();return{x:n.left+n.width/2,y:n.top+n.height/2}}(e);return{x:n.x+window.scrollX,y:n.y+window.scrollY}}function a(e,n){return i()(e,n,!1)}function u(e){return e[a(0,e.length-1)]}function l(e,n){return i()(e,n,!0)}function c(){return"hsl(".concat(a(0,360),", 100%, 70%)")}function s(e){return e*Math.PI/180}function f(e,n){return Math.atan2(n,e)}function d(e,n){return Math.sqrt(Math.pow(e,2)+Math.pow(n,2))}function p(e,n){return(e%n+n)%n}function h(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return n-Math.abs(p(e,2*n)-n)}},5894:function(e,n,t){t.d(n,{Fp:function(){return r},Fv:function(){return a},HH:function(){return o},hI:function(){return i}});var r="gpt-3.5-turbo-0613",i=["package.json","package-lock.json","yarn.lock","poetry.lock","package.json","package-lock.json",".replit","replit.nix","pyproject.toml",".breakpoints"],o=[".md",".yml",".yaml",".json",".toml",".out",".pkl",".bin",".txt",".csv",".log"],a=["node_modules",".config","venv",".next",".git"]},11796:function(e,n,t){t.d(n,{U:function(){return f},n:function(){return c}});var r=t(88733),i=t(73012),o=t(11858),a=t(96583);function u(e){return l.apply(this,arguments)}function l(){return(l=(0,o.Z)((function(e){var n,t,r,o;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:n=e.getReader(),a.label=1;case 1:return[4,(0,i.Z)(n.read())];case 2:return t=a.sent(),r=t.done,o=t.value,r?[3,4]:[4,o];case 3:return a.sent(),[3,1];case 4:return n.releaseLock(),[2]}}))}))).apply(this,arguments)}function c(e){return s.apply(this,arguments)}function s(){return(s=(0,o.Z)((function(e){var n,t,o,l,c,s,f,d,p;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:n=new TextDecoder("utf-8"),t=!1,o=!1,a.label=1;case 1:a.trys.push([1,7,8,13]),c=(0,r.Z)(u(e)),a.label=2;case 2:return[4,(0,i.Z)(c.next())];case 3:return(t=!(s=a.sent()).done)?(f=s.value,d=f,[4,n.decode(d,{stream:!0})]):[3,6];case 4:a.sent(),a.label=5;case 5:return t=!1,[3,2];case 6:return[3,13];case 7:return p=a.sent(),o=!0,l=p,[3,13];case 8:return a.trys.push([8,,11,12]),t&&null!=c.return?[4,c.return()]:[3,10];case 9:a.sent(),a.label=10;case 10:return[3,12];case 11:if(o)throw l;return[7];case 12:return[7];case 13:return[2]}}))}))).apply(this,arguments)}function f(e){return d.apply(this,arguments)}function d(){return(d=(0,o.Z)((function(e){var n,t,o,u,l,c,s,f,d;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:n="",t=!1,o=!1,a.label=1;case 1:a.trys.push([1,7,8,13]),l=(0,r.Z)(e),a.label=2;case 2:return[4,(0,i.Z)(l.next())];case 3:return(t=!(c=a.sent()).done)?(s=c.value,(f=s).endsWith("\n\n")?[4,n+f]:(n+=f,[3,5])):[3,6];case 4:a.sent(),n.length>0&&(n=""),a.label=5;case 5:return t=!1,[3,2];case 6:return[3,13];case 7:return d=a.sent(),o=!0,u=d,[3,13];case 8:return a.trys.push([8,,11,12]),t&&null!=l.return?[4,l.return()]:[3,10];case 9:a.sent(),a.label=10;case 10:return[3,12];case 11:if(o)throw u;return[7];case 12:return[7];case 13:return[2]}}))}))).apply(this,arguments)}},20841:function(e,n){n.Z={sandbox:"allow-same-origin allow-forms allow-popups allow-popups-to-escape-sandbox allow-modals allow-downloads allow-downloads-without-user-activation allow-presentation allow-orientation-lock allow-scripts",allow:"accelerometer; ambient-light-sensor; autoplay; battery; camera; display-capture; encrypted-media; execution-while-not-rendered; execution-while-out-of-viewport; fullscreen; gamepad; geolocation; gyroscope; layout-animations; legacy-image-formats; magnetometer; microphone; midi; navigation-override; oversized-images; payment; picture-in-picture; publickey-credentials; speaker-selection; sync-xhr; unoptimized-images; unsized-media; usb; screen-wake-lock; web-share; xr-spatial-tracking; clipboard-read; clipboard-write",allowFullScreen:!0,allowtransparency:"true",allowpaymentrequest:"true"}},78973:function(e,n,t){function r(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.root,i=t.rootMargin,o=t.threshold,a=void 0===o?1:o;if("undefined"===typeof IntersectionObserver)return function(){};var u=new WeakMap,l=function(e){e.forEach((function(e){var t=u.get(e.target);if(e.isIntersecting!==Boolean(t))if(e.isIntersecting){var r=n(e);"function"===typeof r?u.set(e.target,r):c.unobserve(e.target)}else t&&(t(e),u.delete(e.target))}))},c=new IntersectionObserver(l,{root:r,rootMargin:i,threshold:a});return c.observe(e),function(){return c.disconnect()}}t.d(n,{j:function(){return r}})},42174:function(e,n,t){t.d(n,{j:function(){return a}});var r=t(50959),i=t(12808),o=t(94716);function a(e,n,t){var a=(0,o.Z)(t);(0,r.useLayoutEffect)((function(){var t=function(n){var t=a.current?a.current(n):n;null!==t&&(0,i.A)(e,t)};return t(n.current),(0,i.p)(e),n.subscribe(t)}),[e,n,a])}},12808:function(e,n,t){t.d(n,{A:function(){return u},p:function(){return l}});var r=t(66091),i=t(2272),o=new(function(){function e(){(0,r.Z)(this,e),this.map=new Map}var n=e.prototype;return n.getOrInit=function(e){var n=this.map.get(e);return n||(n=new Map,this.map.set(e,n)),n},n.add=function(e,n,t){this.getOrInit(e).set(n,t)},n.flush=function(){var e=!0,n=!1,t=void 0;try{for(var r,o=this.map[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var a=(0,i.Z)(r.value,2),u=a[0],l=a[1];if(u&&"current"in u&&(u=u.current),u){var c=!0,s=!1,f=void 0;try{for(var d,p=l[Symbol.iterator]();!(c=(d=p.next()).done);c=!0){var h=(0,i.Z)(d.value,2),v=h[0],g=h[1];u.style.setProperty(v,g)}}catch(m){s=!0,f=m}finally{try{c||null==p.return||p.return()}finally{if(s)throw f}}}}}catch(m){n=!0,t=m}finally{try{e||null==o.return||o.return()}finally{if(n)throw t}}this.map.clear()},n.flushNode=function(e){if(e){var n=e,t=this.map.get(n);if(t&&(e&&"current"in e&&(e=e.current),e)){var r=!0,o=!1,a=void 0;try{for(var u,l=t[Symbol.iterator]();!(r=(u=l.next()).done);r=!0){var c=(0,i.Z)(u.value,2),s=c[0],f=c[1];e.style.setProperty(s,f)}}catch(d){o=!0,a=d}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}this.map.delete(n)}}},e}()),a=!1;function u(e,n,t){if(null!==e){if("string"===typeof n){if(void 0===t)throw new Error("value is undefined when prop is string");o.add(e,n,t)}else for(var r in n)o.add(e,r,n[r]);a||(a=!0,requestAnimationFrame((function(){o.flush(),a=!1})))}}function l(e){o.flushNode(e)}},13474:function(e,n,t){var r;t.d(n,{y:function(){return r}}),function(e){e.Welcome="Welcome",e.Editor="Editor",e.Examples="Examples",e.Run="Run",e.Output="Output",e.Sidepane="Sidepane",e.Share="Share",e.SidebarButton="SidebarButton",e.GlobalNavButton="GlobalNavButton",e.NotificationsButton="NotificationsButton",e.AvatarButton="AvatarButton",e.SidebarAnnouncement="SidebarAnnouncement",e.Feedback="Feedback"}(r||(r={}))},12171:function(e,n,t){t.d(n,{I6:function(){return s},bG:function(){return d},fp:function(){return u},gN:function(){return l},gU:function(){return h},g_:function(){return c},pl:function(){return p},x6:function(){return f}});var r=t(92674),i=t.n(r),o=t(88161);function a(e){var n=e.data;if(!(0,o.CF)(n)||n.messageDirection!==o.s1.FROM_NATIVE)return null;if(n.protocolVersion!==o.Wj)throw new Error("Invalid protocolVersion: ".concat(n.protocolVersion," != ").concat(o.Wj));return n}function u(e,n){var t=a(e);if(null!=t){var r=t.payload.messageType;switch(r){case o.cF.TEXT_EDITOR_STATE_REQUEST:case o.cF.REQUEST_SET_SELECTION:case o.cF.REQUEST_REPLACE_SELECTION:case o.cF.REQUEST_SET_TEXT:case o.cF.REQUEST_INSERT_TEXT:case o.cF.REQUEST_PASTE_TEXT:case o.cF.TEXT_EDITOR_REQUEST_ACTION:n({type:r,bridgeMessage:t})}}}function l(e,n){var t=a(e);if(null!=t){var r=t.payload.messageType;switch(r){case o.cF.SHELL_INSERT_INPUT:n({type:r,id:t.messageId,input:t.payload.input});break;case o.cF.SHELL_COMMAND:n({type:r,id:t.messageId,command:t.payload.command});break;case o.cF.SHELL_PASTE_TEXT:n({type:r,id:t.messageId,text:t.payload.text})}}}function c(e,n){var t=a(e);if(null!=t){var r=t.payload.messageType;if(r===o.cF.GIT_REFRESH_GITHUB_CONNECTION)n({type:r,bridgeMessage:t})}}function s(e,n){var t=a(e);if(null!=t){var r=t.payload.messageType;switch(r){case o.cF.GHOSTWRITER_CHAT_SEND:n({type:r,id:t.messageId,chatMessage:t.payload.message});break;case o.cF.GHOSTWRITER_CHAT_ABORT_RESPONSE:n({type:r,id:t.messageId})}}}function f(e,n){var t=a(e);if(null!=t){var r=t.payload.messageType;switch(r){case o.cF.SET_KEYBOARD_STATE:n({type:r,keyboardState:{isShown:t.payload.isShown,height:t.payload.height}});break;case o.cF.WORKSPACE_REQUEST_ACTION:n({type:r,action:t.payload.action});break;case o.cF.WORKSPACE_REQUEST_OPEN_PANE:n({type:r,id:t.messageId,paneType:t.payload.paneType})}}}function d(e,n){var t={protocolVersion:o.Wj,messageDirection:o.s1.TO_NATIVE,messageId:n,payload:e};"ReactNativeWebView"in window&&null!=window.ReactNativeWebView&&window.ReactNativeWebView.postMessage?window.ReactNativeWebView.postMessage(JSON.stringify(t)):window.postMessage(t,window.origin)}function p(e){var n=null!==e&&void 0!==e?e:i()();d({messageType:o.cF.ERROR},n)}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i()(),n={messageType:o.cF.ACK};d(n,e)}},88161:function(e,n,t){t.d(n,{CF:function(){return x},H7:function(){return g},Of:function(){return o},Se:function(){return y},T$:function(){return E},Wj:function(){return c},aB:function(){return T},ac:function(){return b},b9:function(){return a},cF:function(){return r},fz:function(){return m},m7:function(){return w},s1:function(){return i}});var r,i,o,a,u=t(70232),l=t(44945);!function(e){e.ERROR="ERROR",e.ACK="ACK",e.RESET="RESET",e.DEBUG="DEBUG",e.TEXT_EDITOR_CLOSED="TEXT_EDITOR_CLOSED",e.TEXT_EDITOR_STATE="WORKSPACE_STATE",e.TEXT_EDITOR_STATE_REQUEST="WORKSPACE_STATE_REQUEST",e.WORKSPACE_STATE="WORKSPACE_STATE1",e.WORKSPACE_STATE_REQUEST="WORKSPACE_STATE_REQUEST1",e.REQUEST_SET_SELECTION="REQUEST_SET_SELECTION",e.REQUEST_REPLACE_SELECTION="REQUEST_REPLACE_SELECTION",e.REQUEST_SET_TEXT="REQUEST_SET_TEXT",e.REQUEST_INSERT_TEXT="REQUEST_INSERT_TEXT",e.REQUEST_PASTE_TEXT="REQUEST_PASTE_TEXT",e.TEXT_EDITOR_REQUEST_ACTION="TEXT_EDITOR_REQUEST_ACTION",e.WORKSPACE_REQUEST_ACTION="WORKSPACE_REQUEST_ACTION",e.SET_KEYBOARD_STATE="SET_KEYBOARD_STATE",e.WORKSPACE_REQUEST_OPEN_PANE="WORKSPACE_REQUEST_OPEN_PANE",e.SHELL_INSERT_INPUT="SHELL_INSERT_INPUT",e.SHELL_COMMAND="SHELL_COMMAND",e.SHELL_PASTE_TEXT="SHELL_PASTE_TEXT",e.GIT_REFRESH_GITHUB_CONNECTION="GIT_REFRESH_GITHUB_CONNECTION",e.GHOSTWRITER_CHAT_SEND="GHOSTWRITER_CHAT_SEND",e.GHOSTWRITER_CHAT_ABORT_RESPONSE="GHOSTWRITER_CHAT_ABORT_RESPONSE",e.GHOSTWRITER_CHAT_FOCUS_INPUT="GHOSTWRITER_CHAT_FOCUS_INPUT",e.GHOSTWRITER_CHAT_STATE="GHOSTWRITER_CHAT_STATE"}(r||(r={})),function(e){e.FROM_NATIVE="FROM_NATIVE",e.TO_NATIVE="TO_NATIVE"}(i||(i={})),function(e){e.OPEN_FILETREE="OPEN_FILETREE",e.OPEN_NEW_PANE="OPEN_NEW_PANE",e.TOGGLE_DRAWER="TOGGLE_DRAWER",e.TOGGLE_ALLPANES="TOGGLE_ALLPANES",e.TOGGLE_RUN_STATE="TOGGLE_RUN_STATE"}(o||(o={})),function(e){e.REQUEST_UNDO="REQUEST_UNDO",e.REQUEST_REDO="REQUEST_REDO",e.REQUEST_BLUR="REQUEST_BLUR",e.REQUEST_FOCUS="REQUEST_FOCUS",e.REQUEST_INDENT_SELECTION="REQUEST_INDENT_SELECTION",e.REQUEST_DEDENT_SELECTION="REQUEST_DEDENT_SELECTION",e.REQUEST_TOGGLE_COMMENT="REQUEST_TOGGLE_COMMENT",e.REQUEST_ACCEPT_GHOSTWRITER_SUGGESTION="REQUEST_ACCEPT_GHOSTWRITER_SUGGESTION"}(a||(a={}));var c="1";function s(e){return null!==e&&void 0!==e&&"string"===typeof e}function f(e){return s(e)||null===e}function d(e){return null!==e&&void 0!==e&&"boolean"===typeof e}function p(e){return null!=e&&"number"===typeof e&&!Number.isNaN(e)&&Number.isFinite(e)&&Number.isSafeInteger(e)&&e>=0}function h(e){return null!=e&&("object"===typeof e&&null!=e&&("location"in e&&"length"in e&&p(e.location)&&p(e.length)))}function v(e){return null!=e&&(!!Array.isArray(e)&&!!e.every((function(e){return h(e)})))}function g(e){return null!=e&&("object"===typeof e&&null!=e&&("messageType"in e&&"isDrawerOpen"in e&&"isShowingAllPanes"in e&&"isSaving"in e&&"isOffline"in e&&"runState"in e&&"activePaneType"in e&&"activePaneFilePath"in e&&e.messageType===r.WORKSPACE_STATE&&d(e.isDrawerOpen)&&d(e.isShowingAllPanes)&&d(e.isSaving)&&d(e.isOffline)&&s(e.runState)&&f(e.activePaneType)&&f(e.activePaneFilePath)))}function m(e){return null!=e&&("object"===typeof e&&null!=e&&("messageType"in e&&"filePath"in e&&"revisionId"in e&&"text"in e&&e.messageType===r.REQUEST_REPLACE_SELECTION&&s(e.filePath)&&s(e.revisionId)&&s(e.text)))}function y(e){return null!=e&&("object"===typeof e&&null!=e&&("messageType"in e&&"filePath"in e&&"selections"in e&&"revisionId"in e&&e.messageType===r.REQUEST_SET_SELECTION&&s(e.filePath)&&v(e.selections)&&s(e.revisionId)))}function w(e){return null!=e&&("object"===typeof e&&null!=e&&("messageType"in e&&"filePath"in e&&"text"in e&&"selections"in e&&"revisionId"in e&&e.messageType===r.REQUEST_SET_TEXT&&s(e.filePath)&&s(e.text)&&v(e.selections)&&s(e.revisionId)))}function b(e){return null!=e&&("object"===typeof e&&null!=e&&("messageType"in e&&"filePath"in e&&"text"in e&&"insertionRange"in e&&"selections"in e&&"revisionId"in e&&e.messageType===r.REQUEST_INSERT_TEXT&&s(e.filePath)&&s(e.text)&&h(e.insertionRange)&&v(e.selections)&&s(e.revisionId)))}function E(e){return null!=e&&("object"===typeof e&&null!=e&&("messageType"in e&&"filePath"in e&&"text"in e&&"revisionId"in e&&e.messageType===r.REQUEST_PASTE_TEXT&&s(e.filePath)&&s(e.text)&&s(e.revisionId)))}function T(e){return null!=e&&("object"===typeof e&&null!=e&&("messageType"in e&&"revisionId"in e&&"filePath"in e&&"action"in e&&e.messageType===r.TEXT_EDITOR_REQUEST_ACTION&&s(e.revisionId)&&s(e.filePath)&&s(e.action)))}function Z(e){var n=l.z.object({messageType:l.z.nativeEnum(r)}).safeParse(e);if(!n.success)return!1;var t=n.data.messageType;switch(t){case r.ERROR:case r.ACK:case r.RESET:return!0;case r.TEXT_EDITOR_CLOSED:return function(e){return null!=e&&"object"===typeof e&&null!=e&&"messageType"in e&&"filePath"in e&&e.messageType===r.TEXT_EDITOR_CLOSED&&s(e.filePath)}(e);case r.TEXT_EDITOR_STATE:case r.TEXT_EDITOR_STATE_REQUEST:case r.WORKSPACE_STATE:case r.WORKSPACE_STATE_REQUEST:case r.WORKSPACE_REQUEST_OPEN_PANE:return!0;case r.REQUEST_SET_SELECTION:return y(e);case r.REQUEST_SET_TEXT:return w(e);case r.REQUEST_INSERT_TEXT:return b(e);case r.REQUEST_PASTE_TEXT:return E(e);case r.REQUEST_REPLACE_SELECTION:return m(e);case r.TEXT_EDITOR_REQUEST_ACTION:return T(e);case r.WORKSPACE_REQUEST_ACTION:return function(e){return null!=e&&"object"===typeof e&&null!=e&&"messageType"in e&&"action"in e&&e.messageType===r.WORKSPACE_REQUEST_ACTION&&s(e.action)}(e);case r.SET_KEYBOARD_STATE:return function(e){return null!=e&&"object"===typeof e&&null!=e&&"messageType"in e&&"isShown"in e&&"height"in e&&e.messageType===r.SET_KEYBOARD_STATE&&d(e.isShown)&&function(e){return null!==e&&void 0!==e&&"number"===typeof e}(e.height)}(e);case r.SHELL_INSERT_INPUT:return function(e){return null!=e&&"object"===typeof e&&null!=e&&"messageType"in e&&"input"in e&&e.messageType===r.SHELL_INSERT_INPUT&&s(e.input)}(e);case r.SHELL_COMMAND:return function(e){return null!=e&&"object"===typeof e&&null!=e&&"messageType"in e&&"command"in e&&e.messageType===r.SHELL_COMMAND&&s(e.command)}(e);case r.SHELL_PASTE_TEXT:return function(e){return l.z.object({messageType:l.z.nativeEnum(r),text:l.z.string()}).safeParse(e).success}(e);case r.GIT_REFRESH_GITHUB_CONNECTION:return function(e){return null!=e&&"object"===typeof e&&null!=e&&"messageType"in e&&e.messageType===r.GIT_REFRESH_GITHUB_CONNECTION}(e);case r.GHOSTWRITER_CHAT_SEND:return function(e){return!!l.z.object({messageType:l.z.nativeEnum(r),message:l.z.string()}).safeParse(e).success}(e);case r.GHOSTWRITER_CHAT_ABORT_RESPONSE:case r.GHOSTWRITER_CHAT_FOCUS_INPUT:return!0;case r.GHOSTWRITER_CHAT_STATE:return function(e){return!!l.z.object({messageType:l.z.nativeEnum(r),chatInputText:l.z.optional(l.z.string()),showStopGenerating:l.z.boolean(),isSending:l.z.boolean(),characterLimit:l.z.number()}).safeParse(e).success}(e);case r.DEBUG:return function(e){return null!=e&&"object"===typeof e&&null!=e&&"messageType"in e&&"debugMessage"in e&&e.messageType===r.DEBUG&&s(e.debugMessage)}(e);default:(0,u.Z)(t)}}function x(e){return null!=e&&("object"===typeof e&&null!=e&&("protocolVersion"in e&&"messageDirection"in e&&"messageId"in e&&"payload"in e&&s(e.protocolVersion)&&s(e.messageDirection)&&s(e.messageId)&&Z(e.payload)))}},32033:function(e,n,t){t.d(n,{sI:function(){return s},wP:function(){return d}});var r=t(72006),i=t(43119),o=t(71440),a=t(50216);function u(){var e=(0,i.Z)(["\n  fragment ReplViewerOutputOverlayRepl on Repl {\n    id\n    title\n    imageUrl\n    lastPublishedAt\n    currentUserPermissions {\n      changeImageUrl\n    }\n  }\n"]);return u=function(){return e},e}function l(){var e=(0,i.Z)(["\n  mutation ReplViewerOutputOverlayUpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        imageUrl\n      }\n    }\n  }\n"]);return l=function(){return e},e}var c={},s=(0,o.Ps)(u()),f=(0,o.Ps)(l());function d(e){var n=(0,r.Z)({},c,e);return a.D(f,n)}},69849:function(e,n,t){t.d(n,{Z:function(){return I},y:function(){return C}});var r=t(72006),i=t(4405),o=t(2272),a=t(74985),u=t(50959),l=t(77478),c=t(39541),s=t(85368),f=t(45510),d=t(54873),p=t(43117),h=t(2041),v=t(32033),g=t(254),m=t(87076),y=t(5889),w=t(43312),b=t(61284),E=t(88467),T=t(8023),Z=t(32905),x=t(48610),S=t(40735),R=(0,w.iv)({position:"absolute",top:0,left:0,width:"100%",height:"100%"});function C(e){var n=e.src,t=e.alt;return(0,a.BX)(s.G,{css:[R,{borderBottomLeftRadius:8,borderBottomRightRadius:8,overflow:"hidden"}],children:[(0,a.tZ)(y.Z,{objectFit:"cover",layout:"fill",src:n,alt:t}),(0,a.tZ)(s.G,{css:[R,{background:"radial-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.6))",backgroundRepeat:"no-repeat"}]})]})}function k(e){var n=e.onClick;return(0,a.tZ)(s.G,{onClick:n,css:[R,c.l0.center,{":hover > svg":{transform:"scale(1.2)"},"> svg":{transition:"transform 200ms",width:64,height:"auto",cursor:"pointer",filter:c.TV.shadowDefault}}],children:(0,a.tZ)(S.Z,{color:c.TV.white})})}function _(e){var n=e.isPublished,t=e.onChangeClick,r=e.onRemoveClick,i=(0,o.Z)(u.useState(!1),2),l=i[0],v=i[1];return(0,a.BX)(s.G,{css:[c.l0.rowWithGap(8),c.l0.align.center],children:[(0,a.tZ)(f.zx,{onClick:function(e){e.stopPropagation(),t()},text:"Change image"}),n?(0,a.tZ)(m.h,{alt:"Cannot remove cover image of a published Repl",disabled:!0,colorway:"negative",children:(0,a.tZ)(d.Z,{})}):null,n?null:(0,a.tZ)(s.G,{children:(0,a.tZ)(m.h,{alt:"Remove Image",colorway:"negative",onClick:function(){v(!0)},children:(0,a.tZ)(d.Z,{})})}),(0,a.tZ)(h.u,{isOpen:l,onRequestClose:function(){return v(!1)},children:(0,a.tZ)(p.Z,{confirmLabel:"Yes, remove this image",title:"Remove image",isDestructive:!0,onConfirm:function(){r(),v(!1)},onCancel:function(){return v(!1)},children:"This will remove your Repl\u2019s cover image. You can always add one back at any time."})})]})}function D(e){var n=e.onClick,t=e.isActive;return(0,a.BX)(s.G,{css:[c.l0.colWithGap(16),c.l0.center],children:[(0,a.BX)(s.G,{css:[c.l0.colWithGap(8),c.l0.center],children:[(0,a.tZ)(s.G,{css:[{"> svg":{width:44,height:"auto"}},t&&{color:c.TV.accentPrimaryDefault}],children:(0,a.tZ)(E.Z,{})}),(0,a.tZ)(b.xv,{multiline:!1,children:"Drag and drop a cover image"})]}),(0,a.tZ)(s.G,{children:(0,a.tZ)(f.zx,{onClick:n,iconLeft:(0,a.tZ)(x.Z,{}),colorway:"primary",text:"Or select a file"})})]})}function I(e){var n=e.onClick,t=e.repl,f=function(e){if(null!==e&&0!==e.length){var n=e.find((function(e){return e.type.startsWith("image/")}));n?(m(null),E.uploadImage(n,Z.N.ReplCoverImage)):m("Expected an image file")}},d=u.useRef(null),p=(0,o.Z)(u.useState(null),2),h=p[0],m=p[1],y=(0,o.Z)(u.useState(t.imageUrl),2),w=y[0],b=y[1],E=(0,g.Z)({onUpload:function(e){var n=e.url;x({variables:{input:{id:t.id,imageUrl:n}},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:(0,i.Z)((0,r.Z)({},t),{imageUrl:n})}}})},onUploadPreview:function(e){var n=e.dataUrl;b(n)},onError:function(e){m(e.message)}}),x=(0,o.Z)((0,v.wP)({onCompleted:function(e){m(null),b(e.updateRepl.repl.imageUrl)}}),1)[0],S=t.currentUserPermissions.changeImageUrl,R=(0,o.Z)((0,l.Z)(f),2),I=R[0],A=R[1],P=!w&&S;return(0,u.useEffect)((function(){b(t.imageUrl)}),[t.id]),(0,a.BX)(s.G,(0,i.Z)((0,r.Z)({css:[c.l0.center,c.l0.flex.growAndShrink(1),!P&&{backgroundColor:c.TV.black},{borderBottomLeftRadius:8,borderBottomRightRadius:8,position:"relative",":hover .image-controls":{opacity:1}}]},A),{children:[w?(0,a.tZ)(C,{src:w,alt:t.title}):null,P?null:(0,a.tZ)(k,{onClick:n}),w&&S?(0,a.BX)(s.G,{className:"image-controls",css:[{position:"absolute",top:c.TV.space8,right:c.TV.space8,opacity:0,".is-touch-device &":{opacity:1}}],children:[(0,a.tZ)(_,{onChangeClick:function(){var e;null===(e=d.current)||void 0===e||e.click()},onRemoveClick:function(){x({variables:{input:{id:t.id,imageUrl:null}}})},isPublished:Boolean(t.lastPublishedAt)}),h?(0,a.tZ)("div",{className:"error",children:h}):null]}):null,P?(0,a.tZ)(D,{isActive:I,onClick:function(){var e;null===(e=d.current)||void 0===e||e.click()}}):null,S?(0,a.tZ)("input",{css:{width:.1,height:.1,opacity:0,overflow:"hidden",position:"absolute",zIndex:-1},ref:d,accept:T.W9.join(","),type:"file",onChange:function(e){var n=e.target,t=n.validity,r=n.files;t.valid&&f(r?Array.from(r):null)}}):null]}))}},89448:function(e,n,t){t.d(n,{D:function(){return r},V:function(){return o}});var r,i=t(87978);function o(e){return(0,i.gK)(e)?r.Markdown:(0,i.sL)(e)?r.Draw:(0,i.IQ)(e)?r.Pedit:(0,i.T3)(e)?r.Media:r.Code}!function(e){e.Media="Media",e.Code="Code",e.Markdown="Markdown",e.Draw="Draw",e.Pedit="Pedit"}(r||(r={}))},60141:function(e,n,t){t.d(n,{Z:function(){return m}});var r=t(57389),i=t(72006),o=t(4405),a=t(74985),u=t(90349),l=t(85368),c=t(39541),s=t(66539),f=t(82568),d=(0,t(68973).$)(["size","fontSize","listGap","iconTextGap","avatarOverlap","tooltipFontSize"]),p=d.styleTokens,h=d.cssVars,v=(0,f.X)({avatarsRow:[c.l0.flex.row,{"& > *":{marginLeft:"calc(-0.4 * ".concat(p.size,")")},"& > *:first-child":{marginLeft:0}}],countCirlce:[c.l0.center,c.l0.overflow("hidden"),c.l0.backgroundColor.backgroundDefault,c.l0.color.foregroundDimmer,c.l0.px(2),{borderRadius:"50%",minWidth:p.size,height:p.size,fontSize:p.fontSize}],tooltop:[{gap:p.listGap,gridTemplateColumns:"repeat(auto-fill, 200px)"}],tooltipRow:[c.l0.rowWithGap(c.TV.space2),c.l0.align.center],tooltipText:[c.l0.flex.growAndShrink(1),c.l0.truncate,c.l0.color.foregroundDimmer,{paddingLeft:p.iconTextGap,fontSize:p.tooltipFontSize}],stackItem:[]}),g={12:{fontSize:8,listGap:2,iconTextGap:2,tooltipAvatarSize:12,tooltipFontSize:8},16:{fontSize:10,listGap:2,iconTextGap:2,tooltipAvatarSize:16,tooltipFontSize:10},24:{fontSize:12,listGap:4,iconTextGap:4,tooltipAvatarSize:16,tooltipFontSize:12},32:{fontSize:14,listGap:4,iconTextGap:4,tooltipAvatarSize:16,tooltipFontSize:14},40:{fontSize:16,listGap:8,iconTextGap:4,tooltipAvatarSize:24,tooltipFontSize:14},48:{fontSize:24,listGap:8,iconTextGap:4,tooltipAvatarSize:24,tooltipFontSize:14}};function m(e){var n,t,c,f,d,p,m,y,w,b=e.activeUsers,E=e.visibleNumOfUsers,T=void 0===E?3:E,Z=e.size,x=void 0===Z?24:Z,S=b.length,R=(w={},(0,r.Z)(w,h.size,x+"px"),(0,r.Z)(w,h.fontSize,(null!==(d=null===(n=g[x])||void 0===n?void 0:n.fontSize)&&void 0!==d?d:x)+"px"),(0,r.Z)(w,h.listGap,(null!==(p=null===(t=g[x])||void 0===t?void 0:t.listGap)&&void 0!==p?p:8)+"px"),(0,r.Z)(w,h.iconTextGap,(null!==(m=null===(c=g[x])||void 0===c?void 0:c.iconTextGap)&&void 0!==m?m:8)+"px"),(0,r.Z)(w,h.tooltipFontSize,(null!==(y=null===(f=g[x])||void 0===f?void 0:f.tooltipFontSize)&&void 0!==y?y:14)+"px"),w),C=S>T,k=b.slice(0,C?T-1:T);return(0,a.tZ)(s.u,{tooltip:(0,a.tZ)(l.G,{css:v.tooltop,style:R,children:b.map((function(e){var n;return(0,a.BX)(l.G,{css:v.tooltipRow,children:[(0,a.tZ)(u.q,{size:(null===(n=g[x])||void 0===n?void 0:n.tooltipAvatarSize)||x,src:e.image||null,ringColor:e.color,username:e.username},e.id),(0,a.tZ)(l.G,{css:v.tooltipText,children:e.username})]},e.username)}))}),children:function(e,n){return(0,a.BX)(l.G,(0,o.Z)((0,i.Z)({},e),{tag:"ul",innerRef:n,css:v.avatarsRow,style:R,children:[k.map((function(e,n){return(0,a.tZ)(l.G,{tag:"li",style:{zIndex:n+1},css:v.stackItem,children:(0,a.tZ)(u.q,{size:x,src:e.image||null,ringColor:e.color,username:e.username})},e.id)})),C?(0,a.tZ)(l.G,{tag:"li",css:v.stackItem,style:{zIndex:k.length},children:(0,a.tZ)(l.G,{css:v.countCirlce,children:(0,a.BX)(l.G,{children:["+",S-T+1]})})}):null]}))}})}},45827:function(e,n,t){var r=(0,t(50959).createContext)(null);n.Z=r},5993:function(e,n,t){t.d(n,{S:function(){return a}});var r=t(94716),i=t(15595),o=t(50959);function a(){var e=(0,i.useLDClient)(),n=(0,r.Z)(e);return(0,o.useCallback)((function(){return function(e){var n=parseInt(null===e||void 0===e?void 0:e.variation("flag-container-retry-minimum-ms",0),10);return Number.isFinite(n)?n<0?0:n:0}(n.current)}),[n])}},69921:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(2272),i=t(50959),o={isConnecting:!0,channel:null,context:null};function a(e){var n=e.container,t=e.service,a=e.name,u=e.skip,l=void 0!==u&&u,c=(0,r.Z)(i.useState(o),2),s=c[0],f=c[1];return i.useEffect((function(){f(o);var e=!1,r=n.openChannel({service:t,name:a,skip:function(){return l}},(function(n){if(!e)return f({context:n.context,channel:n.channel,isConnecting:!1}),function(n){e||f({isConnecting:n.willReconnect,channel:null,context:null})}}));return function(){e=!0,r()}}),[n,t,a,l]),s}},81203:function(e,n,t){t.d(n,{P:function(){return y},n:function(){return m}});var r=t(2272),i=t(44945),o=t(50959),a=t(88688),u=t(68710),l=t(63064),c=t(18171),s=t(48330),f=t(11969),d=t(88541),p=i.z.array(i.z.string()),h=function(e){return"repl:hiddenFiles:"+e},v=function(e){var n=p.safeParse(f.Z.get(h(e)));return n.success?n.data:null},g=function(e,n){f.Z.set(h(e),n)},m=function(e){var n=(0,d.P5)({controlName:"flag-filetree-local-cache",logFlagToAnalytics:!1}),t=(0,s.Z)(),i=(0,l.Z)(),u=(0,r.Z)(o.useState((function(){return n?v(t):null})),2),c=u[0],f=u[1];return o.useEffect((function(){return e.watch((function(e){var r=function(e){n&&g(t,e),f(e)};i.current&&(e.error?e.error===a.Yt.NotFound&&r([]):e.config.hidden?r(e.config.hidden):r([]))}))}),[e,t,i,n]),c},y=function(e){var n=m(e);return(0,c.Z)((function(){return null===n?null:n.map((function(e){return(0,u.Z)(e)||e}))}),[n])}},45285:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(50959),i=t(45827);function o(){var e=(0,r.useContext)(i.Z);if(!e)throw new Error("Expected services in context");return e}},49514:function(e,n,t){t.d(n,{K:function(){return u}});var r=t(72006),i=t(45285),o=t(50959),a=t(88541);function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,i.Z)().userEvents,t=(0,a.P5)({controlName:"flag-null-diagnostics",logFlagToAnalytics:!1});return(0,o.useCallback)((function(i,o){t&&n.emit(i,(0,r.Z)({},e,o))}),[n,e,t])}},40865:function(e,n,t){t.d(n,{X:function(){return o},z:function(){return a}});var r=t(50959),i=r.createContext(null);function o(){return r.useContext(i)}var a=i.Provider},4143:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(5858),i=function(){};function o(e){var n=(0,r.e)(e);return n?n.delegateTooltip:i}},5858:function(e,n,t){t.d(n,{e:function(){return o}});var r=t(50959),i=t(40865);function o(e){var n=(0,i.X)(),t=(0,r.useCallback)((function(t){null===n||void 0===n||n.setStepTargetElement(e,t)}),[e,null===n||void 0===n?void 0:n.setStepTargetElement]);return n&&n.steps.some((function(n){return n.id===e}))?{delegateTooltip:t,isActive:!n.isLoading&&!n.isDone&&n.activeStep.id===e,activeStep:n.activeStep,done:n.done,goto:n.goto,id:n.id,isDone:n.isDone,isLoading:n.isLoading,next:n.next,prev:n.prev,restart:n.restart,steps:n.steps}:null}},69341:function(e,n,t){t.d(n,{Z:function(){return g}});var r=t(66091),i=t(5683),o=t(72006),a=t(4405),u=t(45347),l=t(74985),c=t(85368),s=t(39541),f=t(1468),d=t(50959),p=t(13424),h=t(49500),v=function(e){(0,i.Z)(t,e);var n=(0,u.Z)(t);function t(){var e;return(0,r.Z)(this,t),(e=n.apply(this,arguments)).state={hasErrored:!1,error:null,errorInfo:null},e}var o=t.prototype;return o.componentDidCatch=function(e,n){this.setState({hasErrored:!0,error:e,errorInfo:n}),this.props.handleError(e,n),h.error(e)},o.render=function(){var e,n,t;return this.state.hasErrored?(0,l.tZ)(c.G,{css:[s.l0.font.code,s.l0.p(16),{whiteSpace:"pre",overflow:"hidden",color:"white"},s.l0.backgroundColor.blurpleDefault,s.l0.height("100%")],children:(0,l.tZ)(c.G,{children:null!==(t=null===(e=this.state)||void 0===e||null===(n=e.error)||void 0===n?void 0:n.stack)&&void 0!==t?t:"An unknown error occurred."})}):this.props.children},t}(d.Component);function g(e){var n=e.bsod,t=void 0!==n&&n,r=e.sentry,i=void 0===r||r,u=e.handleError,c=e.children,s=e.origin,d=void 0===s?"ErrorBoundary: (no origin provided)":s,h=e.tags,g=void 0===h?{}:h,m=e.extras,y=void 0===m?{}:m,w=(0,p.uV)();return(0,l.tZ)(v,{handleError:function(e,n){t?w({error:e,extras:(0,a.Z)((0,o.Z)({},y),{errorInfo:n}),tags:(0,a.Z)((0,o.Z)({},g),{errorBoundary:!0}),origin:d}):i&&f.c_.withScope((function(t){t.setTag("errorBoundary",!0),t.setTags(g),t.setExtra("errorInfo",n),t.setExtras(y),f.c_.captureException(e)})),u&&u(e,n)},children:c})}},45344:function(e,n,t){t.d(n,{Z:function(){return u}});var r=t(90171),i=t.n(r),o=t(67121),a=t(49500);function u(e){var n=e.throwBsod,t=e.tags,r=e.extras,u=e.origin,l=e.onNonBsodUnrecoverableError,c=void 0===l?function(){}:l;return function(e){var l=(0,o.Z)(e);l!==o.G.NotFound?l!==o.G.LanguageTokenDenied?l?c(l):(a.error(e),n({error:e,tags:t,extras:r,origin:u})):window.location.reload():i().push("/home","~/")}}},65225:function(e,n,t){t.d(n,{Z:function(){return h}});var r=t(74985),i=t(43312),o=t(29457),a=t(39541),u=t(85368),l=t(12583),c=t(50959),s=t(24025),f=t(45317),d=(0,i.iv)([a.l0.justify.center,a.l0.pl(8),{overflow:"hidden",height:"100%",width:"100%","> svg":{opacity:.5,width:250,display:"flex"}}]);function p(e){var n,t=e.index,i=32*t+8;return(0,r.BX)(r.HY,{children:[(0,r.tZ)("rect",{x:0,y:i,rx:"3",ry:"3",width:16,height:16}),(0,r.tZ)("rect",{x:28,y:i,rx:"3",ry:"3",width:"".concat(100+(n=t,n%2!==0?-10*n:10*n)),height:16})]})}function h(e){var n=e.path,t=n===l.Ql,i=t?5:1;c.useEffect((function(){var e=o.kg.timeStart({isRootPath:t});return function(){e("time to load filetree folder")}}),[t,n]);var a="fileTreeLoader-"+Math.random().toString();return(0,r.tZ)(u.G,{css:d,children:(0,r.tZ)(s.Z,{speed:2,backgroundColor:f.TV.backgroundHighest,foregroundColor:f.TV.backgroundHigher,height:32*i,width:250,viewBox:"0 0 250 ".concat(32*i),uniqueKey:a,children:Array(i).fill(null).map((function(e,n){return(0,r.tZ)(p,{index:n},n)}))})})}},39133:function(e,n,t){t.d(n,{st:function(){return y}});var r,i=t(72006),o=t(4405),a=t(74985),u=t(50959),l=t(70804),c=t(21371),s=t(1734),f=t(85368),d=t(61284),p=t(39541),h=t(17807),v=t(43312),g=(t(91046),t(5889),t(88541)),m=t(63128);!function(e){e.AddFile="AddFile",e.AddFolder="AddFolder",e.UploadFile="UploadFile",e.UploadFolder="UploadFolder",e.DownloadZip="DownloadZip",e.Duplicate="Duplicate",e.ShowHiddenFiles="ShowHiddenFiles",e.HideHiddenFiles="HideHiddenFiles",e.OpenTab="OpenTab",e.OpenPane="OpenPane",e.CopyLink="CopyLink",e.CopyFilePath="CopyFilePath",e.CopyFolderPath="CopyFolderPath",e.OpenShellHere="OpenShellHere",e.Rename="Rename",e.Download="Download",e.Delete="Delete",e.OpenWith="OpenWith"}(r||(r={}));var y={AddFile:{type:r.AddFile,text:"Add file"},AddFolder:{type:r.AddFolder,text:"Add folder"},UploadFile:{type:r.UploadFile,text:"Upload file"},UploadFolder:{type:r.UploadFolder,text:"Upload folder"},DownloadZip:{type:r.DownloadZip,text:"Download as zip"},Duplicate:{type:r.Duplicate,text:"Duplicate"},ShowHiddenFiles:{type:r.ShowHiddenFiles,text:"Show hidden files"},HideHiddenFiles:{type:r.HideHiddenFiles,text:"Hide hidden files"},OpenTab:{type:r.OpenTab,text:"Open tab"},OpenPane:{type:r.OpenPane,text:"Open pane"},CopyFilePath:{type:r.CopyFilePath,text:"Copy file path"},CopyFolderPath:{type:r.CopyFolderPath,text:"Copy folder path"},CopyLink:{type:r.CopyLink,text:"Copy link"},OpenShellHere:{type:r.OpenShellHere,text:"Open shell here"},Rename:{type:r.Rename,text:"Rename"},Download:{type:r.Download,text:"Download"},Delete:{type:r.Delete,text:"Delete"}},w=(p.l0.position.relative,p.l0.width(16),p.l0.height(16),{self:[p.l0.position.relative,p.l0.width(20),p.l0.height("100%"),p.l0.justify.center,{"& span":{height:"100%"}}],self2:[p.l0.position.relative,p.l0.width(16),p.l0.height("100%"),p.l0.justify.center,p.l0.pr(1)],button:[p.l0.display.flex,p.l0.align.center,p.l0.justify.center,p.l0.py(2),p.l0.top(0),p.l0.width("100%"),p.l0.border({width:0,color:"none"}),p.l0.cursor.pointer,p.l0.color.foregroundDimmest,p.l0.borderRadius(4),h.gU.filled,p.l0.position.relative,{top:-1,right:-1,height:"calc(100% + 2px)",backgroundColor:"transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0}],button2:[p.l0.display.flex,p.l0.align.center,p.l0.py(2),p.l0.width("100%"),p.l0.height("100%"),p.l0.cursor.pointer,p.l0.color.foregroundDimmest,p.l0.focusRing,p.l0.borderRadius(4),{backgroundColor:"transparent",":hover":{color:p.TV.foregroundDefault}}],list:[p.l0.flex.column,p.l0.justify.center,p.l0.borderRadius(8),p.l0.zIndex(1),p.l0.backgroundColor.backgroundDefault,{listStyle:"none"},{":focus":{outline:"none"}}],option:function(e,n){return[p.l0.color.foregroundDefault,p.l0.p(8),p.l0.fontWeight.normal,p.l0.cursor.pointer,{whiteSpace:"nowrap"},n&&[p.l0.backgroundColor.backgroundHigher],e&&[{":hover":{backgroundColor:p.TV.accentNegativeDefault},":hover .option-label":{color:p.TV.white}}]]},optionLabel:function(e){return e?[p.l0.color.accentNegativeStronger]:[]}});function b(e){var n=e.isNegative,t=e.isHighlighted,r=e.children;return(0,a.tZ)(f.G,{css:w.option(n,t),children:(0,a.tZ)(d.xv,{className:"option-label",css:w.optionLabel(n),multiline:!1,children:r})})}var E=f.K.ul,T=f.K.li,Z=f.K.button,x=f.K.div,S=u.forwardRef((function(e,n){var t=e.isActive,r=e.actions,h=e.onAction,v=e.onOpenChange,S=u.useRef(!1),R=(0,c.L7)({items:r,onSelectedItemChange:function(e){var n=e.selectedItem;n&&(S.current||h(n),P())}}),C=R.isOpen,k=R.getToggleButtonProps,_=R.getMenuProps,D=R.highlightedIndex,I=R.getItemProps,A=R.openMenu,P=R.reset;u.useImperativeHandle(n,(function(){return{open:A}})),u.useEffect((function(){v&&v(C)}),[C,v]);var O=k(),q=(0,g.P5)({controlName:"flag-ws-density-filetree",logFlagToAnalytics:!1});return(0,a.tZ)(f.G,{css:q?w.self2:w.self,children:(0,a.BX)(s.Z,{elevated:!0,showArrow:!0,isOpen:C,placement:"right-start",padding:0,onClickOutside:P,children:[(0,a.tZ)(m.Tg,{background:t?"default":"root",css:[p.l0.height("100%"),{background:t?p.TV.backgroundHigher:"transparent",borderTopRightRadius:8,borderBottomRightRadius:8}],children:(0,a.tZ)(Z,(0,o.Z)((0,i.Z)({},O),{css:q?w.button2:w.button,size:20,onClick:function(e){e.stopPropagation(),O.onClick(e)},children:(0,a.tZ)(l.Z,{})}))}),(0,a.tZ)(x,(0,o.Z)((0,i.Z)({},_({},{suppressRefError:!0})),{children:C?(0,a.tZ)(E,{css:w.list,children:r.map((function(e,n){return(0,a.tZ)(T,(0,o.Z)((0,i.Z)({"data-cy":"filetree-node-action-".concat(e.type)},I({item:e,index:n,onClick:function(n){S.current=!0,setTimeout((function(){S.current=!1})),h(e),n.stopPropagation()}})),{children:(0,a.tZ)(b,{isHighlighted:D===n,isNegative:e.type===y.Delete.type,children:(0,a.BX)(f.G,{css:[p.l0.rowWithGap(8),p.l0.align.center],children:[(0,a.tZ)(d.xv,{multiline:!1,children:e.text}),"icon"in e?e.icon:null]})})}),e.text)}))}):null}))]})})}));S.displayName="NodeActionsMenu",n.ZP=S},1261:function(e,n,t){t.d(n,{s8:function(){return Gr},pR:function(){return Fr}});var r=t(57389),i=t(9970),o=t(74985),a=t(50959),u=t(92683),l=t(82325),c=t(13525),s=(0,a.createContext)(null);function f(e){return(0,o.tZ)(s.Provider,{value:e.store,children:e.children})}function d(){var e=(0,a.useContext)(s);if(!e)throw new Error("Expected store in context");return e}function p(e){return(0,u.Dv)(e,{store:d()})}function h(e){return(0,c.b)(e,d())}var v=function(e){return(0,u.b9)(e,{store:d()})};function g(e){return(0,l.lV)((0,a.useCallback)((function(n){return n(e)}),[e]),{store:d()})}var m=t(2272),y=t(91398),w=t(57135),b=t(96583),E=t(4561),T=t(92153),Z=t(12583),x=t(87978),S=t(26289),R=1e4;function C(e,n){for(var t=0;t<n.length;t+=R){var r;(r=e).push.apply(r,(0,i.Z)(n.slice(t,t+R)))}}var k="No files",_="Loading...",D=t(83344);function I(e,n){return e.y+e.height===n}function A(e,n){var t=n.fromIndex;if("next"===n.dir){for(var r=t+1;r<e.length;r++){var i=e.at(r);if("dir"===(null===i||void 0===i?void 0:i.type)||"file"===(null===i||void 0===i?void 0:i.type))return i}return null}for(var o=t-1;o>=0;o--){var a=e.at(o);if("dir"===(null===a||void 0===a?void 0:a.type)||"file"===(null===a||void 0===a?void 0:a.type))return a}return null}function P(e,n){return n.type===E.Tv.Directory&&e.type!==E.Tv.Directory?1:e.type===E.Tv.Directory&&n.type!==E.Tv.Directory?-1:(0,x.IV)(e.filename,n.filename)}function O(e){var n=e.row,t=e.baseDepth;return"dir"===n.type||"file"===n.type||"upload"===n.type?n.path===Z.Ql?0:(0,x.U$)(n.path)-1-t:n.dir===Z.Ql?0:(0,x.U$)(n.dir)-t}function q(e){var n=e.row,t=O({row:n,baseDepth:e.baseDepth});switch(n.type){case"file":case"dir":case"upload":return{text:(0,x.UO)(n.path),depth:t};case"error":return{text:n.message,depth:t};case"divider":return{text:n.label,depth:t};case"create":case"emptyDir":return{text:k,depth:t}}}var N=function(e,n){return e===Z.Ql?n:e+"/"+n},z=function(e,n){return e===Z.Ql&&1===(0,x.U$)(n)||(0,D.pC)(e,n)};function U(e){var n=e.root,t=void 0===n?Z.Ql:n,r=e.dirInfo,o=e.filter,a=e.sort,u=e.getSection,l=e.readOnly,c=e.pendingUploads,s=e.pendingMoves,f=e.pathBeingRenamed,d=e.alwaysShowCreateRow,p=[],h=(null===c||void 0===c?void 0:c.length)?function(e){var n=new Map,t=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var u=o.value,l=(0,x.Il)(u.targetPath)||Z.Ql,c=n.get(l),s={filename:(0,x.UO)(u.targetPath),progress:u.progress};c?c.push(s):n.set(l,[s])}}catch(f){r=!0,i=f}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n}(c):null,v=new Map,g=new Map;if(null===s||void 0===s?void 0:s.length){var y=!0,w=!1,b=void 0;try{for(var T,S=s[Symbol.iterator]();!(y=(T=S.next()).done);y=!0){var R=T.value,k=R.from,_=R.to;v.set(k.path,k.type),g.set(_,k.type)}}catch(D){w=!0,b=D}finally{try{y||null==S.return||S.return()}finally{if(w)throw b}}}return function e(n){var c=r.get(n);if(c&&!v.has(n)&&c.expanded)if(n!==t||!c.loading||c.children)if(c.error)p.push({type:"error",message:c.error.message,dir:n});else{var s=c.children?(0,i.Z)(c.children):void 0;s&&v.size>0&&(s=s.filter((function(e){return!v.has(N(n,e.filename))})));var y=!0,w=!1,b=void 0;try{for(var T,S=function(){var e=(0,m.Z)(T.value,2),t=e[0],r=e[1];if(!z(n,t))return"continue";var i=(0,x.UO)(t);if(null===s||void 0===s?void 0:s.some((function(e){return e.filename===i})))return"continue";s||(s=[]),s.push({filename:i,type:r})},R=g[Symbol.iterator]();!(y=(T=R.next()).done);y=!0)S()}catch(D){w=!0,b=D}finally{try{y||null==R.return||R.return()}finally{if(w)throw b}}var k=null===h||void 0===h?void 0:h.get(n);if(k){s||(s=[]);var _=!0,I=!1,A=void 0;try{for(var P,O=k[Symbol.iterator]();!(_=(P=O.next()).done);_=!0){var q=P.value,U=q.filename,F=q.progress;s.push({filename:U,type:E.Tv.File,progress:F})}}catch(D){I=!0,A=D}finally{try{_||null==O.return||O.return()}finally{if(I)throw A}}}if(s)if(c.create||k||!s||0!==s.length){var G=function(e,n){var t=n.getSection,r=[],i=new Map,o=!0,a=!1,u=void 0;try{for(var l,c=e[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var s=l.value,f=t(s),d=s.progress?{type:"upload",progress:s.progress,filename:s.filename}:{type:s.type===E.Tv.File?"file":"dir",filename:s.filename};if(f){var p=i.get(f);p?p.push(d):i.set(f,[d])}else r.push(d)}}catch(D){a=!0,u=D}finally{try{o||null==c.return||c.return()}finally{if(a)throw u}}var h=!0,v=!1,g=void 0;try{for(var y,w=i[Symbol.iterator]();!(h=(y=w.next()).done);h=!0){var b=(0,m.Z)(y.value,2),T=b[0],Z=b[1];r.push({type:"divider",label:T}),C(r,Z)}}catch(D){v=!0,g=D}finally{try{h||null==w.return||w.return()}finally{if(v)throw g}}return r}(s.filter(o).sort(a),{getSection:n===Z.Ql?u:function(){return null}}),L=-1,B=!0,M=!1,W=void 0;try{for(var j,H=function(){var t=j.value;if("error"===t.type||"emptyDir"===t.type)throw new Error("Expected dir, file, or divider row");if("divider"===t.type)return-1===L&&(L=p.length),p.push({type:"divider",dir:n,label:t.label}),"continue";var i=N(n,t.filename);if("dir"===t.type){var o={type:"dir",path:i};if(f===i&&(o.rename=!0),g.has(i)&&(o.pending=!0),p.push(o),!r.get(i))return"continue";e(i)}else if("upload"===t.type)p.push({type:"upload",path:i,progress:t.progress});else if(!k||!k.some((function(e){return e.filename===t.filename}))){var a={type:"file",path:i};f===i&&(a.rename=!0),g.has(i)&&(a.pending=!0),p.push(a)}},X=G[Symbol.iterator]();!(B=(j=X.next()).done);B=!0)H()}catch(D){M=!0,W=D}finally{try{B||null==X.return||X.return()}finally{if(M)throw W}}if(c.create||d){var Q={type:"create",dir:n,fileType:c.create?c.create:void 0};-1===L?p.push(Q):p.splice(L,0,Q)}}else p.push({type:l?"emptyDir":"create",dir:n})}else p.push({type:"dir",path:n})}(t),p}var F,G,L,B=t(56581),M=(0,y.cn)(new Map),W=(0,y.cn)({width:0,height:0}),j=(0,y.cn)(0),H=(0,y.cn)(null),X=(0,y.cn)(new Map),Q=(0,y.cn)((function(e){return null!==(F=e(re).root)&&void 0!==F?F:Z.Ql})),V=(0,y.cn)(null),K=(0,y.cn)(null),Y=(0,y.cn)(void 0),$=(0,y.cn)(null,(function(e,n,t){e(oe)||n(K,t)})),J=(0,y.cn)((function(e){var n=e(re).root,t=void 0===n?Z.Ql:n;return t===Z.Ql?0:(0,x.U$)(t)})),ee=(0,y.cn)((function(e){return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=[],r=0,o=!0,a=!1,u=void 0;try{for(var l,c=(0,i.Z)(e.values()).sort((function(e,n){return e.index-n.index}))[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var s=l.value,f={height:s.height,y:s.y,cols:[]};if(t.push(f),0!==s.depth){var d=s.depth+n;d>r&&(r=d);for(var p="divider"===s.row.type||"error"===s.row.type||"create"===s.row.type||"emptyDir"===s.row.type?s.row.dir:(0,x.Il)(s.row.path),h=p.split("/"),v=0;v<(0,x.U$)(p);v++){var g=h.slice(0,Number(v+1)).join("/");f.cols.push(g)}}}}catch(L){a=!0,u=L}finally{try{o||null==c.return||c.return()}finally{if(a)throw u}}for(var y=new Map,w=n;w<r;w++){var b=[];y.set(w,b);var E=!0,T=!1,Z=void 0;try{for(var S,R=t[Symbol.iterator]();!(E=(S=R.next()).done);E=!0){var C=S.value,k=C.cols[w],_=C.y;if(k){var D=b.at(-1);D&&I(D,_)?D.height+=C.height:b.push({y:_,height:C.height,dir:k,depth:w-n})}}}catch(L){T=!0,Z=L}finally{try{E||null==R.return||R.return()}finally{if(T)throw Z}}}var A=[],P=!0,O=!1,q=void 0;try{for(var N,z=y[Symbol.iterator]();!(P=(N=z.next()).done);P=!0){var U,F=(0,m.Z)(N.value,2),G=(F[0],F[1]);(U=A).push.apply(U,(0,i.Z)(G))}}catch(L){O=!0,q=L}finally{try{P||null==z.return||z.return()}finally{if(O)throw q}}return A}(e(X),e(J))})),ne=(0,y.cn)(!1),te=(0,y.cn)(null,(function(e,n,t){var r=new Map,i=e(be),o=e(J),a=!0,u=!1,l=void 0;try{for(var c,s=t.rows[Symbol.iterator]();!(a=(c=s.next()).done);a=!0){var f=c.value,d=f.key.toString(),p=i.at(f.index);if(p){var h=Math.max(0,O({row:p,baseDepth:o}));r.set(f.index,{y:f.start,height:f.size,index:f.index,key:d,depth:h,row:p})}}}catch(v){u=!0,l=v}finally{try{a||null==s.return||s.return()}finally{if(u)throw l}}n(X,r),n(j,t.scrollHeight)})),re=(0,y.cn)({}),ie=(0,B.kv)(re,(function(e){return null!==(G=e.onContextMenu)&&void 0!==G?G:null})),oe=(0,y.cn)((function(e){return Boolean(e(re).readOnly)||!e(ne)})),ae=(0,y.cn)((function(e){return null!==(L=e(re).fontSize)&&void 0!==L?L:14})),ue=function(e,n){if("divider"===n)switch(e){case 10:return 28;case 12:case 14:return 38;case 18:return 44;default:return 48}switch(e){case 10:return 18;case 12:return 24;case 14:return 32;case 18:return 38;default:return 40}},le=(0,y.cn)((function(e){return ue(e(ae),"file")})),ce=(0,y.cn)((function(e){return function(e){switch(e){case 10:case 12:return 12;case 14:return 16;case 18:return 20;default:return 24}}(e(ae))})),se=(0,y.cn)((function(e){return e(ae)<14?4:8})),fe=(0,y.cn)((function(e){return e(ae)<14?4:8})),de=(0,y.cn)((function(e){return e(ae)<16?4:8})),pe=(0,y.cn)((function(e){return function(e){switch(e){case 10:return 12;case 12:return 16;case 14:return 24;case 18:return 32;default:return 40}}(e(ae))})),he=(0,y.cn)((function(e){return function(e){switch(e){case 10:return 10;case 12:case 14:return 12;case 18:return 14;default:return 18}}(e(ae))})),ve=(0,y.cn)((function(e){return function(e){switch(e){case 10:case 12:return 10;case 14:case 18:return 16;default:return 20}}(e(ae))})),ge=(0,y.cn)(new Map);function me(e){var n=e.filename;return S.nh.includes(n)?"Config files":S.uP.includes(n)?"Packager files":null}var ye=(0,y.cn)([]),we=(0,y.cn)([]),be=(0,y.cn)((function(e){var n,t,r=e(re),i=r.filter,o=r.alwaysShowCreateRow,a=r.root,u=void 0===a?Z.Ql:a,l=r.sort,c=void 0===l?P:l,s=r.readOnly,f=void 0!==s&&s;return U({root:u,dirInfo:e(ge),filter:i,sort:c,readOnly:f,getSection:me,pendingUploads:e(ye),pathBeingRenamed:null!==(n=e(K))&&void 0!==n?n:void 0,pendingMoves:null!==(t=e(we))&&void 0!==t?t:void 0,alwaysShowCreateRow:o})})),Ee=(0,y.cn)((function(e){var n=e(H);if(!n)return null;var t=e(be).findIndex((function(e){return("file"===e.type||"dir"===e.type)&&e.path===n}));return-1!==t?t:null})),Te=(0,y.cn)(null,(function(e,n,t){var r,i=e(Ee),o=e(H);if("INPUT"!==(null===(r=document.activeElement)||void 0===r?void 0:r.tagName)&&null!==i&&null!==o){var a=e(be);switch(t.key){case"ArrowDown":t.preventDefault();var u=A(a,{dir:"next",fromIndex:i});return void("dir"!==(null===u||void 0===u?void 0:u.type)&&"file"!==(null===u||void 0===u?void 0:u.type)||n(H,u.path));case"ArrowUp":t.preventDefault();var l=A(a,{dir:"previous",fromIndex:i});return void("dir"!==(null===l||void 0===l?void 0:l.type)&&"file"!==(null===l||void 0===l?void 0:l.type)||n(H,l.path));case"ArrowLeft":case"ArrowRight":t.preventDefault();var c=e(ge).get(o);if(!c)return;return void("ArrowLeft"===t.key&&c.expanded?n(Se,o):"ArrowRight"!==t.key||c.expanded||n(Ce,o));case"Enter":case" ":if("Enter"===t.key&&!e(oe))return;return e(ge).has(o)?void n(ke,o):void e(re).onFileSelect({event:t,path:o,type:"keydown"})}}})),Ze=(0,y.cn)(null,(function(e,n,t){var r;t.path===(null!==(r=e(re).root)&&void 0!==r?r:Z.Ql)&&n(ne,!0),n(ge,(function(e){return(0,T.ZP)(e,(function(e){var n=t.path===Z.Ql?null:t.path+"/",r=!0,i=!1,o=void 0;try{for(var a,u=t.children[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var l,c=a.value,s=n?n+c.filename:c.filename,f=e.get(s);if(c.type===E.Tv.Directory)f||e.set(s,{expanded:!1});else f&&(null===(l=f.disposeWatcher)||void 0===l||l.call(f),e.delete(s))}}catch(p){i=!0,o=p}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}var d=e.get(t.path);d&&(d.children=t.children,d.loading=!1,d.error=void 0)}))}))})),xe=(0,y.cn)(null,(function(e,n,t){var r;t.path===(null!==(r=e(re).root)&&void 0!==r?r:Z.Ql)&&n(ne,!0),n(ge,(function(e){return(0,T.ZP)(e,(function(e){var n,r=e.get(t.path);r&&(r.loading=!1,r.error=t.error,null===(n=r.disposeWatcher)||void 0===n||n.call(r),r.disposeWatcher=null)}))}))})),Se=(0,y.cn)(null,(function(e,n,t){var r=[t];n(ge,(function(e){return(0,T.ZP)(e,(function(e){var n=!0,t=!1,i=void 0;try{for(var o,a=r[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value,l=e.get(u);l&&(l.expanded=!1,l.loading=!1,l.disposeWatcher&&(l.disposeWatcher(),l.disposeWatcher=null))}}catch(c){t=!0,i=c}finally{try{n||null==a.return||a.return()}finally{if(t)throw i}}}))}))})),Re=(0,y.cn)(null,(function(e,n,t){n(ge,(function(e){return(0,T.ZP)(e,(function(e){var n,r=e.get(t);r&&(null===(n=r.disposeWatcher)||void 0===n||n.call(r),e.delete(t))}))}))})),Ce=(0,y.cn)(null,(function(e,n,t){var r=Array.isArray(t)?t:[t],i=e(re).fs;n(ge,(function(e){return(0,T.ZP)(e,(function(e){var t=!0,o=!1,a=void 0;try{for(var u,l=function(){var t,r=u.value,o=null!==(t=e.get(r))&&void 0!==t?t:{expanded:!0};e.has(r)?o.expanded=!0:e.set(r,o),o.disposeWatcher?o.disposeWatcher():o.loading=!0,o.disposeWatcher=i.watchDir(r,{onError:function(e){return n(xe,{path:r,error:e})},onChange:function(e){return n(Ze,{path:r,children:e})},onMoveOrDelete:function(){return n(Re,r)}})},c=r[Symbol.iterator]();!(t=(u=c.next()).done);t=!0)l()}catch(s){o=!0,a=s}finally{try{t||null==c.return||c.return()}finally{if(o)throw a}}}))}))})),ke=(0,y.cn)(null,(function(e,n,t){var r=e(ge).get(t);if(!r)return n(ge,(function(e){return(0,T.ZP)(e,(function(e){e.set(t,{expanded:!1})}))})),void n(Ce,t);r.expanded?n(Se,t):n(Ce,t)})),_e=(0,y.cn)((function(e){return e(re).manageWidth?e(ne)?function(e){var n=e.rows,t=e.baseDepth,r=[],i=new Map,o=!0,a=!1,u=void 0;try{for(var l,c=n[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var s=l.value,f=q({row:s,baseDepth:t}),d=f.depth,p=f.text,h=i.get(d);if(h){var v=h.get(s.type);v&&(null===v||void 0===v?void 0:v.length)>p.length||h.set(s.type,p)}else i.set(d,new Map([[s.type,p]]))}}catch(P){a=!0,u=P}finally{try{o||null==c.return||c.return()}finally{if(a)throw u}}var g=!0,y=!1,w=void 0;try{for(var b,E=i[Symbol.iterator]();!(g=(b=E.next()).done);g=!0){var T=(0,m.Z)(b.value,2),Z=T[0],x=T[1],S=!0,R=!1,C=void 0;try{for(var k,_=x[Symbol.iterator]();!(S=(k=_.next()).done);S=!0){var D=(0,m.Z)(k.value,2),I=D[0],A=D[1];r.push({depth:Z,type:I,text:A})}}catch(P){R=!0,C=P}finally{try{S||null==_.return||_.return()}finally{if(R)throw C}}}}catch(P){y=!0,w=P}finally{try{g||null==E.return||E.return()}finally{if(y)throw w}}return r}({rows:e(be),baseDepth:e(J)}):[{type:"dir",text:_,depth:1}]:null})),De=(0,y.cn)(null,(function(e,n,t){var r=e(re).onCreateStart;r?r({parentPath:t.parentPath,fileType:t.fileType}):(n(Ce,t.parentPath),n(ge,(function(e){return(0,T.ZP)(e,(function(e){var n=e.get(t.parentPath);n&&(n.create=t.fileType)}))})),n(H,null))})),Ie=(0,y.cn)(null,(function(e,n,t){n(ge,(function(e){return(0,T.ZP)(e,(function(e){var n=e.get(t);n&&(n.create=void 0)}))}))})),Ae=(0,y.cn)(null,(function(e,n,t){var r={path:t.path,type:t.fileType};n(H,r.path),n(Ne,{node:r}),n(ge,(function(e){return(0,T.ZP)(e,(function(e){var n=e.get(t.parentPath);n&&(n.create=void 0)}))})),r.type===E.Tv.Directory&&n(Ce,r.path)})),Pe=(0,y.cn)(new Map),Oe=(0,y.cn)(null),qe=(0,y.cn)(!0),Ne=(0,y.cn)(null,(function(e,n,t){var r=t.node,i=t.mode,o=e(be),a=e(Oe);n(qe,!i),n(Pe,(function(e){return(0,T.ZP)(e,(function(e){!function(e,n){var t=n.node,r=n.rows,i=n.mode,o=n.anchor;if(!i)return e.clear(),void e.set(t.path,t.type);if("multi"===i&&e.has(t.path))e.delete(t.path);else if("multi"!==i){var a=t.type===E.Tv.Directory?"dir":"file",u=r.findIndex((function(e){return e.type===a&&e.path===t.path}));if(-1!==u){var l=(null===o||void 0===o?void 0:o.type)===E.Tv.Directory?"dir":"file",c=o?r.findIndex((function(e){return e.type===l&&e.path===o.path})):-1;if(-1!==c){var s=c<u?r.slice(c,u+1):r.slice(u,c+1),f=!0,d=!1,p=void 0;try{for(var h,v=r[Symbol.iterator]();!(f=(h=v.next()).done);f=!0){var g=h.value;"file"!==g.type&&"dir"!==g.type||(s.includes(g)?e.set(g.path,"file"===g.type?E.Tv.File:E.Tv.Directory):e.delete(g.path))}}catch(m){d=!0,p=m}finally{try{f||null==v.return||v.return()}finally{if(d)throw p}}}}}else e.set(t.path,t.type)}(e,{node:r,rows:o,mode:i,anchor:a})}))}));var u=e(Pe);if(!(u.size>1)){var l=!0,c=!1,s=void 0;try{for(var f,d=u[Symbol.iterator]();!(l=(f=d.next()).done);l=!0){var p=(0,m.Z)(f.value,2),h=p[0],v=p[1];n(Oe,{path:h,type:v})}}catch(g){c=!0,s=g}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}}})),ze=(0,y.cn)(null,(function(e,n){n(Pe,new Map),n(qe,!0),n(Oe,null)})),Ue=(0,y.cn)(null,function(){var e=(0,w.Z)((function(e,n,t){var r,i,o;return(0,b.__generator)(this,(function(a){switch(a.label){case 0:return r=e(re).fs,[4,Promise.all(t.map(function(){var e=(0,w.Z)((function(e){var n;return(0,b.__generator)(this,(function(t){switch(t.label){case 0:return[4,r.readDir(e)];case 1:return[2,(n=t.sent()).error?n:{path:e,children:n.children,error:null}]}}))}));return function(n){return e.apply(this,arguments)}}()))];case 1:return i=a.sent(),(o=i.filter((function(e){return null!==e.error}))).length?[2,{errors:o}]:(n(ge,(function(e){return(0,T.ZP)(e,(function(e){var n=!0,t=!1,r=void 0;try{for(var o,a=i[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value;if(u.error)throw new Error("Unexpected error");var l=e.get(u.path);l?(l.loading=!1,l.expanded=!0,l.children=u.children,l.error=void 0):e.set(u.path,{loading:!1,expanded:!0,children:u.children,error:void 0})}}catch(c){t=!0,r=c}finally{try{n||null==a.return||a.return()}finally{if(t)throw r}}}))})),[2,{errors:null}])}}))}));return function(n,t,r){return e.apply(this,arguments)}}());var Fe=(0,y.cn)(null,function(){var e=(0,w.Z)((function(e,n,t){var r,o,a,u,l,c,s,f,d;return(0,b.__generator)(this,(function(p){switch(p.label){case 0:r=e(ge),o=[],a=!0,u=!1,l=void 0;try{for(c=function(e){var n=e.split("/");return n.pop(),[Z.Ql].concat((0,i.Z)(n.map((function(e,t){return n.slice(0,t+1).join("/")}))))}(t.path)[Symbol.iterator]();!(a=(s=c.next()).done);a=!0)f=s.value,(null===(d=r.get(f))||void 0===d?void 0:d.expanded)||o.push(f)}catch(h){u=!0,l=h}finally{try{a||null==c.return||c.return()}finally{if(u)throw l}}return o.length?[4,n(Ue,o)]:[3,2];case 1:p.sent(),p.label=2;case 2:return n(Ne,{node:t}),[2]}}))}));return function(n,t,r){return e.apply(this,arguments)}}()),Ge=(0,y.cn)(null),Le=(0,y.cn)(null,(function(e,n,t){var r=e(Ge);if(r){var i=!0,o=!1,a=void 0;try{for(var u,l=e(X)[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var c=(0,m.Z)(u.value,2),s=c[0],f=c[1];if(("file"===f.row.type||"dir"===f.row.type)&&f.row.path===t){r.scrollToIndex(s);break}}}catch(d){o=!0,a=d}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}}}));function Be(e,n){return n!==e.path&&(!((0,D.pC)(n,e.path)||n===Z.Ql&&1===(0,x.U$)(e.path))&&!(0,D.yr)(e.path,n))}var Me,We=(0,y.cn)(null,function(){var e=(0,w.Z)((function(e,n,t){var r,i,o,a,u,l,c,s,f;return(0,b.__generator)(this,(function(d){switch(d.label){case 0:return r=e(ge).get(t.to),(i=null===r||void 0===r?void 0:r.children)?[3,2]:[4,e(re).fs.readDir(t.to)];case 1:if((o=d.sent()).error)return[2];i=o.children,d.label=2;case 2:if(!i)throw new Error("Expected children");return a=function(e,n,t){return e.reduce((function(e,r){var i=(0,x.UO)(r.path),o=null===t||void 0===t?void 0:t.find((function(e){return e.filename===i}));return o&&e.push({type:o.type,path:n===Z.Ql?o.filename:n+"/"+o.filename}),e}),[])}(t.nodes,t.to,i),(u=function(e,n){var t=(0,x.RQ)(e);return t.every((function(e){return Be(e,n)}))?t.map((function(e){var t=(0,x.UO)(e.path);return{from:e,to:n===Z.Ql?t:n+"/"+t}})):null}(t.nodes,t.to))?a.length&&!t.overwrite?(null===(l=e(re).onConflicts)||void 0===l||l({type:"move",nodes:t.nodes,to:t.to,conflicts:a}),[2]):(c=e(re).fs,a.length?a.some((function(e){return u.some((function(n){var t=n.from;return(0,D.yr)(e.path,t.path)}))}))?[2]:[4,Promise.all(a.map(function(){var e=(0,w.Z)((function(e){var n;return(0,b.__generator)(this,(function(t){switch(t.label){case 0:return[4,e.type===E.Tv.Directory?c.deleteDir(e.path):c.deleteFile(e.path)];case 1:return[2,(n=t.sent()).error?{error:n.error,node:e}:null]}}))}));return function(n){return e.apply(this,arguments)}}()))]:[3,4]):[2];case 3:if(s=d.sent(),s.filter(Boolean).length)return[2];d.label=4;case 4:return n(we,u),[4,Promise.all(u.map(function(){var e=(0,w.Z)((function(e){var n,t,r;return(0,b.__generator)(this,(function(i){switch(i.label){case 0:return n=e.from,t=e.to,[4,n.type===E.Tv.Directory?c.moveDir(n.path,t):c.moveFile(n.path,t)];case 1:return[2,(r=i.sent()).error?{error:r.error,from:n,to:t}:null]}}))}));return function(n){return e.apply(this,arguments)}}()))];case 5:return f=d.sent(),n(we,[]),f.filter(Boolean).length?[2]:(n(Pe,new Map(u.map((function(e){return[e.to,e.from.type]})))),[2])}}))}));return function(n,t,r){return e.apply(this,arguments)}}()),je=t(22011),He=t(35981),Xe=t(91669);function Qe(e){return Ve.apply(this,arguments)}function Ve(){return Ve=(0,w.Z)((function(e){var n,t,r,o,a,u,l,c,s,f,d,p;return(0,b.__generator)(this,(function(h){switch(h.label){case 0:return n=e.parentPath,t=e.overwrite,r=e.fs,o=e.files,a=e.shouldUseFileTransferAPI,u=e.onStart,l=e.onUpload,c=e.onError,s=e.onDone,f=function(){var e=(0,w.Z)((function(e){var n,i,o,u,s,f,d;return(0,b.__generator)(this,(function(p){switch(p.label){case 0:return n=e.targetPath,i=e.file,o=e.progress,t?[3,2]:[4,r.stat(n)];case 1:if(p.sent().exists)return u={file:i,path:n,error:Me.AlreadyExists},c(u),[2,u];p.label=2;case 2:s=null,p.label=3;case 3:return p.trys.push([3,5,,6]),[4,(0,Xe.pV)(i)];case 4:return s=p.sent(),[3,6];case 5:return p.sent(),f={file:i,path:n,error:Me.FileRead},c(f),[2,f];case 6:return d=je.Z.from(s),a?[4,r.transferFile(n,d,(function(e,n){o.current=n/e}))]:[3,8];case 7:return p.sent(),[3,10];case 8:return[4,r.writeFile(n,d)];case 9:p.sent(),p.label=10;case 10:return l({file:i,path:n}),[2,{path:n,file:i}]}}))}));return function(n){return e.apply(this,arguments)}}(),d=o.map((function(e){var t=e.dirPath||e.webkitRelativePath||e.name;return{targetPath:n?n+"/"+t:t,progress:(0,He.u)(0),file:e}})),u(d),[4,Promise.all(d.map(f))];case 1:return p=h.sent(),s({parentPath:n,uploads:p.filter((function(e){return!("error"in e)})),errors:p.reduce((function(e,n){return"error"in n?(0,i.Z)(e).concat([n]):e}),[])}),[2]}}))})),Ve.apply(this,arguments)}!function(e){e.AlreadyExists="ALREADY_EXIST",e.FileRead="FILE_READ",e.Network="NETWORK"}(Me||(Me={}));var Ke=t(29457),Ye=(0,y.cn)(null,function(){var e=(0,w.Z)((function(e,n,t){var r,i,o,a,u,l,c,s,f;return(0,b.__generator)(this,(function(d){switch(d.label){case 0:return r=e(re).fs,i=t.parentPath||Z.Ql,o=e(ge).get(i),(a=null===o||void 0===o?void 0:o.children)?[3,2]:[4,r.readDir(i)];case 1:if((u=d.sent()).error)return[2];a=u.children,d.label=2;case 2:if(!a)throw new Error("Expected children");return l=a.filter((function(e){return t.files.some((function(n){return n.name===e.filename}))})),(c=l.length?l.map((function(e){return{path:i===Z.Ql?e.filename:i+"/"+e.filename,type:e.type}})):null)&&!t.overwrite?(null===(s=e(re).onConflicts)||void 0===s||s({type:"upload",files:t.files,to:i,conflicts:l.map((function(e){return{path:i===Z.Ql?e.filename:i+"/"+e.filename,type:e.type}}))}),[2]):c?[4,Promise.all(c.map(function(){var e=(0,w.Z)((function(e){var n;return(0,b.__generator)(this,(function(t){switch(t.label){case 0:return[4,e.type===E.Tv.Directory?r.deleteDir(e.path):r.deleteFile(e.path)];case 1:return[2,(n=t.sent()).error?{error:n.error,node:e}:null]}}))}));return function(n){return e.apply(this,arguments)}}()))]:[3,4];case 3:if(f=d.sent(),f.filter(Boolean).length)return[2];d.label=4;case 4:return Qe({parentPath:t.parentPath,files:t.files,fs:r,shouldUseFileTransferAPI:!0,onStart:function(e){n(ye,(function(n){return(0,T.ZP)(n,(function(n){var t=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var u=o.value;n.push(u)}}catch(l){r=!0,i=l}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}}))}))},onUpload:function(e){n(ye,(function(n){return(0,T.ZP)(n,(function(n){var t=n.findIndex((function(n){return n.targetPath===e.path}));-1!==t&&n.splice(t,1)}))}))},onError:function(e){n(ye,(function(n){return(0,T.ZP)(n,(function(n){var t=n.findIndex((function(n){return n.targetPath===e.path}));-1!==t&&n.splice(t,1)}))}))},onDone:function(e){var n=e.errors,t=e.parentPath;n.length||Ke.kg.info("Successfully uploaded files",{uploadSource:"filetree2",parentPath:t})}}),[2]}}))}));return function(n,t,r){return e.apply(this,arguments)}}()),$e=t(94716),Je=t(44945),en=t(11969),nn=t(86763),tn=t.n(nn),rn=Je.z.nativeEnum(E.Tv),on=Je.z.object({filename:Je.z.string().min(1),type:rn}),an=Je.z.object({scrollOffset:Je.z.number().gte(0),dirInfo:Je.z.record(Je.z.object({expanded:Je.z.boolean(),children:Je.z.array(on)}))});function un(e,n){return en.Z.set(cn(e),n)}function ln(e){return function(e){var n=an.safeParse(e);return n.success?{dirInfo:new Map(Object.entries(n.data.dirInfo)),scrollOffset:n.data.scrollOffset}:null}(en.Z.get(cn(e)))}function cn(e){return"repl:workspace:filetree:"+e}var sn=Je.z.array(Je.z.string()),fn="repl:workspace:filetree:savedKeys";function dn(){var e=sn.safeParse(en.Z.get(fn));return e.success?e.data:null}var pn=(0,B.kv)(re,(function(e){return e.localCacheKey?cn(e.localCacheKey):null})),hn=(0,y.cn)(null,(function(e){var n,t=e(re),r=t.localCacheKey,i=t.filter;if(r){var o,a=null!==(o=null===(n=e(Ge))||void 0===n?void 0:n.scrollOffset)&&void 0!==o?o:0,u=e(ge),l=!1,c=!0,s=!1,f=void 0;try{for(var d,p=u[Symbol.iterator]();!(c=(d=p.next()).done);c=!0){var h=(0,m.Z)(d.value,2)[1].children;if(l=Boolean(null===h||void 0===h?void 0:h.length))break}}catch(C){s=!0,f=C}finally{try{c||null==p.return||p.return()}finally{if(s)throw f}}if(l){var v=function(e,n){var t={dirInfo:Object.create(null),scrollOffset:e.scrollOffset},r=!0,i=!1,o=void 0;try{for(var a,u=e.dirInfo[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var l=(0,m.Z)(a.value,2),c=l[0],s=l[1],f=s.expanded,d=s.children;if(d){var p=d.filter(n);p.length&&(t.dirInfo[c]={expanded:f,children:p})}}}catch(C){i=!0,o=C}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return t}({dirInfo:u,scrollOffset:a},i),g=cn(r),y=dn();if(y){var w=y.filter((function(e){return e!==g}));w.unshift(g);var b=w.splice(20),E=!0,T=!1,Z=void 0;try{for(var x,S=b[Symbol.iterator]();!(E=(x=S.next()).done);E=!0){var R=x.value;en.Z.remove(R)}}catch(C){T=!0,Z=C}finally{try{E||null==S.return||S.return()}finally{if(T)throw Z}}en.Z.set(fn,w)}else en.Z.set(fn,[g]);return un(r,v)}}}));var vn=(0,y.cn)(null),gn=(0,y.cn)(null,(function(e,n,t){var r=[t];if(!e(qe)){var i=!0,o=!1,a=void 0;try{for(var u,l=e(Pe)[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var c=(0,m.Z)(u.value,2),s=c[0],f=c[1];t.path!==s&&r.push({path:s,type:f})}}catch(d){o=!0,a=d}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}}n(vn,(0,x.RQ)(r))}));function mn(){return(mn=(0,w.Z)((function(e,n){var t;return(0,b.__generator)(this,(function(r){switch(r.label){case 0:return[4,Promise.all(n.map((function(n){return n.type===E.Tv.Directory?e.deleteDir(n.path):e.deleteFile(n.path)})))];case 1:return t=r.sent(),[2,{error:t.filter((function(e){return e.error})).length?"Something went wrong deleting files":null}]}}))}))).apply(this,arguments)}function yn(){var e=h(vn),n=g(re);(0,a.useEffect)((function(){return e.subscribe((function(e){if(e){var t=n().onDeleteNodes;t&&t({nodes:e,confirm:function(){return function(e,n){return mn.apply(this,arguments)}(n().fs,e)}})}}))}),[n,e])}var wn=t(39541),bn=t(82568),En=t(85368),Tn=t(42174),Zn=t(81202),xn=t.n(Zn),Sn=t(94629),Rn=t(85092),Cn=t(18171),kn=(0,t(68973).$)(["scrollHeight","fontSize","fontSizeSmall","iconSize","horizontalPadding","borderRadius","gutterWidth","minHeight","iconTextGap","rowWidth","rowHeight","rowLeftIndent","rowY","dropPreviewDepth","dropPreviewHeight","dropPreviewY","dropPreviewOpacity","strokeDashoffset","statusColor","statusBackgroundColor","dirStatusIconSize","nodeBackgroundColor","dragPreviewX","dragPreviewY","contextMenuButtonDisplay"]),_n=kn.cssVars,Dn=kn.styleTokens,In={paddingLeft:Dn.horizontalPadding,paddingRight:Dn.horizontalPadding},An={"&& svg":{minWidth:Dn.iconSize,minHeight:Dn.iconSize,width:Dn.iconSize,height:Dn.iconSize}},Pn=[wn.l0.truncate,{fontSize:Dn.fontSize}],On=t(25362),qn=t(42256);function Nn(e,n){return e.shiftKey?"bulk":"altKey"===n&&e.altKey||"cmdOrCtrlKey"===n&&(0,qn.j)(e)?"multi":void 0}var zn=(0,y.cn)(null,(function(e,n,t){var r=t.event,i=t.path;n(H,i);var o=e(re).multiselectModifierKey;n(Ne,{node:{path:i,type:E.Tv.Directory},mode:o?Nn(r,o):void 0}),n(H,i),r.shiftKey||r.altKey||(0,qn.j)(r)||n(ke,i)}));function Un(e){return p(function(e){return(0,Cn.Z)((function(){var n;return(0,y.cn)((function(t){var r;return null!==(n=null===(r=t(X).get(e))||void 0===r?void 0:r.row)&&void 0!==n?n:null}))}),[e])}(e))}function Fn(){return{fontSize:h(ae),fontSizeSmall:h(he),iconSize:h(ce),scrollHeight:h(j),horizontalPadding:h(se),borderRadius:h(fe),gutterWidth:h(ve),minHeight:h(le),iconTextGap:h(de)}}function Gn(e){return p(function(e){return(0,Cn.Z)((function(){return(0,B.kv)(ge,(function(n){var t;return Boolean(null===(t=n.get(e))||void 0===t?void 0:t.loading)}))}),[e])}(e))}function Ln(e){return p(function(e){return(0,Cn.Z)((function(){return(0,B.kv)(ge,(function(n){var t;return Boolean(null===(t=n.get(e))||void 0===t?void 0:t.expanded)}))}),[e])}(e))}function Bn(e){return p((0,Cn.Z)((function(){return(0,B.kv)(H,(function(n){return n===e?0:-1}))}),[e]))}function Mn(){var e,n=(0,a.useRef)(null),t=p(be),r=function(){var e=g(be),n=g(ae);return(0,Cn.Z)((function(){return function(t){var r=e()[t];return r?ue(n(),r.type):0}}),[e,n])}(),o=g(re),u=h(Ee),l=(0,a.useRef)(p(Y)),c=(0,Sn.MG)({count:t.length,overscan:null!==(e=o().overscan)&&void 0!==e?e:100,getScrollElement:function(){return n.current},getItemKey:function(e){var n=t.at(e);return n?"error"===n.type?"error:"+n.dir+n.message:"divider"===n.type?"divider:"+n.dir+n.label:"emptyDir"===n.type?"emptyDir:"+n.dir:"create"===n.type?"create:"+n.dir:n.type+":"+n.path:""},estimateSize:r,rangeExtractor:function(e){var n=(0,Rn.MK)(e);return null===u.current||n.includes(u.current)||void 0===t[u.current]?n:(0,i.Z)(n).concat([u.current])}});(0,a.useEffect)((function(){l.current&&c.scrollToOffset(l.current)}),[c,l]);var s=v(te),f=c.getVirtualItems(),d=c.getTotalSize();(0,a.useEffect)((function(){s({rows:f,scrollHeight:d})}),[s,f,d]);var m=p(ne);(0,a.useEffect)((function(){if(m){var e=function(e){null!==e&&c.getVirtualItems()[e]&&c.scrollToIndex(e,{align:"auto",behavior:"auto"})};return setTimeout((function(){return e(u.current)})),u.subscribe(e)}}),[c,u,m]);var y=v(Ge);return(0,a.useEffect)((function(){y(c)}),[y,c]),{scrollRef:n,virtualizer:c}}function Wn(e){var n=(0,Cn.Z)((function(){return(0,B.kv)(X,(function(n){var t,i=n.get(e);return i?{style:(t={},(0,r.Z)(t,_n.rowHeight,i.height+"px"),(0,r.Z)(t,_n.rowY,i.y+"px"),(0,r.Z)(t,_n.rowLeftIndent,"calc(".concat(i.depth," * ").concat(Dn.gutterWidth,")")),t),depth:i.depth}:void 0}),xn())}),[e]);return p(n)}function jn(e){var n=e.index,t=e.path,r=(0,a.useRef)(null),i=h(H);(0,a.useEffect)((function(){var e=function(e){var n;null===(n=r.current)||void 0===n||n.setAttribute("tabIndex",e.toString())},o=function(r){e(r?r===t?0:-1:0===n?0:-1)};return o(i.current),i.subscribe(o)}),[i,t,n]),(0,a.useEffect)((function(){var e=function(e){null!==n&&clearTimeout(n),e===t&&document.activeElement!==r.current&&(n=setTimeout((function(){var e;null===(e=r.current)||void 0===e||e.focus()}),50))},n=null;e(i.current);var o=i.subscribe(e);return function(){null!==n&&clearTimeout(n),o()}}),[i,t]);var o=v(H);return[r,o]}function Hn(){return v($)}var Xn=t(72006),Qn=t(4405),Vn=t(83005),Kn=t(48712),Yn=t(13354),$n=t(32104),Jn=t(60141),et=t(76735),nt=t(17807),tt=t(61284),rt=t(47518),it=t(99964),ot=t(78973),at=t(81962),ut={name:"sameWidth",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(e){var n=e.state;n.styles.popper.width="".concat(n.rects.reference.width,"px")},effect:function(e){var n=e.state;(0,at.Z)(n.elements.reference,HTMLElement)&&(n.elements.popper.style.width="".concat(n.elements.reference.offsetWidth,"px"))}},lt=t(27691),ct=t(66656),st=t(63128),ft=t(34335),dt=t(49944),pt=(0,B.kv)(re,(function(e){return e.autocomplete}));var ht=(0,bn.X)({icon:[An,{marginRight:Dn.iconTextGap}],item:[In,wn.l0.flex.row,wn.l0.align.center,nt.gU.listItem,{height:Dn.rowHeight}],text:[Pn,wn.l0.flex.growAndShrink(1)]});function vt(e){var n=e.id,t=e.items,r=e.activeIndex,i=e.onSuggestion,a=e.fileType,u=e.innerRef;return(0,o.tZ)(En.G,{tag:"ul",id:n,"aria-label":"Suggestions",innerRef:u,children:t.map((function(e,n){var t=n===r;return(0,o.BX)(En.G,{id:e.value,tag:"li",role:"option","aria-selected":t,style:{backgroundColor:t?nt.vb.interactiveBackground:void 0,color:t?wn.TV.foregroundDefault:wn.TV.foregroundDimmer},onClick:function(){return i(e.value)},css:ht.item,children:[(0,o.tZ)(En.G,{css:ht.icon,children:a===E.Tv.Directory?(0,o.tZ)(Kn.Z,{}):(0,o.tZ)(Vn.Z,{path:e.value})}),(0,o.tZ)(dt.x,{css:ht.text,text:e.value,highlight:e.highlight,dimmed:!t})]},e.value)}))})}var gt=[Dn.horizontalPadding,Dn.iconSize,Dn.iconTextGap].join(" + "),mt=[nt.gU.filled,{height:"100%",width:"100%",paddingLeft:"calc(".concat(gt,")"),paddingRight:Dn.horizontalPadding,fontSize:Dn.fontSize}];var yt=(0,bn.X)({root:[wn.l0.flex.row,In,{padding:Dn.horizontalPadding}],icon:[An,wn.l0.color.accentNegativeDefault,{marginRight:Dn.iconTextGap}],text:[{fontSize:Dn.fontSize},wn.l0.color.foregroundDimmer,wn.l0.flex.growAndShrink(1)]});function wt(e){return(0,o.BX)(En.G,{css:yt.root,children:[(0,o.tZ)(En.G,{css:yt.icon,children:(0,o.tZ)(et.Z,{})}),(0,o.tZ)(En.G,{css:yt.text,children:e.message})]})}var bt=(0,bn.X)({root:[wn.l0.position.relative,wn.l0.flex.growAndShrink(1),{height:"100%"}],icon:[An,wn.l0.position.absolute,wn.l0.left(Dn.horizontalPadding),wn.l0.top("50%"),{transform:"translateY(-50%)"}],input:mt,inputLoading:[mt,lt.p.backgroundPulse()],menu:[wn.l0.overflow("hidden"),{borderRadius:Dn.borderRadius,border:"1px solid",borderColor:wn.TV.outlineDefault}],label:[wn.l0.visuallyHidden]});function Et(e){var n=(0,a.useId)(),t=(0,a.useId)(),i=function(){var e=(0,a.useRef)(null),n=Fn();(0,Tn.j)(e,n.fontSize,(function(e){return(0,r.Z)({},_n.fontSize,e+"px")})),(0,Tn.j)(e,n.iconTextGap,(function(e){return(0,r.Z)({},_n.iconTextGap,e+"px")})),(0,Tn.j)(e,n.borderRadius,(function(e){return(0,r.Z)({},_n.borderRadius,e+"px")})),(0,Tn.j)(e,n.horizontalPadding,(function(e){return(0,r.Z)({},_n.horizontalPadding,e+"px")})),(0,Tn.j)(e,n.iconSize,(function(e){return(0,r.Z)({},_n.iconSize,e+"px")})),(0,Tn.j)(e,n.fontSize,(function(e){return(0,r.Z)({},_n.rowHeight,ue(e,"file")+"px")})),(0,Tn.j)(e,n.iconTextGap,(function(e){return(0,r.Z)({},_n.iconTextGap,e+"px")}));var t=(0,a.useState)(null),i=t[0],o=t[1],u=(0,a.useState)(null),l=u[0],c=u[1],s=(0,ft.D)(i,l,{modifiers:[{name:"offset",options:{offset:[0,4]}},ut],placement:"bottom-start"}),f=s.styles,d=s.attributes;return{menuRef:(0,rt.l)(e,c),menuAnchorRef:o,styles:f.popper,attributes:d.popper}}(),u=function(e){var n=e.onSuggestion,t=e.siblings,r=e.value,i=function(){c({items:[],activeIndex:null})},o=p(pt),u=(0,a.useState)({items:[],activeIndex:null}),l=u[0],c=u[1],s=(0,$e.Z)(t),f=(0,$e.Z)(r),d=(0,a.useTransition)()[1],h=o?function(e){d((function(){var n=o(e);c((function(e){return(0,T.ZP)(e,(function(e){e.items=n.filter((function(e){return e.value!==f.current&&!s.current.some((function(n){return n.filename===e.value}))}))}))}))}))}:null;return{items:l.items.length?l.items:null,activeIndex:l.activeIndex,query:h,onKeyDown:function(e){if("Enter"===e.key){var t=null!==l.activeIndex?l.items[l.activeIndex]:null;if(!t)return;return e.preventDefault(),n(t.value),i(),!0}return"ArrowDown"===e.key?(e.preventDefault(),c((function(e){return(0,T.ZP)(e,(function(e){null===e.activeIndex||e.activeIndex>e.items.length-1?e.activeIndex=0:e.activeIndex++}))})),!0):"ArrowUp"===e.key?(e.preventDefault(),c((function(e){return(0,T.ZP)(e,(function(e){null!==e.activeIndex?0!==e.activeIndex?e.activeIndex--:e.activeIndex=null:e.activeIndex=e.items.length-1}))})),!0):void 0},clear:i}}({onSuggestion:e.onSuggestion,siblings:e.siblings,value:e.value}),l=g(Ge),c=(0,a.useState)(!0),s=c[0],f=c[1],d=(0,a.useRef)(null);(0,a.useEffect)((function(){var e;if(d.current){var n=null===(e=l())||void 0===e?void 0:e.scrollElement;if(n)return(0,ot.j)(d.current,(function(){return f(!0),function(){return f(!1)}}),{root:n})}}),[l]);var h=s&&Boolean(e.error||u.items),v=u.items&&u.activeIndex?u.items[u.activeIndex]:void 0,m=!e.error&&u.items?u.items:null,y=(0,a.useRef)(null),w=u.clear,b=(0,it.Z)((function(e){var n;(null===(n=y.current)||void 0===n?void 0:n.contains(e.target))||w()}),[w]);return(0,o.BX)(o.HY,{children:[(0,o.tZ)("label",{css:bt.label,htmlFor:n,children:"file name"}),(0,o.BX)(En.G,{css:bt.root,innerRef:(0,rt.l)(y,i.menuAnchorRef),children:[(0,o.tZ)(En.G,{css:bt.icon,children:e.fileType===E.Tv.Directory?(0,o.tZ)(Kn.Z,{}):(0,o.tZ)(Vn.Z,{path:e.value})}),(0,o.tZ)("input",{"aria-controls":u.query?t:void 0,"aria-expanded":u.items?"true":"false","aria-activedescendant":null===v||void 0===v?void 0:v.value,role:u.query?"combobox":void 0,id:n,ref:(0,rt.l)(e.inputRef,d),css:e.loading?bt.inputLoading:bt.input,value:e.value,onChange:e.loading?void 0:function(n){var t;e.onChange(n),null===(t=u.query)||void 0===t||t.call(u,{input:n.currentTarget.value,fileType:e.fileType,type:e.type,siblings:e.siblings})},onKeyDown:function(n){u.onKeyDown(n)||e.onKeyDown(n)},onBlur:m?void 0:e.onBlur})]}),(0,o.tZ)(ct.h,{children:(0,o.BX)(st.Tg,(0,Qn.Z)((0,Xn.Z)({css:bt.menu,elevated:!0,innerRef:i.menuRef,style:(0,Qn.Z)((0,Xn.Z)({},i.styles),{display:h?"block":"none"})},i.attributes),{children:[e.error?(0,o.tZ)(wt,{message:e.error}):null,m?(0,o.tZ)(vt,{id:t,innerRef:b,items:m,activeIndex:u.activeIndex,onSuggestion:function(n){e.onSuggestion(n),w()},fileType:e.fileType}):null]}))})]})}var Tt=(0,bn.X)({createFilePicker:[wn.l0.align.center,wn.l0.rowWithGap(4),{fontSize:Dn.fontSize,paddingRight:Dn.horizontalPadding,paddingLeft:Dn.horizontalPadding}],button:[wn.l0.reset.button,wn.l0.p(2),nt.gU.filled,wn.l0.color.foregroundDimmer,{fontSize:"inherit"}],text:[Pn,wn.l0.color.foregroundDimmest],label:[wn.l0.visuallyHidden]});function Zt(e){var n=function(e){var n,t,r,i=v(De),o=v(Ie),u=v(Ae),l=(0,a.useState)(""),c=l[0],s=l[1],f=g(re),d=(0,a.useState)(!1),h=d[0],m=d[1],y=(0,a.useState)(null),T=y[0],x=y[1],S=(0,Cn.Z)((function(){return(0,B.kv)(ge,(function(n){return n.get(e)}))}),[e]),R=(0,Cn.Z)((function(){return(0,B.kv)(S,(function(e){return null!==(n=null===e||void 0===e?void 0:e.create)&&void 0!==n?n:null}))}),[S]),C=p((0,Cn.Z)((function(){return(0,B.kv)(S,(function(e){return null!==(t=null===e||void 0===e?void 0:e.children)&&void 0!==t?t:null}))}),[S])),k=p(R),_=function(){var n=(0,w.Z)((function(n){var t,r,i,o,a,l,c,d;return(0,b.__generator)(this,(function(p){switch(p.label){case 0:return k?(o=(0,On.z)({fileName:n,siblingNames:null!==(i=null===C||void 0===C?void 0:C.map((function(e){return e.filename})))&&void 0!==i?i:[],parentPath:e}))?(x(o),[2]):(a=e===Z.Ql?null:e+"/",l=a?a+n:n,c=f().fs,m(!0),k!==E.Tv.Directory?[3,2]:[4,c.createDir(l)]):[2];case 1:return d=p.sent(),[3,4];case 2:return[4,c.writeFile(l,new je.Z(""))];case 3:d=p.sent(),p.label=4;case 4:return d.error?(x("Something went wrong"),[2]):(m(!1),s(""),u({parentPath:e,path:l,fileType:k}),null===(r=(t=f()).onCreate)||void 0===r||r.call(t,{path:l,type:k}),[2])}}))}));return function(e){return n.apply(this,arguments)}}();return{value:c,setValue:s,fileType:k,create:_,creating:h,error:T||(0,On.z)({fileName:c,siblingNames:null!==(r=null===C||void 0===C?void 0:C.map((function(e){return e.filename})))&&void 0!==r?r:[],parentPath:e}),cancel:(0,Cn.Z)((function(){return function(){return o(e)}}),[e,o]),start:(0,Cn.Z)((function(){return function(n){return i({parentPath:e,fileType:n})}}),[e,i]),siblings:C}}(e.dir),t=(0,a.useRef)(null);return(0,a.useEffect)((function(){var e;n.fileType&&(null===(e=t.current)||void 0===e||e.focus())}),[n.fileType]),n.fileType?(0,o.tZ)(Et,{siblings:n.siblings||[],type:"create",inputRef:t,loading:n.creating,error:n.error,value:n.value,fileType:n.fileType,onBlur:function(){n.cancel()},onChange:function(e){n.setValue(e.currentTarget.value)},onKeyDown:function(e){"Escape"!==e.key?"Enter"===e.key&&n.create(e.currentTarget.value):n.cancel()},onSuggestion:function(e){n.setValue(e),n.create(e)}}):(0,o.tZ)(xt,{create:n.start})}function xt(e){return(0,o.BX)(En.G,{css:Tt.createFilePicker,children:[(0,o.tZ)(En.G,{css:Tt.text,children:"Add a"}),(0,o.tZ)(En.G,{tag:"button",css:Tt.button,onClick:function(){return e.create(E.Tv.File)},children:"file"}),(0,o.tZ)(En.G,{css:Tt.text,children:"or "}),(0,o.tZ)(En.G,{tag:"button",css:Tt.button,onClick:function(){return e.create(E.Tv.Directory)},children:"folder"})]})}var St=t(75205),Rt=t(23271),Ct=t(46995),kt=t(6191),_t=t(30826),Dt=t.n(_t),It=t(19522),At=t(10422),Pt=t(92355),Ot=t(33024),qt=t.n(Ot);function Nt(e,n,t){return Math.floor(Math.min(n,Math.max(e,t)))}var zt=(0,y.cn)(0),Ut=(0,y.cn)(null),Ft=(0,y.cn)((function(e){var n=e(Ut);if(null===n)return null;var t=e(X),r=-1!==n?t.get(n):null;return r&&r.depth>0||"dir"===(null===r||void 0===r?void 0:r.row.type)?function(e,n){var t=e.get(n);if(!t)return null;var r=0,i=t.height,o="dir"===t.row.type?t.depth+1:t.depth;if("dir"===t.row.type)o=t.depth+1,r=t.y;else{o=t.depth;for(var a=n-1;a>=0;a--){var u=e.get(a);if(!u)break;if("dir"===u.row.type&&("file"===t.row.type||"upload"===t.row.type?z(u.row.path,t.row.path):u.row.path===t.row.dir)){i+=u.height,r=u.y;break}u.depth>=t.depth&&(i+=u.height)}}for(var l=n+1;l<e.size;l++){var c=e.get(l);if(!c)break;if(c.depth<=("dir"===t.row.type?t.depth:t.depth-1))break;i+=c.height}return{y:r,height:i,depth:o}}(t,n):{y:e(zt),depth:1,height:e(W).height-8}})),Gt="(".concat(Dn.dropPreviewDepth," - 1) * ").concat(Dn.gutterWidth),Lt=(0,bn.X)({root:[wn.l0.position.absolute,wn.l0.top(0),wn.l0.left(0),wn.l0.borderRadius(8),{pointerEvents:"none",transform:"translate(calc(".concat(Gt,"), ").concat(Dn.dropPreviewY,")"),width:"calc(100% - ".concat(Gt,")"),height:Dn.dropPreviewHeight,opacity:Dn.dropPreviewOpacity,outline:"1px dashed "+wn.TV.accentPrimaryDefault,outlineOffset:-1}]}),Bt=(0,a.memo)((function(){var e,n,t,i=h(Ft),u=h(Yt),l=(0,a.useRef)(null);(0,Tn.j)(l,i,(function(i){var o;return o={},(0,r.Z)(o,_n.dropPreviewY,(null!==(e=null===i||void 0===i?void 0:i.y)&&void 0!==e?e:0)+"px"),(0,r.Z)(o,_n.dropPreviewHeight,(null!==(n=null===i||void 0===i?void 0:i.height)&&void 0!==n?n:0)+"px"),(0,r.Z)(o,_n.dropPreviewDepth,null!==(t=null===i||void 0===i?void 0:i.depth.toString())&&void 0!==t?t:"0"),o})),(0,Tn.j)(l,u,(function(e){return(0,r.Z)({},_n.dropPreviewOpacity,e?"1":"0")}));var c=(0,Pt.T)();return(0,o.tZ)(En.G,{style:{transition:c?void 0:"transform 140ms, width 140ms, height 140ms, opacity 140ms ease-out 60ms"},innerRef:l,css:Lt.root})})),Mt=(0,y.cn)(null,(function(e,n,t){if(null!==t){var r=!0,i=!1,o=void 0;try{for(var a,u=e(X)[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var l=(0,m.Z)(a.value,2),c=l[0],s=l[1];if(!(t.y<s.y)&&!(t.y>s.y+s.height))return n(Ut,c),s}}catch(f){i=!0,o=f}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}n(Ut,-1)}})),Wt=Je.z.object({type:Je.z.literal("nodes"),width:Je.z.number(),height:Je.z.number(),nodes:Je.z.array(Je.z.object({path:Je.z.string(),type:Je.z.nativeEnum(E.Tv)}))});function jt(){var e=v(Mt),n=v(Ut),t=(0,a.useRef)(null),r=(0,a.useRef)(null),i=(0,a.useRef)(null),o=g(zt),u=v(Ye),l=v(We),c=(0,a.useRef)(null),s=g(ge),f=g(Q),d=v(W),h=v(Ce),y=p(oe),w=(0,m.Z)((0,St.L)((function(){return{accept:[E.Tv.File,E.Tv.Directory,kt.FILE],canDrop:function(){return!0},hover:function(n,a){var u=i.current;if(u){r.current&&function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{scrollZoneSize:{w:50,h:50},scrollVelocity:{x:50,y:50},scrollUpdateThrottle:100},r=t.scrollZoneSize,i=t.scrollVelocity,o=t.scrollUpdateThrottle,a=Dt()((function(){var t=n.getClientOffset();if(!t)return[0,0];var o=t.x,a=t.y,u=e.getBoundingClientRect(),l=u.x,c=u.y,s=u.width,f=u.height,d=Math.min(s/2,r.w),p=Math.min(f/2,r.h),h=[[c,c+p],[c+f-p,c+f]],v=function(e,n){var t=(0,m.Z)(n,2),r=t[0],i=t[1];return qt()(e,r[0],r[1])?(e-r[1])/(r[1]-r[0]):qt()(e,i[0],i[1])?(e-i[0])/(i[1]-i[0]):0};return[v(o,[[l,l+d],[l+s-d,l+s]])*i.x,v(a,h)*i.y]}),o,{trailing:!1})();if(a){var u=(0,m.Z)(a,2),l=u[0],c=u[1];if(0!==l||0!==c){var s=e.scrollLeft,f=e.scrollTop,d=e.scrollWidth,p=e.scrollHeight,h=e.clientWidth,v=e.clientHeight;requestAnimationFrame((function(){e.scrollTop=Nt(0,d-h,s+l),e.scrollTop=Nt(0,p-v,f+c)}))}}}(r.current,a);var l=a.getClientOffset();if(l){var d,p=e({x:l.x-u.x,y:l.y-u.y+o()});p?"file"===p.row.type||"upload"===p.row.type?t.current=(0,x.Il)(p.row.path)||Z.Ql:"dir"===p.row.type?t.current=p.row.path:t.current=p.row.dir:t.current=f();var v="nodes"!==n.type||(0,x.RQ)(n.nodes).every((function(e){return Be(e,null!==(d=t.current)&&void 0!==d?d:f())}));if("dir"===(null===p||void 0===p?void 0:p.row.type)){var g=p.row.path;if(c.current){if(c.current.dir===g)return;clearTimeout(c.current.timer),c.current=null}if(v){var y=setTimeout((function(){var e;(null===(e=s().get(g))||void 0===e?void 0:e.expanded)||h(g)}),200);c.current={dir:g,timer:y}}}else c.current&&(clearTimeout(c.current.timer),c.current=null)}}},drop:function(e,n){var r,i=null!==(r=t.current)&&void 0!==r?r:f();if("nodes"===e.type)return l({to:i,nodes:e.nodes}),void(t.current=null);e.dirContent.then((function(e){u({parentPath:i===Z.Ql?void 0:i,files:e.filter(Boolean)})})),t.current=null},collect:function(e){return{isOver:e.isOver()}}}}),[]),2),b=w[0].isOver,T=w[1],S=v(Yt);(0,a.useEffect)((function(){if(S(b),b){var e,o=null===(e=r.current)||void 0===e?void 0:e.getBoundingClientRect();return i.current=o?{x:o.x,y:o.y}:null,void(o&&d({width:o.width,height:o.height}))}c.current&&(clearTimeout(c.current.timer),c.current=null),t.current=null,n(null)}),[S,b,n,d]);var R=v(zt);return(0,a.useEffect)((function(){var e=r.current;if(e){var n=Dt()((function(){R(e.scrollTop)}),200);return e.addEventListener("scroll",n),function(){n.cancel(),e.removeEventListener("scroll",n)}}}),[R]),{dropRef:y?void 0:T,containerRef:r}}var Ht=(0,y.cn)(null,(function(e,n,t){n(Pe,(function(e){return(0,T.ZP)(e,(function(e){e.set(t.path,t.type)}))}));var r=[t];if(e(qe))return r;var i=!0,o=!1,a=void 0;try{for(var u,l=e(Pe)[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var c=(0,m.Z)(u.value,2),s=c[0],f=c[1];s!==t.path&&r.push({path:s,type:f})}}catch(d){o=!0,a=d}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}return r}));function Xt(e){var n=v(Ut),t=v(Ht),r=p(oe),i=(0,a.useRef)(null),o=(0,m.Z)((0,Rt.c)({type:e.type,item:function(){var n,r,o=t(e),a=null!==(r=null===(n=i.current)||void 0===n?void 0:n.getBoundingClientRect())&&void 0!==r?r:{width:160,height:32};return{nodes:o,type:"nodes",width:a.width,height:a.height}},collect:function(n){var t=n.getItem();return{isDragging:Boolean("nodes"===(null===t||void 0===t?void 0:t.type)&&t.nodes.some((function(n){return n.path===e.path})))}},end:function(){n(null)}}),3),u=o[0],l=o[1],c=o[2],s=u.isDragging;return(0,It.K)(c),{isDragging:s,dragRef:r?void 0:l,sizeRef:i}}var Qt=(0,bn.X)({root:[wn.l0.position.absolute,{left:0,top:0,transform:"translate(".concat(Dn.dragPreviewX,", ").concat(Dn.dragPreviewY,")"),pointerEvents:"none"}],item:[wn.l0.backgroundColor.backgroundHighest,wn.l0.flex.row,wn.l0.align.center,wn.l0.shadow(3),In,{height:Dn.rowHeight,borderRadius:Dn.borderRadius}],icon:[An,{marginRight:Dn.iconTextGap}],text:[Pn,wn.l0.flex.growAndShrink(1),{color:Dn.statusColor}],count:[Pn,wn.l0.backgroundColor.accentPrimaryDimmest,wn.l0.color.accentPrimaryStrongest,wn.l0.fontWeight.medium,wn.l0.position.absolute,wn.l0.left("calc(50% - 4px)"),wn.l0.top("calc(100% - 4px)"),wn.l0.borderRadius("full"),wn.l0.px(4),wn.l0.center,{fontSize:Dn.fontSizeSmall}]}),Vt=(0,a.memo)((function(e){var n=(0,a.useRef)(null),t=Fn(),i=h(Kt);return(0,Tn.j)(n,i,(function(e){var n;return n={},(0,r.Z)(n,_n.dragPreviewX,(e?e.x:0)+"px"),(0,r.Z)(n,_n.dragPreviewY,(e?e.y:0)+"px"),n})),(0,Tn.j)(n,t.horizontalPadding,(function(e){return(0,r.Z)({},_n.horizontalPadding,e+"px")})),(0,Tn.j)(n,t.fontSize,(function(e){return(0,r.Z)({},_n.fontSize,e+"px")})),(0,Tn.j)(n,t.fontSizeSmall,(function(e){return(0,r.Z)({},_n.fontSizeSmall,e+"px")})),(0,Tn.j)(n,t.iconSize,(function(e){return(0,r.Z)({},_n.iconSize,e+"px")})),(0,Tn.j)(n,t.iconTextGap,(function(e){return(0,r.Z)({},_n.iconTextGap,e+"px")})),(0,Tn.j)(n,t.borderRadius,(function(e){return(0,r.Z)({},_n.borderRadius,e+"px")})),(0,Tn.j)(n,t.gutterWidth,(function(e){return(0,r.Z)({},_n.gutterWidth,e+"px")})),(0,o.tZ)(En.G,{innerRef:n,css:Qt.root,children:(0,o.BX)(En.G,{css:Qt.item,style:{width:e.width,height:e.height},children:[(0,o.tZ)(En.G,{css:Qt.icon,children:e.type===E.Tv.File?(0,o.tZ)(Vn.Z,{path:e.path}):(0,o.tZ)(Kn.Z,{})}),(0,o.tZ)(En.G,{css:Qt.text,children:(0,x.UO)(e.path)}),e.count>1?(0,o.tZ)(En.G,{css:Qt.count,children:e.count}):null]})})})),Kt=(0,y.cn)(null),Yt=((0,y.cn)((function(e){return null!==e(Kt)})),(0,y.cn)(!1));function $t(){var e=(0,Ct.f)((function(e){return{item:e.getItem(),isDragging:e.isDragging(),initialOffset:e.getInitialSourceClientOffset(),currentOffset:e.getSourceClientOffset()}})),n=e.isDragging,t=e.item,r=e.currentOffset,i=v(Kt);if((0,a.useEffect)((function(){i(r?{x:r.x,y:r.y}:null)}),[i,r]),!n)return null;var u=Wt.safeParse(t);if(!u.success)return null;var l=u.data,c=l.nodes,s=l.width,f=l.height,d=(0,m.Z)(c,1)[0];return d?(0,At.createPortal)((0,o.tZ)(Vt,{type:d.type,path:d.path,count:c.length,width:s,height:f}),document.body):null}var Jt=(0,bn.X)({root:[{marginLeft:"auto",paddingLeft:Dn.horizontalPadding}],svg:[{transform:"rotate(-90deg)",transformOrigin:"center center","& .inner-cirlce":{strokeDashoffset:Dn.strokeDashoffset}}]});function er(e){var n=p(ae)/2,t=n/2,i=2*t*Math.PI,u=(0,a.useRef)(null);return(0,Tn.j)(u,e.progress,(function(e){return(0,r.Z)({},_n.strokeDashoffset,(i-e*i).toString())})),(0,o.tZ)(En.G,{innerRef:u,css:Jt.root,children:(0,o.BX)("svg",{css:Jt.svg,height:2*n,width:2*n,children:[(0,o.tZ)("circle",{fill:wn.TV.backgroundHigher,r:n,cx:n,cy:n}),(0,o.tZ)("circle",{className:"inner-cirlce",stroke:wn.TV.foregroundDimmest,fill:"transparent",strokeWidth:n,strokeDasharray:i+" "+i,r:t,cx:n,cy:n})]})})}var nr,tr,rr,ir=t(49760),or=(nr={},(0,r.Z)(nr,ir.h.ADDED,"A"),(0,r.Z)(nr,ir.h.UNTRACKED,"A"),(0,r.Z)(nr,ir.h.MODIFIED,"M"),(0,r.Z)(nr,ir.h.DELETED,"D"),(0,r.Z)(nr,ir.h.RENAMED,"R"),(0,r.Z)(nr,ir.h.COPIED,"C"),nr),ar=(tr={},(0,r.Z)(tr,ir.h.ADDED,wn.TV.greenDimmest),(0,r.Z)(tr,ir.h.UNTRACKED,wn.TV.greenDimmest),(0,r.Z)(tr,ir.h.MODIFIED,wn.TV.yellowDimmest),(0,r.Z)(tr,ir.h.DELETED,wn.TV.redDimmest),(0,r.Z)(tr,ir.h.RENAMED,wn.TV.tealDimmest),(0,r.Z)(tr,ir.h.COPIED,wn.TV.limeDimmest),tr),ur=(rr={},(0,r.Z)(rr,ir.h.ADDED,wn.TV.greenStrongest),(0,r.Z)(rr,ir.h.UNTRACKED,wn.TV.greenStrongest),(0,r.Z)(rr,ir.h.MODIFIED,wn.TV.yellowStrongest),(0,r.Z)(rr,ir.h.DELETED,wn.TV.redStrongest),(0,r.Z)(rr,ir.h.RENAMED,wn.TV.tealStrongest),(0,r.Z)(rr,ir.h.COPIED,wn.TV.limeStrongest),rr);function lr(e){return e===ir.h.ADDED||e===ir.h.UNTRACKED||e===ir.h.MODIFIED||e===ir.h.DELETED||e===ir.h.RENAMED||e===ir.h.COPIED}var cr={color:Dn.statusColor,fontSize:Dn.fontSizeSmall,minWidth:Dn.dirStatusIconSize,height:Dn.dirStatusIconSize},sr=(0,bn.X)({fileIcon:[wn.l0.fontWeight.bold,wn.l0.px(2),wn.l0.center,cr],directoryCountIcon:[wn.l0.fontWeight.medium,wn.l0.borderRadius(4),wn.l0.px(2),wn.l0.center,cr,{backgroundColor:Dn.statusBackgroundColor}]});function fr(e){return(0,o.tZ)(En.G,{css:sr.fileIcon,children:(0,o.tZ)(En.G,{children:e.text})})}function dr(e){return(0,o.tZ)(En.G,{css:sr.directoryCountIcon,children:(0,o.tZ)(En.G,{children:e.count})})}function pr(e){return p((0,Cn.Z)((function(){return(0,B.kv)(V,(function(n){return n?function(e,n){var t=null===e||void 0===e?void 0:e.get(n);if(!t)return null;var r=null;return t.worktree!==ir.h.UNMODIFIED?r=t.worktree:t.index!==ir.h.UNMODIFIED&&(r=t.index),r&&lr(r)?{color:ur[r],text:or[r]}:null}(n,e):null}),xn())}),[e]))}function hr(e){var n=(0,Cn.Z)((function(){return(0,B.kv)(V,(function(n){return n?function(e,n){var t=[],r=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var l=(0,m.Z)(a.value,2),c=l[0],s=l[1],f=s.index,d=s.worktree;(0,D.yr)(n,c)&&t.push({path:c,index:f,worktree:d})}}catch(v){i=!0,o=v}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}if(0===t.length)return null;var p=t.every((function(e){return e.index===ir.h.ADDED||e.worktree===ir.h.UNTRACKED}))?ir.h.ADDED:ir.h.MODIFIED;if(!lr(p))return null;var h=t.length;return{color:ur[p],backgroundColor:ar[p],count:h}}(n,e):null}),xn())}),[e]);return p(n)}function vr(e){var n=(0,m.Z)(function(e){var n,t=g(re),r=(0,a.useState)(null),i=r[0],o=r[1],u=(0,x.Il)(e.path),l=(0,x.UO)(e.path),c=v(K),s=v(H),f=(0,a.useState)(l),d=f[0],h=f[1],m=(0,a.useState)(!1),y=m[0],T=m[1],S=(0,Cn.Z)((function(){return(0,B.kv)(ge,(function(e){var n;return null===(n=e.get(u||Z.Ql))||void 0===n?void 0:n.children}))}),[u]),R=d!==l,C=p(S),k=R?(0,On.z)({fileName:d,siblingNames:null!==(n=null===C||void 0===C?void 0:C.map((function(e){return e.filename})))&&void 0!==n?n:[],parentPath:u}):null,_=function(){var n=(0,w.Z)((function(n){var r,i,a,f;return(0,b.__generator)(this,(function(d){switch(d.label){case 0:return k?[2]:n&&n!==l?(T(!0),i=(r=u?u+"/":null)?r+n:n,a=t().fs,e.type!==E.Tv.Directory?[3,2]:[4,a.moveDir(e.path,i)]):[2];case 1:return f=d.sent(),[3,4];case 2:return[4,a.moveFile(e.path,i)];case 3:f=d.sent(),d.label=4;case 4:return f.error?(o("Something went wrong"),T(!1),[2]):(c(null),s(i),[2])}}))}));return function(e){return n.apply(this,arguments)}}();return[{canRename:Boolean(d)&&R&&!k,value:d,renaming:y,error:i||k,siblings:C},{setValue:h,rename:_,cancel:function(){c(null),s(e.path)}}]}({path:e.path,type:e.fileType}),2),t=n[0],r=n[1],i=r.setValue,u=r.rename,l=r.cancel,c=(0,a.useRef)(null),s=(0,a.useRef)(t.value);return(0,a.useEffect)((function(){if(c.current){var e=s.current;if(e){var n=e.lastIndexOf(".");-1===n&&(n=e.length),c.current.focus(),c.current.setSelectionRange(0,n)}}}),[]),(0,o.tZ)(Et,{siblings:t.siblings?t.siblings.filter((function(n){return n.filename!==(0,x.UO)(e.path)})):[],type:"rename",inputRef:c,loading:t.renaming,error:t.error,value:t.value,fileType:e.fileType,onBlur:function(e){t.canRename?u(e.currentTarget.value):t.error||l()},onChange:function(e){i(e.currentTarget.value)},onKeyDown:function(e){"Escape"!==e.key?"Enter"===e.key&&(t.canRename?u(e.currentTarget.value):t.error||l()):l()},onSuggestion:function(e){i(e),u(e)}})}var gr=t(70804),mr=[wn.l0.position.absolute,wn.l0.top(0),wn.l0.left(0),{width:"calc(100% - ".concat(Dn.rowLeftIndent,")"),height:Dn.rowHeight,transform:"translateY(".concat(Dn.rowY,")"),marginLeft:Dn.rowLeftIndent}],yr=(0,bn.X)({divider:(0,i.Z)(mr).concat([In,wn.l0.flex.growAndShrink(1),wn.l0.justify.center]),dividerInner:[{borderTop:"1px dashed",borderColor:wn.TV.outlineDimmest,height:"70%",justifyContent:"end"}],dividerText:[wn.l0.truncate,wn.l0.color.foregroundDimmer,{fontSize:Dn.fontSizeSmall}],error:(0,i.Z)(mr).concat([wn.l0.rowWithGap(4),wn.l0.align.center,In]),emptyDir:(0,i.Z)(mr).concat([In,wn.l0.color.foregroundDimmest,wn.l0.justify.center,{paddingLeft:Dn.iconSize,paddingRight:Dn.horizontalPadding}]),row:(0,i.Z)(mr).concat([wn.l0.flex.growAndShrink(1),wn.l0.flex.row,wn.l0.align.center,nt.gU.nofill,{backgroundColor:Dn.nodeBackgroundColor,borderRadius:Dn.borderRadius,cursor:"pointer","&:focus":{boxShadow:"0 0 0 2px "+wn.TV.accentPrimaryDefault,zIndex:1},"@media (hover: hover)":(0,r.Z)({},_n.contextMenuButtonDisplay,"none"),"&:hover, &:active, &:focus":(0,r.Z)({},_n.contextMenuButtonDisplay,"flex"),transitionDuration:"0ms"}]),rowContent:[wn.l0.flex.row,wn.l0.align.center,wn.l0.flex.growAndShrink(1),In],uploadRow:(0,i.Z)(mr).concat([wn.l0.flex.growAndShrink(1),wn.l0.align.center,wn.l0.flex.row,wn.l0.align.center,In,{backgroundColor:Dn.nodeBackgroundColor,borderRadius:Dn.borderRadius}]),createRow:(0,i.Z)(mr).concat([wn.l0.justify.center]),icon:[An,{marginRight:Dn.iconTextGap}],fileInput:[wn.l0.flex.row,wn.l0.align.center],text:[Pn,wn.l0.flex.growAndShrink(1),{color:Dn.statusColor}],contextMenuButton:[wn.l0.reset.button,wn.l0.height("100%"),wn.l0.center,wn.l0.cursor.pointer,nt.gU.filled,An,{display:Dn.contextMenuButtonDisplay,borderRadius:"0 ".concat(Dn.borderRadius," ").concat(Dn.borderRadius," 0"),transitionDuration:"0ms"}]});function wr(e){var n=function(e){var n=(0,Cn.Z)((function(){var n;return(0,y.cn)((function(t){return null!==(n=t(M).get(e))&&void 0!==n?n:null}))}),[e]);return p(n)}(e.path),t=p(pe);return(null===n||void 0===n?void 0:n.length)?(0,o.tZ)(Jn.Z,{size:t,activeUsers:n}):null}function br(e){var n,t=(n=e.path,p((0,Cn.Z)((function(){return(0,y.cn)((function(e){var t=[],r=!0,o=!1,a=void 0;try{for(var u,l=e(M)[Symbol.iterator]();!(r=(u=l.next()).done);r=!0){var c,s=(0,m.Z)(u.value,2),f=s[0],d=s[1];if(!(0,D.yr)(n,f))return;(c=t).push.apply(c,(0,i.Z)(d))}}catch(p){o=!0,a=p}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return t.length?t:null}))}),[n])));return(null===t||void 0===t?void 0:t.length)?(0,o.tZ)(Jn.Z,{activeUsers:t}):null}function Er(e){return(0,o.tZ)(En.G,{title:"menu",tag:"button",css:yr.contextMenuButton,onClick:e.onClick,children:(0,o.tZ)(gr.Z,{})})}function Tr(e,n){var t=function(e){return h((0,Cn.Z)((function(){return(0,B.kv)(Pe,(function(n){return n.has(e)}))}),[e]))}(n);(0,Tn.j)(e,t,(function(e){return(0,r.Z)({},_n.nodeBackgroundColor,e?wn.TV.backgroundHigher:"transparent")})),(0,a.useEffect)((function(){var n=function(n){e.current&&e.current.setAttribute("aria-selected",n?"true":"false")};return n(t.current),t.subscribe(n)}),[e,t,n])}var Zr=(0,a.memo)((function(e){var n=(0,a.useRef)(null),t=Wn(e.index),i=Ln(e.path),u=Gn(e.path),l=function(e){var n=(0,a.useState)(e),t=n[0],r=n[1];return(0,a.useEffect)((function(){if(e){var n=setTimeout((function(){return r(!0)}),500);return function(){clearTimeout(n)}}r(!1)}),[e]),t}(u),c=Hn(),s=p(Q),f=Bn(e.path),d=function(e){var n=v(zn);return(0,Cn.Z)((function(){return function(t){n({event:t,path:e})}}),[n,e])}(e.path),h=(0,m.Z)(jn({path:e.path,index:e.index}),2),g=h[0],y=h[1],w=e.path===s&&u,b=w?_:(0,x.UO)(e.path),T=Xt({path:e.path,type:E.Tv.Directory}),Z=T.dragRef,S=T.sizeRef,R=T.isDragging;Tr(n,e.path);var C,k,D,I=hr(e.path),A=p(ie);return(0,o.BX)(En.G,{style:(0,Qn.Z)((0,Xn.Z)({},null===t||void 0===t?void 0:t.style),(D={},(0,r.Z)(D,_n.statusColor,null!==(C=null===I||void 0===I?void 0:I.color)&&void 0!==C?C:wn.TV.foregroundDimmer),(0,r.Z)(D,_n.statusBackgroundColor,null===I||void 0===I?void 0:I.backgroundColor),(0,r.Z)(D,"opacity",R?.1:void 0),D)),tabIndex:f,role:"treeitem",dataCy:"filetree-entity","aria-expanded":i,"aria-level":(null!==(k=null===t||void 0===t?void 0:t.depth)&&void 0!==k?k:0)+1,css:yr.row,onFocus:function(){return y(e.path)},innerRef:(0,rt.l)(n,g,S,e.pending?void 0:Z),onContextMenu:A?function(n){A(n,{path:e.path,type:E.Tv.Directory})}:void 0,onKeyDown:e.pending?void 0:function(n){"Enter"===n.key&&c(e.path)},onClick:e.pending?void 0:function(e){e.currentTarget===e.target&&d(e)},children:[(0,o.BX)(En.G,{title:e.path,css:yr.rowContent,onClick:e.pending?void 0:d,children:[(0,o.tZ)(En.G,{css:yr.icon,children:w||l&&!i?(0,o.tZ)($n.Z,{}):(0,o.tZ)(o.HY,{children:i?(0,o.tZ)(Yn.Z,{}):(0,o.tZ)(Kn.Z,{})})}),(0,o.tZ)(En.G,{css:yr.text,children:b}),I?(0,o.tZ)(dr,{count:I.count}):null,i?null:(0,o.tZ)(br,{path:e.path})]}),A?(0,o.tZ)(Er,{onClick:function(n){A(n,{path:e.path,type:E.Tv.Directory})}}):null]})})),xr=(0,a.memo)((function(e){var n=(0,a.useRef)(null),t=Wn(e.index),i=function(e){var n=g(re),t=v(Ne),r=v(H);return(0,Cn.Z)((function(){return{onClick:function(i){var o=n(),a=o.onFileSelect,u=o.multiselectModifierKey,l=u?Nn(i,u):void 0;t({node:{path:e,type:E.Tv.File},mode:l}),r(e),l||a({path:e,event:i,type:"click"})},onDoubleClick:function(t){var r=n().onFileDoubleClick;null===r||void 0===r||r(t,e)}}}),[e,n,r,t])}(e.path),u=i.onClick,l=i.onDoubleClick,c=Bn(e.path),s=Hn(),f=(0,m.Z)(jn({path:e.path,index:e.index}),2),d=f[0],h=f[1],y=(0,x.UO)(e.path),w=Xt({path:e.path,type:E.Tv.File}),b=w.dragRef,T=w.sizeRef,Z=w.isDragging;Tr(n,e.path);var S,R,C,k=pr(e.path),_=p(ie);return(0,o.BX)(En.G,{style:(0,Qn.Z)((0,Xn.Z)({},null===t||void 0===t?void 0:t.style),(C={},(0,r.Z)(C,_n.statusColor,null!==(S=null===k||void 0===k?void 0:k.color)&&void 0!==S?S:wn.TV.foregroundDimmer),(0,r.Z)(C,"opacity",Z?.1:void 0),C)),tabIndex:c,dataCy:"filetree-entity",css:yr.row,onFocus:function(){return h(e.path)},innerRef:(0,rt.l)(n,d,T,e.pending?void 0:b),role:"treeitem","aria-label":y,"aria-level":(null!==(R=null===t||void 0===t?void 0:t.depth)&&void 0!==R?R:0)+1,onDoubleClick:e.pending?void 0:l,onContextMenu:_?function(n){_(n,{path:e.path,type:E.Tv.File})}:void 0,onKeyDown:e.pending?void 0:function(n){"Enter"===n.key&&s(e.path)},onClick:e.pending?void 0:function(e){e.currentTarget===e.target&&u(e)},children:[(0,o.BX)(En.G,{title:e.path,css:yr.rowContent,onClick:e.pending?void 0:u,children:[(0,o.tZ)(En.G,{css:yr.icon,children:(0,o.tZ)(Vn.Z,{path:e.path})}),(0,o.tZ)(En.G,{css:yr.text,children:y}),k?(0,o.tZ)(fr,{text:k.text}):null,(0,o.tZ)(wr,{path:e.path})]}),_?(0,o.tZ)(Er,{onClick:function(n){_(n,{path:e.path,type:E.Tv.File})}}):null]})})),Sr=(0,a.memo)((function(e){var n=Wn(e.index);return(0,o.tZ)(En.G,{css:yr.divider,style:null===n||void 0===n?void 0:n.style,role:"treeitem",children:(0,o.tZ)(En.G,{css:yr.dividerInner,children:(0,o.tZ)(En.G,{css:yr.dividerText,children:e.label})})})})),Rr=(0,a.memo)((function(e){var n=Wn(e.index);return(0,o.BX)(En.G,{css:yr.error,style:null===n||void 0===n?void 0:n.style,role:"treeitem",children:[(0,o.tZ)(et.Z,{}),(0,o.tZ)(tt.xv,{multiline:!1,children:e.message})]})})),Cr=(0,a.memo)((function(e){var n=Wn(e.index);return(0,o.tZ)(En.G,{css:yr.emptyDir,style:null===n||void 0===n?void 0:n.style,role:"treeitem",children:(0,o.tZ)(En.G,{css:yr.text,children:k})})})),kr=(0,a.memo)((function(e){var n=Wn(e.index);return(0,o.tZ)(En.G,{css:yr.createRow,style:null===n||void 0===n?void 0:n.style,role:"treeitem",children:(0,o.tZ)(Zt,{dir:e.dir})})})),_r=(0,a.memo)((function(e){var n=Wn(e.index),t=(0,x.UO)(e.path);return(0,o.tZ)(En.G,{style:null===n||void 0===n?void 0:n.style,css:yr.createRow,role:"treeitem","aria-label":t,children:(0,o.tZ)(vr,{path:e.path,fileType:e.fileType})})})),Dr=(0,a.memo)((function(e){var n=Wn(e.index),t=(0,x.UO)(e.path);return(0,o.BX)(En.G,{style:null===n||void 0===n?void 0:n.style,css:yr.uploadRow,role:"treeitem","aria-label":t,children:[(0,o.tZ)(En.G,{css:yr.icon,children:(0,o.tZ)(Vn.Z,{path:e.path})}),(0,o.tZ)(En.G,{css:yr.text,children:t}),(0,o.tZ)(er,{progress:e.progress})]})})),Ir=(0,a.memo)((function(e){var n=Un(e.index);return n?"error"===n.type?(0,o.tZ)(Rr,{index:e.index,message:n.message}):"divider"===n.type?(0,o.tZ)(Sr,{index:e.index,label:n.label}):"emptyDir"===n.type?(0,o.tZ)(Cr,{index:e.index}):"create"===n.type?(0,o.tZ)(kr,{index:e.index,dir:n.dir}):"upload"===n.type?(0,o.tZ)(Dr,{index:e.index,path:n.path,progress:n.progress}):n.rename?(0,o.tZ)(_r,{index:e.index,path:n.path,fileType:"file"===n.type?E.Tv.File:E.Tv.Directory}):"file"===n.type?(0,o.tZ)(xr,{index:e.index,path:n.path,pending:Boolean(n.pending)}):(0,o.tZ)(Zr,{index:e.index,path:n.path,pending:Boolean(n.pending)}):null})),Ar=[Dn.horizontalPadding,Dn.rowLeftIndent,Dn.iconSize,Dn.iconTextGap].join(" + "),Pr=(0,bn.X)({root:[wn.l0.overflow("hidden"),wn.l0.height(0),{pointerEvents:"none"}],file:[{paddingLeft:"calc(".concat(Ar,")"),paddingRight:Dn.horizontalPadding}]}),Or=(0,a.memo)((function(){var e=p(_e);return e?(0,o.tZ)(En.G,{css:Pr.root,children:e.map((function(e){var n=e.type,t=e.text,i=e.depth,a=(0,r.Z)({},_n.rowLeftIndent,"calc(".concat(i," * ").concat(Dn.gutterWidth,")")),u=n+i;return"divider"===n?(0,o.tZ)(En.G,{style:a,css:yr.dividerInner,children:(0,o.tZ)(tt.xv,{css:yr.dividerInner,multiline:!1,children:t.toUpperCase()})},u):(0,o.tZ)(En.G,{css:Pr.file,style:a,children:"create"===n?(0,o.tZ)(xt,{create:function(){}}):(0,o.tZ)(En.G,{css:yr.text,children:t.toUpperCase()})},u)}))}):null})),qr=(t(88541),(0,bn.X)({content:[wn.l0.p(2),wn.l0.position.relative,{overflowY:"auto",height:"100%",minHeight:Dn.minHeight}],scroll:[{position:"relative",height:Dn.scrollHeight}],root:[wn.l0.rowWithGap(0),wn.l0.align.center],gutter:[wn.l0.position.absolute,wn.l0.top(0),wn.l0.left(0),wn.l0.reset.button,wn.l0.align.end,wn.l0.cursor.pointer,{width:Dn.gutterWidth,"& > div":[wn.l0.height("100%"),wn.l0.width(1),{marginRight:"25%",opacity:.2,backgroundColor:wn.TV.foregroundDimmest}],"&:hover > div":{backgroundColor:wn.TV.accentPrimaryDefault,opacity:1}}]})),Nr=(0,a.memo)((function(e){var n=p(X),t=Fn();(0,Tn.j)(e.scrollRef,t.fontSize,(function(e){var n;return n={},(0,r.Z)(n,_n.fontSize,e+"px"),(0,r.Z)(n,_n.dirStatusIconSize,e+"px"),n})),(0,Tn.j)(e.scrollRef,t.fontSizeSmall,(function(e){return(0,r.Z)({},_n.fontSizeSmall,e+"px")})),(0,Tn.j)(e.scrollRef,t.iconSize,(function(e){return(0,r.Z)({},_n.iconSize,e+"px")})),(0,Tn.j)(e.scrollRef,t.iconTextGap,(function(e){return(0,r.Z)({},_n.iconTextGap,e+"px")})),(0,Tn.j)(e.scrollRef,t.horizontalPadding,(function(e){return(0,r.Z)({},_n.horizontalPadding,e+"px")})),(0,Tn.j)(e.scrollRef,t.borderRadius,(function(e){return(0,r.Z)({},_n.borderRadius,e+"px")})),(0,Tn.j)(e.scrollRef,t.scrollHeight,(function(e){return(0,r.Z)({},_n.scrollHeight,e+"px")})),(0,Tn.j)(e.scrollRef,t.gutterWidth,(function(e){return(0,r.Z)({},_n.gutterWidth,e+"px")})),(0,Tn.j)(e.scrollRef,t.minHeight,(function(e){return(0,r.Z)({},_n.minHeight,e+"px")}));var a=v(Te),u=jt(),l=u.dropRef,c=u.containerRef,s=v(ze),f=p(ie),d=p(Q);return(0,o.BX)(En.G,{css:qr.content,innerRef:(0,rt.l)(e.scrollRef,l,c),onKeyDown:a,onContextMenu:f?function(e){e.target===e.currentTarget&&f(e,{type:E.Tv.Directory,path:d})}:void 0,onClick:function(e){e.target===e.currentTarget&&s()},children:[(0,o.tZ)(Or,{}),(0,o.BX)(En.G,{css:qr.scroll,role:"tree",children:[(0,i.Z)(n.values()).map((function(e){var n=e.key,t=e.index;return(0,o.tZ)(Ir,{index:t},n)})),(0,o.tZ)(Ur,{}),(0,o.tZ)(Bt,{}),(0,o.tZ)($t,{})]})]})})),zr=(0,a.memo)((function(){var e=Mn().scrollRef;return yn(),function(){var e=p(pn),n=h(ge),t=v(hn);(0,a.useEffect)((function(){if(e){var r,i,o=null,a=null!==(r=window.requestIdleCallback)&&void 0!==r?r:window.requestAnimationFrame,u=null!==(i=window.cancelIdleCallback)&&void 0!==i?i:window.cancelAnimationFrame,l=tn()((function(){o&&u(o),o=a(t)}),1e3),c=n.subscribe(l);return document.addEventListener("visibilitychange",t),document.addEventListener("beforeunload",t),function(){l.cancel(),o&&cancelIdleCallback(o),document.removeEventListener("visibilitychange",t),document.removeEventListener("beforeunload",t),c(),t()}}}),[e,n,t])}(),(0,o.tZ)(Nr,{scrollRef:e})})),Ur=(0,a.memo)((function(){var e=p(ee),n=v(Se);return(0,o.tZ)(o.HY,{children:e.map((function(e){return(0,o.tZ)(En.G,{tag:"button",onClick:function(){return n(e.dir)},css:qr.gutter,style:{height:e.height,transform:"translate(calc(".concat(e.depth," * ").concat(Dn.gutterWidth,"), ").concat(e.y,"px)")},children:(0,o.tZ)(En.G,{})},"gutter"+e.dir+e.depth+e.y)}))})}));function Fr(e){return function(e){var n=(0,a.useState)((function(){var n,t=(0,y.MT)();t.set(re,e);var r,i=null!==(n=e.root)&&void 0!==n?n:Z.Ql,o=e.localCacheKey?ln(e.localCacheKey):null;o&&t.set(Y,o.scrollOffset);var a=null!==(r=null===o||void 0===o?void 0:o.dirInfo)&&void 0!==r?r:new Map;return a.has(i)||a.set(i,{expanded:!0}),t.set(ge,a),e.focusedPath&&t.set(H,e.focusedPath),{store:t,create:function(e,n){if(n)t.set(De,{parentPath:n,fileType:e});else{var r=i,o=t.get(Oe);(null===o||void 0===o?void 0:o.type)===E.Tv.File?r=(0,x.Il)(o.path)||Z.Ql:(null===o||void 0===o?void 0:o.type)===E.Tv.Directory&&(r=o.path),t.set(De,{parentPath:r,fileType:e})}},setPresenceState:function(e){t.set(M,e)},setFileStatus:function(e){t.set(V,e)},rename:function(e){t.set($,e)},move:function(e){t.set(We,e)},upload:function(e){t.set(Ye,e)},onLoad:function(n){var t=e.fs.watchDir(i,{onChange:function(){n({error:null}),t()},onError:function(e){n({error:e}),t()}});return t},select:function(e){return null===e?t.set(ze):t.set(Fe,e)},scrollToPath:function(e){return t.set(Le,e)},hasLocalCache:Boolean(o),getChildren:function(e){var n,r;return null!==(r=null===(n=t.get(ge).get(e))||void 0===n?void 0:n.children)&&void 0!==r?r:null},getSelectedNode:function(){return t.get(Oe)},getSelectedNodes:function(){return t.get(Pe)},deleteNodes:function(e){t.set(gn,e)}}})),t=n[0];(0,a.useEffect)((function(){t.store.set(re,e)}),[t.store,e]),(0,a.useEffect)((function(){var e=!0,n=!1,r=void 0;try{for(var i,o=t.store.get(ge)[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=(0,m.Z)(i.value,2),u=a[0];a[1].expanded&&t.store.set(Ce,u)}}catch(l){n=!0,r=l}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}return function(){var e=!0,n=!1,r=void 0;try{for(var i,o=t.store.get(ge)[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a,u=(0,m.Z)(i.value,2),c=(u[0],u[1]);null===(a=c.disposeWatcher)||void 0===a||a.call(c)}}catch(l){n=!0,r=l}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}}}),[t.store]);var r=(0,$e.Z)(e.onLoad);return(0,a.useEffect)((function(){return t.onLoad((function(e){var n;return null===(n=r.current)||void 0===n?void 0:n.call(r,e)}))}),[t,r]),t}(e)}function Gr(e){return(0,o.tZ)(f,{store:e.store,children:(0,o.tZ)(zr,{})})}},13902:function(e,n,t){t.d(n,{MY:function(){return v},WU:function(){return l},em:function(){return d},fN:function(){return h},j3:function(){return f},mJ:function(){return s},mV:function(){return c}});var r=t(2272),i=(t(18171),t(92153)),o=t(91398),a=t(29203),u=(0,o.cn)(new Map),l=(0,o.cn)(null,(function(e,n,t){var r=t.messageId,o=t.abortController,a=(0,i.ZP)(e(u),(function(e){e.set(r,o)}));n(u,a)})),c=(0,o.cn)(null,(function(e,n,t){var r=t.messageId,o=(0,i.ZP)(e(u),(function(e){e.delete(r)}));n(u,o)})),s=(0,o.cn)(null,(function(e,n){var t=(0,i.ZP)(e(u),(function(e){var n=!0,t=!1,i=void 0;try{for(var o,a=e.entries()[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=(0,r.Z)(o.value,2);u[0];u[1].abort()}}catch(l){t=!0,i=l}finally{try{n||null==a.return||a.return()}finally{if(t)throw i}}e.clear()}));n(u,t)})),f=function(){return(0,a.c1)(u).size>0},d=function(){return(0,a.$X)(s)},p=(0,o.cn)(new Set),h=(0,o.cn)(null,(function(e,n,t){var r=t.message,o=r.id,a=r.loading,u=(0,i.ZP)(e(p),(function(e){a?e.add(o):e.delete(o)}));n(p,u)})),v=function(){return(0,a.c1)(p).size>0}},21225:function(e,n,t){t.d(n,{Cp:function(){return s},ae:function(){return l},gm:function(){return u},xk:function(){return c}});var r=t(29203),i=t(91398),o=t(85234),a=t.n(o),u=(0,i.cn)(a()()),l=function(){return(0,r.c1)(u)},c=(0,i.cn)(null),s=function(){return(0,r.c1)(c)}},40207:function(e,n,t){t.d(n,{Cd:function(){return g},KI:function(){return p},Og:function(){return h},Oy:function(){return v},RN:function(){return c},YY:function(){return f},d$:function(){return l},nE:function(){return u},wK:function(){return d}});var r=t(72006),i=t(91398),o=t(92153),a=t(29203),u=(0,i.cn)(!1),l=function(){return(0,a.c1)(u)},c=function(){return(0,a.wM)(u)},s=(0,i.cn)({}),f=(0,i.cn)(null,(function(e,n,t){var i=t.id,a=t.debugInfo,u=e(s),l=(0,o.ZP)(u,(function(e){e[i]||(e[i]={}),e[i]=(0,r.Z)({},e[i],a)}));n(s,l)})),d=function(e){var n=e.messageId;return(0,a.c1)(s)[n]},p=(0,i.cn)(""),h=function(){return(0,a.c1)(p)},v=(0,i.cn)(""),g=function(){return(0,a.c1)(v)}},52364:function(e,n,t){t.d(n,{$C:function(){return P},Cd:function(){return p.Cd},Gd:function(){return V},J:function(){return K},Jc:function(){return I},Og:function(){return p.Og},Xq:function(){return q},ZT:function(){return W},gp:function(){return G},nB:function(){return L},ql:function(){return Q},z_:function(){return A},zu:function(){return O}});var r=t(88733),i=t(57135),o=t(72006),a=t(4405),u=t(96583),l=t(91398),c=t(85234),s=t.n(c),f=t(64918),d=t(29457),p=t(40207),h=t(54761),v=t(21225),g=t(39691),m=t(625),y=t(69365),w=t(92153),b=t(13902),E=t(11796),T=t(5293),Z=t(50959),x=t(82325),S=t(29203),R=t(63026),C=t(96028),k=t(47648),_=t(30929),D=(0,l.cn)(""),I=function(){return(0,S.wM)(D)},A=function(){return(0,S.Dm)(D)},P=function(){return(0,S.$X)(D)},O=function(){return(0,S.wM)(h.qw)},q=function(){return(0,S.Dm)(h.qw)},N=(0,l.cn)(new Set),z=(0,l.cn)(null,(function(e,n,t){var r=(0,w.ZP)(e(N),(function(e){e.add(t)}));n(N,r)})),U=(0,l.cn)(null,(function(e,n,t){var r=(0,w.ZP)(e(N),(function(e){e.delete(t)}));n(N,r)})),F=(0,l.cn)((function(e){return e(N).size>0})),G=function(){return(0,S.c1)(F)},L=function(){return(0,S.Dm)(F)};function B(e){return{user:e.attribution,message:e.text}}var M=(0,l.cn)(null,function(){var e=(0,i.Z)((function(e,n){return(0,u.__generator)(this,(function(e){return n(b.mJ),n(h.qw,[]),n(v.gm,s()()),n(_.r),[2]}))}));return function(n,t){return e.apply(this,arguments)}}()),W=function(){return(0,S.$X)(M)},j=(0,l.cn)(null,function(){var e=(0,i.Z)((function(e,n,t){var i,l,c,s,w,T,Z,x,S,R,C,k,_,D,I,A,P,O,q,N,z,U,F,G,L,M,W,j,H,X,Q,V,K;return(0,u.__generator)(this,(function(u){switch(u.label){case 0:i=t.chatInput,l=t.responseId,c=i.chatMessage,s=i.workspaceContext,w=i.messages,T=c.text,Z=c.type,x=c.codeReference,S="chat"===c.type?c.action:void 0,R=s.fileContext,C=s.mostRecentFile,(0,m.j)(m.U3.GHOSTWRITER_CHAT_MESSAGE_SENT,{type:Z}),k=e(v.gm),_=e(g.aK),D=e(g.gL),I={id:l,type:Z,codeReference:x,text:"",loading:!0,author:{username:"Ghostwriter",image:"/public/images/ghostwriter/blurple-circle.svg"},attribution:"Assistant"},A=new AbortController,n(b.WU,{messageId:l,abortController:A}),u.label=1;case 1:if(u.trys.push([1,15,16,17]),n(y.Et,!0),P=function(e){var n=function(e){return!e.loading&&!e.error};return e.filter((function(t,r){return!(r<e.length-1&&!n(e[r+1]))&&n(e[r])})).map(B)}(w),O=performance.now(),q=void 0,!(0,f.uL)(_))throw new Error("Invalid chat model");return N={fileContext:R,mostRecentFile:C},[4,fetch("/ai/chat2",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({chatHistory:P,message:{type:Z,text:T,action:S,codeReference:x},model:_,replId:D,chatId:k,context:N}),signal:A.signal})];case 2:if(200!==(z=u.sent()).status)throw new Error("Request failed");if(!z.body)throw new Error("Expected body on response object");U=void 0,F=(0,E.U)((0,E.n)(z.body)),G="",L=!1,M=!1,u.label=3;case 3:u.trys.push([3,8,9,14]),j=function(){var e=X.value,t=e.trim().split("\n\n").map((function(n){try{return JSON.parse(n)}catch(V){throw d.kg.error("Ghostwriter Chat Error parsing JSON client side",{streamResponse:e,failedToParse:n,error:V.message}),V}}));t.forEach((function(t){if(t.type===f.xA.Intent&&(U=t.intent),t.type===f.xA.Debug){var r=t;n(p.KI,r.fullPrompt),n(p.YY,{id:l,debugInfo:{fullPrompt:r.fullPrompt}}),n(p.YY,{id:l,debugInfo:{workspaceContext:N}})}if(t.type===f.xA.Error)throw d.kg.error("ghostwriter chat client response stream error",{replid:D,chatId:k,chatModel:_,messageId:l,originalResponse:e}),new Error("Sorry, I had an issue generating the response.");if(t.type===f.xA.Response){q||(q=performance.now()-O,d.kg.time("ghostwriter chat time to first stream",q,{replid:D,chatId:k,chatModel:_,messageId:l}),n(p.YY,{id:l,debugInfo:{timeToFirstStream:q}}));var i=t,o=i.stopReason;null!==i.stopReason&&(n(p.Oy,i.stopReason),n(p.YY,{id:l,debugInfo:{stopReason:i.stopReason}}),o=i.stopReason),G+=i.data,I={id:l,type:null!==Z&&void 0!==Z?Z:"chat",codeReference:x,text:G,intent:U,author:{username:"Ghostwriter",image:"/public/images/ghostwriter/blurple-circle.svg"},attribution:"Assistant",inferenceId:i.id,stopReason:o},n(h.Mk,{message:I})}}))},H=(0,r.Z)(F),u.label=4;case 4:return[4,H.next()];case 5:if(!(L=!(X=u.sent()).done))return[3,7];j(),u.label=6;case 6:return L=!1,[3,4];case 7:return[3,14];case 8:return Q=u.sent(),M=!0,W=Q,[3,14];case 9:return u.trys.push([9,,12,13]),L&&null!=H.return?[4,H.return()]:[3,11];case 10:u.sent(),u.label=11;case 11:return[3,13];case 12:if(M)throw W;return[7];case 13:return[7];case 14:return[3,17];case 15:return V=u.sent(),n(y.Et,!1),"AbortError"===V.name?(n(h.Mk,{message:(0,a.Z)((0,o.Z)({},I),{aborted:!0})}),[2]):(n(h.b9,{messageId:l,error:"Sorry, I had an issue generating the response."}),d.kg.error("ghostwriter chat client response error",{replid:D,chatId:k,chatModel:_,messageId:l,originalError:null!==(K=null===V||void 0===V?void 0:V.message)&&void 0!==K?K:V}),[3,17]);case 16:return n(b.mV,{messageId:l}),[7];case 17:return[2]}}))}));return function(n,t,r){return e.apply(this,arguments)}}()),H=(0,l.cn)(null,function(){var e=(0,i.Z)((function(e,n,t){var r,i,o,a,l,c,f,d,p,m,y,w;return(0,u.__generator)(this,(function(u){switch(u.label){case 0:return r=t.text,i=t.type,o=t.codeReference,a=(null===r||void 0===r?void 0:r.trim())||"",l=e(h.qw),(c=e(g.db))?("explainCode"===t.type?n(R.W,t.codeReference.filePath):"generateCode"===t.type?n(C.k8,t.codeReference.filePath):"transformCode"===t.type&&n(k.ev,t.codeReference.filePath),0===e(h.qw).length&&n(v.xk,Date.now()),f=s()(),d=s()(),n(z,f),p={id:f,type:i,codeReference:o,text:a,author:{username:c.username,image:c.image},attribution:"Human"},n(h.TC,{message:p}),m={id:d,type:i,codeReference:o,loading:!0,text:"Please wait while I think through your request\u2026",author:{username:"Ghostwriter",image:"/public/images/ghostwriter/blurple-circle.svg"},attribution:"Assistant"},n(h.OV,{message:m}),[4,e(g.Iu).promise]):[2];case 1:return u.sent(),[4,e(T.N0)()];case 2:y=u.sent(),w={type:i,text:a,codeReference:o},u.label=3;case 3:return u.trys.push([3,,5,6]),[4,n(j,{chatInput:{chatMessage:w,workspaceContext:y,messages:l},responseId:d})];case 4:return u.sent(),[3,6];case 5:return n(U,f),[7];case 6:return[2]}}))}));return function(n,t,r){return e.apply(this,arguments)}}()),X=(0,l.cn)(null,function(){var e=(0,i.Z)((function(e,n,t){var r,i,o,a,l,c,s,f,p,v,m,y,w;return(0,u.__generator)(this,(function(u){switch(u.label){case 0:return r=t.responseId,i=t.action,o=e(h.qw),a=o.findIndex((function(e){return e.id===r})),(l=-1!==a&&"Assistant"===o[a].attribution)?(c=o.slice(0,a),(s=c.pop())?(n(z,s.id),f=s.text,p=s.type,v=s.codeReference,m={id:r,type:p,codeReference:v,loading:!0,text:"Please wait while I think through your request\u2026",author:{username:"Ghostwriter",image:"/public/images/ghostwriter/blurple-circle.svg"},attribution:"Assistant"},n(h.Mk,{message:m}),[4,e(g.Iu).promise]):(d.kg.error("GW Chat error no human message before response message"),[2])):(d.kg.error("GW Chat error regenerate assistant message",{responseId:r,isResponseAssistantMessage:l}),[2]);case 1:return u.sent(),[4,e(T.N0)()];case 2:y=u.sent(),w={type:p,text:f,codeReference:v,action:i},u.label=3;case 3:return u.trys.push([3,,5,6]),[4,n(j,{chatInput:{chatMessage:w,messages:c,workspaceContext:y},responseId:r})];case 4:return u.sent(),[3,6];case 5:return n(U,s.id),[7];case 6:return[2]}}))}));return function(n,t,r){return e.apply(this,arguments)}}()),Q=function(){var e=(0,S.Uu)();return(0,x.lV)((0,Z.useCallback)(function(){var e=(0,i.Z)((function(e,n,t){return(0,u.__generator)(this,(function(e){switch(e.label){case 0:return[4,n(H,t.chatMessage)];case 1:return[2,e.sent()]}}))}));return function(n,t,r){return e.apply(this,arguments)}}(),[]),{store:e})},V=function(){var e=(0,S.Uu)();return(0,x.lV)((0,Z.useCallback)(function(){var e=(0,i.Z)((function(e,n,t,r){return(0,u.__generator)(this,(function(e){switch(e.label){case 0:return[4,n(X,{responseId:t,action:r})];case 1:return[2,e.sent()]}}))}));return function(n,t,r,i){return e.apply(this,arguments)}}(),[]),{store:e})},K=function(){var e=(0,b.j3)(),n=(0,b.MY)();return G()&&e&&!n}},63026:function(e,n,t){t.d(n,{W:function(){return a},j:function(){return l}});var r=t(29203),i=t(54761),o=t(91398),a=(0,o.cn)(null,(function(e,n,t){var r=e(i.qw).filter((function(e){var n;return!("explainCode"===e.type&&(null===(n=e.codeReference)||void 0===n?void 0:n.filePath)===t)}));n(i.qw,r)})),u=(0,o.cn)((function(e){return e(i.qw).filter((function(e){return"Assistant"===e.attribution&&"explainCode"===e.type}))})),l=function(e){return(0,r.c1)(u).find((function(n){return n.codeReference&&n.codeReference.filePath===e}))}},96028:function(e,n,t){t.d(n,{eD:function(){return c},k8:function(){return a},oQ:function(){return l}});var r=t(29203),i=t(54761),o=t(91398),a=(0,o.cn)(null,(function(e,n,t){var r=e(i.qw).filter((function(e){var n;return!("generateCode"===e.type&&(null===(n=e.codeReference)||void 0===n?void 0:n.filePath)===t)}));n(i.qw,r)})),u=(0,o.cn)((function(e){return e(i.qw).filter((function(e){return"Assistant"===e.attribution&&"generateCode"===e.type}))})),l=function(e){return(0,r.c1)(u).find((function(n){return n.codeReference&&n.codeReference.filePath===e}))},c=function(){return(0,r.$X)(a)}},47648:function(e,n,t){t.d(n,{Ef:function(){return c},ev:function(){return a},iH:function(){return l}});var r=t(29203),i=t(54761),o=t(91398),a=(0,o.cn)(null,(function(e,n,t){var r=e(i.qw).filter((function(e){var n;return!("transformCode"===e.type&&(null===(n=e.codeReference)||void 0===n?void 0:n.filePath)===t)}));n(i.qw,r)})),u=(0,o.cn)((function(e){return e(i.qw).filter((function(e){return"Assistant"===e.attribution&&"transformCode"===e.type}))})),l=function(e){return(0,r.c1)(u).find((function(n){return n.codeReference&&n.codeReference.filePath===e}))},c=function(){return(0,r.$X)(a)}},30929:function(e,n,t){t.d(n,{g:function(){return l},r:function(){return c}});var r=t(72338),i=t(29203),o=t(91398),a=t(50959),u=(0,o.cn)(new Set),l=function(e){var n=(0,i.c1)(u);(0,a.useEffect)((function(){if(e)return n.add(e),function(){n.delete(e)}}),[n,e])},c=(0,o.cn)(null,(function(e,n){var t=e(u),i=!0,o=!1,a=void 0;try{for(var l,c=t[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){l.value.dispatch({effects:r.Q.of(null)})}}catch(s){o=!0,a=s}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}}))},54761:function(e,n,t){t.d(n,{Mk:function(){return s},OV:function(){return c},TC:function(){return l},b9:function(){return f},qw:function(){return u}});var r=t(9970),i=t(91398),o=t(92153),a=t(13902),u=(0,i.cn)([]),l=(0,i.cn)(null,(function(e,n,t){var i=t.message,o=e(u);n(u,(0,r.Z)(o).concat([i]))})),c=(0,i.cn)(null,(function(e,n,t){var i=t.message,o=e(u);n(a.fN,{message:i}),n(u,(0,r.Z)(o).concat([i]))})),s=(0,i.cn)(null,(function(e,n,t){var r=t.message,i=r.id,l=e(u),c=(0,o.ZP)(l,(function(e){var n;for(n=e.length-1;n>=0&&l[n].id!==i;n--);n>=0&&(e[n]=r)}));n(a.fN,{message:r}),n(u,c)})),f=(0,i.cn)(null,(function(e,n,t){var r=t.messageId,i=t.error,a=e(u),l=(0,o.ZP)(a,(function(e){var n=e.find((function(e){return e.id===r}));n&&(n.loading&&(n.text="",n.loading=!1),n.error=i)}));n(u,l)}))},69365:function(e,n,t){t.d(n,{Et:function(){return o},Z9:function(){return l},Z_:function(){return a},rM:function(){return c}});var r=t(29203),i=t(91398),o=(0,i.cn)(!1),a=function(){return(0,r.wM)(o)},u=(0,i.cn)(!1),l=function(){return(0,r.wM)(u)},c=function(){return(0,r.$X)(u)}},39691:function(e,n,t){t.d(n,{$e:function(){return g},Iu:function(){return h},Ne:function(){return p},aK:function(){return u},db:function(){return d},gL:function(){return l}});var r=t(5894),i=t(91398),o=t(61871),a=t(29203),u=(0,i.cn)(r.Fp),l=(0,i.cn)(null),c=(0,i.cn)(void 0),s=(0,i.cn)(!0),f=(0,i.cn)(void 0),d=(0,i.cn)((function(e){var n;return null===(n=e(c))||void 0===n?void 0:n.currentUser})),p=function(){return{currentUserData:(0,a.c1)(c),currentUserLoading:(0,a.c1)(s),currentUserError:(0,a.c1)(f),chatModel:(0,a.c1)(u)}},h=(0,i.cn)((0,o.Z)()),v=(0,i.cn)(null,(function(e,n,t){var r=t.chatModel,i=t.replId,o=t.currentUserData,a=t.currentUserLoading,d=t.currentUserError;n(u,r),n(l,i),n(c,o),n(s,a),n(f,d),e(h).resolve(!0)})),g=function(){return(0,a.$X)(v)}},6009:function(e,n,t){t.d(n,{Kz:function(){return s},dp:function(){return h},u0:function(){return d}});var r=t(57135),i=t(96583),o=t(91398),a=t(4613),u=t(29457),l=t(29203),c=(0,o.cn)(""),s=function(){return(0,l.wM)(c)},f=(0,o.cn)(null),d=function(){return(0,l.wM)(f)},p=(0,o.cn)(null,function(){var e=(0,r.Z)((function(e,n){var t,r,o;return(0,i.__generator)(this,(function(i){return(t=e(f))&&(r=e(c),o=e(a.FF),u.kg.info("Ghostwriter Debugger error buffered",{debuggerBuffer:r,ghostwriterDebugError:t,inferredInterpreter:o})),n(c,""),n(f,null),[2]}))}));return function(n,t){return e.apply(this,arguments)}}()),h=function(){return(0,l.$X)(p)}},5293:function(e,n,t){t.d(n,{G6:function(){return f},N0:function(){return c},OT:function(){return p},Vx:function(){return l},f9:function(){return u}});var r=t(57135),i=t(96583),o=t(29203),a=t(91398),u={getGhostwriterWorkspaceFileContext:(0,r.Z)((function(){return(0,i.__generator)(this,(function(e){return[2,{fileContext:[],mostRecentFile:null}]}))})),insertCodeButtonComponent:function(){return null},openGhostwriterPane:function(){}},l=(0,a.cn)(u),c=(0,a.cn)((function(e){return e(l).getGhostwriterWorkspaceFileContext})),s=(0,a.cn)((function(e){return e(l).insertCodeButtonComponent})),f=function(){return(0,o.c1)(s)},d=(0,a.cn)((function(e){return e(l).openGhostwriterPane})),p=function(){return(0,o.c1)(d)}},18180:function(e,n,t){t.d(n,{d:function(){return s}});var r=t(72006),i=t(43119),o=t(71440),a=t(24635);function u(){var e=(0,i.Z)(["\n  query GhostwriterChatStatusHook {\n    currentUser {\n      id\n      userPowerUpsByType {\n        __typename\n        ... on UserPowerUpsTypes {\n          ghostwriter {\n            active\n          }\n        }\n      }\n    }\n  }\n"]);return u=function(){return e},e}var l={},c=(0,o.Ps)(u());var s=function(){var e,n=function(e){var n=(0,r.Z)({},l,e);return a.a(c,n)}().data;return"UserPowerUpsTypes"===(null===n||void 0===n||null===(e=n.currentUser)||void 0===e?void 0:e.userPowerUpsByType.__typename)&&n.currentUser.userPowerUpsByType.ghostwriter.active}},4613:function(e,n,t){t.d(n,{B:function(){return h},FF:function(){return f},R$:function(){return v}});var r=t(57135),i=t(96583),o=t(29203),a=t(27562),u=t(45285),l=t(18180),c=t(91398),s=t(50959),f=(0,c.cn)("unknown");function d(e){var n,t,r,i;if(e.error)return"unknown";var o,a,u,l="unknown";if((null===(n=e.config.interpreter)||void 0===n||null===(t=n.command)||void 0===t?void 0:t.args)&&(null===(o=e.config.interpreter)||void 0===o||null===(a=o.command)||void 0===a||a.args.forEach((function(e){/nodejs/.test(e)?l="nodejs":/python3/.test(e)&&(l="python3")})),"unknown"!==l))return l;if((null===(r=e.config.run)||void 0===r?void 0:r.args)&&(null===(u=e.config.run)||void 0===u||u.args.forEach((function(e){/vite/.test(e)?l="vite":/node|npm/.test(e)?l="nodejs":/python3/.test(e)&&(l="python3")})),"unknown"!==l))return l;if(null===(i=e.config.packager)||void 0===i?void 0:i.language){var c,s=null===(c=e.config.packager)||void 0===c?void 0:c.language;if(/nodejs/.test(s)?l="nodejs":/python3/.test(s)&&(l="python3"),"unknown"!==l)return l}return"unknown"}function p(e){var n="unknown";return/nodejs|typescript/.test(e)?n="nodejs":/python3/.test(e)&&(n="python3"),n}function h(){var e=(0,u.Z)().dotReplit,n=(0,a.Z)(),t=(0,l.d)(),c=(0,o.$X)(f);(0,s.useEffect)((function(){function o(){return(o=(0,r.Z)((function(){var r,o;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return t?[4,e.getConfig()]:[2];case 1:r=i.sent();try{return o="unknown","unknown"===(o=d(r))&&(o=p(n)),c(o),[2,o]}catch(a){c("unknown")}return[2]}}))}))).apply(this,arguments)}return function(){o.apply(this,arguments)}(),function(){c("unknown")}}),[e,t,n,c])}function v(){return(0,o.c1)(f)}},79339:function(e,n,t){t.d(n,{Z:function(){return d}});var r=t(72006),i=t(74985),o=t(50959),a=t(47900),u=t(88167),l=t(78968),c=t(84358),s=t(18171),f=o.memo(a.ZP);function d(e){var n=e.source,t=e.sourcePos,o=e.fs,a=e.path,d=e.onCodeInsert,p=(0,u.l)(o,a),h=(0,c.Z)(n,100),v=(0,s.Z)((function(){return{img:p,a:function(e){return(0,i.tZ)(l.Z,(0,r.Z)({filePath:a},e))}}}),[p,a]);return(0,i.tZ)(f,{onCodeInsert:d,components:v,sourcePos:t,children:h})}},18196:function(e,n,t){t.d(n,{A:function(){return d},Z:function(){return f}});var r=t(74985),i=t(50959),o=t(87978),a=t(61284),u=t(39541),l=t(87076),c=t(63740),s=t(32104);function f(e){var n=e.fs,t=e.filePath,f=(0,i.useState)(null),p=f[0],h=f[1],v=(0,i.useState)(!0),g=v[0],m=v[1];return(0,i.useEffect)((function(){var e=n.watchFile(t,{onChange:function(e){h(e.toString("base64")),m(!1)},onError:function(){h(null),m(!1)},onMoveOrDelete:function(){h(null),m(!1)}});return function(){e(),m(!0),h(null)}}),[n,t]),g?(0,r.tZ)(s.Z,{}):p?(0,r.BX)(r.HY,{children:[(0,r.tZ)(d,{content:p,mime:(0,o.yC)(t)}),(0,r.tZ)(l.h,{alt:"Download",css:[u.l0.position.absolute,u.l0.bottom(8),u.l0.right(8),u.l0.p(16)],children:(0,r.tZ)("a",{href:"data:text/plain;base64,".concat(p),download:(0,o.UO)(t),css:[u.l0.color.foregroundDimmer],children:(0,r.tZ)(c.Z,{})})})]}):(0,r.tZ)(a.xv,{multiline:!1,children:"Failed to load media file"})}var d=function(e){var n=e.content,t=e.mime,i=void 0===t?"":t;if(i.startsWith("video/"))return(0,r.tZ)("video",{src:"data:".concat(i,";base64,").concat(n),css:{maxHeight:"100%",maxWidth:"100%"},controls:!0});if(i.startsWith("image/"))return(0,r.tZ)("img",{alt:"Preview",src:"data:".concat(i,";base64,").concat(n),css:{width:"80%",height:"80%",objectFit:"contain",imageRendering:"pixelated"}});if(i.startsWith("audio/")){var o=i;return"audio/wave"===o&&(o="audio/wav"),(0,r.tZ)("audio",{src:"data:".concat(o,";base64,").concat(n),css:{maxHeight:"100%",maxWidth:"100%"},controls:!0})}return"application/pdf"===i?(0,r.tZ)("object",{data:"data:".concat(i,";base64,").concat(n),type:"application/pdf",css:{width:"100%",height:"100%",flex:1},children:(0,r.tZ)("embed",{src:"data:".concat(i,";base64,").concat(n),type:"application/pdf",css:{width:"100%",height:"100%"}})}):(0,r.tZ)(a.xv,{multiline:!1,children:"File type not supported."})}},87138:function(e,n,t){t.d(n,{Z:function(){return T}});var r=t(74985),i=(t(50959),t(2041)),o=t(61284),a=t(45510),u=t(85368),l=t(90171),c=t(39541),s=t(82893),f=t.n(s),d=t(72006),p=t(43119),h=t(71440),v=t(24635);function g(){var e=(0,p.Z)(["\n  query NotAllowedModal {\n    currentUser {\n      id\n      isStaff: hasRole(role: REPLIT_STAFF)\n    }\n  }\n"]);return g=function(){return e},e}var m={},y=(0,h.Ps)(g());var w=t(48330),b=t(66539),E=t(70719),T=function(e){var n,t=e.isOpen,s=(0,l.useRouter)(),p=function(e){var n=(0,d.Z)({},m,e);return v.a(y,n)}({skip:!t}).data,h=(0,w.Z)(),g=null===p||void 0===p||null===(n=p.currentUser)||void 0===n?void 0:n.isStaff;return(0,r.tZ)(i.u,{preventClose:!0,isOpen:t,centered:!0,onRequestClose:function(){},maxWidth:600,children:(0,r.BX)(u.G,{css:[c.l0.colWithGap(32)],children:[(0,r.tZ)(u.G,{css:[c.l0.rowWithGap(16),c.l0.align.center],children:(0,r.tZ)(o.h4,{css:[{width:"fit-content"}],level:2,variant:"headerDefault",children:"You can\u2019t run this Repl right now."})}),(0,r.BX)(u.G,{css:[c.l0.colWithGap(16)],children:[(0,r.BX)(o.xv,{children:["It may be temporarily unavailable or it may have violated our"," ",(0,r.tZ)(f(),{href:"/site/terms",children:"Terms of Service"}),"."]}),(0,r.tZ)(o.xv,{children:"If you are the owner of this Repl and believe you should be able to run it, you can try again later or contact support."}),g?(0,r.BX)(u.G,{css:[c.l0.p(8),c.l0.colWithGap(8),c.l0.border({color:"var(--accent-negative-default)",width:1,style:"solid"}),c.l0.overflow("hidden")],children:[(0,r.BX)(u.G,{css:c.l0.rowWithGap(8),children:[(0,r.tZ)(b.u,{tooltip:"You are seeing this functionality because you have special permissions.",children:(0,r.tZ)(E.Z,{})}),(0,r.tZ)(o.h4,{level:3,children:"Debug Info"})]}),(0,r.tZ)(u.G,{children:(0,r.BX)(o.xv,{children:["Repl ID ",h," is not allowed to run. This is most likely due to a policy takedown."]})}),(0,r.tZ)(u.G,{children:(0,r.BX)(o.xv,{multiline:!1,children:[(0,r.tZ)(f(),{href:"https://app.datadoghq.com/logs?query=%40replid%3A".concat(h),children:"All datadog logs"})," ","\u2022"," ",(0,r.tZ)(f(),{href:"https://app.datadoghq.com/logs?query=%40replid%3A".concat(h,"+taking+down"),children:"Takedown-specific logs"})]})})]}):null]}),(0,r.BX)(u.G,{css:[c.l0.rowWithGap(16),c.l0.justify.end],children:[(0,r.tZ)(a.zx,{text:"Reload",onClick:function(){window.location.reload()}}),(0,r.tZ)(a.zx,{text:"Leave",onClick:function(){s.push("/home","~/")}})]})]})})}},33358:function(e,n,t){t.d(n,{Z:function(){return s}});var r,i=t(57389),o=t(74985),a=t(39541),u=t(66539),l=t(54873),c=(0,t(43312).iv)([a.l0.focusRing,a.l0.display.flex,a.l0.center,a.l0.borderRadius(4),a.l0.backgroundColor.backgroundRoot,a.l0.color.foregroundDefault,a.l0.cursor.pointer,a.l0.p(4),(r={transition:"background-color 0.2s",border:"none"},(0,i.Z)(r,a.wl.hover,[a.l0.backgroundColor.backgroundHigher]),(0,i.Z)(r,":focus",{outline:"none"}),r)]),s=function(e){var n=e.onClick;return(0,o.tZ)(u.u,{tooltip:"Clear",placement:"bottom-start",children:(0,o.tZ)("button",{"aria-label":"Clear",onClick:n,css:c,children:(0,o.tZ)(l.Z,{size:16})})})}},60447:function(e,n,t){t.d(n,{l:function(){return s}});var r,i=t(57389),o=t(74985),a=t(39541),u=t(66539),l=t(12260),c=(0,t(43312).iv)([a.l0.focusRing,a.l0.display.flex,a.l0.center,a.l0.borderRadius(4),a.l0.backgroundColor.backgroundRoot,a.l0.color.foregroundDefault,a.l0.cursor.pointer,a.l0.p(4),(r={transition:"background-color 0.2s",border:"none"},(0,i.Z)(r,a.wl.hover,[a.l0.backgroundColor.backgroundHigher]),(0,i.Z)(r,":focus",{outline:"none"}),r)]),s=function(e){var n=e.onClick;return(0,o.tZ)(u.u,{tooltip:"Search",placement:"bottom-start",children:(0,o.tZ)("button",{"aria-label":"Search",onClick:n,css:c,children:(0,o.tZ)(l.Z,{size:16})})})}},252:function(e,n,t){t.d(n,{R:function(){return c}});var r=t(74985),i=t(48306),o=t.n(i),a=t(39541),u=t(27522),l=t(50959);function c(e){var n=e.findNext,t=e.findPrevious,i=e.exit,c=(0,l.useRef)(null),s=(0,l.useState)(""),f=s[0],d=s[1];(0,l.useEffect)((function(){c.current&&c.current.focus()}),[]);return(0,r.BX)("div",{className:"jsx-cae03adee2975d4 search",children:[(0,r.tZ)("input",{ref:c,placeholder:"Find",value:f,onChange:function(e){return d(e.target.value)},onKeyDown:function(e){return function(e){"Escape"!==e.key?"Enter"===e.key&&(e.shiftKey?t(f):n(f)):i()}(e)},css:[a.l0.focusRing],className:"jsx-cae03adee2975d4"}),(0,r.tZ)(u.Z,{size:"small",onClick:function(){return n(f)},children:"Next"}),(0,r.tZ)(u.Z,{size:"small",onClick:function(){return t(f)},children:"Previous"}),(0,r.tZ)(u.Z,{size:"small",onClick:i,children:"Exit"}),(0,r.tZ)(o(),{id:"cae03adee2975d4",children:".search.jsx-cae03adee2975d4{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;height:30px}input.jsx-cae03adee2975d4{padding:4px var(--space-8)var(--space-4);background-color:var(--background-default);color:var(--foreground-default);height:24px;width:85px;border:none;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none}input.jsx-cae03adee2975d4::-webkit-input-placeholder{color:var(--foreground-default)}input.jsx-cae03adee2975d4:-moz-placeholder{color:var(--foreground-default)}input.jsx-cae03adee2975d4::-moz-placeholder{color:var(--foreground-default)}input.jsx-cae03adee2975d4:-ms-input-placeholder{color:var(--foreground-default)}input.jsx-cae03adee2975d4::-ms-input-placeholder{color:var(--foreground-default)}input.jsx-cae03adee2975d4::placeholder{color:var(--foreground-default)}input.jsx-cae03adee2975d4:focus{outline:none;border:var(--accent-primary-default)}input.jsx-cae03adee2975d4,.search button{margin:0 var(--space-4)}"})]})}},55281:function(e,n,t){t.d(n,{Z:function(){return ee}});var r=t(2272),i=t(74985),o=t(43312),a=t(17074),u=t(94716),l=t(11619),c=t(42256),s=t(77511),f=t(13474),d=t(85368),p=t(39541),h=t(4143),v=t(57135),g=t(96583),m=t(50959),y=t(10841),w=t(6009),b=t(29457),E=/(((\w+Error)|(Error)): (.*)\r\n((?:\s+at .*\r\n)+))|(\/home\/runner(.*):\d+\r\n[\s\S]*((\w+Error)|(Error)): (.*)\r\n)/g,T=/(Traceback.*\r\n)?( +File.*(\r\n.*){1,2})*\r\n.*((\wError:)|(Exception:)).*/g,Z=["abort","error","exception","fail","fatal","panic","traceback"].map((function(e){return"[".concat(e[0].toLowerCase()).concat(e[0].toUpperCase(),"]").concat(e.slice(1))})).join("|"),x=new RegExp("(.*(".concat(Z,")(.*\\r\\n)+?\\x1b\\[31m(.|\\r\\n)*?\\x1b\\[[0-9;]*m)|(.*\\x1b\\[31m.*?(").concat(Z,")(.|\\r\\n)*?\\x1b\\[[0-9;]*m.*)"),"g"),S=/\x1b\[[0-9;]*[A-Za-z]/g;var R=t(4613),C=t(18180);function k(e,n){if(!e)return null;var t=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unknown";return"nodejs"===n?null!==e.match(E):"python3"===n?null!==e.match(T):null!==e.match(x)}(e,n);return t?function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unknown",t=e.replace(S,""),r=null;return(r="nodejs"===n?t.match(E):"python3"===n?t.match(T):e.match(x))?r[r.length-1].replace(S,""):(b.kg.error("Ghostwriter Chat Debugger had no error - this should not have happened",{errorBuffer:e,interpreter:n}),"")}(e,n):null}var _,D,I=t(57389),A=t(66539),P=t(47880),O=(0,o.iv)([p.l0.focusRing,p.l0.display.flex,p.l0.center,p.l0.borderRadius(4),p.l0.backgroundColor.blurpleDefault,p.l0.color.foregroundDefault,p.l0.cursor.pointer,p.l0.p(4),(_={transition:"background-color 0.2s",border:"none"},(0,I.Z)(_,p.wl.hover,[p.l0.backgroundColor.blurpleStronger]),(0,I.Z)(_,":focus",{outline:"none"}),_)]),q=function(e){var n=e.onClick;return(0,i.tZ)(A.u,{tooltip:"Debug with Ghostwriter",placement:"bottom-start",children:(0,i.tZ)("button",{"aria-label":"Debug with Ghostwriter",onClick:n,css:O,children:(0,i.tZ)(P.Z,{size:16})})})},N=t(9348),z=t(53028),U=t(52364),F=t(27495),G=t(33358),L=t(77970),B=t(70232);function M(e,n){var t,r;switch(e){case D.Init:t="5%",r="Loading...";break;case D.BlockMigration:t="10%",r="Optimizing files";break;case D.Booting:r="Booting Repl",t="20%";break;case D.LoadingFiles:r="Loading files",t="".concat(Math.floor(20+70*n).toString(),"%");break;case D.Ready:r="Ready",t="100%";break;default:(0,B.Z)(e)}return{percentString:t,message:r}}!function(e){e.Init="Init",e.BlockMigration="BlockMigration",e.Booting="Booting",e.LoadingFiles="LoadingFiles",e.Ready="Ready"}(D||(D={}));var W=(0,o.F4)({"0%":{opacity:0,top:0},"100%":{opacity:1,top:"-25px"}});function j(e){var n=e.onBootStatus,t=e.initialRunState,r=(0,m.useState)({current:t===y.Ah.OFFLINE?D.Init:D.Ready,previous:null}),o=r[0],a=r[1],u=(0,m.useState)(0),l=u[0],c=u[1];(0,m.useEffect)((function(){var e=0,t=0,r=null,i=null,o=function(){e=0,t=0,r=null,i&&(clearInterval(i),i=null)},u=n((function(n){var u;switch(function(n){var a=n.stage,u=n.progress,l=n.total;if(i&&clearInterval(i),a!==L.api.BootStatus.Stage.PULL_FILES&&a!==L.api.BootStatus.Stage.LOAD_BLOCK||!l)return o(),void c(0);if(!(e>u)&&t!==u){var s=Date.now(),f=0;f=r?(u-t)/(s-r)*50:5e4,r=s,t=u,i=setInterval((function(){(e+=f)>l&&(e=l),e=Math.max(e,u),c(e/l)}),50)}}(n),n.stage){case L.api.BootStatus.Stage.ACQUIRING:u=D.Booting;break;case L.api.BootStatus.Stage.BLOCK_MIGRATION:u=D.BlockMigration;break;case L.api.BootStatus.Stage.PULL_FILES:case L.api.BootStatus.Stage.LOAD_BLOCK:u=D.LoadingFiles;break;case L.api.BootStatus.Stage.COMPLETE:u=D.Ready;break;default:return}a((function(e){return e.current===u?e:{current:u,previous:e.current}}))}));return function(){o(),u()}}),[n]);var s=o.previous?M(o.previous,1):null,f=M(o.current,l);return(0,i.BX)("div",{css:{position:"absolute",left:"25%",right:"25%",top:"45%",backgroundColor:"transparent",color:"white",transition:"all 1s 0.5s",opacity:o.current===D.Ready?0:1},children:[(0,i.BX)("div",{children:[s?(0,i.BX)("div",{css:{textAlign:"center",position:"absolute",width:"100%",top:"-100px",opacity:0,transition:"top 0.4s, opacity 0.4s"},children:[s.message,o.previous===D.LoadingFiles&&" 100%"]},s.message):null,(0,i.BX)("div",{css:{textAlign:"center",position:"absolute",width:"100%",top:"-25px",opacity:1,animationName:W.toString(),animationDuration:"0.6s"},children:[f.message,o.current===D.LoadingFiles&&" ".concat(f.percentString)]},f.message)]}),(0,i.tZ)("div",{css:{background:"none",border:"solid white 1px",borderRadius:"10px"},children:(0,i.tZ)("div",{css:{height:"5px",width:f.percentString,backgroundColor:"#fff",transition:"width cubic-bezier(0.28, 0.26, 0.33, 1) 2s"}})})]})}var H=t(60447),X=t(252),Q=t(99063);var V=(0,o.iv)([p.l0.flex.row,{opacity:"0",zIndex:100}]),K=(0,o.iv)([p.l0.flex.row,{zIndex:100}]),Y=(0,o.iv)([p.l0.flex.row,p.l0.center,p.l0.justify.end,p.l0.position.absolute,p.l0.top(8),p.l0.right(8),p.l0.minHeight(30)]),$=function(e,n){var t=e.tracker,o=e.runner,p=e.debugClient,E=e.packager,T=e.onBootStatus,Z=e.openPane,x=e.focusOnLoad,S=e.focusRef,_=e.openFile,D=e.listFiles,I=(0,r.Z)(function(e){var n=e.tracker,t=e.runner,i=e.debugClient,o=e.packager,a=e.openFile,u=e.listFiles,l=(0,r.Z)((0,N.Z)(a&&u?{openFile:a,listFiles:u}:void 0),2),c=l[0],s=l[1],f=(0,m.useState)(""),d=f[0],p=f[1],h=n||function(){};return(0,m.useEffect)((function(){if(!c)return t.onOutput((function(e){return p((function(n){return n+e}))}))}),[c,t,p]),(0,m.useEffect)((function(){if(!c&&o)return o.onOutput((function(e){return p((function(n){return n+e.replace(/\n/g,"\n\r")}))}))}),[c,o,p]),(0,m.useEffect)((function(){var e=function(e){if(!c)throw new Error("Expected xterm");c.write(e.replace(/\n/g,"\n\r"))};if(c&&o){var n=o.onOutput((function(n){e(n)})),t=o.onError((function(){return e("\x1b[31m\n\nReplit: Package operation failed.\x1b[00m")})),r=o.onStateChanged((function(n){n&&e("\n\nReplit: Updating package configuration\n\n")}));return function(){n(),t(),r()}}}),[c,o]),(0,m.useEffect)((function(){d&&c&&(h("user:run:output",{bufferedOutput:d}),c.write(d),p(""))}),[c,d]),(0,m.useEffect)((function(){if(c){var e=function(){t.getRunState()!==y.Ah.OFFLINE&&t.resizeTerminal(c.getSize())},n=[];n.push(c.onResize(e).dispose);var r=[];n.push(c.onData((function(e){var n=(0,Q.I)(e);"running"!==(null===i||void 0===i?void 0:i.state.current)?t.getRunState()!==y.Ah.OFFLINE?t.sendInput(n):r.push(n):i.sendInput(n)})).dispose),n.push(t.onOutput((function(e){h("user:run:output",{output:e}),c.write(e)})));var o=!1;return n.push(t.onStateChanged((function(n){if(n!==y.Ah.OFFLINE){if(o||(e(),o=!0),r.length){var i=!0,a=!1,u=void 0;try{for(var l,c=r[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;t.sendInput(s)}}catch(f){a=!0,u=f}finally{try{i||null==c.return||c.return()}finally{if(a)throw u}}r=[]}}else o=!1}))),t.getRunState()!==y.Ah.OFFLINE&&(e(),o=!0),function(){n.forEach((function(e){return e()}))}}}),[c,t,i]),[c,s,p]}({tracker:t,runner:o,debugClient:p,packager:E,openFile:_,listFiles:D}),3),A=I[0],P=I[1],O=I[2],q=(0,r.Z)(m.useState(!1),2),z=q[0],U=q[1],L=(0,u.Z)(S);m.useEffect((function(){var e;null===(e=L.current)||void 0===e||e.call(L,A)}),[L,A]);var B=(0,u.Z)(x);m.useEffect((function(){A&&B.current&&A.focus()}),[A,B]);var M=function(e){var n=e.runner,t=(0,R.R$)(),i=(0,m.useState)(y.Ah.IDLE),o=i[0],a=i[1],u=(0,r.Z)((0,w.u0)(),2),l=u[0],c=u[1],s=(0,w.dp)(),f=(0,r.Z)((0,w.Kz)(),2),d=f[0],p=f[1],h=(0,C.d)(),E=(0,m.useCallback)(function(){var e=(0,v.Z)((function(e){return(0,g.__generator)(this,(function(n){return o!==y.Ah.RUNNING||p((function(n){return(n+e).slice(-2400)})),[2]}))}));return function(n){return e.apply(this,arguments)}}(),[o,p]),T=(0,m.useCallback)((function(e){e!==o&&(a(e),e!==y.Ah.RUNNING||s())}),[s,o]);return(0,m.useEffect)((function(){if(h){var e=setTimeout((function(){var e=k(d,t);e&&c(e)}),100);return function(){clearTimeout(e)}}}),[d,h,t,c]),(0,m.useEffect)((function(){if(h&&(b.kg.info("Ghostwriter Debugger inferred interpreter",{interpreter:t}),"shellrunner"===n.mode)){var e=[n.onOutput(E),n.onStateChanged(T)];return function(){e.forEach((function(e){return e()}))}}}),[h,t,n,E,T]),{hasAccessToChatDebugger:h,parsedError:l,clearDebug:s}}({runner:o}),W=M.hasAccessToChatDebugger,K=M.parsedError,$=M.clearDebug,ee=(0,s.T3)(),ne=W&&Boolean(K);m.useEffect((function(){return function(){$()}}),[$]);var te=(0,l.Z)().preferences.accessibleTerminal,re=(0,N.a)();m.useImperativeHandle(n,(function(){return{write:function(e){A?A.write(e):O((function(n){return n+e.replace(/\n/g,"\n\r")}))},clear:function(){A&&A.clear()},focus:function(){A&&A.focus()}}}));var ie=(0,h.Z)(f.y.Output);return(0,i.BX)(d.G,{css:[F.EA.container,re],onKeyDown:function(e){"f"===e.key&&(0,c.j)(e)&&!e.shiftKey&&(U(!0),e.preventDefault())},innerRef:ie,children:[(0,i.BX)(d.G,{css:Y,children:[(0,i.BX)(d.G,{css:V,className:"controls",children:[z&&A?(0,i.tZ)(X.R,{findPrevious:A.findPrevious,findNext:A.findNext,exit:function(){return U(!1)}}):(0,i.tZ)(H.l,{onClick:function(){return U(!0)}}),(0,i.tZ)(G.Z,{onClick:function(){A&&(A.clear(),A.focus(),$())}})]}),ne&&Z?(0,i.tZ)(J,{clearDebug:$,parsedError:K,openPane:Z}):null]}),te?null:(0,i.tZ)(a.T,{children:'Enable "Accessible Terminal" in Workspace Settings to use a screen reader with the console.'}),(0,i.tZ)(d.G,{css:ee?F.EA.xterm:F.EA.xtermWithBorderRadius,innerRef:P}),T?(0,i.tZ)(j,{initialRunState:o.getRunState(),onBootStatus:T}):null]})};function J(e){var n=e.clearDebug,t=e.parsedError,r=e.openPane,o=(0,U.ql)();return(0,i.tZ)(d.G,{css:K,children:(0,i.tZ)(q,{onClick:function(){t&&(r({type:"ghostwriterChat"}),o({chatMessage:{type:"debugger",errorType:"console",text:(0,z.Vh)(t,"debugger")}}),n())}})})}var ee=m.forwardRef($)},27495:function(e,n,t){t.d(n,{N2:function(){return I},St:function(){return k},EA:function(){return D}});var r=t(2272),i=t(74985),o=t(50959),a=t(43312),u=t(252),l=t(60447),c=t(33358),s=t(42256),f=t(17074),d=t(11619),p=t(9348),h=t(82568),v=t(39541),g=t(85368),m=t(77511),y=t(57966),w=t(69921),b=t(625),E=t(99063),T=t(90171),Z=t(88161),x=t(12171),S=t(70232);function R(e){var n=e.sendInput,t=e.paste,r=(0,T.useRouter)(),i=(0,m.Vg)(r);(0,o.useEffect)((function(){if(i){var e=function(e){(0,x.gN)(e,(function(e){var r,i,o,a=e.type;switch(a){case Z.cF.SHELL_INSERT_INPUT:i=e.id,o=e.input,n(o)?(0,x.gU)(i):(0,x.pl)(i);break;case Z.cF.SHELL_COMMAND:"unknown"===(r=e.command)||(0,S.Z)(r);break;case Z.cF.SHELL_PASTE_TEXT:t(e.text)?(0,x.gU)(e.id):(0,x.pl)(e.id);break;default:(0,S.Z)(a)}}))};return window.addEventListener("message",e),function(){window.removeEventListener("message",e)}}}),[i,n,t])}var C=t(49514);function k(e){var n,t=e.onShellKey,i=e.onOutput,a=e.container,u=e.initialPwd,l=(0,r.Z)((0,p.Z)(),2),c=l[0],s=l[1],f=(0,w.Z)({service:"shell",container:a}),d=(0,C.K)({channelId:null===f||void 0===f||null===(n=f.channel)||void 0===n?void 0:n.id}),h=o.useRef(!1),v="",g="",m="",T=o.useCallback((function(e){if(!f.channel||!c)return!1;var n=a.client();if(!f.channel||"open"!==f.channel.status||n.getConnectionState()!==y.em.CONNECTED)return!1;var t=(0,E.I)(e);return f.channel.send({input:t}),!0}),[c,f,a]);return R({sendInput:T,paste:function(e){return!!c&&(c.paste(e),!0)}}),o.useEffect((function(){if(f.channel&&c&&"open"===f.channel.status){var e=c.onKey((function(e){var n=e.key,r=e.domEvent;if("\r"===n){(0,b.j)(b.U3.SHELL_COMMAND_EVALED,{context:v});var i=g;g.endsWith(v)&&v.length>0&&(i=g.slice(0,-v.length)),d("user:shell:output:clean",{output:i,command:m}),d("user:shell:exec",{command:v}),d("user:shell:output",{output:g}),m=v,v="",g=""}else v+=n;t&&t(r)})),n=a.client(),r=c.onData((function(e){T(e)}));f.channel.onCommand((function(e){e.hint?c.write("\x1b[0m\x1b[33m".concat(e.hint.text,"\x1b[0m\r\n")):e.output&&(c.write(e.output),null===i||void 0===i||i(e.output),g+=e.output)}));var o=function(){f.channel&&"open"===f.channel.status&&n.getConnectionState()===y.em.CONNECTED&&f.channel.send({resizeTerm:c.getSize()})};if(u&&!h.current){var l=u.replace(/"/g,'\\"');f.channel.send({input:'cd "'.concat(l,'"\n')}),h.current=!0}var s=c.onResize(o);return o(),function(){e.dispose(),r.dispose(),s.dispose()}}}),[f.channel,c,t,i,a,T,u]),[c,s,T]}var _=(0,a.iv)([v.l0.height("100%"),v.l0.overflow("hidden"),{"& .xterm":[v.l0.pl(8),v.l0.pt(8),v.l0.pb(4),v.l0.height("100%")]}]),D=(0,h.X)({container:[v.l0.coverContainer,{"&:focus-within .controls":{opacity:1}}],xterm:_,xtermWithBorderRadius:[_,{"& .xterm-viewport":[v.l0.borderRadius(0,0,8,8)]}]});function I(e){var n=e.shell,t=e.shellRef,a=e.className,h=(0,d.Z)().preferences.accessibleTerminal,y=(0,r.Z)(o.useState(!1),2),w=y[0],b=y[1],E=w&&n?(0,i.tZ)(u.R,{findPrevious:n.findPrevious,findNext:n.findNext,exit:function(){return b(!1)}}):(0,i.tZ)(l.l,{onClick:function(){return b(!0)}}),T=(0,p.a)(),Z=(0,m.T3)();return(0,i.BX)(g.G,{className:a,css:[D.container,T],onKeyDown:function(e){"f"===e.key&&(0,s.j)(e)&&(b(!0),e.preventDefault())},children:[!h&&(0,i.tZ)(f.T,{children:'Enable "Accessible Terminal" in Workspace Settings to use a screen reader with the shell.'}),(0,i.tZ)(g.G,{css:Z?D.xterm:D.xtermWithBorderRadius,innerRef:t}),n?(0,i.BX)(g.G,{className:"controls",css:[v.l0.position.absolute,v.l0.flex.row,v.l0.top(8),v.l0.right(8),v.l0.height(30),v.l0.align.center,{opacity:0,zIndex:4}],children:[E,(0,i.tZ)(c.Z,{onClick:n.clear})]}):(0,i.tZ)("code",{css:[v.l0.color.foregroundDimmest,v.l0.coverContainer,v.l0.p(8)],children:"Loading..."})]})}},79686:function(e,n,t){t.d(n,{Z:function(){return B}});var r=t(57135),i=t(2272),o=t(96583),a=t(74985),u=t(48306),l=t.n(u),c=t(50959),s=t(88254),f=t(48468),d=t(625),p=t(34489),h=t(87861),v=t(63064),g=t(32104),m=t(2041),y=t(89025),w=t(82568),b=t(39541),E=t(85368),T=t(25198),Z=t(45510),x=t(48667),S=t(88541),R=t(48330),C=t(63763),k=t(97807),_=t(90171),D=t(72006),I=t(43119),A=t(71440),P=t(24635);function O(){var e=(0,I.Z)(["\n  query WorkspaceVncOutput($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        slug\n        owner {\n          ... on Team {\n            id\n            username\n          }\n          ... on User {\n            id\n            username\n          }\n        }\n      }\n    }\n  }\n"]);return O=function(){return e},e}var q={},N=(0,A.Ps)(O());var z,U=t(33594),F=t(47900);!function(e){e.Connecting="Connecting",e.Connected="Connected",e.Disconnected="Disconnected",e.Errored="Errored"}(z||(z={}));var G="VNC_PASSWORD";function L(e){var n,t=function(e){var n=(0,D.Z)({},q,e);return P.a(N,n)}({skip:e.skip,variables:{replId:(0,R.Z)()}}).data,r="Repl"===(null===t||void 0===t?void 0:t.repl.__typename)?t.repl:null,i=null===r||void 0===r||null===(n=r.owner)||void 0===n?void 0:n.username;return r&&i?r.slug.length+i.length+2>63?null:function(e){var n=e.replSlug,t=e.username,r=(0,k.Z)()?C.js:C.ck,i=(0,C.mZ)(r);return"".concat(i,"//").concat(n,"--").concat(t,".").concat(r)}({username:i,replSlug:r.slug}):null}function B(e){var n=e.fs,u=e.container,w=(0,i.Z)(c.useState(null),2),b=w[0],E=w[1],T=(0,i.Z)(c.useState(void 0),2),Z=T[0],x=T[1],D=(0,i.Z)(c.useState(!1),2),I=D[0],A=D[1],P=(0,i.Z)(c.useState(z.Connecting),2),O=P[0],q=P[1],N=(0,i.Z)(c.useState(null),2),U=N[0],F=N[1],B=(0,i.Z)(c.useState(!1),2),M=B[0],j=B[1],H=(0,i.Z)(c.useState(!1),2),X=H[0],Q=H[1],V=(0,i.Z)(c.useState(null),2),K=V[0],Y=V[1],$=c.useRef(0),J=(0,v.Z)(),ee=(0,S.P5)({controlName:"flag-vnc-error-status",logFlagToAnalytics:!1}),ne=(0,S.P5)({controlName:"flag-vnc-dash-url",logFlagToAnalytics:!1}),te=(0,_.useRouter)().pathname,re=L({skip:!(ne&&("/replEnvironmentDesktop"===te||"/replEnvironmentMobile"===te)&&!(0,k.Z)())});(0,d.j)(d.U3.VNC_OPENED),c.useEffect((function(){if(re){if(u.getConnectionState()!==h.em.CONNECTED)return u.onConnectionStateChanged((function(e){e===h.em.CONNECTED&&re&&Y(re)}));if(!re)return;Y(re)}}),[u,re]),c.useEffect((function(){if(!re){if(u.getConnectionState()!==h.em.CONNECTED)return u.onConnectionStateChanged((function(e){e===h.em.CONNECTED&&u.getVncUrl().then((function(e){return Y(e)}))}));u.getVncUrl().then((function(e){return Y(e)}))}}),[u,re]);var ie=(0,i.Z)(c.useState(null),2),oe=ie[0],ae=ie[1],ue=c.useRef((function(){return null}));c.useEffect((function(){ue.current()}),[oe]);var le=(0,f.Z)((function(e){return ae(e.width&&e.height?{width:e.width,height:e.height}:null)}),{type:"throttle",wait:100}),ce=c.useRef((function(e){}));c.useEffect((function(){ce.current(X)}),[X]),c.useEffect((function(){if(!b){var e=!1;return t.e(994).then(t.bind(t,30994)).then((function(n){e||E(n)})),function(){e=!0}}}),[b]),c.useEffect((function(){ee||O===z.Disconnected&&setTimeout((function(){J.current&&q(z.Connecting)}),Math.random()*(Math.pow(2,$.current)-1)*1e3)}),[O,J,ee]),c.useEffect((function(){if(ee&&O===z.Disconnected){var e=setTimeout((function(){q(z.Connecting)}),Math.random()*(Math.pow(2,$.current)-1)*1e3);return function(){clearTimeout(e)}}}),[O,J,ee]);var se=(0,R.Z)();c.useEffect((function(){if(K&&U&&b&&O===z.Connecting){$.current++;var e=b.default,t=u.getConnectionMetadata(),i={credentials:{username:null===t||void 0===t?void 0:t.token,password:Z||""}};(0,d.j)(d.U3.VNC_CONNECTED);var a=new e(U,K,i);a.scaleViewport=!0,a.resizeSession=!0;var l=function(){J.current&&($.current=0,q(z.Connected))},c=function(e){var n=e.detail.capabilities.audio;j(void 0!==window.MediaSource&&!!n)},f=function(e){if(ue.current=function(){return null},ce.current=function(e){},a.removeEventListener("securityfailure",h),a.removeEventListener("disconnect",f),a.removeEventListener("capabilities",c),a.removeEventListener("connect",l),J.current){if(ee&&!e.detail.clean){var n=u.getConnectionMetadata(),t=n?(0,C.he)(n.token):null;return(0,d.j)(d.U3.VNC_ERRORED,{vncUrl:K,replId:se,cluster:null===t||void 0===t?void 0:t.cluster}),void q(z.Errored)}q(z.Disconnected)}},h=function(){if(J.current){var e=function(){A(!0)},t=function(){var t=(0,r.Z)((function(){var t,r,i;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return[4,n.readFile(".env")];case 1:return t=o.sent(),J.current?t.error?(e(),[2]):(r=t.content.toString("utf8"),i=p.Z.parse(r),G in i?(x(i.VNC_PASSWORD),[2]):(e(),[2])):[2]}}))}));return function(){return t.apply(this,arguments)}}();t().catch((function(e){return s.Tb(e)}))}};return a.addEventListener("connect",l),a.addEventListener("capabilities",c),a.addEventListener("disconnect",f),a.addEventListener("securityfailure",h),ue.current=function(){return a._windowResize()},j(!1),Q(!1),ce.current=function(n){n?((0,d.j)(d.U3.VNC_AUDIO_ENABLED),a.enableAudio(2,window.MediaSource.isTypeSupported("audio/webm;codecs=opus")?e.audioCodecs.OpusWebM:e.audioCodecs.MP3,32768)):a.disableAudio()},function(){J.current||(ue.current=function(){return null},ce.current=function(e){},a.removeEventListener("securityfailure",h),a.removeEventListener("disconnect",f),a.removeEventListener("capabilities",c),a.removeEventListener("connect",l),a.disconnect())}}}),[b,U,u,K,n,Z,O,J,ee,se]);var fe="vnc-output-".concat(O.toLowerCase());return(0,a.BX)("div",{className:"jsx-612fb0831fb3a82c vnc",children:[M?(0,a.BX)("label",{className:"jsx-612fb0831fb3a82c vnc-audio",children:["\ud83c\udfa7"," ",(0,a.tZ)("input",{type:"checkbox",checked:X,onChange:function(e){return Q(e.target.checked)},className:"jsx-612fb0831fb3a82c"})]}):null,(0,a.tZ)("div",{ref:function(e){le(e),F(e)},"data-cy":fe,className:"jsx-612fb0831fb3a82c vnc-target"}),O===z.Connecting||O===z.Disconnected?(0,a.tZ)("div",{className:"jsx-612fb0831fb3a82c vnc-overlay",children:(0,a.tZ)(g.Z,{size:32})}):null,O===z.Errored?(0,a.tZ)(W,{vncUrl:K,onRetry:function(){return q(z.Connecting)}}):null,(0,a.tZ)(m.u,{isOpen:I,onRequestClose:function(){return A(!1)},children:(0,a.tZ)(y.Z,{prompt:"Password",desc:"The output is password protected, please input it",placeholder:"password",type:"text",onCancel:function(){return A(!1)},onConfirm:function(e){x(e),A(!1)}})}),(0,a.tZ)(l(),{id:"612fb0831fb3a82c",children:".vnc.jsx-612fb0831fb3a82c{position:relative}.vnc.jsx-612fb0831fb3a82c,.vnc-target.jsx-612fb0831fb3a82c{height:100%;width:100%}.vnc-audio.jsx-612fb0831fb3a82c{position:absolute;bottom:0;right:0;padding:.2em}.vnc-overlay.jsx-612fb0831fb3a82c{top:0;position:absolute;height:100%;width:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;background:rgba(0,0,0,.85);color:var(--white)}"})]})}var M=(0,w.X)({root:[b.l0.coverContainer,b.l0.center,b.l0.p(16)],inner:[b.l0.colWithGap(8),b.l0.width(250)],diagnosisContent:[b.l0.py(8)]});function W(e){var n=e.vncUrl,t=e.onRetry,r=null;if(n){var i=new URL("wss://10622591-6a32-44be-aa89-1421705f33ea.id.repl.co").hostname;r=(0,a.tZ)(U.Q,{headerContent:"Diagnosis",children:(0,a.tZ)(E.G,{css:[M.diagnosisContent],children:(0,a.tZ)(F.ZP,{children:"Open this link and check if you can visit this URL from your browser:\n[".concat(i,"](https://").concat(i,").\n\nIf you see a browser error, it's possible that your ISP have security settings blocking the URL. Please contact your ISP and ask them to unblock the URL above. Here are the support links for common ISPs:\n- [Xfinity](https://www.xfinity.com/support/articles/report-blocked-website)\n- [Spectrum.net](https://www.spectrum.net/support/forms/unblock_site)\n")})})})}return(0,a.tZ)(E.G,{css:M.root,children:(0,a.BX)(E.G,{css:M.inner,children:[(0,a.tZ)(T.E,{colorway:"warning",text:"There was an error connecting to the server"}),r,(0,a.tZ)(Z.zx,{iconLeft:(0,a.tZ)(x.Z,{}),text:"Try again",onClick:t})]})})}},69834:function(e,n,t){t.d(n,{T:function(){return y},W:function(){return w}});var r=t(57135),i=t(2272),o=t(96583),a=t(91926),u=t(20575),l=t(4561),c=t(12583),s=t(12379),f=t(43119),d=t(71440);function p(){var e=(0,f.Z)(["\n  query LoadDefaultFile($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        language\n      }\n    }\n  }\n"]);return p=function(){return e},e}var h=(0,d.Ps)(p());var v=t(87978),g=".replit",m="replit.nix";function y(e,n){var t=n.startsWith("nix"),r=t?null:a.Z.getMainFileName(n);if(r&&a.Z.usesInterpreter(n)&&e.includes(r))return r;if(e.includes("Makefile"))return"Makefile";if(r&&e.includes(r))return r;if(!t&&e.includes(g))return".replit";var i=e.find(v.gK);return i||e.find((function(e){return(!t||![g,m].includes(e))&&!(0,u.C)(e)}))}function w(e){return b.apply(this,arguments)}function b(){return b=(0,r.Z)((function(e){var n,t,a,u,f,d,p,g,m,w,b,E,T;function Z(){return x.apply(this,arguments)}function x(){return x=(0,r.Z)((function(){var e,n;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:return(e=null===g||void 0===g?void 0:g.entrypoint)?(0,v.Il)(e)?[4,t.stat(e)]:[2,b.includes(e)?e:null]:[2,null];case 1:return[2,(n=r.sent()).exists&&n.type===l.Tv.File?e:null]}}))})),x.apply(this,arguments)}return(0,o.__generator)(this,(function(r){switch(r.label){case 0:if(n=e.dotReplit,t=e.fs,a=e.replId,!s.l)throw new Error("Expected apollo client");return[4,Promise.all([s.l.query({query:h,variables:{replId:a}}),t.readDir(c.Ql),n.getConfig()])];case 1:if(u=i.Z.apply(void 0,[r.sent(),3]),f=u[0].data,d=u[1],p=u[2],g=p.config,!d||d.error)throw new Error("Could not read files");return m=d.children,w=m.find((function(e){return e.type===l.Tv.File&&e.filename.toLowerCase().endsWith("readme.md")})),b=m.filter((function(e){return e.type===l.Tv.File})).map((function(e){return e.filename})),[4,Z()];case 2:return(E=r.sent())?[2,{entrypoint:E,readmeFile:null===w||void 0===w?void 0:w.filename}]:(T="Repl"===f.repl.__typename?f.repl.language:"",[2,{entrypoint:y(b,T),readmeFile:null===w||void 0===w?void 0:w.filename}])}}))})),b.apply(this,arguments)}},86785:function(e,n,t){function r(e){var n=document.createElement("canvas"),t=n.getContext("2d");if(n.width=e.width,n.height=e.height,!t)throw new Error("failed to get canvas ctx");return{version:"1",width:e.width,height:e.height,palette:[[0,0,0,255],[255,255,255,255],[255,255,128,255],[255,128,255,255],[0,128,128,255],[128,0,255,255],[255,0,128,255],[0,255,255,255]],anims:{},frames:e.frames.map((function(r){var i=new window.ImageData(new Uint8ClampedArray(r.pixels),e.width,e.height);return t.putImageData(i,0,0),n.toDataURL()}))}}function i(e){return new Promise((function(n,t){var r=new window.Image;r.src=e,r.onload=function(){n(r)},r.onerror=t}))}function o(e){return new Promise((function(n,t){Promise.all(e.frames.map(i)).then((function(r){var i=document.createElement("canvas");i.width=e.width,i.height=e.height;var o=i.getContext("2d");if(o){var a=r.map((function(n){return o.drawImage(n,0,0),{pixels:Array.from(o.getImageData(0,0,e.width,e.height).data),width:e.width,height:e.height}}));n({frames:a,preview:e.frames[0],width:e.width,height:e.height})}else t(new Error("failed to get canvas ctx"))})).catch(t)}))}t.d(n,{C:function(){return r},u:function(){return o}})},25362:function(e,n,t){t.d(n,{z:function(){return o}});var r=t(20575),i=t(12583);function o(e){var n=e.siblingNames,t=e.fileName,o=e.initialValue,a=e.parentPath;if(t.includes("/"))return"File names cannot include forward slashes";if("."===t||".."===t)return'File names cannot be "'.concat(t,'"');if(t.match(/^\s/)||t.match(/\s$/))return"File names cannot start or end with whitespace";if(o!==t&&n.includes(t))return"A file or folder with that name already exists";if(t.length>100)return"File names cannot be longer than 100 characters";var u=a===i.Ql?t:a+"/"+t;return".env"===u?"You can create environment variables with the Secrets tool! (.env files are deprecated)":(0,r.C)(u)?'"'.concat(u,'" is reserved'):null}},9348:function(e,n,t){t.d(n,{Z:function(){return F},a:function(){return N.a}});var r,i=t(57135),o=t(2272),a=t(96583),u=t(94716),l=t(11619),c=t(60566),s=t(38598),f=t(1468),d=t(13424),p=t(50959),h=t(48468),v=t(30826);var g=t.n(v)()((function(){if("undefined"!==typeof AudioContext){var e=(r||(r=new AudioContext),r),n=e.createBufferSource();e.decodeAudioData(function(e){for(var n=window.atob(e),t=n.length,r=new Uint8Array(t),i=0;i<t;i++)r[i]=n.charCodeAt(i);return r.buffer}("SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq"),(function(t){n.buffer=t,n.connect(e.destination),n.start(0)}))}}),500,{leading:!0,trailing:!0}),m="replit-icons-font";function y(){if(!document.getElementById(m)){var e=document.createElement("style");e.id=m,e.type="text/css",e.appendChild(document.createTextNode("\n@font-face {\n  font-family: 'replit-icons';\n  font-style: normal;\n  font-weight: normal;\n  font-stretch: normal;\n  src: url(".concat("/public/fonts/replit-icons.woff",") format('woff'),\n    url(").concat("/public/fonts/replit-icons.ttf",") format('truetype');\n}"))),document.head.appendChild(e)}}var w=t(29457),b="BESbswy",E=3e3;function T(e){return Z.apply(this,arguments)}function Z(){return(Z=(0,i.Z)((function(e){return(0,a.__generator)(this,(function(n){switch(n.label){case 0:return document.fonts?[4,S(document.fonts,e)]:[3,2];case 1:case 3:return n.sent(),[2];case 2:return[4,Promise.all([C("serif",e),C("sans-serif",e),C("monospace",e)])]}}))}))).apply(this,arguments)}function x(e){var n=e.family,t=e.style,r=void 0===t?"normal":t,i=e.weight,o=void 0===i?"normal":i;return"".concat(r," ").concat(o," 100px ").concat(n)}function S(e,n){return R.apply(this,arguments)}function R(){return(R=(0,i.Z)((function(e,n){var t,r,i,o,u,l;return(0,a.__generator)(this,(function(a){return t=n.fontInfo,r=n.characters,i=void 0===r?b:r,o=n.timeout,u=void 0===o?E:o,l=x(t),[2,new Promise((function(n,r){var o=!1,a=w.kg.timeStart({family:t.family,style:t.style,weight:t.weight}),c=setTimeout((function(){o=!0,a("xterm font loading timed out"),n()}),u);e.load(l,i).then((function(){o||(a("xterm font loaded"),clearTimeout(c),n())})).catch((function(e){o||(clearTimeout(c),r(e))}))}))]}))}))).apply(this,arguments)}function C(e,n){return k.apply(this,arguments)}function k(){return(k=(0,i.Z)((function(e,n){var t,r,i,o,u,l,c,s,f;return(0,a.__generator)(this,(function(a){return t=n.fontInfo,r=n.characters,i=void 0===r?b:r,o=n.timeout,u=void 0===o?E:o,l=x(t),(c=document.createElement("span")).innerText=i,c.style.font="normal normal 100px ".concat(e),c.style.position="absolute",c.style.left="-9999px",c.style.top="-9999px",document.body.appendChild(c),s=c.offsetWidth,c.style.font=l,(f=function(){return s!==c.offsetWidth})()?[2]:[2,new Promise((function(e,n){var r=setInterval((function(){f()&&(clearInterval(r),clearTimeout(i),document.body.removeChild(c),e())}),50),i=setTimeout((function(){clearInterval(r),document.body.removeChild(c),f()?e():n(new Error("Font loading timed out "+t.family))}),u)}))]}))}))).apply(this,arguments)}function _(e){f.c_.captureException(e)}var D='"ReplitHack"',I=400,A=700,P=String.fromCharCode(61095);function O(){return q.apply(this,arguments)}function q(){return(q=(0,i.Z)((function(){return(0,a.__generator)(this,(function(e){switch(e.label){case 0:return y(),[4,Promise.all([T({fontInfo:{family:"replit-icons"},characters:P}).catch(_),T({fontInfo:{family:D,weight:I.toString()}}).catch(_),T({fontInfo:{family:D,weight:I.toString(),style:"italic"}}).catch(_),T({fontInfo:{family:D,weight:A.toString()}}).catch(_),T({fontInfo:{family:D,weight:A.toString(),style:"italic"}}).catch(_)])];case 1:return e.sent(),[2]}}))}))).apply(this,arguments)}var N=t(60583);function z(){return Promise.all([(0,s.Z)((function(){return t.e(809).then(t.t.bind(t,63776,23))})),(0,s.Z)((function(){return t.e(3214).then(t.t.bind(t,13214,23))})),(0,s.Z)((function(){return t.e(5303).then(t.t.bind(t,75303,23))})),(0,s.Z)((function(){return t.e(3778).then(t.t.bind(t,73778,23))})),(0,s.Z)((function(){return t.e(1561).then(t.t.bind(t,51561,23))})),(0,s.Z)((function(){return t.e(8767).then(t.bind(t,58767))})),(0,s.Z)((function(){return t.e(1725).then(t.t.bind(t,11725,23))})),(0,s.Z)((function(){return t.e(8160).then(t.t.bind(t,98160,23))}))])}function U(){if(function(){if(!/^((?!chrome|android).)*safari/i.test(window.navigator.userAgent))return!1;var e=window.navigator.userAgent.match(/Version\/(\d+)/);return null===e||e.length<2||parseInt(e[1],10)<16}())return!1;var e=document.createElement("canvas").getContext("webgl2");return Boolean(e)}function F(e){var n=(0,p.useState)(null),r=n[0],c=n[1],s=(0,p.useState)(null),v=s[0],m=s[1],y=(0,N.f)(),w=(0,l.Z)().preferences,b=w.fontSize,E=w.accessibleTerminal,T=(0,d.uV)(),Z=null===e||void 0===e?void 0:e.openFile,x=null===e||void 0===e?void 0:e.listFiles,S={screenReaderMode:E,fileLinking:(0,p.useMemo)((function(){return Z&&x?{openFile:Z,listFiles:x}:null}),[Z,x]),terminalTheme:y,fontSize:b,scrollback:null===e||void 0===e?void 0:e.scrollback},R=(0,u.Z)(S),C=(0,h.Z)((function(){!1!==(null===e||void 0===e?void 0:e.autoFit)&&(null===v||void 0===v||v.fit())}),{type:"debounce",wait:200}),k=(0,p.useRef)(null),_=(0,u.Z)(null===e||void 0===e?void 0:e.size);return(0,p.useLayoutEffect)((function(){if(r){var e=[];return function(){return n.apply(this,arguments)}().catch((function(e){e.message&&e.message.toLowerCase().includes("loading chunk")?f.c_.withScope((function(n){n.setExtra("message",e.message),n.setExtra("stack",e.stack),f.c_.captureException(new Error("Loading chunk failed"))})):T({error:e,origin:"Xterm: init"})})),function(){e.forEach((function(e){return e()}))}}function n(){return n=(0,i.Z)((function(){var n,t,i,u,l,c,s,f,d,p,h,v,y,w,b,E,T,Z,x,S;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return[4,Promise.all([z(),O()])];case 1:return i=o.Z.apply(void 0,[a.sent(),1]),u=(0,o.Z)(i[0],8),l=u[0].Terminal,c=u[1].FitAddon,s=u[2].SearchAddon,f=u[3].WebLinksAddon,d=u[4].Unicode11Addon,p=u[5].FileLinkAddon,h=u[6].CanvasAddon,v=u[7].WebglAddon,r?(w={allowProposedApi:!0,cursorBlink:!1,scrollback:null!==(y=R.current.scrollback)&&void 0!==y?y:1e3,tabStopWidth:4,fontFamily:"".concat(D,', replit-icons, Monaco, "Ubuntu Mono", Consolas, monospace'),fontSize:R.current.fontSize,lineHeight:1,fontWeight:I,fontWeightBold:A,drawBoldTextInBrightColors:!1,minimumContrastRatio:4.5,theme:R.current.terminalTheme,screenReaderMode:R.current.screenReaderMode},void 0!==(null===(n=_.current)||void 0===n?void 0:n.cols)&&(w.cols=_.current.cols),void 0!==(null===(t=_.current)||void 0===t?void 0:t.rows)&&(w.rows=_.current.rows),b=new l(w),R.current.fileLinking?(k.current=new p(R.current.fileLinking.openFile,R.current.fileLinking.listFiles),b.loadAddon(k.current)):k.current=null,E=new c,b.loadAddon(E),T=new f,b.loadAddon(T),Z=new s,b.loadAddon(Z),x=new d,b.loadAddon(x),b.unicode.activeVersion="11",b.onBell(g),b.open(r),e.push((function(){return b.dispose()})),function(){try{if(!U()){var e=new h;return void b.loadAddon(e)}var n=new v;b.loadAddon(n)}catch(r){var t=new h;b.loadAddon(t)}}(),S=!1,b.attachCustomKeyEventHandler((function(e){return!e.defaultPrevented&&(!!G(b,e)&&("shift"===e.key.toLowerCase()||"ctrl"===e.key.toLowerCase()||"alt"===e.key.toLowerCase()||"meta"===e.key.toLowerCase()||("tab"!==e.key.toLowerCase()||!S)&&(S="escape"===e.key.toLowerCase(),!0)))})),m({onKey:b.onKey.bind(b),onData:b.onData.bind(b),onResize:b.onResize.bind(b),write:b.write.bind(b),fit:function(){var e=r.getBoundingClientRect(),n=e.width,t=e.height;n>0&&t>0&&E.fit()},focus:function(){return b.focus()},clear:function(){return b.clear()},findPrevious:function(e){return Z.findPrevious(e)},findNext:function(e){return Z.findNext(e)},getSize:function(){return{cols:b.cols,rows:b.rows}},paste:function(e){return b.paste(e)},_term:b}),C(r),[2]):[2]}}))})),n.apply(this,arguments)}}),[r,C,R,T,_]),function(e,n,r){var i=r.screenReaderMode,o=r.fileLinking,a=r.terminalTheme;(0,p.useEffect)((function(){e&&a&&(e.options.theme=a)}),[e,a]),(0,p.useEffect)((function(){e&&(e.options.screenReaderMode=i)}),[e,i]),(0,p.useEffect)((function(){if(e)if(o){if(!n.current){var r=!1;return t.e(8767).then(t.bind(t,58767)).then((function(t){var i=t.FileLinkAddon;r||(n.current=new i(o.openFile,o.listFiles),e.loadAddon(n.current))})),function(){r=!0}}n.current.update(o.openFile,o.listFiles),n.current.reactivate()}else n.current&&n.current.deactivate()}),[e,o,n])}(null===v||void 0===v?void 0:v._term,k,S),(0,p.useEffect)((function(){var e=null===v||void 0===v?void 0:v._term;e&&b&&e.options.fontSize!==b&&(e.options.fontSize=b,e.refresh(0,e.rows-1),v.fit())}),[b,v]),[v,c]}function G(e,n){return!window.navigator.clipboard||("c"!==n.key.toLowerCase()||!n.ctrlKey||!n.shiftKey||("keyup"===n.type&&e.hasSelection()&&(0,c.Z)(e.getSelection()).catch((function(e){f.c_.withScope((function(n){n.setTag("xterm-clipboard",!0),n.setExtra("type","copy"),f.c_.captureException(e)}))})),n.preventDefault(),n.stopPropagation(),!1))}},99063:function(e,n,t){t.d(n,{I:function(){return o}});var r="\x1b[200~",i="\x1b[201~";function o(e){return function(e){return e.startsWith(r)&&e.endsWith(i)}(e)?e.slice(r.length,e.length-i.length):e}},60583:function(e,n,t){t.d(n,{a:function(){return u},f:function(){return l}});var r=t(28737),i=t(45317),o=t(58934),a=t(50959);function u(){var e={};return(0,r.F)().theme.id===i.Dy.id&&(e=(0,o.zL)(i.Sj.values)),e}function l(){var e=(0,r.F)(),n=e.theme,t=e.values;return(0,a.useMemo)((function(){return n.id===i.Dy.id?c(i.Sj.values):c(t)}),[n,t])}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.Sj.values;return{foreground:e.global.foregroundDefault,background:e.global.backgroundDefault,cursor:e.global.foregroundDefault,cursorAccent:e.global.backgroundHigher,selectionBackground:e.global.foregroundDefault,black:e.global.backgroundRoot,red:e.global.redStronger,green:e.global.accentPositiveDefault,yellow:e.global.yellowDefault,blue:e.global.blueStronger,magenta:e.global.magentaDefault,cyan:e.global.tealDefault,white:e.global.foregroundDefault,brightBlack:e.global.outlineDimmest,brightRed:e.global.redStrongest,brightGreen:e.global.accentPositiveStronger,brightYellow:e.global.yellowStronger,brightBlue:e.global.blueStrongest,brightMagenta:e.global.magentaStronger,brightCyan:e.global.tealStronger,brightWhite:e.global.foregroundDefault}}},34489:function(e,n,t){function r(e){var n=e.trim();return 0===n.length||n.startsWith("#")}function i(e,n){return e.split(n).length-1}function o(e){if(!e.includes("#"))return e;var n=e.split("#"),t=!1,r=[],o=!0,a=!1,u=void 0;try{for(var l,c=n[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var s=l.value;(1===i(s,'"')||i(s,"'"))&&(t?(t=!1,r.push(s)):t=!0),(0===r.length||t)&&r.push(s)}}catch(f){a=!0,u=f}finally{try{o||null==c.return||c.return()}finally{if(a)throw u}}return r.join("#")}function a(e,n){var t=e.trim();if(0===t.length)return t;var r=t.length-1,i='"'===t[0]&&'"'===t[r],o="'"===t[0]&&"'"===t[r];return(o||i)&&(t=t.slice(1,-1)),i&&(t=(t=t.replace(/\\./g,(function(e){return"\\n"===e?"\n":"\\r"===e?"\r":e}))).replace(/\\([^$])/g,"$1")),o||(t=t.replace(/(\\)?(\$)(\()?\{?([A-Z0-9_]+)?\}?/g,(function(e){var t=e.match(/(\\)?(\$)(\()?\{?([A-Z0-9_]+)?\}?/);if(null===t)return e;if("\\"===t[1]||"("===t[2])return t[0].slice(1);var r=t[4];return""!==r?n[r]||"":e}))),t}t.d(n,{Z:function(){return l}});var u=t(2272);var l={parse:function(e){var n={},t=e.split(/\n|\r|\r\n/),i=!0,u=!1,l=void 0;try{for(var c,s=t[Symbol.iterator]();!(i=(c=s.next()).done);i=!0){var f=c.value;if(!r(f)){var d=(f=o(f)).indexOf("="),p=f.indexOf(":");if(-1!==p||-1!==d){var h=d;-1!==p&&(p<d||-1===d)&&(h=p);var v=f.slice(0,h).replace(/^\s*(?:export\s+)?(.*?)\s*$/,"$1"),g=a(f.slice(h+1),n);n[v]=g}}}}catch(m){u=!0,l=m}finally{try{i||null==s.return||s.return()}finally{if(u)throw l}}return n},serialize:function(e){return Object.entries(e).reduce((function(e,n){var t=(0,u.Z)(n,2),r=t[0],i=t[1].replace(/\\([^$])/g,"\\\\$1").replace(/\$/g,"\\\\$$").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r");return e+="".concat(r,'="').concat(i,'"\n')}),"")}}},91046:function(e,n,t){t.d(n,{BP:function(){return a},BY:function(){return i},U4:function(){return r.U4},Vh:function(){return o},fF:function(){return r.fF},tr:function(){return r.tr}});var r=t(97836);function i(e){if(!e)throw new Error("Expected baseUrl");var n;try{n=new URL(e)}catch(t){throw new Error("baseUrl failed to parse as URL")}if("https:"!==n.protocol)throw new Error("baseUrl must use https");return n.href.replace(/\/$/,"")}function o(e,n){return"".concat(i(e),"/").concat(n)}function a(e){return o(e,"extension.json")}},97836:function(e,n,t){t.d(n,{MU:function(){return w},U4:function(){return g},fF:function(){return y},tr:function(){return m}});var r=t(44945),i=t(72963),o=t.n(i),a=t(14723),u=r.z.string({invalid_type_error:"tag must be a string"}).min(1,{message:"tag cannot be an empty string"}).max(64,{message:"tag cannot be longer than 64 characters"}),l=r.z.object({path:r.z.string({required_error:"path is required",invalid_type_error:"path must be a string"}).min(1,{message:"path can't be empty"}),label:r.z.string({required_error:"label is required",invalid_type_error:"label must be a string"}).min(1,{message:"label can't be empty"})}),c=r.z.object({image:r.z.string({invalid_type_error:"image must be a string"}).min(1,{message:"image can't be empty"}).nullish(),title:r.z.string({required_error:"title is required",invalid_type_error:"title must be a string"}).min(1,{message:"title can't be empty"}).max(60,{message:"title must be 60 characters or shorter"}),body:r.z.string({required_error:"description is required",invalid_type_error:"description must be a string"}).min(1,{message:"description can't be empty"}).max(512,{message:"description must be 512 characters or shorter"})}),s=r.z.object({glob:r.z.string({required_error:"glob is required",invalid_type_error:"glob must be a string"}).min(1,{message:"glob can't be empty"}).refine((function(e){return o()(e)}),{message:"glob must be a valid glob pattern"}),handler:r.z.string({required_error:"handler is required",invalid_type_error:"handler must be a string"}).min(1,{message:"handler can't be empty"}),name:r.z.string({required_error:"name is required",invalid_type_error:"name must be a string"}).min(1,{message:"name can't be empty"}).max(60,{message:"name must be 60 characters or shorter"}).nullish(),icon:r.z.string({required_error:"icon is required",invalid_type_error:"icon must be a string"}).min(1,{message:"icon can't be empty"}).nullish()}),f=r.z.object({handler:r.z.string({required_error:"handler is required",invalid_type_error:"handler must be a string"}).min(1,{message:"handler can't be empty"}),name:r.z.string({required_error:"name is required",invalid_type_error:"name must be a string"}).nullish(),icon:r.z.string({required_error:"icon is required",invalid_type_error:"icon must be a string"}).nullish()}),d=r.z.enum(a.l,{errorMap:function(e,n){return"invalid_enum_value"===e.code?{message:"The scopes available are: ".concat(a.l.join(", "))}:{message:n.defaultError}}}),p=r.z.object({name:d,reason:r.z.string({required_error:"reason is required",invalid_type_error:"reason must be a string"})}),h=r.z.object({page:r.z.string({required_error:"page is required",invalid_type_error:"page must be a string"})}),v=r.z.object({name:r.z.string({required_error:"name is required",invalid_type_error:"name must be a string"}).min(1,{message:"name can't be empty"}).max(60,{message:"name must be 60 characters or shorter"}),description:r.z.string({required_error:"description is required",invalid_type_error:"description must be a string"}).min(1,{message:"description can't be empty"}).max(255,{message:"description must be 255 characters or shorter"}),scopes:r.z.array(p).nullish(),longDescription:r.z.string({required_error:"longDescription is required",invalid_type_error:"longDescription must be a string"}).min(1,{message:"longDescription can't be empty"}).nullish(),icon:r.z.string({required_error:"icon is required",invalid_type_error:"icon must be a string"}).min(1,{message:"icon can't be empty. Omit the field instead."}).nullish(),tags:r.z.array(u).max(16,{message:"tags must have length 16 or lower"}).nullish(),coverImages:r.z.array(l).max(16,{message:"coverImages must have length 4 or lower"}).nullish(),fileHandlers:r.z.array(s).max(4,{message:"We are currently limiting extensions to have 4 fileHandlers at maximum. Reach out to us if you need more."}).nullish().refine((function(e){return!e||(e.length<2||e.every((function(e){return e.name&&e.icon})))}),{message:"When two fileHandlers are provided, they must specify a name and icon"}),tools:r.z.array(f).max(4,{message:"We are currently limiting extensions to have 4 tools at maximum. Reach out to us if you need more."}).nullish().refine((function(e){return!e||(e.length<2||e.every((function(e){return e.name&&e.icon})))}),{message:"When two tools are provided, they must specify a name and icon"}),website:r.z.string().url().nullish(),authorEmail:r.z.string().email().nullish(),background:h.nullish(),features:r.z.array(c).min(1,{message:"At least one feature is required"}).max(10,{message:"A maximum of ten features can be listed"}).nullish()});function g(e){var n=v.safeParse(e);return n.success?{manifest:n.data,error:null}:{manifest:null,error:n.error}}function m(e){var n=g(e);if(n.manifest)return n.manifest;throw n.error}function y(){var e,n,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{name:null!==(e=t.name)&&void 0!==e?e:"Unnamed Extension",description:null!==(n=t.description)&&void 0!==n?n:"(no description)"}}function w(e,n){return!!e.scopes&&void 0!==e.scopes.find((function(e){return e.name===n}))}},14723:function(e,n,t){t.d(n,{k:function(){return r},l:function(){return i}});var r=[{key:"read",friendlyName:"Read files",description:"Read any file in your Repl"},{key:"write-exec",friendlyName:"Write & Execute",description:"Write to any file in your Repl and execute any code"},{key:"repldb:read",friendlyName:"ReplDB Read",description:"Read any key, or list all keys under any prefix in the repldb belonging to your Repl"},{key:"repldb:write",friendlyName:"ReplDB Write",description:"Write or delete any key in the repldb belonging to your Repl"},{key:"experimental-api",friendlyName:"Experimental APIs",description:"Use experimental APIs that may be unstable, change in behavior, or be removed entirely"}];var i=r.map((function(e){return e.key}))},67121:function(e,n,t){t.d(n,{G:function(){return r},Z:function(){return a}});var r,i=t(2272);!function(e){e.NotFound="NotFound",e.NotAllowed="NotAllowed",e.ConcurrentReplLimit="ConcurrentReplLimit",e.FirewallDenied="FirewallDenied",e.LanguageTokenDenied="LanguageTokenDenied"}(r||(r={}));var o={"repl not found":r.NotFound,"not allowed to run at this time":r.NotAllowed,"language tokens are only for logged out people.":r.LanguageTokenDenied,"connect to unfirewalled repl from firewall mode":r.FirewallDenied};function a(e){var n=!0,t=!1,r=void 0;try{for(var a,u=Object.entries(o)[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var l=(0,i.Z)(a.value,2),c=l[0],s=l[1];if(e.message.toLowerCase().includes(c))return s}}catch(f){t=!0,r=f}finally{try{n||null==u.return||u.return()}finally{if(t)throw r}}return null}},59253:function(e,n,t){t.d(n,{MF:function(){return l},TI:function(){return u},lv:function(){return f},uC:function(){return c},yb:function(){return s}});var r=t(91926),i=t(87978),o=t(12583),a=t(26289);function u(e){var n=e.split("/")[0];return n===o.oh||n===o.AS}function l(e){return".env"===e||".breakpoints"===e||".cache"===e||e.startsWith(".cache/")}function c(e){return a.nh.includes(e)}function s(e,n){return Boolean(n&&r.Z.isLangFileBinary(n,e))}function f(e,n){if(!n)return!1;var t=(0,i.Xz)(e),r=!0,o=!1,a=void 0;try{for(var u,l=n[Symbol.iterator]();!(r=(u=l.next()).done);r=!0){var c=u.value;if(e.match(c))return!0;var s=!0,f=!1,d=void 0;try{for(var p,h=t[Symbol.iterator]();!(s=(p=h.next()).done);s=!0){if(p.value.match(c))return!0}}catch(v){f=!0,d=v}finally{try{s||null==h.return||h.return()}finally{if(f)throw d}}}}catch(v){o=!0,a=v}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return!1}}}]);
//# sourceMappingURL=1327-6cfd464f48745151.js.map