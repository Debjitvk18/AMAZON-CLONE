"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[127],{59976:function(e,n,t){t.d(n,{Z:function(){return k}});var r=t(74985),i=t(50959),o=t(52035),a=t(39541),l=t(25198),c=t(61284),u=t(85368),s=t(32104),d=t(1819),f=t(72006),p=t(43119),h=t(71440),v=t(24635);function m(){var e=(0,p.Z)(["\n  fragment ReplAnalyticsDurationResult on ReplAnalyticsDuration {\n    __typename\n    results {\n      __typename\n      value\n      count\n    }\n  }\n"]);return m=function(){return e},e}function g(){var e=(0,p.Z)(["\n  query ReplAnalyticsDuration(\n    $id: String!\n    $input: ReplAnalyticsDurationInput!\n  ) {\n    repl(id: $id) {\n      ... on Repl {\n        __typename\n        id\n        analyticsDuration(input: $input) {\n          ... on ReplAnalyticsDuration {\n            ...ReplAnalyticsDurationResult\n          }\n          ... on NotFoundError {\n            __typename\n            message\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return g=function(){return e},e}var y={},Z=(0,h.Ps)(m()),b=(0,h.Ps)(g(),Z);var w=t(28737),x=function(e){var n=e.data;o.kL.register(o.ZL);var t=(0,w.F)().values;return(0,r.tZ)(d.$Q,{options:{responsive:!0,maintainAspectRatio:!1,datasets:{bar:{categoryPercentage:1,barPercentage:1}},scales:{y:{ticks:{callback:function(e){if("number"===typeof e&&Math.floor(e)===e)return e}}},x:{ticks:{autoSkip:!1,minRotation:20,maxRotation:20,color:t.global.foregroundDimmer}}}},data:{labels:n.results.map((function(e){return e.value.replace("ms","").replace("s+","000+")})),datasets:[{borderWidth:0,data:n.results.map((function(e){return e.count})),backgroundColor:Array(n.results.length).fill(t.global.tealDefault)}]}})},k=function(e){var n,t,o=e.replId,d=e.start,p=e.hours,h=e.deployment,m=(0,i.useState)(void 0),g=m[0],Z=m[1],w=function(e){var n=(0,f.Z)({},y,e);return v.a(b,n)}({variables:{id:o,input:{start:d,hours:p,deployment:h}},ssr:!1,onCompleted:function(e){if("Repl"===e.repl.__typename)switch(e.repl.analyticsDuration.__typename){case"UserError":case"NotFoundError":Z(new Error(e.repl.analyticsDuration.message))}}}),k=w.data,C=w.loading,S=w.error;return S&&Z(S),(0,r.BX)(u.G,{css:a.l0.colWithGap(8),children:[(0,r.tZ)(c.xv,{variant:"subheadDefault",children:"Request Durations (ms)"}),(0,r.BX)(u.G,{children:[C?(0,r.tZ)(s.Z,{}):null,g?(0,r.tZ)(l.E,{text:g.message,colorway:"negative"}):null,"Repl"===(null===k||void 0===k||null===(n=k.repl)||void 0===n?void 0:n.__typename)&&"ReplAnalyticsDuration"===(null===(t=k.repl.analyticsDuration)||void 0===t?void 0:t.__typename)?(0,r.tZ)(x,{data:k.repl.analyticsDuration}):null]})]})}},30502:function(e,n,t){var r=t(72006),i=t(4405),o=t(74985),a=t(52035),l=t(56412),c=t(81995),u=t(1819),s=t(28737);a.kL.register(a.uw,a.f$,a.od,a.jn,a.u);n.Z=function(e){var n=e.labels,t=e.datasets,a=(0,s.F)().values,d={labels:n.map((function(e){return e.toISOString()})),datasets:t.map((function(e){return(0,i.Z)((0,r.Z)({},e),{data:e.data.map((function(e){var n=e.x,t=e.y;return{x:n.toISOString(),y:t}})),pointRadius:1,tension:.1})}))},f=n.length;return(0,o.tZ)(u.x1,{options:{responsive:!0,plugins:{tooltip:{callbacks:{title:function(e){var n=new Date(e[0].label);return(0,l.Z)(n,"MMM d, HH:mm (z)")}}}},scales:{y:{grid:{borderColor:a.global.backgroundHigher,color:a.global.backgroundHigher},ticks:{color:a.global.foregroundDimmer,callback:function(e){if("number"===typeof e&&Math.floor(e)===e)return e}},min:0},x:{grid:{borderColor:a.global.backgroundHighest,color:a.global.backgroundHighest},ticks:{color:a.global.foregroundDimmer,callback:function(e,t){var r=n[t];if(f<=24){if(r.getHours()%4!==0)return;return(0,l.Z)(r,"HH:mm")}if(r.toISOString()===(0,c.Z)(r).toISOString())return(0,l.Z)(r,"MMM d")}}}}},data:d})}},10434:function(e,n,t){t.d(n,{Z:function(){return S}});var r=t(74985),i=t(86306),o=t(50959),a=t(39541),l=t(25198),c=t(61284),u=t(85368),s=t(28737),d=t(32104),f=t(72006),p=t(43119),h=t(71440),v=t(24635);function m(){var e=(0,p.Z)(["\n  fragment ReplAnalyticsPageViewDataPoint on ReplAnalyticsPageViewsData {\n    __typename\n    timestamp\n    success\n    failure\n  }\n"]);return m=function(){return e},e}function g(){var e=(0,p.Z)(["\n  fragment ReplAnalyticsPageViews on ReplAnalyticsPageViews {\n    __typename\n    uniques\n    results {\n      ...ReplAnalyticsPageViewDataPoint\n    }\n  }\n  ","\n"]);return g=function(){return e},e}function y(){var e=(0,p.Z)(["\n  query ReplAnalyticsPageViews(\n    $id: String!\n    $input: ReplAnalyticsPageViewsInput!\n  ) {\n    repl(id: $id) {\n      ... on Repl {\n        __typename\n        id\n        analyticsPageViews(input: $input) {\n          ... on ReplAnalyticsPageViews {\n            ...ReplAnalyticsPageViews\n          }\n          ... on NotFoundError {\n            __typename\n            message\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return y=function(){return e},e}var Z={},b=(0,h.Ps)(m()),w=(0,h.Ps)(g(),b),x=(0,h.Ps)(y(),w);var k=t(30502),C=function(e){var n=e.data,t=e.start,o=e.hours,a=(0,s.F)().values,l=new Array(o).fill(0).map((function(e,n){return(0,i.Z)(t,n)})),c=n.results.reduce((function(e,n){return e.set(n.timestamp,n),e}),new Map),u=[{label:"Connected",data:l.map((function(e){var n;return{y:(null!==(n=c.get(e.toISOString()))&&void 0!==n?n:{success:0}).success,x:e}})),borderColor:a.global.accentPrimaryDefault,backgroundColor:a.global.accentPrimaryDefault},{label:"Failed",data:l.map((function(e){var n;return{y:(null!==(n=c.get(e.toISOString()))&&void 0!==n?n:{failure:0}).failure,x:e}})),borderColor:a.global.accentNegativeDefault,backgroundColor:a.global.accentNegativeDefault}];return(0,r.tZ)(k.Z,{labels:l,datasets:u})},S=function(e){var n,t,i=e.replId,s=e.start,p=e.hours,h=e.deployment,m=(0,o.useState)(void 0),g=m[0],y=m[1],b=function(e){var n=(0,f.Z)({},Z,e);return v.a(x,n)}({variables:{id:i,input:{start:s,hours:p,deployment:h}},ssr:!1,onCompleted:function(e){if("Repl"===e.repl.__typename)switch(e.repl.analyticsPageViews.__typename){case"UserError":case"NotFoundError":y(new Error(e.repl.analyticsPageViews.message))}}}),w=b.data,k=b.loading,S=b.error,T="Repl"===(null===w||void 0===w||null===(n=w.repl)||void 0===n?void 0:n.__typename)&&"ReplAnalyticsPageViews"===(null===(t=w.repl.analyticsPageViews)||void 0===t?void 0:t.__typename)?w.repl.analyticsPageViews:void 0,E=T?T.uniques:void 0;return S&&y(S),(0,r.BX)(u.G,{css:[a.l0.colWithGap(8)],children:[(0,r.BX)(u.G,{css:[a.l0.flex.row,a.l0.align.center,a.l0.justify.spaceBetween],children:[(0,r.tZ)(c.xv,{variant:"subheadDefault",multiline:!1,children:"Requests"}),E?(0,r.BX)(c.xv,{multiline:!1,children:[(0,r.tZ)("strong",{children:E})," unique visitors"]}):null]}),(0,r.BX)(u.G,{children:[k?(0,r.tZ)(d.Z,{}):null,g?(0,r.tZ)(l.E,{text:g.message,colorway:"negative"}):null,T?(0,r.tZ)(C,{data:T,start:s,hours:p}):null]})]})}},38068:function(e,n,t){t.d(n,{Z:function(){return S}});var r=t(9970),i=t(74985),o=t(86306),a=t(50959),l=t(39541),c=t(25198),u=t(61284),s=t(85368),d=t(32104),f=t(72006),p=t(43119),h=t(71440),v=t(24635);function m(){var e=(0,p.Z)(["\n  fragment ReplAnalyticsTimeSeriesDataPoint on ReplAnalyticsTimeSeriesData {\n    __typename\n    timestamp\n    value\n    count\n  }\n"]);return m=function(){return e},e}function g(){var e=(0,p.Z)(["\n  fragment ReplAnalyticsTimeSeries on ReplAnalyticsTimeSeries {\n    __typename\n    results {\n      ...ReplAnalyticsTimeSeriesDataPoint\n    }\n  }\n  ","\n"]);return g=function(){return e},e}function y(){var e=(0,p.Z)(["\n  query ReplAnalyticsTimeSeries(\n    $id: String!\n    $input: ReplAnalyticsTimeSeriesInput!\n  ) {\n    repl(id: $id) {\n      ... on Repl {\n        __typename\n        id\n        analyticsTimeSeries(input: $input) {\n          ... on ReplAnalyticsTimeSeries {\n            ...ReplAnalyticsTimeSeries\n          }\n          ... on NotFoundError {\n            __typename\n            message\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return y=function(){return e},e}var Z={},b=(0,h.Ps)(m()),w=(0,h.Ps)(g(),b),x=(0,h.Ps)(y(),w);var k=t(30502),C=function(e){var n=e.data,t=e.start,a=e.hours,l=e.colorFn,c=new Array(a).fill(0).map((function(e,n){return(0,o.Z)(t,n)})),u=n.results.reduce((function(e,n){var t,r=n.timestamp,i=n.value,o=n.count,a=null!==(t=e.get(i))&&void 0!==t?t:new Map;return a.set(r,o),e.set(i,a),e}),new Map),s=(0,r.Z)(u.keys()).map((function(e,n){var t=l(e,n),r=u.get(e);return{label:e,data:c.map((function(e){var n,t=null!==(n=null===r||void 0===r?void 0:r.get(e.toISOString()))&&void 0!==n?n:0;return{x:new Date(e),y:t}})),borderColor:t,backgroundColor:t}}));return(0,i.tZ)(k.Z,{labels:c,datasets:s})},S=function(e){var n,t,r=e.replId,o=e.title,p=e.metric,h=e.start,m=e.hours,g=e.deployment,y=e.colorFn,b=(0,a.useState)(void 0),w=b[0],k=b[1],S=function(e){var n=(0,f.Z)({},Z,e);return v.a(x,n)}({variables:{id:r,input:{metric:p,start:h,hours:m,deployment:g}},ssr:!1,onCompleted:function(e){if("Repl"===e.repl.__typename)switch(e.repl.analyticsTimeSeries.__typename){case"UserError":case"NotFoundError":k(new Error(e.repl.analyticsTimeSeries.message))}}}),T=S.data,E=S.loading,R=S.error,I="Repl"===(null===T||void 0===T||null===(n=T.repl)||void 0===n?void 0:n.__typename)&&"ReplAnalyticsTimeSeries"===(null===(t=T.repl.analyticsTimeSeries)||void 0===t?void 0:t.__typename)?T.repl.analyticsTimeSeries:void 0;return R&&k(R),(0,i.BX)(s.G,{css:[l.l0.colWithGap(8)],children:[(0,i.tZ)(s.G,{css:[l.l0.flex.row,l.l0.align.center,l.l0.justify.spaceBetween],children:(0,i.tZ)(u.xv,{variant:"subheadDefault",multiline:!1,children:o})}),(0,i.BX)(s.G,{children:[E?(0,i.tZ)(d.Z,{}):null,w?(0,i.tZ)(c.E,{text:w.message,colorway:"negative"}):null,I?(0,i.tZ)(C,{data:I,start:h,hours:m,colorFn:y}):null]})]})}},76232:function(e,n,t){t.d(n,{Z:function(){return G}});var r=t(9970),i=t(74985),o=t(50959),a=t(52035),l=t(39541),c=t(25198),u=t(61284),s=t(85368),d=t(32104),f=t(55021),p=t(1819),h=t(72006),v=t(43119),m=t(71440),g=t(24635);function y(){var e=(0,v.Z)(["\n  fragment ReplAnalyticsTopListResult on ReplAnalyticsTopList {\n    __typename\n    results {\n      __typename\n      value\n      count\n    }\n  }\n"]);return y=function(){return e},e}function Z(){var e=(0,v.Z)(["\n  query ReplAnalyticsTopList($id: String!, $input: ReplAnalyticsTopInput!) {\n    repl(id: $id) {\n      ... on Repl {\n        __typename\n        id\n        analyticsTopList(input: $input) {\n          ... on ReplAnalyticsTopList {\n            ...ReplAnalyticsTopListResult\n          }\n          ... on NotFoundError {\n            __typename\n            message\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return Z=function(){return e},e}var b={},w=(0,m.Ps)(y()),x=(0,m.Ps)(Z(),w);var k=t(28737),C=t(73194),S=t.n(C),T=function(e){var n=e.data,t=e.variant;if(0===n.results.length)return(0,i.tZ)(u.xv,{multiline:!1,children:"No results"});switch(t){case"map":return(0,i.tZ)(I,{data:n});case"pie":return(0,i.tZ)(R,{data:n,devices:!1});case"device-pie":return(0,i.tZ)(R,{data:n,devices:!0});case"table":return(0,i.tZ)(E,{data:n})}},E=function(e){var n=e.data;return a.kL.register(a.qi),(0,i.tZ)(s.G,{children:n.results.map((function(e){return(0,i.BX)(s.G,{css:[l.l0.rowWithGap(16),l.l0.py(8),{borderBottom:"1px solid ".concat(l.TV.outlineDimmest)},{"&:last-of-type":{borderBottom:"none"}}],children:[(0,i.tZ)(s.G,{css:[l.l0.flex.grow(1),l.l0.maxWidth("90%")],children:(0,i.tZ)(u.xv,{title:e.value,multiline:!1,children:e.value})}),(0,i.tZ)(s.G,{children:(0,i.tZ)(u.xv,{multiline:!1,children:e.count})})]})}))})},R=function(e){var n=e.data,t=e.devices,o=(0,k.F)().values,a=[o.global.blueDefault,o.global.blurpleDefault,o.global.greenDefault,o.global.limeDefault,o.global.magentaDefault,o.global.orangeDefault,o.global.pinkDefault,o.global.purpleDefault,o.global.redDefault,o.global.tealDefault,o.global.yellowDefault],l=new Map;return t?n.results.forEach((function(e){var n=e.value,t=e.count,r=n.match(/\(.*\)/);if(r&&r.length){var i=r[0].substring(1,r[0].length-1),o=l.get(i)||0;l.set(i,o+t)}else{var a=l.get("Unknown")||0;l.set("Unknown",a+t)}})):n.results.forEach((function(e){var n=e.value,t=e.count,r=n.replace(/ \(.*\)/,""),i=l.get(r)||0;l.set(r,i+t)})),(0,i.tZ)(p.by,{options:{radius:"80%"},data:{labels:(0,r.Z)(l.keys()),datasets:[{hoverOffset:20,borderWidth:2,data:(0,r.Z)(l.values()),backgroundColor:Array(l.size).fill(0).map((function(e,n){return a[n%a.length]}))}]}})},I=function(e){var n=e.data,r=S()((function(){return Promise.all([t.e(5381),t.e(4096),t.e(8742),t.e(7016)]).then(t.bind(t,17016))}),{loadableGenerated:{webpack:function(){return[17016]}},ssr:!1}),o=n.results.map((function(e){return{country:e.value,numHits:e.count}}));return(0,i.tZ)(s.G,{css:[l.l0.maxWidth(450)],children:(0,i.tZ)(r,{countries:o})})},G=function(e){var n,t,r=e.replId,a=e.start,p=e.hours,v=e.metric,m=e.deployment,y=e.count,Z=e.variant,w=void 0===Z?"table":Z,k=(0,f.CZ)(v),C=(0,o.useState)(void 0),S=C[0],E=C[1],R=function(e){var n=(0,h.Z)({},b,e);return g.a(x,n)}({variables:{id:r,input:{metric:v,start:a,hours:p,deployment:m,count:y}},ssr:!1,onCompleted:function(e){if("Repl"===e.repl.__typename)switch(e.repl.analyticsTopList.__typename){case"UserError":case"NotFoundError":E(new Error(e.repl.analyticsTopList.message))}}}),I=R.data,G=R.loading,D=R.error;return D&&E(D),(0,i.BX)(s.G,{css:l.l0.colWithGap(8),children:[(0,i.tZ)(u.xv,{variant:"subheadDefault",multiline:!1,children:"device-pie"===w?"Top Devices":"Top ".concat(k)}),(0,i.BX)(s.G,{children:[G?(0,i.tZ)(d.Z,{}):null,S?(0,i.tZ)(c.E,{text:S.message,colorway:"negative"}):null,"Repl"===(null===I||void 0===I||null===(n=I.repl)||void 0===n?void 0:n.__typename)&&"ReplAnalyticsTopList"===(null===(t=I.repl.analyticsTopList)||void 0===t?void 0:t.__typename)?(0,i.tZ)(T,{variant:w,data:I.repl.analyticsTopList}):null]})]})}},67036:function(e,n,t){t.d(n,{Z:function(){return c}});var r=t(74985),i=t(48306),o=t.n(i),a=(t(50959),t(97754)),l=t.n(a);function c(e){var n=e.unreadDot,t=e.size,i=void 0===t?12:t,a=e.count,c=void 0===a?null:a,u=c&&c>99,s=u?"99+":null===c||void 0===c?void 0:c.toString();return(0,r.BX)("span",{className:"jsx-1c7f3b9066c4c334",children:[(0,r.tZ)("svg",{width:i,height:i,viewBox:"0 0 24 24",fill:"none",style:{color:"currentColor"},xmlns:"http://www.w3.org/2000/svg",className:"jsx-1c7f3b9066c4c334",children:(0,r.tZ)("path",{d:"M21 15C21 15.5304 20.7893 16.0391 20.4142 16.4142C20.0391 16.7893 19.5304 17 19 17H7L3 21V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V15Z",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",className:"jsx-1c7f3b9066c4c334"})}),n?(0,r.tZ)("div",{className:"jsx-1c7f3b9066c4c334 unread-indicator"}):null,Boolean(c)&&(0,r.tZ)("div",{className:"jsx-1c7f3b9066c4c334 "+(l()("count",{overflow:u})||""),children:s}),(0,r.tZ)(o(),{id:"1c7f3b9066c4c334",children:"span.jsx-1c7f3b9066c4c334{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex}.unread-indicator.jsx-1c7f3b9066c4c334{width:5px;height:5px;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;background-color:var(--accent-red-default);-webkit-transform:translate(8px,-1px);-moz-transform:translate(8px,-1px);-ms-transform:translate(8px,-1px);-o-transform:translate(8px,-1px);transform:translate(8px,-1px);position:absolute}.count.jsx-1c7f3b9066c4c334{-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;background-color:var(--accent-negative-default);-webkit-transform:translate(50%,-50%);-moz-transform:translate(50%,-50%);-ms-transform:translate(50%,-50%);-o-transform:translate(50%,-50%);transform:translate(50%,-50%);position:absolute;min-width:16px;padding:2px 3px;height:16px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;color:white;font-size:var(--font-size-small)}.overflow.jsx-1c7f3b9066c4c334{-webkit-transform:translate(25%,-50%);-moz-transform:translate(25%,-50%);-ms-transform:translate(25%,-50%);-o-transform:translate(25%,-50%);transform:translate(25%,-50%)}"})]})}},91015:function(e,n,t){t.d(n,{AS:function(){return R},Hj:function(){return B},Rp:function(){return G},Tt:function(){return U},gE:function(){return _},j7:function(){return C},xT:function(){return T},yi:function(){return S}});var r=t(72006),i=t(43119),o=t(71440),a=t(24635),l=t(50216),c=t(86615);function u(){var e=(0,i.Z)(["\n  fragment AnnotationsUser on User {\n    id\n    username\n    image\n  }\n"]);return u=function(){return e},e}function s(){var e=(0,i.Z)(["\n  fragment AnnotationMessageContent on MessageContentType {\n    __typename\n    ... on TextMessageContentType {\n      text\n    }\n    ... on PreviewMessageContentType {\n      preview\n    }\n    ... on StatusMessageContentType {\n      status\n    }\n  }\n"]);return s=function(){return e},e}function d(){var e=(0,i.Z)(["\n  fragment AnnotationsUIMessage on AnnotationMessage {\n    id\n    user {\n      id\n      ...AnnotationsUser\n    }\n    anchor {\n      id\n    }\n    timeCreated\n    content {\n      __typename\n      ...AnnotationMessageContent\n    }\n    currentUserIsAuthor\n    seen\n  }\n  ","\n  ","\n"]);return d=function(){return e},e}function f(){var e=(0,i.Z)(["\n  fragment AnnotationsUIAnchor on AnnotationAnchor {\n    id\n    user {\n      id\n      ...AnnotationsUser\n    }\n    path\n    otVersion\n    indexStart\n    indexEnd\n    isResolved\n    isGeneral\n    messages {\n      id\n      ...AnnotationsUIMessage\n    }\n  }\n  ","\n  ","\n"]);return f=function(){return e},e}function p(){var e=(0,i.Z)(["\n  query AnnotationAnchorsByRepl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        annotationAnchors {\n          id\n          ...AnnotationsUIAnchor\n        }\n      }\n    }\n    currentUser {\n      id\n      username\n      image\n    }\n  }\n  ","\n"]);return p=function(){return e},e}function h(){var e=(0,i.Z)(["\n  mutation CreateAnnotationAnchor(\n    $annotationAnchor: AnnotationAnchorInput!\n    $annotationMessage: AnnotationMessageInput\n    $highlight: AnnotationHighlightInput\n  ) {\n    createAnnotationAnchor(\n      annotationAnchor: $annotationAnchor\n      annotationMessage: $annotationMessage\n      highlight: $highlight\n    ) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return h=function(){return e},e}function v(){var e=(0,i.Z)(["\n  mutation UpdateAnnotationAnchor(\n    $id: String!\n    $changes: AnnotationAnchorChangesInput!\n  ) {\n    updateAnnotationAnchor(id: $id, changes: $changes) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return v=function(){return e},e}function m(){var e=(0,i.Z)(["\n  mutation CreateAnnotationMessage(\n    $replId: String!\n    $anchorId: String!\n    $annotationMessage: AnnotationMessageInput!\n    $highlight: AnnotationHighlightInput\n  ) {\n    createAnnotationMessage(\n      replId: $replId\n      anchorId: $anchorId\n      annotationMessage: $annotationMessage\n      highlight: $highlight\n    ) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}function g(){var e=(0,i.Z)(["\n  mutation updateThreadPreview(\n    $threadId: String!\n    $messageId: String!\n    $message: String\n  ) {\n    updateThreadPreview(\n      threadId: $threadId\n      messageId: $messageId\n      message: $message\n    )\n  }\n"]);return g=function(){return e},e}function y(){var e=(0,i.Z)(["\n  subscription AnnotationUpdates($replId: String!) {\n    updatedAnnotation: annotationUpdatesByRepl(replId: $replId) {\n      id\n      ...AnnotationsUIAnchor\n    }\n  }\n  ","\n"]);return y=function(){return e},e}function Z(){var e=(0,i.Z)(["\n  subscription MessagePreview($threadId: String!) {\n    threadPreview(threadId: $threadId) {\n      userId\n      messageId\n      message\n    }\n  }\n"]);return Z=function(){return e},e}var b={},w=(0,o.Ps)(u()),x=(0,o.Ps)(s()),k=(0,o.Ps)(d(),w,x),C=(0,o.Ps)(f(),w,k),S=(0,o.Ps)(p(),C);function T(e){var n=(0,r.Z)({},b,e);return a.a(S,n)}var E=(0,o.Ps)(h(),C);function R(e){var n=(0,r.Z)({},b,e);return l.D(E,n)}var I=(0,o.Ps)(v(),C);function G(e){var n=(0,r.Z)({},b,e);return l.D(I,n)}var D=(0,o.Ps)(m(),C);function _(e){var n=(0,r.Z)({},b,e);return l.D(D,n)}var P=(0,o.Ps)(g());function B(e){var n=(0,r.Z)({},b,e);return l.D(P,n)}var A=(0,o.Ps)(y(),C);function U(e){var n=(0,r.Z)({},b,e);return c.m(A,n)}Z()},62199:function(e,n,t){t.d(n,{Ft:function(){return f},Vy:function(){return m},kL:function(){return v}});var r=t(57135),i=t(2272),o=t(96583),a=t(14806);function l(e,n,t){return c.apply(this,arguments)}function c(){return(c=(0,r.Z)((function(e,n,t){var r;return(0,o.__generator)(this,(function(i){switch(i.label){case 0:return e.path&&"number"===typeof e.indexStart&&"number"===typeof e.indexEnd&&e.otVersion?t===e.otVersion?[2,{path:e.path,indexStart:e.indexStart,indexEnd:e.indexEnd,otVersion:e.otVersion}]:[4,n({indexStart:e.indexStart,indexEnd:e.indexEnd,versionFrom:e.otVersion,versionTo:t})]:[2];case 1:return r=i.sent(),[2,{path:e.path,indexStart:r.indexStart,indexEnd:r.indexEnd,otVersion:t}]}}))}))).apply(this,arguments)}var u=t(45285),s=t(1468),d=t(50959);function f(e){return p.apply(this,arguments)}function p(){return(p=(0,r.Z)((function(e){var n,t,r,i,c;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return n=e.anchor,t=e.version,r=e.transformSelection,i=e.content,n.path?[4,l(n,r,t)]:[2,null];case 1:return(c=o.sent())?[2,{anchor:n,newSelection:c,newPosition:undefined,getHighlight:function(){if(c){var e=c.indexStart,n=c.indexEnd;try{var t=a.xv.of(i.split("\n")),r=t.lineAt(e),o=t.lineAt(n),l=t.sliceString(t.line(Math.max(r.number-2,1)).from,e),u=t.sliceString(n,t.line(Math.min(o.number+2,t.lines)).to);return{precode:l,code:t.sliceString(e,n),postcode:u}}catch(d){s.c_.captureException(d)}}},snippet:h(i,c)}]:[2,null]}}))}))).apply(this,arguments)}var h=function(e,n){var t=a.xv.of(e.split("\n")),r=t.lineAt(n.indexStart).number,i=t.lineAt(n.indexEnd).number,o=[];r===i&&(r=Math.max(1,r-1),i=Math.min(t.lines,i+1));for(var l=r;l<=i;l++)o.push(t.line(l).text);return{startLineNumber:r,lines:o}};function v(e){var n=(0,u.Z)().fs,t=d.useRef(null),r=d.useRef(null),o=(0,i.Z)(d.useState(!1),2),a=o[0],l=o[1];return d.useEffect((function(){if(e){var i=function(){r.current=null,l(!1)},o=n.watchTextFile(e,{onReady:function(e){var n=e.transformSelection,i=e.initialContent;t.current=i.toString(),r.current=n,l(!0)},onMoveOrDelete:function(){i()},onError:function(){i()},onChange:function(e){var n=e.latestContent;t.current=n}});return function(){i(),o()}}}),[e,n]),{contentRef:t,transformSelectionRef:r,loadedFile:a}}function m(e){var n=(0,u.Z)().fs,t=(0,i.Z)(d.useState(null),2),r=t[0],o=t[1],a=v(null===e||void 0===e?void 0:e.path),l=a.contentRef,c=a.loadedFile,p=a.transformSelectionRef;return d.useEffect((function(){(null===e||void 0===e?void 0:e.path)&&c&&p.current&&null!==l.current&&f({anchor:e,version:n.getOTVersion(e.path),transformSelection:p.current,content:l.current}).then((function(e){o(e)})).catch((function(e){o(null),s.c_.captureException(e)}))}),[n,e,c,p,l]),r}},35856:function(e,n,t){t.d(n,{n:function(){return s}});var r=t(72006),i=t(43119),o=t(71440),a=t(50216);function l(){var e=(0,i.Z)(["\n  mutation MarkMessagesAsSeen(\n    $replId: String!\n    $threadId: String\n    $messageIds: [String!]\n  ) {\n    markMessagesAsSeen(\n      replId: $replId\n      threadId: $threadId\n      messageIds: $messageIds\n    ) {\n      ... on AnnotationMessageList {\n        messages {\n          id\n          seen\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var c={},u=(0,o.Ps)(l());function s(e){var n=(0,r.Z)({},c,e);return a.D(u,n)}},73785:function(e,n,t){t.d(n,{Z:function(){return l}});var r=t(2272),i=t(50959),o=t(48330),a=t(35856);function l(e){var n=(0,o.Z)(),t=(0,r.Z)((0,a.n)(),1)[0];i.useEffect((function(){if(e){var r=e.messages.filter((function(e){return!e.seen})).map((function(e){return e.id}));0!==r.length&&t({variables:{replId:n,threadId:e.id,messageIds:r},optimisticResponse:{__typename:"RootMutationType",markMessagesAsSeen:{messages:r.map((function(e){return{id:e,seen:!0,__typename:"AnnotationMessage"}})),__typename:"AnnotationMessageList"}}})}}),[n,e,t])}},46179:function(e,n,t){t.d(n,{Z:function(){return d}});var r=t(72006),i=t(43119),o=t(71440),a=t(24635);function l(){var e=(0,i.Z)(["\n  query ThreadReplCollaborators($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        owner {\n          ... on User {\n            id\n            username\n            image\n          }\n          ... on Team {\n            id\n            username\n            image\n          }\n        }\n        permissions {\n          id\n          user {\n            id\n            username\n            image\n          }\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var c={},u=(0,o.Ps)(l());var s=t(48330);function d(){var e,n=function(e){var n=(0,r.Z)({},c,e);return a.a(u,n)}({variables:{replId:(0,s.Z)()}}).data;if("Repl"!==(null===n||void 0===n?void 0:n.repl.__typename))return[];var t=[];(null===(e=n.repl.owner)||void 0===e?void 0:e.username)&&"User"===n.repl.owner.__typename&&t.push(n.repl.owner);var i=!0,o=!1,l=void 0;try{for(var d,f=n.repl.permissions[Symbol.iterator]();!(i=(d=f.next()).done);i=!0){var p,h=d.value;(null===(p=h.user)||void 0===p?void 0:p.username)&&t.push(h.user)}}catch(v){o=!0,l=v}finally{try{i||null==f.return||f.return()}finally{if(o)throw l}}return t}},75015:function(e,n,t){t.d(n,{S:function(){return o}});var r=t(59053),i=t(7225);function o(e,n,t){if(i.Command.is(e))n.request.executeCommand(e.command,e.arguments);else{var o=e.edit,a=e.command;if(o&&(0,r.w)({edit:o,fs:t,client:n}),a&&"java.apply.workspaceEdit"===a.command&&a.arguments){var l=!0,c=!1,u=void 0;try{for(var s,d=a.arguments[Symbol.iterator]();!(l=(s=d.next()).done);l=!0){var f=s.value;i.WorkspaceEdit.is(f)&&(0,r.w)({edit:f,fs:t,client:n})}}catch(p){c=!0,u=p}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}}a&&n.request.executeCommand(a.command,a.arguments)}}},27256:function(e,n,t){t.d(n,{R$:function(){return te},Wo:function(){return ee},D2:function(){return q},XZ:function(){return oe},JJ:function(){return J},sN:function(){return le},ZP:function(){return ae},s3:function(){return ne}});var r=t(57389),i=t(72006),o=t(4405),a=t(2272),l=t(74985),c=t(50959),u=t(39541),s=t(61284),d=t(85368),f=t(99964),p=t(9839),h=t(12260),v=t(1050),m=t(15544),g=t(50575),y=t(22642),Z=t(24941),b=t(77806),w=t(49085),x=t(32973),k=t(42256),C=t(63128),S=t(35086),T=t(88477),E=t(71540),R=t(99397),I=t(21134),G=t(85577),D=t(13233),_=t(625),P=t(87076),B=t(17807),A=t(57913),U=t(32104),L=t(64491),X=t(45285),N=t(1468),M=t(1169),F=t(56169),O=t(75015),W=t(951),H=t(13405),V=t(82568),z=(0,V.X)({item:[B.gU.listItem,u.l0.p(8),u.l0.flex.row,u.l0.align.center,u.l0.mx(4),u.l0.borderRadius(4),{border:"none"}],text:[u.l0.pl(8),u.l0.flex.growAndShrink(1)],dropdownWrapper:[u.l0.height(16),u.l0.width(16),u.l0.center],loading:[u.l0.py(8),u.l0.px(12),u.l0.rowWithGap(8),u.l0.align.center,u.l0.color.foregroundDimmest],subItem:{paddingLeft:20,maxWidth:"100%"},none:[u.l0.py(8),u.l0.px(12),u.l0.flex.row,u.l0.align.center]});function j(e){var n=e.view,t=e.metadata,r=e.closeMenu,i=t.text,o=t.icon,u=(0,D.Z)().showError,f=c.useRef(!1),p=(0,a.Z)(c.useState(!1),2),h=p[0],v=p[1],m=(0,a.Z)(c.useState(null),2),g=m[0],y=m[1],Z=(0,X.Z)().fs,b=n.state.facet(W.Yp),w=(0,L.Z)(b||""),x=(0,F.H)(),k=x("label"),C=x("menu"),S=c.useRef(null),T=(0,a.Z)((0,M.XZ)(S,!1),4),E=(T[0],T[1]),R=T[2],I=T[3];return(0,M.Ym)(E,S),c.useEffect((function(){if(w&&b&&h&&w.isOpen(b)&&!f.current){var e=n.state,t=e.selection.main,r={start:(0,G.s)(e.doc,t.from),end:(0,G.s)(e.doc,t.to)};f.current=!0,w.request.codeActions(b,r).then((function(e){if((0,_.j)(_.U3.EDITOR_CONTEXT_MENU_CODE_ACTIONS_REQUESTED,{success:!("error"in e),numActions:"result"in e&&e.result?e.result.length:null}),"error"in e)return f.current=!1,y([]),u("Something went wrong fetching code actions"),void N.c_.captureException(new Error(e.error.message));null!==e.result&&0!==e.result.length?y(e.result):y([])}))}}),[w,h,b,g,n,u]),(0,l.BX)(d.G,{tag:"li",onClick:function(e){e.stopPropagation(),v((function(e){return!e}))},children:[(0,l.BX)(d.G,{css:z.item,children:[o,(0,l.tZ)(d.G,{css:z.text,children:(0,l.tZ)(s.xv,{id:k,multiline:!1,height:"singleLine",children:i})}),(0,l.tZ)(d.G,{css:z.dropdownWrapper,children:(0,l.tZ)(P.h,{alt:"Toggle Code Actions",tooltipHidden:!0,"aria-expanded":h,"aria-controls":C,onClick:function(){I(),v((function(e){return!e}))},innerRef:S,onKeyDown:R,children:(0,l.tZ)(A.Z,{rotate:h?90:0,style:{transition:"120ms ease"}})})})]}),h&&!g?(0,l.BX)(d.G,{css:z.loading,children:[(0,l.tZ)(U.Z,{}),(0,l.tZ)(s.xv,{multiline:!1,height:"singleLine",children:"Loading actions..."})]}):null,h&&g&&w?(0,l.BX)(d.G,{tag:"ul",role:"menubar","aria-orientation":"vertical","aria-labelledby":k,id:C,children:[g.map((function(e,n){return(0,l.tZ)(H.Z,{onClick:function(){(0,O.S)(e,w,Z),r()},children:(0,l.tZ)(d.G,{css:z.item,children:(0,l.tZ)(s.xv,{css:z.subItem,multiline:!1,height:"singleLine",children:e.title})})},n)})),0===g.length?(0,l.tZ)(d.G,{css:z.none,children:(0,l.tZ)(s.xv,{color:"dimmer",multiline:!1,height:"singleLine",children:"No actions available"})}):null]}):null]})}var q,$,Y=t(1809),K=t(72370),Q=t(85357),J="Divider";!function(e){e.Cut="Cut",e.Copy="Copy",e.Paste="Paste",e.JumpToDefinition="JumpToDefinition",e.JumpToTypeDefinition="JumpToTypeDefinition",e.JumpToImplementation="JumpToImplementation",e.FindReferences="FindReferences",e.Rename="Rename",e.SelectAllOccurrences="SelectAllOccurrences",e.CodeActions="CodeActions",e.CopyLinkToPos="CopyLinkToPos",e.ToggleBreakpoint="ToggleBreakpoint",e.StartThread="StartThread",e.ExplainCode="ExplainCode",e.GenerateCode="GenerateCode",e.TransformCode="TransformCode",e.SearchCode="SearchCode"}(q||(q={}));var ee=($={},(0,r.Z)($,q.Cut,{text:"Cut",icon:(0,l.tZ)(Z.Z,{}),keyboardShortcut:{cmdOrCtrlKey:!0,key:"X"}}),(0,r.Z)($,q.Copy,{text:"Copy",icon:(0,l.tZ)(b.Z,{}),keyboardShortcut:{cmdOrCtrlKey:!0,key:"C"}}),(0,r.Z)($,q.Paste,{text:"Paste",icon:(0,l.tZ)(w.Z,{}),keyboardShortcut:{cmdOrCtrlKey:!0,key:"V"}}),(0,r.Z)($,q.JumpToDefinition,{text:"Jump to definition",icon:(0,l.tZ)(x.Z,{}),keyboardShortcut:{cmdOrCtrlKey:!0,key:"F12"}}),(0,r.Z)($,q.JumpToTypeDefinition,{text:"Jump to type definition",icon:(0,l.tZ)(R.Z,{})}),(0,r.Z)($,q.JumpToImplementation,{text:"Jump to implementation",icon:(0,l.tZ)(I.Z,{})}),(0,r.Z)($,q.FindReferences,{text:"Find references",icon:(0,l.tZ)(h.Z,{}),keyboardShortcut:{shiftKey:!0,key:"F12"}}),(0,r.Z)($,q.Rename,{text:"Rename all occurrences",icon:(0,l.tZ)(v.Z,{}),keyboardShortcut:{key:"F2"}}),(0,r.Z)($,q.SelectAllOccurrences,{text:"Select all occurrences",icon:(0,l.tZ)(p.Z,{}),keyboardShortcut:{key:"F2",cmdOrCtrlKey:!0}}),(0,r.Z)($,q.CodeActions,{text:"Code actions",icon:(0,l.tZ)(E.Z,{}),keyboardShortcut:{key:".",cmdOrCtrlKey:!0}}),(0,r.Z)($,q.CopyLinkToPos,{text:"Copy link to position",icon:(0,l.tZ)(m.Z,{})}),(0,r.Z)($,q.ToggleBreakpoint,{text:"Toggle breakpoint",icon:(0,l.tZ)(g.Z,{})}),(0,r.Z)($,q.StartThread,{text:"Start thread",icon:(0,l.tZ)(y.Z,{}),keyboardShortcut:{key:"/",altKey:!0}}),(0,r.Z)($,q.ExplainCode,{text:"Explain code",icon:(0,l.tZ)(T.Z,{})}),(0,r.Z)($,q.GenerateCode,{text:"Generate code",icon:(0,l.tZ)(Y.Z,{}),keyboardShortcut:{key:"g",altKey:!0}}),(0,r.Z)($,q.TransformCode,{text:"Edit code",icon:(0,l.tZ)(K.Z,{}),keyboardShortcut:{key:"t",altKey:!0}}),(0,r.Z)($,q.SearchCode,{text:"Search code",icon:(0,l.tZ)(h.Z,{})}),$);function ne(e){return e===J}var te=35;function re(e){var n=e.dom,t=e.verticalOffset,r=e.coords,i=r.x,o=r.y,a=n.getBoundingClientRect().bottom,l=document.documentElement.clientWidth;if(i+275>l&&(i=l-275-5),o+t>a){var c=o-t;return c<0?{x:i+5,y:0}:{x:i,y:c}}return{x:i,y:o}}var ie=(0,V.X)({ul:[u.l0.maxHeight("100vh"),u.l0.overflowY("auto"),{"& > button":[B.gU.nofill,{margin:0,borderRadius:0}]}],divider:[u.l0.mx(8),u.l0.my(2),{borderBottom:"1px solid ".concat(u.TV.outlineDimmer)}],menuItem:[u.l0.p(8),u.l0.pr(4),u.l0.flex.row,u.l0.align.center],actionMenuItem:[u.l0.px(8),u.l0.flex.growAndShrink(1),u.l0.align.start]});function oe(e){var n=e.view,t=e.coords,r=e.closeMenu,i=e.verticalOffset,o=e.children,s=e.width,p=void 0===s?275:s,h=n.dom,v=(0,f.Z)(r,[]),m=(0,a.Z)(c.useState((function(){return re({dom:h,verticalOffset:i,coords:t})})),2),g=m[0],y=g.x,Z=g.y,b=m[1];return c.useEffect((function(){b(re({dom:h,verticalOffset:i,coords:t}))}),[t,i,h]),(0,l.tZ)(C.Tg,{innerRef:v,background:"higher",className:"cm-custom-context-menu",css:[u.l0.position.fixed,u.l0.flex.column,u.l0.justify.center,u.l0.borderRadius(8),u.l0.shadow(2),u.l0.width(p),u.l0.zIndex(101),{left:y,top:Z,overflow:"hidden",border:"1px solid ".concat(u.TV.outlineDefault)}],children:(0,l.tZ)(Q.ZP,{children:(0,l.tZ)(M.uP,{options:{direction:"vertical"},children:(0,l.tZ)(d.G,{tag:"ul",role:"menubar","aria-orientation":"vertical","aria-label":"Context",css:ie.ul,children:o})})})})}function ae(e){var n=e.view,t=e.closeMenu,r=e.actions,a=e.onAction,c=r.filter((function(e){switch(e){case q.TransformCode:case q.ExplainCode:return!n.state.selection.main.empty;case q.StartThread:return 0!==n.state.doc.length;default:return!0}})),u=c.map((function(e){return ne(e)?1:te})).reduce((function(e,n){return e+n}),0);return(0,l.tZ)(oe,(0,o.Z)((0,i.Z)({verticalOffset:u},e),{children:c.map((function(e,r){return ne(e)?(0,l.tZ)(d.G,{css:ie.divider},r):e===q.CodeActions?(0,l.tZ)(j,{view:n,closeMenu:t,metadata:ee[e]},e):(0,l.tZ)(H.Z,{onClick:function(n){var r=(0,k.j)(n);a(e,{isCmdOrCtrl:r}),t()},children:(0,l.tZ)(ce,{item:e})},e)}))}))}function le(e){var n=e.children,t=e.item;return(0,l.tZ)(d.G,{"data-cy":t?"context-menu-".concat(t):null,css:ie.menuItem,children:n})}function ce(e){var n=e.item,t=ee[n],r=t.text,i=t.icon,o=t.keyboardShortcut;return(0,l.BX)(le,{item:n,children:[i,(0,l.tZ)(d.G,{css:ie.actionMenuItem,children:(0,l.tZ)(s.xv,{multiline:!1,height:"singleLine",children:r})}),o?(0,l.tZ)(d.G,{children:(0,l.tZ)(S.ZP,{shortcut:o,size:"small",css:u.l0.color.foregroundDimmest})}):null]})}},13405:function(e,n,t){var r=t(2272),i=t(74985),o=t(1169),a=t(85368),l=t(17807),c=t(39541),u=t(50959),s=t(43312),d=a.K.button,f=(0,s.iv)([c.l0.reset.button,l.gU.listItem,c.l0.mx(4),c.l0.borderRadius(4),{border:"none"}]);n.Z=function(e){var n=e.onClick,t=e.children,a=u.useRef(null),l=(0,r.Z)((0,o.XZ)(a,!1),4),c=l[0],s=l[1],p=l[2],h=l[3];return(0,o.Ym)(s,a),(0,i.tZ)(d,{ref:a,role:"menuitem",css:f,onClick:function(e){h(),n(e)},onKeyDown:p,tabIndex:c,children:t})}},83293:function(e,n,t){t.d(n,{q:function(){return G},J:function(){return I}});var r=t(72006),i=t(4405),o=t(77637),a=t(2272),l=t(74985),c=t(66091),u=t(5683),s=t(45347),d=t(14806),f=t(69994),p=t(63230),h=f.tk.baseTheme({".cm-diff-inserted":{backgroundColor:"#0053A644",borderLeft:"#0053A6 solid 3px"},".cm-diff-deleted":{backgroundColor:"#c93c3733",borderLeft:"#c93c37 solid 3px"}}),v=f.p.line({attributes:{class:"cm-diff-inserted"}}),m=f.p.line({attributes:{class:"cm-diff-deleted"}}),g=d.Py.define({map:function(e,n){return e.map(n)}}),y=function(e){(0,u.Z)(t,e);var n=(0,s.Z)(t);function t(){return(0,c.Z)(this,t),n.apply(this,arguments)}var r=t.prototype;return r.toDOM=function(){var e=document.createElement("div");return e.className="cm-diff-alignment cm-line",e.innerHTML="&nbsp;",e},r.ignoreEvent=function(){return!1},t}(f.l9);function Z(e){var n=new d.f_,t=new y;e.sort((function(e,n){return e.character-n.character}));var r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0)for(var c=a.value,u=c.character,s=c.padding,p=0;p<s;p++)n.add(u,u,f.p.widget({widget:t,side:-1,block:!0}))}catch(h){i=!0,o=h}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return n.finish()}function b(e){var n=e.coloredLines,t=e.colorDecoration,r=f.lg.fromClass((function e(r){(0,c.Z)(this,e);var i=new d.f_,o=!0,a=!1,l=void 0;try{for(var u,s=n[Symbol.iterator]();!(o=(u=s.next()).done);o=!0){var f=u.value,p=r.state.doc.line(f);i.add(p.from,p.from,t)}}catch(h){a=!0,l=h}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}this.decorations=i.finish()}),{decorations:function(e){return e.decorations}}),i=d.QQ.define({create:function(){return f.p.none},update:function(e,n){var t=!0,r=!1,i=void 0;try{for(var o,a=n.effects[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;if(l.is(g))return l.value}}catch(c){r=!0,i=c}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n.docChanged?e.map(n.changes):e},provide:function(e){return f.tk.decorations.from(e)}});return[h,r,i]}var w=function(){var e=function(e,n){return f.tk.domEventHandlers({scroll:function(t,r){if(r===e&&t.target){var i=t.target;if(i.scrollTop){var o=i.scrollTop;n.scrollDOM.scrollTo({top:o})}}}})},n=new d.F6,t=new d.F6;return{extensions:function(){return{right:n.of([]),left:t.of([])}},setup:function(r,i){r.dispatch({effects:t.reconfigure(e(r,i))}),i.dispatch({effects:n.reconfigure(e(i,r))})}}},x=t(34227),k=t(64804),C=t(50959),S=t(6394),T=w(),E=T.extensions,R=T.setup;function I(e){var n=e.left,t=e.right,l=e.showDiffDecorations,c=void 0===l||l,u=n.code,s=(0,o.Z)(n,["code"]),f=t.code,h=(0,o.Z)(t,["code"]),y=(0,k.Z)(),w=y.ref,x=y.view,S=(0,k.Z)(),T=S.ref,I=S.view,G=C.useMemo((function(){var e=E().left;return s.extensions?[s.extensions,e]:e}),[s.extensions]),D=C.useMemo((function(){var e=E().right;return h.extensions?[h.extensions,e]:e}),[h.extensions]);s=(0,i.Z)((0,r.Z)({},s),{extensions:G}),h=(0,i.Z)((0,r.Z)({},h),{extensions:D});var _=(0,a.Z)(C.useState(!1),2),P=_[0],B=_[1],A=(0,a.Z)(C.useState(!1),2),U=A[0],L=A[1];return C.useEffect((function(){if(x&&I&&P&&U&&c){var e=setTimeout((function(){R(x,I),function(e,n){var t=(0,p.Bz)(e.state.doc.sliceString(0),n.state.doc.sliceString(0));e.dispatch({effects:[d.Py.appendConfig.of(b({coloredLines:t.leftColored.sort((function(e,n){return e-n})),colorDecoration:m})),g.of(Z(t.leftPadded))]}),n.dispatch({effects:[d.Py.appendConfig.of(b({coloredLines:t.rightColored.sort((function(e,n){return e-n})),colorDecoration:v})),g.of(Z(t.rightPadded))]})}(x,I)}));return function(){return clearTimeout(e)}}}),[x,I,P,U,c]),C.useEffect((function(){x&&(x.dispatch({changes:{from:0,to:x.state.doc.length,insert:u}}),B(!0))}),[u,x]),C.useEffect((function(){I&&(I.dispatch({changes:{from:0,to:I.state.doc.length,insert:f}}),L(!0))}),[f,I]),{left:{view:x,ref:w,code:u,options:s,ready:P},right:{view:I,ref:T,code:f,options:h,ready:U}}}function G(e){var n=e.diffViewer,t=(0,o.Z)(e,["diffViewer"]),i=(0,r.Z)({},n.options,t);return(0,l.BX)(l.HY,{children:[(0,l.tZ)(x.Z,(0,r.Z)({ref:n.ref,css:{height:n.ready?0:"auto"},initialDoc:n.code,lineWrapping:!1,readOnly:!0},i)),!n.ready&&(0,l.tZ)(S.Z,{code:n.code,language:i.language,filePath:i.filePath,lineNumbers:!i.hideGutter,fontSize:i.fontSize})]})}},63230:function(e,n,t){t.d(n,{Bz:function(){return v},PO:function(){return m}});var r=t(66091),i=t(2272),o=t(96583),a=t(85386),l=t.n(a),c=l().DIFF_DELETE,u=l().DIFF_INSERT,s=l().DIFF_EQUAL;function d(e,n){var t=new(l()),r=t.diff_linesToChars_(e,n),i=r.chars1,o=r.chars2,a=r.lineArray,c=t.diff_main(i,o,!1);return t.diff_charsToLines_(c,a),c}function f(e){return e.split("\n").length-1}function p(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0===n)return 0;var r=e.indexOf("\n",t);return-1===r?null:1===n?r+1:p(e,n-1,r+1)}function h(e,n,t){if(e>0){var r=p(t,n);if(null!==r)return{lineNumber:n,character:r,padding:e}}return null}function v(e,n){for(var t,r,o=d(e+((t="\n"===e[e.length-1])?"":"\n"),n+((r="\n"===n[n.length-1])?"":"\n")),a=0,l=0,p=[],v=[],m=[],g=[],y=0,Z=0,b=0;b<o.length;b++){var w=(0,i.Z)(o[b],2),x=w[0],k=f(w[1]);switch(x){case c:var C,S=(0,i.Z)(null!==(C=o[b+1])&&void 0!==C?C:[],2),T=S[0],E=S[1];a+=k;for(var R=0;R<k;R++)p.push(a-R);var I=k;T===u&&(I-=f(E));var G=h(I,l,n);G&&g.push(G);break;case u:var D,_=(0,i.Z)(null!==(D=o[b-1])&&void 0!==D?D:[],2),P=_[0],B=_[1];l+=k;for(var A=0;A<k;A++)v.push(l-A);var U=k;P===c&&(U-=f(B));var L=h(U,a,e);L&&m.push(L);break;case s:l>Z&&(Z=l),a>y&&(y=a),a+=k,l+=k}}var X=m.filter((function(e){return e.lineNumber<Z})),N=g.filter((function(e){return e.lineNumber<y}));return{leftPadded:X,rightPadded:N,leftColored:p,rightColored:v,changedTrailingNewline:t!==r,leftTrailingNewline:t,rightTrailingNewline:r}}var m=function(){function e(n,t){(0,r.Z)(this,e),this.deleted=new Set,this.inserted=new Map,this.linePositions=new Map,this.lineLengths=new Map,this.currentTrailingNewline="\n"===n[n.length-1],this.otherTrailingNewline="\n"===t[t.length-1],this.changedTrailingNewline=this.currentTrailingNewline!==this.otherTrailingNewline;var o=d(n,t),a=[],l=!0,f=!1,p=void 0;try{for(var h,v=o[Symbol.iterator]();!(l=(h=v.next()).done);l=!0){var m=(0,i.Z)(h.value,2),g=m[0],y=m[1].split("\n");""===y[y.length-1]&&y.pop();var Z=!0,b=!1,w=void 0;try{for(var x,k=y[Symbol.iterator]();!(Z=(x=k.next()).done);Z=!0){var C=x.value;a.push([g,C])}}catch(X){b=!0,w=X}finally{try{Z||null==k.return||k.return()}finally{if(b)throw w}}}}catch(X){f=!0,p=X}finally{try{l||null==v.return||v.return()}finally{if(f)throw p}}this.currentTrailingNewline&&!this.otherTrailingNewline?a.push([c,""]):!this.currentTrailingNewline&&this.otherTrailingNewline?a.push([u,""]):this.currentTrailingNewline&&this.otherTrailingNewline&&a.push([s,""]);var S=1,T=0,E=1,R=!0,I=!1,G=void 0;try{for(var D,_=a[Symbol.iterator]();!(R=(D=_.next()).done);R=!0){var P=(0,i.Z)(D.value,2),B=P[0],A=P[1];switch(B){case c:this.linePositions.set(S,T),this.lineLengths.set(S,A.length),this.deleted.add(S),T+=A.length+1,S++;break;case u:var U=S-1,L=this.inserted.get(U);L||(L=[],this.inserted.set(U,L)),L.push({number:E,content:A}),E++;break;case s:this.linePositions.set(S,T),this.lineLengths.set(S,A.length),T+=A.length+1,S++,E++}}}catch(X){I=!0,G=X}finally{try{R||null==_.return||_.return()}finally{if(I)throw G}}}var n=e.prototype;return n.startInsertions=function(){var e=this.inserted.get(0);return e&&0!==e.length?e:null},n.lineIsDeleted=function(e){return this.deleted.has(e)},n.lineInsertions=function(e){var n=this.inserted.get(e);return n&&0!==n.length?n:null},n.lineInsertedContent=function(e){var n=this.lineInsertions(e);return n?n.map((function(e){return e.content})).join("\n"):null},n.offsetFor=function(e){var n,t,r=0;r+=null!==(t=null===(n=this.inserted.get(0))||void 0===n?void 0:n.length)&&void 0!==t?t:0;for(var i=1;i<e;i++){this.lineIsDeleted(i)&&r--;var o=this.lineInsertions(i);o&&(r+=o.length)}return r},n.linePosition=function(e){var n;return null!==(n=this.linePositions.get(e))&&void 0!==n?n:null},n.lineLength=function(e){var n;return null!==(n=this.lineLengths.get(e))&&void 0!==n?n:null},n.line=function(e){var n=this.linePosition(e),t=this.lineLength(e);return null===n||null===t?null:{number:e,from:n,to:n+t,length:t,offset:this.offsetFor(e),isDeleted:this.lineIsDeleted(e),insertions:this.lineInsertions(e)}},n.lines=function(){var e,n,t,r,a,l,c,u,s;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:e=!0,n=!1,t=void 0,o.label=1;case 1:o.trys.push([1,6,7,8]),r=this.linePositions[Symbol.iterator](),o.label=2;case 2:if(e=(a=r.next()).done)return[3,5];if(l=(0,i.Z)(a.value,1),c=l[0],!(u=this.line(c)))throw new Error("line should not be null");return[4,u];case 3:o.sent(),o.label=4;case 4:return e=!0,[3,2];case 5:return[3,8];case 6:return s=o.sent(),n=!0,t=s,[3,8];case 7:try{e||null==r.return||r.return()}finally{if(n)throw t}return[7];case 8:return[2]}}))},e}()},88253:function(e,n,t){t.d(n,{U:function(){return l}});var r=t(69994),i=t(55143),o=r.tk.theme({".cm-content":{paddingBottom:"".concat(80,"px")}}),a=r.tk.theme({".cm-content":{paddingBottom:"".concat(400,"px")}}),l=new i.j((function(e){return e?o:a}))},16988:function(e,n,t){t.d(n,{v:function(){return p}});var r=t(11619),i=t(64918),o=t(5894),a=t(72006),l=t(43119),c=t(71440),u=t(24635);function s(){var e=(0,l.Z)(['\n  query ChatEngine {\n    currentUser {\n      id\n      defaultEngine: gateVariation(feature: "flag-ghostwriter-chat-engine")\n      hasOverride: gate(feature: "flag-ghostwriter-chat-engine-override")\n    }\n  }\n']);return s=function(){return e},e}var d={},f=(0,c.Ps)(s());function p(){var e,n,t=(0,r.Z)().preferences,l=function(e){var n=(0,a.Z)({},d,e);return u.a(f,n)}().data,c=null===l||void 0===l||null===(e=l.currentUser)||void 0===e?void 0:e.hasOverride,s=null===t||void 0===t?void 0:t.chatEngine,p=null===l||void 0===l||null===(n=l.currentUser)||void 0===n?void 0:n.defaultEngine;return c&&s&&(0,i.uL)(s)?s:(0,i.uL)(p)?p:o.Fp}},31858:function(e,n,t){t.d(n,{Z:function(){return f}});var r=t(11619),i=t(98416),o=t(72006),a=t(43119),l=t(71440),c=t(24635);function u(){var e=(0,a.Z)(['\n  query CompleteCodeEngine {\n    currentUser {\n      id\n      defaultEngine: gateVariation(feature: "flag-ghostwriter-complete-engine")\n      hasOverride: gate(feature: "flag-code-suggestion-engine")\n    }\n  }\n']);return u=function(){return e},e}var s={},d=(0,l.Ps)(u());function f(){var e,n,t,a=(0,r.Z)().preferences,l=function(e){var n=(0,o.Z)({},s,e);return c.a(d,n)}().data,u=null===a||void 0===a?void 0:a.completeCodeEngine;if(u&&(null===l||void 0===l||null===(e=l.currentUser)||void 0===e?void 0:e.hasOverride)&&i.vw.has(u))return{engine:u,settings:i.Uw[u]};var f=null!==(t=null===l||void 0===l||null===(n=l.currentUser)||void 0===n?void 0:n.defaultEngine)&&void 0!==t?t:i.OO;return{engine:f,settings:i.Uw[f]}}},69051:function(e,n,t){t.d(n,{Z:function(){return ke}});var r=t(45853),i=t(11619),o=t(48330),a=t(18171),l=t(29457),c=t(49520),u=t(50959),s=t(9608),d=t(66091),f=t(95844),p=t(65210),h=function(){function e(){(0,d.Z)(this,e),this.cache=new f.L(p.vq)}var n=e.prototype;return n.has=function(e){return this.cache.has(e)},n.get=function(e){return this.cache.get(e)},n.set=function(e,n){this.cache.set(e,n)},n.setSuggestion=function(e,n){this.cache.set(e,JSON.stringify({text:n})+"\n")},e}(),v=t(88733),m=t(57135),g=t(72006),y=t(4405),Z=t(96583),b=t(23398),w=t(68935),x=t(14806),k=t(69994),C=t(88254),S=t(45634),T=t(625);var E,R=t(86763),I=t.n(R),G=t(2272),D=t(74985),_=t(40675),P=t(45447),B=t(13233),A=t(11969),U=t(2041),L=t(39541),X=t(85368),N=t(61284),M=t(93658),F=function(e){var n=e.onClose,t=(0,B.Z)(),r=t.showNotice,i=t.hideMessage,o=(0,G.Z)(u.useState(!1),2),a=o[0],l=o[1];return(0,u.useEffect)((function(){var e=function(){l(!0),i(n)},n=r((0,D.BX)(X.G,{css:[L.l0.rowWithGap(4),L.l0.align.center],children:[(0,D.tZ)(M.Z,{}),(0,D.BX)(N.xv,{multiline:!1,css:{fontSize:"calc(".concat(L.TV.fontSizeSubheadDefault," - 1px)"),"@media (max-width: 768px)":L.l0.fontSize(14)},children:["Thanks for trying Ghostwriter!",(0,D.tZ)("a",{role:"button",tabIndex:0,css:{color:"inherit",textDecoration:"underline",marginLeft:"3px"},onKeyPress:function(n){"Enter"!==n.key&&" "!==n.key||(n.preventDefault(),e())},onClick:function(n){n.preventDefault(),e()},children:"Give feedback"})]})]}),0,{color:L.TV.accentPrimaryStrongest,fontWeight:L.TV.fontWeightRegular})}),[i,r,n]),(0,D.tZ)(P.b5,{children:(0,D.tZ)(U.u,{isOpen:a,onRequestClose:function(){l(!1)},children:(0,D.tZ)(_.Z,{setFeedbackFormOpen:l,feature:_.l.GhostWriter})})})};!function(e){e.Acceptance="ghostWriter.acceptance",e.Rejection="ghostWriter.rejection"}(E||(E={}));var O=t(24601),W=t(38353),H=t(36577),V=t(57806);function z(e){var n=e.onComplete,t=e.onEscape,r=null,i=null;return k.tk.domEventHandlers({touchstart:function(e){i=null,r=e.targetTouches[0].clientX},touchmove:function(e){i=e.targetTouches[0].clientX},touchend:function(e,o){if(r&&i)return r-i<-50&&n(o),t(o),!0}})}var j=t(1468),q=t(250);var $=t(49500);function Y(e,n){var t=null,r=function(){};return{queue:function(i){t&&clearTimeout(t);var o=function(){(0,T.j)(T.U3.CODE_SUGGESTION_USED,(0,g.Z)({type:e},i))};t=setTimeout(o,n),r=o},flush:function(){t&&clearTimeout(t),r()},cancel:function(){t&&clearTimeout(t)}}}function K(e){var n=e.language,t=e.infill,r=e.completeCode,i=e.decorations,o=e.logMetadata,a=e.newRendering,l=e.keybindings,c=function(){var e;return{abort:function(){null===e||void 0===e||e.abort()},requestSignal:function(){var n=new AbortController;return null===e||void 0===e||e.abort(),e=n,n.signal}}}(),u=Y("suggestionPresented",500),s=Y("suggestionCompletelyPresented",500),d=null,f=I()(function(){var e=(0,m.Z)((function(e){var i,a,l,f,h,m,x,k,C,S,E,R,I,G,D,_,P,B,A,U;return(0,Z.__generator)(this,(function(Z){switch(Z.label){case 0:if(a=e.state,l=a.doc,f=a.selection,0===(h=f.main.head))return[2];if(m=l.sliceString(h-1,h),[";",")","}","]","{"].includes(m))return[2];if(!(x=l.sliceString(Math.max(0,h-p.ed),h))||x.length<p.jr)return[2];d=x.length,x=e.state.facet(w.c)+"\n"+x,k=t?function(e){for(var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=e.split("\n"),r=0;r<t.length;r++){var i=t[r];if(i[0]&&i[0].match(/\S/))return n?t.slice(0,r).join("\n")+"\n":t.slice(0,r+1).join("\n")}return e}(l.sliceString(h),p.NX.has(n)):void 0,C=(0,H.i)(e.state)?p.Pz:p._7,S=null===(i=x.match(/[^\s]([ \t]+)$/))||void 0===i?void 0:i[1],Z.label=1;case 1:Z.trys.push([1,14,,15]),E=!0,R=!1,I=!1,Z.label=2;case 2:Z.trys.push([2,7,8,13]),D=(0,v.Z)(r({code:S?x.slice(0,-S.length):x,suffix:k,maxTokens:C,signal:c.requestSignal()})),Z.label=3;case 3:return[4,D.next()];case 4:if(!(R=!(_=Z.sent()).done))return[3,6];if(P=_.value,B=P,"active"===(0,b.LR)(e.state))return c.abort(),[3,6];if(E&&S){if(!B.startsWith(S))return c.abort(),[3,6];B=B.slice(S.length)}E&&(j.c_.addBreadcrumb({category:"ghostwriter",message:"Suggestion presented",level:"debug"}),u.queue((0,y.Z)((0,g.Z)({},o),{prefixLength:d}))),e.dispatch({effects:E?O.t8.of({code:B,language:n,infill:t}):O.R3.of(B)}),E=!1,Z.label=5;case 5:return R=!1,[3,3];case 6:return[3,13];case 7:return A=Z.sent(),I=!0,G=A,[3,13];case 8:return Z.trys.push([8,,11,12]),R&&null!=D.return?[4,D.return()]:[3,10];case 9:Z.sent(),Z.label=10;case 10:return[3,12];case 11:if(I)throw G;return[7];case 12:return[7];case 13:return!1!==E?(j.c_.addBreadcrumb({category:"ghostwriter",message:"Exited completeCode iteration with no suggestion.",level:"info"}),(0,T.j)(T.U3.CODE_SUGGESTION_USED,(0,y.Z)((0,g.Z)({type:"suggestionNotPresented"},o),{reason:"noSuggestion"})),e.dispatch({effects:O.t8.of(null)}),[2]):(j.c_.addBreadcrumb({category:"ghostwriter",message:"Suggestion completely presented",level:"debug"}),s.queue((0,y.Z)((0,g.Z)({},o),{prefixLength:d})),e.dispatch({effects:O.dp.of(!0)}),[3,15]);case 14:return"AbortError"===(null===(U=Z.sent())||void 0===U?void 0:U.name)?[2]:(j.c_.withScope((function(e){e.setExtra("prefix",x),e.setExtra("maxTokens",C),e.setExtra("language",n),e.setExtra("selection-head",h),e.setExtra("previous-character",m),e.setExtras(o),e.setTag("ghostwriter",!0),j.c_.captureException(U)})),$.error("CodeSuggestionExtension"),$.error(U),[3,15]);case 15:return[2]}}))}));return function(n){return e.apply(this,arguments)}}(),p.co),h=function(e){var n=function(){e.update((function(e){return e.delete("feedback")}))},t=function(){var t,r,i=(null!==(t=A.Z.get("ghostWriter.acceptance","number"))&&void 0!==t?t:0)+(null!==(r=A.Z.get("ghostWriter.rejection","number"))&&void 0!==r?r:0);p.B2.includes(i)?e.update((function(e){return e.set("feedback",(0,D.tZ)(F,{onClose:n}))})):n()};return{recordAccept:function(){A.Z.update("ghostWriter.acceptance","number",(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)+1})),t()},recordReject:function(){A.Z.update("ghostWriter.rejection","number",(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)+1})),t()}}}(i),E=function(e){var n=(0,W.$o)(e);if(n){var t=n.texts.reduce((function(e,n){return e+n.text.length}),0);return u.flush(),s.flush(),(0,T.j)(T.U3.CODE_SUGGESTION_USED,(0,y.Z)((0,g.Z)({type:"suggestionAccepted"},o),{prefixLength:d,suggestionLength:t})),j.c_.addBreadcrumb({category:"ghostwriter",message:"Suggestion accepted",level:"info"}),h.recordAccept(),(0,b._B)(e),!0}return!1};return[x.Wl.high(k.$f.of([{key:(0,q.cU)(l.acceptPrimaryCompletion),run:E},{key:(0,q.cU)(l.cancelCompletion),run:function(e){return!!(0,W._n)(e)&&(c.abort(),u.flush(),s.flush(),(0,T.j)(T.U3.CODE_SUGGESTION_USED,(0,y.Z)((0,g.Z)({type:"suggestionDismissed"},o),{prefixLength:d})),C.n_({category:"ghostwriter",message:"Suggestion explicitly dismissed",level:"info"}),h.recordReject(),!0)}},{key:"Enter",run:W.gT}])),k.tk.domEventHandlers({blur:function(e,n){setTimeout((function(){n.dispatch({effects:O.t8.of(null)})}),100),u.cancel(),s.cancel(),c.abort()}}),k.tk.updateListener.of((function(e){(0,S.j)(e,O.he,(function(n){var t,r;n.value!==V.z.Stop?(t=e.view,r=n.value,u.cancel(),s.cancel(),c.abort(),f(t),r===V.z.Now&&f.flush()):(u.cancel(),s.cancel(),c.abort())}))})),(0,W.G0)(a),z({onComplete:E,onEscape:W._n})]}var Q=t(31858),J=t(88541),ee=t(45285),ne=t(87978);function te(e,n,t){var r=(0,s.S)(n),i=e.split("\n");return{code:i.slice(Math.max(0,i.length-t)).join("\n"),language:r,filePath:n}}var re=t(13716);function ie(e,n,t){var r=(0,u.useState)([]),i=r[0],o=r[1],a=(0,u.useState)(!1),l=a[0],c=a[1];return(0,u.useEffect)((function(){e&&(c(!0),(0,m.Z)((function(){var r;return(0,Z.__generator)(this,(function(i){switch(i.label){case 0:return[4,Promise.all(e.map(function(){var e=(0,m.Z)((function(e){var r,i;return(0,Z.__generator)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,t(e)];case 1:return(r=o.sent()).error?[2,!1]:(i=r.content.toString(),[2,n(i,e)]);case 2:return o.sent(),[2,!1];case 3:return[2]}}))}));return function(n){return e.apply(this,arguments)}}()))];case 1:return r=i.sent().filter(Boolean),c(!1),o(r),[2]}}))}))())}),[e,t,n]),{cachedFiles:i,loading:l}}var oe={javascript:["javascript","typescript"],python:["python","python3"],python3:["python","python3"],typescript:["javascript","typescript"]},ae=["json"];function le(e,n){var t=e.toLowerCase(),r=n.toLowerCase();return t===r||(!!ae.includes(t)||!!oe[t]&&oe[t].includes(r))}function ce(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6,r=(0,J.P5)({controlName:"flag-ghostwriter-neighboring-context",logFlagToAnalytics:!1}),i=(0,re.Bx)(),o=(0,u.useState)(null),a=o[0],l=o[1];return(0,u.useEffect)((function(){l(r?i.filter((function(t){return le((0,s.S)(t),e)&&t!==n&&(0,ne.Mb)(t)})).slice(0,t):null)}),[e,n,r,t,i]),a}var ue=t(82001),se=t(52841),de=t(43119),fe=t(71440),pe=t(24635);function he(){var e=(0,de.Z)(['\n  query CompleteCode {\n    currentUser {\n      id\n      userPowerUpsByType {\n        __typename\n        ... on UnauthorizedError {\n          message\n        }\n        ... on UserPowerUpsTypes {\n          ghostwriter {\n            active\n          }\n        }\n      }\n      hasKillswitch: gate(feature: "flag-killswitch-ghostwriter")\n    }\n  }\n']);return he=function(){return e},e}var ve={},me=(0,fe.Ps)(he());function ge(){var e,n,t,r=function(e){var n=(0,g.Z)({},ve,e);return pe.a(me,n)}().data;return!("UserPowerUpsTypes"!==(null===r||void 0===r||null===(e=r.currentUser)||void 0===e||null===(n=e.userPowerUpsByType)||void 0===n?void 0:n.__typename)||!(null===r||void 0===r?void 0:r.currentUser.userPowerUpsByType.ghostwriter.active))&&!(null===r||void 0===r||null===(t=r.currentUser)||void 0===t?void 0:t.hasKillswitch)}var ye=t(73012),Ze=t(11858),be=t(95851),we=t(11796);var xe=new Map;function ke(e){var n,t=e.filePath,d=e.view,f=e.decorations,y=(0,o.Z)(),b=(0,s.S)(t),w=(0,i.Z)().preferences,x=(0,Q.Z)(),k=x.engine,S=x.settings,T=null!==(n=null===S||void 0===S?void 0:S.infill)&&void 0!==n&&n,E=(0,ue.gf)(se.CN.acceptPrimaryCompletion.id),R=(0,ue.gf)(se.CN.cancelCompletion.id),I=ge(),G=(0,J.P5)({controlName:"flag-code-suggestion-markdown",logFlagToAnalytics:!1}),D="markdown"===b&&G,_=(0,J.P5)({controlName:"flag-gw-new-ghost-text",logFlagToAnalytics:!1}),P=(0,r.Z)({view:d}),B=(0,a.Z)((function(){return new h}),[b,t,y,k]);(0,u.useEffect)((function(){c.YX.toggle(Boolean(w.codeSuggestion))}),[w.codeSuggestion]);var A=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6,i=(0,ee.Z)().fs,o=ie(ce(e,n,r),(0,u.useCallback)((function(e,n){return te(e,n,t)}),[t]),(0,u.useCallback)(function(){var e=(0,m.Z)((function(e){return(0,Z.__generator)(this,(function(n){switch(n.label){case 0:return[4,i.readFile(e)];case 1:return[2,n.sent()]}}))}));return function(n){return e.apply(this,arguments)}}(),[i])).cachedFiles;return null!==o&&void 0!==o?o:[]}(b,t),U=function(e){var n=e.language,t=e.engine,r=e.replId,i=e.filePath,o=e.additionalContext,a=e.settings,l=e.cache,c=e.hooks,s=a.infill,d=a.isMarkdownOverridden,f=(0,u.useCallback)(function(){var e=(0,Ze.Z)((function(e){var a,u,f,p,h,m,y,b,w,x,k,C,S,T,E,R,I,G,D,_,P,B,A,U,L,X,N,M,F,O,W,H,V;return(0,Z.__generator)(this,(function(z){switch(z.label){case 0:return a=c.beforeCompletion,u=c.afterCompletion,f=e.code,p=e.suffix,h=e.signal,m=e.maxTokens,f?(y=d?{maxTokens:75,stop:[]}:{},b=(0,g.Z)({language:n,code:f,suffix:s?p:void 0,replId:r,filePath:i,engine:t,maxTokens:m,additionalContext:o,stop:["\n\n","```"]},y),w=a(b),h.addEventListener("abort",(function(){u("aborted",b,{},w)})),null==(k=l.get(f))?[3,1]:(x=(0,Ze.Z)((function(){return(0,Z.__generator)(this,(function(e){switch(e.label){case 0:return[4,k];case 1:return e.sent(),[2]}}))})),[3,5])):[2];case 1:return[4,(0,ye.Z)(fetch("/ai/complete",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},signal:h,body:JSON.stringify(b)}))];case 2:return C=z.sent(),S=C.body,200===(T=C.status)?[3,4]:(E=Error.bind,I=(R="Error (".concat(T,") response from /ai/complete: ")).concat,[4,(0,ye.Z)(C.text())]);case 3:throw new(E.apply(Error,[void 0,I.apply(R,[z.sent()])]));case 4:if(!S)throw new Error("No body in response");x=function(){return(0,we.n)(S)},z.label=5;case 5:G="",D="",_=!0,P=!1,B=!1,A=!1,z.label=6;case 6:z.trys.push([6,14,15,20]),L=(0,v.Z)(x()),z.label=7;case 7:return[4,(0,ye.Z)(L.next())];case 8:if(!(B=!(X=z.sent()).done))return[3,13];N=X.value,D+=N,M=void 0,z.label=9;case 9:return-1===(M=D.indexOf("\n"))?[3,12]:(F=JSON.parse(D.substring(0,M)),O=F.text,D=D.substring(M+1),W=(0,be.Hy)(O,n),H=W.replacementSuggestion,G+=H,P?[3,11]:[4,H]);case 10:z.sent(),z.label=11;case 11:return _&&(u("success",b,{fromCache:!!k,partialSuggestion:H},w),_=!1),(0,be.cx)(G).haltAfter&&(P=!0),[3,9];case 12:return B=!1,[3,7];case 13:return[3,20];case 14:return V=z.sent(),A=!0,U=V,[3,20];case 15:return z.trys.push([15,,18,19]),B&&null!=L.return?[4,L.return()]:[3,17];case 16:z.sent(),z.label=17;case 17:return[3,19];case 18:if(A)throw U;return[7];case 19:return[7];case 20:return G.trim().length&&!l.has(f)&&l.setSuggestion(f,G),P||!D?[3,22]:[4,D];case 21:z.sent(),z.label=22;case 22:return u("finished",b,{completeSuggestion:G,fromCache:!!k},w),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),[n,t,r,i,o,s,d,l,c]);return f}({language:b,engine:k,replId:y,filePath:t,additionalContext:A,settings:{infill:T,isMarkdownOverridden:D},cache:B,hooks:(0,u.useMemo)((function(){return{beforeCompletion:function(e){C.n_({category:"ghostwriter",message:"Called completeCode: "+k,level:"debug"});var n=c.YX.add(e),t=l.kg.timeStart({language:b,engine:k,replid:y,codeLength:e.code.length});return xe.set(n,t),n},afterCompletion:function(e,n,t,r){switch(e){case"aborted":c.YX.abort(r),xe.delete(r);break;case"success":C.n_({category:"ghostwriter",message:"Suggestion emitted: "+t.partialSuggestion,level:"debug"});var i=xe.get(r);if(!i)throw new Error("No latency logger found for handle: "+r);i("code suggestion",{type:"success"}),xe.delete(r);break;case"finished":c.YX.complete(r,{__typename:"CompleteCodeResult",id:Date.now().toString(),code:t.completeSuggestion});break;default:throw new Error("Unknown completion kind: "+e)}}}}),[k,b,y])});(0,u.useEffect)((function(){if(d&&I){if(w.codeSuggestion&&(p.PE.has(b)||D)){var e={filePath:t,language:b,engine:k,additionalContextCount:A.length,additionalContextLength:A.reduce((function(e,n){return e+n.code.length}),0)};return d.dispatch({effects:P.reconfigure(K({language:b,infill:T,completeCode:U,decorations:f,logMetadata:e,newRendering:_,keybindings:{acceptPrimaryCompletion:E,cancelCompletion:R}}))}),function(){d.dispatch({effects:P.reconfigure([])})}}C.n_({category:"ghostwriter",message:"Explicitly skipped useCompleteCode effect.",level:"info"})}}),[d,B,U,I,P,t,b,y,f,k,w.codeSuggestion,T,A,E,R,D,_])}},7006:function(e,n,t){t.d(n,{B:function(){return r}});var r={author:"ghostwriter"}},22917:function(e,n,t){t.d(n,{S:function(){return l},Z:function(){return c}});var r=t(50959),i=t(14806),o=t(45285),a=t(69994);function l(e){var n=e.view,t=e.line,r=e.col,o=n.state.doc,l=Math.max(1,Math.min(t,o.lines)),c=o.line(l),u=c.to,s=c.from,d=r||0,f=Math.min(s+d,u),p=i.jT.cursor(f);n.dispatch({selection:p,effects:[a.tk.scrollIntoView(f,{x:"center",y:"center"})]})}function c(e){var n=e.filePath,t=e.view,i=e.isLoading,a=e.deeplink,c=e.onDeeplinkUpdated,u=(0,o.Z)().session;r.useEffect((function(){if(t&&!i&&a){var e=a.line,n=a.col;void 0!==e&&(l({view:t,line:e,col:n}),c&&c())}}),[t,i,a,c]),r.useEffect((function(){if(t&&!i)return u.onDeeplinkUpdated((function(e){var r=e.path,i=e.line,o=e.col;r===n&&i&&l({view:t,line:i,col:o})}))}),[u,t,n,i])}},42785:function(e,n,t){t.d(n,{EE:function(){return h},Gj:function(){return a},ZF:function(){return v},_j:function(){return l},f3:function(){return f},fI:function(){return p},gm:function(){return d},yK:function(){return u}});var r=t(2272),i=t(56440),o=t(4385),a={regexp:/-?\b\d+\.?\d*\b/g,cursor:"ew-resize",onDrag:function(e,n,t){var r=Number(e)+t.movementX;isNaN(r)||n(r.toString())}},l={regexp:/true|false/g,cursor:"pointer",onClick:function(e,n){switch(e){case"true":return n("false");case"false":return n("true")}}};function c(e){var n=new RegExp("".concat(e,"\\(-?\\b\\d+\\.?\\d*\\b\\s*(,\\s*-?\\b\\d+\\.?\\d*\\b)?"),"g"),t=new RegExp("".concat(e,"\\((?<x>-?\\b\\d+\\.?\\d*\\b)\\s*(,\\s*(?<y>-?\\b\\d+\\.?\\d*\\b))?"));return{regexp:n,cursor:"move",onDrag:function(n,r,i){var o,a,l=t.exec(n),c=Number(null===l||void 0===l||null===(o=l.groups)||void 0===o?void 0:o.x),u=Number(null===l||void 0===l||null===(a=l.groups)||void 0===a?void 0:a.y);isNaN(c)||(isNaN(u)&&(u=c),r("".concat(e,"(").concat(c+i.movementX,", ").concat(u+i.movementY)))}}}var u=c("vec2");c("ellipse"),c("circle"),c("point"),c("rect"),c("square"),c("vertex");function s(e){var n=new RegExp("".concat(e,"\\(.*\\)"),"g"),t=new RegExp("".concat(e,"\\((?<r>\\d+)\\s*,\\s*(?<g>\\d+)\\s*,\\s*(?<b>\\d+)\\)"));return{regexp:n,cursor:"pointer",onClick:function(n,o){var a,l,c,u=t.exec(n),s=Number(null===u||void 0===u||null===(a=u.groups)||void 0===a?void 0:a.r),d=Number(null===u||void 0===u||null===(l=u.groups)||void 0===l?void 0:l.g),f=Number(null===u||void 0===u||null===(c=u.groups)||void 0===c?void 0:c.b),p=document.createElement("input");p.type="color",isNaN(s+d+f)||(p.value=(0,i.C)(s,d,f)),p.addEventListener("input",(function(n){var t=n.target;if(t.value){var a=(0,r.Z)((0,i.w)(t.value),3),l=a[0],c=a[1],u=a[2];o("".concat(e,"(").concat(l,", ").concat(c,", ").concat(u,")"))}})),p.click()}}}var d=s("rgb"),f=s("background"),p=s("fill"),h=s("stroke"),v={regexp:/https?:\/\/[^\s)"]+/g,cursor:"pointer",onClick:function(e){(0,o.Z)(e)&&window.open(e,"_blank")}}},49129:function(e,n,t){t.d(n,{Iq:function(){return s},Lh:function(){return u}});var r=t(2272),i=t(74985),o=t(50959),a=t(35981),l=t(73872),c=t(18171);t(21449);function u(){var e=o.useRef((0,a.u)(new Map)).current,n=o.useCallback((function(n){var t=new Map(e.current);n(t),e.current=t}),[e]),t=o.useCallback((function(){e.current=new Map}),[e]);return(0,c.Z)((function(){return{observable:e,update:n,unmount:t}}),[n,e,t])}var s=function(e){var n=e.source,t=(0,l.Z)(n);return(0,i.tZ)(i.HY,{children:Array.from(t,(function(e){var n=(0,r.Z)(e,2),t=n[0],a=n[1];return(0,i.tZ)(o.Fragment,{children:a},t)}))})}},21449:function(e,n,t){t.d(n,{w:function(){return L},h:function(){return U}});var r,i=t(57135),o=t(72006),a=t(4405),l=t(2272),c=t(9970),u=t(96583),s=t(74985),d=t(14806),f=t(69994),p=t(85577),h=t(4653),v=t(57389),m=t(77637),g=t(40871),y=t(93970),Z=t(99964),b=t(61284),w=t(39541),x=t(85368),k=t(64491),C=t(45285),S=t(27522),T=t(80336),E=t(32104),R=t(50959),I=t(10422);function G(e){var n=e.dom,t=(0,m.Z)(e,["dom"]);return I.createPortal((0,s.tZ)(_,(0,o.Z)({},t)),n)}function D(e){var n=e.matchesMap,t=e.fileToContents,i=e.type,o=e.onClose,a=e.jumpToPosition,c=Object.keys(n);if(0===c.length){var u=i===r.REFERENCES?"No references found":"No definitions found";return(0,s.tZ)(b.xv,{color:"dimmer",css:[w.l0.pl(8),w.l0.py(8)],multiline:!1,children:u})}return(0,s.tZ)(x.G,{children:c.map((function(e){var r=n[e],i=t[e],u=(0,g.Z)(r,i);return(0,s.tZ)(x.G,{css:[w.l0.p(4)],children:(0,s.tZ)(y.V,{path:e,extensions:[u],doc:i,numMatches:r.length,initiallyExpanded:1===c.length,onNavigateToCode:function(n){if(null!==n)a({path:e,line:n.line+1,col:n.character});else{var t=(0,l.Z)(r,1)[0],c=i.lineAt(t.from),u=t.from-c.from;a({path:e,line:c.number,col:u})}o()}})},e)}))})}function _(e){var n=e.files,t=e.onClose,a=e.references,f=e.definitions,p=e.currentFile,h=e.currentFileContents,m=e.jumpToPosition,g=function(e,n){if(!I)throw new Error("Expected LSP Client");var t=I.documentUriToPath(e.uri),r=e.range,i=r.start,o=r.end;t in n||(n[t]=[]);var a=P[t],l=a.line(i.line+1),c=a.line(o.line+1);n[t].push({from:l.from+i.character,to:c.from+o.character})},y=(0,C.Z)().fs,I=(0,k.Z)(p),G=(0,Z.Z)(t,[]),_=(0,l.Z)(R.useState((0,v.Z)({},p,d.xv.of(h.split("\n")))),2),P=_[0],B=_[1];R.useEffect((function(){if(n.length){var e=!1;return function(){t.apply(this,arguments)}(),function(){e=!0}}function t(){return t=(0,i.Z)((function(){var t;return(0,u.__generator)(this,(function(r){switch(r.label){case 0:return t={},[4,Promise.all(n.map(function(){var e=(0,i.Z)((function(e){var n;return(0,u.__generator)(this,(function(r){switch(r.label){case 0:return[4,y.readFile(e)];case 1:if((n=r.sent()).error)throw new Error("Something went wrong reading file with path ".concat(e,". Received error: ").concat(n.error));return t[e]=d.xv.of(n.content.toString().split("\n")),[2]}}))}));return function(n){return e.apply(this,arguments)}}()))];case 1:return r.sent(),e?[2]:(B((function(e){return(0,o.Z)({},e,t)})),[2])}}))})),t.apply(this,arguments)}}),[y,n]);var A=(0,c.Z)(a).concat((0,c.Z)(f));if(!I||A.some((function(e){return!(I.documentUriToPath(e.uri)in P)})))return(0,s.tZ)(x.G,{style:{width:w.TV.space128,height:w.TV.space128,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,s.tZ)(E.Z,{size:32})});var U={},L={};return a.forEach((function(e){g(e,U)})),f.forEach((function(e){g(e,L)})),(0,s.BX)(x.G,{innerRef:G,css:[w.l0.minWidth("375px"),w.l0.maxWidth("500px"),w.l0.pt(4),w.l0.maxHeight("100%"),{overflowY:"scroll"}],children:[(0,s.tZ)(x.G,{css:{borderBottom:"1px solid var(--background-highest)"},children:(0,s.BX)(x.G,{css:[w.l0.p(4)],children:[(0,s.BX)(x.G,{css:[w.l0.flex.row,w.l0.justify.spaceBetween,w.l0.align.center,w.l0.pr(4)],children:[(0,s.tZ)(b.h4,{level:2,variant:"subheadDefault",css:[w.l0.p(4),w.l0.pl(8)],children:"Definitions"}),(0,s.tZ)(S.Z,{filled:!1,border:!1,onClick:t,children:(0,s.tZ)(T.Z,{})})]}),(0,s.tZ)(D,{matchesMap:L,fileToContents:P,type:r.DEFINITION,onClose:t,currentFile:p,jumpToPosition:m})]})}),(0,s.tZ)(x.G,{children:(0,s.BX)(x.G,{css:[w.l0.p(4)],children:[(0,s.tZ)(b.h4,{level:2,variant:"subheadDefault",css:[w.l0.p(4),w.l0.pl(8)],children:"References"}),(0,s.tZ)(D,{matchesMap:U,fileToContents:P,type:r.REFERENCES,onClose:t,currentFile:p,jumpToPosition:m})]})})]})}!function(e){e.DEFINITION="DEFINITION",e.REFERENCES="REFERENCES"}(r||(r={}));var P=t(9951),B=t(22917),A=t(87042),U=d.Py.define();function L(e){var n=e.setDecoration,t=e.lspClient,r=e.path,v=e.openFile,m=d.Py.define(),g=d.Py.define(),y=f.tk.updateListener.of(function(){var e=(0,i.Z)((function(e){var n,i,o,a,s,d,f,v,y,Z,b,w,x,k,C,S,T,E,R,I,G,D,_,B,L,X,N,M,F,O,W;return(0,u.__generator)(this,(function(u){switch(u.label){case 0:n=null,i=!0,o=!1,a=void 0;try{for(s=e.transactions[Symbol.iterator]();!(i=(d=s.next()).done);i=!0){f=d.value,v=!0,y=!1,Z=void 0;try{for(b=f.effects[Symbol.iterator]();!(v=(w=b.next()).done);v=!0)(x=w.value).is(U)&&(n=x.value)}catch(H){y=!0,Z=H}finally{try{v||null==b.return||b.return()}finally{if(y)throw Z}}}}catch(H){o=!0,a=H}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}return n?(k=(0,h.Z)(t),C=e.state.doc,S=(0,p.s)(C,n),T=Promise.all([k.isFindReferencesSupported?t.request.findReferences(r,S,{includeDeclaration:!1}):{result:null},k.isFindDefinitionSupported?t.request.findDefinitions(r,S):{result:null}]),(0,A.SC)(e.view,T),[4,T]):[2];case 1:if(E=l.Z.apply(void 0,[u.sent(),2]),R=E[0],I=E[1],"error"in R)throw new Error("Something went wrong fetching references: ".concat(R.error.message));if("error"in I)throw new Error("Something went wrong fetching definition: ".concat(I.error.message));return G=R.result,D=I.result,_=G&&G.length>0,B=D&&D.length>0,_||B?(L=[],X=[],G&&G.length>0&&(N=L).push.apply(N,(0,c.Z)(G)),D&&D.length>0&&(M=X).push.apply(M,(0,c.Z)(D)),F=(0,c.Z)(L).concat((0,c.Z)(X)).map((function(e){return t.documentUriToPath(e.uri)})).filter((function(e){return e!==r})),O=(0,c.Z)(new Set(F)),W=C.toJSON().join("\n"),e.view.dispatch({effects:m.of({references:L,definitions:X,currentFile:r,currentFileContents:W,files:O})}),[2]):((0,P.J)(e.view,{message:"No references found",offset:n}),e.view.dispatch({effects:g.of(null)}),[2])}}))}));return function(n){return e.apply(this,arguments)}}());return[y,d.QQ.define({create:function(){return null},update:function(e,n){var t=e,r=!0,i=!1,o=void 0;try{for(var a,l=n.effects[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;c.is(m)&&(t=c.value),c.is(g)&&(t=null)}}catch(u){i=!0,o=u}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return t},provide:function(e){return f.hJ.compute([e],(function(t){var i=t.field(e);if(!i)return n(null),null;var l=t.selection.asSingle().main;return{pos:l.from,end:l.to,create:function(e){var t=document.createElement("div");return t.classList.add("cm-lsp-tooltip"),t.classList.add("replit-tooltip"),t.style.padding="0",n((0,s.tZ)(G,(0,a.Z)((0,o.Z)({},i),{onClose:function(){e.dispatch({effects:g.of(null)})},dom:t,jumpToPosition:function(n){if(n.path===r){var t=n.line,i=n.col;(0,B.S)({view:e,line:t,col:i})}else v(n)}}))),{dom:t}}}}))}})]}},93970:function(e,n,t){t.d(n,{F:function(){return R},V:function(){return I}});var r=t(2272),i=t(74985),o=t(48306),a=t.n(o),l=t(50959),c=t(24025),u=t(97754),s=t.n(u),d=t(69994),f=t(83005),p=t(85368),h=t(39541),v=t(87076),m=t(36443),g=t(61284),y=t(2757),Z=t(45853),b=t(85577),w=t(34227),x=t(43312),k=t(64804);function C(e){var n=e.height,t=e.loading;return(0,i.BX)("div",{className:a().dynamic([["5a8d0f5b84417a3b",[n]]])+" "+(s()("loader",{loading:t})||""),children:[(0,i.BX)(c.Z,{viewBox:"0 0 100 36",backgroundColor:h.TV.backgroundHighest,foregroundColor:h.TV.backgroundHigher,children:[(0,i.tZ)("rect",{x:"0",y:"0",rx:"3",ry:"3",width:"4",height:"4",className:a().dynamic([["5a8d0f5b84417a3b",[n]]])}),(0,i.tZ)("rect",{x:"6",y:"0",rx:"2",ry:"2",width:"92",height:"4",className:a().dynamic([["5a8d0f5b84417a3b",[n]]])})]}),(0,i.tZ)(a(),{id:"5a8d0f5b84417a3b",dynamic:[n],children:".loader.__jsx-style-dynamic-selector{padding:var(--space-8);display:none}.loader.loading.__jsx-style-dynamic-selector{height:".concat(n,";display:block}")})]})}var S=(0,x.iv)({scrollbarWidth:"thin",outline:"none",overflow:"auto",".cm-content":{paddingBottom:0},"::-webkit-scrollbar":{width:4},".cm-gutters":{minWidth:"unset"}}),T=(0,x.iv)({overflow:"hidden",".cm-scroller":{overflow:"hidden"}}),E={root:h.l0.backgroundColor.backgroundRoot,higher:h.l0.backgroundColor.backgroundHigher,highest:h.l0.backgroundColor.backgroundHighest,default:h.l0.backgroundColor.backgroundDefault};function R(e){var n=e.maxHeight,t=e.minHeight,o=e.extensions,a=void 0===o?[]:o,c=e.allowScroll,u=void 0===c||c,s=e.fontSize,f=e.hideGutter,p=e.path,h=e.snippet,v=e.style,m=e.elevation,g=e.onNavigateToCode,y=(0,r.Z)(l.useState(!1),2),R=y[0],I=y[1],G=(0,k.Z)(),D=G.ref,_=G.view,P=l.useMemo((function(){return function(e){return(0,x.iv)({".cm-editor":e,".cm-gutters":e})}(E[null!==m&&void 0!==m?m:"default"])}),[m]),B=(0,Z.Z)({view:_});return l.useEffect((function(){if(_&&h&&p){var e="lines"in h?h.lines.join("\n"):h.doc;return _.dispatch({changes:{from:0,to:_.state.doc.length,insert:e},effects:B.reconfigure([(0,d.Eu)({formatNumber:function(e,n){for(var t=String(n.doc.lines).length,r=String(e+h.startLineNumber-1);t>r.length;)r="\xa0"+r;return r}}),a])}),I(!0),function(){_.dispatch({effects:B.reconfigure([])})}}}),[_,h,p,B,a,m]),(0,i.BX)("div",{style:v,children:[(0,i.tZ)(w.Z,{ref:D,css:[S,P,u?null:T],style:{minHeight:t,maxHeight:null!==n&&void 0!==n?n:"10em"},hideGutter:f,filePath:p,fontSize:s,readOnly:!0,onClick:function(e){if(g&&_){var n=e.clientX,t=e.clientY,r=_.posAtCoords({x:n,y:t}),i=null!==r?(0,b.s)(_.state.doc,r):null;g(i)}}}),(0,i.tZ)(C,{loading:!R,height:n})]})}function I(e){var n=e.path,t=e.doc,o=e.extensions,a=void 0===o?[]:o,c=e.numMatches,u=e.onNavigateToCode,s=e.initiallyExpanded,d=(0,r.Z)(l.useState(s),2),Z=d[0],b=d[1],w=Z?"block":"none",x=Z?180:0,k=Z?"Collapse snippet":"Expand snippet";return(0,i.BX)(p.G,{children:[(0,i.BX)(p.G,{css:[h.l0.width("100%"),h.l0.p(4),h.l0.rowWithGap(8),{alignItems:"center"}],children:[(0,i.tZ)(f.Z,{path:n}),(0,i.tZ)(g.xv,{multiline:!1,title:n,css:[h.l0.flex.shrink(1),{textOverflow:"ellipsis"}],children:n}),(0,i.tZ)(g.xv,{color:"dimmest",multiline:!1,children:(0,y.Z)("match",c,!0)}),(0,i.tZ)(p.G,{css:h.l0.flex.grow(1)}),(0,i.tZ)(v.h,{alt:k,tooltipHidden:!0,onClick:function(){return b((function(e){return!e}))},children:(0,i.tZ)(m.Z,{rotate:x,style:{transition:"200ms ease"}})})]}),(0,i.tZ)(p.G,{css:[h.l0.p(4),{display:w}],children:(0,i.tZ)(R,{path:n,snippet:{doc:t,startLineNumber:1},extensions:a,maxHeight:"max-content",allowScroll:!0,hideGutter:!0,onNavigateToCode:u})})]})}},40871:function(e,n,t){t.d(n,{Z:function(){return h}});var r=t(66091),i=t(5683),o=t(45347),a=t(69994),l=t(14806),c=t(39541),u=t(2757),s=new(function(e){(0,i.Z)(t,e);var n=(0,o.Z)(t);function t(){var e;return(0,r.Z)(this,t),(e=n.call(this)).elementClass="cm-gutterElement-hidden",e}return t.prototype.toDOM=function(){var e=document.createElement("span");e.classList.add("cm-hidden-lines-gutter");var n=document.createElement("span");return n.classList.add("cm-dot"),e.appendChild(n),e},t}(a.SJ)),d=function(e){(0,i.Z)(t,e);var n=(0,o.Z)(t);function t(e){var i;return(0,r.Z)(this,t),(i=n.call(this)).numLines=e,i}var a=t.prototype;return a.eq=function(e){return e.numLines===this.numLines},a.toDOM=function(){var e=document.createElement("span");return e.textContent="".concat(this.numLines," hidden ").concat((0,u.Z)("line",this.numLines)),e.className="cm-hidden-lines",e},t}(a.l9),f=a.p.mark({class:"cm-searchResultMatch"}),p=a.tk.baseTheme({".cm-hidden-lines":{color:"var(--foreground-dimmer)",backgroundColor:"var(--background-highest)",display:"inline-block",width:"100%"},".cm-gutterElement-hidden":{backgroundColor:"var(--background-highest)"},".cm-hidden-lines-gutter":{backgroundColor:"var(--background-highest)",display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%"},".cm-dot":{height:"5px",width:"5px",backgroundColor:"var(--foreground-dimmest)",borderRadius:"50%",display:"inline-block"},".cm-tooltip .cm-scroller":{border:"2px solid var(--background-highest)",borderRadius:"var(--border-radius-4)"},".cm-tooltip .cm-scroller:hover":{border:"2px solid var(--accent-primary-dimmest)",boxShadow:"var(--shadow-1)",cursor:"pointer"},".cm-searchResultMatch":{color:c.TV.foregroundDefault,backgroundColor:c.TV.accentPrimaryDimmest,outline:c.TV.accentPrimaryDimmer+" solid 1px"},".cm-searchResultMatch span":{color:c.TV.foregroundDefault},".cm-tooltip .cm-searchResultMatch:hover":{opacity:.8},".cm-tooltip .cm-gutterElement":{display:"flex",marginTop:0,textAlign:"center",alignItems:"center",justifyContent:"center",lineHeight:"21px"},".cm-tooltip .cm-line":{padding:0},".cm-tooltip .cm-gutters":{padding:0},".cm-tooltip .cm-content":{paddingTop:0},".cm-tooltip .cm-lineWrapping":{whiteSpace:"pre"},".cm-tooltip .cm-cursor":{display:"none"},".cm-tooltip .cm-selectionBackground":{display:"none"}});function h(e,n){var t=e.sort((function(e,n){return e.from-n.from})),r=t.map((function(e){var n=e.from,t=e.to;return f.range(n,t)})),i=a.lg.define((function(){return{}}),{decorations:function(){return a.p.set(r)}}),o=function(e,n){var t=[],r=1;e.forEach((function(i,o){var a=n.lineAt(i.from),l=n.lineAt(i.to);r<a.number-2&&t.push({startLine:r,endLine:a.number-2}),r=l.number+2,o===e.length-1&&r<n.lines&&t.push({startLine:r,endLine:n.lines})}));var i=t.map((function(e){var t=n.line(e.startLine),r=n.line(e.endLine);return a.p.replace({widget:new d(e.endLine-e.startLine+1)}).range(t.from,r.to)})),o=t.map((function(e){var t=n.line(e.startLine);return a.p.line({class:"cm-line-hidden"}).range(t.from)})),c=l.QQ.define({create:function(){return a.p.set(i)},update:function(e){return e},provide:function(e){return a.tk.decorations.from(e)}}),u=l.QQ.define({create:function(){return a.p.set(o)},update:function(e){return e},provide:function(e){return a.tk.decorations.from(e)}}),f=t.map((function(e){var t=n.line(e.startLine);return s.range(t.from)})),h=a.p2.of(l.Xs.of(f));return[c,u,p,h]}(t,n);return[i,o]}},93766:function(e,n,t){t.d(n,{Ny:function(){return f},_S:function(){return d},oZ:function(){return s}});var r=t(72006),i=t(4405),o=t(2272),a=t(50959),l=t(14806),c=t(74376),u=t(95844);function s(e){var n=Array.from(e.fileMap.entries()).map((function(e){var n,t=(0,o.Z)(e,2),a=t[0],l=t[1];return[a,(n=l,(0,i.Z)((0,r.Z)({},n),{editorState:n.editorState.toJSON({history:c.cE})}))]}));return JSON.stringify({fileMap:n})}function d(e){var n=JSON.parse(e).fileMap,t=new u.L(20);return n.forEach((function(e){var n,a=(0,o.Z)(e,2),u=a[0],s=a[1];t.set(u,(n=s,(0,i.Z)((0,r.Z)({},n),{editorState:l.yy.fromJSON(n.editorState,void 0,{history:c.cE})})))})),{fileMap:t}}function f(){return{fileMap:new u.L(20)}}var p=a.createContext(null);n.ZP=p},67530:function(e,n,t){t.d(n,{nE:function(){return K},OQ:function(){return q},qi:function(){return O},UQ:function(){return W},YM:function(){return z},PQ:function(){return Y},ZS:function(){return $},eR:function(){return V},zj:function(){return J},cR:function(){return j}});var r=t(66091),i=t(57389),o=t(5683),a=t(72006),l=t(4405),c=t(45347),u=t(74985),s=t(50959),d=t(44478),f=t(14806),p=t(45634),h=t(39541),v=t(69994),m=t(87076),g=t(67036),y=t(58784),Z=t(71888),b=function(e){var n=e.isOpen,t=e.threadId,r=(0,s.useState)(!1),i=r[0],o=r[1],a=(0,y.GD)({variables:{id:t}});(0,s.useEffect)((function(){var e;if(a&&!a.error){var n=null===(e=a.data)||void 0===e?void 0:e.thread;n&&o("AnnotationAnchor"===(null===n||void 0===n?void 0:n.__typename)&&(null===n||void 0===n?void 0:n.messages.some((function(e){return!e.seen}))))}}),[a]);var l={alt:{default:"View threads",close:"Dismiss thread"}};return(0,u.tZ)(m.h,{alt:n?l.alt.close:l.alt.default,size:24,className:"thread-indicator",css:[h.l0.width(20),h.l0.height(20),h.l0.transition.snappy,h.l0.cursor.pointer,h.l0.display.flex,h.l0.borderRadius(8),h.l0.position.relative,h.l0.overflow("visible"),n?h.l0.color.accentPrimaryStrongest:h.l0.color.foregroundDimmest,{borderWidth:h.TV.borderWidthDefault,borderStyle:"solid",borderColor:n?h.TV.accentPrimaryDefault:"transparent",backgroundColor:n?h.TV.accentPrimaryDimmer:h.TV.backgroundHigher,outline:0},{":hover":{borderColor:n?h.TV.accentPrimaryStronger:h.TV.outlineDimmer,color:n?h.TV.accentPrimaryStrongest:h.TV.foregroundDimmer,background:n?h.TV.accentPrimaryDefault+" !important":h.TV.backgroundHighest},svg:{width:12,height:12}}],children:(0,u.BX)(u.HY,{children:[i?(0,u.tZ)("div",{css:[h.l0.width(8),h.l0.height(8),h.l0.backgroundColor.redStronger,h.l0.position.absolute,h.l0.top(-1),h.l0.left(-1),h.l0.borderRadius("full")]}):null,(0,u.tZ)(g.Z,{})]})})},w=function(e){return e.apolloClient?(0,u.tZ)(Z.e,{client:e.apolloClient,children:(0,u.tZ)(b,(0,a.Z)({},e))}):null},x=t(91513),k=function(e){(0,o.Z)(t,e);var n=(0,c.Z)(t);function t(){return(0,r.Z)(this,t),n.apply(this,arguments)}var i=t.prototype;return i.compare=function(e){return this==e||this.constructor==e.constructor&&this.eq(e)},i.eq=function(e){return!1},i.destroy=function(e){},t}(f.uU);k.prototype.elementClass="",k.prototype.toDOM=void 0,k.prototype.mapMode=f.gc.TrackBefore,k.prototype.startSide=k.prototype.endSide=-1,k.prototype.point=!0;var C=f.r$.define(),S={class:"",renderEmptyElements:!1,elementStyle:"",markers:function(){return f.Xs.empty},lineMarker:function(){return null},lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},T=f.r$.define();var E=f.r$.define({combine:function(e){return e.some((function(e){return e}))}});function R(e){var n=[I];return e&&!1===e.fixed&&n.push(E.of(!0)),n}var I=v.lg.fromClass(function(){function e(n){(0,r.Z)(this,e),this.view=n,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-right-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.width="0px",this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=n.state.facet(T).map((function(e){return new P(n,e)}));var t=!0,i=!1,o=void 0;try{for(var a,l=this.gutters[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var c=a.value;this.dom.appendChild(c.dom)}}catch(u){i=!0,o=u}finally{try{t||null==l.return||l.return()}finally{if(i)throw o}}this.fixed=!n.state.facet(E),this.fixed&&(this.dom.style.position="sticky",this.dom.style.right="0"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM.nextSibling)}var n=e.prototype;return n.update=function(e){if(this.updateGutters(e)){var n=this.prevViewport,t=e.view.viewport,r=Math.min(n.to,t.to)-Math.max(n.from,t.from);this.syncGutters(r<.8*(t.to-t.from))}e.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(E)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=e.view.viewport},n.syncGutters=function(e){var n=this,t=this.dom.nextSibling;e&&this.dom.remove();var r=f.Xs.iter(this.view.state.facet(C),this.view.viewport.from),i=[],o=this.gutters.map((function(e){return new _(e,n.view.viewport,-n.view.documentPadding.top)})),a=!0,l=!1,c=void 0;try{for(var u,s=this.view.viewportLineBlocks[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var d=u.value,p=void 0;if(Array.isArray(d.type)){var h=!0,m=!1,g=void 0;try{for(var y,Z=d.type[Symbol.iterator]();!(h=(y=Z.next()).done);h=!0){var b=y.value;if(b.type==v.kH.Text){p=b;break}}}catch(B){m=!0,g=B}finally{try{h||null==Z.return||Z.return()}finally{if(m)throw g}}}else p=d.type==v.kH.Text?d:void 0;if(p){i.length&&(i=[]),D(r,i,d.from);var w=!0,x=!1,k=void 0;try{for(var S,T=o[Symbol.iterator]();!(w=(S=T.next()).done);w=!0){S.value.line(this.view,p,i)}}catch(B){x=!0,k=B}finally{try{w||null==T.return||T.return()}finally{if(x)throw k}}}}}catch(B){l=!0,c=B}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}var E=!0,R=!1,I=void 0;try{for(var G,P=o[Symbol.iterator]();!(E=(G=P.next()).done);E=!0){G.value.finish()}}catch(B){R=!0,I=B}finally{try{E||null==P.return||P.return()}finally{if(R)throw I}}e&&this.view.scrollDOM.insertBefore(this.dom,t)},n.updateGutters=function(e){var n=e.startState.facet(T),t=e.state.facet(T),r=e.docChanged||e.heightChanged||e.viewportChanged||!f.Xs.eq(e.startState.facet(C),e.state.facet(C),e.view.viewport.from,e.view.viewport.to);if(n==t){var i=!0,o=!1,a=void 0;try{for(var l,c=this.gutters[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){l.value.update(e)&&(r=!0)}}catch(_){o=!0,a=_}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}}else{r=!0;var u=[],s=!0,d=!1,p=void 0;try{for(var h,v=t[Symbol.iterator]();!(s=(h=v.next()).done);s=!0){var m=h.value,g=n.indexOf(m);g<0?u.push(new P(this.view,m)):(this.gutters[g].update(e),u.push(this.gutters[g]))}}catch(_){d=!0,p=_}finally{try{s||null==v.return||v.return()}finally{if(d)throw p}}var y=!0,Z=!1,b=void 0;try{for(var w,x=this.gutters[Symbol.iterator]();!(y=(w=x.next()).done);y=!0){var k=w.value;k.dom.remove(),u.indexOf(k)<0&&k.destroy()}}catch(_){Z=!0,b=_}finally{try{y||null==x.return||x.return()}finally{if(Z)throw b}}var S=!0,E=!1,R=void 0;try{for(var I,G=u[Symbol.iterator]();!(S=(I=G.next()).done);S=!0){var D=I.value;this.dom.appendChild(D.dom)}}catch(_){E=!0,R=_}finally{try{S||null==G.return||G.return()}finally{if(E)throw R}}this.gutters=u}return r},n.destroy=function(){var e=!0,n=!1,t=void 0;try{for(var r,i=this.gutters[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){r.value.destroy()}}catch(o){n=!0,t=o}finally{try{e||null==i.return||i.return()}finally{if(n)throw t}}this.dom.remove()},e}(),{provide:function(e){return v.tk.scrollMargins.of((function(n){var t=n.plugin(e);return t&&0!=t.gutters.length&&t.fixed?n.textDirection==v.Nm.LTR?{left:t.dom.offsetWidth}:{right:t.dom.offsetWidth}:null}))}});function G(e){return Array.isArray(e)?e:[e]}function D(e,n,t){for(;e.value&&e.from<=t;)e.from==t&&n.push(e.value),e.next()}var _=function(){function e(n,t,i){(0,r.Z)(this,e),this.gutter=n,this.height=i,this.localMarkers=[],this.i=0,this.cursor=f.Xs.iter(n.markers,t.from)}var n=e.prototype;return n.line=function(e,n,t){this.localMarkers.length&&(this.localMarkers=[]),D(this.cursor,this.localMarkers,n.from);var r=t.length?this.localMarkers.concat(t):this.localMarkers,i=this.gutter.config.lineMarker(e,n,r);i&&r.unshift(i);var o=this.gutter;if(0!=r.length||o.config.renderEmptyElements){var a=n.top-this.height;if(this.i==o.elements.length){var l=new B(e,n.height,a,r);o.elements.push(l),o.dom.appendChild(l.dom)}else o.elements[this.i].update(e,n.height,a,r);this.height=n.bottom,this.i++}},n.finish=function(){for(var e=this.gutter;e.elements.length>this.i;){var n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}},e}(),P=function(){function e(n,t){var i=this,o=function(e){i.dom.addEventListener(e,(function(r){var i=n.lineBlockAtHeight(r.clientY-n.documentTop);t.domEventHandlers[e](n,i,r)&&r.preventDefault()}))};for(var a in(0,r.Z)(this,e),this.view=n,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:""),t.domEventHandlers)o(a);this.markers=G(t.markers(n)),t.initialSpacer&&(this.spacer=new B(n,0,0,[t.initialSpacer(n)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}var n=e.prototype;return n.update=function(e){var n=this.markers;if(this.markers=G(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){var t=this.config.updateSpacer(this.spacer.markers[0],e);t!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[t])}var r=e.view.viewport;return!f.Xs.eq(this.markers,n,r.from,r.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(e)},n.destroy=function(){var e=!0,n=!1,t=void 0;try{for(var r,i=this.elements[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){r.value.destroy()}}catch(o){n=!0,t=o}finally{try{e||null==i.return||i.return()}finally{if(n)throw t}}},e}(),B=function(){function e(n,t,i,o){(0,r.Z)(this,e),this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(n,t,i,o)}var n=e.prototype;return n.update=function(e,n,t,r){this.height!=n&&(this.dom.style.height=(this.height=n)+"px"),this.above!=t&&(this.dom.style.marginTop=(this.above=t)?t+"px":""),function(e,n){if(e.length!=n.length)return!1;for(var t=0;t<e.length;t++)if(!e[t].compare(n[t]))return!1;return!0}(this.markers,r)||this.setMarkers(e,r)},n.setMarkers=function(e,n){for(var t="cm-gutterElement",r=this.dom.firstChild,i=0,o=0;;){var a=o,l=i<n.length?n[i++]:null,c=!1;if(l){var u=l.elementClass;u&&(t+=" "+u);for(var s=o;s<this.markers.length;s++)if(this.markers[s].compare(l)){a=s,c=!0;break}}else a=this.markers.length;for(;o<a;){var d=this.markers[o++];if(d.toDOM){d.destroy(r);var f=r.nextSibling;r.remove(),r=f}}if(!l)break;l.toDOM&&(c?r=r.nextSibling:this.dom.insertBefore(l.toDOM(e),r)),c&&o++}this.dom.className=t,this.markers=n},n.destroy=function(){this.setMarkers(null,[])},e}();var A=f.r$.define(),U=f.r$.define({combine:function(e){return(0,f.BO)(e,{formatNumber:String,domEventHandlers:{}},{domEventHandlers:function(e,n){var t=function(e){var t=r[e],i=n[e];r[e]=t?function(e,n,r){return t(e,n,r)||i(e,n,r)}:i},r=Object.assign({},e);for(var i in n)t(i);return r}})}}),L=function(e){(0,o.Z)(t,e);var n=(0,c.Z)(t);function t(e){var i;return(0,r.Z)(this,t),(i=n.call(this)).number=e,i}var i=t.prototype;return i.eq=function(e){return this.number==e.number},i.toDOM=function(){return document.createTextNode(this.number)},t}(k);function X(e,n){return e.state.facet(U).formatNumber(n,e.state)}T.compute([U],(function(e){return{class:"cm-lineNumbers",renderEmptyElements:!1,markers:function(e){return e.state.facet(A)},lineMarker:function(e,n,t){return t.some((function(e){return e.toDOM}))?null:new L(X(e,e.state.doc.lineAt(n.from).number))},lineMarkerChange:function(e){return e.startState.facet(U)!=e.state.facet(U)},initialSpacer:function(e){return new L(X(e,N(e.state.doc.lines)))},updateSpacer:function(e,n){var t=X(n.view,N(n.view.state.doc.lines));return t==e.number?e:new L(t)},domEventHandlers:e.facet(U).domEventHandlers}}));function N(e){for(var n=9;n<e;)n=10*n+9;return n}var M=new(function(e){(0,o.Z)(t,e);var n=(0,c.Z)(t);function t(){var e;return(0,r.Z)(this,t),(e=n.apply(this,arguments)).elementClass="cm-activeLineGutter",e}return t}(k));C.compute(["selection"],(function(e){var n=[],t=-1,r=!0,i=!1,o=void 0;try{for(var a,l=e.selection.ranges[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;if(c.empty){var u=e.doc.lineAt(c.head).from;u>t&&(t=u,n.push(M.range(u)))}}}catch(s){i=!0,o=s}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return f.Xs.of(n)}));var F=t(43e3),O=f.Py.define(),W=f.Py.define(),H=f.Py.define(),V=f.Py.define(),z=f.Py.define(),j=v.tk.baseTheme({".replit-thread-highlight":{background:h.TV.accentPrimaryDimmest,transition:"".concat(h.TV.transitionDurationSnappy," all\n            ").concat(h.TV.transitionTimingFunctionSnappy)},".replit-thread-highlight .replit-thread-highlight":{background:"transparent"},".cm-thread-indicator-gutter":{transform:"translate(calc(-100% - var(--space-8)));",width:"20px",overflow:"visible"}}),q=f.QQ.define({create:function(){return{}},update:function(e,n){var t=e;return(0,p.j)(n,O,(function(e){t=e.value})),n.changes.empty?t:t=Object.values(t).map((function(e){var t=e.indexStart>n.state.doc.length?n.state.doc.length:n.changes.mapPos(e.indexStart),r=e.indexEnd>n.state.doc.length?n.state.doc.length:n.changes.mapPos(e.indexEnd);return(0,l.Z)((0,a.Z)({},e),{indexStart:t,indexEnd:r})})).reduce((function(e,n){return e[n.id]=n,e}),{})}}),$=f.QQ.define({create:function(){return null},update:function(e,n){var t=e;return(0,p.j)(n,W,(function(e){var r=n.state,i=r.selection.main,o=i.from,a=i.to;if(o===a){var l=r.doc.lineAt(o);o=Math.max(l.from-1,0),a=l.to}t={id:e.value,indexStart:o,indexEnd:a}})),(0,p.j)(n,H,(function(){t=null})),(0,p.j)(n,z,(function(){t=null})),null!==t&&(0,p.j)(n,O,(function(e){if(!t)throw new Error("expected newPlaceholder");e.value[t.id]&&(t=null)})),!n.changes.empty&&t&&(t=(0,l.Z)((0,a.Z)({},t),{indexStart:n.changes.mapPos(t.indexStart),indexEnd:n.changes.mapPos(t.indexEnd)})),t}}),Y=f.QQ.define({create:function(){return null},update:function(e,n){var t=e;return(0,p.j)(n,z,(function(e){t=e.value})),(0,p.j)(n,W,(function(e){t=e.value})),t}}),K=function(e){(0,o.Z)(t,e);var n=(0,c.Z)(t);function t(e,i){var o;return(0,r.Z)(this,t),(o=n.call(this)).id=e,o.setThreadElements=i,o}var u=t.prototype;return u.eq=function(e){return e.id===this.id},u.toDOM=function(e){var n=this,t=document.createElement("div");t.className="cm-thread-portal-widget";var r=e.dom.querySelector(".cm-scroller"),o=e.dom.querySelector(".cm-gutters");return r&&o&&(0,x.L)(t,r,o),setTimeout((function(){n.setThreadElements((function(e){return(0,l.Z)((0,a.Z)({},e),(0,i.Z)({},n.id,t))}))})),t},u.destroy=function(e){var n=this;e.remove(),setTimeout((function(){n.setThreadElements((function(e){var t=(0,a.Z)({},e);return delete t[n.id],t}))}))},u.ignoreEvent=function(){return!0},t}(v.l9),Q=function(e){(0,o.Z)(t,e);var n=(0,c.Z)(t);function t(e,i,o){var a;return(0,r.Z)(this,t),(a=n.call(this)).id=e,a.active=i,a.apolloClient=o,a}var i=t.prototype;return i.toDOM=function(e){var n=this,t=document.createElement("span");return t.setAttribute("aria-hidden","true"),t.className="cm-thread-indicator-widget",(0,d.createRoot)(t).render((0,u.tZ)(F.C,{children:(0,u.tZ)(w,{isOpen:this.active,threadId:this.id,apolloClient:this.apolloClient})})),t.style.cursor="pointer",t.onclick=function(t){t.stopPropagation(),t.preventDefault(),e.dispatch({effects:[z.of(e.state.field(Y)===n.id?null:n.id)]})},t},i.eq=function(e){return e.id===this.id&&e.active===this.active},t}(k),J=function(e){return n={class:"cm-thread-indicator-gutter",markers:function(n){var t=n.state.field(q),r=n.state.field(Y);return f.Xs.of(Object.values(t).filter((function(e){return e.indexEnd!==e.indexStart})).map((function(t){var i=n.state.doc.lineAt(Math.min(t.indexStart,t.indexEnd)).from;return new Q(t.id,t.id===r,e).range(i)})),!0)},initialSpacer:function(){return new Q("initial-spacer",!1)}},[R(),T.of((0,a.Z)({},S,n))];var n}},91513:function(e,n,t){function r(e,n,t){var r=n.clientWidth,i=t.clientWidth;e.style.maxWidth="".concat(r,"px"),e.style.position="sticky",e.style.zIndex="201",e.style.marginLeft="-".concat(i,"px")}t.d(n,{L:function(){return r}})},58784:function(e,n,t){t.d(n,{AL:function(){return w},GD:function(){return v},VO:function(){return h},Y:function(){return Z},tT:function(){return g}});var r=t(72006),i=t(43119),o=t(71440),a=t(91015),l=t(24635),c=t(50216);function u(){var e=(0,i.Z)(["\n  query CodemirrorThread($id: String!) {\n    thread: annotationAnchor(id: $id) {\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n    currentUser {\n      id\n      username\n      image\n    }\n  }\n  ","\n"]);return u=function(){return e},e}function s(){var e=(0,i.Z)(["\n  mutation CreateThread(\n    $thread: AnnotationAnchorInput!\n    $message: AnnotationMessageInput\n    $highlight: AnnotationHighlightInput\n  ) {\n    createThread: createAnnotationAnchor(\n      annotationAnchor: $thread\n      annotationMessage: $message\n      highlight: $highlight\n    ) {\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return s=function(){return e},e}function d(){var e=(0,i.Z)(["\n  mutation UpdateThread($id: String!, $changes: AnnotationAnchorChangesInput!) {\n    updateThread: updateAnnotationAnchor(id: $id, changes: $changes) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function f(){var e=(0,i.Z)(["\n  mutation CreateThreadMessage(\n    $replId: String!\n    $threadId: String!\n    $threadMessage: AnnotationMessageInput!\n    $highlight: AnnotationHighlightInput\n  ) {\n    createThreadMessage: createAnnotationMessage(\n      replId: $replId\n      anchorId: $threadId\n      annotationMessage: $threadMessage\n      highlight: $highlight\n    ) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}var p={},h=(0,o.Ps)(u(),a.j7);function v(e){var n=(0,r.Z)({},p,e);return l.a(h,n)}var m=(0,o.Ps)(s(),a.j7);function g(e){var n=(0,r.Z)({},p,e);return c.D(m,n)}var y=(0,o.Ps)(d(),a.j7);function Z(e){var n=(0,r.Z)({},p,e);return c.D(y,n)}var b=(0,o.Ps)(f(),a.j7);function w(e){var n=(0,r.Z)({},p,e);return c.D(b,n)}},97318:function(e,n,t){t.d(n,{Z:function(){return x}});var r=t(72006),i=t(4405),o=t(2272),a=t(9970),l=t(50959),c=t(13233),u=t(58784),s=t(53828),d=t(91015),f=t(46179),p=t(48330),h=t(29599),v=t(45285),m=t(67530),g=t(18171),y=t(30826),Z=t.n(y);function b(e,n){if(!e)return null;var t,r=e.state.field(m.OQ),i=e.state.field(m.ZS),o=null!==(t=r[n])&&void 0!==t?t:(null===i||void 0===i?void 0:i.id)===n?i:null;return o||null}function w(e,n){if(!e)return null;var t=b(e,n);if(!t)return null;var r=Math.min(t.indexStart,t.indexEnd),i=Math.max(t.indexStart,t.indexEnd),o=e.state.doc.lineAt(r),a=e.state.doc.lineAt(i),l=e.state.doc.sliceString(e.state.doc.line(Math.max(o.number-2,1)).from,r),c=e.state.doc.sliceString(i,e.state.doc.line(Math.min(a.number+2,e.state.doc.lines)).to);return{precode:l,code:e.state.doc.sliceString(r,i),postcode:c}}function x(e,n,t){var y=(0,c.Z)().showError,x=(0,p.Z)(),k=(0,f.Z)().map((function(e){return e.username})),C=(0,v.Z)().fs,S=(0,u.GD)({variables:{id:e}}),T=S.data,E=S.error,R=S.loading,I=S.client,G=function(){var t;return R||!T?!!n&&(null===(t=n.state.field(m.ZS))||void 0===t?void 0:t.id)===e:"AnnotationAnchor"!==T.thread.__typename}(),D=R,_=l.useMemo((function(){return D||!T?null:"UserError"===T.thread.__typename?{id:e,__typename:"AnnotationAnchor",messages:[],isGeneral:!1,isResolved:!1}:"AnnotationAnchor"===T.thread.__typename?T.thread:null}),[T,e,D]),P=(0,o.Z)((0,u.tT)({onError:function(e){return y(e.message)},update:function(e,n){var t,r;n.errors?n.errors.forEach((function(e){return y(e.message)})):"UserError"!==(null===(t=n.data)||void 0===t||null===(r=t.createThread)||void 0===r?void 0:r.__typename)||y(n.data.createThread.message)}}),1),B=P[0],A=(0,o.Z)((0,u.AL)({onError:function(e){return y(e.message)},update:function(e,n){var t;if(n.errors)n.errors.forEach((function(e){return y(e.message)}));else{var r=null===(t=n.data)||void 0===t?void 0:t.createThreadMessage;r&&"UserError"===r.__typename&&y(r.message)}}}),1),U=A[0],L=(0,o.Z)((0,u.Y)({onError:function(e){return y(e.message)},update:function(e,n){var t;if(n.errors)n.errors.forEach((function(e){return y(e.message)}));else{var r=null===(t=n.data)||void 0===t?void 0:t.updateThread;r&&"UserError"===r.__typename&&y(r.message)}}}),1),X=L[0],N=(0,o.Z)((0,d.Hj)(),1)[0],M=(0,g.Z)((function(){return Z()(N,1e3,{trailing:!1})}),[N]),F=function(){var e=null===T||void 0===T?void 0:T.currentUser;return e?{user:{__typename:"User",id:e.id,username:e.username,image:e.image}}:{}};return{thread:_,isPlaceholder:G,error:E,loading:D,getHighlight:w,getLatestAnchor:function(){return b(n,e)},updateThread:function(e){var n,t=e.changes,o="AnnotationAnchor"===(null===T||void 0===T||null===(n=T.thread)||void 0===n?void 0:n.__typename)?T.thread:null;if(!o)throw new Error("expected thread");X({variables:{id:o.id,changes:t},optimisticResponse:{__typename:"RootMutationType",updateThread:(0,i.Z)((0,r.Z)({},o,t),{isResolved:"boolean"===typeof t.isResolved?t.isResolved:o.isResolved})}})},finalizeThreadMessage:function(o){var l,c=o.message,d=o.messageId,f={id:d,text:c,mentions:(0,h.kW)(c,{users:(0,a.Z)(k).concat(["everyone"])}).mentions};if(G&&n&&t){var p=n.state.field(m.ZS),v={id:e,replId:x,indexStart:null===p||void 0===p?void 0:p.indexStart,indexEnd:null===p||void 0===p?void 0:p.indexEnd,otVersion:C.getOTVersion(t),path:t};B({variables:{thread:v,message:f,highlight:w(n,e)},optimisticResponse:{__typename:"RootMutationType",createThread:(0,i.Z)((0,r.Z)({__typename:"AnnotationAnchor"},v,F()),{messages:[(0,i.Z)((0,r.Z)({id:d,timeCreated:Date.now(),currentUserIsAuthor:!0},F()),{content:{text:c,__typename:"TextMessageContentType"},anchor:{id:v.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",seen:!0})],isResolved:!1,isGeneral:!1})}}),I.writeQuery({query:u.VO,variables:{id:e},data:{__typename:"RootQueryType",thread:(0,i.Z)((0,r.Z)((0,i.Z)((0,r.Z)({},v),{isResolved:!1,isGeneral:!1}),F()),{messages:[(0,i.Z)((0,r.Z)({id:d,timeCreated:Date.now(),currentUserIsAuthor:!0},F()),{content:{text:c,__typename:"TextMessageContentType"},anchor:{id:v.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",seen:!0})],__typename:"AnnotationAnchor"}),currentUser:null===T||void 0===T?void 0:T.currentUser}});var g=I.readQuery({query:s.Jq,variables:{replId:x,path:t}});if(g){var y,Z="ThreadsByFileResult"===(null===(y=g.threadsByFile)||void 0===y?void 0:y.__typename)?g.threadsByFile.threads:[],b=F().user;I.writeQuery({query:s.Jq,variables:{replId:x,path:t},data:{__typename:"RootQueryType",threadsByFile:{__typename:"ThreadsByFileResult",threads:(0,a.Z)(Z).concat([(0,r.Z)({messageCount:1,unreadCount:0,__typename:"AnnotationAnchor",isGeneral:!1,user:b,isResolved:!1,participants:[b]},v)])}}})}}else{var S="AnnotationAnchor"===(null===T||void 0===T||null===(l=T.thread)||void 0===l?void 0:l.__typename)?T.thread:null;if(!S)throw new Error("expected thread");U({variables:{replId:x,threadId:S.id,threadMessage:f,highlight:w(n,S.id)},optimisticResponse:{__typename:"RootMutationType",createThreadMessage:(0,i.Z)((0,r.Z)({},S),{messages:(0,a.Z)(S.messages.filter((function(e){return!e.id.startsWith("chat-")}))).concat([(0,i.Z)((0,r.Z)({},F(),f),{content:{text:f.text,__typename:"TextMessageContentType"},anchor:{id:S.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",timeCreated:Date.now(),currentUserIsAuthor:!0,seen:!0})])})}})}},changeThreadMessage:function(n){var t=n.messageId;M({variables:{threadId:e,messageId:t,message:null}})}}}},53828:function(e,n,t){t.d(n,{Jq:function(){return u},eR:function(){return s}});var r=t(72006),i=t(43119),o=t(71440),a=t(24635);function l(){var e=(0,i.Z)(["\n  query ThreadsByFileHook($replId: String!, $path: String!) {\n    threadsByFile(replId: $replId, path: $path) {\n      ... on ThreadsByFileResult {\n        threads {\n          id\n          path\n          otVersion\n          indexStart\n          indexEnd\n          messageCount\n          unreadCount\n          user {\n            id\n            image\n            username\n          }\n          participants {\n            id\n            image\n            username\n          }\n          isGeneral\n          isResolved\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var c={},u=(0,o.Ps)(l());function s(e){var n=(0,r.Z)({},c,e);return a.a(u,n)}},45634:function(e,n,t){function r(e,n,t){if("effects"in e){var i=!0,o=!1,a=void 0;try{for(var l,c=e.effects[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value;u.is(n)&&t(u)}}catch(v){o=!0,a=v}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}}else{var s=!0,d=!1,f=void 0;try{for(var p,h=e.transactions[Symbol.iterator]();!(s=(p=h.next()).done);s=!0){r(p.value,n,t)}}catch(v){d=!0,f=v}finally{try{s||null==h.return||h.return()}finally{if(d)throw f}}}}t.d(n,{j:function(){return r}})},47581:function(e,n,t){t.d(n,{B:function(){return o}});var r=t(14806),i=t(45634);function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=r.Py.define(),o=r.QQ.define({create:function(){return n},update:function(n,r){return(0,i.j)(r,t,(function(t){n=e(t.value,n)})),n}});return{effect:t,state:o}}},2954:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(74985),i=t(6394),o=t(50959);function a(e){var n=e.json,t=(0,o.useMemo)((function(){return JSON.stringify(n,null,2)}),[n]);return(0,r.tZ)(i.Z,{language:"json",code:t})}},52564:function(e,n,t){t.d(n,{X:function(){return Un}});var r=t(57389),i=t(72006),o=t(74985),a=t(45353),l=t(48468),c=t(82568),u=t(27691),s=t(39541),d=t(25198),f=t(85368),p=t(50959),h=t(18171),v=t(94716),m=t(32104),g=t(17807),y=t(2272),Z=t(91398),b=t(92153),w=t(56169),x=t(9970);function k(e){return e.map((function(e){return"group"===e.data.type?e.data.key:e.data.key||e.data.label})).join(":")}function C(e,n){var t=[],r=!0,i=!1,o=void 0;try{for(var a,l=e.slice(n)[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;"group"!==c.data.type&&t.push(c.data.label)}}catch(u){i=!0,o=u}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return(0,x.Z)(new Set(t))}function S(e,n){for(var t=e.indexPath,r=n.indexPath,i=Math.min(t.length,r.length),o=0;o<i;o++){if(t[o]>r[o])return 1;if(t[o]<r[o])return-1}return t.length-r.length}var T=t(92683),E=t(13525),R=t(82325),I=(0,p.createContext)(void 0);function G(){var e=(0,p.useContext)(I);if(!e)throw new Error("Expected store in context");return e}function D(e){var n=G();return(0,T.Dv)(e,{store:n})}function _(e){return(0,R.lV)((0,p.useCallback)((function(n){return n(e)}),[e]),{store:G()})}var P=function(e){var n=G();return(0,T.b9)(e,{store:n})};function B(e){return(0,E.b)(e,G())}var A=t(56581),U=function(e){return"item-"+e},L=(0,Z.cn)(0),X=(0,Z.cn)(0),N=(0,Z.cn)(0),M=(0,Z.cn)((function(e){return e(L)+e(X)+e(N)})),F=(0,Z.cn)({path:[],rows:[],items:[],placeholder:"",isLoading:!1}),O=(0,Z.cn)(!0);function W(){return D(O)}var H=(0,Z.cn)(!1);function V(){return D(H)}var z,j=(0,Z.cn)(null),q=(0,Z.cn)({}),$=(0,A.kv)(q,(function(e){return Boolean(e.openOnInput)})),Y=(0,A.kv)(q,(function(e){return Boolean(e.autoFocus)})),K=(0,A.kv)(q,(function(e){return e.keyboardShortcut})),Q=(0,A.kv)(q,(function(e){return e.command})),J=(0,A.kv)(q,(function(e){return e.overscan})),ee=(0,A.kv)(q,(function(e){return e.footer})),ne=(0,A.kv)(q,(function(e){return e.focusRef})),te=(0,A.kv)(q,(function(e){return null!==(z=e.fontSize)&&void 0!==z?z:14})),re=(0,Z.cn)((function(e){return!e($)})),ie=(0,A.kv)(q,(function(e){return Boolean(e.iconBreadcrumbs)})),oe=(0,Z.cn)(null),ae=(0,Z.cn)((function(e){return e(fe)>-1})),le=(0,Z.cn)((function(e){var n=e(F);return!n.isLoading&&0===n.rows.length})),ce=(0,Z.cn)({label:"",input:"",menu:""});var ue=(0,Z.cn)(""),se=(0,Z.cn)(""),de=(0,Z.cn)(""),fe=(0,Z.cn)(-1),pe=(0,Z.cn)((function(e){var n=e(fe);return e(he).findIndex((function(e){return"item"===e.type&&e.index===n}))}));var he=(0,Z.cn)((function(e){return e(F).rows})),ve=(0,Z.cn)((function(e){return e(F).items})),me=(0,Z.cn)((function(e){return e(ve).length})),ge=(0,Z.cn)((function(e){return e(Ee).filter((function(e){return"context"===e.data.type&&Boolean(e.match)}))})),ye=(0,Z.cn)((function(e){return e(ge).length>0})),Ze=(0,Z.cn)(!1),be=(0,Z.cn)(null,(function(e,n){var t,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(n(Ze,!0),n(F,(function(e){return(0,b.ZP)(e,(function(e){e.path=[e.path[0]]}))})),e(Me).setPath(e(Ee)),n(fe,-1),n(ue,""),n(se,""),n(de,""),e($)&&n(O,!1),r.focus)&&(null===(t=e(Ae))||void 0===t||t.focus())})),we=(0,Z.cn)((function(e){return e(F).placeholder}));var xe=(0,Z.cn)((function(e){return e(F).isLoading}));var ke=(0,Z.cn)((function(e){return e(F).path.length}));function Ce(){return D(ke)}var Se=(0,Z.cn)((function(e){return e(ye)||Boolean(e(ue))}));var Te=(0,Z.cn)(null,(function(e,n,t){var r;n(oe,t),"context"===t.data.type&&(null===(r=e(Ae))||void 0===r||r.focus())}));var Ee=(0,Z.cn)((function(e){return e(F).path})),Re=(0,Z.cn)((function(e){return 1===e(Ee).length})),Ie=(0,Z.cn)(null,(function(e,n,t){var r=e(Ee),i=r.indexOf(t);-1!==i&&(r=r.slice(0,i+1),n(fe,0),e(Me).setPath(r),n(ue,""))}));function Ge(e,n){return n.match.score-e.match.score}var De=(0,Z.cn)(null,(function(e,n,t){var r=e(de);if(r===e(de)){var i,o=t.items.sort(Ge),a=t.path.length?t.path[t.path.length-1]:null,l=function(e,n){var t=new Map;e.forEach((function(e){var n=e.path.slice(0,-1),r="section:"+k(n),i=t.get(r);if(i)i.items.push(e);else{var o=n[n.length-1],a="group"===(null===o||void 0===o?void 0:o.data.type);t.set(r,{type:"section",path:n,score:e.match.score,items:[e],unlabeled:a,key:r})}}));var r=(0,x.Z)(t.entries()).sort((function(e,t){var r=(0,y.Z)(e,2),i=r[0],o=r[1],a=(0,y.Z)(t,2),l=a[0],c=a[1];if(!n||!n.includes(i)&&!n.includes(l))return c.score-o.score;var u=n.indexOf(i),s=n.indexOf(l);return u>-1&&s>-1?u-s:-1===u?1:-1})),i={items:[],rows:[]},o=0;return r.forEach((function(e){var n=(0,y.Z)(e,2),t=n[0],r=n[1];i.rows.push({type:r.type,key:t,path:r.path,unlabeled:r.unlabeled}),r.items.forEach((function(e){i.items.push(e),i.rows.push({type:"item",item:e,index:o++})}))})),i}(o,r?e(F).rows.filter((function(e){return"section"===e.type})).map((function(e){return e.key})):void 0),c=l.items,u=l.rows,s=null!==(i=null===a||void 0===a?void 0:a.data)&&void 0!==i?i:null,d=null===s||void 0===s?void 0:s.description;e(ie)&&"group"!==(null===s||void 0===s?void 0:s.type)&&(d=null===s||void 0===s?void 0:s.label),n(F,(function(e){return{items:c,rows:u,isLoading:Boolean(t.partial),path:t.path,placeholder:d||e.placeholder}}))}})),_e=(0,Z.cn)(null,(function(e,n,t){n(j,t),n(F,(function(e){return{items:[],rows:[],isLoading:!1,path:e.path,placeholder:e.placeholder}}))})),Pe=(0,Z.cn)(null,(function(e,n,t){n(ue,t),n(fe,t?0:-1),n(j,null),n(F,(function(e){return(0,b.ZP)(e,(function(e){e.isLoading=Boolean(t)}))})),e($)&&n(O,Boolean(t))}));var Be=(0,Z.cn)(null,(function(e,n,t){n(F,(function(e){return(0,b.ZP)(e,(function(e){e.items=[],e.rows=[],e.path=t}))})),n(Pe,""),n(se,""),n(de,"")})),Ae=(0,Z.cn)(null),Ue=(0,Z.cn)(null,(function(e,n){var t=e(fe);if(!(t<0)){var r=e(ve)[t];r&&n(oe,r)}})),Le=(0,Z.cn)(null,(function(e,n,t){var r=e(O),i=e(me),o=e(fe);switch(t.key){case"ArrowDown":t.preventDefault();var a=o+1;return n(fe,a<i?a:0),void n(O,!0);case"ArrowUp":t.preventDefault();var l=o-1;return void n(fe,Math.max(-1,l));case"Home":return t.preventDefault(),void(t.shiftKey?t.currentTarget.selectionStart=0:t.currentTarget.setSelectionRange(0,0));case"End":t.preventDefault();var c=t.currentTarget.value.length;return void(t.shiftKey?t.currentTarget.selectionEnd=c:t.currentTarget.setSelectionRange(c,c));case"Escape":if(!e(ue))return;if(t.preventDefault(),n(Pe,""),n(se,""),e(re))return;return void n(O,!1);case"Enter":if(!r)return;return t.preventDefault(),void n(Ue);case"PageUp":case"PageDown":if(!r)return;t.preventDefault();var u="PageUp"===t.key?-10:10;return void n(fe,(function(e){return Math.max(Math.min(e+u,i-1),0)}))}}));function Xe(){var e=P(Ae),n=D(we),t=(0,y.Z)(function(){var e=D(ue),n=P(Pe),t=P(se),r=(0,p.useTransition)()[1];return[e,(0,p.useCallback)((function(e){var i="string"===typeof e?e:e.currentTarget.value;n(i),r((function(){return t(i)}))}),[n,r,t])]}(),2),r=t[0],i=t[1],o=P(fe),a=D(fe),l=D(ce),c=W();return{onBlur:function(){return o(-1)},onChange:i,placeholder:n,value:r,ref:e,disabled:V(),ariaAttrs:{id:l.input,role:"combobox",autoComplete:"off","aria-autocomplete":"list","aria-activedescendant":a>-1?U(a):"","aria-controls":l.menu,"aria-expanded":c,"aria-labelledby":l.label}}}var Ne=(0,Z.cn)(null,(function(e,n,t){var r=Array.isArray(t)?t:[t];e(Ze)&&(r=[r[0]]);var i=e(se);n(de,i),e(Me).setPath(r,i)})),Me=(0,Z.cn)({});var Fe=(0,Z.cn)(null,(function(e,n){var t=e(Ee),r=e(ge);if(r.pop()){var i=r.pop();if(i){var o=t.indexOf(i);t=t.slice(0,o+1),n(fe,0),n(Be,t),e(Me).setPath(t)}else n(be)}}));function Oe(){var e=W(),n=D(Se),t=D(ue),r=P(fe),i=D(oe),o=D(le),a=P(Be),l=P(H),c=P(_e),u=V(),s=D(j),d=P(Le),f=D(ae),m=P(be),g=_(q),y=_(Ae),Z=function(){var e=D(Me),n=D(Q),t=B(Re),r=B(se),i=P(de),o=P(Ne),a=(0,v.Z)(n);return(0,p.useEffect)((function(){t.current&&o(n)}),[e,t,n,r,o]),(0,p.useEffect)((function(){return t.subscribe((function(e){e&&o(a.current)}))}),[e,r,t,o,a]),(0,p.useEffect)((function(){var n=function(n){i(n),e.search(n)};return n(r.current),r.subscribe(n)}),[e,r,t,i,a]),e}(),b=(0,h.Z)((function(){return function(){var e;return null===(e=y())||void 0===e?void 0:e.focus()}}),[y]),w=(0,h.Z)((function(){return function(){var e;return null===(e=y())||void 0===e?void 0:e.blur()}}),[y]),x=P(Fe),k=(0,h.Z)((function(){return function(e){if("Backspace"!==e.key||e.currentTarget.value)return d(e);x()}}),[d,x]);return(0,p.useEffect)((function(){var e=function(e){c(null!==e&&void 0!==e?e:"Something went wrong"),b()};if(i&&"group"!==i.data.type){if("context"===i.data.type){var n=i.path;return a(n),r(-1),void Z.setPath(n)}switch(i.data.type){case"output":case"openPane":case"error":var t,o;return null===(o=(t=g()).onSelect)||void 0===o||o.call(t,i),void m()}var u=null;try{u=i.data.run()}catch(d){return void e()}var s=!1;return l(!0),Promise.resolve(u).then((function(n){var t,r;s||(l(!1),"error"!==(null===n||void 0===n?void 0:n.type)?(null===(r=(t=g()).onAction)||void 0===r||r.call(t),m()):e(n.message))})).catch((function(){e()})),function(){s=!0}}}),[i,a,r,m,l,c,w,b,Z,g]),{focus:b,onKeyDown:k,inputValue:t,isOpen:e,isClearable:n,noResults:o,hasHighlightedItem:f,isRunning:u,actionError:s,clearCommads:m}}function We(e){var n={label:(0,w.D)(),input:(0,w.D)(),menu:(0,w.D)()},t=(0,p.useState)((function(){var t,r=(0,Z.MT)();r.set(ce,n),r.set(q,e),r.set(O,!e.openOnInput),r.set(Me,function(e){var n=e.initialPath,t=e.partialUpdateTimeout,r=e.onUpdate,i=function(e){a&&clearTimeout(a);var n=++l,i=0,c=[],u=o[o.length-1];u.commands?(void 0!==t&&(a=setTimeout((function(){c.length&&r({items:(0,x.Z)(c).sort(S),partial:!0,path:o})}),t)),function t(u,s,d){if(i++,!u.commands)throw new Error("Expected commands");var f=(0,x.Z)(s).concat([u]),p=f.length===o.length;Promise.resolve(u.commands({active:p,search:e,path:f})).then((function(u){n===l?(i--,u.forEach((function(n,r){var i=(0,x.Z)(f).concat([n]),o=(0,x.Z)(d).concat([r]),a=n.match?n.match({search:e,data:n.data,path:i,active:p}):null;a&&c.push({path:i,data:n.data,match:a,indexPath:o}),n.commands&&t(n,f,o)})),i>0||(a&&clearTimeout(a),r({items:(0,x.Z)(c).sort(S),path:o}))):a&&clearTimeout(a)}))}(u,o.slice(0,o.length-1),[])):r({items:c,path:o})},o=n,a=null,l=0;return{search:i,setPath:function(e){o=e,i(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"")},getPath:function(){return o}}}({initialPath:Array.isArray(e.command)?e.command:[e.command],partialUpdateTimeout:30,onUpdate:function(e){return r.set(De,e)}}));var i,o=Array.isArray(e.command)?e.command[0]:e.command,a=null!==(i=null===o||void 0===o||null===(t=o.data)||void 0===t?void 0:t.description)&&void 0!==i?i:null;return a&&r.set(F,(function(e){return(0,b.ZP)(e,(function(e){e.placeholder=a}))})),r})),r=t[0];return(0,p.useEffect)((function(){r.set(q,e)}),[r,e]),r}var He=t(57913),Ve=(0,t(68973).$)(["fontSize"]),ze=Ve.cssVars,je=Ve.styleTokens,qe=function(e){return e/14+"em"},$e=function(e){var n=e/14+"em";return{"&& svg":{minWidth:n,minHeight:n,width:n,height:n}}},Ye=(0,c.X)({root:[s.l0.reset.button,s.l0.viewStyle,s.l0.flex.row,s.l0.align.center,s.l0.borderRadius(0),s.l0.cursor.pointer,s.l0.color.foregroundDimmer,{gap:qe(4),paddingLeft:qe(4),paddingRight:qe(4),"&:hover":{color:s.TV.foregroundDefault}}],icon:[s.l0.position.relative,$e(16),{width:qe(16),height:qe(16)}],iconRight:[$e(12),{width:qe(12),height:qe(12)}],text:[s.l0.truncate,s.l0.flex.shrink(1),{fontSize:"1em"}]}),Ke=(0,p.memo)((function(){var e={iconOnly:D(ie),breadcrumbs:D(ge),onClick:P(Ie)},n=e.breadcrumbs,t=e.iconOnly,r=e.onClick;return n.length?(0,o.tZ)(o.HY,{children:n.map((function(e,n){if(!e.data)return null;if(!("label"in e.data))return null;var i=e.data,a=i.label,l=i.icon,c=a+n;return(0,o.BX)("button",{css:Ye.root,onClick:function(){return r(e)},children:[(0,o.tZ)(f.G,{css:Ye.icon,children:l}),t?null:(0,o.tZ)(f.G,{css:Ye.text,children:a}),(0,o.tZ)(f.G,{css:Ye.iconRight,children:(0,o.tZ)(He.Z,{})})]},c)}))}):null})),Qe=t(43312),Je=t(80336),en=(0,Qe.iv)([s.l0.reset.button,s.l0.viewStyle,s.l0.center,s.l0.height("100%"),s.l0.cursor.pointer,s.l0.color.foregroundDimmest,{paddingLeft:qe(4),paddingRight:qe(4),"&:hover":{color:s.TV.foregroundDefault}},$e(16)]);function nn(e){return(0,o.tZ)("button",{css:en,onClick:e.onClick,title:e.isLoading?"Loading":"Clear",children:e.isLoading?(0,o.tZ)(m.Z,{}):(0,o.tZ)(Je.Z,{})})}var tn=t(4405),rn=t(94629),on=t(63128),an=t(4421),ln=t(92508),cn=t(13716),un=t(71321),sn=t(49944);function dn(e){var n=e.data,t="openPane"===n.type?n.pane:void 0;return t&&!(0,ln.Ur)(t)?t:null}var fn=function(e){return Math.round(e.value/14*e.fontSize)};var pn={transitionDuration:an.H.duration,transitionTimingFunction:an.H.timingFunction},hn=(0,c.X)({background:[pn,{transitionProperty:"background-color"}],opacity:[pn,{transitionProperty:"opacity"}],color:[pn,{transitionProperty:"color"}]}),vn=[s.l0.position.absolute,s.l0.top(0),s.l0.left(0),s.l0.width("100%")],mn=(0,c.X)({item:[vn,{userSelect:"none",cursor:"pointer","&:hover > div":{backgroundColor:"var(".concat(g.dj.interactiveBackground,")")},"& > div > div":{transition:"120ms ease-out"},"&:hover > div > div":{backgroundColor:"var(".concat(g.dj.interactiveBackground,")"),color:"".concat(s.TV.foregroundDefault," !important")}}],divider:[vn,s.l0.justify.center,{padding:"0 ".concat(qe(8))}]}),gn=(0,p.memo)((function(e){var n=function(e){var n=P(Te),t=(0,p.useRef)(null),r=D((0,p.useMemo)((function(){return(0,A.kv)(he,(function(n){return n[e]}))}),[e])),i="item"===r.type?r.index:null,o=D((0,p.useMemo)((function(){return(0,Z.cn)((function(e){return null!==i&&e(fe)===i}))}),[i])),a="item"===(null===r||void 0===r?void 0:r.type)?function(){return n(r.item)}:void 0,l="item"===r.type?{id:U(e),role:"option","aria-selected":o}:void 0;return{row:r,active:o,ref:t,onClick:a,ariaAttrs:l}}(e.index),t=n.row,r=n.active,a=n.onClick,l=n.ariaAttrs,c=n.ref;if(!t)return null;var u={height:e.height,transform:"translateY(".concat(e.y,"px)")};if("section"===t.type)return(0,o.tZ)(Sn,{path:t.path,style:u,border:e.index>0});var s=t.item,d=s.data,h=s.match;if("group"===d.type)return null;var v=h.render;if(v&&"content"in v&&v.content)return(0,o.tZ)(f.G,(0,tn.Z)((0,i.Z)({innerRef:c,css:mn.item,style:u,onClick:a},l),{children:(0,o.tZ)(on.Tg,{elevated:r,css:hn.background,children:(0,p.cloneElement)(v.content,{active:r})})}));var m=dn(s),g=d.label,y=d.icon,b=v&&"ranges"in v?v.ranges:void 0;return(0,o.tZ)(f.G,(0,tn.Z)((0,i.Z)({innerRef:c,css:mn.item,style:u,onClick:a},l),{children:m?(0,o.tZ)(kn,{active:r,pane:m,highlight:b}):(0,o.tZ)(bn,{active:r,icon:y,text:g,highlight:b,description:d.description,shortcut:d.keyboardShortcut,hasChildren:"context"===s.data.type})}))})),yn=[{padding:qe(8)},hn.background],Zn=(0,c.X)({root:[yn,s.l0.align.center,s.l0.flex.row,{gap:qe(8),userSelect:"none"}],iconText:[s.l0.align.center,s.l0.flex.row,{gap:qe(8)}],description:[s.l0.truncate,s.l0.flex.growAndShrink(1),{fontSize:"0.9em"}],shortcut:[{justifySelf:"end",marginLeft:"auto"},$e(12)]});function bn(e){return(0,o.BX)(on.Tg,{elevated:e.active,css:Zn.root,children:[(0,o.BX)(f.G,{css:Zn.iconText,children:[(0,o.tZ)(f.G,{css:xn.root,style:{opacity:e.active?1:.7},children:e.icon}),(0,o.tZ)(sn.x,{dimmed:!e.active,text:e.text,highlight:e.highlight})]}),e.description?(0,o.tZ)(f.G,{style:{color:e.active?s.TV.foregroundDimmer:s.TV.foregroundDimmest},css:Zn.description,children:e.description}):null,e.shortcut?(0,o.tZ)(f.G,{css:Zn.shortcut,children:(0,o.tZ)(a.bM,{keyCombo:e.shortcut,small:!0})}):null,e.hasChildren?(0,o.tZ)(f.G,{css:Zn.shortcut,children:(0,o.tZ)(He.Z,{size:12})}):null]})}var wn=(0,c.X)({root:[yn,s.l0.align.center,s.l0.flex.row,{gap:qe(8)}],iconSurface:[{padding:qe(8),borderRadius:qe(8)},s.l0.position.relative,hn.background]}),xn=(0,c.X)({root:[hn.opacity,s.l0.position.relative,$e(16),{width:qe(16),height:qe(16)}]});function kn(e){var n=e.pane,t=e.active,r=e.highlight,i=(0,ln.Se)(),a=i.Icon({pane:n}),l=i.getTitle(n),c=(0,cn.b2)({paneType:n.type});return(0,o.BX)(on.Tg,{elevated:t,css:wn.root,children:[(0,o.tZ)(on.Tg,{elevated:!0,css:wn.iconSurface,children:(0,o.BX)(f.G,{css:xn.root,style:{opacity:e.active?1:.7},children:[a,c?(0,o.tZ)(un.B,{}):null]})}),(0,o.tZ)(sn.x,{dimmed:!t,text:l,highlight:r})]})}var Cn=(0,c.X)({borderHeaderWrap:[{userSelect:"none",padding:[8,8,4,8].map(qe).join(" ")},vn,s.l0.colWithGap(0),s.l0.justify.spaceBetween],borderWrap:[{userSelect:"none",paddingLeft:qe(8),paddingRight:qe(8)},vn,s.l0.justify.center],headerWrap:[{userSelect:"none",paddingLeft:qe(8),paddingRight:qe(8),paddingBottom:qe(4)},vn,s.l0.justify.end],header:[{userSelect:"none"},s.l0.align.center,s.l0.flex.row,{gap:qe(4)},$e(12)],text:[{userSelect:"none"},s.l0.flex.shrink(1),s.l0.color.foregroundDimmest,s.l0.truncate,{fontSize:"0.9em"}],border:[s.l0.height(1),s.l0.width("100%")]}),Sn=(0,p.memo)((function(e){var n=Ce(),t=C(e.path,n),r=(0,o.tZ)(on.Tg,{elevated:!0,css:Cn.border}),i=0===t.length;if(e.border&&i)return(0,o.tZ)(f.G,{css:Cn.borderWrap,style:e.style,children:r});var a=(0,o.tZ)(f.G,{css:Cn.header,children:t.map((function(e,n){return(0,o.BX)(p.Fragment,{children:[n>0?(0,o.tZ)(He.Z,{color:s.TV.foregroundDimmest}):null,(0,o.tZ)(f.G,{css:Cn.text,children:e})]},e+n)}))});return e.border||i?(0,o.BX)(f.G,{css:Cn.borderHeaderWrap,style:e.style,children:[r,a]}):(0,o.tZ)(f.G,{css:Cn.headerWrap,style:e.style,children:a})})),Tn=(0,c.X)({root:[s.l0.flex.growAndShrink(1),s.l0.overflow("hidden"),{paddingTop:qe(8)}],scrollParent:[s.l0.height("100%"),s.l0.overflowY("auto"),s.l0.flex.growAndShrink(1)]}),En=(0,p.memo)((function(e){var n,t=function(){var e=D(he),n=W(),t=(0,p.useRef)(null),r=Ce(),i=D(ce);return{rows:e,isOpen:n,scrollRef:t,currentPathIndex:r,ariaAttrs:{id:i.menu,"aria-labelledby":i.label,role:"listbox"}}}(),r=t.rows,a=t.isOpen,l=t.scrollRef,c=t.currentPathIndex,u=t.ariaAttrs,d=P(X),h=D(te),v=(0,rn.MG)({count:r.length,overscan:null!==(n=e.overscan)&&void 0!==n?n:1,getScrollElement:function(){return l.current},getItemKey:function(e){var n=r[e];return n?"section"===n.type?n.key:k(n.item.path):""},estimateSize:function(e){var n=r[e];return n?function(e){var n=e.row,t=e.currentPathIndex,r=e.isFirst,i=e.fontSize;if("section"===n.type){var o=C(n.path,t).length?24:0;return r?0===o?o:fn({fontSize:i,value:o}):o+fn({fontSize:i,value:16})}var a,l=n.item.match.render;return l&&"content"in l?null!==(a=l.height)&&void 0!==a?a:fn({fontSize:i,value:32}):fn({fontSize:i,value:dn(n.item)?48:32})}({fontSize:h,row:n,currentPathIndex:c,isFirst:0===e}):0},onChange:function(e){d(e.getTotalSize())}}),m={borderRadius:e.hasFooter?void 0:s.TV.space8,display:a?void 0:"none"},g=v.scrollToIndex,y=D(pe);return(0,p.useEffect)((function(){var e=y;e<0||(1===e&&(e=0),g(e,{behavior:"smooth"}))}),[g,y]),(0,o.tZ)(f.G,(0,tn.Z)((0,i.Z)({css:Tn.root},u),{style:m,children:(0,o.tZ)(f.G,{innerRef:l,css:Tn.scrollParent,children:(0,o.tZ)(f.G,{style:{height:"".concat(v.getTotalSize(),"px"),position:"relative",overflow:"hidden"},children:a?v.getVirtualItems().map((function(e){return(0,o.tZ)(gn,{index:e.index,height:e.size,y:e.start},e.key)})):null})})}))})),Rn=(0,c.X)({root:[s.l0.flex.shrink(1),s.l0.height("100%"),{fontSize:je.fontSize}],footer:{paddingTop:qe(8)},keyComboBlocks:{paddingRight:qe(8)},menuWrap:[s.l0.flex.shrink(1)],row:[s.l0.position.absolute,s.l0.top(0),s.l0.left(0),s.l0.width("100%")],menu:[s.l0.flex.shrink(1),s.l0.overflow("auto")],running:[s.l0.center,s.l0.flex.growAndShrink(1)],error:{padding:qe(8)}}),In=(0,c.X)({root:[s.l0.viewStyle,s.l0.flex.growAndShrink(1),s.l0.height("100%"),{fontSize:"1em",padding:"0 ".concat(qe(8)),backgroundColor:"transparent",border:"0 none",outline:"0 none","::placeholder":{color:s.TV.foregroundDimmest},"&:hover::placeholder":{color:s.TV.foregroundDimmer},"&:focus::placeholder, &:hover:focus::placeholder":{color:s.TV.foregroundDimmest}}]}),Gn=(0,p.memo)((function(e){var n=Xe();return(0,o.tZ)("input",(0,i.Z)({autoFocus:e.autoFocus,onKeyDown:e.onKeyDown,css:In.root,placeholder:n.placeholder,value:n.value,onChange:n.onChange,ref:n.ref,onBlur:n.onBlur,disabled:n.disabled,autoComplete:"off"},n.ariaAttrs))})),Dn=[g.gU.filled,s.l0.viewStyle,s.l0.flex.row,s.l0.align.center,s.l0.flex.growAndShrink(1),{height:qe(32),borderRadius:qe(8)}],_n=(0,c.X)({container:[{padding:qe(8),"& > div > button + input":{paddingLeft:0}},s.l0.pb(0)],surface:Dn,surfaceRunning:[Dn,u.p.foregroundPulse()]});function Pn(e){var n=V(),t=P(L),r=(0,l.Z)((function(e){var n=e.height;return t(n)}));return(0,o.tZ)(f.G,{css:_n.container,innerRef:r,children:(0,o.tZ)(f.G,{css:n?_n.surfaceRunning:_n.surface,children:e.children})})}var Bn=(0,p.memo)((function(e){var n=D(Se),t=D(xe);return n?(0,o.tZ)(nn,{onClick:e.onClick,isLoading:t}):null}));var An=(0,p.memo)((function(){var e=Oe(),n=e.isOpen,t=e.focus,i=e.clearCommads,c=e.isClearable,u=e.onKeyDown,g=e.inputValue,y=e.noResults,Z=e.hasHighlightedItem,b=e.isRunning,w=e.actionError,x=(0,v.Z)({inputValue:g,noResults:y,hasHighlightedItem:Z});!function(){var e=_(q),n=D(L),t=B(M);(0,p.useEffect)((function(){var r=function(n){var t=e().onTotalHeightChange;t&&(0===i&&(i=n),t({initial:i,current:n}))};if(0!==n){var i=0;return r(t.current),t.subscribe(r)}}),[n,e,t])}();var k=D(Y),C=D(K),S=D(J),T=D(ee),E=D(ne),R=_(q),I=(0,h.Z)((function(){return function(e){var n,t=x.current,r=R();null===(n=r.onKeyDown)||void 0===n||n.call(r,e,{inputValue:t.inputValue,noResults:t.noResults,hasHighlightedItem:t.hasHighlightedItem}),e.defaultPrevented||("Enter"===e.key&&t.inputValue&&t.noResults&&r.onSubmit?r.onSubmit(t.inputValue):u(e))}}),[x,u,R]);(0,p.useEffect)((function(){E&&(E.current=t)}),[t,E]);var G=D(ce),A=P(N),U=(0,l.Z)((function(e){var n=e.height;return A(n)})),X=D(te);return(0,o.BX)(f.G,{css:Rn.root,style:(0,r.Z)({},ze.fontSize,X+"px"),children:[(0,o.tZ)("label",{id:G.label,htmlFor:G.input,css:s.l0.visuallyHidden,children:"Commands"}),(0,o.BX)(Pn,{children:[(0,o.tZ)(Ke,{}),(0,o.tZ)(Gn,{autoFocus:k,onKeyDown:I}),(0,o.tZ)(Bn,{onClick:function(){return i({focus:!0})}}),C&&!c?(0,o.tZ)(f.G,{css:Rn.keyComboBlocks,children:(0,o.tZ)(a.bM,{keyCombo:C,small:!0})}):null]}),w?(0,o.tZ)(f.G,{css:Rn.error,children:(0,o.tZ)(d.E,{colorway:"warning",text:w})}):null,n&&!b?(0,o.BX)(o.HY,{children:[(0,o.tZ)(En,{overscan:S,hasFooter:Boolean(T)}),T?(0,o.tZ)(f.G,{innerRef:U,css:Rn.footer,children:T}):null]}):null,b?(0,o.tZ)(f.G,{css:Rn.running,children:(0,o.tZ)(m.Z,{size:24})}):null]})}));function Un(e){var n=We(e);return(0,o.tZ)(I.Provider,{value:n,children:(0,o.tZ)(An,{})})}},56029:function(e,n,t){t.d(n,{m:function(){return f}});var r=t(72006),i=t(4405),o=t(77637),a=t(2272),l=t(74985),c=t(50959),u=t(45510),s=t(60566),d=t(66539);function f(e){var n=e.textToCopy,t=e.tooltip,f=(0,o.Z)(e,["textToCopy","tooltip"]),p=(0,a.Z)(c.useState(!1),2),h=p[0],v=p[1],m=c.useRef(null);return c.useEffect((function(){return function(){m.current&&clearTimeout(m.current)}}),[]),(0,l.tZ)(d.u,{isOpen:h,tooltip:null!==t&&void 0!==t?t:"".concat(n," copied to clipboard"),placement:"bottom-end",children:(0,l.tZ)(u.zx,(0,i.Z)((0,r.Z)({},f),{onClick:function(e){(0,s.Z)(n),v(!0),m.current&&clearTimeout(m.current),m.current=setTimeout((function(){return v(!1)}),4e3),f.onClick&&f.onClick(e)}}))})}},11983:function(e,n,t){t.d(n,{KG:function(){return m},bx:function(){return y},h3:function(){return b},pC:function(){return x}});var r=t(72006),i=t(43119),o=t(71440),a=t(24635),l=t(50216);function c(){var e=(0,i.Z)(["\n  fragment EditDomainRepl on Repl {\n    id\n    hostedUrl\n    apexProxy\n    domains {\n      hosting_deployment_id\n      domain\n      state\n    }\n  }\n"]);return c=function(){return e},e}function u(){var e=(0,i.Z)(["\n  query EditDomain($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...EditDomainRepl\n      }\n      ... on ReplRedirect {\n        replUrl\n      }\n      ... on SubscriptionExpiredError {\n        replId\n      }\n    }\n  }\n  ","\n"]);return u=function(){return e},e}function s(){var e=(0,i.Z)(["\n  query EditDomainCheckDomain2($replId: String!, $domain: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        checkDomain2(domain: $domain) {\n          ... on DomainStatus2 {\n            verified\n            retry\n            status\n            records {\n              A\n              TXT\n              CNAME\n            }\n          }\n          ... on NotFoundError {\n            message\n          }\n          ... on ServiceUnavailable {\n            message\n          }\n        }\n      }\n    }\n  }\n"]);return s=function(){return e},e}function d(){var e=(0,i.Z)(["\n  mutation EditDomainLinkReplDomain2(\n    $replId: String!\n    $domain: String!\n    $deploymentId: String\n  ) {\n    linkReplDomain2(\n      replId: $replId\n      domain: $domain\n      deploymentId: $deploymentId\n    ) {\n      __typename\n      ... on Repl {\n        id\n        ...EditDomainRepl\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on ServiceUnavailable {\n        message\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function f(){var e=(0,i.Z)(["\n  mutation EditDomainUpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...EditDomainRepl\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}var p={},h=(0,o.Ps)(c()),v=(0,o.Ps)(u(),h);function m(e){var n=(0,r.Z)({},p,e);return a.a(v,n)}var g=(0,o.Ps)(s());function y(e){var n=(0,r.Z)({},p,e);return a.a(g,n)}var Z=(0,o.Ps)(d(),h);function b(e){var n=(0,r.Z)({},p,e);return l.D(Z,n)}var w=(0,o.Ps)(f(),h);function x(e){var n=(0,r.Z)({},p,e);return l.D(w,n)}},8907:function(e,n,t){t.d(n,{Z:function(){return P}});var r,i=t(77637),o=t(2272),a=t(74985),l=t(48306),c=t.n(l),u=t(50959),s=t(11983),d=t(85368),f=t(61284),p=t(45510),h=t(39541),v=t(39137),m=t(66539),g=t(60566),y=t(88254),Z=t(32508),b=t.n(Z),w=t(8622),x=t(56169),k=t(15544),C=t(54873),S=t(32104),T=t(63837),E=t(80336),R=d.K.span;function I(e){switch(e.status){case r.Verified:return(0,a.tZ)(T.Z,{color:h.TV.accentPositiveDefault});case r.Failed:return(0,a.tZ)(E.Z,{color:h.TV.accentNegativeDefault});case r.Verifying:return(0,a.tZ)(S.Z,{color:h.TV.accentPrimaryDefault});default:return null}}function G(e){var n=e.repl,t=e.existingDomain,r=e.deploymentId,i=e.onLink,l=e.onGoBack,c=e.onLinkStarted,m=e.onStateChanged,Z=(0,u.useState)(t?"loading":null),w=Z[0],C=Z[1],S=(0,u.useState)(!1),T=S[0],E=S[1],R=(0,u.useState)(null),I=R[0],G=R[1],_=(0,u.useState)(!1),P=_[0],B=_[1],A=(0,u.useState)(!0),U=A[0],L=A[1],X=(0,o.Z)((0,s.h3)(),2),N=X[0],M=X[1],F=(0,u.useRef)(null),O=(0,u.useRef)(null),W=(0,u.useRef)(null),H=function(e){(null===e||void 0===e?void 0:e.current)&&e.current.select()},V=function(e){var n;(null===e||void 0===e||null===(n=e.current)||void 0===n?void 0:n.value)&&(0,g.Z)(e.current.value).catch((function(e){y.$e((function(n){n.setTag("domain-link",!0),n.setExtra("type","copy"),y.Tb(e)}))}))},z=(0,u.useState)(t||""),j=z[0],q=z[1];(0,u.useEffect)((function(){M.data&&"Repl"===M.data.linkReplDomain2.__typename&&i()}),[M.data,i]),(0,u.useEffect)((function(){L(!r)}),[r]);var $=function(e){C(e),m()},Y=b()(j,{require_valid_protocol:!1})&&j.split(".").length>=2,K=Y&&2===j.split(".").length,Q=function(e,n,t){var r=e.replace(/^https:\/\//,"");return t?r.replace(n,t):r}(n.hostedUrl,n.id,r),J=n.apexProxy,ee="replit-verify=".concat(null!==r&&void 0!==r?r:n.id),ne=(0,x.H)();return(0,a.BX)(d.G,{css:[h.l0.colWithGap(16)],children:[(0,a.BX)(d.G,{css:[h.l0.colWithGap(8)],children:[(0,a.tZ)(f.h4,{level:2,variant:"subheadDefault",children:"New Domain Link"}),(0,a.BX)(f.xv,{children:["Learn more"," ",(0,a.tZ)("a",{href:"https://docs.replit.com/hosting/hosting-web-pages#custom-domains",target:"_blank",children:"here"}),"."]})]}),(0,a.BX)(d.G,{css:[h.l0.colWithGap(4)],children:[(0,a.tZ)("label",{htmlFor:ne("domain"),children:(0,a.tZ)(f.xv,{color:"dimmer",variant:"small",multiline:!1,children:"Step 1: Enter your domain"})}),(0,a.tZ)(v.II,{className:"cname-url",readOnly:"loading"===w,value:j,onChange:function(e){q(e.target.value)},onBlur:function(){!function(){try{var e=new URL("/",j);q(e.hostname)}catch(n){}}()},placeholder:"example.com",id:ne("domain")})]}),!K&&U||P?null:(0,a.BX)(d.G,{css:[h.l0.colWithGap(8)],children:[(0,a.BX)(d.G,{css:[h.l0.colWithGap(4)],children:[(0,a.tZ)("label",{htmlFor:ne("record"),children:(0,a.BX)(f.xv,{color:"dimmer",variant:"small",multiline:!1,children:["Step 2: Add an ",(0,a.tZ)("code",{children:"A"})," Record"]})}),(0,a.BX)(d.G,{css:[h.l0.rowWithGap(8),h.l0.align.center],children:[(0,a.tZ)(f.xv,{multiline:!1,css:{fontFamily:h.TV.fontFamilyCode,maxWidth:"40%"},children:j}),(0,a.tZ)(f.xv,{multiline:!1,css:{fontFamily:h.TV.fontFamilyCode},children:"A"}),(0,a.tZ)(v.II,{readOnly:!0,ref:F,onChange:function(){return null},value:J,onFocus:function(){return H(F)},id:ne("record")}),(0,a.tZ)(p.zx,{onClick:function(){return V(F)},text:"Copy"})]})]}),U?(0,a.tZ)(d.G,{css:[h.l0.flex.row,h.l0.align.stretch],children:(0,a.tZ)(p.zx,{outlined:!0,onClick:function(){return B(!0)},text:"Use CNAME record instead."})}):null]}),Y&&(P||U&&!K)?(0,a.BX)(d.G,{css:[h.l0.colWithGap(4)],children:[(0,a.tZ)("label",{htmlFor:ne("CNAMERecord"),children:(0,a.BX)(f.xv,{color:"dimmer",variant:"small",multiline:!1,children:["Step 2: Add a ",(0,a.tZ)("code",{children:"CNAME"})," Record"]})}),(0,a.BX)(d.G,{css:[h.l0.rowWithGap(8),h.l0.align.center],children:[(0,a.tZ)(f.xv,{multiline:!1,css:{fontFamily:h.TV.fontFamilyCode,maxWidth:"40%"},children:j}),(0,a.tZ)(f.xv,{multiline:!1,css:{fontFamily:h.TV.fontFamilyCode},children:"CNAME"}),(0,a.tZ)(v.II,{readOnly:!0,ref:W,onChange:function(){return null},value:Q,onFocus:function(){return H(W)},id:ne("CNAMERecord")}),(0,a.tZ)(p.zx,{onClick:function(){return V(W)},text:"Copy"})]}),K?(0,a.BX)(d.G,{css:[h.l0.colWithGap(8)],children:[(0,a.tZ)(f.xv,{variant:"small",children:'Note: this CNAME record requires that your DNS provider supports CNAMEs for apex domains - for example Cloudflare with "CNAME Flattening".'}),(0,a.tZ)(d.G,{css:[h.l0.flex.row,h.l0.align.stretch],children:(0,a.tZ)(p.zx,{onClick:function(){return B(!1)},text:"Use A record instead",outlined:!0})})]}):null]}):null,Y?(0,a.BX)(d.G,{css:[h.l0.colWithGap(4)],children:[K?(0,a.tZ)("label",{htmlFor:ne("txtRecord"),children:(0,a.BX)(f.xv,{color:"dimmer",variant:"small",multiline:!1,children:["This domain also requires a ",(0,a.tZ)("code",{children:"TXT"})," Record"]})}):(0,a.BX)("label",{children:['If you are using a service like Cloudflare (with "orange cloud") that rewrites domain records, you can add a ',(0,a.tZ)("code",{children:"TXT"})," ","Record for verification purposes."]}),(0,a.BX)(d.G,{css:[h.l0.rowWithGap(8),h.l0.align.center],children:[(0,a.tZ)(f.xv,{multiline:!1,css:{fontFamily:h.TV.fontFamilyCode,maxWidth:"40%"},children:j}),(0,a.tZ)(f.xv,{multiline:!1,css:{fontFamily:h.TV.fontFamilyCode},children:"TXT"}),(0,a.tZ)(v.II,{readOnly:!0,ref:O,onChange:function(){return null},value:ee,onClick:function(){return H(O)},id:ne("txtRecord")}),(0,a.tZ)(p.zx,{onClick:function(){return V(O)},text:"Copy"})]})]}):null,"loading"===w?(0,a.tZ)(d.G,{css:[h.l0.colWithGap(12),h.l0.pt(16)],children:(0,a.tZ)(D,{replId:n.id,domain:j,onVerified:function(){return $("verified")},onError:function(){return $("error")}})}):null,"verified"===w?(0,a.tZ)(d.G,{css:[h.l0.colWithGap(12),h.l0.pt(16)],children:(0,a.tZ)(f.xv,{multiline:!1,children:"Your domain has been verified."})}):null,"error"===w||I?(0,a.tZ)(d.G,{css:[h.l0.colWithGap(12),h.l0.pt(16)],children:(0,a.BX)(f.xv,{multiline:!1,children:["Creating the domain link failed",I?": "+I:"","."]})}):null,(0,a.BX)(d.G,{css:[h.l0.rowWithGap(12),h.l0.justify.end],children:[(0,a.tZ)(p.zx,{onClick:l,text:"Close"}),Y&&null===w?(0,a.tZ)(p.zx,{disabled:T,onClick:function(){E(!0),G(null),N({variables:{replId:n.id,domain:j,deploymentId:r}}).then((function(e){var n,t=(null===(n=e.data)||void 0===n?void 0:n.linkReplDomain2)||null;"Repl"===(null===t||void 0===t?void 0:t.__typename)?(G(null),$("loading")):("ServiceUnavailable"!==(null===t||void 0===t?void 0:t.__typename)&&"NotFoundError"!==(null===t||void 0===t?void 0:t.__typename)&&"UnauthorizedError"!==(null===t||void 0===t?void 0:t.__typename)||G(null===t||void 0===t?void 0:t.message),$("error")),E(!1),c()})).catch((function(e){E(!1),G(e.message)}))},text:"".concat(T?"Linking domain...":"Link domain"),iconLeft:(0,a.tZ)(k.Z,{}),colorway:"primary"}):null]})]})}function D(e){var n,t=e.domain,r=e.replId,l=e.onVerified,p=e.onError,v=(0,s.bx)({variables:{replId:r,domain:t},pollInterval:1e3}),m=v.data,g=v.stopPolling;if((0,u.useEffect)((function(){var e,n;if(m&&"Repl"===m.repl.__typename){var t=m.repl;if("NotFoundError"!==(null===(e=t.checkDomain2)||void 0===e?void 0:e.__typename)){if("DomainStatus2"===(null===(n=t.checkDomain2)||void 0===n?void 0:n.__typename)){var r=t.checkDomain2,i=r.retry,o=r.verified;o||i?(!o&&i||g(),o&&l()):p()}}else p()}}),[m,g,l,p]),"Repl"===(null===m||void 0===m?void 0:m.repl.__typename)&&m.repl.checkDomain2){var y,Z,b,w="DomainStatus2"===m.repl.checkDomain2.__typename?m.repl.checkDomain2:null,x=null;if(null===w||void 0===w?void 0:w.records){var k=w.records;k.__typename;x=(0,i.Z)(k,["__typename"])}var C,S=null;if(!(null===w||void 0===w?void 0:w.status))"ServiceUnavailable"===(null===(C=m.repl.checkDomain2)||void 0===C?void 0:C.__typename)&&(S=m.repl.checkDomain2.message),S||(S="DNS updates can take up to 48 hours to fully synchronize. Feel free to check back later.");return(0,a.BX)(d.G,{css:[h.l0.colWithGap(16),h.l0.justify.spaceBetween],children:[(0,a.BX)(d.G,{css:[h.l0.rowWithGap(16),h.l0.align.center],children:[(0,a.tZ)("div",{css:[h.l0.width("20px"),h.l0.height("20px"),{aspectRatio:"1 / 1"},{borderRadius:"100%"},{borderRadius:"100%"},{borderStyle:"solid"},{borderWidth:"3px"},{borderColor:h.TV.accentPrimaryDimmer},{borderTopColor:h.TV.accentPrimaryDefault},{transform:"rotate(0deg)"},{animation:"linear domain-loading 1s infinite"}],className:"jsx-4e6cc6caecb799c9"}),(0,a.tZ)("div",{className:"jsx-4e6cc6caecb799c9",children:S})]}),x||"DomainStatus2"===(null===(y=m.repl.checkDomain2)||void 0===y?void 0:y.__typename)&&(null===(Z=m.repl.checkDomain2)||void 0===Z?void 0:Z.retry)||"ServiceUnavailable"===(null===(b=m.repl.checkDomain2)||void 0===b?void 0:b.__typename)?(0,a.BX)(d.G,{children:[(0,a.tZ)("br",{className:"jsx-4e6cc6caecb799c9"}),x?(0,a.BX)(d.G,{children:["Currently, your domain\u2019s records show:",(0,a.tZ)("pre",{css:[h.l0.overflow("scroll")],className:"jsx-4e6cc6caecb799c9",children:Object.entries(x).map((function(e){var n=(0,o.Z)(e,2),r=n[0],i=n[1];return null===i||void 0===i?void 0:i.map((function(e){return(0,a.BX)("div",{className:"jsx-4e6cc6caecb799c9",children:[t," ",r," ",e]},"{domain}-{dnsType}")}))}))})]}):(0,a.tZ)(f.xv,{children:"Currently, your domain is either not returning any records, or something is getting in the way of our verification process."})]}):null,(0,a.tZ)(c(),{id:"4e6cc6caecb799c9",children:"@-webkit-keyframes domain-loading{from{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes domain-loading{from{-moz-transform:rotate(0deg);transform:rotate(0deg)}to{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes domain-loading{from{-o-transform:rotate(0deg);transform:rotate(0deg)}to{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes domain-loading{from{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}"})]})}return"Repl"===(null===m||void 0===m?void 0:m.repl.__typename)&&"NotFoundError"===(null===(n=m.repl.checkDomain2)||void 0===n?void 0:n.__typename)?(0,a.tZ)(a.HY,{children:"We ran into an internal error while checking the domain. Please try again later."}):null}function _(e){var n=e.replId,t=e.domain,r=e.onUnlink,i=e.onGoBack,l=(0,o.Z)((0,s.pC)({variables:{input:{id:n,removeDomain:t}}}),2),c=l[0],v=l[1];return(0,u.useEffect)((function(){v.data&&v.data.updateRepl.repl&&r()}),[v.data,r]),(0,a.BX)(d.G,{css:[h.l0.colWithGap(16)],children:[(0,a.BX)(d.G,{css:[h.l0.colWithGap(8)],children:[(0,a.tZ)(f.h4,{level:3,variant:"subheadDefault",children:"Domain Unlinking"}),(0,a.BX)(f.xv,{children:["Are you sure you want to unlink"," ",(0,a.tZ)("a",{target:"_blank",rel:"noopener",href:"https://"+t,children:t}),"?"]})]}),(0,a.BX)(d.G,{css:[h.l0.rowWithGap(12),h.l0.justify.end],children:[(0,a.tZ)(p.zx,{onClick:i,text:"Cancel"}),(0,a.tZ)(p.zx,{onClick:function(){v.loading||c()},text:v.loading?"Unlinking domain...":"Yes, unlink this domain",colorway:"negative",iconLeft:(0,a.tZ)(C.Z,{}),disabled:v.loading})]})]})}function P(e){var n=e.replId,t=e.deploymentId,r=e.showTitle,i=void 0===r||r,o=e.onUnlink,l=e.onLink,c=(0,s.KG)({variables:{replId:n}}),v=c.data,g=c.loading,y=c.refetch,Z=(0,u.useState)("listing"),b=Z[0],x=Z[1],k=(0,u.useState)(null),C=k[0],T=k[1],E=null;if(g)E=(0,a.tZ)(d.G,{css:[h.l0.colWithGap(8),h.l0.align.center,h.l0.justify.center],children:(0,a.BX)(d.G,{css:[h.l0.rowWithGap(4),h.l0.align.center],children:[(0,a.tZ)(S.Z,{color:h.TV.accentPrimaryDefault}),(0,a.tZ)(R,{children:"Loading"})]})});else if(v&&"Repl"===v.repl.__typename){var D=v.repl,P=null;if(D.domains){var B=D.domains.filter(Boolean).filter((function(e){return t?(null===e||void 0===e?void 0:e.hosting_deployment_id)===t:!(null===e||void 0===e?void 0:e.hosting_deployment_id)})).map((function(e){return{domain:e.domain,state:e.state}}));P=0===B.length?(0,a.tZ)(f.xv,{multiline:!1,children:"No domains are currently linked."}):(0,a.BX)(d.G,{children:[(0,a.tZ)(f.h4,{level:3,variant:"subheadDefault",children:"Currently Linked Domains"}),(0,a.tZ)(d.G,{css:[h.l0.colWithGap(16)],children:B.map((function(e){return e?(0,a.tZ)(d.G,{children:(0,a.BX)(d.G,{css:[h.l0.colWithGap(4),h.l0.justify.spaceBetween,h.l0.align.center],children:[(0,a.BX)(d.G,{css:[h.l0.rowWithGap(8),h.l0.align.center,h.l0.justify.spaceBetween,h.l0.width("100%")],children:[(0,a.tZ)(d.G,{css:[h.l0.flex.shrink(1)],children:(0,a.tZ)(m.u,{tooltip:e.domain,children:(0,a.tZ)(f.xv,{multiline:!1,children:e.domain})})}),(0,a.tZ)(d.G,{children:(0,a.tZ)(m.u,{tooltip:(0,a.tZ)(f.xv,{css:{textTransform:"capitalize"},multiline:!1,children:e.state}),children:(0,a.tZ)(I,{status:e.state})})})]}),(0,a.BX)(d.G,{css:[h.l0.rowWithGap(12),h.l0.justify.end,h.l0.align.center,h.l0.width("100%"),"verified"!==e.state&&h.l0.pl(12)],children:[(0,a.tZ)(p.zx,{text:"Unlink",css:h.l0.width("verified"!==e.state?"50%":"100%"),onClick:function(){T(e.domain),x("unlinking")}}),"verified"!==e.state?(0,a.tZ)(p.zx,{text:"Check status",css:h.l0.width("50%"),onClick:function(){T(e.domain),x("linking")}}):null]})]})},e.domain):null}))})]})}"listing"===b?E=(0,a.BX)(d.G,{css:[h.l0.colWithGap(16)],children:[P,(0,a.tZ)(p.zx,{text:"Create domain link",onClick:function(){return x("linking")},iconLeft:(0,a.tZ)(w.Z,{})})]}):"linking"===b?E=(0,a.tZ)(G,{repl:D,existingDomain:C,deploymentId:t,onLink:l,onGoBack:function(){x("listing"),T(null)},onLinkStarted:y,onStateChanged:y}):"unlinking"===b&&null!==C&&(E=(0,a.tZ)(_,{replId:D.id,domain:C,onUnlink:function(){y(),x("listing"),o()},onGoBack:function(){x("listing"),T(null)}}))}else v&&"ReplRedirect"===v.repl.__typename?E=(0,a.BX)("div",{children:["This repl has moved to"," ",(0,a.tZ)("a",{href:v.repl.replUrl,children:v.repl.replUrl})]}):v&&"SubscriptionExpiredError"===v.repl.__typename&&(E=(0,a.tZ)("div",{children:"Subscription expired"}));return(0,a.BX)(d.G,{css:[h.l0.colWithGap(24)],children:[i?(0,a.tZ)(f.h4,{level:1,variant:"headerDefault",children:"Domain Linking"}):null,E]})}!function(e){e.Verified="verified",e.Verifying="verifying",e.Failed="failed"}(r||(r={}))},43454:function(e,n,t){t.d(n,{E:function(){return p}});var r=t(74985),i=t(625),o=t(45510),a=t(61284),l=t(2041),c=t(39541),u=t(85368),s=t(45285),d=t(63837),f=t(50959);function p(){var e=(0,s.Z)().replspaceApi,n=(0,f.useState)(null),t=n[0],p=n[1];return(0,f.useEffect)((function(){return e.onConfirmSendToken((function(e){e&&(0,i.j)(i.U3.MODAL_VIEWED,{modalName:"git_token_modal"}),p((function(){return e}))}))}),[e]),(0,r.tZ)(l.u,{isOpen:"function"===typeof t,onRequestClose:function(){null===t||void 0===t||t(!1),(0,i.j)(i.U3.GIT_TOKEN_MODAL_ACCEPTED,{response:"close"}),p(null)},children:(0,r.BX)(u.G,{css:[c.l0.colWithGap(16)],children:[(0,r.tZ)(a.h4,{variant:"headerDefault",level:3,children:"Pass GitHub Credentials"}),(0,r.tZ)(a.xv,{children:"It looks like you're trying to connect to your GitHub repository through the shell. Pass your token to the shell?"}),(0,r.tZ)(a.xv,{children:"If you did not initiate a git command, you should deny this."}),(0,r.BX)(u.G,{css:[c.l0.justify.end,c.l0.rowWithGap(16)],children:[(0,r.tZ)(o.zx,{onClick:function(){null===t||void 0===t||t(!1),(0,i.j)(i.U3.GIT_TOKEN_MODAL_ACCEPTED,{response:"deny"}),p(null)},text:"Deny"}),(0,r.tZ)(o.zx,{onClick:function(){null===t||void 0===t||t(!0),(0,i.j)(i.U3.GIT_TOKEN_MODAL_ACCEPTED,{response:"confirm"}),p(null)},iconLeft:(0,r.tZ)(d.Z,{}),text:"Confirm for this session",colorway:"primary"})]})]})})}},78828:function(e,n,t){t.d(n,{LU:function(){return s},Ot:function(){return f}});var r=t(72006),i=t(43119),o=t(71440),a=t(50216);function l(){var e=(0,i.Z)(["\n  fragment ReplInfoEditReplDescriptionRepl on Repl {\n    id\n    description\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,i.Z)(["\n  mutation ReplInfoEditReplDescriptionUpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...ReplInfoEditReplDescriptionRepl\n      }\n    }\n  }\n  ","\n"]);return c=function(){return e},e}var u={},s=(0,o.Ps)(l()),d=(0,o.Ps)(c(),s);function f(e){var n=(0,r.Z)({},u,e);return a.D(d,n)}},45941:function(e,n,t){t.d(n,{Jr:function(){return s},ie:function(){return f}});var r=t(72006),i=t(43119),o=t(71440),a=t(50216);function l(){var e=(0,i.Z)(["\n  fragment ReplInfoEditReplTemplateLabelRepl on Repl {\n    id\n    templateLabel\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,i.Z)(["\n  mutation ReplInfoEditReplTemplateLabelUpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...ReplInfoEditReplTemplateLabelRepl\n      }\n    }\n  }\n  ","\n"]);return c=function(){return e},e}var u={},s=(0,o.Ps)(l()),d=(0,o.Ps)(c(),s);function f(e){var n=(0,r.Z)({},u,e);return a.D(d,n)}},27923:function(e,n,t){t.d(n,{C4:function(){return m},Zx:function(){return f},uB:function(){return h}});var r=t(72006),i=t(43119),o=t(71440),a=t(50216),l=t(9125);function c(){var e=(0,i.Z)(["\n  fragment ReplInfoEditReplTitleRepl on Repl {\n    id\n    title\n    isRenamed\n    owner {\n      ... on Team {\n        id\n        __typename\n      }\n      ... on User {\n        id\n      }\n    }\n  }\n"]);return c=function(){return e},e}function u(){var e=(0,i.Z)(["\n  mutation ReplInfoEditReplTitleUpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...ReplInfoEditReplTitleRepl\n      }\n    }\n  }\n  ","\n"]);return u=function(){return e},e}function s(){var e=(0,i.Z)(["\n  query ReplInfoEditReplTitleAvailableReplTitle(\n    $input: AvailableReplTitleInput!\n  ) {\n    availableReplTitle(input: $input) {\n      ... on AvailableReplTitleResult {\n        isAvailable\n      }\n    }\n  }\n"]);return s=function(){return e},e}var d={},f=(0,o.Ps)(c()),p=(0,o.Ps)(u(),f);function h(e){var n=(0,r.Z)({},d,e);return a.D(p,n)}var v=(0,o.Ps)(s());function m(e){var n=(0,r.Z)({},d,e);return l.t(v,n)}},38785:function(e,n,t){t.d(n,{X:function(){return H},$:function(){return W}});var r=t(2272),i=t(9970),o=t(74985),a=t(50959),l=t(85368),c=t(82568),u=t(39541),s=t(57389),d=t(72006),f=t(4405),p=u.tX.categorical,h=.0075,v=t(51523),m=t(82893),g=t.n(m),y=t(12259),Z=t(66539),b=t(61284),w=t(31992),x=t(75863),k=(0,c.X)({self:[u.l0.rowWithGap(8),u.l0.align.center],dot:[u.l0.width(8),u.l0.height(8),{borderRadius:"50%"}],title:[u.l0.flex.grow(1)]}),C=function(e){var n=e.title,t=e.usage,r=e.iconUrl;return(0,o.BX)(l.G,{css:k.self,children:["string"===typeof r?(0,o.tZ)(x.ZP,{size:16,iconUrl:r,alt:n}):null,(0,o.tZ)(b.xv,{css:k.title,multiline:!1,children:n}),(0,o.tZ)(b.xv,{color:"dimmer",multiline:!1,children:(0,w.fZ)(t)})]})},S=(0,c.X)({self:[u.l0.height("100%")],empty:[u.l0.height("100%")]}),T=l.K.a,E=function(e){var n=e.percentage,t=e.color,r=e.linkedRepl,i=e.usage,l=e.count,c=r?(0,v.aq)(r):y.$I,u=(0,a.useState)(!1),p=u[0],h=u[1];return(0,o.tZ)(Z.u,{tooltip:r?(0,o.tZ)(C,{title:r.title,usage:i,iconUrl:r.iconUrl}):(0,o.tZ)(C,{title:"+".concat(l," more"),usage:i}),placement:"top",delay:"none",isOpen:p,maxWidth:400,children:function(e,r){return(0,o.tZ)(g(),(0,f.Z)((0,d.Z)({},c),{passHref:!0,children:(0,o.tZ)(T,{onMouseOver:function(){return h(!0)},onMouseLeave:function(){return h(!1)},ref:r,css:S.self,style:(0,s.Z)({minWidth:"calc(".concat(.75,"%)"),width:"calc(".concat(n,"% - 1px)"),backgroundColor:t},"&:lastOfType",{width:"".concat(n,"%")})})}))}})},R=t(27691),I=t(87076),G=t(36443),D=t(94045),_=t(77712),P=t(34338),B=(0,c.X)({self:[u.l0.rowWithGap(8),u.l0.align.center],dot:[u.l0.flex.grow(1),u.l0.width(8),u.l0.height(8),u.l0.minWidth(8),u.l0.maxHeight(8),{borderRadius:"50%"}],title:[u.l0.flex.grow(1),u.l0.color.foregroundDefault,(0,s.Z)({},(0,P.EM)("mobileMax"),[u.l0.flex.shrink(1),u.l0.truncate])],line:[u.l0.flex.growAndShrink(1),u.l0.height(8),u.l0.width("100%"),(0,s.Z)({},(0,P.EM)("mobileMax"),[u.l0.flex.shrink(4)])]}),A=l.K.a,U=l.K.li,L=function(e){var n=e.color,t=e.title,r=e.usage,i=e.linkedRepl,a=e.username,c=i?(0,v.aq)(i):(0,_.Ru)(a);return(0,o.tZ)(U,{children:(0,o.tZ)(g(),(0,f.Z)((0,d.Z)({},c),{passHref:!0,children:(0,o.tZ)(A,{children:(0,o.BX)(l.G,{css:B.self,children:[(0,o.tZ)("div",{css:B.dot,style:{backgroundColor:n}}),i?(0,o.tZ)(x.ZP,{size:16,iconUrl:i.iconUrl,alt:t}):null,(0,o.tZ)(b.xv,{css:B.title,multiline:!1,children:t}),(0,o.tZ)(l.G,{css:B.line,children:(0,o.tZ)("svg",{width:"100%",xmlns:"http://www.w3.org/2000/svg",children:(0,o.tZ)("line",{x1:"0%",y1:"50%",x2:"100%",y2:"50%",stroke:u.TV.outlineDefault})})}),(0,o.tZ)(b.xv,{color:"dimmer",multiline:!1,children:(0,w.fZ)(r)})]})})}))})},X=(0,c.X)({self:[u.l0.colWithGap(4)]}),N=l.K.ul,M=function(e){var n=e.topRepls,t=e.groupedRepls,r=e.groupedTotal,i=e.context,a=e.username;if("workspace_info_modal"===i.type){var c=n.findIndex((function(e){return e.repl.id===i.replId}));return-1===c?(0,o.tZ)(l.G,{css:X.self,children:(0,o.tZ)(b.xv,{multiline:!1,children:"No storage usage"})}):(0,o.BX)(N,{css:X.self,children:[n.map((function(e,n){return(0,o.tZ)(L,{color:n===c?u.TV.accentPrimaryDefault:u.TV.accentPrimaryDimmer,title:e.repl.title,usage:e.usage,linkedRepl:e.repl,username:a},n)})),0!==t.length?(0,o.tZ)(L,{color:u.TV.backgroundHighest,title:"+".concat(t.length," more"),usage:r,username:a}):null]})}return(0,o.BX)(N,{css:X.self,children:[0===n.length?(0,o.tZ)(b.xv,{multiline:!1,children:"No resource usage"}):null,n.map((function(e,n){return(0,o.tZ)(L,{color:p[n%p.length],title:e.repl.title,usage:e.usage,linkedRepl:e.repl,username:a},n)})),0!==t.length?(0,o.tZ)(L,{color:p[n.length%p.length],title:"+".concat(t.length," more"),usage:r,username:a}):null]})},F=t(33280),O=(0,c.X)({bar:[u.l0.width("100%"),u.l0.rowWithGap(1),u.l0.height(16),u.l0.borderRadius(4),u.l0.overflow("hidden"),u.l0.backgroundColor.backgroundHigher],selfPlaceholder:[u.l0.width("100%"),u.l0.rowWithGap(1),u.l0.height(16),u.l0.borderRadius(4),u.l0.overflow("hidden"),u.l0.backgroundColor.backgroundHigher,R.p.backgroundPulse(u.TV.backgroundHigher,u.TV.backgroundRoot)],barWrapper:[u.l0.flex.grow(1)],barAndTriggerWrapper:[u.l0.rowWithGap(8),u.l0.align.center],self:[u.l0.colWithGap(8)]}),W=function(e){var n=e.summary,t=e.context,c=e.username,s=(0,a.useState)(!1),d=s[0],f=s[1],v=n.perRepl,m=n.total,g=n.limit,y=Math.max(m,g),Z=(0,i.Z)(v).filter((function(e){return e.percentage>0})).sort((function(e,n){return n.usage-e.usage})),b=(0,r.Z)(function(e,n){if("workspace_info_modal"!==n.type)return[e.slice(0,8),e.slice(8)];var t=e.findIndex((function(e){return e.repl.id===n.replId}));if(t<8)return[e.slice(0,8),e.slice(8)];var r=e[t];return[e.slice(0,8).concat(r),e.slice(8,t).concat(e.slice(t+1))]}(Z,t),2),w=b[0],x=b[1],k=new Map(w.map((function(e){return[e.repl.id,e]}))),C=x.reduce((function(e,n){return e+n.usage}),0),S=function(e,n,t){var r=new Array,i=0,o=!0,a=!1,l=void 0;try{for(var c,u=e[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var s=c.value,d=Math.max(s.percentage,h),f=d-s.percentage;0!==f&&(i+=f),r.push({percentage:d,adjusted:0!==f,grouped:!1,replIds:new Set([s.repl.id])})}}catch(C){a=!0,l=C}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}var p=0===n?0:Math.max(n,h);if(p>0){var v=p-n;v>0&&(i+=v),r.push({percentage:p,adjusted:v>0,grouped:!0,replIds:t})}if(i>0){var m=r.filter((function(e){return!e.adjusted})),g=m.length;if(g>0){var y=i/g,Z=!0,b=!1,w=void 0;try{for(var x,k=m[Symbol.iterator]();!(Z=(x=k.next()).done);Z=!0)x.value.percentage-=y}catch(C){b=!0,w=C}finally{try{Z||null==k.return||k.return()}finally{if(b)throw w}}}}return r}(w,0===y?0:C/y,new Set(x.map((function(e){return e.repl.id})))),T="workspace_info_modal"===t.type,R="cycles_page"===t.type?u.TV.backgroundHighest:u.TV.backgroundHigher,_=(0,o.tZ)(I.h,{alt:d?"Hide Repls":"Show Repls",children:d?(0,o.tZ)(D.Z,{onClick:function(){return f(!d)}}):(0,o.tZ)(G.Z,{onClick:function(){return f(!d)}})}),P=S.length>0;return(0,o.BX)(l.G,{css:O.self,children:[(0,o.BX)(l.G,{css:O.barAndTriggerWrapper,children:[(0,o.tZ)(l.G,{css:O.barWrapper,children:(0,o.tZ)(l.G,{css:O.bar,style:{backgroundColor:R},children:S.map((function(e,n){var r,i=k.get(z(e));return(0,o.tZ)(E,{percentage:100*e.percentage,color:T?V(e,t.replId):p[n%p.length],linkedRepl:null===i||void 0===i?void 0:i.repl,count:e.replIds.size,usage:null!==(r=null===i||void 0===i?void 0:i.usage)&&void 0!==r?r:C},n)}))})}),P?_:null]}),P&&d?(0,o.BX)(o.HY,{children:[(0,o.tZ)(M,{topRepls:w,groupedRepls:x,groupedTotal:C,context:t,username:c}),T?(0,o.tZ)(F.R,{}):null]}):null]})},H=function(){return(0,o.tZ)(l.G,{children:(0,o.tZ)(l.G,{css:O.selfPlaceholder})})},V=function(e,n){return e.replIds.has(n)?u.TV.accentPrimaryDefault:u.TV.accentPrimaryDimmest},z=function(e){return e.replIds.keys().next().value}},31366:function(e,n,t){t.d(n,{_:function(){return a}});var r=t(72006),i=t(4405),o=t(70232),a=function(e){switch(e.__typename){case"AccountStorageUtilization":return l(e);case"MonthlyEgressSummary":return c(e);default:(0,o.Z)(e)}},l=function(e){var n=e.total,t=e.perRepl,r=e.quota;return{total:Number(n),limit:Number(r),perRepl:t.map(u)}},c=function(e){var n=e.usage,t=e.limit,r=e.perRepl;return{total:Number(n),limit:Number(t),perRepl:r.map(u)}},u=function(e){return(0,i.Z)((0,r.Z)({},e),{usage:Number(e.usage)})}},31992:function(e,n,t){t.d(n,{$s:function(){return a},fZ:function(){return i},p6:function(){return o}});var r=1048576,i=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.forceGib,i=void 0!==t&&t,l=n.precision,c=void 0===l?4:l;return e>r||i?"".concat(a(e).toFixed(c)," GiB"):"".concat(o(e).toFixed(c)," MiB")},o=function(e){return e/r},a=function(e){return e/1073741824}},59066:function(e,n,t){t.d(n,{Z:function(){return c}});var r=t(2272),i=t(74985),o=t(45510),a=t(50959),l=t(69583);function c(e){var n=e.context,t=(0,r.Z)(a.useState(!1),2),c=t[0],u=t[1];return(0,i.BX)(i.HY,{children:[(0,i.tZ)(o.zx,{text:"Activate",colorway:"primary",onClick:function(){return u(!0)}}),(0,i.tZ)(l.Z,{context:n,isOpen:c,onRequestClose:function(){return u(!1)},uponPurchaseGoTo:"cyclesPage",powerUp:"ghostwriter"})]})}},27942:function(e,n,t){t.d(n,{Fh:function(){return v},IN:function(){return w},s7:function(){return Z}});var r=t(72006),i=t(43119),o=t(71440),a=t(27081),l=t(24635),c=t(50216);function u(){var e=(0,i.Z)(["\n  fragment HostingTierReplPowerUps on Repl {\n    powerUps {\n      __typename\n      ... on ReplPowerUpTypes {\n        hostingTier {\n          __typename\n          sku\n          methodOfPayment\n        }\n      }\n    }\n  }\n"]);return u=function(){return e},e}function s(){var e=(0,i.Z)(["\n  fragment HostingTierPowerUpCostDetails on PowerUpCostsType {\n    hostingTierE2Micro {\n      cyclesCostNow\n      cyclesCostRecurring\n      methodOfPayment\n      explanation\n    }\n    hostingTierE2Small {\n      cyclesCostNow\n      cyclesCostRecurring\n      methodOfPayment\n      explanation\n    }\n    hostingTierE2Medium {\n      cyclesCostNow\n      cyclesCostRecurring\n      methodOfPayment\n      explanation\n    }\n    hostingTierN1Custom1_4 {\n      cyclesCostNow\n      cyclesCostRecurring\n      methodOfPayment\n      explanation\n    }\n    hostingTierE2Standard2 {\n      cyclesCostNow\n      cyclesCostRecurring\n      methodOfPayment\n      explanation\n    }\n    hostingTierE2Standard4 {\n      cyclesCostNow\n      cyclesCostRecurring\n      methodOfPayment\n      explanation\n    }\n  }\n"]);return s=function(){return e},e}function d(){var e=(0,i.Z)(["\n  fragment HostingTierPowerUpCosts on Repl {\n    id\n    powerUpCosts {\n      __typename\n      ... on PowerUpCostsType {\n        ...HostingTierPowerUpCostDetails\n      }\n      ... on UnauthorizedError {\n        __typename\n        message\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function f(){var e=(0,i.Z)(["\n  query HostingTierPowerUp($replId: String!) {\n    currentUser {\n      id\n    }\n    repl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        owner {\n          __typename\n        }\n        ...HostingTierReplPowerUps\n        ...HostingTierPowerUpCosts\n      }\n    }\n  }\n  ","\n  ","\n"]);return f=function(){return e},e}function p(){var e=(0,i.Z)(["\n  mutation SetHostingTier($input: SetHostingTierInput!) {\n    setHostingTier(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on PaymentError {\n        message\n      }\n      ... on SetHostingTierResult {\n        repl {\n          ... on Repl {\n            ...HostingTierReplPowerUps\n            ...HostingTierPowerUpCosts\n          }\n        }\n        currentUser {\n          ...PowerUpMutationReturnFields\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return p=function(){return e},e}var h={},v=(0,o.Ps)(u()),m=(0,o.Ps)(s()),g=(0,o.Ps)(d(),m),y=(0,o.Ps)(f(),v,g);function Z(e){var n=(0,r.Z)({},h,e);return l.a(y,n)}var b=(0,o.Ps)(p(),v,g,a.E_);function w(e){var n=(0,r.Z)({},h,e);return c.D(b,n)}},652:function(e,n,t){t.d(n,{$:function(){return l},i:function(){return a}});var r=t(51631),i=t(70232),o=t(14351);function a(e,n){if(void 0!==n)switch(n){case r.DZ.HostingTierE2Micro:return e.hostingTierE2Micro;case r.DZ.HostingTierE2Small:return e.hostingTierE2Small;case r.DZ.HostingTierE2Medium:return e.hostingTierE2Medium;case r.DZ.HostingTierN1Custom_1_4:return e.hostingTierN1Custom1_4;case r.DZ.HostingTierE2Standard_2:return e.hostingTierE2Standard2;case r.DZ.HostingTierE2Standard_4:return e.hostingTierE2Standard4;default:(0,i.Z)(n)}}function l(e){var n=o.r4[e],t=n.vCpu,r=n.ram,i=n.dedicated;return"".concat(i?"Dedicated ":"").concat(t," vCPU / ").concat(r," GiB RAM")}},71813:function(e,n,t){t.d(n,{E:function(){return r},c:function(){return i}});var r="Procfile";function i(e){var n={};return e.split("\n").forEach((function(e){if(""!==e){var t=e.match(/^([A-Za-z0-9_]+):\s*(.+)$/);if(t){var r=t[2].trim().split(" "),i=t[1];n[i]={command:r[0],options:r.slice(1)}}}})),n}},44807:function(e,n,t){t.d(n,{Z:function(){return i}});var r=t(50959);function i(){return(0,r.useMemo)((function(){return function(){if("undefined"===typeof document)return!1;var e=document.createElement("input");return"webkitdirectory"in e||"mozdirectory"in e||"msdirectory"in e||"odirectory"in e||"directory"in e}()}),[])}},57370:function(e,n,t){t.d(n,{d:function(){return s}});var r=t(72006),i=t(43119),o=t(71440),a=t(24635);function l(){var e=(0,i.Z)(["\n  query CurrentUserId {\n    currentUser {\n      id\n    }\n  }\n"]);return l=function(){return e},e}var c={},u=(0,o.Ps)(l());function s(){var e,n=function(e){var n=(0,r.Z)({},c,e);return a.a(u,n)}().data;return(null===n||void 0===n||null===(e=n.currentUser)||void 0===e?void 0:e.id)||null}},5795:function(e,n,t){var r=t(50959);n.Z=function(e,n,t){r.useEffect((function(){var n=setTimeout(e,t);return function(){clearTimeout(n)}}),n)}},94488:function(e,n,t){t.d(n,{f6:function(){return c},oj:function(){return l},xZ:function(){return s}});var r=t(2272),i=t(50959),o=t(45285);function a(e){var n=(0,r.Z)(i.useState(!1),2),t=n[0],a=n[1],l=(0,o.Z)().dotReplit;return i.useEffect((function(){var n=!1;return l.getConfig().then((function(t){n||t.error||t.config.language===e&&a(!0)})),function(){n=!0}}),[e,l]),t}function l(){return a("kaboom")}function c(){return a("kaboomdraw")}var u=/^draw.[tj]s$/;function s(e){return c()&&Boolean(null===e||void 0===e?void 0:e.match(u))}},10464:function(e,n,t){function r(){return"ontouchstart"in window||navigator.maxTouchPoints>0}function i(){return!!/iPad|iPhone|iPod/.test(navigator.platform)||navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform)}t.d(n,{Z:function(){return r},y:function(){return i}})},59331:function(e,n,t){t.d(n,{Z:function(){return d}});var r=t(90171),i=t.n(r),o=t(45285),a=t(50959),l=t(4561),c=t(56997),u=t(34937),s="You have unsaved changes";function d(){var e=(0,u.Z)(),n=(0,o.Z)().fs,t=(0,r.useRouter)(),d=(0,a.useRef)(!1),f=(0,a.useCallback)((function(){if(!d.current&&(n.getStatus()!==l.kO.Clean&&!window.confirm(s)))throw i().events.emit("routeChangeError"),new Error("Abort route change. Please ignore this error.")}),[n]);return(0,a.useEffect)((function(){var r=function(t){if(!e&&!d.current&&n.getStatus()!==l.kO.Clean)return t.preventDefault(),t.returnValue=s,s};return window.addEventListener("beforeunload",r),c.gn||t.events.on("routeChangeStart",f),function(){window.removeEventListener("beforeunload",r),c.gn||t.events.off("routeChangeStart",f)}}),[t.events,n,f,e]),function(e){return d.current=e}}},82475:function(e,n,t){t.d(n,{Z:function(){return v}});var r=t(2272),i=t(50959),o=t(72006),a=t(43119),l=t(71440),c=t(50216);function u(){var e=(0,a.Z)(["\n  mutation ReplFsUpdated($replId: String!) {\n    updateReplTimeUpdated(id: $replId) {\n      ... on Repl {\n        id\n        timeUpdated\n      }\n    }\n  }\n"]);return u=function(){return e},e}var s={},d=(0,l.Ps)(u());var f=t(12290),p=t(68825),h=t(45285);function v(){var e=(0,r.Z)(function(e){var n=(0,o.Z)({},s,e);return c.D(d,n)}(),1)[0],n=(0,h.Z)().fs,t=(0,p.Z)(),a=null===t||void 0===t?void 0:t.currentUserPermissions.containerWrite,l=null===t||void 0===t?void 0:t.id;(0,i.useEffect)((function(){if(a&&l){var t=(0,f.Z)((function(){return e({variables:{replId:l}})}),{wait:6e4,maxWait:6e5}),r=n.onStatusChange((function(){t()}));return function(){t.isScheduled()&&t.flush(),r()}}}),[n,l,a,e])}},60471:function(e,n,t){t.d(n,{T:function(){return o}});var r=t(45285),i=t(73872);function o(){var e=(0,r.Z)().toolchain;return(0,i.Z)(e.configs)}},2187:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(50959),i=t(77511);function o(){var e=(0,r.useRef)(0),n=(0,r.useState)(!1),t=n[0],o=n[1],a=(0,i.T3)(),l=window.visualViewport;return(0,r.useEffect)((function(){if(l&&a){var n=function(){var n=l.height<.8*e.current;o(n)};return e.current=l.height,l.addEventListener("resize",n),function(){l.removeEventListener("resize",n)}}}),[l,a]),t}},50910:function(e,n,t){t.d(n,{Z:function(){return c}});var r=t(29457),i=t(63763),o=t(45285),a=t(50959);function l(){var e=function(){var e=(0,o.Z)().container,n=(0,a.useState)(null),t=n[0],r=n[1];return(0,a.useEffect)((function(){if(e)return e.onConnectionStateChanged((function(){var n=e.getConnectionMetadata();r(n)}))}),[e]),t}();return(0,a.useMemo)((function(){return e?(0,i.he)(e.token):null}),[e])}function c(e,n){var t=l();(0,a.useEffect)((function(){var i,o,a;if(e&&n){var l="Repl"===(null===(i=e.origin)||void 0===i?void 0:i.__typename)?e.origin.id:null;return(0,r.Fy)({id:e.id,slug:e.slug,originId:l,roles:n.roles&&n.roles.map((function(e){return e.name})),rootOriginReplUrl:e.rootOriginReplUrl,rootOriginReplReleaseId:null===(o=e.source)||void 0===o||null===(a=o.release)||void 0===a?void 0:a.id,tokenCluster:null===t||void 0===t?void 0:t.cluster}),function(){(0,r.dv)()}}}),[e,n,t])}},56440:function(e,n,t){t.d(n,{C:function(){return i},w:function(){return r}});var r=function(e){var n=parseInt(e.substring(1),16);return[n>>16&255,n>>8&255,255&n]},i=function(e,n,t){return"#"+e.toString(16)+n.toString(16)+t.toString(16)}},71045:function(e,n,t){t.d(n,{Z:function(){return s}});var r=t(57135),i=t(96583),o=t(87978),a=/\(copy\)( \d+)?$/,l=/\d+$/;function c(e,n){for(var t=(0,o.r6)(e),r=(0,o.eb)(e),i=a.test(r)?e:"".concat(r," (copy)").concat(t.length>0?".".concat(t):""),c=1;c<=n.size;c++){if(!n.has(i))return i;var u=(0,o.eb)(i),s=u.split(" ");l.test(u)&&s.pop(),i="".concat(s.join(" ")," ").concat(c),t.length>0&&(i+=".".concat(t))}return i}var u=t(12583);function s(e,n){return d.apply(this,arguments)}function d(){return(d=(0,r.Z)((function(e,n){var t,r,a,l,s,d;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return t=(0,o.Il)(e),[4,n.readDir(0===t.length?u.Ql:t)];case 1:if((r=i.sent()).error)throw r.error;return a=new Set(r.children.map((function(e){return e.filename}))),l=c((0,o.UO)(e),a),s=t?"".concat(t,"/").concat(l):l,[4,n.copyFile(e,s)];case 2:if((d=i.sent()).error)throw d.error;return[2,s]}}))}))).apply(this,arguments)}},70353:function(e,n,t){t.d(n,{o:function(){return r},p:function(){return i}});var r=function(e){var n=new Date(e),t=n.getHours(),r=n.getMinutes(),o="AM";return t>=12&&(o="PM"),0===(t%=12)&&(t="12"),r<10&&(r="0"+r),i(e)+" ".concat(t,":").concat(r," ").concat(o)},i=function(e){var n=new Date(e),t=n.getMonth()+1,r=n.getDate(),i=n.getFullYear();return"".concat(t,"/").concat(r,"/").concat(i)}},9608:function(e,n,t){t.d(n,{S:function(){return a}});var r=t(87978),i={js:"javascript",jsx:"javascript",ts:"typescript",tsx:"typescript",py:"python",go:"go"},o={rs:"rust",lsp:"lisp",sh:"bash",cpp:"c++",hs:"haskell",go:"go",rb:"ruby",md:"markdown"};function a(e){var n=(0,r.r6)(e);return Object.prototype.hasOwnProperty.call(i,n)?i[n]:Object.prototype.hasOwnProperty.call(o,n)?o[n]:n}},4385:function(e,n,t){function r(e){if(!e)return!1;try{var n=new URL(e);return Boolean(n)}catch(t){return!1}}t.d(n,{Z:function(){return r}})},64999:function(e,n,t){t.d(n,{Z:function(){return A}});var r=t(2272),i=t(74985),o=(t(50959),t(85368)),a=t(39541),l=t(63128),c=t(39137),u=t(61284),s=t(44333),d=t(82568),f=t(47161),p=t(13233),h=t(72006),v=t(43119),m=t(71440),g=t(24635),y=t(50216);function Z(){var e=(0,v.Z)(["\n  query MultiplayerInviteUrl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        inviteUrl\n        owner {\n          ... on User {\n            id\n          }\n          ... on Team {\n            id\n            capabilities {\n              isBusinessPlan\n              hasValidSubscription\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return Z=function(){return e},e}function b(){var e=(0,v.Z)(["\n  mutation MultiplayerRefreshInviteUrl($replId: String!) {\n    refreshMultiplayerInviteLink(replId: $replId) {\n      id\n      ... on Repl {\n        id\n        inviteUrl\n      }\n    }\n  }\n"]);return b=function(){return e},e}function w(){var e=(0,v.Z)(["\n  mutation DeleteMultiplayerInviteUrl($replId: String!) {\n    deleteMultiplayerInviteLink(replId: $replId) {\n      ... on Repl {\n        id\n        inviteUrl\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return w=function(){return e},e}var x={},k=(0,m.Ps)(Z());var C=(0,m.Ps)(b());var S=(0,m.Ps)(w());var T=t(14654),E=t(56029),R=t(15544),I=t(32104),G=t(76735),D=t(60566),_=t(625),P=(0,d.X)({container:[a.l0.colWithGap(12),a.l0.px(16),a.l0.pt(12),{borderTop:"solid 1px ".concat(a.TV.outlineDimmest)}],header:[a.l0.flex.row,a.l0.justify.spaceBetween],globeIconContainer:[a.l0.width(40),a.l0.height(40),a.l0.backgroundColor.accentPrimaryDimmer,a.l0.borderRadius("full"),a.l0.align.center,a.l0.justify.center],title:[a.l0.fontWeight.medium],loading:[a.l0.rowWithGap(4),a.l0.align.center],inviteUrlContainer:[a.l0.borderRadius(8),a.l0.flex.row],input:[a.l0.borderRadius(8,0,0,8),a.l0.color.foregroundDimmer],copyToClipboard:[a.l0.borderRadius(0,8,8,0)],titleGroup:[a.l0.rowWithGap(12)]}),B=function(){return(0,i.BX)(o.G,{css:P.titleGroup,children:[(0,i.tZ)(o.G,{css:P.globeIconContainer,children:(0,i.tZ)(T.Z,{color:a.TV.accentPrimaryStrongest,size:20})}),(0,i.BX)(o.G,{children:[(0,i.tZ)(u.xv,{css:P.title,id:"link-switch-label",multiline:!1,children:"Private join link"}),(0,i.tZ)(u.xv,{variant:"small",color:"dimmest",multiline:!1,children:"Anyone with this link can edit files"})]})]})};function A(e){var n,t,d,v,m,Z,b,w,T=e.replId,A=(0,p.Z)(),U=A.showConfirm,L=A.showError,X=function(e){var n=(0,h.Z)({},x,e);return g.a(k,n)}({variables:{replId:T}}),N=X.data,M=X.loading,F=X.error,O=X.refetch,W=(0,r.Z)(function(e){var n=(0,h.Z)({},x,e);return y.D(C,n)}({variables:{replId:T},onError:function(e){return L(e.message)},onCompleted:function(){return U("Join link created")}}),2),H=W[0],V=W[1],z=(0,r.Z)(function(e){var n=(0,h.Z)({},x,e);return y.D(S,n)}({variables:{replId:T},optimisticResponse:{deleteMultiplayerInviteLink:{id:T,inviteUrl:null,__typename:"Repl"},__typename:"RootMutationType"},onError:function(e){return L(e.message)},onCompleted:function(e){"UserError"!==e.deleteMultiplayerInviteLink.__typename?"Repl"===e.deleteMultiplayerInviteLink.__typename&&U("Join link deleted"):L(e.deleteMultiplayerInviteLink.message)}}),2),j=z[0],q=z[1],$="Repl"===(null===N||void 0===N||null===(n=N.repl)||void 0===n?void 0:n.__typename)?N.repl:null,Y=V.loading||q.loading,K="Repl"===(null===N||void 0===N||null===(t=N.repl)||void 0===t?void 0:t.__typename)&&"Team"===(null===$||void 0===$||null===(d=$.owner)||void 0===d?void 0:d.__typename),Q="Repl"===(null===N||void 0===N||null===(v=N.repl)||void 0===v?void 0:v.__typename)&&"Team"===(null===$||void 0===$||null===(m=$.owner)||void 0===m?void 0:m.__typename)&&(null===(Z=null===$||void 0===$?void 0:$.owner.capabilities)||void 0===Z?void 0:Z.isBusinessPlan)&&(null===(b=null===$||void 0===$?void 0:$.owner.capabilities)||void 0===b?void 0:b.hasValidSubscription),J="Repl"===(null===N||void 0===N||null===(w=N.repl)||void 0===w?void 0:w.__typename)&&(null===$||void 0===$?void 0:$.inviteUrl)?window.location.origin+(null===$||void 0===$?void 0:$.inviteUrl):null;return M||K&&!Q?null:F?(0,i.BX)(o.G,{css:P.container,children:[(0,i.BX)(o.G,{css:P.header,children:[(0,i.tZ)(B,{}),(0,i.tZ)(s.r,{isSelected:!1,isDisabled:!0,"aria-labelledby":"link-switch-label"})]}),(0,i.tZ)(f.u,{css:[a.l0.textAlign.left],icon:(0,i.tZ)(G.Z,{color:a.TV.accentNegativeStrongest}),colorway:"negative",text:"Error loading join link. Click here to try again, or contact support.",onClick:function(){return O({replId:T})}})]}):(0,i.BX)(o.G,{css:P.container,children:[(0,i.BX)(o.G,{css:P.header,children:[(0,i.tZ)(B,{}),M?(0,i.BX)(o.G,{css:P.loading,children:[(0,i.tZ)(I.Z,{color:a.TV.foregroundDimmer}),(0,i.tZ)(u.xv,{color:"dimmer",multiline:!1,children:"Loading..."})]}):(0,i.tZ)(s.r,{isSelected:!!J,isDisabled:Y,onChange:function(e){Y||(e?H():j())},"aria-labelledby":"link-switch-label"})]}),!M&&J?(0,i.BX)(i.HY,{children:[(0,i.BX)(l.Tg,{css:P.inviteUrlContainer,children:[(0,i.tZ)(c.II,{type:"url",readOnly:!0,disabled:!0,value:Y?"Loading...":J,css:P.input}),(0,i.tZ)(E.m,{textToCopy:J,onClick:function(){J?((0,D.Z)(J),(0,_.j)(_.U3.JOIN_LINK_COPIED,{replId:null===$||void 0===$?void 0:$.id,isTeamRepl:K,source:"replEnvironment"}),U("Link copied")):L("Could not copy link")},tooltip:"Copied to clipboard",text:"Copy join link",iconLeft:(0,i.tZ)(R.Z,{}),css:P.copyToClipboard,colorway:"primary",disabled:Y})]}),(0,i.tZ)(o.G,{children:(0,i.BX)(u.xv,{color:"dimmer",variant:"small",multiline:!1,children:["Want to revoke access to this link?"," ",(0,i.tZ)("a",{css:a.l0.linkStyle,role:"button",tabIndex:0,onKeyDown:function(e){if("Enter"===e.key){if(e.preventDefault(),Y)return;H()}},onClick:function(e){e.preventDefault(),Y||H()},children:"Generate a new link"})]})})]}):null]})}},96453:function(e,n,t){t.d(n,{Jh:function(){return k},RJ:function(){return E},U:function(){return w},dE:function(){return g},mH:function(){return Z},z8:function(){return S}});var r=t(72006),i=t(43119),o=t(71440),a=t(24635),l=t(50216);function c(){var e=(0,i.Z)(["\n  fragment MultiplayerManagerUser on User {\n    id\n    image\n    username\n    url\n  }\n"]);return c=function(){return e},e}function u(){var e=(0,i.Z)(["\n  fragment MultiplayerManagerEmailInviteReplPermission on ReplPermission {\n    id\n    type\n    user {\n      id\n      image\n      username\n      url\n    }\n  }\n"]);return u=function(){return e},e}function s(){var e=(0,i.Z)(["\n  query MultiplayerManager($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isOwner\n        multiplayers {\n          ...MultiplayerManagerUser\n        }\n        currentUserPermissions {\n          editMultiplayers\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n      }\n    }\n    currentUser {\n      id\n      isSubscribed\n    }\n  }\n  ","\n"]);return s=function(){return e},e}function d(){var e=(0,i.Z)(["\n  mutation MultiplayerManagerAddMultiplayerUser(\n    $replId: String!\n    $username: String!\n    $type: String!\n  ) {\n    addMultiplayerUser(replId: $replId, username: $username, type: $type) {\n      id\n      type\n      user {\n        ...MultiplayerManagerUser\n      }\n      repl {\n        id\n        multiplayers {\n          ...MultiplayerManagerUser\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function f(){var e=(0,i.Z)(["\n  mutation MultiplayerManagerRemoveMultiplayerUser(\n    $replId: String!\n    $username: String!\n  ) {\n    removeMultiplayerUser(replId: $replId, username: $username) {\n      id\n      user {\n        id\n        ...MultiplayerManagerUser\n      }\n      repl {\n        id\n        multiplayers {\n          ...MultiplayerManagerUser\n        }\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function p(){var e=(0,i.Z)(["\n  mutation MultiplayerManagerCreateMultiplayerInvite(\n    $replId: String!\n    $email: String!\n    $type: String!\n  ) {\n    createMultiplayerInvite2(replId: $replId, email: $email, type: $type) {\n      ... on MultiplayerInvite {\n        email\n        repl {\n          id\n          multiplayers {\n            ...MultiplayerManagerUser\n          }\n          multiplayerInvites {\n            email\n            type\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on ReplPermission {\n        id\n        ...MultiplayerManagerEmailInviteReplPermission\n      }\n    }\n  }\n  ","\n  ","\n"]);return p=function(){return e},e}function h(){var e=(0,i.Z)(["\n  mutation MultiplayerManagerDeleteMultiplayerInvite(\n    $replId: String!\n    $email: String!\n  ) {\n    deleteMultiplayerInvite(replId: $replId, email: $email) {\n      ... on MultiplayerInvite {\n        email\n        type\n        repl {\n          id\n          multiplayers {\n            ...MultiplayerManagerUser\n          }\n          multiplayerInvites {\n            email\n            type\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return h=function(){return e},e}var v={},m=(0,o.Ps)(c()),g=(0,o.Ps)(u()),y=(0,o.Ps)(s(),m);function Z(e){var n=(0,r.Z)({},v,e);return a.a(y,n)}var b=(0,o.Ps)(d(),m);function w(e){var n=(0,r.Z)({},v,e);return l.D(b,n)}var x=(0,o.Ps)(f(),m);function k(e){var n=(0,r.Z)({},v,e);return l.D(x,n)}var C=(0,o.Ps)(p(),m,g);function S(e){var n=(0,r.Z)({},v,e);return l.D(C,n)}var T=(0,o.Ps)(h(),m);function E(e){var n=(0,r.Z)({},v,e);return l.D(T,n)}},6785:function(e,n,t){t.d(n,{_U:function(){return G},ln:function(){return D}});var r=t(2272),i=t(9970),o=t(74985),a=t(5889),l=t(38467),c=t(13233),u=t(77511),s=t(625),d=t(30872),f=t(84563),p=t(63128),h=t(61284),v=t(85368),m=t(39541),g=t(26992),y=t(32104),Z=t(90171),b=t(50959),w=t(4821),x=t(96453),k=t(8441),C=t(10507),S=t(14709),T=t.n(S),E=t(66539),R=t(93658);function I(e,n){return n.some((function(n){return n.id===e}))}var G={root:[m.l0.color.foregroundDefault,m.l0.flex.column,m.l0.colWithGap(12),m.l0.align.stretch,m.l0.flex.growAndShrink(1)],header:[m.l0.flex.row,m.l0.justify.spaceBetween,m.l0.align.center,m.l0.px(16)],header_mobile:[m.l0.px(0)],titleContainer:[m.l0.flex.row,m.l0.rowWithGap(4),m.l0.align.center],limitsContainer:[m.l0.align.center,m.l0.rowWithGap(8)],loading:[m.l0.rowWithGap(4),m.l0.align.center,m.l0.flex.grow(1),m.l0.justify.center],measureBar:[m.l0.height(8),m.l0.width(60)],searchContainer:[m.l0.px(16),m.l0.position.relative,m.l0.maxHeight(32)],userList:[m.l0.flex.column,m.l0.colWithGap(16),m.l0.scrollbar.thin,m.l0.position.relative,m.l0.overflowY("auto"),m.l0.flex.growAndShrink(1),m.l0.pb(8),{maxHeight:300,"::-webkit-scrollbar-thumb":[m.l0.backgroundColor.backgroundHighest,m.l0.borderRadius(4)],scrollbarColor:"".concat(m.TV.backgroundDefault," ").concat(m.TV.backgroundHighest)}],userGroup:{root:[m.l0.colWithGap(8)],titleContainer:[m.l0.rowWithGap(4),m.l0.align.center,m.l0.px(16)],title:[m.l0.fontWeight.medium]},emptyContainer:[m.l0.position.relative,m.l0.flex.row,m.l0.rowWithGap(12),m.l0.pt(8),m.l0.center,m.l0.px(16),{maxHeight:220,borderBottom:"solid 1px ".concat(m.TV.outlineDimmest)}],emptyImg:[m.l0.width("100%"),m.l0.height(180),m.l0.position.relative,m.l0.maxWidth(160),{alignSelf:"end",userSelect:"none",pointerEvents:"none"},{"> div":{position:"unset !important"},".image":{objectFit:"contain",width:"100% !important",position:"relative !important",height:"unset !important"}}]},D=function(e){var n=e.title,t=e.count,r=e.color,i=e.tooltip;return(0,o.BX)(v.G,{css:G.userGroup.titleContainer,children:[(0,o.tZ)(g.Z,{color:r,size:6}),(0,o.tZ)(h.xv,{variant:"small",css:G.userGroup.title,multiline:!1,children:n}),(0,o.tZ)(h.xv,{multiline:!1,variant:"small",color:"dimmest",css:G.userGroup.title,children:t}),i?(0,o.tZ)(E.u,{tooltip:i,children:(0,o.tZ)(R.Z,{})}):null]})};n.ZP=function(e){var n=e.replId,t=e.handleUpgradeTriggered,g=(0,Z.useRouter)(),S=(0,u.Vg)(g),E=(0,c.Z)(),R=E.showConfirm,_=E.showError,P=(0,C.aG)(),B=(0,x.mH)({variables:{replId:n},pollInterval:8e3}),A=B.data,U=B.loading,L=(0,r.Z)((0,x.U)({onCompleted:function(e){var t,r=null===(t=e.addMultiplayerUser.user)||void 0===t?void 0:t.username;r&&((0,s.j)(s.U3.MULTIPLAYER_INVITED,{replId:n,inviteMethod:"username"}),R("Added @".concat(r)))}}),2),X=L[0],N=L[1],M=(0,r.Z)((0,x.z8)({update:function(e,t){var r,o=null===(r=t.data)||void 0===r?void 0:r.createMultiplayerInvite2;if(o)if("UserError"!==o.__typename){if("MultiplayerInvite"===o.__typename){var a=o.email;return(0,s.j)(s.U3.MULTIPLAYER_INVITED,{replId:n,inviteMethod:"email"}),void R("Invited ".concat(a," via email"))}if("ReplPermission"===o.__typename){var l;e.modify({id:e.identify({__typename:"Repl",id:n}),fields:{permissions:function(n){var t=e.writeFragment({data:o,fragment:x.dE});return(0,i.Z)(n).concat([t])}}});var c=null===(l=o.user)||void 0===l?void 0:l.username;if(!c)return;(0,s.j)(s.U3.MULTIPLAYER_INVITED,{replId:n,inviteMethod:"email"}),R("Invited @".concat(c))}}else _(o.message)}}),2),F=M[0],O=M[1];(0,b.useEffect)((function(){var e=N.error||O.error;e&&(e.message.includes("reached the limit")?S?_("You have reached the invite limit for a free account, visit https://replit.com/pricing to upgrade."):t&&t(!0):_(e.message))}),[N.error,O.error,_,S,t]);var W="Repl"===(null===A||void 0===A?void 0:A.repl.__typename)?A.repl:null,H=null===A||void 0===A?void 0:A.currentUser,V=null===W||void 0===W?void 0:W.multiplayers.reduce((function(e,n){return(0,i.Z)(e).concat([n.username])}),[]),z=(null===W||void 0===W?void 0:W.currentUserPermissions.editMultiplayers)||!1,j=Boolean(W&&!W.multiplayers.length&&!W.multiplayerInvites.length),q=null===W||void 0===W?void 0:W.multiplayers.filter((function(e){return e.id!==(null===H||void 0===H?void 0:H.id)})),$=null===q||void 0===q?void 0:q.filter((function(e){return e&&I(e.id,P)})),Y=null===q||void 0===q?void 0:q.filter((function(e){return e&&!I(e.id,P)})),K=q?q.length:null;return(0,o.BX)(p.Tg,{background:"default",css:G.root,children:[(0,o.BX)(v.G,{css:[G.header,S&&G.header_mobile],children:[(0,o.tZ)(v.G,{css:G.titleContainer,children:(0,o.tZ)(h.xv,{variant:"subheadDefault",multiline:!1,children:"Multiplayers"})}),(0,o.BX)(v.G,{css:G.limitsContainer,children:[U?(0,o.BX)(v.G,{css:G.loading,children:[(0,o.tZ)(y.Z,{color:m.TV.foregroundDimmer}),(0,o.tZ)(h.xv,{color:"dimmer",multiline:!1,children:"Loading..."})]}):null,null===K||(null===H||void 0===H?void 0:H.isSubscribed)?null:(0,o.BX)(o.HY,{children:[(0,o.BX)(h.xv,{variant:"small",color:"dimmest","aria-hidden":!0,multiline:!1,children:[K," / ",w.z]}),(0,o.tZ)(f.J,{css:G.measureBar,total:w.z,current:K,tooltip:"".concat(w.z-K," free editors remaining")})]}),U||(null===H||void 0===H?void 0:H.isSubscribed)||S?null:(0,o.tZ)(l.Z,{small:!0,context:"workspace_multiplayer_header",onClickCallback:function(){t&&t(!0)},onCancel:function(){t&&t(!1)}})]})]}),z&&V&&W?(0,o.tZ)(v.G,{css:G.searchContainer,children:(0,o.tZ)(d.Z,{existingUsernames:V,onSubmit:function(e){U&&!(null===H||void 0===H?void 0:H.isSubscribed)||(!T()(e)||O.loading?N.loading||X({variables:{username:e,replId:n,type:"rw"}}):F({variables:{replId:n,email:e,type:"rw"}}))}})}):null,j?(0,o.BX)(v.G,{css:G.emptyContainer,children:[(0,o.tZ)(v.G,{children:(0,o.tZ)(h.xv,{variant:"subheadDefault",color:"dimmer",multiline:!1,children:"No one else is here"})}),(0,o.tZ)(v.G,{css:G.emptyImg,children:(0,o.tZ)(a.Z,{src:"/public/images/rainy-computer.png",alt:"raindrops falling onto an open laptop",layout:"fill",className:"image"})})]}):(0,o.BX)(p.Tg,{css:G.userList,children:[(null===$||void 0===$?void 0:$.length)?(0,o.BX)(v.G,{css:G.userGroup.root,children:[(0,o.tZ)(D,{title:"Online",count:$.length||0,color:m.TV.greenStrongest}),$.map((function(e){return e?(0,o.tZ)(k.Z,{isPendingInvitation:!1,replId:n,canEditMultiplayers:z,user:e},e.id):null}))]}):null,(null===Y||void 0===Y?void 0:Y.length)?(0,o.BX)(v.G,{css:G.userGroup.root,children:[(0,o.tZ)(D,{title:"Offline",count:Y.length||0,color:m.TV.outlineStrongest}),null===Y||void 0===Y?void 0:Y.map((function(e){return e?(0,o.tZ)(k.Z,{canEditMultiplayers:z,isPendingInvitation:!1,user:e,replId:n},e.id):null}))]}):null,(null===W||void 0===W?void 0:W.multiplayerInvites.length)?(0,o.BX)(v.G,{css:G.userGroup.root,children:[(0,o.tZ)(D,{title:"Pending Invitations",count:(null===W||void 0===W?void 0:W.multiplayerInvites.length)||0,color:m.TV.outlineStrongest}),W.multiplayerInvites.map((function(e){return(0,o.tZ)(k.Z,{canEditMultiplayers:z,replId:n,isPendingInvitation:!0,email:e.email},e.email)}))]}):null]})]})}},8441:function(e,n,t){var r=t(2272),i=t(74985),o=t(9247),a=t(87076),l=t(61284),c=t(17755),u=t(85368),s=t(82568),d=t(39541),f=t(27399),p=t(80336),h=t(55923),v=t(82893),m=t.n(v),g=t(96453),y=t(13233),Z=(0,s.X)({root:[d.l0.px(16),d.l0.py(4),d.l0.flex.row,d.l0.rowWithGap(8),d.l0.align.center,d.l0.cursor.default,d.l0.justify.spaceBetween],userContainer:d.l0.color.foregroundDefault,userContainer_pending:[d.l0.flex.grow(1),d.l0.flex.row,d.l0.rowWithGap(8),d.l0.align.center,{fontStyle:"italic"}],permissionsContainer:[d.l0.flex.row,d.l0.rowWithGap(8),d.l0.align.center]});n.Z=function(e){var n,t=e.isPendingInvitation,s=e.canEditMultiplayers,v=e.replId,b=(0,y.Z)(),w=b.showError,x=b.showConfirm,k=(0,r.Z)((0,g.Jh)({onError:function(e){return w(e.message)},onCompleted:function(e){var n,t=null===(n=e.removeMultiplayerUser.user)||void 0===n?void 0:n.username;t&&x("".concat(t," removed"))}}),2),C=k[0],S=k[1],T=(0,r.Z)((0,g.RJ)({onError:function(e){return w(e.message)},onCompleted:function(e){if("UserError"!==e.deleteMultiplayerInvite.__typename){if("MultiplayerInvite"===e.deleteMultiplayerInvite.__typename){var n=e.deleteMultiplayerInvite.email;x("Invite canceled for ".concat(n))}}else w(e.deleteMultiplayerInvite.message)}}),2),E=T[0],R=T[1],I=!t,G=I?(0,i.tZ)(o.Z,{size:"m",url:e.user.image}):(0,i.tZ)(f.Z,{color:d.TV.outlineDefault,size:32}),D=I?e.user.username:e.email;return(0,i.BX)(u.G,{css:Z.root,children:[I?(0,i.tZ)(h.Z,{username:e.user.username,children:(0,i.tZ)(m(),{href:"/@".concat(e.user.username),passHref:!0,children:(0,i.tZ)(u.G,{tag:"a",css:Z.userContainer,children:(0,i.tZ)(c.n,{username:e.user.username,src:null!==(n=e.user.image)&&void 0!==n?n:null})})})}):(0,i.BX)(u.G,{css:[Z.userContainer_pending],children:[G,(0,i.tZ)(l.xv,{color:I?"default":"dimmest",multiline:!1,children:D})]}),(0,i.BX)(u.G,{css:Z.permissionsContainer,children:[(0,i.tZ)(l.xv,{color:"dimmest",variant:"small",multiline:!1,children:e.isPendingInvitation?"Invited":"Can edit"}),s?(0,i.tZ)(a.h,{alt:I?"Remove member":"Cancel invitation",onClick:function(){s&&(S.loading||R.loading||(I?C({variables:{replId:v,username:e.user.username}}):E({variables:{replId:v,email:e.email}})))},children:(0,i.tZ)(p.Z,{size:12})}):null]})]})}},42469:function(e,n,t){t.d(n,{sk:function(){return f},zq:function(){return s}});var r=t(72006),i=t(43119),o=t(71440),a=t(24635);function l(){var e=(0,i.Z)(["\n  fragment MultiplayerUsernameSearchUser on User {\n    id\n    firstName\n    lastName\n    username\n    image\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,i.Z)(["\n  query MultiplayerUsernameSearch($query: String!, $limit: Int) {\n    usernameSearch(query: $query, limit: $limit) {\n      id\n      ...MultiplayerUsernameSearchUser\n    }\n  }\n  ","\n"]);return c=function(){return e},e}var u={},s=(0,o.Ps)(l()),d=(0,o.Ps)(c(),s);function f(e){var n=(0,r.Z)({},u,e);return a.a(d,n)}},30872:function(e,n,t){t.d(n,{Z:function(){return T}});var r=t(72006),i=t(4405),o=t(2272),a=t(74985),l=t(9247),c=t(84358),u=t(13233),s=t(45510),d=t(39137),f=t(63128),p=t(61284),h=t(85368),v=t(82568),m=t(39541),g=t(63837),y=t(32104),Z=t(21371),b=t(50959),w=t(56169),x=t(14709),k=t.n(x),C=t(42469),S=(0,v.X)({form:[m.l0.align.start,m.l0.display.flex,m.l0.rowWithGap(8),m.l0.width("100%")],searchContainer:[m.l0.position.relative,m.l0.flex.growAndShrink(1)],dropdownMenu:[m.l0.borderRadius(8),m.l0.overflow("hidden"),m.l0.mt(2),m.l0.zIndex(2),m.l0.border({color:m.TV.outlineDimmer,width:1,style:"solid"}),m.l0.maxHeight(280),m.l0.overflowY("auto"),m.l0.scrollbar.thin,{scrollbarColor:m.TV.backgroundHigher+" "+m.TV.backgroundHighest,"&::-webkit-scrollbar-thumb":{backgroundColor:m.TV.backgroundHighest}}],result:[m.l0.p(8),m.l0.rowWithGap(8),m.l0.justify.spaceBetween,m.l0.align.center,m.l0.cursor.pointer],result_active:[m.l0.backgroundColor.accentPrimaryDimmer],userContainer:[m.l0.rowWithGap(8),m.l0.align.center],loadingContainer:[m.l0.align.center,m.l0.m(8),m.l0.rowWithGap(8),m.l0.align.center],emptyText:[m.l0.m(8)]});function T(e){var n=e.onSubmit,t=e.existingUsernames,v=e.isDisabled,x=e.onChange,T=e.placeholder,E=(0,o.Z)(b.useState(""),2),R=E[0],I=E[1],G=(0,w.H)(),D=(0,c.Z)(R.trim().replace(/^@/,""),250),_=(0,C.sk)({skip:!D||k()(R),variables:{query:D,limit:6}}),P=_.data,B=_.loading,A=_.error,U=(0,u.Z)().showError;b.useEffect((function(){A&&U(A.message)}),[A,U]);var L=null===P||void 0===P?void 0:P.usernameSearch,X=function(e){I(e.currentTarget.value),null===x||void 0===x||x(e.currentTarget.value)},N=function(e){"Enter"===e.key&&R.match(/.+@.+/)&&(n(R),I(""),e.currentTarget.blur())};return(0,a.BX)("form",{onSubmit:function(e){e.preventDefault(),n(R),I("")},css:S.form,children:[(0,a.tZ)(Z.ZP,{onChange:function(e){e&&I(e.username)},itemToString:function(e){return(null===e||void 0===e?void 0:e.username)||""},initialHighlightedIndex:0,defaultHighlightedIndex:0,children:function(e){var n=e.getInputProps,o=e.getItemProps,c=e.getMenuProps,u=e.isOpen,s=e.highlightedIndex,v=e.getRootProps;return(0,a.BX)(h.G,(0,i.Z)((0,r.Z)({css:S.searchContainer},v({refKey:"innerRef"})),{children:[(0,a.tZ)(d.II,(0,r.Z)({id:G("username-search")},n({ref:null,value:R,onChange:X,placeholder:null!==T&&void 0!==T?T:"Add people by username or email",autoComplete:"off",onKeyDown:N}))),u?(0,a.BX)(h.G,{children:[L&&L.length?(0,a.tZ)(f.Tg,(0,i.Z)((0,r.Z)({elevated:!0,css:S.dropdownMenu,tag:"ul"},c({refKey:"innerRef"})),{children:L.map((function(e,n){return(0,a.BX)(h.G,(0,i.Z)((0,r.Z)({tag:"li"},o({item:e,index:n})),{css:[S.result,n===s&&S.result_active],children:[(0,a.BX)(h.G,{css:S.userContainer,children:[(0,a.tZ)(l.Z,{size:"m",url:e.image}),(0,a.tZ)(p.xv,{multiline:!1,children:e.username})]}),t.includes(e.username)?(0,a.tZ)(h.G,{children:(0,a.tZ)(g.Z,{color:m.TV.accentPositiveStronger})}):null]}),n)}))})):null,B?(0,a.tZ)(f.Tg,{elevated:!0,css:S.dropdownMenu,children:(0,a.BX)(h.G,{css:S.loadingContainer,children:[(0,a.tZ)(y.Z,{}),(0,a.tZ)(p.xv,{color:"dimmer",multiline:!1,children:"Loading\u2026"})]})}):null,L&&0===L.length?(0,a.tZ)(f.Tg,{elevated:!0,css:S.dropdownMenu,children:(0,a.BX)(p.xv,{css:S.emptyText,color:"dimmer",multiline:!1,children:['No results found for "',R,'"']})}):null]}):null]}))}}),(0,a.tZ)(h.G,{children:(0,a.tZ)(s.zx,{colorway:"primary",type:"submit",disabled:v||!R,text:"Invite"})})]})}},73204:function(e,n,t){t.d(n,{s:function(){return _e}});var r=t(74985),i=t(18200),o=t(625),a=t(13339),l=t(57135),c=t(72006),u=t(4405),s=t(2272),d=t(96583),f=t(14366),p=t(82108),h=t(38861),v=t(4706),m=t(33066),g=t(39541),y=t(61284),Z=t(85368),b=t(39902);function w(e){var n=e.amount,t=e.includeUsd,i=e.variant,o=e.color,a=void 0===o?"default":o,l=(0,m.$E)(n),c=(0,m.H2)(n);return(0,r.BX)(Z.G,{css:[g.l0.rowWithGap(2),g.l0.align.center],children:[(0,r.tZ)(b.Z,{size:"small"===i?12:16,css:[y.E_[a]]}),(0,r.BX)(y.xv,{variant:i,color:a,multiline:!1,children:[c,t?" (".concat(l,")"):""]})]})}var x=t(31430),k=t(51631),C={boost:k.kL.Boost,hosting_tier:k.kL.HostingTier},S={boost_2cpu_2ram:k.s2.Boost_2cpu_2ram,boost_4cpu_4ram:k.s2.Boost_4cpu_4ram,boost_8cpu_8ram:k.s2.Boost_8cpu_8ram,boost_16cpu_16ram:k.s2.Boost_16cpu_16ram,hosting_tier_e2_micro:k.s2.HostingTierE2Micro,hosting_tier_e2_small:k.s2.HostingTierE2Small,hosting_tier_e2_medium:k.s2.HostingTierE2Medium,hosting_tier_n1_custom_1_4:k.s2.HostingTierN1Custom_1_4,hosting_tier_e2_standard_2:k.s2.HostingTierE2Standard_2,hosting_tier_e2_standard_4:k.s2.HostingTierE2Standard_4},T=t(24154),E=t(34393),R=t(45510),I=t(33280),G=t(87076),D=t(82568),_=t(1050),P=t(32104),B=t(8622),A=t(4648),U=t(52444),L=t(50959),X=t(14351),N=t(91861),M=t(43119),F=t(71440),O=t(33281),W=t(27081),H=t(9125);function V(){var e=(0,M.Z)(["\n  query RefetchPowerUps($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        ...MultiBoostReplPowerUps\n        ...ReplPowerUpMutationReturnFields\n      }\n    }\n    currentUser {\n      ...PowerUpMutationReturnFields\n    }\n  }\n  ","\n  ","\n  ","\n"]);return V=function(){return e},e}var z={},j=(0,F.Ps)(V(),O.s1,W.sh,W.E_);function q(e){var n=e.cycles,t=e.description;return(0,r.BX)(Z.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:[(0,r.tZ)(y.xv,{color:"dimmest",multiline:!1,children:t}),(0,r.tZ)(I.R,{}),(0,r.tZ)(w,{amount:n,includeUsd:!1,color:"dimmest"})]})}var $=(0,D.X)({iconBackground:[g.l0.width(40),g.l0.height(40),g.l0.borderRadius(8),g.l0.justify.center,g.l0.align.center,g.l0.backgroundColor.blueDimmer],loadingContainer:[g.l0.justify.center,g.l0.align.center,g.l0.minHeight(80)]});function Y(e){var n=e.powerUpCategory,t=e.cyclesCost,o=e.description,a=i.S0[n];return(0,r.tZ)(Z.G,{css:[g.l0.colWithGap(16)],children:(0,r.BX)(Z.G,{css:[g.l0.flex.row,g.l0.justify.spaceBetween],children:[(0,r.BX)(Z.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:[(0,r.tZ)(Z.G,{css:$.iconBackground,children:(0,r.tZ)(a.iconComponent,{size:24})}),(0,r.BX)(Z.G,{css:[g.l0.px(8),g.l0.py(2),g.l0.colWithGap(4),g.l0.justify.spaceBetween],children:[(0,r.tZ)(y.xv,{variant:"subheadDefault",multiline:!1,children:a.name}),(0,r.tZ)(y.xv,{variant:"small",color:"dimmer",multiline:!1,children:o})]})]}),(0,r.BX)(Z.G,{css:[g.l0.px(8),g.l0.py(2),g.l0.colWithGap(4),g.l0.justify.spaceBetween,g.l0.align.end],children:[(0,r.tZ)(w,{amount:t,includeUsd:!0}),(0,r.BX)(y.xv,{variant:"small",color:"dimmer",multiline:!1,children:["per / ",a.orderDuration]})]})]})})}function K(e){var n=e.product,t=e.goToCheckoutSuccess,o=e.goToNewPaymentMethodForm,a=(0,f.useStripe)(),m=(0,p.Z)({forceFetch:!0}),b=m.cycles,w=m.loading,k=(0,E.Q)(),D=k.paymentMethod,M=k.loading,F=i.S0[n.powerUpCategory],O=i.$[n.powerUpSku].provisionDescription,W=(0,L.useState)(null),V=W[0],K=W[1],Q=(0,L.useState)(!1),J=Q[0],ee=Q[1],ne=(0,L.useState)(!1),te=ne[0],re=ne[1],ie=(0,T.M)().createCheckoutSession,oe=(0,s.Z)(function(e){var n=(0,c.Z)({},z,e);return H.t(j,n)}({variables:{replId:n.replId}}),1)[0],ae=(0,N.B)().startPolling,le=(0,h.kr)({defaultAutoRefillEnabledValue:!0}),ce=le.autoRefillEnabled,ue=le.autoRefillMonthlyBudget,se=le.autoRefillHasError,de=le.autoRefillHasChanged,fe=le.cardAutoRefillPreferencesProps,pe=function(e){var n=e.productCost,t=e.cyclesBalance;if(n<=t)return{cyclesToBePurchased:0,cyclesBalanceAfterUpgrade:t,excessPurchaseExplanation:"no-purchase"};var r,i=n-t,o="no-excess";return i>=X.gp?(r=i,o="no-excess"):(r=X.gp,o="minimum"),{cyclesToBePurchased:r,cyclesBalanceAfterUpgrade:t+r-n,excessPurchaseExplanation:o}}({productCost:n.cyclesCostNow,cyclesBalance:null!==b&&void 0!==b?b:0}),he="This will purchase ".concat(pe.cyclesToBePurchased.toLocaleString()," Cycles for ").concat((0,X.qJ)(pe.cyclesToBePurchased)," and activate your ").concat(F.name,".");"minimum"===pe.excessPurchaseExplanation&&(he="This will purchase the minimum purchase amount of ".concat(pe.cyclesToBePurchased.toLocaleString()," Cycles for ").concat((0,X.qJ)(pe.cyclesToBePurchased)," and activate your ").concat(F.name,"."));var ve=(0,L.useState)("Processing..."),me=ve[0],ge=ve[1],ye=(0,U.i)(),Ze=ye.isPurchaseAllowed,be=ye.reasonPurchaseNotAllowed;if(!Ze&&be)return(0,r.tZ)(A.Z,{reason:be});var we=function(){ee(!1)},xe=function(){var e=(0,l.Z)((function(){return(0,d.__generator)(this,(function(e){switch(e.label){case 0:if(ee(!0),null==D)throw new Error("paymentMethod is null");if(null==a)throw new Error("stripe is null");return ge("Checking out..."),[4,ie({input:{cyclesQuantity:pe.cyclesToBePurchased,postPurchasePowerUp:{replPowerUp:{replId:n.replId,sku:S[n.powerUpSku],type:C[n.powerUpCategory]}},cyclesAutoRefillConfiguration:de?{enabled:ce,monthlyBudget:ue}:null},onError:function(e){K(e),we()},onSucceed:function(){var e=(0,l.Z)((function(e){var r,i;return(0,d.__generator)(this,(function(o){switch(o.label){case 0:return ge("Processing payment..."),[4,a.confirmCardPayment(e.clientSecret)];case 1:return(r=o.sent().error)?(K(null!==(i=r.message)&&void 0!==i?i:"An error occurred. Please try again."),we(),[2]):(ge("Provisioning Power Up..."),function(e){var r=e.checkoutSessionId;ae({checkoutSessionId:r,onSucceeded:function(){re(!0),oe(),t(n)},onFailed:function(){K("Payment failed. Please try again."),we(),oe()},onError:function(e){K(e),we(),oe()}})}({checkoutSessionId:e.checkoutSessionId}),[2])}}))}));return function(n){return e.apply(this,arguments)}}()})];case 1:return e.sent(),[2]}}))}));return function(){return e.apply(this,arguments)}}(),ke=M||w||null==b,Ce=null!=D&&!ke&&!J;return(0,r.BX)(Z.G,{css:[g.l0.colWithGap(16)],children:[(0,r.tZ)(Y,{powerUpCategory:n.powerUpCategory,cyclesCost:X.z4[n.powerUpSku],description:O}),(0,r.tZ)(I.R,{}),ke?(0,r.tZ)(Z.G,{css:$.loadingContainer,children:(0,r.tZ)(P.Z,{})}):(0,r.tZ)(Z.G,{css:[g.l0.colWithGap(12),g.l0.align.start],children:null==D?(0,r.BX)(r.HY,{children:[(0,r.tZ)(y.xv,{color:"dimmer",children:"You need to add a payment method to complete this purchase."}),(0,r.tZ)(R.zx,{iconLeft:(0,r.tZ)(B.Z,{}),text:"Add Payment Method",big:!0,onClick:o,colorway:"primary",stretch:!0})]}):(0,r.tZ)(r.HY,{children:(0,r.tZ)(Z.G,{css:[g.l0.colWithGap(16)],children:(0,r.BX)(Z.G,{css:[g.l0.colWithGap(4)],children:[(0,r.BX)(Z.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:[(0,r.tZ)(G.h,{alt:"Update Payment Method",onClick:o,children:(0,r.tZ)(_.Z,{})}),(0,r.tZ)(v.R,{last4:D.last4})]}),(0,r.tZ)(Z.G,{css:[g.l0.pl(24),g.l0.pr(16),g.l0.colWithGap(8)],children:(0,r.tZ)(h.OK,(0,u.Z)((0,c.Z)({},fe),{loading:fe.loading||J,showSaveButton:!1}))})]})})})}),null!==D?(0,r.BX)(r.HY,{children:[(0,r.tZ)(I.R,{}),(0,r.tZ)(y.xv,{variant:"small",css:[g.l0.color.foregroundDimmer],children:he}),(0,r.tZ)(x.q,{isMakingPayment:!0,showSuccessState:te,showProcessingState:J,disabled:!Ce||se,initialStateTextOverride:"Purchase ".concat(pe.cyclesToBePurchased.toLocaleString()," Cycles & Upgrade ").concat(F.name),processingStateTextOverride:me,big:!0,onClick:xe}),null!=V?(0,r.tZ)(y.xv,{css:[g.l0.color.accentNegativeDefault],children:V}):null,(0,r.BX)(Z.G,{css:[g.l0.colWithGap(4)],children:[(0,r.tZ)(q,{description:"Cycles balance after purchase",cycles:pe.cyclesToBePurchased}),(0,r.tZ)(q,{description:"1st ".concat(F.orderDuration," of ").concat(F.name),cycles:-1*n.cyclesCostNow}),(0,r.tZ)(q,{description:"Cycles balance after upgrade",cycles:pe.cyclesBalanceAfterUpgrade})]})]}):null]})}var Q=t(24635);function J(){var e=(0,M.Z)(["\n  query CheckOutSuccess($replId: String!) {\n    currentUser {\n      id\n      cyclesAutoRefillConfiguration {\n        ... on CyclesAutoRefillConfiguration {\n          id\n          enabled\n          refillAmount\n          monthlyBudget\n        }\n        ... on UnauthorizedError {\n          message\n        }\n      }\n    }\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        owner {\n          ... on Team {\n            id\n          }\n          ... on User {\n            id\n          }\n        }\n      }\n    }\n  }\n"]);return J=function(){return e},e}var ee={},ne=(0,F.Ps)(J());var te=t(25198),re=t(96864),ie=t(76735);function oe(e){var n=e.autoRefillEnabled;return e.loadingAutoRefill?"...":n?"on":"off"}var ae=(0,D.X)({powerUpIconBackground:[g.l0.width(32),g.l0.height(32),g.l0.borderRadius(8),g.l0.justify.center,g.l0.align.center,g.l0.backgroundColor.blueDimmer],autoRefillIconBackground:[g.l0.width(32),g.l0.height(32),g.l0.borderRadius(8),g.l0.justify.center,g.l0.align.center,g.l0.backgroundColor.greyDimmer]});function le(e){var n,t,o,a=e.product,l=e.goToCardPreferences,u=e.goToPowerUpDetails,s=(0,p.Z)({forceFetch:!0}).cycles,d=function(e){var n=(0,c.Z)({},ee,e);return Q.a(ne,n)}({variables:{replId:a.replId}}),f=d.data,h=d.loading,v="CyclesAutoRefillConfiguration"===(null===f||void 0===f||null===(n=f.currentUser)||void 0===n||null===(t=n.cyclesAutoRefillConfiguration)||void 0===t?void 0:t.__typename)?f.currentUser.cyclesAutoRefillConfiguration:null,m="Repl"===(null===f||void 0===f?void 0:f.repl.__typename)&&"Team"===(null===(o=f.repl.owner)||void 0===o?void 0:o.__typename),b=Boolean(null===v||void 0===v?void 0:v.enabled),x=i.S0[a.powerUpCategory],k=i.$[a.powerUpSku];return(0,r.BX)(Z.G,{css:[g.l0.colWithGap(16)],children:[(0,r.BX)(Z.G,{css:[g.l0.rowWithGap(8),g.l0.justify.spaceBetween,g.l0.align.center],children:[(0,r.BX)(Z.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:[(0,r.tZ)(Z.G,{css:ae.powerUpIconBackground,children:(0,r.tZ)(x.iconComponent,{size:20})}),(0,r.BX)(Z.G,{css:[g.l0.flex.column],children:[(0,r.BX)(y.xv,{multiline:!1,children:[x.name," activated"]}),(0,r.BX)(Z.G,{css:g.l0.rowWithGap(8),children:[(0,r.tZ)(y.xv,{variant:"small",color:"dimmer",multiline:!1,children:k.provisionDescription}),(0,r.BX)(Z.G,{css:[g.l0.rowWithGap(4)],children:[(0,r.tZ)(w,{amount:X.z4[a.powerUpSku],includeUsd:!0,variant:"small",color:"dimmer"}),(0,r.BX)(y.xv,{variant:"small",color:"dimmer",multiline:!1,children:["/ ",x.orderDuration]})]})]})]})]}),(0,r.tZ)(y.xv,{multiline:!1,children:(0,r.tZ)("a",{role:"button",tabIndex:0,onKeyDown:function(){return u(a.powerUpCategory)},onClick:function(){return u(a.powerUpCategory)},css:[g.l0.color.foregroundDimmer,{textDecoration:"underline"}],children:"Edit"})})]}),m||h?null:(0,r.BX)(Z.G,{css:[g.l0.rowWithGap(8),g.l0.justify.spaceBetween,g.l0.align.center],children:[(0,r.BX)(Z.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:[(0,r.tZ)(Z.G,{css:ae.autoRefillIconBackground,children:(0,r.tZ)(re.Z,{size:20})}),(0,r.BX)(Z.G,{css:[g.l0.flex.column],children:[(0,r.BX)(y.xv,{multiline:!1,children:["Auto-Refill is"," ",oe({autoRefillEnabled:b,loadingAutoRefill:h})]}),(0,r.tZ)(Z.G,{css:g.l0.rowWithGap(4),children:null==s?(0,r.tZ)(P.Z,{}):(0,r.BX)(r.HY,{children:[(0,r.tZ)(w,{amount:s,includeUsd:!1,variant:"small",color:"dimmer"}),(0,r.tZ)(y.xv,{variant:"small",color:"dimmer",multiline:!1,children:"left"})]})})]})]}),(0,r.tZ)(y.xv,{multiline:!1,children:(0,r.tZ)("a",{role:"button",tabIndex:0,onKeyDown:function(){return l(a.powerUpCategory)},onClick:function(){return l(a.powerUpCategory)},css:[g.l0.color.foregroundDimmer,{textDecoration:"underline"}],children:"Edit"})})]}),h||b||m?null:(0,r.tZ)(te.E,{colorway:"warning",icon:(0,r.tZ)(ie.Z,{}),text:"Add a payment method and enable Auto-Refill to prevent your ".concat(x.name," Power Up from being disabled when you run out of Cycles.")})]})}var ce=t(13961),ue=t(3652),se=t(63837),de=t(70232),fe=t(31740),pe=t(31854),he=t(63128),ve=t(43312),me=t(652),ge={tier:(0,ve.iv)([g.l0.borderRadius(12),g.l0.colWithGap(12),g.l0.p(12)]),tierHeader:(0,ve.iv)([g.l0.rowWithGap(8),g.l0.flex.grow(1),g.l0.justify.spaceBetween,g.l0.align.baseline]),tierHeaderTitle:(0,ve.iv)(g.l0.rowWithGap(8)),tierHeaderCost:(0,ve.iv)([g.l0.rowWithGap(4),g.l0.align.baseline]),tierFeatures:(0,ve.iv)(g.l0.colWithGap(8)),tierFeature:(0,ve.iv)(g.l0.rowWithGap(4),g.l0.align.center),tierPicker:(0,ve.iv)([g.l0.border({color:g.TV.outlineDefault})])},ye=function(e){var n=e.selectedOption,t=e.onChange,i=e.disabled,o=X.r4[n.sku].egress,a=["".concat(o," GiB egress"),"Deploy to any URL, cover page optional","Configurable machine","Always on"];return(0,r.BX)(he.Tg,{elevated:!0,css:ge.tier,children:[(0,r.BX)(Z.G,{css:ge.tierHeader,children:[(0,r.tZ)(Z.G,{css:ge.tierHeaderTitle,children:(0,r.tZ)(y.xv,{variant:"subheadBig",multiline:!1,children:"Reserved VM"})}),(0,r.tZ)(Z.G,{css:g.l0.rowWithGap(4),children:(0,r.BX)(Z.G,{css:[g.l0.rowWithGap(2),g.l0.align.center],children:[(0,r.tZ)(b.Z,{}),(0,r.BX)(Z.G,{css:[ge.tierHeaderCost],children:[(0,r.tZ)(y.xv,{variant:"subheadDefault",multiline:!1,children:n.cost.cyclesCostRecurring}),(0,r.tZ)(y.xv,{color:"dimmer",variant:"small",multiline:!1,children:"per day"})]})]})})]}),(0,r.tZ)(pe.P,{css:ge.tierPicker,initialSelectedItem:{title:(0,me.$)(n.sku),sku:n.sku},items:Object.keys(X.r4).map((function(e){return{title:(0,me.$)(e),sku:e}})),onChange:function(e){var n=e.sku;return t(n)},disabled:i}),(0,r.tZ)(Z.G,{css:ge.tierFeatures,children:a.map((function(e,n){return(0,r.BX)(Z.G,{css:ge.tierFeature,children:[(0,r.tZ)(se.Z,{}),(0,r.tZ)(y.xv,{multiline:!1,children:e})]},n)}))})]})},Ze=t(48330),be=t(66539),we=t(93658),xe=t(30504),ke=t(88254),Ce=t(63064),Se=t(13233),Te=t(35004),Ee=t(27942),Re=function(e){var n=e.context,t=e.selectedOption,i=e.currentOption,a=e.onBuyMoreCycles,c=e.onPowerUpUpdated,u=e.onPowerUpRequested,f=(0,Ze.Z)(),p=(0,Ce.Z)(),v=(0,Se.Z)().showError,m=(0,s.Z)(L.useState(!1),2),y=m[0],Z=m[1],b=(0,h.kr)({}).autoRefillEnabled,w=(0,s.Z)((0,Ee.IN)({onCompleted:function(){var e=(0,l.Z)((function(e){var n;return(0,d.__generator)(this,(function(r){switch(r.label){case 0:return"UserError"===(n=e.setHostingTier).__typename?(v(n.message),[2]):(Z(!0),[4,new Promise((function(e){return setTimeout(e,2e3)}))]);case 1:return r.sent(),c({type:"powerUp",powerUpCategory:"hosting_tier",powerUpSku:t.sku,cyclesCostNow:t.cost.cyclesCostNow,replId:f}),p.current,[2]}}))}));return function(n){return e.apply(this,arguments)}}(),onError:function(e){u(!1),ke.Tb(e),v(e.message)}}),2),x=w[0],C=w[1].loading;if(y)return(0,r.tZ)(R.zx,{text:"Tier Purchased",colorway:"positive",disabled:!0,loading:!0,css:{color:"".concat(g.TV.accentPositiveStronger," !important")}});var S,T=(null===i||void 0===i?void 0:i.sku)===t.sku,E=!0;switch(t.cost.explanation){case k.Ch.IncludedInExistingOrder:case k.Ch.ActivateExistingOrder:case k.Ch.SpendCycles:case k.Ch.NeedsCycles:case k.Ch.IncludedInSubscription:E=!1}return C?(E=!0,S="Processing"):T?(E=!0,S="Current tier"):S="Purchase and deploy",(0,r.tZ)(R.zx,{text:S,disabled:E,loading:C,colorway:C||!E?"primary":void 0,iconRight:C?void 0:(0,r.tZ)(Te.Z,{}),onClick:function(){var e;(u(!0),C)||(t.cost.explanation!==k.Ch.NeedsCycles?(x({variables:{input:{replId:f,sku:t.sku}}}),null!==(e=t.cost.cyclesCostNow)&&void 0!==e&&e&&((0,o.j)(o.U3.CHECKOUT_REQUESTED,{source:n,powerUpCategory:"boost"}),(0,o.j)(o.U3.CYCLES_USED,{powerUp:"hosting_tier",sku:t.sku,source:n}),(0,o.j)(o.U3.CHECKOUT_COMPLETED,{source:n,powerUpCategory:"boost",autoRefill:b}))):a({type:"powerUp",powerUpCategory:"hosting_tier",powerUpSku:t.sku,cyclesCostNow:t.cost.cyclesCostNow,replId:f}))},css:C&&{color:"".concat(g.TV.accentPrimaryStronger," !important")}})},Ie=function(e){var n=e.context,t=e.onBuyMoreCycles,i=e.onPowerUpUpdated,o=(0,Ze.Z)(),a=(0,s.Z)(L.useState("ready"),2),l=a[0],c=a[1],u=(0,s.Z)(L.useState(null),2),d=u[0],f=u[1],p=(0,s.Z)(L.useState(null),2),h=p[0],v=p[1],b=(0,s.Z)(L.useState(null),2),w=b[0],x=b[1],C=(0,Ee.s7)({fetchPolicy:"network-only",ssr:!1,variables:{replId:o},onCompleted:function(e){var n,t,r,i,o;if("Repl"===(null===e||void 0===e?void 0:e.repl.__typename)&&"ReplPowerUpTypes"===(null===(n=e.repl)||void 0===n||null===(t=n.powerUps)||void 0===t?void 0:t.__typename)&&"PowerUpCostsType"===(null===(r=e.repl)||void 0===r||null===(i=r.powerUpCosts)||void 0===i?void 0:i.__typename)){var a=null===(o=e.repl.powerUps.hostingTier)||void 0===o?void 0:o.sku,l=a||k.DZ.HostingTierE2Small,c=(0,me.i)(e.repl.powerUpCosts,a),u=(0,me.i)(e.repl.powerUpCosts,l);c&&a&&v({sku:a,cost:c}),u&&f({sku:l,cost:u}),x(e.repl.powerUpCosts)}}}).loading;if(C||!d||!w)return(0,r.tZ)(Z.G,{css:[g.l0.flex.row,g.l0.justify.center],children:(0,r.tZ)(P.Z,{})});var S=null;if("INCLUDED_IN_SUBSCRIPTION"===d.cost.explanation)S="Included in your subscription plan.";else if(d.cost.cyclesCostRecurring>0){var T=(0,m.$E)(d.cost.cyclesCostRecurring),E=(0,m.$E)(d.cost.cyclesCostRecurring*xe.Dj);S="".concat(T,"/day (Approximately ").concat(E,"/month).")}var R=null;switch(d.cost.explanation){case k.Ch.IncludedInExistingOrder:break;case k.Ch.NeedsCycles:R="You'll be able to purchase Cycles while activating.";break;case k.Ch.SpendCycles:R="Today's charge will be ".concat(d.cost.cyclesCostNow," Cycles.")}return(0,r.BX)(Z.G,{css:g.l0.colWithGap(16),children:[(0,r.tZ)(ye,{selectedOption:d,onChange:function(e){var n=(0,me.i)(w,e);n&&f({sku:e,cost:n})},disabled:"requesting"===l}),(0,r.tZ)(Z.G,{css:[g.l0.colWithGap(12)],children:(0,r.BX)(Z.G,{css:[g.l0.colWithGap(8)],children:[(0,r.BX)(Z.G,{css:[g.l0.minHeight(50),g.l0.colWithGap(16),g.l0.justify.end,g.l0.mb(16)],children:[null!=S?(0,r.tZ)(y.xv,{css:[g.l0.textAlign.center],multiline:!1,children:S}):null,null!=R?(0,r.BX)(Z.G,{css:[g.l0.rowWithGap(8),g.l0.justify.center,g.l0.color.foregroundDimmer],children:[(0,r.tZ)(y.xv,{multiline:!1,children:R}),(0,r.tZ)(be.u,{tooltip:"Upgrades and downgrades are immediate. Upgrading within a 24 hour period following a downgrade will incur a charge.",children:(0,r.tZ)(we.Z,{})})]}):null]}),(0,r.tZ)(Re,{context:n,selectedOption:d,currentOption:h,onBuyMoreCycles:t,onPowerUpUpdated:i,onPowerUpRequested:function(e){return c(e?"requesting":"ready")}})]})})]})};function Ge(e){var n=e.powerUpCategory,t=e.goToCheckout,i=e.goToCheckoutSuccess;switch(n){case"boost":return(0,r.tZ)(fe.Z,{isCheckoutFlow:!0,powerUp:n,onPowerUpUpdated:i,onBuyMoreCycles:t,context:"repl_resources"});case"hosting_tier":return(0,r.tZ)(Ie,{context:"workspace_hosting_pane",onPowerUpUpdated:i,onBuyMoreCycles:t});default:throw new Error("Unknown power up category: ".concat(n))}}function De(e){var n=e.title,t=e.children,i=e.goBack,o=e.canGoBack,a=e.allowBack,l=void 0===a||a;return(0,r.BX)(r.HY,{children:[(0,r.BX)(Z.G,{css:[g.l0.rowWithGap(8),g.l0.p(12),g.l0.align.center],children:[l&&o?(0,r.tZ)(G.h,{alt:"Back",onClick:function(){return i()},children:(0,r.tZ)(ue.Z,{})}):null,"string"===typeof n?(0,r.tZ)(y.xv,{variant:"subheadDefault",multiline:!1,children:n}):n]}),(0,r.tZ)(I.R,{}),(0,r.tZ)(Z.G,{css:[g.l0.colWithGap(8),g.l0.p(12)],children:t})]})}function _e(e){var n=e.currentStep,t=e.goBack,l=e.canGoBack,c=e.goTo,u=e.analyticsContext;switch(n.step){case"power_up_details":var s=n.powerUpCategory,d=i.S0[s];return(0,r.tZ)(De,{goBack:t,canGoBack:l,title:d.name,children:(0,r.tZ)(Ge,{powerUpCategory:s,goToCheckout:function(e){c({step:"checkout",product:e}),(0,o.j)(o.U3.CHECKOUT_REQUESTED,{source:u,powerUpCategory:s})},goToCheckoutSuccess:function(e){c({step:"checkout_success",product:e})}})});case"checkout":return(0,r.tZ)(De,{goBack:t,canGoBack:l,title:"Checkout",children:(0,r.tZ)(K,{product:n.product,goToCheckoutSuccess:function(e){c({step:"checkout_success",product:e})},goToNewPaymentMethodForm:function(){return c({step:"new_payment_method_form"})},context:u})});case"checkout_success":return(0,r.tZ)(De,{goBack:t,canGoBack:l,allowBack:!1,title:(0,r.BX)(Z.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:[(0,r.tZ)(se.Z,{color:g.TV.accentPositiveStronger}),(0,r.tZ)(y.xv,{multiline:!1,variant:"subheadDefault",css:[g.l0.color.accentPositiveStronger],children:"Success"})]}),children:(0,r.tZ)(le,{product:n.product,goToCardPreferences:function(e){return c({step:"card_preferences",powerUpCategory:e})},goToPowerUpDetails:function(e){return c({step:"power_up_details",powerUpCategory:e})}})});case"card_preferences":var f=n.powerUpCategory;return(0,r.tZ)(De,{goBack:t,canGoBack:l,title:"Card Preferences",children:(0,r.tZ)(a.t,{goToNewPaymentMethodForm:function(){return c({step:"new_payment_method_form",powerUpCategory:f})}})});case"new_payment_method_form":var p=n.powerUpCategory;return(0,r.tZ)(De,{goBack:t,canGoBack:l,title:"Update Payment Method",children:(0,r.tZ)(ce.q,{onSuccess:function(){return l&&t()},powerUpCategory:p,context:u})});case"not_shown":throw new Error("This step should never be rendered");default:(0,de.Z)(n)}}},13339:function(e,n,t){t.d(n,{t:function(){return Z}});var r=t(72006),i=t(74985),o=t(38861),a=t(4706),l=t(34393),c=t(45510),u=t(87076),s=t(25198),d=t(85368),f=t(82568),p=t(39541),h=t(8622),v=t(1050),m=t(32104),g=t(76735),y=(0,f.X)({self:[p.l0.colWithGap(16)],paymentMethodContainer:[p.l0.colWithGap(16)],addPaymentMethodContainer:[p.l0.colWithGap(6)],loadingContainer:[p.l0.justify.center,p.l0.align.center,p.l0.minHeight(80)]});function Z(e){var n=e.goToNewPaymentMethodForm,t=e.onPreferencesUpdated,f=(0,l.Q)(),Z=f.paymentMethod,b=f.loading,w=f.error,x=(0,o.kr)({defaultAutoRefillEnabledValue:!1,onAutoRefillPreferencesUpdated:function(){t&&t()}}).cardAutoRefillPreferencesProps;return b||null!=w?(0,i.tZ)(d.G,{css:y.loadingContainer,children:(0,i.tZ)(m.Z,{})}):(0,i.BX)(d.G,{css:y.self,children:[null!=Z?(0,i.BX)(d.G,{css:y.paymentMethodContainer,children:[(0,i.BX)(d.G,{css:[p.l0.rowWithGap(8),p.l0.align.center],children:[(0,i.tZ)(u.h,{alt:"Update Payment Method",onClick:n,children:(0,i.tZ)(v.Z,{})}),(0,i.tZ)(a.R,{last4:Z.last4})]}),(0,i.tZ)(o.OK,(0,r.Z)({},x))]}):null," ",null==Z?(0,i.BX)(d.G,{css:y.addPaymentMethodContainer,children:[(0,i.tZ)(s.E,{colorway:"warning",icon:(0,i.tZ)(g.Z,{}),text:"Add a payment method and enable Auto-Refill to prevent your Power Ups from being disabled when you run out of Cycles."}),(0,i.tZ)(c.zx,{text:"Add Payment Method",iconLeft:(0,i.tZ)(h.Z,{}),onClick:n})]}):null]})}},66195:function(e,n,t){t.d(n,{P:function(){return o}});var r=t(9970),i=t(50959);function o(e){var n=(0,i.useState)(e),t=n[0],o=n[1],a=(0,i.useState)([]),l=a[0],c=a[1],u=(0,i.useCallback)((function(e){c((0,r.Z)(l).concat([t])),o(e)}),[l,c,t,o]),s=(0,i.useCallback)((function(){var e=l.pop();c(l),e&&o(e)}),[l,c,o]);return{currentStep:t,goTo:u,goBack:s,canGoBack:l.length>0}}},90024:function(e,n,t){t.d(n,{FW:function(){return p},NH:function(){return m}});var r=t(72006),i=t(43119),o=t(71440),a=t(3481),l=t(84757),c=t(24635);function u(){var e=(0,i.Z)(["\n  fragment PublishReplData on Repl {\n    id\n    url\n    title\n    description\n    iconUrl\n    lastPublishedAt\n    publishedAs\n    imageUrl\n    isRenamed\n    templateInfo {\n      iconUrl\n    }\n    replViewSettings {\n      id\n      defaultView\n      replImage\n      replFile\n    }\n    tags {\n      id\n      isOfficial\n    }\n    currentUserPermissions {\n      containerWrite\n      publish\n      changeIconUrl\n    }\n    ...CrosisContextRepl\n    ...PublishedReplShareInfoReplData\n  }\n  ","\n  ","\n"]);return u=function(){return e},e}function s(){var e=(0,i.Z)(["\n  fragment PublishCurrentUser on CurrentUser {\n    id\n    image\n    isTemplateDeveloper: hasRole(role: TEMPLATE_DEVELOPER)\n    ...CrosisContextCurrentUser\n  }\n  ","\n"]);return s=function(){return e},e}function d(){var e=(0,i.Z)(["\n  query PublishCurrentUser {\n    currentUser {\n      id\n      ...PublishCurrentUser\n    }\n  }\n  ","\n"]);return d=function(){return e},e}var f={},p=(0,o.Ps)(u(),a.C,l.B),h=(0,o.Ps)(s(),a.D),v=(0,o.Ps)(d(),h);function m(e){var n=(0,r.Z)({},f,e);return c.a(v,n)}},70196:function(e,n,t){t.d(n,{e9:function(){return p},wd:function(){return d}});var r=t(72006),i=t(43119),o=t(71440),a=t(84757),l=t(24635);function c(){var e=(0,i.Z)(["\n  fragment PublishReleaseFormRepl on Repl {\n    id\n    title\n    description\n    slug\n    user {\n      username\n    }\n    ...PublishedReplShareInfoReplData\n    deployment {\n      id\n      activeRelease {\n        id\n      }\n    }\n    releases {\n      items {\n        id\n        timeCreated\n        description\n      }\n    }\n  }\n  ","\n"]);return c=function(){return e},e}function u(){var e=(0,i.Z)(["\n  query PublishReleaseFormCurrentUser {\n    currentUser {\n      id\n      username\n    }\n  }\n"]);return u=function(){return e},e}var s={},d=(0,o.Ps)(c(),a.B),f=(0,o.Ps)(u());function p(e){var n=(0,r.Z)({},s,e);return l.a(f,n)}},84757:function(e,n,t){t.d(n,{B:function(){return o}});var r=t(43119);function i(){var e=(0,r.Z)(["\n  fragment PublishedReplShareInfoReplData on Repl {\n    id\n    url\n    publishedAs\n    title\n  }\n"]);return i=function(){return e},e}var o=(0,t(71440).Ps)(i())},80866:function(e,n,t){t.d(n,{Z:function(){return S}});var r=t(57135),i=t(96583),o=t(74985),a=(t(50959),t(39137)),l=t(85368),c=t(61284),u=t(39541),s=t(45510),d=t(25198),f=t(56169),p=t(51631),h=t(12318),v=t(76735),m=t(35207),g=t(625),y=t(22642),Z=t(33594),b=(0,t(82568).X)({content:[u.l0.p(8),u.l0.colWithGap(16)],section:[u.l0.colWithGap(8)]});function w(e){var n=e.header;return(0,o.tZ)(Z.Q,{headerContent:n,children:(0,o.BX)(l.G,{css:b.content,children:[(0,o.BX)(l.G,{css:b.section,children:[(0,o.tZ)(c.xv,{multiline:!1,children:"Bold Text"}),(0,o.tZ)(c.xv,{color:"dimmer",multiline:!1,children:"**bold**"})]}),(0,o.BX)(l.G,{css:b.section,children:[(0,o.tZ)(c.xv,{multiline:!1,children:"Italic Text"}),(0,o.tZ)(c.xv,{color:"dimmer",multiline:!1,children:"__italic__"})]}),(0,o.BX)(l.G,{css:b.section,children:[(0,o.tZ)(c.xv,{multiline:!1,children:"Links"}),(0,o.tZ)(c.xv,{color:"dimmer",multiline:!1,children:"[Link Name](https://yourlink.com)"})]}),(0,o.BX)(l.G,{css:b.section,children:[(0,o.tZ)(c.xv,{multiline:!1,children:"Images"}),(0,o.tZ)(c.xv,{color:"dimmer",multiline:!1,children:"![Image alt text](https://linktoyourimage.com)"})]}),(0,o.BX)(l.G,{css:b.section,children:[(0,o.tZ)(c.xv,{multiline:!1,children:"Header Text"}),(0,o.tZ)(c.xv,{color:"dimmer",multiline:!1,children:"# Header"})]}),(0,o.BX)(l.G,{css:[u.l0.colWithGap(8)],children:[(0,o.tZ)(c.xv,{multiline:!1,children:"Code Blocks"}),(0,o.BX)(c.xv,{color:"dimmer",multiline:!1,children:["```",(0,o.tZ)("br",{}),"this is for large, multiline code blocks",(0,o.tZ)("br",{}),"```"]})]}),(0,o.BX)(l.G,{css:[u.l0.colWithGap(8)],children:[(0,o.tZ)(c.xv,{multiline:!1,children:"Inline Code"}),(0,o.tZ)(c.xv,{color:"dimmer",multiline:!1,children:"`this is for code in the middle of sentences`"})]}),(0,o.BX)(l.G,{css:[u.l0.colWithGap(8)],children:[(0,o.tZ)(c.xv,{multiline:!1,children:"Horizontal Rules"}),(0,o.tZ)(c.xv,{color:"dimmer",multiline:!1,children:"***"})]})]})})}var x=l.K.form;function k(e){return 0===e.trim().length?{message:"You cannot leave this empty."}:e.length>100?{message:"The title should not be longer than ".concat(100," characters.")}:void 0}function C(e){return 0===e.trim().length?{message:"You cannot leave this empty."}:e.length>5e3?{message:"The description should not be longer than ".concat(5e3," characters.")}:void 0}function S(e){var n,t,Z=e.repl,b=e.source,S=e.onDone,T=(0,f.H)(),E=T("titleIdInput"),R=T("descriptionIdInput"),I=(0,h.Y)("",k),G=(0,h.Y)("",C),D=(0,m.O)();return(0,o.BX)(x,{onSubmit:function(){var e=(0,r.Z)((function(e){return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return e.preventDefault(),I.validate()||G.validate()?[2]:[4,D.publish({input:{replId:Z.id,title:I.value,body:G.value}})];case 1:return n.sent().error||((0,g.j)(g.U3.UPDATE_SHARED,{source:b,replType:Z.publishedAs===p.O2.Template?"template_repl":"regular_repl"}),S()),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),css:[u.l0.colWithGap(16)],children:[(0,o.tZ)(c.h4,{level:1,variant:"headerDefault",children:"Add an update"}),(0,o.BX)(c.xv,{multiline:!1,children:["Explain what has changed about this"," ",Z.publishedAs===p.O2.Template?"Template":"Repl","."]}),(0,o.BX)(l.G,{css:u.l0.colWithGap(8),children:[(0,o.BX)(l.G,{css:u.l0.colWithGap(4),children:[(0,o.tZ)("label",{css:u.l0.color.foregroundDimmer,htmlFor:E,children:"Title"}),(0,o.tZ)(a.II,{id:E,onChange:function(e){I.setValue(e.target.value)},disabled:D.loading,placeholder:"Give your post a title"})]}),I.error?(0,o.tZ)(d.E,{icon:(0,o.tZ)(v.Z,{}),text:null===(n=I.error)||void 0===n?void 0:n.message,colorway:"negative"}):null]}),(0,o.BX)(l.G,{css:u.l0.colWithGap(8),children:[(0,o.BX)(l.G,{css:u.l0.colWithGap(4),children:[(0,o.tZ)("label",{css:u.l0.color.foregroundDimmer,htmlFor:R,children:"Description"}),(0,o.tZ)(a.B,{id:R,onChange:function(e){G.setValue(e.target.value)},css:[u.l0.width("100%"),{minHeight:u.TV.space128,maxHeight:u.TV.space256,resize:"vertical",lineHeight:u.TV.lineHeightDefault}],disabled:D.loading,placeholder:"Write something about this post"})]}),G.error?(0,o.tZ)(d.E,{icon:(0,o.tZ)(v.Z,{}),text:null===(t=G.error)||void 0===t?void 0:t.message,colorway:"negative"}):null]}),(0,o.tZ)(w,{header:"Style your description with Markdown"}),D.error?(0,o.tZ)(d.E,{icon:(0,o.tZ)(v.Z,{}),colorway:"negative",text:D.error}):null,(0,o.tZ)(s.zx,{text:D.loading?"Sharing update...":"Share update",type:"submit",colorway:"primary",disabled:Boolean(D.loading||I.error||G.error),css:{alignSelf:"end"},iconLeft:(0,o.tZ)(y.Z,{})})]})}},35207:function(e,n,t){t.d(n,{O:function(){return v}});var r=t(57135),i=t(2272),o=t(96583),a=t(72006),l=t(43119),c=t(71440),u=t(90024),s=t(50216);function d(){var e=(0,l.Z)(["\n  mutation PublishReplCreatePost($input: CreateReplPost2Input!) {\n    createReplPost2(input: $input) {\n      ... on Post {\n        id\n        repl {\n          id\n          ...PublishReplData\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}var f={},p=(0,c.Ps)(d(),u.FW);function h(e){var n,t,r,i,o,a,l;return e.error?e.error.message||"Something went wrong publishing your Repl":"NotFoundError"===(null===(n=e.data)||void 0===n||null===(t=n.createReplPost2)||void 0===t?void 0:t.__typename)||"UnauthorizedError"===(null===(r=e.data)||void 0===r||null===(i=r.createReplPost2)||void 0===i?void 0:i.__typename)||"UserError"===(null===(o=e.data)||void 0===o||null===(a=o.createReplPost2)||void 0===a?void 0:a.__typename)?e.data.createReplPost2.message:(null===(l=e.data)||void 0===l?void 0:l.createReplPost2)&&"Post"!==e.data.createReplPost2.__typename?"Something went wrong publishing your Repl":void 0}function v(){var e=(0,i.Z)(function(e){var n=(0,a.Z)({},f,e);return s.D(p,n)}(),2),n=e[0],t=e[1],l=function(){var e=(0,r.Z)((function(e){var r,i;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:if(r=e.input,t.loading)return[2,{data:null,error:null}];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,n({variables:{input:r}})];case 2:return[2,{data:(i=o.sent()).data,error:h(i)}];case 3:return o.sent(),[2,{data:null,error:"Something went wrong publishing your Repl"}];case 4:return[2]}}))}));return function(n){return e.apply(this,arguments)}}();return{publish:l,data:t.data,loading:t.loading,error:h(t)}}},38453:function(e,n,t){t.d(n,{Z:function(){return p},_:function(){return m}});var r=t(2272),i=t(74985),o=t(48306),a=t.n(o),l=t(50959),c=t(19065),u=t(35301),s=t(66482),d=t(27522),f=t(39541);function p(e){var n=(0,r.Z)(l.useState(!1),2),t=n[0],o=n[1],a=[],s=[];if(e.variables.length>0){var f=e.variables[0].parentVariableReference,p=!0,h=!1,v=void 0;try{for(var g,y=e.variables[Symbol.iterator]();!(p=(g=y.next()).done);p=!0){var Z=g.value;Z.parentVariableReference===f?a.push(Z):s.push(Z)}}catch(b){h=!0,v=b}finally{try{p||null==y.return||y.return()}finally{if(h)throw v}}}return(0,i.BX)(i.HY,{children:[(0,i.tZ)(c.Z,{truncate:!0,level:5,children:"Variables"}),(0,i.BX)(u.gC,{align:"stretch",constrainWidth:!0,children:[a.map((function(n){return(0,i.tZ)(m,{depth:0,variable:n,client:e.client},n.parentVariableReference+"/"+n.name)})),s.length>0&&(0,i.BX)(i.HY,{children:[(0,i.BX)(d.Z,{filled:!1,border:!1,onClick:function(){return o((function(e){return!e}))},children:["See ",t?"Less":"More"]}),t&&s.map((function(n){return(0,i.tZ)(m,{depth:0,variable:n,client:e.client},n.parentVariableReference+"/"+n.name)}))]})]})]})}function h(e){var n=e.variable,t=e.expanded;return n.variablesReference>0?(0,i.tZ)("div",{css:[f.l0.transition.snappy,{transform:"rotate(".concat(t?0:-90,"deg)")}],children:(0,i.tZ)(s.Z,{})}):null}function v(e){var n=e.expanded,t=e.depth,r=e.variable;return 0===t&&!("parentVariableReference"in r)?(0,i.tZ)(h,{expanded:n,variable:r}):(0,i.tZ)("div",{css:[f.l0.flex.grow(0),f.l0.flex.shrink(0),f.l0.width(f.TV.space16),f.l0.display.flex,f.l0.align.center,f.l0.justify.end],children:(0,i.tZ)(h,{expanded:n,variable:r})})}function m(e){var n=e.depth,t=e.variable,o=e.client,c=(0,r.Z)(l.useState(!1),2),s=c[0],d=c[1],f=(0,r.Z)(l.useState([]),2),p=f[0],h=f[1];return l.useEffect((function(){s&&o.fetchVariables(t.variablesReference).then((function(e){return h(e)}),(function(){return d(!1)}))}),[s,o,t.variablesReference]),(0,i.BX)(i.HY,{children:[(0,i.BX)("div",{onClick:function(){t.variablesReference>0&&d((function(e){return!e}))},className:a().dynamic([["d2db4fbc08fcf9b",[n]]])+" variable",children:[(0,i.tZ)(v,{expanded:s,variable:t,depth:n}),(0,i.BX)("div",{className:a().dynamic([["d2db4fbc08fcf9b",[n]]])+" label",children:[t.name,t.type?(0,i.BX)("span",{className:a().dynamic([["d2db4fbc08fcf9b",[n]]])+" type",children:[" ",t.type]}):null,""!==t.value&&": "]}),(0,i.tZ)("div",{className:a().dynamic([["d2db4fbc08fcf9b",[n]]])+" label value",children:(0,i.tZ)("pre",{className:a().dynamic([["d2db4fbc08fcf9b",[n]]]),children:t.value})})]}),s?(0,i.tZ)(u.gC,{align:"stretch",constrainWidth:!0,children:p.map((function(e){return(0,i.tZ)(m,{depth:n+1,variable:e,client:o},"parentVariableReference"in e?e.parentVariableReference+"/"+e.name:e.name)}))}):null,(0,i.tZ)(a(),{id:"d2db4fbc08fcf9b",dynamic:[n],children:".variable.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;max-width:100%;height:var(--space-32);min-height:var(--space-32);cursor:pointer;color:var(--foreground-dimmer);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);font-size:var(--font-size-default);padding-left:-webkit-calc(".concat(n," * var(--space-16));padding-left:-moz-calc(").concat(n," * var(--space-16));padding-left:calc(").concat(n," * var(--space-16));font-family:var(--font-family-code)}.variable.__jsx-style-dynamic-selector:hover{background-color:var(--background-higher);color:var(--foreground-default)}.label.__jsx-style-dynamic-selector{font-size:var(--font-size-default);padding-left:var(--space-8);padding-right:var(--space-8);overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap;-webkit-box-flex:1;-webkit-flex:1 0 auto;-moz-box-flex:1;-ms-flex:1 0 auto;flex:1 0 auto}.type.__jsx-style-dynamic-selector{opacity:.5}.value.__jsx-style-dynamic-selector{text-align:right;-webkit-flex-shrink:1;-ms-flex-negative:1;flex-shrink:1}")})]})}},49770:function(e,n,t){t.d(n,{KB:function(){return Ht},gC:function(){return Sn},T0:function(){return pn},Xo:function(){return Gi},CC:function(){return bi},ex:function(){return Ii},uD:function(){return Pi},_F:function(){return _i},DR:function(){return ki},FQ:function(){return ho},N8:function(){return Hi},lY:function(){return Ro},ii:function(){return so},lz:function(){return ci},Z0:function(){return Ui},kr:function(){return To},m$:function(){return Ri},x:function(){return oi},Gt:function(){return vi},nC:function(){return No},Ar:function(){return ui},nG:function(){return hi},k:function(){return Bo},rU:function(){return pi},oL:function(){return Po},TO:function(){return Xi},BN:function(){return yo},Eh:function(){return co},LR:function(){return eo},cT:function(){return Ni},o3:function(){return Ji},cr:function(){return Di},Jy:function(){return to},rX:function(){return Bi},Yg:function(){return xi},Un:function(){return So},xs:function(){return ri},x7:function(){return ai},Lo:function(){return Ki},je:function(){return Ci},hx:function(){return io},e$:function(){return Si},JW:function(){return ao},km:function(){return uo},CA:function(){return ji},Vu:function(){return di},Ge:function(){return qi},ec:function(){return si},s7:function(){return Oi},qg:function(){return ti},qV:function(){return oo},R5:function(){return mo},q6:function(){return zi},FZ:function(){return go},N2:function(){return fi},L0:function(){return _o},V5:function(){return Do},ZW:function(){return yi},ts:function(){return gi},HW:function(){return Zi},zs:function(){return lo},Kt:function(){return Fi},A:function(){return Mi},lI:function(){return Zo},Fg:function(){return no},Fh:function(){return po},cu:function(){return vo},n7:function(){return Ti},ze:function(){return Yi},TN:function(){return mi},Av:function(){return Ei},VD:function(){return Li},ne:function(){return li},eM:function(){return Qi},Id:function(){return Go},y8:function(){return ro},$x:function(){return Co},yR:function(){return ko},Ap:function(){return Xo},$P:function(){return Lo},Bd:function(){return bo},Hb:function(){return fo},OO:function(){return $i},H7:function(){return wi},gQ:function(){return xo},MG:function(){return Io},Z9:function(){return ii},HM:function(){return Ai},MI:function(){return Gt}});var r=t(2272),i=t(18171),o=t(86763),a=t.n(o),l=t(91398),c=t(74985),u=t(50959),s=t(92683),d=t(82325),f=t(13525),p=t(92674),h=t.n(p),v=t(92508);function m(e){if("number"!==typeof e)throw new Error("Expected number")}function g(e){if("string"!==typeof e)throw new Error("Expected string")}function y(e){if(g(e.type),m(e.percent),"paneGroup"!==e.type){if("split"===e.type)return function(e){if("boolean"!==typeof e)throw new Error("Expected boolean")}(e.stacked),function(e){if(!Array.isArray(e.children))throw new Error("Expected children")}(e),void e.children.forEach(y);throw new Error("Invalid pane type: "+e.type)}if(g(e.id),!Array.isArray(e.panes))throw new Error("Expected panes array");e.panes.map(g)}function Z(e,n){if(!Array.isArray(e.floating))throw new Error("Expected floating");e.floating.forEach((function(e){if(g(e.id),"floatingPaneGroup"!==e.type)throw new Error("Expected floatingPaneGroup type");if(!Array.isArray(e.panes))throw new Error("Expected panes array");!function(e){[e.x,e.y,e.width,e.height].forEach(m)}(e.rect),e.panes.forEach((function(e){if(g(e),!n.includes(e))throw new Error("Unrecognized id")}))})),e.tiling&&y(e.tiling)}function b(e){if("object"!==typeof e)throw new Error("Expected object");if(!v.v[e.type])throw new Error("Expected valid pane, got: ".concat(e.type))}function w(e){!function(e){if("object"!==typeof e)throw new Error("Expected object");Object.values(e).map(b)}(e.data),Z(e.layout,Object.keys(e.data)),void 0!==e.sidebarPercent&&function(e){if("number"!==typeof e)throw new Error("Expected number");if(e<0)throw new Error("Expected positive number");if(e>100)throw new Error("Expected number less than 100")}(e.sidebarPercent)}var x=t(92153),k=t(55749),C=t(9970),S=t(19692);function T(e,n){var t=(0,k.Z)(n),r=t[0],i=t.slice(1);if("floating"===r){if(!e.floating)return null;var o=i[0];if("number"!==typeof o)throw new Error("Expected floatingIndex");var a=e.floating[o];if(!a)throw new Error("Expected paneGroup");return a}if("tiling"!==r)throw new Error("Expected tiling path");var l=e.tiling;if(!l)return null;var c=l,u=i.length,s=0,d=!0,f=!1,p=void 0;try{for(var h,v=i[Symbol.iterator]();!(d=(h=v.next()).done);d=!0){var m=h.value;if("paneGroup"===c.type)break;if("number"!==typeof m)throw new Error("Expected number");s++,c=c.children[m]}}catch(g){f=!0,p=g}finally{try{d||null==v.return||v.return()}finally{if(f)throw p}}return u===s?c:null}function E(e,n){var t=e.floating.find((function(e){return e.panes.includes(n)}));if(t)return{index:t.panes.indexOf(n),paneGroup:t,paneGroupPath:["floating",e.floating.indexOf(t)],floating:!0};var r=e.tiling;if(!r)return null;for(var i=[{paneGroupPath:["tiling"],parent:null,grandparent:null,node:r}];i.length;){var o=i.shift();if(!o)throw new Error("Expected item");if("split"===o.node.type){var a=!0,l=!1,c=void 0;try{for(var u,s=o.node.children[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var d=u.value;i.push({grandparent:o.parent,parent:o.node,node:d,paneGroupPath:(0,C.Z)(o.paneGroupPath).concat([o.node.children.indexOf(d)])})}}catch(f){l=!0,c=f}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}}else if(o.node.panes.includes(n))return{paneGroupPath:o.paneGroupPath,paneGroup:o.node,parent:o.parent,grandparent:o.grandparent,index:o.node.panes.indexOf(n),floating:!1}}return null}function R(e,n,t){if("paneGroup"===e.type)return{paneGroup:e,path:t};var r=0,i=e.children.length-1;return"topRight"!==n||e.stacked?("bottomRight"===n||"bottomLeft"===n&&e.stacked)&&(r=i):r=i,R(e.children[r],n,(0,C.Z)(t).concat([r]))}function I(e,n){var t=e.tiling;return t?R(t,n,["tiling"]):null}function G(e,n){var t=e.tiling,r=e.floating,i=(0,C.Z)(r);for(t&&i.push(t);i.length;){var o,a=i.shift();if(!a)throw new Error("Expected item");if("split"===a.type)(o=i).push.apply(o,(0,C.Z)(a.children));else if(a.id===n)return a}return null}function D(e,n){var t=function(){var e=o.shift();if(!e)throw new Error("Expected item");var t=(0,r.Z)(e,2),i=t[0],a=t[1];return"split"!==i.type?"continue":i.children.some((function(e){return"paneGroup"===e.type&&e.id===n}))?{v:{node:i,path:a}}:void i.children.forEach((function(e,n){o.push([e,(0,C.Z)(a).concat([n])])}))},i=e.tiling;if(null===i)return null;for(var o=[[i,["tiling"]]];o.length;){var a=t();if("object"===(0,S.Z)(a))return a.v}return null}function _(e,n){var t=E(e,n);if("paneGroup"===(null===t||void 0===t?void 0:t.paneGroup.type)){var r=D(e,t.paneGroup.id);if(r){var i=r.node.children,o=i.indexOf(t.paneGroup);return o<i.length-1?i[o+1]:i[o-1]}}return null}function P(e){if(e.length<1)throw new Error("Expected a path with a parent");return e.slice(0,-1)}function B(e){return"floatingPaneGroup"!==e.type}function A(e,n){e.panes.splice(n,1),0!==e.activeIndex&&(n>e.activeIndex||(e.activeIndex=e.activeIndex-1))}function U(e,n){var t=E(e,n);if(!t)throw new Error("Expected pane");if(t.floating)if(1===t.paneGroup.panes.length){var r=t.paneGroupPath[1];if("number"!==typeof r)throw new Error("Expected floatingIndex");L(e,["floating",r])}else A(t.paneGroup,t.index);else{var i=t.paneGroup,o=t.paneGroupPath,a=t.parent;if(!i)throw new Error("paneGroup eith paneId not found: "+n);var l=i.panes.indexOf(n);if(-1===l)throw new Error("Expected paneIndex");a||1!==i.panes.length?i.panes.length>1?A(i,l):L(e,o):e.tiling=null}}function L(e,n){var t=(0,k.Z)(n),i=t[0],o=t.slice(1);if("tiling"!==i||0!==o.length)if("floating"!==i||0!==o.length){var a=T(e,n);if(!a)throw new Error("Expected node");if("floatingPaneGroup"!==a.type){var l=P(n),c=T(e,l);if("split"!==(null===c||void 0===c?void 0:c.type))throw new Error("Expected split");var u=c.children.indexOf(a);if(-1===u)throw new Error("Expected paneGroupIndex");var s=c.children;if(s.splice(u,1),s.length>1){var d=100/s.reduce((function(e,n){return e+n.percent}),0);s.forEach((function(e){e.percent=e.percent*d}))}else{var f=(0,r.Z)(s,1)[0],p=l.length>1?T(e,P(l)):null;if(!p)return f.percent=100,void(e.tiling=f);if("split"!==p.type)throw new Error("Expected split");var h=p.children.indexOf(c);if(-1===h)throw new Error("Expected parentIndex");f.percent=c.percent,p.children[h]=f}}else{var v=e.floating.indexOf(a);if(-1===v)throw new Error("Expected paneGroupIndex");e.floating.splice(v,1)}}else e.floating=[];else e.tiling=null}var X=t(30504);function N(e){var n=e.isStacked,t=e.isHTML,r=e.isExtension,i=e.codeEditorPath,o=void 0===i?"":i,a={codeEditor:{paneId:h()(),pane:{type:"codeEditor",data:{path:o}}},output:{paneId:h()(),pane:{type:t?"webview":"runnerOutput"}},shell:{paneId:h()(),pane:{type:"shell"}},ghostwriter:{paneId:h()(),pane:{type:"ghostwriterChat"}},extensionDevtools:{paneId:h()(),pane:{type:"extensionDevtools"}},extensionDocs:{paneId:h()(),pane:{type:"docs",data:{url:X.TT.EXTENSIONS}}}},l={};Object.values(a).forEach((function(e){var n=e.paneId,t=e.pane;l[n]=t}));var c=function(e){var n=e.codeEditorId,t=e.outputId,r=e.shellId,i=e.extensionDevtoolsId,o=e.extensionDocsId,a=e.isStacked,l=e.isExtension,c=a?{type:"split",stacked:!0,percent:100,children:[{id:h()(),percent:60,type:"paneGroup",panes:[n],activeIndex:0},{id:h()(),percent:40,type:"paneGroup",panes:[t,r],activeIndex:0}]}:{type:"split",stacked:!1,percent:100,children:[{id:h()(),percent:55,type:"paneGroup",panes:[n],activeIndex:0},{id:h()(),percent:45,type:"paneGroup",panes:[t,r],activeIndex:0}]};return l&&(c=a?{type:"split",stacked:!0,percent:100,children:[{id:h()(),percent:40,type:"paneGroup",panes:[n],activeIndex:0},{id:h()(),percent:60,type:"paneGroup",panes:[i,o,r],activeIndex:0}]}:{type:"split",stacked:!1,percent:100,children:[{id:h()(),percent:55,type:"paneGroup",panes:[n],activeIndex:0},{id:h()(),percent:45,type:"paneGroup",panes:[i,o,r],activeIndex:0}]}),{floating:[],tiling:c}}({codeEditorId:a.codeEditor.paneId,outputId:a.output.paneId,shellId:a.shell.paneId,extensionDevtoolsId:a.extensionDevtools.paneId,extensionDocsId:a.extensionDocs.paneId,isStacked:n,isExtension:r});return{layout:c,data:l}}function M(e){var n,t=e.initialLayoutState,i=e.codeEditorPath,o=e.isHTML,a=e.isStacked,l=e.isExtension,c=t?function(e){try{w(e)}catch(n){return null}return e}(t):null,u=null!==(n=null===c||void 0===c?void 0:c.sidebarPercent)&&void 0!==n?n:15;if(c){var s=(0,x.ZP)(c,(function(e){var n=!0,t=!1,i=void 0;try{for(var o,a=Object.entries(e.data)[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=(0,r.Z)(o.value,2),c=l[0],u=l[1];("commands"===u.type||"codeEditor"===u.type&&!u.data.path)&&(delete e.data[c],U(e.layout,c))}}catch(s){t=!0,i=s}finally{try{n||null==a.return||a.return()}finally{if(t)throw i}}}));return{data:s.data,layout:s.layout,type:"saved",sidebarPercent:u}}var d=N({isStacked:a,isHTML:o,isExtension:l,codeEditorPath:i});return{data:d.data,layout:d.layout,type:"default",sidebarPercent:u}}var F=t(81202),O=t.n(F),W=t(72006);var H={top:0,bottom:0,left:0,right:0};function V(e,n){var t=n.size,r=n.gap,i=n.headerHeight,o=n.inset,a=void 0===o?H:o,l=[],c=[],u=[],s=[],d=null;function f(n,t,o,a){var l=t.children.indexOf(n),p=t.children.length,h=t.stacked?o.height:o.width;var v=function(){var e=o.width,a=o.height,l=n.percent/100;return t.stacked?a=(h-(r*(p-1)+i*p))*l+i:e=(h-r*(p-1))*l,{width:e,height:a}}(),m=v.width,g=v.height,y=function(){var e=o.x,n=o.y;if(0===l)return{x:e,y:n};if(!d)throw new Error("Expected previousRect");return t.stacked?n=d.y+d.height+r:e=d.x+d.width+r,{x:e,y:n}}(),Z={x:y.x,y:y.y,height:g,width:m};if(d=Z,"paneGroup"===n.type){var b,w={x:Z.x,y:Z.y+i,width:Z.width,height:Z.height-i},x={x:w.x,y:w.y-i,width:w.width,height:i};s.push({id:n.id,rect:x,panes:n.panes,activeIndex:n.activeIndex,path:a}),(b=c).push.apply(b,(0,C.Z)(n.panes.map((function(e,t){return{paneId:e,rect:w,active:t===n.activeIndex}}))))}else n.children.forEach((function(e,t){return f(e,n,Z,(0,C.Z)(a).concat([t]))}));if(0!==l){var k={x:Z.x-(t.stacked?0:r),y:Z.y-(t.stacked?r:0),width:t.stacked?Z.width:r,height:t.stacked?r:Z.height},S=P(a),E=(0,C.Z)(S).concat([l-1]),R=T(e,E);if(!R||!B(R))throw new Error("Expected leftNode");var I=void 0;0===R.percent?I="left":0===n.percent&&(I="right"),u.push({parentPath:S,leftPath:E,rightPath:a,stacked:t.stacked,rect:k,snapped:I})}}var p={x:a.left,y:a.top,width:t.width-(a.left+a.right),height:t.height-(a.top+a.bottom)},h=e.tiling;if("paneGroup"===(null===h||void 0===h?void 0:h.type)){var v,m={x:p.x,y:p.y+i,width:p.width,height:p.height-i},g={x:m.x,y:m.y-i,width:m.width,height:i};s.push({id:h.id,rect:g,panes:h.panes,activeIndex:h.activeIndex,path:["tiling"]}),(v=c).push.apply(v,(0,C.Z)(h.panes.map((function(e,n){return{paneId:e,rect:m,active:n===h.activeIndex}}))))}else h&&h.children.forEach((function(e,n){return f(e,h,p,["tiling",n])}));var y=a.left+49,Z={x:p.x-y,y:p.y,width:p.width+y,height:p.height};return e.floating.forEach((function(e,n){var t,r=function(e,n){var t=n.inside,r=(0,W.Z)({},e);return r.x<t.x?(r.x=t.x,r.width=Math.min(r.width,t.width)):r.x+r.width>=t.x+t.width?(r.x=Math.max(t.x,t.x+t.width-r.width),r.width=Math.min(r.width,t.width)):r.width=Math.min(r.width,t.width),r.y<t.y?(r.y=t.y,r.height=Math.min(r.height,t.height)):r.y+r.height>=t.y+t.height?(r.y=Math.max(t.y,t.y+t.height-r.height),r.height=Math.min(r.height,t.height)):r.height=Math.min(r.height,t.height),r}(e.rect,{inside:Z}),o={height:i,width:r.width,x:r.x,y:r.y},a={x:r.x,y:r.y+i,width:r.width,height:Math.max(r.height-i,0)};s.push({id:e.id,rect:o,panes:e.panes,activeIndex:e.activeIndex,path:["floating",n]}),(t=l).push.apply(t,(0,C.Z)(e.panes.map((function(n,t){return{paneId:n,rect:a,active:t===e.activeIndex}}))))})),{tiles:c,gutters:u,headers:s,floating:l}}var z=t(56581),j=(0,l.cn)([]),q=(0,l.cn)([]),$=(0,l.cn)([]),Y={x:0,y:0,width:0,height:0},K={type:"commands",data:{autoFocus:!1}};var Q,J=(0,z.xu)((function(e){return(0,l.cn)(function(e){return{paneId:e,type:"tile",rectAtom:(0,l.cn)((0,W.Z)({},Y)),data:(0,l.cn)((0,W.Z)({},K)),isHidden:!1,isCommitted:!1}}(e))})),ee=(0,l.cn)((function(e){return e(j).map((function(n){return e(J(n))}))})),ne=(0,l.cn)((function(e){return e($).map((function(n){return e(re(n))}))})),te=(0,z.xu)((function(e){return(0,l.cn)(function(e){return{handleId:e,rect:Y,stacked:!1,parentPath:["tiling"],leftPath:["tiling"],rightPath:["tiling"]}}(e))})),re=(0,z.xu)((function(e){return(0,l.cn)({id:e,rectAtom:(0,l.cn)((0,W.Z)({},Y)),panes:[],path:["tiling"],activeIndex:0})})),ie=(0,l.cn)((function(){return 36})),oe=(0,l.cn)({x:0,y:0,width:0,height:0}),ae=(0,l.cn)({width:0}),le=(0,l.cn)(null),ce=(0,l.cn)(null,(function(e,n,t){t!==e(le)&&n(le,t)})),ue=(0,l.cn)(null,(function(e,n,t){var r=J(t);e(r).isCommitted||n(r,(function(e){return(0,x.ZP)(e,(function(e){e.isCommitted=!0}))}))})),se=(0,l.cn)((function(e){var n=e(le);if(!n)return null;var t=e(J(n)),r=e(t.data);return(0,v.Ur)(r)&&r.data.path||null})),de=((0,l.cn)(null),(0,l.cn)(!0)),fe=(0,l.cn)({tiling:null,floating:[]}),pe=(0,l.cn)((function(e){return e(ee).filter((function(n){return(0,v.Ur)(e(n.data))}))})),he=(0,l.cn)((function(e){var n;return null!==(Q=null===(n=e(pe).find((function(e){return!e.isCommitted})))||void 0===n?void 0:n.paneId)&&void 0!==Q?Q:null})),ve=(0,l.cn)((function(e){return e(pe).map((function(n){return{paneId:n.paneId,filePath:e(n.data).data.path}})).filter((function(e){return e.filePath&&e.filePath.length>0}))})),me=(0,l.cn)((function(e){var n=[],t=!0,r=!1,i=void 0;try{for(var o,a=e(ee)[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;n.push([l.paneId,e(l.data)])}}catch(c){r=!0,i=c}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n})),ge=(0,l.cn)((function(e){var n=e(oe);return Boolean(n.width&&n.height)})),ye=(0,l.cn)(null),Ze=(0,l.cn)((function(e){var n=e(le);if(!n)return null;var t=e(J(n)).rectAtom,r=e(t),i=e(ie);return{x:r.x,y:r.y-i,width:r.width,height:r.height+i}})),be=(0,l.cn)(null,(function(e,n,t){var r=e(pe).find((function(n){return t===(0,v.DQ)(e(n.data))}));r&&(n(ce,r.paneId),n(ue,r.paneId))})),we=(0,l.cn)(null,(function(e,n,t){n(e(J(t.paneId)).data,t.pane),t.makeActive&&n(ce,t.paneId),t.commit&&n(ue,t.paneId)})),xe=(0,l.cn)(null);function ke(e,n){var t=e.x,r=e.y;return t>n.x&&t<n.x+n.width&&r>n.y&&r<n.y+n.height}function Ce(e,n){var t=function(e){var n=e.rect,t=e.point,r=n.height>n.width?n.width/n.height:1,i=n.width>n.height?n.height/n.width:1,o=(t.x-n.x)*i,a=(n.x+n.width-t.x)*i,l=(t.y-n.y)*r,c=(n.y+n.height-t.y)*r,u=Math.min(o,a,l,c);return u===o?"left":u===a?"right":u===l?"top":"bottom"}({point:e,rect:n}),r={x:n.x,y:n.y,width:n.width,height:n.height},i="below";return"top"===t?(r.height=n.height/2,i="above"):"bottom"===t?(r.height=n.height/2,r.y=n.y+n.height/2,i="below"):"left"===t?(r.width=n.width/2,r.x=n.x,i="leftOf"):"right"===t&&(r.width=n.width/2,r.x=n.x+n.width/2,i="rightOf"),{placement:i,rect:r}}function Se(e){return"handle:"+e.leftPath.join(":")}function Te(e){return(0,i.Z)((function(){return(0,z.kv)(e,(function(e){return{width:e.width,height:e.height}}),(function(e,n){return Boolean(e.height===n.height&&e.width===n.width)}))}),[e])}function Ee(e){return(0,i.Z)((function(){return(0,z.kv)(e,(function(e){return{x:e.x,y:e.y}}),(function(e,n){return Boolean(e.x===n.x&&e.y===n.y)}))}),[e])}var Re=t(44841),Ie=(0,l.cn)((function(e){var n=e(ie),t=e(ae),r=e(oe);return{headerHeight:n,inset:{top:0,bottom:8,left:8+t.width,right:8},gap:8,size:{width:r.width,height:r.height}}})),Ge=(0,l.cn)(null,(function(e,n,t){n(oe,t),n(_e,e(fe))}));function De(e,n){return O()(e,n)}var _e=(0,l.cn)(null,(function(e,n,t){var r=function(t){var r=t.paneId,i=t.rect,o=t.type,a=t.isHidden;l.delete(r);var c=J(r),u=e(c);De(e(u.rectAtom),i)||n(u.rectAtom,i);var s=(0,x.ZP)(u,(function(e){e.paneId=r,e.type=o,e.isHidden=a}));De(u,s)||n(c,s)},i=e(j),o=e(q),a=e($),l=new Set(i),c=new Set(o),u=new Set(a),s=V(t,e(Ie)),d=s.tiles,f=s.floating,p=s.gutters,h=s.headers,v=p.map(Se);De(o,v)||n(q,v);var m=(0,C.Z)(d).concat((0,C.Z)(f)).map((function(e){return e.paneId}));De(i,m)||n(j,(0,Re.Z)(m,{existing:i,getKey:function(e){return e}}));var g=[];h.forEach((function(t){u.delete(t.id);var r=re(t.id),i=e(r);g.push(t.id),De(e(i.rectAtom),t.rect)||n(i.rectAtom,t.rect);var o=(0,x.ZP)(i,(function(e){e.panes=t.panes,e.activeIndex=t.activeIndex,e.path=t.path}));De(i,o)||n(r,o)})),De(a,g)||n($,g),d.forEach((function(e){var n=e.paneId,t=e.rect,i=e.active;r({paneId:n,rect:t,isHidden:!i,type:"tile"})})),f.forEach((function(e){var n=e.paneId,t=e.rect,i=e.active;r({paneId:n,rect:t,isHidden:!i,type:"floating"})})),p.forEach((function(t){var r={handleId:Se(t),rect:t.rect,parentPath:t.parentPath,leftPath:t.leftPath,rightPath:t.rightPath,stacked:t.stacked,snapped:t.snapped};c.delete(r.handleId);var i=te(r.handleId);De(e(i),r)||n(i,r)})),l.forEach(J.remove),c.forEach(te.remove),u.forEach(re.remove);var y=e(le);y&&l.has(y)&&n(le,null),n(fe,t)})),Pe=t(57135),Be=t(96583),Ae=t(85234),Ue=t.n(Ae),Le=t(43119),Xe=t(71440),Ne=t(50216);function Me(){var e=(0,Le.Z)(["\n  mutation SaveReplLayoutState($input: SetReplLayoutStateInput!) {\n    setReplLayoutState(input: $input) {\n      ... on Repl {\n        id\n        layoutState\n      }\n    }\n  }\n"]);return Me=function(){return e},e}var Fe={},Oe=(0,Xe.Ps)(Me());var We=t(12379);function He(e,n){var t=n.leftPath,r=n.percent,i=n.snapPercent,o=void 0===i?0:i,a=T(e,t);if(!a||!B(a))throw new Error("Expected leftNode");var l=T(e,P(t));if("split"!==(null===l||void 0===l?void 0:l.type))throw new Error("Expected splitNode");var c=l.children.indexOf(a);if(-1===c)throw new Error("Expected leftNodeIndex");var u=c+1,s=l.children[u];if(!s)throw new Error("Expected rightNode");if(r<=o){if(a.percent=0,r<0&&c>0)for(var d=Math.abs(r),f=c-1;d>0;){var p=l.children[f];if(p.percent>d){p.percent-=d;break}if(d-=p.percent,p.percent=0,0===f)break;f--}var h=l.children.reduce((function(e,n){return n===s?e:e+n.percent}),0);s.percent=100-h}else{var v=a.percent+s.percent,m=l.children.slice(c).reduce((function(e,n){return e+n.percent}),0);if(r>v-o){if(a.percent=Math.min(m,Math.max(v,r)),s.percent=0,r>v&&u<l.children.length-1)for(var g=r-v,y=u+1;g>0;){var Z=l.children[y];if(Z.percent>g){Z.percent-=g;break}if(g-=Z.percent,Z.percent=0,y===l.children.length-1)break;y++}}else{var b=a.percent-r;s.percent=s.percent+b,a.percent=r}}}function Ve(e){var n=e.layout,t=e.splitPath,r=e.tilingOptions,i=function(e,n){var t=n.splitPath,r=T(e,t);if(!r||"split"!==r.type)throw new Error("Expected split node");for(var i=100,o=P(t);o.length;){var a=T(e,o);if(!a)break;o=P(o),"split"===a.type&&a.stacked===r.stacked&&(i*=a.percent/100)}return i}(n,{splitPath:t}),o=T(n,t);if("split"!==(null===o||void 0===o?void 0:o.type))throw new Error("Expected split node");var a=r.size,l=r.gap,c=r.headerHeight,u=r.inset,s=void 0===u?{top:0,bottom:0,left:0,right:0}:u,d=o.children.length,f=o.stacked?l*(d-1)+c*d:l*(d-1);return i/100*((o.stacked?a.height-(s.top+s.bottom):a.width-(s.left+s.right))-f)}var ze=(0,l.cn)(null),je=(0,l.cn)(null,(function(e,n,t){if("end"!==t.type)if("update"!==t.type){var r=e(fe),i=t.stacked?window.innerHeight:window.innerWidth,o=T(r,t.leftPath);if(!o||!B(o)){var a=new Error("Expected left node");throw n(ye,{error:a,tags:{layoutstate:!0},origin:"Layout: state/resizeTiling"}),a}var l=P(t.leftPath),c=o.percent,u=30/i*100,s=null;try{s=Ve({splitPath:l,layout:r,tilingOptions:e(Ie)})}catch(w){throw n(ye,{error:w,tags:{layoutstate:!0},origin:"Layout: state/resizeTiling"}),w}if(null===s)throw new Error("Expected resizeDistance");n(ze,{stacked:t.stacked,leftPath:t.leftPath,startPercent:c,resizeDistance:s,snapPercent:u,initialLayout:r})}else{var d=e(ze);if(!d){var f=new Error("Expected tilingResize");throw n(ye,{error:f,tags:{layoutstate:!0},origin:"Layout: state/resizeTiling"}),f}var p=d.stacked,h=d.leftPath,v=d.startPercent,m=d.resizeDistance,g=d.initialLayout,y=d.snapPercent,Z=v+(p?t.moveDelta.y:t.moveDelta.x)/m*100,b=(0,x.ZP)(g,(function(e){He(e,{leftPath:h,percent:Z,snapPercent:y})}));n(_e,b)}else n(ze,null)}));function qe(e){return(0,i.Z)((function(){return te(e)}),[e])}function $e(e){var n=qe(e);return(0,i.Z)((function(){return(0,z.kv)(n,(function(e){return e.rect}))}),[n])}function Ye(e){return(0,i.Z)((function(){return(0,l.cn)((function(n){var t=n(ze);return!!t&&e===Se({leftPath:t.leftPath})}))}),[e])}function Ke(e){var n=qe(e);return(0,i.Z)((function(){return(0,z.kv)(n,(function(e){return e.stacked}))}),[n])}var Qe=(0,l.cn)(null,(function(e,n){0!==e(ae).width&&(n(ae,{width:0}),n(_e,e(fe)))})),Je=(0,l.cn)(null,(function(e,n){var t=e(ae).width>0?0:fn;n(ae,{width:t}),n(_e,e(fe))})),en=(0,l.cn)(null),nn=(0,l.cn)(null,(function(e,n){var t=e(ae);n(en,{sidebarWidthStart:t.width})})),tn=(0,l.cn)(null,(function(e,n,t){var r=t.deltaX,i=e(en);if(i){var o=e(oe),a=i.sidebarWidthStart+r;if((a=Math.min(Math.max(a,0),Math.min(o.width,un)))<pn&&!(r>0)){if(pn-a<sn)return;a=0}n(ae,{width:a}),n(_e,e(fe))}})),rn=(0,l.cn)(null,(function(e,n){if(e(en)){var t=e(ae);t.width<pn&&(n(ae,{width:0===t.width?0:pn}),n(_e,e(fe))),n(en,null)}})),on=(0,l.cn)((function(e){return Boolean(e(en))})),an=(0,l.cn)((function(e){return e(on)?{width:1,height:e(ln).height}:{width:2,height:24}})),ln=(0,l.cn)((function(e){var n=e(oe).height;return{x:e(ae).width,y:0,height:n-8,width:8}})),cn=(0,l.cn)((function(e){return e(ln).height})),un=600,sn=80,dn=(0,l.cn)((function(e){return e(ae).width})),fn=220,pn=180,hn=(0,l.cn)((function(e){return e(dn)>0}));var vn=(0,l.cn)((function(e){var n=e(oe);return function(e,n){var t=n.min,r=n.max;return Math.min(Math.max(t,e),r)}(e(dn)/n.width*100,{min:0,max:100})})),mn=(0,l.cn)((function(e){var n=e(fe),t={};e(ee).forEach((function(n){t[n.paneId]=e(n.data)}));var r=e(vn);return{layout:n,data:t,sidebarPercent:r}})),gn=(0,l.cn)(null),yn=(0,l.cn)(null),Zn=(0,l.cn)(null);function bn(e,n){return wn.apply(this,arguments)}function wn(){return wn=(0,Pe.Z)((function(e,n){var t,r;return(0,Be.__generator)(this,(function(i){switch(i.label){case 0:r=void 0,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,null===We.l||void 0===We.l?void 0:We.l.mutate({mutation:Oe,variables:{input:{replId:e,state:n}}})];case 2:return r=i.sent(),[3,4];case 3:return i.sent(),[2,{success:!1,retry:!0}];case 4:return"Repl"===(null===r||void 0===r||null===(t=r.data)||void 0===t?void 0:t.setReplLayoutState.__typename)?[2,{success:!0,retry:void 0}]:[2,{success:!1,retry:!1}]}}))})),wn.apply(this,arguments)}var xn=(0,l.cn)(null,function(){var e=(0,Pe.Z)((function(e,n,t){var r,i,o,a,l,c;return(0,Be.__generator)(this,(function(u){switch(u.label){case 0:return(r=e(yn))&&!r.retry||r&&Date.now()-r.timestamp<6e4?[2]:e(ge)?(i=e(mn),o=t.replId,a=e(gn),!t.force&&O()(a,i)?[2]:(l=Ue()(),n(Zn,l),[4,bn(o,i)])):[2];case 1:return c=u.sent(),e(Zn)!==l?[2]:(n(Zn,null),c.retry?(n(yn,{timestamp:Date.now(),retry:!0}),[2]):c.success?(n(gn,i),[2]):(n(yn,{timestamp:Date.now(),retry:!1}),[2]))}}))}));return function(n,t,r){return e.apply(this,arguments)}}()),kn=(0,l.cn)(null,(function(e,n,t){var i=t.data,o=t.layout,a=t.sidebarPercent,l=t.type;Object.entries(i).forEach((function(t){var i=(0,r.Z)(t,2),o=i[0],a=i[1],l=J(o);n(l,(0,x.ZP)(e(l),(function(e){e.isCommitted=!0}))),n(e(l).data,a)}));var c=window.innerWidth,u=Math.floor(a)>0?Math.min(c*(a/100),un):0;n(ae,{width:u>0?Math.max(fn,u):Math.max(0,u)}),n(_e,o),n(xe,l),n(gn,e(mn))})),Cn=(0,u.createContext)(null);function Sn(e){var n=e.children,t=e.initialLayoutState,r=void 0===t?null:t,i=e.isHTML,o=void 0!==i&&i,a=e.isStacked,s=void 0!==a&&a,d=e.isExtension,f=void 0!==d&&d,p=(0,u.useState)((function(){return function(e){var n=e.initialLayoutState,t=e.isHTML,r=e.isStacked,i=e.isExtension,o=(0,l.MT)();return o.set(kn,M({initialLayoutState:n,isHTML:t,isStacked:r,isExtension:i})),o}({initialLayoutState:r,isHTML:o,isStacked:s,isExtension:f})})),h=p[0];return(0,c.tZ)(Cn.Provider,{value:h,children:n})}function Tn(){var e=(0,u.useContext)(Cn);if(!e)throw new Error("Expected store in context");return e}function En(e){return(0,s.Dv)(e,{store:Tn()})}function Rn(e){return(0,f.b)(e,Tn())}var In=function(e){return(0,s.b9)(e,{store:Tn()})};function Gn(e){return(0,d.lV)((0,u.useCallback)((function(n){return n(e)}),[e]),{store:Tn()})}var Dn=(0,l.cn)(!1),_n=(0,l.cn)((function(e){return e(Dn)?e(le):null})),Pn=(0,l.cn)(null,(function(e,n,t){n(ce,t),n(Dn,!0)})),Bn=(0,l.cn)(null,(function(e,n,t){n(Dn,!0);var r=G(e(fe),t.paneGroupId);if(!r){var i=new Error("Expected paneGroup");throw n(ye,{error:i,tags:{layoutstate:!0},origin:"Layout: state/maximize/maximizePaneGroupAtom"}),i}var o=r.panes[r.activeIndex];if(!o){var a=new Error("Expected paneId");throw n(ye,{error:a,tags:{layoutstate:!0},origin:"Layout: state/maximize/maximizePaneGroupAtom"}),a}n(ce,o)})),An=(0,l.cn)(null,(function(e,n){n(Dn,!1)})),Un=(0,l.cn)(null,(function(e,n,t){e(_n)===t?n(An):n(Pn,t)})),Ln=(0,l.cn)(null,(function(e,n,t){var r=G(e(fe),t.paneGroupId);if(!r){var i=new Error("Expected paneGroup");throw n(ye,{error:i,tags:{layoutstate:!0},origin:"Layout: state/maximize/toggleMaximizePaneGroupAtom"}),i}var o=r.panes[r.activeIndex];if(!o){var a=new Error("Expected paneId");throw n(ye,{error:a,tags:{layoutstate:!0},origin:"Layout: state/maximize/toggleMaximizePaneGroupAtom"}),a}n(Un,o)})),Xn=(0,l.cn)((function(e){var n=e(oe);return{x:-n.x,y:-n.y,width:n.width+n.x,height:n.height+n.y}})),Nn=(0,l.cn)((function(e){var n=e(ie),t=e(Xn);return{x:t.x,y:t.y,width:t.width,height:n}})),Mn=(0,l.cn)((function(e){var n=e(ie),t=e(Xn);return{x:t.x,y:t.y+n,width:t.width,height:t.height-n}})),Fn=t(4561);function On(e,n){var t=void 0===n.activeIndex?0:n.activeIndex;if(n.isFloating)e.floating.push({id:n.id,type:"floatingPaneGroup",panes:n.panes,activeIndex:t,rect:n.rect});else{var r=null;if(Array.isArray(n.relativeTo))r=n.relativeTo;else{var i=E(e,n.relativeTo);if(!i)throw new Error("Expected pane");r=i.paneGroupPath}if(null===r)throw new Error("Expected relativeTo");if("tiling"!==r[0])throw new Error("Expected tiling path");var o=n.placement,a=n.panes,l=n.percent,c="above"===o||"below"===o,u="rightOf"===o||"below"===o;if(e.tiling||1!==r.length){if(!e.tiling)throw new Error("Expected tiling");var s=T(e,r);if(!s||!B(s))throw new Error("Expected tiled node");if(1!==r.length||"replace"!==o){if(1===r.length&&"paneGroup"===e.tiling.type){var d=[e.tiling];return e.tiling={type:"split",percent:100,stacked:c,children:d},void Wn({id:n.id,insertIndex:u?1:0,panes:a,children:d,percent:l,activeIndex:t})}if(1===r.length&&"split"===e.tiling.type){if(Boolean(e.tiling.stacked)===Boolean(c))return void Wn({id:n.id,panes:a,percent:l,activeIndex:t,insertIndex:u?e.tiling.children.length:0,children:e.tiling.children});var f={id:n.id,panes:a,type:"paneGroup",percent:void 0===l?50:l,activeIndex:t},p=u?[s,f]:[f,s];return s.percent=100-f.percent,void(e.tiling={type:"split",stacked:c,children:p,percent:100})}if(0===r.length)throw new Error("Expected relativeTo length");var h=T(e,P(r));if("split"!==(null===h||void 0===h?void 0:h.type))throw new Error("Expected split parent");if("replace"!==o)if(Boolean(h.stacked)!==Boolean(c))if(Boolean(h.stacked)===Boolean(c));else{var v={id:n.id,panes:a,type:"paneGroup",percent:void 0===l?50:l,activeIndex:t},m=u?[s,v]:[v,s],g=s.percent;s.percent=100-v.percent;var y=h.children.indexOf(s);h.children[y]={type:"split",stacked:c,children:m,percent:g}}else{var Z=h.children.indexOf(s);Wn({id:n.id,panes:a,percent:l,activeIndex:t,insertIndex:u?Z+1:Z,children:h.children})}else{var b=h.children.indexOf(s);h.children.splice(b,1,{id:n.id,panes:a,percent:s.percent,type:"paneGroup",activeIndex:t})}}else e.tiling={id:n.id,type:"paneGroup",percent:100,panes:a,activeIndex:t}}else e.tiling={id:n.id,type:"paneGroup",percent:100,panes:a,activeIndex:t}}}function Wn(e){var n=e.id,t=e.percent,r=e.children,i=e.panes,o=e.insertIndex,a=e.activeIndex;if(void 0===t){var l=r.reduce((function(e,n){return e+n.percent}),0)/r.length,c=100/(100+l);r.forEach((function(e){e.percent=e.percent*c}));var u={id:n,panes:i,type:"paneGroup",percent:l*c,activeIndex:a};r.splice(o,0,u)}else{var s=(100-t)/100;r.forEach((function(e){e.percent=e.percent*s}));var d={id:n,panes:i,type:"paneGroup",percent:t,activeIndex:a};r.splice(o,0,d)}}function Hn(e,n){var t=G(e,n.paneGroupId);if(!t)throw new Error("Expected paneGroup");!function(e,n){var t,r=n.index,i=n.paneIds,o=n.activate,a=void 0===o||o;if(void 0!==r&&r>e.panes.length)throw new Error("Invalid index");var l=void 0===r?e.panes.length:r;(t=e.panes).splice.apply(t,[l,0].concat((0,C.Z)(i))),a&&(e.activeIndex=l)}(t,n)}var Vn=(0,l.cn)(null,(function(e,n,t){var r=e(fe),i=G(r,t.paneGroupId);if(!i){var o=new Error("Expected pane group");throw n(ye,{error:o,tags:{layoutstate:!0},origin:"Layout: state/splits/removePaneGroupAtom"}),o}var a=(0,x.ZP)(r,(function(e){try{i.panes.forEach((function(n){U(e,n)}))}catch(o){throw n(ye,{error:o,tags:{layoutstate:!0},origin:"Layout: state/splits/removePaneGroupAtom"}),o}}));e(Dn)&&n(Dn,!1),n(_e,a)})),zn=(0,l.cn)(null,(function(e,n,t){var r=e(fe),i=E(r,t.paneId);if(!i){var o=new Error("Expected relativeToPane");throw n(ye,{error:o,tags:{layoutstate:!0},origin:"Layout: state/splits/splitPaneAtom"}),o}var a=Ue()(),l=e(J(a));n(l.data,{type:"commands",data:{autoFocus:Boolean(t.autoFocus)}});var c=(0,x.ZP)(r,(function(e){try{On(e,{id:Ue()(),isFloating:!1,placement:t.placement,relativeTo:i.paneGroupPath,panes:[a]})}catch(o){throw n(ye,{error:o,tags:{layoutstate:!0},origin:"Layout: state/splits/splitPaneAtom"}),o}}));n(_e,c),n(ce,a)})),jn=(0,l.cn)(null,(function(e,n,t){var r=e(fe),i=Ue()(),o=e(J(i));n(o.data,t.pane);var a=(0,x.ZP)(r,(function(e){try{On(e,{id:Ue()(),isFloating:!1,placement:t.placement,relativeTo:t.relativeTo,panes:[i],percent:t.percent})}catch(r){throw n(ye,{error:r,tags:{layoutstate:!0},origin:"Layout: state/splits/insertSplitPaneAtom"}),r}}));return n(_e,a),i})),qn=(0,l.cn)(null,(function(e,n,t){var r=e(fe),i=(0,x.ZP)(r,(function(e){He(e,{leftPath:t.leftPath,percent:t.percent})}));n(_e,i)})),$n=(0,l.cn)(null,(function(e,n,t){var r=G(e(fe),t);if(!r)return null;n(ce,r.panes[r.activeIndex])}));var Yn=(0,l.cn)(null,(function(e,n,t){var r=e(fe),i=E(r,t);if(!i)throw new Error("Expected pane");var o=!i.paneGroup.panes.some((function(e){return e!==t})),a=t===e(le),l=_(r,t),c=(0,x.ZP)(r,(function(e){try{U(e,t)}catch(r){throw n(ye,{error:r,tags:{layoutstate:!0},origin:"Layout: state/removePane/removePaneAtom"}),r}}));if(n(_e,c),o&&e(Dn)&&n(Dn,!1),a&&(o||n($n,i.paneGroup.id),o&&l)){do{"split"===l.type&&(l=l.children[0])}while("paneGroup"!==l.type);n($n,l.id)}})),Kn=(0,l.cn)(null,(function(e,n,t){var r=e(fe),i=E(r,t),o=null===i||void 0===i?void 0:i.paneGroup.panes.filter((function(e){return e!==t}));if(null===o||void 0===o?void 0:o.length){var a=(0,x.ZP)(r,(function(e){try{var t=!0,r=!1,i=void 0;try{for(var a,l=o[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){U(e,a.value)}}catch(c){r=!0,i=c}finally{try{t||null==l.return||l.return()}finally{if(r)throw i}}}catch(u){throw n(ye,{error:u,tags:{layoutstate:!0},origin:"Layout: state/removePane/removePaneAtom"}),u}}));n(_e,a)}})),Qn=(0,l.cn)(null,(function(e,n,t){if(0===t.panes.length){var r=new Error("Expect at least one pane");throw n(ye,{error:r,origin:"Layout: state/insertPaneGroup/insertPaneGroupAtom"}),r}var i=e(fe),o=t.panes.map((function(){return Ue()()})),a=(0,x.ZP)(i,(function(e){try{On(e,{id:Ue()(),panes:o,relativeTo:t.relativeTo||["tiling"],placement:t.placement,percent:t.percent})}catch(r){throw n(ye,{error:r,tags:{layoutstate:!0},origin:"Layout: state/insertPaneGroup/insertPaneGroupAtom"}),r}}));n(_e,a),t.panes.forEach((function(t,r){var i=o[r],a=e(J(i));n(a.data,t);var l=(0,v.b)(t.type)?e(ee).find((function(n){return e(n.data).type===t.type&&n.paneId!==i})):null;l&&n(Yn,l.paneId)})),t.makeActive&&n(ce,o[0])})),Jn={top:"above",left:"leftOf",right:"rightOf",bottom:"below"},et=(0,l.cn)(null,(function(e,n,t){var r=t.pane,i=t.edge;n(jn,{pane:r,relativeTo:["tiling"],placement:Jn[i]})})),nt=(0,l.cn)(null,(function(e,n,t){var r=e(fe),i=Ue()(),o=(0,x.ZP)(r,(function(e){try{On(e,{id:Ue()(),panes:[i],isFloating:!0,rect:t.rect})}catch(r){throw n(ye,{error:r,tags:{layoutstate:!0},origin:"Layout: state/insertPaneGroup/insertFloatingPaneGroupAtom"}),r}}));n(_e,o);var a=e(J(i));return n(a.data,t.pane),t.makeActive?(n(ce,i),i):i}));function tt(e,n,t){var i=(0,r.Z)("x"===t?[[e.x,e.x+e.width],[n.x,n.x+n.width]]:[[e.y,e.y+e.height],[n.y,n.y+n.height]],2),o=i[0],a=i[1],l=Math.max(o[0],a[0]);return Math.min(o[1],a[1])-l}function rt(e){var n=e.from,t=e.other;switch(e.direction){case"above":return n.y-t.y;case"below":return t.y-n.y;case"rightOf":return t.x-n.x;case"leftOf":return n.x-t.x}}function it(e){var n=e.relativeTo,t=e.rects,i=e.direction,o=t.get(n);if(!o)throw new Error("Expected relativeTo rect to be included in rects");var a=null,l=!0,c=!1,u=void 0;try{for(var s,d=t[Symbol.iterator]();!(l=(s=d.next()).done);l=!0){var f=(0,r.Z)(s.value,2),p=f[0],h=f[1];if(p!==n){var v=rt({from:o,other:h,direction:i});if(!(("leftOf"===i||"above"===i)&&v<=0||("rightOf"===i||"below"===i)&&v<0)){var m=tt(o,h,"leftOf"===i||"rightOf"===i?"y":"x");if(!(m<=0))(!a||a.distance>v||a.distance===v&&a.overlap<m)&&(a={key:p,rect:h,distance:v,overlap:m})}}}}catch(g){c=!0,u=g}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}return(null===a||void 0===a?void 0:a.key)||null}var ot=t(53472),at=(0,l.cn)(null,(function(e,n,t){if(0===t.panes.length)return[];var r=e(fe),i=t.panes.map((function(){return Ue()()})),o=(0,x.ZP)(r,(function(e){try{Hn(e,{paneIds:i,activate:t.activate,paneGroupId:t.paneGroupId,index:t.index})}catch(r){throw n(ye,{error:r,tags:{layoutstate:!0},origin:"Layout: state/tabs/insertPanesAtom"}),r}}));return n(_e,o),t.panes.forEach((function(r,o){var a=i[o],l=e(J(a));n(l.data,r);var c=(0,v.b)(r.type)?e(ee).find((function(n){return e(n.data).type===r.type&&n.paneId!==a})):null;c&&n(Yn,c.paneId),t.commit&&n(ue,a)})),t.activate&&n(ce,i[0]),i})),lt=(0,l.cn)(null,(function(e,n,t){var i=t.pane,o=t.activate,a=t.placement,l=e(fe);if(!l.tiling){var c=n(jn,{pane:i,relativeTo:["tiling"],placement:"replace"});return o&&n(ce,c),c}if("after"===a.type){var u=E(l,a.paneId);if(u){var s=(0,r.Z)(n(at,{panes:[i],paneGroupId:u.paneGroup.id,index:u.index+1,activate:o}),1)[0];return o&&n(ce,s),s}}if("secondary"===a.type&&a.relativeTo){var d=_(l,a.relativeTo);if(d){if("paneGroup"===d.type){var f=(0,r.Z)(n(at,{panes:[i],paneGroupId:d.id,activate:o}),1)[0];return o&&n(ce,f),f}var p=n(jn,{pane:i,relativeTo:a.relativeTo,placement:"rightOf"});return o&&n(ce,p),p}var h=E(l,a.relativeTo);if("floatingPaneGroup"===(null===h||void 0===h?void 0:h.paneGroup.type)){var v=e(J(a.relativeTo)),m=e(v.rectAtom);return n(nt,{rect:{x:m.x+m.width,y:m.y,width:m.width,height:m.height},pane:i,makeActive:o})}}var g=n(jn,{pane:i,relativeTo:["tiling"],placement:"rightOf"});return o&&n(ce,g),g})),ct=(0,l.cn)(null,(function(e,n,t){var r=e(fe),i=E(r,t);if(!i){var o=new Error("Expected selectedPane");throw n(ye,{error:o,tags:{layoutstate:!0},origin:"Layout: state/tabs/selectTabAtom"}),o}var a=re(i.paneGroup.id);n(a,(function(e){return(0,x.ZP)(e,(function(e){e.activeIndex=i.index}))}));var l=!0,c=!1,u=void 0;try{for(var s,d=i.paneGroup.panes[Symbol.iterator]();!(l=(s=d.next()).done);l=!0){var f=s.value,p=J(f);n(p,(function(e){return(0,x.ZP)(e,(function(e){e.isHidden=e.paneId!==t}))}))}}catch(h){c=!0,u=h}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}n(fe,(0,x.ZP)(r,(function(e){try{!function(e,n){var t=E(e,n);if(!(null===t||void 0===t?void 0:t.paneGroup))throw new Error("Expected pane group");var r=t.paneGroup,i=r.panes.indexOf(n);if(-1===i)throw new Error("Expected index");r.activeIndex=i}(e,t)}catch(o){throw n(ye,{error:o,tags:{layoutstate:!0},origin:"Layout: state/tabs/selectTabAtom"}),o}}))),n(ce,t)})),ut=(0,l.cn)(null,(function(e,n,t){var r=e(ee).find((function(n){return e(n.data).type===t}));if(r){if("webview"===t||"vnc"===t)return;return n(ct,r.paneId),void n(ue,r.paneId)}var i=e(fe),o=I(i,"topRight");if(o&&i.tiling)if("paneGroup"!==i.tiling.type)if("split"!==i.tiling.type||2!==i.tiling.children.length||"paneGroup"!==i.tiling.children[1].type)n(at,{panes:[{type:t}],paneGroupId:o.paneGroup.id,commit:!0});else{var a=i.tiling.stacked,l=n(jn,{pane:{type:t},relativeTo:o.path,placement:a?"rightOf":"above"});n(ue,l)}else{var c=n(jn,{pane:{type:t},relativeTo:["tiling"],placement:"rightOf"});n(ue,c)}else{var u=n(jn,{pane:{type:t},relativeTo:["tiling"],placement:"replace"});n(ue,u)}})),st=(0,l.cn)(null,(function(e,n){var t=e(ee).find((function(n){return"threadInbox"===e(n.data).type}));if(t)n(ct,t.paneId);else{var r=e(fe),i=I(r,"bottomRight");i&&r.tiling?"paneGroup"!==r.tiling.type?n(at,{panes:[{type:"threadInbox"}],paneGroupId:i.paneGroup.id}):n(jn,{pane:{type:"threadInbox"},relativeTo:["tiling"],placement:"rightOf"}):n(jn,{pane:{type:"threadInbox"},relativeTo:["tiling"],placement:"replace"})}})),dt=(0,l.cn)(null,(function(e,n,t){var r=e(ee).find((function(n){return e(n.data).type===t.type}));if(r){var i=e(fe),o=(0,x.ZP)(i,(function(e){try{U(e,r.paneId)}catch(t){throw n(ye,{error:t,tags:{layoutstate:!0},origin:"Layout: state/tabs/removePaneTypeAtom"}),t}}));n(_e,o)}})),ft=(0,l.cn)(null,(function(e,n,t){var r=e(fe),i=(0,x.ZP)(r,(function(e){var r=E(e,t.paneId);if(!r){var i=new Error("Expected pane");throw n(ye,{error:i,tags:{layoutstate:!0},origin:"Layout: state/tabs/movePaneAtom"}),i}var o=G(e,t.toPaneGroupId);if(!o){var a=new Error("Expected toPaneGroup");throw n(ye,{error:a,tags:{layoutstate:!0},origin:"Layout: state/tabs/movePaneAtom"}),a}var l=1===r.paneGroup.panes.length,c=!o.panes.includes(t.paneId);if(!l||c)try{U(e,t.paneId),Hn(e,{paneIds:[t.paneId],paneGroupId:t.toPaneGroupId,index:t.index}),c&&n(ue,t.paneId)}catch(u){throw n(ye,{error:u,tags:{layoutstate:!0},origin:"Layout: state/tabs/movePaneAtom"}),u}}));n(_e,i)})),pt=(0,l.cn)(null,(function(e,n,t){var r=e(le);if(r){var i=e(fe),o=E(i,r);if(o){var a=o.paneGroup,l=new Map(e(ee).filter((function(e){return!e.isHidden})).map((function(n){return[n.paneId,e(n.rectAtom)]}))),c=it({relativeTo:r,rects:l,direction:t}),u=c?E(i,c):null;if(u)n(ft,{paneId:r,toPaneGroupId:u.paneGroup.id});else{var s=a.panes.find((function(e){return e!==r}));if(s){var d=(0,x.ZP)(i,(function(e){U(e,r),On(e,{id:Ue()(),relativeTo:s,panes:[r],placement:t})}));n(_e,d)}}}}})),ht=(0,l.cn)(!1),vt=(0,l.cn)(null,(function(e,n,t){var r=e(pe).map((function(n){return{paneId:n.paneId,path:(0,v.DQ)(e(n.data))}})).filter((function(e){return t===e.path})),i=[],o=e(fe),a=(0,x.ZP)(o,(function(e){var t=!0,o=!1,a=void 0;try{for(var l,c=r[Symbol.iterator]();!(t=(l=c.next()).done);t=!0){var u=l.value.paneId,s=E(e,u);if(!s){var d=new Error("Expected pane");throw n(ye,{error:d,tags:{layoutstate:!0},origin:"Layout: state/tabs/removePanesForFileAtom"}),d}!s.floating&&1===s.paneGroup.panes.length?i.push(u):U(e,u)}}catch(f){o=!0,a=f}finally{try{t||null==c.return||c.return()}finally{if(o)throw a}}})),l=!0,c=!1,u=void 0;try{for(var s,d=i[Symbol.iterator]();!(l=(s=d.next()).done);l=!0){var f=s.value;n(we,{paneId:f,pane:{type:"commands",data:{autoFocus:!1}}})}}catch(p){c=!0,u=p}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}n(_e,a)})),mt=(0,l.cn)(null,(function(e,n,t){var r=t.node.path;if(t.eventType!==Fn.kS.Delete){var i=e(pe).filter((function(n){return(0,v.DQ)(e(n.data))===r})),o={type:(0,v.Dp)({path:t.to}),data:{path:t.to}},a=!0,l=!1,c=void 0;try{for(var u,s=i[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var d=u.value.paneId;n(we,{paneId:d,pane:o})}}catch(f){l=!0,c=f}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}}else n(vt,r)}));function gt(e){var n=re(e);return(0,i.Z)((function(){return(0,l.cn)((function(e){var t=e(n);return e(J(t.panes[t.activeIndex])).paneId}))}),[n])}var yt=(0,l.cn)(null,(function(e,n,t){var r=e(le),i=e(fe);if(r){var o=E(i,r);if(o)return void n(at,{panes:t,paneGroupId:null===o||void 0===o?void 0:o.paneGroup.id,activate:!0,index:o.index+t.length})}var a=I(i,"topLeft");if(a)n(at,{activate:!0,paneGroupId:a.paneGroup.id,index:a.paneGroup.activeIndex+t.length,panes:t});else{var l=i.floating.length?i.floating[0]:null;l?n(at,{activate:!0,paneGroupId:l.id,index:l.activeIndex+t.length,panes:t}):n(Qn,{panes:t,placement:"leftOf",makeActive:!0,relativeTo:["tiling"]})}})),Zt=(0,l.cn)(null,(function(e,n){n(yt,[{type:"commands",data:{autoFocus:!0}}])})),bt=(0,l.cn)(null,(function(e,n){var t=e(le);return!!t&&(n(Yn,t),!0)}));var wt=(0,l.cn)(null,(function(e,n,t){var r=e(le);if(r){var i=function(e,n){var t=n.paneId,r=n.dir,i=E(e,t);if(i){var o=i.index,a=i.paneGroup.panes;return"previous"===r?a[0===o?a.length-1:o-1]:a[o===a.length-1?0:o+1]}}(e(fe),{paneId:r,dir:t});i&&n(ct,i)}}));var xt=(0,l.cn)(null,(function(e,n,t){var r=t.paneId,i=t.pane;n(we,{paneId:r,pane:i});var o=(0,v.b)(i.type)?e(ee).find((function(n){return e(n.data).type===i.type&&n.paneId!==r})):null;if(o){var a=E(e(fe),o.paneId);(null===a||void 0===a?void 0:a.floating)||1!==(null===a||void 0===a?void 0:a.paneGroup.panes.length)?n(Yn,o.paneId):n(we,{paneId:o.paneId,pane:{type:"commands",data:{autoFocus:!1}}})}})),kt=(0,l.cn)(null,(function(e,n,t){var r=e(e(J(t.b)).data);n(we,{paneId:t.a,pane:r});var i=E(e(fe),t.b);(null===i||void 0===i?void 0:i.floating)||1!==(null===i||void 0===i?void 0:i.paneGroup.panes.length)?n(Yn,t.b):n(xt,{paneId:t.b,pane:{type:"commands",data:{autoFocus:!1}}})})),Ct=t(57389),St=t(39541),Tt=t(42174),Et=t(82568),Rt=t(68973),It=t(26357),Gt={overlay:It.Is+20,gutterActive:It.Is+19,maximizedTooltip:It.Is+18,maximizedPane:It.Is+17,maximizedHeader:It.Is+16,filetreeDragLayer:17,detachPreview:16,draggingPane:15,draggingHeader:14,dropPreview:13,floatingPaneActive:11,floatingHeaderActive:10,floatingPane:9,floatingHeader:8,gutterHovered:6,tiledPaneActive:5,tiledHeaderActive:4,tiledPane:3,tiledHeader:2,gutter:1},Dt=(0,l.cn)(null),_t=(0,Rt.$)(["backgroundColor","borderRadius","zIndex","border","opacity","visiblity","width","height","x","y","innerScale","innerOpacity"]),Pt=_t.cssVars,Bt=_t.styleTokens,At=(0,z.kv)(Dt,(function(e){return(0,Ct.Z)({},Pt.border,"detachPreview"===(null===e||void 0===e?void 0:e.type)&&e.progress<.98?"1px dashed ".concat(St.TV.foregroundDefault):"1px solid ".concat(St.TV.accentPrimaryDefault))}),O()),Ut=(0,z.kv)(Dt,(function(e){return null===e||void 0===e?void 0:e.rect}),O()),Lt=(0,z.kv)(Ut,(function(e){var n;return e?(n={},(0,Ct.Z)(n,Pt.width,e.width+"px"),(0,Ct.Z)(n,Pt.height,e.height+"px"),n):null}),O()),Xt=(0,z.kv)(Ut,(function(e){var n;return e?(n={},(0,Ct.Z)(n,Pt.x,e.x+"px"),(0,Ct.Z)(n,Pt.y,e.y+"px"),n):null}),O()),Nt=(0,z.kv)(Dt,(function(e){return e?"detachPreview"===e.type?(n={},(0,Ct.Z)(n,Pt.zIndex,Gt.detachPreview.toString()),(0,Ct.Z)(n,Pt.borderRadius,"100%"),(0,Ct.Z)(n,Pt.backgroundColor,"transparent"),n):(t={},(0,Ct.Z)(t,Pt.zIndex,Gt.dropPreview.toString()),(0,Ct.Z)(t,Pt.borderRadius,"8px"),(0,Ct.Z)(t,Pt.backgroundColor,St.TV.accentPrimaryDimmer),t):null;var n,t}),O()),Mt=(0,z.kv)(Dt,(function(e){var n,t,r;return e?"detachPreview"===e.type?(t={},(0,Ct.Z)(t,Pt.opacity,(.5*e.progress).toString()),(0,Ct.Z)(t,Pt.visiblity,"visible"),t):(r={},(0,Ct.Z)(r,Pt.opacity,"0.2"),(0,Ct.Z)(r,Pt.visiblity,"visible"),r):(n={},(0,Ct.Z)(n,Pt.opacity,"0"),(0,Ct.Z)(n,Pt.visiblity,"hidden"),n)}),O()),Ft=(0,z.kv)(Dt,(function(e){return(0,Ct.Z)({},Pt.innerOpacity,"detachPreview"===(null===e||void 0===e?void 0:e.type)?"0.5":"0")}),O()),Ot=(0,z.kv)(Dt,(function(e){return(0,Ct.Z)({},Pt.innerScale,"detachPreview"===(null===e||void 0===e?void 0:e.type)?e.progress.toString():"1")}),O()),Wt=(0,Et.X)({root:[{position:"absolute",pointerEvents:"none",opacity:Bt.opacity,width:Bt.width,height:Bt.height,transform:"translate(".concat(Bt.x,", ").concat(Bt.y,")"),backgroundColor:Bt.backgroundColor,borderRadius:Bt.borderRadius,border:Bt.border,zIndex:Bt.zIndex,visibility:Bt.visiblity}],inner:[{width:"100%",height:"100%",borderRadius:"100%",background:"radial-gradient(transparent, ".concat(St.TV.backgroundHighest,")"),opacity:Bt.innerOpacity,transform:"scale(".concat(Bt.innerScale,")")}]}),Ht=(0,u.memo)((function(){var e=En(de),n=(0,u.useRef)(null);(0,Tt.j)(n,Rn(Xt)),(0,Tt.j)(n,Rn(Lt)),(0,Tt.j)(n,Rn(At)),(0,Tt.j)(n,Rn(Nt)),(0,Tt.j)(n,Rn(Mt));var t=(0,u.useRef)(null);return(0,Tt.j)(t,Rn(Ft)),(0,Tt.j)(t,Rn(Ot)),(0,c.tZ)("div",{ref:n,css:Wt.root,style:{transition:e?"transform 140ms, width 140ms, height 140ms, border-radius 140ms, opacity 140ms ease-out 60ms":void 0},children:(0,c.tZ)("div",{ref:t,css:Wt.inner})})})),Vt=(0,l.cn)(null,(function(e,n){var t=e(jt);n(Dt,{type:"dropPreview",rect:t})})),zt=(0,l.cn)(null,(function(e,n,t){n(Dt,null),n(ht,!1),n(Qn,{panes:t.panes,placement:"leftOf",makeActive:!0,relativeTo:["tiling"]})})),jt=(0,l.cn)((function(e){var n=e(oe),t=n.width,r=n.height,i=e(ae);return{x:Math.round(i.width+8),y:0,width:t-i.width-16,height:r-8}}));var qt=(0,l.cn)(null,(function(e,n,t){var r=t.paneId,i=t.activate,o=e(fe);"tile"===e(J(r)).type?n(_e,(0,x.ZP)(o,(function(e){try{!function(e,n){var t=E(e,n.paneId);if(!t)return!1;var r=t.paneGroupPath;t.paneGroup.activeIndex=t.index;var i=r.map((function(e,n){return r.slice(0,n+1)})),o=!0,a=!1,l=void 0;try{for(var c,u=i[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var s=c.value,d=T(e,s);if(!d)throw new Error("Expected node");if("floatingPaneGroup"===d.type)throw new Error("Expected tiled pane");if(1!==s.length){var f=s[s.length-1];if("number"!==typeof f)throw new Error("Expected number");var p=T(e,P(s));if("split"!==(null===p||void 0===p?void 0:p.type))throw new Error("Expected split");var h=p.stacked?n.minPercentVertical:n.minPercentHorizontal;if(!(d.percent>=h)){var v=f===p.children.length-1;He(e,{leftPath:v?(0,C.Z)(s.slice(0,-1)).concat([f-1]):s,percent:v?p.children[f-1].percent-h:h})}}}}catch(m){a=!0,l=m}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}}(e,{paneId:r,minPercentHorizontal:30,minPercentVertical:20})}catch(t){throw n(ye,{error:t,origin:"Layout: revealPaneAtom/revealTiledPane"}),t}}))):n(_e,(0,x.ZP)(o,(function(e){try{!function(e,n){var t=E(e,n.paneId);if(!t)return!1;var r=t.paneGroup;if("floatingPaneGroup"!==r.type)throw new Error("Expected floatingPaneGroup");r.activeIndex=t.index,r.rect.width=Math.max(r.rect.width,n.minWidth),r.rect.height=Math.max(r.rect.height,n.minHeight)}(e,{paneId:r,minWidth:200,minHeight:140})}catch(t){throw n(ye,{error:t,origin:"Layout: revealPaneAtom/revealFloatingPane"}),t}}))),i&&n(ce,r)})),$t=(0,l.cn)(null,(function(e,n,t){var r=I(e(fe),"topRight"),i=e(ee).find((function(n){return e(n.data).type===t.pane.type}));if((0,v.b)(t.pane.type)&&i)return n(ct,i.paneId),void n(we,{paneId:i.paneId,pane:t.pane,makeActive:!0});if(r){var o=r.paneGroup.panes.find((function(n){var t=e(J(n));if(t.isHidden)return!1;var r=e(t.data);return"filetree"!==r.type&&(!t.isCommitted&&!(0,v.RX)(r.type))}));o?n(we,{paneId:o,pane:t.pane,makeActive:!0}):("debugger"===t.pane.type&&n(et,{pane:t.pane,edge:"left"}),n(at,{panes:[t.pane],paneGroupId:r.paneGroup.id,activate:!0}))}else n(Qn,{panes:[t.pane],placement:"rightOf",relativeTo:["tiling"],makeActive:!0})}));var Yt={height:0,width:0};var Kt={width:120,height:120},Qt=(0,l.cn)(null),Jt=(0,l.cn)(null,(function(e,n,t){var r=e(fe);if("end"===t.type)return n(Qt,null),void n(_e,r);if("update"!==t.type){var i=e(ee).find((function(e){return e.paneId===t.paneId}));if(!i){var o=new Error("Expected pane");throw n(ye,{error:o,tags:{layoutstate:!0},origin:"Layout: state/resizeFloating"}),o}n(ce,t.paneId),n(Qt,{paneId:t.paneId,edge:t.edge,rectStart:e(i.rectAtom)})}else{var a=e(Qt);if(!a){var l=new Error("Expected floatingResizeState");throw n(ye,{error:l,tags:{layoutstate:!0},origin:"Layout: state/resizeFloating"}),l}var c=e(ie),u=function(e,n){var t=n.edge,r=n.delta,i=n.minSize,o=void 0===i?Yt:i,a=(0,W.Z)({},e),l=o.height,c=o.width;if(function(e){return"top"===e||"topLeft"===e||"topRight"===e}(t)){var u=e.height-r.y;a.height=Math.max(u,l),a.y=u<l?e.y+e.height-l:e.y+r.y}else if(function(e){return"bottom"===e||"bottomLeft"===e||"bottomRight"===e}(t)){var s=e.height+r.y;a.height=Math.max(s,l)}if(function(e){return"right"===e||"bottomRight"===e||"topRight"===e}(t)){var d=e.width+r.x;a.width=Math.max(d,c)}else if(function(e){return"left"===e||"bottomLeft"===e||"topLeft"===e}(t)){var f=e.width-r.x;a.width=Math.max(f,c),a.x=f<c?e.x+e.width-c:e.x+r.x}return a}(a.rectStart,{delta:t.moveDelta,edge:a.edge,minSize:Kt}),s=a.paneId,d=(0,x.ZP)(r,(function(e){var t=e.floating.find((function(e){return e.panes.includes(s)}));if(!t){var r=new Error("Expected floating");throw n(ye,{error:r,tags:{layoutstate:!0},origin:"Layout: state/resizeFloating"}),r}var i=t.rect;i.x=u.x,i.y=u.y-c,i.width=u.width,i.height=u.height+c}));n(_e,d)}})),er=(0,l.cn)(null,(function(e,n,t){if(!e(Dn)){var r=e(oe),i=t.pageX,o=t.pageY,a=t.over,l=e(J(a)),c=Ce({x:i-r.x,y:o-r.y},e(l.rectAtom)),u=c.rect,s=c.placement,d=e(ie);"above"!==s&&"below"!==s?(n(ht,!0),n(Dt,{type:"dropPreview",rect:{x:u.x,y:u.y-d,width:u.width,height:u.height+d}})):n(Dt,{type:"dropPreview",rect:{x:u.x,y:u.y-d+("below"===s?d/2:0),width:u.width,height:u.height+d/2}})}})),nr=(0,l.cn)(null,(function(e,n,t){if(!e(Dn)){var r=e(oe),i=t.pageX,o=t.pageY,a=t.over,l=e(J(a)),c=Ce({x:i-r.x,y:o-r.y},e(l.rectAtom)).placement;n(Dt,null),n(ht,!1);var u=e(fe);if("newPaneGroup"!==t.type){var s=a;if(s===t.paneId){var d=E(u,t.paneId);if(!d){var f=new Error("Expected pane");throw n(ye,{error:f,tags:{layoutstate:!0},origin:"Layout: state/paneDragAndDrop/expectedPane"}),f}if(d.floating)throw new Error("Expected paneGroup");var p=d.paneGroup.panes.find((function(e){return e!==t.paneId}));if(!p)return;s=p}var h=(0,x.ZP)(u,(function(e){try{U(e,t.paneId),On(e,{id:Ue()(),panes:[t.paneId],relativeTo:s,placement:c}),n(ue,t.paneId)}catch(f){throw n(ye,{error:f,tags:{layoutstate:!0},origin:"Layout: state/paneDragAndDrop/updatedLayout"}),f}}));n(_e,h)}else n(Qn,{panes:t.panes,placement:c,makeActive:!0,relativeTo:l.paneId})}})),tr=(0,l.cn)(null,(function(e,n,t){n(kn,M({initialLayoutState:null,isHTML:t.isHTML,isStacked:t.isStacked,isExtension:t.isExtension,codeEditorPath:t.entrypoint})),n(xn,{replId:t.replId,force:!0})})),rr=t(91046),ir=(0,l.cn)(null,(function(e,n,t){var r=t.path,i=t.col,o=t.line,a=t.opener,l=e(fe),c=(null===a||void 0===a?void 0:a.paneType)||(0,v.Dp)({path:r}),u=function(){if("codeEditor"===c)return{type:"codeEditor",data:{path:r,col:i,line:o}};if("extension"===c){var e=a.extensionFileHandler;return{type:"extension",data:{path:r,extensionId:e.extension.extensionId,installationId:e.extension.installationId,name:e.extension.manifest.name,url:(0,rr.Vh)(e.extension.baseUrl,e.handler)}}}return{type:c,data:{path:r}}}();if(t.newPane){var s;n(et,{pane:u,edge:null!==(s=t.newPaneEdge)&&void 0!==s?s:"left"})}else{var d=I(l,"topLeft");if(d){var f=e(pe).find((function(n){return r===(0,v.DQ)(e(n.data))}));if(f&&!t.newTab)return n(ct,f.paneId),void n(we,{paneId:f.paneId,pane:u});var p=d.paneGroup;if(t.newTab)n(at,{panes:[u],paneGroupId:p.id,activate:!0,commit:!0,index:p.activeIndex+1});else{var h=e(pe).find((function(e){return!e.isCommitted}));if(h)return n(we,{paneId:h.paneId,pane:u}),void n(ct,h.paneId);var m=e(pe).find((function(n){var t=e(n.data);return"codeEditor"===t.type&&""===(0,v.DQ)(t)}));if(m)return n(we,{paneId:m.paneId,pane:u}),void n(ct,m.paneId);var g=p.panes.find((function(n){var t=e(J(n));return"commands"===e(t.data).type}));if(g)return n(we,{paneId:g,pane:u}),void n(ct,g);n(at,{panes:[u],paneGroupId:p.id,activate:!0})}}else n(jn,{pane:u,relativeTo:["tiling"],placement:"replace"})}})),or=(0,l.cn)(null,(function(e,n,t){var r=t.paths.map((function(e){var n=e.match(/(.+?)(:(\d+))?(:(\d+))?$/);if(!n)return!1;var t=[n[1],void 0!==n[3]&&parseInt(n[3],10),void 0!==n[5]&&parseInt(n[5],10)],r=t[0],i=t[1],o=t[2];return{type:(0,v.Dp)({path:r}),data:{path:r,line:i,col:o}}})).filter(Boolean);n(Qn,{panes:r,placement:"leftOf",relativeTo:["tiling"],makeActive:!0})}));var ar=(0,l.cn)(null,(function(e,n,t){var r=e(ee).find((function(n){return e(n.data).type===t.type}));if(r)n(we,{paneId:r.paneId,pane:t});else{var i=function(e,n){var t=Math.min(600,e.width),r=Math.min(318.75+n,e.height);return{width:t,height:r,x:e.width-t,y:e.height-r}}(e(oe),e(ie));n(nt,{pane:t,rect:i})}})),lr=(0,l.cn)(null,(function(e,n,t){e(ee).filter((function(n){return e(n.data).type===t})).forEach((function(e){return n(Yn,e.paneId)}))})),cr=(0,l.cn)(null),ur=(0,l.cn)((function(e){var n=e(cr);return n&&e(ee).find((function(t){var r=e(t.data);return"videoPlayer"===r.type&&r.data.embedUrl===(null===n||void 0===n?void 0:n.embedUrl)}))||null})),sr=(0,l.cn)((function(e){var n=e(ur);return n&&!n.isHidden?n:null})),dr=(0,l.cn)(null,(function(e,n,t){n(cr,t);var r="videoPlayer";t?n(ar,{type:r,data:{title:"Tutorial",embedUrl:t.embedUrl}}):n(lr,r)})),fr=(0,l.cn)(null,(function(e,n){var t=e(ur);if(null===t||void 0===t?void 0:t.isHidden)n(ct,t.paneId);else{var r=e(cr);r&&n(dr,r)}})),pr=(0,l.cn)((function(e){return e(ee).find((function(n){return"tutorial"===e(n.data).type}))||null})),hr=(0,l.cn)(null,(function(e,n){var t=e(pr);(null===t||void 0===t?void 0:t.isHidden)?n(ct,t.paneId):(n(Qn,{panes:[{type:"tutorial"}],placement:"leftOf",percent:25,relativeTo:["tiling"],makeActive:!1}),n(Qe))}));function vr(e,n){var t=n.path,r=n.forwards,i=n.vertical,o=T(e,t);if("split"!==(null===o||void 0===o?void 0:o.type))return null;var a=P(t),l=T(e,a);if("split"!==(null===l||void 0===l?void 0:l.type))return null;if(l.stacked!==i)return vr(e,{path:a,forwards:r,vertical:i});var c=l.children.indexOf(o),u=0===c;if(!(c===l.children.length-1&&r||u&&!r)){var s=c+(r?1:-1),d=l.children[s],f=l.children[c];return d?{other:f,node:d,parent:l,path:(0,C.Z)(a).concat([s])}:null}if(1===a.length){var p=u&&!r?l.children.length-1:0;return{parent:l,other:l.children[c],path:(0,C.Z)(a).concat([p]),node:l.children[p]}}return vr(e,{path:a,forwards:r,vertical:i})}function mr(e,n,t){var r=D(e,n.id);if(!r)return null;var i="up"===t||"down"===t,o="down"===t||"right"===t;return vr(e,{path:r.path,forwards:o,vertical:i})}function gr(e,n){var t=n.paneGroupId,r=n.direction,i=G(e,t),o=D(e,t);if("paneGroup"!==(null===i||void 0===i?void 0:i.type)||!o)return!1;var a=o.node.children.indexOf(i);if(-1===a)throw new Error("Expected index");var l=(0,C.Z)(o.path).concat([a]),c="up"===r||"down"===r,u="down"===r||"right"===r,s=0===a,d=a===o.node.children.length-1,f=o.node.stacked===c,p=o.path.length>2;if(f&&!((d&&u||s&&!u)&&p))!function(e,n,t){var r=e.indexOf(n);if(-1===r)throw new Error("Expected item to be in array");if(1!==e.length){var i=r===e.length-1,o=0===r;if("forward"===t&&i)return e.pop(),void e.unshift(n);if("back"===t&&o)return e.shift(),void e.push(n);var a="forward"===t?1:-1;e[r]=e[r+a],e[r+a]=n}}(o.node.children,i,u?"forward":"back");else{var h=mr(e,i,r);if(h){var v=l.slice(0,h.path.length+("paneGroup"===h.node.type?2:1));!function(e){if("tiling"!==e[0])throw new Error("Expected tiling path")}(v);var m=T(e,v);if(!m||"floatingPaneGroup"===m.type)throw new Error("Expected adjacentNode");if("split"!==h.other.type)throw new Error("Expected split");var g,y,Z,b=function(e,n){var t=e.indexOf(n),r=0,i=!0,o=!1,a=void 0;try{for(var l,c=e.slice(0,t)[Symbol.iterator]();!(i=(l=c.next()).done);i=!0)r+=l.value.percent}catch(u){o=!0,a=u}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return{start:r,end:r+n.percent}}(h.other.children,m);if("paneGroup"===h.node.type){var w=(g=b,y={start:0,end:100},Z=!h.parent.stacked,g.start-y.start<y.end-g.end?Z?"above":"rightOf":Z?"below":"leftOf");return L(e,(0,C.Z)(o.path).concat([a])),void On(e,{placement:w,id:i.id,panes:i.panes,activeIndex:i.activeIndex,percent:i.percent,relativeTo:h.path})}var x=function(e,n){var t,r,i=e.children,o=e.stacked,a="above",l=0,c=0,u=0,s=0,d=!0,f=!1,p=void 0;try{for(var h,v=i[Symbol.iterator]();!(d=(h=v.next()).done);d=!0){var m=h.value,g={start:u,end:u+m.percent},y=(t=n,r=g,Math.max(0,Math.min(t.end,r.end)-Math.max(t.start,r.start)));y>s&&(s=y,l=c,a=n.start-g.start<g.end-n.end?o?"above":"rightOf":o?"below":"leftOf"),u+=m.percent,c++}}catch(Z){f=!0,p=Z}finally{try{d||null==v.return||v.return()}finally{if(f)throw p}}return{placement:a,index:l}}(h.node,b),k=x.index,S=x.placement;L(e,(0,C.Z)(o.path).concat([a])),On(e,{placement:S,id:i.id,panes:i.panes,activeIndex:i.activeIndex,percent:i.percent,relativeTo:(0,C.Z)(h.path).concat([k])})}}}var yr=(0,l.cn)(null),Zr=(0,l.cn)((function(e){var n=e(yr);if(!n)return null;if("sidebar"===n.target)return{target:"sidebar"};var t=E(e(fe),n.paneId);if(!t)return null;var r=t.paneGroup;return{target:"pane",paneGroupId:r.id,activeIndex:r.activeIndex,panes:r.panes.map((function(n){var t=e(J(n));return[t.paneId,e(t.data)]}))}})),br=(0,l.cn)((function(e){var n=e(Zr);if(!n)return null;if("sidebar"===n.target)return{target:"sidebar"};var t=n.paneGroupId,r=n.activeIndex;return{target:"pane",paneId:n.panes[r][0],paneGroupId:t}})),wr=(0,l.cn)((function(e){var n=e(yr);if(!n)return null;if("sidebar"===n.target)return null;if(e(_n)===n.paneId)return e(Mn);var t=e(J(n.paneId)),r=e(t.rectAtom),i=e(ie);return{x:Math.round(r.x),y:Math.round(r.y-i),width:Math.round(r.width),height:Math.round(r.height+i)}})),xr=(0,l.cn)(null,(function(e,n,t){var r=e(le),i=null!==t&&void 0!==t?t:r;if(i)return n(yr,{target:"pane",paneId:i}),void(i!==r&&n(ce,i));var o=I(e(fe),"topLeft"),a=o?o.paneGroup.panes[o.paneGroup.activeIndex]:null;a&&n(yr,{target:"pane",paneId:a})})),kr=(0,l.cn)(null,(function(e,n){var t=e(yr);t&&(n(yr,null),"sidebar"!==t.target&&n(qt,{paneId:t.paneId,activate:!0}))})),Cr=(0,l.cn)(null,(function(e,n){if(e(Zr))n(kr);else{var t=e(le);if(t)n(xr,t);else{var r=I(e(fe),"topLeft"),i=r?r.paneGroup.panes[r.paneGroup.activeIndex]:null;i&&n(xr,i)}}})),Sr=(0,l.cn)((function(e){return null!==e(yr)})),Tr=(0,l.cn)(null,(function(e,n){n(yr,null)})),Er=(0,l.cn)(null,(function(e,n,t){var r=e(le);if(r&&!e(_n)){var i=it({relativeTo:r,rects:new Map(e(ee).filter((function(e){return!e.isHidden})).map((function(n){return[n.paneId,e(n.rectAtom)]}))),direction:t});if(i)n(le,i),e(yr)&&n(yr,{target:"pane",paneId:i})}})),Rr=(0,l.cn)(null,(function(e,n,t){var r=e(Zr);null!==r&&"sidebar"!==r.target&&n(_e,(0,x.ZP)(e(fe),(function(e){gr(e,{paneGroupId:r.paneGroupId,direction:t.direction})})))}));function Ir(e,n){var t=n.paneGroupPath,r=n.rect,i=T(e,t);if("paneGroup"!==(null===i||void 0===i?void 0:i.type))throw new Error("Expected paneGroup");L(e,t),On(e,{id:i.id,isFloating:!0,panes:i.panes,rect:r,activeIndex:i.activeIndex})}var Gr=50,Dr=(0,l.cn)(null),_r=(0,l.cn)((function(e){var n=e(Dr);if(!n)return null;var t=G(e(fe),n.paneGroupId);return t&&t.panes[t.activeIndex]||null})),Pr=(0,l.cn)(null,(function(e,n,t){if(!e(Dn)){var r=e(oe),i=G(e(fe),t.paneGroupId);if(!i){var o=new Error("Expected paneGroup");throw n(ye,{error:o,origin:"Layout: state/paneGroupDragAndDrop/dragStartAtom"}),o}var a=e(J(i.panes[i.activeIndex])),l=e(a.rectAtom),c=e(ie),u={x:l.x,y:l.y-c,width:l.width,height:l.height+c},s=t.mouse.x-(r.x+l.x);n(Dr,{startType:a.type,startPoint:{x:t.mouse.x-r.x,y:t.mouse.y-r.y},paneGroupId:t.paneGroupId,transformOriginX:Math.round(s)+"px",scale:1,fromRect:u,movedAtAll:!1})}})),Br=(0,l.cn)(null,(function(e,n,t){if(!e(Dn)){var r=e(Dr);if(r){var i=t.delta,o=r.paneGroupId,a=r.fromRect,l=e(fe),c=G(e(fe),o);if(!c){var u=new Error("Expected paneGroup");throw n(ye,{error:u,origin:"Layout: state/paneGroupDragAndDrop/dragUpdateAtom"}),u}var s=c.panes[c.activeIndex],d=E(l,s);if(!d){var f=new Error("Expected pane");throw n(ye,{error:f,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragUpdateAtom"}),f}var p=J(s),h=re(d.paneGroup.id),v=e(ie),m=Math.max(Math.abs(i.x),Math.abs(i.y)),g=m>=Gr,y=m>0;if(g&&!d.floating){var Z=e(p).rectAtom,b=e(Z),w=(0,x.ZP)(l,(function(e){try{Ir(e,{paneGroupPath:d.paneGroupPath,rect:{x:b.x+i.x,y:b.y-v+i.y,width:b.width,height:b.height+v}})}catch(u){throw n(ye,{error:u,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragUpdateAtom"}),u}}));return n(_e,w),void n(Ar,t.mouse)}var k=e(h),C=e(p),S=a.x+i.x,T=a.y+i.y;if(n(k.rectAtom,(function(e){return(0,x.ZP)(e,(function(e){e.x=S,e.y=T}))})),n(C.rectAtom,(function(e){return(0,x.ZP)(e,(function(e){e.x=S,e.y=T+v}))})),"floating"!==r.startType){if(!g&&!d.floating){var R=r.startPoint,I=1-.30000000000000004*(D=m/Gr,1-Math.sqrt(1-Math.pow(D,2)));return n(Dt,{type:"detachPreview",rect:{x:R.x-Gr,y:R.y-Gr,width:100,height:100},progress:m/Gr}),void n(Dr,(0,x.ZP)(r,(function(e){e.scale=I,e.movedAtAll=e.movedAtAll||y})))}var D;if(!d.floating)throw new Error("Expected floating pane");n(Ar,t.mouse)}}else n(Dt,null)}})),Ar=(0,l.cn)(null,(function(e,n,t){var i=e(ie),o=e(oe),a=function(e){var n=e.views,t=e.mouse,i=e.container,o=e.headerHeight,a=e.sidebarWidth,l={x:Math.min(Math.max(t.x-i.x,1),i.width-1),y:Math.min(Math.max(t.y-i.y,1),i.height-1)},c=!0,u=!1,s=void 0;try{for(var d,f=n[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var p=(0,r.Z)(d.value,2),h=p[0],v=p[1],m={x:v.x,y:v.y-o,width:v.width,height:o};if(ke(l,{x:m.x-4,y:m.y-4,width:m.width+8,height:o+4}))return{dropPreview:m,drop:{type:"insert",paneId:h}};var g={x:v.x,y:v.y-o,width:v.width,height:v.height+o};if(ke(l,{x:g.x-4,y:g.y-4,width:g.width+8,height:g.height+8})){var y=Ce(l,g);return{dropPreview:y.rect,drop:{type:"split",relativeTo:h,placement:y.placement}}}}}catch(b){u=!0,s=b}finally{try{c||null==f.return||f.return()}finally{if(u)throw s}}var Z=Ce(l,{x:a,y:0,width:i.width-a,height:i.height});return{dropPreview:Z.rect,drop:{type:"split",relativeTo:["tiling"],placement:Z.placement}}}({views:e(ee).filter((function(e){return"tile"===e.type&&!e.isHidden})).map((function(n){return[n.paneId,e(n.rectAtom)]})),container:o,mouse:t,headerHeight:i,sidebarWidth:e(dn)}),l=a.drop,c=a.dropPreview;n(Dt,{type:"dropPreview",rect:c}),n(Dr,(function(e){return(0,x.ZP)(e,(function(e){e&&(e.drop=l,e.movedAtAll=!0)}))}))})),Ur=(0,l.cn)(null,(function(e,n,t){var r=t.delta;if(!e(Dn)){n(Dt,null);var i=e(Dr);if(i){var o=i.paneGroupId,a=i.drop,l=i.fromRect,c=e(fe),u=G(e(fe),o);if(!u){var s=new Error("Expected paneGroup");throw n(ye,{error:s,origin:"Layout: state/paneGroupDragAndDrop/dragEndAtom"}),s}var d=u.panes[u.activeIndex],f=E(c,d);if(!f){var p=new Error("Expected pane");throw n(ye,{error:p,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragEndAtom"}),p}var h=(0,x.ZP)(c,(function(e){if(f.floating&&"floating"===i.startType){var t=T(e,f.paneGroupPath);if("floatingPaneGroup"!==(null===t||void 0===t?void 0:t.type))return;var o=l.x+r.x,c=l.y+r.y;return t.rect.x=o,void(t.rect.y=c)}if(a)if("split"!==a.type){var u=E(e,a.paneId);f.paneGroup.panes.forEach((function(t){!function(e,n){var t="floatingIndex"in n?e.floating[n.floatingIndex]:T(e,n.paneGroupPath);if(!t||!("panes"in t))throw new Error("Expected paneGroup");U(e,n.paneId);var r=void 0===n.index?t.panes.length:n.index;t.panes.splice(r,0,n.paneId),n.activate?t.activeIndex=r:t.activeIndex>=r&&t.activeIndex++}(e,{paneId:t,paneGroupPath:(null===u||void 0===u?void 0:u.paneGroupPath)||["tiling"],activate:!1}),n(ue,t)}))}else{if(null===e.tiling){var h=Ue()();try{On(e,{id:Ue()(),panes:[h],placement:"leftOf",relativeTo:["tiling"]})}catch(s){throw n(ye,{error:s,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragEndAtom"}),s}}try{!function(e,n){var t=n.from,r=n.to,i=n.placement,o=E(e,t);if(!o)throw new Error("Expected fromPane");var a=o.paneGroup,l=a.panes,c=a.activeIndex;L(e,o.paneGroupPath),On(e,{id:o.paneGroup.id,relativeTo:r,panes:l,placement:i,activeIndex:c})}(e,{from:d,to:a.relativeTo,placement:a.placement})}catch(p){throw n(ye,{error:p,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragEndAtom"}),p}}}));n(Dr,null),n(_e,h),"insert"===(null===a||void 0===a?void 0:a.type)&&n(ct,d)}}}));var Lr=(0,l.cn)(null,(function(e,n,t){var r=e(fe),i=e(J(t)),o=i.rectAtom,a=i.type,l=e(o),c=E(r,t);if(!c){var u=new Error("Expected pane");throw n(ye,{error:u,tags:{layoutstate:!0},origin:"Layout: state/toggleFloating"}),u}if("tile"!==a){var s=e(ee).filter((function(e){return"tile"===e.type&&!e.isHidden})),d=e(ie),f={x:l.x+l.width/2,y:l.y+l.height/2},p=s.find((function(n){var t=e(n.rectAtom);return ke(f,{x:t.x,y:t.y-d,width:t.width,height:t.height+d})})),h="leftOf";p&&(h=Ce(f,e(p.rectAtom)).placement),n(_e,(0,x.ZP)(r,(function(e){!function(e,n){var t=n.paneGroupPath,r=n.placement,i=n.to,o=T(e,t);if("floatingPaneGroup"!==(null===o||void 0===o?void 0:o.type))throw new Error("Expected floatingPaneGroup");L(e,t),null!==i?On(e,{id:o.id,relativeTo:i,panes:o.panes,activeIndex:o.activeIndex,placement:r}):e.tiling={id:o.id,panes:o.panes,percent:100,type:"paneGroup",activeIndex:o.activeIndex}}(e,{paneGroupPath:c.paneGroupPath,to:(null===p||void 0===p?void 0:p.paneId)||["tiling"],placement:h})})))}else n(_e,(0,x.ZP)(r,(function(e){Ir(e,{paneGroupPath:c.paneGroupPath,rect:{x:l.x-16,y:l.y-16,width:l.width,height:l.height}})})))})),Xr=t(48330),Nr=t(27562),Mr=t(11619);function Fr(e){var n=(0,i.Z)((function(){return(0,l.cn)((function(n){return!!n(Dn)&&n(le)===e}))}),[e]);return(0,i.Z)((function(){return(0,l.cn)((function(t){if(t(n))return t(Mn);var r=t(J(e));return t(r.rectAtom)}))}),[e,n])}function Or(e){var n=Ee(Fr(e)),t=function(e){var n,t=Wr(e);return(0,i.Z)((function(){return(0,z.kv)(t,(function(e){return null!==(n=null===e||void 0===e?void 0:e.scale)&&void 0!==n?n:1}))}),[t])}(e);return(0,i.Z)((function(){return(0,l.cn)((function(e){var r=e(n);return{x:r.x,y:r.y,scale:e(t)}}))}),[n,t])}function Wr(e){return(0,i.Z)((function(){return(0,l.cn)((function(n){var t=n(Dr);return t&&e===n(_r)?t:null}))}),[e])}function Hr(e){return(0,i.Z)((function(){return(0,l.cn)((function(n){return n(le)===e}))}),[e])}function Vr(e){return(0,i.Z)((function(){return(0,l.cn)((function(n){return n(n(J(e)).data)}))}),[e])}function zr(e){return(0,i.Z)((function(){return(0,z.kv)(J(e),(function(e){return"floating"===e.type}))}),[e])}function jr(e){return(0,i.Z)((function(){return(0,l.cn)((function(n){var t=n(Dr);return t&&e===t.paneGroupId?t:null}))}),[e])}function qr(e){var n=jr(e),t=Yr(e),r=Kr(e),o=function(e){var n=$r(e);return(0,i.Z)((function(){return(0,l.cn)((function(e){var t=e(le);if(!t)return!1;var r=e(n);return!!r&&r.panes.includes(t)}))}),[n])}(e);return(0,i.Z)((function(){return(0,l.cn)((function(e){return e(t)?Gt.maximizedHeader:e(n)?Gt.draggingHeader:e(r)?e(o)?Gt.floatingHeaderActive:Gt.floatingHeader:Gt.tiledHeader}))}),[n,t,r,o])}function $r(e){return(0,i.Z)((function(){return(0,z.kv)(fe,(function(n){return G(n,e)}))}),[e])}function Yr(e){var n=$r(e);return(0,i.Z)((function(){return(0,l.cn)((function(e){if(!e(Dn))return!1;var t=e(n);if(!t)return!1;var r=e(le);return!!r&&t.panes.includes(r)}))}),[n])}function Kr(e){var n=re(e);return(0,i.Z)((function(){return(0,z.kv)(n,(function(e){return"floating"===e.path[0]}))}),[n])}var Qr=(0,l.cn)((function(e){return Boolean(e(Dr)||e(Qt)||e(ze)||e(ht)||e(on))})),Jr=t(54659),ei=t(94716),ni=(0,l.cn)((function(e){if(e(Sr))return null;var n=e(le);if(!n)return null;var t=e(J(n)),r=e(t.data),i=t.paneId+r.type;return(0,v.Ur)(r)&&(i+=r.data.path),i}));function ti(e){var n=Rn(ni),t=Gn(le),r=(0,ei.Z)(e);(0,u.useEffect)((function(){var e=function(e){e&&(null!==i&&clearTimeout(i),i=setTimeout((function(){var e=t();e&&r.current(e)})))},i=null;e(n.current);var o=n.subscribe(e);return function(){null!==i&&clearTimeout(i),o()}}),[n,r,t])}function ri(){return En(ye)}function ii(){return In(Ge)}function oi(){return En(jt)}function ai(){return En(xe)}function li(){var e=In(xn);return(0,i.Z)((function(){return a()(e,1e3)}),[e])}function ci(){return In(be)}function ui(){return Gn(he)}function si(e){return En((0,i.Z)((function(){return(0,l.cn)((function(n){var t=n(J(e));return n(t.data)}))}),[e]))}function di(){return En(ve)}function fi(){return En(j)}function pi(){return En($)}function hi(){return En(q)}function vi(){return En(Ze)}function mi(){return{start:In(nn),update:In(tn),end:In(rn)}}function gi(){return En(br)}function yi(){return En(wr)}function Zi(){return In(kr)}function bi(){return In(xr)}function wi(){return In(Cr)}function xi(){return En(Sr)}function ki(){return In(Tr)}function Ci(){return In(Er)}function Si(){return In(Rr)}function Ti(){return In(tr)}function Ei(){return In(je)}function Ri(e){var n=e.isOver,t=In(Dt);return(0,u.useEffect)((function(){n||t(null)}),[n,t]),{drag:In(Vt),drop:In(zt)}}function Ii(){return En(se)}function Gi(){var e=In(ce),n=In(ue);return(0,i.Z)((function(){return function(t,r){(null===r||void 0===r?void 0:r.commit)&&n(t),e(t)}}),[n,e])}function Di(e){var n=e.paneId;return En((0,i.Z)((function(){return(0,l.cn)((function(e){return e(le)===n}))}),[n]))}function _i(){return En(le)}function Pi(){return En((0,i.Z)((function(){return(0,l.cn)((function(e){var n=e(le);if(!n)return null;var t=E(e(fe),n);return t?t.paneGroup.id:null}))}),[]))}function Bi(){return En(Dn)}function Ai(){return In(we)}function Ui(){return In(ue)}function Li(){return In(qt)}function Xi(){return In(lt)}function Ni(){return In($t)}function Mi(){return In(Yn)}function Fi(){return In(Kn)}function Oi(e){var n=e.isOver,t=In(Dt);return(0,u.useEffect)((function(){n||t(null)}),[n,t]),{drag:In(er),drop:In(nr)}}var Wi=(0,l.cn)(null,(function(e,n){n(ht,!1)}));function Hi(){return In(Wi)}function Vi(e){var n=e.paneGroupId,t=(0,i.Z)((function(){return(0,l.cn)((function(e){var t;return n===(null===(t=e(Dr))||void 0===t?void 0:t.paneGroupId)}))}),[n]);return En(t)}function zi(e){var n=e.paneGroupId,t=In(Pr),r=In(Br),o=In(Ur),a=(0,i.Z)((function(){return{start:function(e){var r=e.mouse;t({paneGroupId:n,mouse:r})},update:function(e){r(e)},end:function(e){o(e)}}}),[n,t,r,o]);return{isDragging:Vi({paneGroupId:n}),dnd:a}}function ji(){return In(ir)}function qi(){return In(or)}function $i(){return In(Lr)}function Yi(){return In(Jt)}function Ki(){return{maximizePane:In(Pn),maximizePaneGroup:In(Bn),restoreMaximizedPaneGroup:In(An),toggleMaximizePane:In(Un),toggleMaximizedPaneGroup:In(Ln)}}function Qi(){return In(ct)}function Ji(){return In(ut)}function eo(){return In(st)}function no(){return In(dt)}function to(){return En(ht)}function ro(){return In(ht)}function io(){return In(mt)}function oo(e){var n=function(e){var n=re(e);return{activeIndexAtom:(0,i.Z)((function(){return(0,l.cn)((function(e){return e(n).activeIndex}))}),[n]),pathAtom:(0,i.Z)((function(){return(0,z.kv)(n,(function(e){return e.path}),O())}),[n]),panesAtom:(0,i.Z)((function(){return(0,z.kv)(n,(function(e){return e.panes}),O())}),[n]),activeFileAtom:(0,i.Z)((function(){return(0,l.cn)((function(e){var t=e(n),r=e(J(t.panes[t.activeIndex])),i=e(r.data);return(0,v.Ur)(i)?(0,v.DQ)(i):null}))}),[n])}}(e),t=n.activeIndexAtom,r=n.pathAtom,o=n.panesAtom;return{activeIndex:Rn(t),path:Rn(r),panes:Rn(o),activeTabPaneId:Rn(gt(e))}}function ao(){return In(ft)}function lo(){return In(pt)}function co(){return In(at)}function uo(){return In(Zt)}function so(){return In(bt)}function fo(){return In(wt)}function po(){return In(function(){var e=(0,ot.gv)();return(0,i.Z)((function(){return(0,l.cn)(null,(function(n,t){var r=e();if(r){t(yt,[r]);var i=n(le);i&&t(ue,i)}}))}),[e])}())}function ho(){return In(xt)}function vo(){return In(kt)}function mo(e){return En(function(e){var n=e.paneGroupId;return(0,i.Z)((function(){return(0,l.cn)((function(e){var t=G(e(fe),n);return t?t.panes.length:null}))}),[n])}({paneGroupId:e.paneGroupId}))}function go(){return En((0,i.Z)((function(){return(0,l.cn)((function(e){var n=e(ne),t=[],r=[],i=!0,o=!1,a=void 0;try{for(var l,c=n[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value,s=u.panes.map((function(n){return[n,e(e(J(n)).data)]})),d="floating"===u.path[0];(d?t:r).push({activeIndex:u.activeIndex,paneGroupId:u.id,isFloating:d,panes:s})}}catch(f){o=!0,a=f}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return{floating:t,tiling:r}}))}),[]))}function yo(){return In(et)}function Zo(){return In(Vn)}function bo(){return In(zn)}function wo(){return In(qn)}function xo(){return In(dr)}function ko(){var e=En(cr),n=En(sr),t=In(fr);return n||!e?null:t}function Co(){return In(hr)}function So(){return e="tutorial",En((0,i.Z)((function(){return(0,l.cn)((function(n){return n(ee).find((function(t){return!t.isHidden&&n(t.data).type===e}))}))}),[e]));var e}function To(){return En(ge)}function Eo(){return Gn(fe)}function Ro(){var e=(0,Xr.Z)(),n=(0,Nr.T)(),t=(0,Mr.Z)().preferences.isLayoutStacked,i=(0,Jr.cR)(),o=(0,r.Z)(function(e){var n=(0,W.Z)({},Fe,e);return Ne.D(Oe,n)}(),1)[0];return(0,u.useCallback)((function(){var r=M({initialLayoutState:null,isStacked:t,isHTML:n,isExtension:i}),a=r.layout,l=r.data;o({variables:{input:{replId:e,state:{layout:a,data:l}}}})}),[e,o,n,t,i])}function Io(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=(0,u.useRef)(e),t=wo(),r=Eo();return(0,u.useCallback)((function(i){i.snapped?t({leftPath:i.leftPath,percent:n.current}):Promise.resolve(r()).then((function(r){var o=T(r,i.leftPath);if(!o||!B(o))throw new Error("Expected split or paneGroup");n.current=o.percent,t({leftPath:i.leftPath,percent:e})}))}),[e,t,r])}function Go(){return In(de)}function Do(){return En(me)}function _o(e){var n=Te(Fr(e)),t=Or(e),r=function(e){var n,t=Wr(e);return(0,i.Z)((function(){return(0,z.kv)(t,(function(e){return null!==(n=null===e||void 0===e?void 0:e.transformOriginX)&&void 0!==n?n:"0px"}))}),[t])}(e),o=function(e){var n=Fr(e);return(0,i.Z)((function(){return(0,l.cn)((function(e){var t=e(n),r=e(oe);return{x:Math.round(r.x+t.x),y:Math.round(r.y+t.y)}}))}),[n])}(e),a=function(e){return(0,i.Z)((function(){return(0,z.kv)(J(e),(function(e){return e.isHidden}))}),[e])}(e),c=function(e){return(0,i.Z)((function(){return(0,l.cn)((function(n){var t=n(J(e)),r=e===n(le);return n(_n)===e?Gt.maximizedPane:e===n(_r)?Gt.draggingPane:"floating"===t.type?r?Gt.floatingPaneActive:Gt.floatingPane:r?Gt.tiledPaneActive:Gt.tiledPane}))}),[e])}(e),u=function(e){return(0,i.Z)((function(){return(0,l.cn)((function(n){return!!n(Dr)&&n(_r)!==e&&"floating"!==n(J(e)).type}))}),[e])}(e),s=function(e){var n=Vr(e);return(0,i.Z)((function(){return(0,z.kv)(n,(function(e){return e.type}))}),[n])}(e),d=zr(e),f=Hr(e),p=function(e){return(0,i.Z)((function(){return(0,z.kv)(J(e),(function(e){return e.isCommitted}))}),[e])}(e),h=Vr(e),v=function(e){var n=zr(e),t=Hr(e),r=Wr(e);return(0,i.Z)((function(){return(0,l.cn)((function(e){return!e(Dn)&&Boolean(e(n)||e(t)||e(r))}))}),[n,t,r])}(e),m=function(e){var n=Wr(e);return(0,i.Z)((function(){return(0,z.kv)(n,Boolean)}),[n])}(e),g=function(e){var n,t=Wr(e);return(0,i.Z)((function(){return(0,z.kv)(t,(function(e){return null!==(n=null===e||void 0===e?void 0:e.movedAtAll)&&void 0!==n&&n}))}),[t])}(e);return{size:Rn(n),transform:Rn(t),paneType:Rn(s),transformOriginXAtom:Rn(r),viewportInset:Rn(o),zIndex:Rn(c),disableInteractions:Rn(Qr),animate:Rn(u),data:Rn(h),isFloating:Rn(d),isActive:Rn(f),isCommitted:Rn(p),isHidden:Rn(a),isBeingDragged:Rn(m),hasMovedWhileDragging:Rn(g),headerHeight:Rn(ie),hasBorder:Rn(v)}}function Po(e){var n=function(e){var n=Yr(e);return(0,i.Z)((function(){return(0,l.cn)((function(t){if(t(n))return t(Nn);var r=t(re(e));return t(r.rectAtom)}))}),[n,e])}(e),t=Te(n),r=Ee(n),o=function(e){var n,t=jr(e);return(0,i.Z)((function(){return(0,z.kv)(t,(function(e){return null!==(n=null===e||void 0===e?void 0:e.scale)&&void 0!==n?n:1}))}),[t])}(e),a=function(e){var n,t=jr(e);return(0,i.Z)((function(){return(0,z.kv)(t,(function(e){return null!==(n=null===e||void 0===e?void 0:e.transformOriginX)&&void 0!==n?n:"0px"}))}),[t])}(e),c=qr(e),u=function(e){var n=Kr(e);return(0,i.Z)((function(){return(0,l.cn)((function(t){var r=t(Dr);return!!r&&r.paneGroupId!==e&&!t(n)}))}),[e,n])}(e),s=Yr(e),d=Kr(e);return{size:Rn(t),position:Rn(r),scale:Rn(o),transformOriginX:Rn(a),zIndex:Rn(c),animate:Rn(u),isMaximized:Rn(s),isFloating:Rn(d)}}function Bo(e){var n=qe(e),t=$e(e),r=Te(t),o=Ee(t),a=Ye(e),c=function(e){var n=qe(e);return(0,i.Z)((function(){return(0,z.kv)(n,(function(e){var n=e.snapped;return Boolean(n)}))}),[n])}(e),u=Ke(e),s=function(e){var n=Te($e(e)),t=Ke(e);return(0,i.Z)((function(){return(0,l.cn)((function(e){var r=e(n),i=r.width,o=r.height;return e(t)?i:o}))}),[n,t])}(e),d=function(e){var n=qe(e);return(0,i.Z)((function(){return(0,l.cn)((function(e){var t=e(n),r=t.snapped,i=t.stacked;return"right"===r?i?180:90:"left"===r?i?0:270:0}))}),[n])}(e),f=function(e){var n=Ke(e),t=Ye(e),r=Te($e(e));return(0,i.Z)((function(){return(0,l.cn)((function(e){var i=e(r),o=i.width,a=i.height,l=e(t);return e(n)?{width:l?o:24,height:2}:{height:l?a:24,width:2}}))}),[r,n,t])}(e),p=function(e){var n=Te($e(e)),t=Ke(e);return(0,i.Z)((function(){return(0,l.cn)((function(e){var r=e(n),i=r.width,o=r.height;return(e(t)?i:o)<24}))}),[n,t])}(e);return{handle:Rn(n),size:Rn(r),position:Rn(o),isActive:Rn(a),isSnapped:Rn(c),isStacked:Rn(u),length:Rn(s),rotation:Rn(d),gripSize:Rn(f),gripIsHidden:Rn(p)}}var Ao=(0,l.cn)(!1),Uo=(0,l.cn)(0);function Lo(){var e=Te(ln),n=Ee(ln);return{size:Rn(e),position:Rn(n),isActive:Rn(on),length:Rn(cn),gripSize:Rn(an),isStacked:Rn(Ao),gripIsHidden:Rn(Ao),rotation:Rn(Uo)}}function Xo(){return{width:Rn(dn),isOpen:Rn(hn),toggle:In(Je)}}function No(){return Gn(me)}},65897:function(e,n,t){t.d(n,{Z:function(){return x}});var r=t(2272),i=t(74985),o=(t(50959),t(85368)),a=t(39541),l=t(61284),c=t(45510),u=t(51631),s=t(72006),d=t(43119),f=t(71440),p=t(27849),h=t(50216);function v(){var e=(0,d.Z)(["\n  mutation UnpublishReplUnpublish($input: UnpublishReplFromCommunityInput!) {\n    unpublishReplFromCommunity(input: $input) {\n      ... on Repl {\n        id\n        ...ReplViewReplActionsPermissions\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return v=function(){return e},e}var m={},g=(0,f.Ps)(v(),p.jN);var y=t(13233),Z=t(625),b=t(62405),w=o.K.form;function x(e){var n=e.repl,t=e.source,d=e.onDone,f=(0,y.Z)(),p=f.showConfirm,v=f.showError,x=(0,r.Z)(function(e){var n=(0,s.Z)({},m,e);return h.D(g,n)}({variables:{input:{replId:n.id}},onCompleted:function(e){if("Repl"===e.unpublishReplFromCommunity.__typename){var r=e.unpublishReplFromCommunity,i=r.runCount,o=r.likeCount,a=r.commentCount;(0,Z.j)(Z.U3.REPL_UNPUBLISHED,{source:t,numRuns:i,numLikes:o,numComments:a,replType:n.publishedAs===u.O2.Template?"template_repl":"regular_repl"}),p("Repl removed from the community.")}else"NotFoundError"===e.unpublishReplFromCommunity.__typename||"UnauthorizedError"===e.unpublishReplFromCommunity.__typename?v(e.unpublishReplFromCommunity.message):v("An unexpected error occurred.");d()},onError:function(){v("Something went wrong. Please try again.")},update:function(e){e.modify({id:e.identify({__typename:"Repl",id:n.id}),fields:{comments:function(e,n){return n.DELETE},tags:function(e,n){return n.DELETE}}})}}),2),k=x[0],C=x[1].loading;return(0,i.BX)(o.G,{css:[a.l0.colWithGap(24)],children:[(0,i.tZ)(l.xv,{variant:"subheadBig",children:"Unpublish this Repl from the Community"}),(0,i.BX)(w,{onSubmit:function(e){e.preventDefault(),k()},css:[a.l0.colWithGap(32)],children:[(0,i.tZ)(l.xv,{children:"Unpublishing a Repl will remove it from the Community. This action will delete all associated posts and tags. The Repl and all its comments will still be visible in your profile, but will not be shown in the Community or Trending views anymore. You can always re-publish the Repl again later."}),(0,i.BX)(o.G,{css:[a.l0.rowWithGap(8),a.l0.justify.end],children:[(0,i.tZ)(o.G,{children:(0,i.tZ)(c.zx,{type:"button",text:"Cancel",onClick:function(){return d()}})}),(0,i.tZ)(o.G,{children:(0,i.tZ)(c.zx,{disabled:C,colorway:"negative",text:C?"Unpublishing...":"Yes, unpublish this Repl",type:"submit",iconLeft:(0,i.tZ)(b.Z,{})})})]})]})]})}},17309:function(e,n,t){t.d(n,{Z:function(){return k}});var r=t(72006),i=t(4405),o=t(77637),a=t(74985),l=t(43312),c=t(50959),u=t(56169),s=t(85368),d=t(39137),f=t(39541),p=t(61284),h=t(32104),v=t(63837),m=t(57467),g=t(76735);var y={success:(0,l.iv)({":not([disabled])":{borderColor:f.TV.accentPositiveStrongest}}),error:(0,l.iv)({":not([disabled])":{borderColor:f.TV.accentNegativeStrongest}}),warning:(0,l.iv)({":not([disabled])":{borderColor:f.TV.yellowStrongest}}),default:void 0,loading:void 0},Z={success:(0,l.iv)([{color:f.TV.accentPositiveStrongest}]),error:(0,l.iv)([{color:f.TV.accentNegativeStrongest}]),warning:(0,l.iv)([{color:f.TV.yellowStrongest}]),default:void 0,loading:void 0},b={success:(0,a.tZ)(v.Z,{}),error:(0,a.tZ)(m.Z,{}),warning:(0,a.tZ)(g.Z,{}),default:void 0,loading:(0,a.tZ)(h.Z,{})},w=function(e){var n=b[e.state];return(0,a.BX)(s.G,{css:[Z[e.state],f.l0.rowWithGap(4)],children:[c.isValidElement(n)?c.cloneElement(n,{size:12}):null,(0,a.tZ)(p.xv,{variant:"small",multiline:!1,children:e.message})]})},x=(0,l.iv)("display:grid;grid-gap:",f.TV.space8,";grid-template-areas:'label . status'\n    'input input input'\n    'validation validation validation'\n    'details details details';> .label{grid-area:label;}> .status{grid-area:status;}> .input{grid-area:input;}> .details{grid-area:details;}> .validation{grid-area:validation;}"),k=function(e){var n,t=e.id,l=e.label,c=e.status,s=e.description,h=e["aria-describedby"],v=e.error,m=e.isValid,g=e.touched,b=e.value,k=e.warning,C=e.successText,S=(0,o.Z)(e,["id","label","status","description","aria-describedby","error","isValid","touched","value","warning","successText"]),T=(0,u.H)(),E=t||T("input"),R=c&&T("status"),I=s?T("description"):void 0,G=[R,I,h].filter(Boolean).join(" "),D=!(n={description:s,error:v,isValid:m,touched:g,value:b,warning:k,successText:C}).touched&&n.description?{state:"default",message:n.description}:n.error?{message:n.error.message,state:"error"}:n.warning?{message:n.warning.message,state:"warning"}:n.isValid?{message:n.successText||"",state:"success"}:n.touched?{message:"",state:"loading"}:void 0;return(0,a.BX)("div",{css:x,children:[(0,a.tZ)("label",{htmlFor:E,className:"label",children:(0,a.tZ)(p.xv,{variant:"small",color:"dimmer",multiline:!1,children:l})}),c?(0,a.tZ)(p.xv,{multiline:!1,variant:"small",color:"dimmer",css:[f.l0.textAlign.right],className:"status",children:c}):null,(0,a.tZ)(d.II,(0,i.Z)((0,r.Z)({id:E,className:"input",value:b,css:[y[(null===D||void 0===D?void 0:D.state)||"default"]]},S),{"aria-describedby":G,"aria-invalid":"error"===(null===D||void 0===D?void 0:D.state)})),(0,a.tZ)("div",{id:I,className:"validation",css:[Z[(null===D||void 0===D?void 0:D.state)||"default"]],"aria-live":"default"!==(null===D||void 0===D?void 0:D.state)?"polite":void 0,children:D?(0,a.tZ)(w,(0,r.Z)({},D)):null})]})}},9829:function(e,n,t){var r=t(72006),i=t(4405),o=t(74985),a=t(43312),l=function(e){return{animationDuration:e?"2000ms":"800ms",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out"}},c=(0,a.F4)("\n  0% { transform: translate(0px, 0px) }\n  25% { transform: translate(0px, 80px) }\n  50% { transform: translate(100px, 80px) }\n  75% { transform: translate(100px, 160px) }\n  100% { transform: translate(0px, 160px) }\n"),u=(0,a.F4)("\n  0% { transform: translate(0px, 0px) }\n  25% { transform: translate(0px, -80px) }\n  50% { transform: translate(-100px, -80px) }\n  100% { transform: translate(-100px, -80px) }\n"),s=(0,a.F4)("\n  0% { transform: translate(0px, 0px) }\n  50% { transform: translate(0px, 0px) }\n  75% { transform: translate(0px, -80px) }\n  100% { transform: translate(100px, -80px) }\n");n.Z=function(e){var n=e.height,t=void 0===n?24:n,a=e.color,d=void 0===a?"#F26207":a,f=e.slow,p=void 0!==f&&f,h={width:84,height:64,fill:d,rx:12};return(0,o.BX)("svg",{width:t/1.2,height:t,viewBox:"0 0 200 240",xmlns:"http://www.w3.org/2000/svg",children:[(0,o.tZ)("rect",(0,i.Z)((0,r.Z)({css:[l(p),{animationName:c}]},h),{x:8,y:8})),(0,o.tZ)("rect",(0,i.Z)((0,r.Z)({css:[l(p),{animationName:u}]},h),{x:108,y:88})),(0,o.tZ)("rect",(0,i.Z)((0,r.Z)({css:[l(p),{animationName:s}]},h),{x:8,y:168}))]})}},84563:function(e,n,t){t.d(n,{J:function(){return Z}});var r=t(72006),i=t(4405),o=t(77637),a=t(74985),l=t(50959),c=t(43312),u=t(92355),s=t(82568),d=t(17807),f=t(27691),p=t(39541),h=t(66539),v=t(85368),m=(0,c.F4)("0%{transform:translate(1px,1px) rotate(0deg);}10%{transform:translate(-1px,-1px) rotate(-1deg);}20%{transform:translate(-1px,0px) rotate(1deg);}30%{transform:translate(1px,1px) rotate(0deg);}40%{transform:translate(1px,-1px) rotate(1deg);}50%{transform:translate(-1px,1px) rotate(-1deg);}60%{transform:translate(-1px,1px) rotate(0deg);}70%{transform:translate(1px,1px) rotate(-1deg);}80%{transform:translate(-1px,-1px) rotate(1deg);}90%{transform:translate(1px,1px) rotate(0deg);}100%{transform:translate(1px,-1px) rotate(-1deg);}"),g=(0,c.F4)("from{opacity:0}to{opacity:1}"),y=(0,s.X)({self:[p.l0.flex.row,p.l0.flex.growAndShrink(1),p.l0.height(p.TV.space12),p.l0.borderRadius(16),p.l0.position.relative,d.gU.filledAndOutlined],progressWrapper:[p.l0.flex.row,p.l0.flex.growAndShrink(1),p.l0.height("100%"),p.l0.width("100%"),p.l0.borderRadius(16),p.l0.overflow("clip"),p.l0.position.relative],progress:[p.l0.position.relative,p.l0.width("100%"),p.l0.height("100%"),{top:0,left:0}],loading:f.p.backgroundPulse(),smoke:[p.l0.width("100%"),p.l0.height("500%"),p.l0.position.absolute,p.l0.left("50%"),p.l0.top("100%"),{opacity:.4,transition:"1s opacity",transform:"translate(-50%, -100%)",pointerEvents:"none"}],fadeInAnim:{animation:"".concat(g," 120ms forwards ease-out alternate")},shakeAnim:{animation:"".concat(m," 0.2s ease infinite")}});function Z(e){var n=e.total,t=e.tooltip,c=e.className,s=e.disabled,d=void 0!==s&&s,f=e.shake,p=void 0!==f&&f,m=e.smoke,g=void 0!==m&&m,Z=e.loading,w=void 0!==Z&&Z,x=(0,o.Z)(e,["total","tooltip","className","disabled","shake","smoke","loading"]),k=!(0,u.T)(),C=null;if(t)C=t;else if("current"in x)C="".concat(x.current||"0","/").concat(n);else if("data"in x){var S;C=null===(S=x.data)||void 0===S?void 0:S.map((function(e){var t=e.current;return"".concat(t||"0","/").concat(n)})).join(" | ")}return(0,a.tZ)(h.u,{placement:"top",tooltip:C,maxWidth:280,isDisabled:w,children:function(e,t){var o;if(w)o=null;else if("current"in x&&x.current)o=(0,a.tZ)(b,{total:n,disabled:d,current:x.current,color:x.color});else if("data"in x){var u;o=null===(u=x.data)||void 0===u?void 0:u.map((function(e,t){var o;return(0,l.createElement)(b,(0,i.Z)((0,r.Z)({},e),{key:"measure-bar-".concat(t),total:n,disabled:d,isLast:t+1===(null===(o=x.data)||void 0===o?void 0:o.length)}))}))}return(0,l.createElement)(v.G,(0,i.Z)((0,r.Z)({},e),{css:[y.self,y.fadeInAnim,w&&y.loading,k&&p&&y.shakeAnim],className:c,innerRef:t,onClick:void 0,key:w?"loadingMeasureBar":"finishedLoadingMeasureBar",role:"group",children:[(0,a.tZ)(v.G,{css:y.progressWrapper,children:o},"measureBarProgress"),k?(0,a.tZ)("img",{src:"/public/images/smoke.gif",alt:"",style:{opacity:g?void 0:0},css:y.smoke},"measureBarSmoke"):null]}))}})}function b(e){var n=e.current,t=e.total,i=e.color,o=void 0===i?p.TV.accentPrimaryDefault:i,l=e.disabled,c=void 0!==l&&l,u=e.isLast,s=void 0!==u&&u,d=(0,r.Z)({backgroundColor:c?p.TV.outlineDefault:o,width:w(n,t)+"%"},s?{borderTopRightRadius:p.TV.borderRadiusRound,borderBottomRightRadius:p.TV.borderRadiusRound}:{});return(0,a.tZ)(v.G,{css:y.progress,style:d,role:"meter","aria-label":"".concat(n," out of ").concat(t),"aria-valuemin":0,"aria-valuenow":n,"aria-valuemax":t})}function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return 0===n||0===e?0:Math.max(0,Math.min(100,e/n*100))}},47161:function(e,n,t){t.d(n,{u:function(){return g}});var r=t(74985),i=t(50959),o=t(82893),a=t.n(o),l=t(16022),c=t(17807),u=t(61284),s=t(39541),d=t(85368),f=t(63128),p=t(80336),h=t(87076),v=d.K.a,m=d.K.button,g=i.forwardRef((function(e,n){var t=e.className,o=e.colorway,g=e.closable,y=e.icon,Z=e.text,b=e.closeAction,w=(0,r.BX)(r.HY,{children:[y&&i.cloneElement(y,{size:16}),(0,r.tZ)(u.xv,{css:s.l0.flex.growAndShrink(1),variant:"small",children:Z})]}),x=o?l.Br[o].default:s.TV.accentPrimaryDefault,k=[s.l0.rowWithGap(4),s.l0.align.center,s.l0.p(4),s.l0.pl(8),s.l0.borderRadius(8),s.l0.flex.growAndShrink(1),o?(0,l.Ss)(o):c.gU.filledAndOutlined,{"&:focus-within":{boxShadow:"0 0 0 2px "+x}}];return(0,r.BX)(d.G,{css:k,children:["href"in e?(0,r.tZ)(a(),{as:e.as,href:e.href,passHref:!0,prefetch:e.prefetch,replace:e.replace,scroll:e.scroll,shallow:e.shallow,children:(0,r.tZ)(v,{ref:n,className:t,rel:e.rel,role:"link",target:e.target,css:[s.l0.reset.button,s.l0.rowWithGap(8),s.l0.center,s.l0.flex.growAndShrink(1)],children:w})}):(0,r.tZ)(m,{ref:n,className:t,onClick:e.onClick,type:e.type,css:[s.l0.reset.button,s.l0.rowWithGap(8),s.l0.center,s.l0.flex.growAndShrink(1)],children:w}),g?(0,r.tZ)(f.Tg,{elevated:!0,css:[s.l0.flex.grow(0),{background:"transparent"}],children:(0,r.tZ)(h.h,{alt:"Close",tooltipHidden:!0,colorway:o,onClick:b,children:(0,r.tZ)(p.Z,{})})}):null]})}));g.displayName="StatusBannerButton"},44333:function(e,n,t){t.d(n,{r:function(){return k}});var r=t(72006),i=t(4405),o=t(77637),a=t(74985),l=t(50959),c=t(18693),u=t(17074),s=t(64346),d=t(61284),f=t(85368),p=t(39541),h=t(17807),v=t(18988),m=t(53674),g=t(16022),y=t(82568),Z=f.K.label,b=(0,y.X)({label:[p.l0.rowWithGap(8),p.l0.align.center],svg:{" [data-switch-outline]":{transition:"stroke 100ms ease-out"},":hover [data-switch-outline]":{transition:"stroke 0ms"}},background:{transition:"fill 80ms ease-out"},button:{transition:"x 80ms ease-out"}}),w=function(e,n,t,r){return n?t||r?e.dimmer:e.default:h.vb.interactiveBorder},x=function(e,n,t,r,i){return!r||n||t?"transparent":i?e.strongest:h.vb.interactiveBorderHover},k=function(e){var n=e.colorway,t=void 0===n?"primary":n,f=e.dataCy,h=(0,o.Z)(e,["colorway","dataCy"]),y=g.Br[t],k=l.useRef(null),C=(0,s.l)(h),S=(0,c.h)(h,C,k).inputProps,T=(0,v.Fx)(h),E=T.focusProps,R=T.isFocusVisible,I=(0,m.XI)(h),G=I.hoverProps,D=I.isHovered,_=C.isSelected,P=h.isDisabled||!1,B=h.isReadOnly||!1,A=l.Children.count(h.children)>0;void 0!==h["aria-label"]||h["aria-labelledby"];var U=(0,a.BX)("svg",(0,i.Z)((0,r.Z)({"aria-hidden":"true"},G),{width:"38",height:"24",viewBox:"0 0 38 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",overflow:R?"visible":"hidden",style:{cursor:P||B?"auto":"pointer"},css:b.svg,children:[(0,a.tZ)("rect",{x:"0",y:"0",width:"38",height:"24",rx:"12",fill:w(y,_,P,B),css:b.background}),(0,a.tZ)("rect",{x:_?"18":"4",y:"4",width:"16",height:"16",rx:"8",fill:p.TV.white,opacity:P?.7:1,css:b.button}),(0,a.tZ)("rect",{x:"0.5",y:"0.5",width:"37",height:"23",rx:"12",stroke:x(y,P,B,D,_),"data-switch-outline":!0}),(0,a.tZ)("rect",{x:"-1",y:"-1",width:"40",height:"26",rx:"13",stroke:R?y.stronger:"transparent",strokeWidth:"2"})]}));return A?(0,a.BX)(Z,{css:b.label,children:[(0,a.tZ)(u.T,{children:(0,a.tZ)("input",(0,i.Z)((0,r.Z)({},S,E),{ref:k,"data-cy":f}))}),U,(0,a.tZ)(d.xv,{multiline:!1,children:h.children})]}):(0,a.BX)(Z,{css:b.label,children:[(0,a.tZ)(u.T,{children:(0,a.tZ)("input",(0,i.Z)((0,r.Z)({},S,E),{ref:k,"data-cy":f}))}),U]})}},89479:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(50959),i=t(45285);function o(){var e=(0,i.Z)().container,n=(0,r.useState)(e.getConnectionState()),t=n[0],o=n[1];return(0,r.useEffect)((function(){return e.onConnectionStateChanged(o)}),[e]),t}},77502:function(e,n,t){t.d(n,{Z:function(){return u}});var r=t(57135),i=t(2272),o=t(96583),a=t(50959),l=t(69921),c=t(94716);function u(e){var n=(0,l.Z)({container:e,service:"exec"}).channel,t=(0,a.useRef)(!1),u=(0,a.useRef)([]),s=(0,c.Z)((0,r.Z)((function(){var e,r,a,l,c,d,f,p,h,v;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:if(t.current)return[2];if(!u.current.length)return[2];if("open"!==(null===n||void 0===n?void 0:n.status))return[2];if(!(e=u.current.pop()))throw new Error("Expected request");return r=(0,i.Z)(e,2),a=r[0],l=a.args,c=a.env,d=r[1],f="",p=n.onCommand((function(e){e.output&&(f+=e.output)})),t.current=!0,[4,n.request({exec:{args:l,env:c}})];case 1:return h=o.sent(),t.current=!1,p(),v=h.channelClosed?"Channel closed":h.error,d(v?{error:v,output:f||null}:{output:f,error:null}),s.current(),[2]}}))}))),d=null===n||void 0===n?void 0:n.status;return(0,a.useEffect)((function(){"open"===d&&s.current()}),[d,s]),(0,a.useCallback)((function(e){var n=e.args,t=e.env;return new Promise((function(e){u.current.push([{args:n,env:t},e]),s.current()}))}),[s])}},68825:function(e,n,t){t.d(n,{Z:function(){return l}});var r=t(2272),i=t(50959),o=t(45285),a=t(87861);function l(){var e,n,t=(0,o.Z)().container,l=(0,r.Z)(i.useState(null!==(n=null===(e=t.getContext())||void 0===e?void 0:e.repl)&&void 0!==n?n:null),2),c=l[0],u=l[1];return i.useEffect((function(){return t.onConnectionStateChanged((function(e){var n,r;e===a.em.CONNECTED&&u(null!==(r=null===(n=t.getContext())||void 0===n?void 0:n.repl)&&void 0!==r?r:null)}))}),[u,t]),c}},60369:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(2272),i=t(50959);function o(e,n){var t=(0,r.Z)(i.useState(null),2),o=t[0],a=t[1];return i.useEffect((function(){var t=!1;return e.readFile(n).then((function(e){t||a(e)})),function(){t=!0}}),[e,n]),o}},38567:function(e,n,t){t.d(n,{Z:function(){return d}});var r=t(9970),i=t(94716),o=t(18171),a=t(73377),l=t(45285),c=t(50959),u=t(3341),s=t.n(u);function d(e){var n,t,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},f=(0,c.useState)(null),p=f[0],h=f[1],v=(0,i.Z)(p),m=null===(t=null!==(n=d.keepStaleResult)&&void 0!==n?n:d.refresh)||void 0===t||t,g=(0,c.useCallback)((function(e){s()(e,v.current)||h(e)}),[v]),y=(0,o.Z)((function(){return e}),(0,r.Z)(u)),Z=(0,l.Z)().git,b=(0,c.useRef)(null),w=(0,c.useCallback)((function(){b.current?b.current():m||g(null);var e=!1;y(Z).then((function(n){e||(g(n),b.current=null)})).catch((function(){if(!e){var n={error:a.aq.UNKNOWN};g(n),b.current=null}})),b.current=function(){e=!0,b.current=null,m||g(null)}}),[g,y,Z,m]);return(0,c.useEffect)((function(){return w()}),[w]),(0,c.useEffect)((function(){var e;if(null===(e=d.refresh)||void 0===e||e)return Z.onRefresh(w)}),[Z,w,d.refresh]),p}},4653:function(e,n,t){function r(e){var n,t=e.getServerCapabilities();return{isAutoCompleteSupported:Boolean(null===t||void 0===t?void 0:t.completionProvider),isCompletionItemResolveSupported:Boolean(null===t||void 0===t||null===(n=t.completionProvider)||void 0===n?void 0:n.resolveProvider),isDocumentSymbolSupported:Boolean(null===t||void 0===t?void 0:t.documentSymbolProvider),isFindReferencesSupported:Boolean(null===t||void 0===t?void 0:t.referencesProvider),isFindDefinitionSupported:Boolean(null===t||void 0===t?void 0:t.definitionProvider),isFindTypeDefinitionSupported:Boolean(null===t||void 0===t?void 0:t.typeDefinitionProvider),isFindImplementationSupported:Boolean(null===t||void 0===t?void 0:t.implementationProvider),isTextDocumentSyncSupported:Boolean(null===t||void 0===t?void 0:t.textDocumentSync),isHoverSupported:Boolean(null===t||void 0===t?void 0:t.hoverProvider),isRenameSupported:Boolean(null===t||void 0===t?void 0:t.renameProvider),isCodeActionsSupported:Boolean(null===t||void 0===t?void 0:t.codeActionProvider),isSignatureHelpSupported:Boolean(null===t||void 0===t?void 0:t.signatureHelpProvider)}}t.d(n,{Z:function(){return r}})},64491:function(e,n,t){t.d(n,{Z:function(){return w},X:function(){return b}});var r=t(2272),i=t(50959),o=t(45285),a=t(72006),l=t(4405),c=t(16783),u=t.n(c),s=t(29457),d=t(68339),f=t(67745);function p(e){return Math.floor(performance.now()-e.startTime)}var h=new WeakSet;function v(e){var n=e.client,t=e.replId,r=e.language;if(!h.has(n)){h.add(n);var i=new Map,o=function(e){var i,o=n.getServerState(),a=null!==(i=n.getServerInfo())&&void 0!==i?i:{name:"unknown",version:"none"},l=o===f.a.INITIALIZED?"".concat(null===a||void 0===a?void 0:a.name,"@").concat(null===a||void 0===a?void 0:a.version):"not_ready: server is ".concat(o);return{method:e.method,replid:t,language:r,startTime:Math.floor(e.startTime),languageServerInfo:l,lspId:n.clientId}},c=u()((function(e,n){var t=p(n);t>1e4&&s.kg.time("LSP unresponsive request",t,o(n))})),v=setInterval((function(){i.forEach((function(e){c(e.id,e)}))}),2e3);return(0,d.uf)([n.onRequest((function(e){var n=e.id,t=e.data;Math.random()<.01&&i.set(n,{id:n,method:t.method,startTime:performance.now()})})),n.onResponse((function(e){var n=e.id,t=e.error,r=i.get(n);null!=r&&(i.delete(n),s.kg.time("LSP request",p(r),(0,l.Z)((0,a.Z)({},o(r)),{result:null==t?"ok":"error"})))})),n.onCancelRequest((function(e){var n=i.get(e);null!=n&&(i.delete(e),s.kg.time("LSP request",p(n),(0,l.Z)((0,a.Z)({},o(n)),{result:"cancelled"})))})),function(){return clearInterval(v)},function(){return h.delete(n)}])}}var m=t(60396),g=t(27562),y=t(48330),Z=t(68825);function b(){var e=(0,Z.Z)(),n=(0,r.Z)(i.useState(null),2),t=n[0],o=n[1];return i.useEffect((function(){(null===e||void 0===e?void 0:e.language)&&o(e.language.startsWith("nix")||e.language.startsWith("html"))}),[e]),t}function w(e){var n=(0,y.Z)(),t=(0,g.Z)(),a=(0,o.Z)(),l=a.lsp,c=a.lspnix,u=(0,r.Z)(i.useState(null),2),s=u[0],d=u[1],f=b();return i.useEffect((function(){if(null!==f&&e){var n,t;if(f)n=c.onClient(e,d);else(null===(t=l.getClient())||void 0===t?void 0:t.isSupportedFile(e))?d(l.getClient()):d(null),n=l.onClient((function(n){(null===n||void 0===n?void 0:n.isSupportedFile(e))?d(n):d(null)}));return function(){n(),d(null)}}}),[l,c,e,f]),i.useEffect((function(){if(s)return v({client:s,replId:n,language:(0,m.D)(e,t)})}),[s,n,e,t]),s}},24746:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(2272),i=t(50959);function o(e){var n=e.presence,t=(0,r.Z)(i.useState(n.getActiveUsers()),2),o=t[0],a=t[1];return i.useEffect((function(){return a(n.getActiveUsers()),n.onActiveUsersChange((function(e){return a(e)}))}),[n]),o}},84630:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(2272),i=t(50959),o=t(45285);function a(){var e=(0,o.Z)().presence,n=(0,r.Z)(i.useState(e.getFollowedUser()),2),t=n[0],a=n[1];return i.useEffect((function(){return a(e.getFollowedUser()),e.onFollowedUserChanged(a)}),[e]),t}},69861:function(e,n,t){t.d(n,{Z:function(){return i}});var r=t(84630);function i(){var e=(0,r.Z)();return e?e.color:null}},16750:function(e,n,t){t.d(n,{M:function(){return l}});var r=t(74985),i=t(76735),o=t(25198),a=t(85368).K.a,l=function(){return(0,r.tZ)(a,{href:"https://docs.replit.com/programming-ide/workspace-features/expandable-storage",target:"_blank",children:(0,r.tZ)(o.E,{colorway:"orange",icon:(0,r.tZ)(i.Z,{}),text:"You're over the storage limit for your plan. Don't worry, you have a grace period to upgrade your quota or clear space before the limits affect you. Click to learn more."})})}},20952:function(e,n,t){t.d(n,{U:function(){return o}});var r=t(74985),i=t(45510),o=function(e){var n=e.isPro,t=e.setShowUpgradeModal;return(0,r.tZ)(i.zx,{colorway:"primary",text:n?"Change Storage":"Upgrade Storage",onClick:function(){return t(!0)}})}},65629:function(e,n,t){t.d(n,{M:function(){return C},l:function(){return k}});var r=t(57389),i=t(72006),o=t(4405),a=t(74985),l=t(48330),c=t(82568),u=t(39541),s=t(61284),d=t(85368),f=t(38785),p=t(31366),h=t(31992),v=t(27691),m=t(50959),g=t(52230),y=t(16750),Z=t(88541),b=t(8030),w=t(29262),x=(0,c.X)({storageBarWrapper:[u.l0.colWithGap(8)],summaryWrapper:[u.l0.colWithGap(8),u.l0.align.start],totalSummaryDot:[u.l0.backgroundColor.backgroundHigher,u.l0.width(8),u.l0.height(8),{borderRadius:"50%"}],replSummaryDot:[u.l0.backgroundColor.accentPrimaryDefault,u.l0.width(8),u.l0.height(8),{borderRadius:"50%"}],summaryRow:[u.l0.rowWithGap(8),u.l0.justify.start,u.l0.align.center,u.l0.fontSize(14),u.l0.height(14)],summaryRowWrap:[u.l0.rowWithGap(8),u.l0.justify.start,u.l0.align.center,u.l0.fontSize(14),{flexWrap:"wrap"}],replSummaryText:[u.l0.color.accentPrimaryStronger],replSummaryUsage:[u.l0.color.accentPrimaryStrongest],replSummaryTextPlaceholder:[v.p.backgroundPulse(u.TV.backgroundHigher,u.TV.backgroundRoot),{opacity:.5},u.l0.borderRadius(4),u.l0.height("100%"),u.l0.width(78)],replUsagePlaceholder:[v.p.backgroundPulse(u.TV.backgroundHigher,u.TV.backgroundRoot),{opacity:.5},u.l0.borderRadius(4),u.l0.height("100%"),u.l0.width(64)],totalUsagePlaceholder:[v.p.backgroundPulse(u.TV.backgroundHigher,u.TV.backgroundRoot),{opacity:.5},u.l0.borderRadius(4),u.l0.height("100%"),u.l0.width(140)],availablePlaceholder:[v.p.backgroundPulse(u.TV.backgroundHigher,u.TV.backgroundRoot),{opacity:.5},u.l0.borderRadius(4),u.l0.height("100%"),u.l0.width(64)],availableText:[u.l0.color.foregroundDimmest,(0,r.Z)({},u.BC.max(390),u.l0.pl(16))]}),k=function(e){var n,t=e.data,r=e.forceHideGracePeriod,c=void 0!==r&&r,u=(0,l.Z)(),v=(0,m.useState)(!1),k=v[0],S=v[1],T=(0,Z.P5)({controlName:"flag-dirigible-windmill",type:"boolean",logFlagToAnalytics:!1});if((0,m.useEffect)((function(){var e,n;t&&"AccountStorageUtilization"===(null===(e=t.currentUser)||void 0===e?void 0:e.storageInfo.accountStorageUtilization.__typename)&&"ReplStorageUtilization"===(null===(n=t.currentUser.storageInfo.accountStorageUtilization.perRepl.find((function(e){return e.repl.id===u})))||void 0===n?void 0:n.__typename)&&S(!0)}),[t,u]),t&&"CurrentUser"===(null===(n=t.currentUser)||void 0===n?void 0:n.__typename)&&"StorageQuota"===t.currentUser.storageInfo.storageQuota.__typename&&"StorageGracePeriodQuota"===t.currentUser.storageInfo.storageGracePeriodQuota.__typename&&"AccountStorageUtilization"===t.currentUser.storageInfo.accountStorageUtilization.__typename&&"UserPowerUpsTypes"===t.currentUser.userPowerUpsByType.__typename&&k){var E,R,I=null!==(E=t.currentUser.userPowerUpsByType.storage.currentSku)&&void 0!==E?E:void 0,G=I?w.zd[I]:void 0,D=t.currentUser.username,_=t.currentUser.storageInfo.accountStorageUtilization,P=t.currentUser.storageInfo.storageQuota.quota,B=t.currentUser.storageInfo.storageGracePeriodQuota.quota,A=_.total,U=_.perRepl,L=null!==(R=t.currentUser.userSubscriptionType)&&void 0!==R?R:void 0,X=L?w.XR[L]:w.XR.FREE,N=Math.max(Number(P)-Number(A),0),M="(".concat((0,h.fZ)(N,{precision:1})," available)"),F="0"!==B&&0===N&&T&&!c,O=U.find((function(e){return e.repl.id===u})),W="0"!==P?(0,a.tZ)(s.xv,{css:x.availableText,multiline:!1,children:M}):null;return(0,a.BX)(d.G,{css:x.storageBarWrapper,children:[(0,a.tZ)(f.$,{context:{type:"workspace_info_modal",replId:u},summary:(0,p._)((0,o.Z)((0,i.Z)({},_),{quota:P})),username:D}),(0,a.BX)(d.G,{css:x.summaryWrapper,children:[(0,a.BX)(d.G,{css:x.summaryRowWrap,children:[(0,a.BX)(s.xv,{multiline:!1,children:[(0,g.s)(L)," storage: ",X," GiB",G?" + ".concat(G," GiB add-on"):null]}),W]}),(0,a.BX)(d.G,{css:x.summaryRow,children:[(0,a.tZ)("div",{css:x.replSummaryDot}),(0,a.tZ)(s.xv,{css:x.replSummaryText,multiline:!1,children:"This Repl:"}),O?(0,a.tZ)(s.xv,{css:x.replSummaryUsage,multiline:!1,children:(0,b.s)(Number(O.usage))}):(0,a.tZ)(d.G,{css:x.replUsagePlaceholder})]}),F?(0,a.tZ)(y.M,{}):null]})]})}return(0,a.tZ)(C,{})},C=function(){return(0,a.BX)(d.G,{css:x.storageBarWrapper,children:[(0,a.tZ)(f.X,{}),(0,a.BX)(d.G,{css:x.summaryWrapper,children:[(0,a.BX)(d.G,{css:x.summaryRow,children:[(0,a.tZ)(d.G,{css:x.totalUsagePlaceholder}),(0,a.tZ)(d.G,{css:x.availablePlaceholder})]}),(0,a.BX)(d.G,{css:x.summaryRow,children:[(0,a.tZ)(d.G,{css:x.replSummaryTextPlaceholder}),(0,a.tZ)(d.G,{css:x.replUsagePlaceholder})]})]})]})}},52230:function(e,n,t){t.d(n,{s:function(){return i}});var r=t(51631),i=function(e){switch(e){case r.HP.HackerPro:return"Pro plan";case r.HP.Hacker:return"Hacker plan";default:return"Free plan"}}},72019:function(e,n,t){t.d(n,{g:function(){return o}});var r=t(74985),i=t(43312);function o(){return(0,r.tZ)(i.xB,{styles:[{body:{overflow:"hidden"}}]})}},46398:function(e,n,t){t.d(n,{w:function(){return f}});var r=t(72006),i=t(74985),o=t(30826),a=t.n(o),l=t(50959),c=t(10422),u=t(43312),s=t(48468),d=t(39541);function f(e){var n=e.targetElement,t=(0,l.useState)(null),o=t[0],f=t[1],h=(0,s.Z)((function(){n&&f({rect:n.getBoundingClientRect(),docWidth:document.documentElement.clientWidth,docHeight:document.documentElement.clientHeight})}),{type:"throttle",wait:100});if((0,l.useEffect)((function(){n&&h(n)}),[n,h]),(0,l.useEffect)((function(){if(n){var e=a()((function(){f({rect:n.getBoundingClientRect(),docWidth:document.documentElement.clientWidth,docHeight:document.documentElement.clientHeight})}),100);return window.addEventListener("resize",e),window.addEventListener("scroll",e),function(){window.removeEventListener("resize",e),window.removeEventListener("scroll",e)}}}),[n]),!o||!n)return null;var v=(0,u.iv)({backgroundColor:d.TV.backgroundOverlay,zIndex:d.n0+1,position:"fixed",transition:"all 0.5s ease-out"});return(0,c.createPortal)((0,i.BX)(i.HY,{children:[(0,i.tZ)("div",{id:"wat",css:[p((0,r.Z)({side:"left-top"},o)),v]}),(0,i.tZ)("div",{css:[p((0,r.Z)({side:"top-right"},o)),v]}),(0,i.tZ)("div",{css:[p((0,r.Z)({side:"right-bottom"},o)),v]}),(0,i.tZ)("div",{css:[p((0,r.Z)({side:"bottom-left"},o)),v]})]}),document.body)}function p(e){var n=e.side,t=e.rect,r=e.docWidth,i=e.docHeight;switch(n){case"left-top":return(0,u.iv)({top:0,left:0,width:Math.max(0,t.left),height:Math.max(0,t.bottom)});case"top-right":return(0,u.iv)({top:0,right:0,width:"calc(".concat(r,"px - ").concat(Math.max(0,t.left),"px)"),height:Math.max(0,t.top)});case"right-bottom":return(0,u.iv)({bottom:0,right:0,width:"calc(".concat(r,"px - ").concat(Math.max(0,t.right),"px)"),height:"calc(".concat(i,"px - ").concat(Math.max(0,t.top),"px)")});case"bottom-left":return(0,u.iv)({bottom:0,left:0,width:Math.max(0,t.right),height:"calc(".concat(i,"px - ").concat(Math.max(0,t.bottom),"px)")})}}},82781:function(e,n,t){t.d(n,{k:function(){return v}});var r=t(72006),i=t(4405),o=t(74985),a=t(66539),l=t(86065),c=t(50959),u=t(10422),s=t(34335),d=t(16022),f=t(39541),p=t(48468),h=t(99964);function v(e){var n=e.targetElement,t=e.activeStep,v=e.goto,m=e.currentStepIndex,g=e.totalSteps,y=e.done,Z=e.disableAnimation,b=e.placement,w=void 0===b?"right":b,x=e.cypressCloseData,k=void 0===x?"tour-tooltip-close-button":x,C=e.onClickOutside,S=e.innerRef,T=(0,c.useState)(null),E=T[0],R=T[1],I=(0,c.useState)(null),G=I[0],D=I[1],_=(0,s.D)(n,E,{placement:w,modifiers:[{name:"arrow",options:{element:G,padding:8}},{name:"offset",options:{offset:[0,16]}},{name:"preventOverflow",options:{padding:8}},{name:"flip",options:{fallbackPlacements:["top","bottom","left","right"]}},{name:"computeStyles",options:{adaptive:!1}}]}),P=(0,p.Z)((function(){var e;null===(e=_.update)||void 0===e||e.call(_)}),{type:"throttle",wait:100});(0,c.useEffect)((function(){P(n)}),[n,P]),(0,c.useImperativeHandle)(S,(function(){return{updateTooltip:function(){var e;null===(e=_.update)||void 0===e||e.call(_)}}}));var B=(0,h.Z)((function(){C&&C()}),[C]);return(0,u.createPortal)((0,o.BX)("div",(0,i.Z)((0,r.Z)({ref:function(e){B.current=e,R(e)},style:_.styles.popper,css:{transition:Z?"all":"all 0.5s ease-out",zIndex:f.n0+2,width:320}},_.attributes.popper),{children:[(0,o.tZ)(l.O,{title:t.title,content:t.content,onDismiss:function(){y()},currentStepIndex:m,onCurrentStepChange:v,totalSteps:g,cypressCloseData:k}),(0,o.tZ)("span",{style:_.styles.arrow,css:[a.wk,{"&::after":{backgroundColor:d.Br.primary.dimmest,border:"1px solid "+d.Br.primary.dimmer}}],ref:D})]})),document.body)}},26283:function(e,n,t){t.d(n,{r:function(){return g},e:function(){return y.e}});var r=t(57389),i=t(72006),o=t(4405),a=t(2272),l=t(74985),c=t(57488),u=t(50959),s=t(40865),d=t(86065),f=t(2041);function p(){var e=(0,s.X)();if(!e)return null;var n=e.activeStep,t=e.goto,r=e.steps,i=e.done;return(0,l.tZ)(f.u,{preventClose:!0,isOpen:Boolean(n.isModal),onRequestClose:function(){},centered:!0,maxWidth:"fit-content",noPadding:!0,children:(0,l.tZ)(d.O,{title:n.title,content:n.content,onDismiss:function(){i()},currentStepIndex:r.findIndex((function(e){return n.id===e.id})),onCurrentStepChange:t,totalSteps:r.length,cypressCloseData:"tour-tooltip-close-button"})})}var h=t(46398),v=t(82781),m=t(49500);function g(e){var n,t=e.children,d=e.tour,f=e.isDoneInitialOverride,g=e.onStep,y=e.onDone,Z=function(){_(!0),null===y||void 0===y||y(C.id)},b=function(e){B.current=C,null===g||void 0===g||g(e.id),S(e)},w=function(e){var n;if("number"===typeof e)n=e;else{var t=e;n=d.steps.findIndex((function(e){return t===e.id}))}if(!(n<0||n>=d.steps.length)){for(var r=d.steps[n],i=n<P;!E[r.id]&&r.autoSkipIfNoTarget;){if((n=i?n-1:n+1)<0||n>=d.steps.length)return;r=d.steps[n]}b(r)}},x=function(){w(0),_(!1)},k=(0,u.useState)(d.steps[0]),C=k[0],S=k[1],T=(0,u.useState)({}),E=T[0],R=T[1],I=function(e,n){var t,r=(0,c.Pp)({variables:{tours:e}}),i=r.data,o=r.loading,l=(0,a.Z)((0,c.oe)({variables:{name:e},optimisticResponse:{__typename:"RootMutationType",markTourAsSeen:{__typename:"TourSeen",id:e,seen:!0}}}),1)[0],s=(0,u.useState)(n),d=s[0],f=s[1],p=Boolean(null===i||void 0===i||null===(t=i.currentUser)||void 0===t?void 0:t.toursSeen[0].seen);return"boolean"===typeof d&&(p=d),{isLoading:o,isDone:p,setIsDone:function(e){f(e),e&&l()}}}(d.id,f),G=I.isDone,D=I.isLoading,_=I.setIsDone,P=d.steps.findIndex((function(e){return C.id===e.id}));if(-1===P)throw new Error("Current tour step is not in tour steps");var B=(0,u.useRef)(),A=(0,u.useCallback)((function(e,n){var t=d.steps.findIndex((function(n){return e===n.id}));if(-1===t)throw new Error("Invalid step id");if(d.steps[t].isModal)throw new Error("Trying to set a target element for a modal step");R((function(t){return t[e]===n?t:(0,o.Z)((0,i.Z)({},t),(0,r.Z)({},e,n))}))}),[d]),U=E[C.id],L=!G&&!D;window.startTour=function(){m.log("starting tour:",d.id,"from",d.steps[0].id),x()};var X=d.steps.filter((function(e){return!e.autoSkipIfNoTarget||Boolean(E[e.id])})),N=X.findIndex((function(e){return C.id===e.id}));return(0,l.BX)(s.z,{value:(0,o.Z)((0,i.Z)({},d),{setStepTargetElement:A,activeStep:C,next:function(){var e=d.steps[P+1];if(e&&e.autoSkipIfNoTarget)for(var n=P+1;e&&e.autoSkipIfNoTarget&&!E[e.id];)n++,e=d.steps[n];e?b(e):Z()},prev:function(){var e=d.steps[P-1];if(e&&e.autoSkipIfNoTarget)for(var n=P-1;e&&e.autoSkipIfNoTarget&&!E[e.id];)n--,e=d.steps[n];e&&b(e)},goto:w,isDone:G,isLoading:D,done:Z,restart:x}),children:[L&&C.isModal?(0,l.tZ)(p,{}):null,L&&U?(0,l.BX)(l.HY,{children:[(0,l.tZ)(h.w,{targetElement:U}),(0,l.tZ)(v.k,{targetElement:U,activeStep:C,currentStepIndex:N,done:Z,goto:function(e){w(e+P-N)},totalSteps:X.length,disableAnimation:Boolean(0===P||(null===(n=B.current)||void 0===n?void 0:n.isModal))})]}):null,t]})}var y=t(5858)},86419:function(e,n,t){var r;t.d(n,{z:function(){return r}}),function(e){e.FileNode="FILE_NODE",e.FileHeaderTab="FILE_HEADER_TAB",e.Code="CODE",e.Pane="PANE",e.NewPane="NEW_PANE"}(r||(r={}))},52491:function(e,n,t){t.d(n,{Y:function(){return x},Z:function(){return T}});var r=t(74985),i=t(50959),o=t(68935),a=t(14806),l=t(69994),c=t(45853),u=t(45634),s=t(73872),d=t(35981),f=t(39541),p=t(85368),h=t(24743),v=t(68339),m=t(84524),g=(0,d.u)(null),y=(0,d.u)(null),Z=(0,d.u)({from:0,to:0}),b=l.p.mark({class:"ast-hover"}),w=l.tk.baseTheme({".ast-hover":{background:f.TV.backgroundHighest}});function x(e){var n=e.view,t=(0,c.Z)({view:n}),r=(0,m.k)();(0,i.useEffect)((function(){if(r&&n){g.current=n.state;var e=a.Py.define(),i=(0,v.uf)([y.subscribe((function(t){n.dispatch({effects:e.of(t)})})),Z.subscribe((function(e){n.dispatch({selection:{anchor:e.from,head:e.to}})}))]);return n.dispatch({effects:t.reconfigure([l.tk.updateListener.of((function(e){(e.selectionSet||e.docChanged)&&(g.current=e.state)})),a.QQ.define({create:function(){return l.p.none},update:function(n,t){return n=n.map(t.changes),(0,u.j)(t,e,(function(e){n=null==e.value?l.p.none:l.p.set([b.range(e.value.from,e.value.to)])})),n},provide:function(e){return l.tk.decorations.from(e)}}),w])}),function(){g.current=null,i(),n.dispatch({effects:t.reconfigure([])})}}}),[n,r,t])}var k=(0,i.memo)((function(e){var n=e.node,t=e.index,i=e.active,o=e.terminal,a=n.type.name,l={from:n.from,to:n.to};return(0,r.BX)(p.G,{css:[{marginLeft:4*t+(o?4:0)},f.l0.mb(4),f.l0.rowWithGap(2),f.l0.align.center,f.l0.cursor.pointer],onMouseEnter:function(){y.current=l},onClick:function(){y.current=null,Z.current=l},children:[(0,r.tZ)(h.Z,{size:"small",fontFamily:a.length>1?"sans-serif":"monospace",fontWeight:i?"bold":"regular",children:a}),(0,r.BX)(h.Z,{size:"xsmall",truncate:!0,children:["(",n.from," \u2013 ",n.to,")"]})]})}));function C(e,n){for(var t=[];n(e);)t.push(e.node);return t}var S=(0,i.memo)((function(e){var n=e.state,t=(0,o.qz)(n),a=n.selection.main.head,l=(0,i.useMemo)((function(){return C(t.cursorAt(a),(function(e){return e.parent()})).reverse()}),[t,a]),c=(0,i.useMemo)((function(){return C(t.cursorAt(a),(function(e){return e.prevSibling()}))}),[t,a]),u=(0,i.useMemo)((function(){return C(t.cursorAt(a),(function(e){return e.nextSibling()}))}),[t,a]);return(0,r.BX)(p.G,{css:f.l0.ml(4),onMouseLeave:function(){y.current=null},children:[l.map((function(e,n){return(0,r.tZ)(k,{node:e,index:n},n)})),c.map((function(e,n){return(0,r.tZ)(k,{node:e,index:l.length,terminal:!0},n)})),(0,r.tZ)(k,{node:t.resolveInner(n.selection.main.head),index:l.length,terminal:!0,active:!0}),u.map((function(e,n){return(0,r.tZ)(k,{node:e,index:l.length,terminal:!0},n)}))]})}));function T(e){var n=e.isHidden,t=(0,s.Z)(g);return n?null:t?(0,r.tZ)(S,{state:t}):null}},49520:function(e,n,t){t.d(n,{YX:function(){return b},ho:function(){return w}});var r=t(66091),i=t(72006),o=t(4405),a=t(2272),l=t(74985),c=t(50959),u=t(39541),s=t(61284),d=t(85368),f=t(33358),p=t(32104),h=t(28069),v=t(63837),m=t(99453),g=t(73872),y=t(35981),Z=t(91476),b=new(function(){function e(){var n=this;(0,r.Z)(this,e),this.counter=0,this.enabled=!1,this.maxEntries=10,this.logs=(0,y.u)([]),this.clear=function(){n.logs.current=[]}}var n=e.prototype;return n.toggle=function(e){this.enabled=e},n.add=function(e){var n=this;if(!this.enabled)return{id:-1};var t=this.counter++,r={id:t,request:e,requestTime:Date.now()};return this.logs.update((function(e){return[r].concat(e).slice(0,n.maxEntries)})),{id:t}},n.update=function(e,n){this.enabled&&this.logs.update((function(t){var r=t.findIndex((function(n){return n.id===e.id}));if(-1===r)return t;var i=t.slice();return i[r]=n(i[r]),i}))},n.complete=function(e,n){this.update(e,(function(e){return(0,o.Z)((0,i.Z)({},e),{response:n,responseTime:Date.now()})}))},n.abort=function(e){this.logs.update((function(n){return n.filter((function(n){return n.id!==e.id||null!=n.responseTime}))}))},e}()),w=function(e){var n,t=e.isHidden,r=(0,g.Z)(b.logs);return t?null:(0,l.BX)(d.G,{css:[u.l0.flex.column],children:[(0,l.BX)(d.G,{css:[u.l0.flex.row,u.l0.align.center,u.l0.m(4),u.l0.position.sticky,u.l0.top(0),u.l0.backgroundColor.backgroundDefault,u.l0.zIndex(1)],children:[(0,l.tZ)(s.xv,{css:u.l0.flex.grow(1),multiline:!1,children:"Requests"}),(0,l.tZ)(f.Z,{onClick:b.clear})]}),(0,l.BX)(d.G,{css:[u.l0.flex.grow(1),u.l0.flex.column,u.l0.overflow("auto")],children:[r.map((function(e){return(0,l.tZ)(x,{log:e},null!==(n=e.id)&&void 0!==n?n:e.requestTime.valueOf())})),!r.length&&(0,l.tZ)(d.G,{css:u.l0.m(4),children:"\ud83d\ude14 No logs yet..."})]})]})},x=(0,c.memo)((function(e){var n=e.log,t=n.requestTime,r=n.responseTime,i=n.request,o=n.response,c=(0,a.Z)((0,m.Z)(!0),2),f=c[0],p=c[1],h=i.code.length>20?"...".concat(i.code.slice(-20)):i.code;return(0,l.BX)(d.G,{css:[u.l0.my(4),u.l0.mx(4)],children:[(0,l.BX)(d.G,{role:"button",onClick:p,onKeyDown:p,tabIndex:0,css:[u.l0.flex.row,u.l0.rowWithGap(4),{"&:hover":{cursor:"pointer",".lspLog-requestMethod":{textDecoration:"underline"}}}],children:[(0,l.BX)(d.G,{css:[u.l0.flex.grow(1),u.l0.rowWithGap(2)],children:[(0,l.tZ)(s.xv,{multiline:!1,children:k(n)}),(0,l.tZ)(s.xv,{multiline:!1,children:(0,l.tZ)("code",{children:h})})]}),(0,l.tZ)(d.G,{css:{opacity:.5},children:null!=r&&(0,l.BX)(s.xv,{css:u.l0.fontSize(13),multiline:!1,children:[r.valueOf()-t.valueOf()," ms"]})})]}),!f&&(0,l.BX)(l.HY,{children:[void 0!==i&&(0,l.tZ)(Z.g,{name:"request",src:i}),void 0!==o&&("CompleteCodeResult"===o.__typename?(0,l.BX)("details",{children:[(0,l.tZ)("summary",{children:"Response"}),(0,l.tZ)("pre",{css:[u.l0.overflow("scroll"),u.l0.borderRadius(4),u.l0.p(4),{border:"1px solid ".concat(u.TV.outlineDimmest)}],children:o.code})]}):(0,l.tZ)(Z.g,{name:"response",src:o}))]})]})}));function k(e){var n=e.response;return n?"CompleteCodeResult"===n.__typename?(0,l.tZ)(v.Z,{}):(0,l.tZ)(h.Z,{}):(0,l.tZ)(p.Z,{})}},44171:function(e,n,t){t.d(n,{Sj:function(){return c},Th:function(){return a},UB:function(){return u},a0:function(){return s},ot:function(){return l}});var r=t(72006),i=t(4405),o=t(91398);var a=(0,o.cn)([]),l=(0,o.cn)({regexp:null,direction:"",highlightOnly:!0}),c=(0,o.cn)((function(e){return function(e,n){if(!n.regexp&&!n.direction)return e.map((function(e){return(0,i.Z)((0,r.Z)({},e),{highlighted:!1})}));var t=function(e){var t=e.dir,r=e.channel,i=e.cmd;return(!n.direction||t===n.direction)&&!!(!n.regexp||!n.regexp.test||r.name&&n.regexp.test(r.name)||r.service&&n.regexp.test(r.service)||n.regexp.test(JSON.stringify(i)))};return n.highlightOnly?e.map((function(e){return t(e)?(0,i.Z)((0,r.Z)({},e),{highlighted:!0}):e})):e.filter(t)}(e(a),e(l))})),u=(0,o.cn)(null,(function(e,n){n(a,[])})),s=(0,o.cn)(!1)},97553:function(e,n,t){t.d(n,{Z:function(){return s}});var r=t(2272),i=t(9970),o=t(45285),a=t(92683),l=t(90171),c=t(50959),u=t(44171);function s(){var e=(0,l.useRouter)(),n=(0,o.Z)().container,t=(0,r.Z)((0,a.KO)(u.a0),2),s=t[0],d=t[1],f=(0,a.b9)(u.Th);(0,c.useEffect)((function(){e.query.debug&&d(!0)}),[d,e.query.debug]),(0,c.useEffect)((function(){if(s)return n.client().onDebugLog((function(e){if("log"===e.type){var t;if(e.log.channel)if(t={name:e.log.channel.name,service:null},"string"===typeof e.log.channel.service)t.service=e.log.channel.service;else if(e.log.channel.service){var r=n.getContext();r&&(t.service=e.log.channel.service(r))}f((function(n){return(0,i.Z)(n).concat([{index:n[n.length-1]?n[n.length-1].index+1:0,channel:t,dir:e.log.direction,cmd:e.log.cmd,timestamp:window.performance.now()}])}))}}))}),[s,f,n])}},91476:function(e,n,t){t.d(n,{L:function(){return _},g:function(){return B}});var r=t(57389),i=t(72006),o=t(4405),a=t(2272),l=t(74985),c=t(50959),u=t(56169),s=t(13716),d=t(64491),f=t(87076),p=t(39137),h=t(39541),v=t(61284),m=t(85368),g=t(33358),y=t(34938),Z=t(35458),b=t(32104),w=t(84815),x=t(50575),k=t(89435),C=t(61097),S=t(93658),T=t(79667),E=t(80336),R=t(63837),I=t(99453),G=t(68339),D=t(2954);var _=function(e){var n,t=e.isHidden,r=function(){var e=(0,c.useState)(null),n=e[0],t=e[1],r=(0,s.R3)();return(0,c.useEffect)((function(){r!==n&&null!=r&&t(r)}),[r,n]),n}(),b=(0,d.Z)(r||""),x=(0,u.H)(),k=(0,a.Z)((0,I.Z)(!0),2),C=k[0],S=k[1],E=(0,c.useState)(""),R=E[0],D=E[1],_=(0,c.useState)((function(){return[]})),B=_[0],U=_[1],L=(0,a.Z)((0,I.Z)(!0),2),X=L[0],N=L[1],M=(0,a.Z)((0,I.Z)(!0),2),F=M[0],O=M[1],W=(0,c.useCallback)((function(e){U((function(n){return n.unshift(e),n.slice(0,100)}))}),[]),H=(0,c.useCallback)((function(e,n){U((function(t){for(var r=0;r<t.length;r++)if(t[r].id===e){t[r]=n(t[r]);break}return t.slice(0,100)}))}),[]),V=(0,c.useCallback)((function(){U([])}),[]),z=null===b||void 0===b?void 0:b.isOpen(r||""),j=(0,c.useCallback)((function(){W({canceled:!1,notification:{method:"probe",params:{filePath:r,state:null===b||void 0===b?void 0:b.getServerState(),capabilities:null===b||void 0===b?void 0:b.getServerCapabilities(),diagnostics:z?null===b||void 0===b?void 0:b.getDiagnostics(r||""):[],isOpen:z,isSupportedFile:null===b||void 0===b?void 0:b.isSupportedFile(r||"")}},requestTime:new Date,type:"probe"})}),[W,b,r,z]),q=(0,c.useMemo)((function(){var e=R.split(",").map((function(e){return e.trim()})).filter(Boolean);if(!e.length)return B;var n=B;return X||(n=n.filter((function(e){return null==e.notification}))),F||(n=n.filter((function(e){return null==e.request}))),R&&(n=n.filter((function(n){return e.some((function(e){var t;return null===(t=n.request||n.notification)||void 0===t?void 0:t.method.toLowerCase().includes(e.toLowerCase())}))}))),n}),[B,X,F,R]);return(0,c.useEffect)((function(){return(0,G.uf)([null===b||void 0===b?void 0:b.onRequest((function(e){C&&W({id:e.id,canceled:!1,request:e.data,requestTime:new Date})})),null===b||void 0===b?void 0:b.onResponse((function(e){C&&H(e.id,(function(n){return(0,i.Z)((0,o.Z)((0,i.Z)({},n),{responseTime:new Date}),void 0!==e.result?{response:e.result}:{error:e.error})}))})),null===b||void 0===b?void 0:b.onCancelRequest((function(e){C&&H(e,(function(e){return(0,o.Z)((0,i.Z)({},e),{canceled:!0})}))})),null===b||void 0===b?void 0:b.onDiagnostics((function(e){var n=e.path,t=e.diagnostics;C&&W({canceled:!1,notification:{method:"textDocument/publishDiagnostics for "+n,params:t},requestTime:new Date,type:"diagnostics"})})),null===b||void 0===b?void 0:b.onServerStateChange((function(e){C&&W({canceled:!1,notification:{method:"state",params:{serverState:e}},requestTime:new Date,type:"state"})})),null===b||void 0===b?void 0:b.onServerCapabilitiesChange((function(e){C&&W({canceled:!1,notification:{method:"capabilities",params:{serverCapabilities:e}},requestTime:new Date,type:"capabilities"})})),null===b||void 0===b?void 0:b.onSendNotification((function(e){C&&W({canceled:!1,notification:e,requestTime:new Date})}))])}),[b,W,H,C]),t?null:(0,l.BX)(m.G,{css:[h.l0.flex.column],children:[(0,l.BX)(m.G,{css:[h.l0.flex.row,h.l0.align.center,h.l0.m(4),h.l0.position.sticky,h.l0.top(0),h.l0.backgroundColor.backgroundDefault,h.l0.zIndex(1)],children:[(0,l.tZ)(v.xv,{multiline:!1,children:b?(0,l.BX)(l.HY,{children:[(0,l.tZ)(A,{})," logs for ",(0,l.tZ)("code",{children:r})]}):"No LSP client available"}),(0,l.tZ)(f.h,{alt:"Probe LSP",onClick:j,children:(0,l.tZ)(w.Z,{})}),(0,l.tZ)(m.G,{css:h.l0.flex.grow(1)}),(0,l.tZ)(Z.Z,{id:"toggleIsLogging",isOn:C,onChange:S})," "]}),(0,l.BX)(m.G,{css:[h.l0.rowWithGap(8),h.l0.m(4),h.l0.mb(8)],children:[(0,l.BX)(m.G,{css:h.l0.rowWithGap(4),children:[(0,l.tZ)(T.Z,{}),(0,l.tZ)(v.xv,{multiline:!1,children:"Show"})]}),(0,l.BX)(m.G,{css:h.l0.rowWithGap(4),children:[(0,l.tZ)(y.X,{id:x("showNotifications"),checked:X,onChange:N}),(0,l.tZ)("label",{htmlFor:x("showNotifications"),children:" Notifications"})]}),(0,l.BX)(m.G,{css:h.l0.rowWithGap(4),children:[(0,l.tZ)(y.X,{id:x("showRequests"),checked:F,onChange:O}),(0,l.tZ)("label",{htmlFor:x("showRequests"),children:" Requests"})]}),(0,l.tZ)(m.G,{css:h.l0.flex.growAndShrink(1)}),(0,l.tZ)(m.G,{css:h.l0.rowWithGap(4),children:(0,l.tZ)(g.Z,{onClick:V})})]}),(0,l.tZ)(m.G,{css:h.l0.rowWithGap(4),children:(0,l.tZ)(p.II,{id:x("filterLsp"),placeholder:"Filter by method (Separate by ,)",onChange:function(e){return D(e.target.value)},value:R})}),(0,l.BX)(m.G,{css:[h.l0.flex.grow(1),h.l0.flex.column,h.l0.overflow("auto")],children:[q.map((function(e,t){return(0,l.tZ)(P,{log:e},null!==(n=e.id)&&void 0!==n?n:e.requestTime.valueOf()+""+t)})),!q.length&&(0,l.tZ)(m.G,{css:h.l0.m(4),children:"\ud83d\ude14 No logs yet..."})]})]})},P=c.memo((function(e){var n,t=e.log,r=t.requestTime,i=t.responseTime,o=t.request,c=t.response,u=t.notification,s=t.id,d=(0,a.Z)((0,I.Z)(!0),2),f=d[0],p=d[1];return(0,l.BX)(m.G,{css:[h.l0.my(4),h.l0.mx(4)],children:[(0,l.BX)(m.G,{role:"button",onClick:p,onKeyDown:p,tabIndex:0,css:[h.l0.flex.row,h.l0.rowWithGap(4),{"&:hover":{cursor:"pointer",".lspLog-requestMethod":{textDecoration:"underline"}}}],children:[(0,l.BX)(m.G,{css:[h.l0.flex.grow(1),h.l0.rowWithGap(2)],children:[(0,l.tZ)(v.xv,{className:"lspLog-emoji",multiline:!1,children:U(t)}),(0,l.BX)(v.xv,{className:"lspLog-requestMethod",multiline:!1,children:[(0,l.tZ)("code",{children:null===(n=o||u)||void 0===n?void 0:n.method}),null!=s&&(0,l.BX)("code",{className:"lspLog-logId",css:{opacity:.5},children:["#",s]})]})]}),(0,l.tZ)(m.G,{css:{opacity:.5},children:null!=i&&(0,l.BX)(v.xv,{css:h.l0.fontSize(13),multiline:!1,children:[i.valueOf()-r.valueOf()," ms"]})})]}),!f&&(0,l.BX)(l.HY,{children:[void 0!==o&&(0,l.tZ)(B,{name:"request.params",src:o.params}),void 0!==u&&(0,l.tZ)(B,{name:"notification.params",src:u.params}),void 0!==c&&(0,l.tZ)(B,{name:"response",src:c})]})]})})),B=(0,c.memo)((function(e){var n=e.name,t=e.src;return(0,l.tZ)(m.G,{css:{marginTop:5,".node-ellipsis":{letterSpacing:-2},".object-key span":{letterSpacing:0},".object-key-val":{paddingBottom:"0 !important"},'.object-key + span[style*="margin"], .array-key + span[style*="margin"]':{marginLeft:"0 !important"},".variable-row, .pushed-content .object-key-val":{paddingLeft:"10px !important",paddingBottom:"0 !important"}},children:(0,l.tZ)(D.Z,{json:(0,r.Z)({},n,t)})})})),A=function(){return(0,l.tZ)(v.xv,{multiline:!1,css:{display:"inline",fontStyle:"italic",fontWeight:600,textShadow:"".concat(h.TV.redDimmer," 2px 2px")},children:"LSP"})};function U(e){var n=e.type,t=e.canceled,r=e.response,i=e.notification;return"state"===n?(0,l.tZ)(C.Z,{}):"diagnostics"===n?(0,l.tZ)(x.Z,{}):"capabilities"===n?(0,l.tZ)(k.Z,{}):"probe"===n?(0,l.tZ)(w.Z,{}):t?(0,l.tZ)(E.Z,{}):i?(0,l.tZ)(S.Z,{}):void 0!==r?(0,l.tZ)(R.Z,{}):(0,l.tZ)(b.Z,{})}},99453:function(e,n,t){t.d(n,{Z:function(){return i}});var r=t(50959);function i(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=(0,r.useState)(e),t=n[0],i=n[1],o=(0,r.useCallback)((function(){return i((function(e){return!e}))}),[]);return[t,o]}},54629:function(e,n,t){t.d(n,{AA:function(){return C},CH:function(){return y},Gg:function(){return m},Ne:function(){return T},pV:function(){return x},vk:function(){return b}});var r=t(72006),i=t(43119),o=t(71440),a=t(70751),l=t(24635),c=t(50216);function u(){var e=(0,i.Z)(["\n  fragment AutograderTest on ReplTemplateTest {\n    id\n    name\n    input\n    output\n    name\n    type\n  }\n"]);return u=function(){return e},e}function s(){var e=(0,i.Z)(["\n  query Autograder($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        currentUserPermissions {\n          writeTests\n        }\n        template {\n          id\n        }\n        ioTests {\n          id\n          ...AutograderTest\n        }\n        unitTests {\n          meta {\n            id\n            ...UnitTestsReplUnitTestMeta\n          }\n          tests {\n            id\n            ...UnitTestsReplUnitTest\n            lastRun(replId: $replId) {\n              ... on ReplUnitTestLastRun {\n                status\n              }\n              ... on UserError {\n                message\n              }\n            }\n          }\n        }\n        isProject\n        isProjectFork\n        owner {\n          ... on Team {\n            id\n            isAdmin\n          }\n          ... on User {\n            id\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return s=function(){return e},e}function d(){var e=(0,i.Z)(["\n  mutation SaveIOTestResults(\n    $teamId: Int!\n    $replId: String!\n    $results: [IOTestResultInput!]!\n  ) {\n    saveIOTestResults(teamId: $teamId, replId: $replId, results: $results) {\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n"]);return d=function(){return e},e}function f(){var e=(0,i.Z)(["\n  mutation CreateAutograderTest($input: CreateTemplateTestInput!) {\n    createTemplateTest(input: $input) {\n      ... on ReplTemplateTest {\n        id\n        ...AutograderTest\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function p(){var e=(0,i.Z)(["\n  mutation UpdateAutograderTest($input: UpdateTemplateTestInput!) {\n    updateTemplateTest(input: $input) {\n      ... on ReplTemplateTest {\n        id\n        ...AutograderTest\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return p=function(){return e},e}function h(){var e=(0,i.Z)(["\n  mutation DeleteAutograderTest($testId: Int!) {\n    deleteTemplateTest(testId: $testId) {\n      ... on ReplTemplate {\n        id\n        tests {\n          id\n          ...AutograderTest\n        }\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return h=function(){return e},e}var v={},m=(0,o.Ps)(u()),g=(0,o.Ps)(s(),m,a.aA,a.Rb);function y(e){var n=(0,r.Z)({},v,e);return l.a(g,n)}var Z=(0,o.Ps)(d());function b(e){var n=(0,r.Z)({},v,e);return c.D(Z,n)}var w=(0,o.Ps)(f(),m);function x(e){var n=(0,r.Z)({},v,e);return c.D(w,n)}var k=(0,o.Ps)(p(),m);function C(e){var n=(0,r.Z)({},v,e);return c.D(k,n)}var S=(0,o.Ps)(h(),m);function T(e){var n=(0,r.Z)({},v,e);return c.D(S,n)}},20864:function(e,n,t){t.d(n,{Mp:function(){return l},ac:function(){return a},ev:function(){return o}});var r=t(43312),i=t(39541),o=(0,r.iv)({position:"relative",overflowY:"auto",width:"100%",height:"100%",zIndex:3}),a=(0,r.iv)({position:"relative",overflowY:"auto",width:"100%",height:"100%",fontSize:"14px",backgroundColor:i.TV.backgroundDefault}),l=(0,r.iv)({display:"flex",alignItems:"stretch",width:"100%",height:"100%","& > .cm-editor":{flex:"1 1 auto",width:"100%"}})},10444:function(e,n,t){t.d(n,{Rz:function(){return y},xy:function(){return b}});var r=t(57135),i=t(9970),o=t(96583),a=t(74985),l=t(99726),c=t(49944),u=t(82568),s=t(39541),d=t(85368),f=t(83005),p=t(87978),h=(0,u.X)({root:[s.l0.rowWithGap(8),s.l0.align.center,s.l0.flex.growAndShrink(1),s.l0.px(8),{userSelect:"none"}],header:[{fontSize:s.TV.fontSizeSmall,opacity:.6},s.l0.color.foregroundDimmest,s.l0.truncate],result:[s.l0.colWithGap(0)],fileName:[s.l0.truncate,s.l0.flex.row]});function v(e){var n=e.height,t=e.active,r=e.match,i=r.directory,o=r.filename;return(0,a.BX)(d.G,{css:h.root,style:{height:n},children:[(0,a.tZ)(f.Z,{path:o.text,size:16}),(0,a.BX)(d.G,{css:h.result,children:[i?(0,a.tZ)(d.G,{css:h.header,children:(0,a.tZ)(c.x,{text:i.text+"/",highlight:i.ranges,dimmed:!t})}):null,(0,a.tZ)(d.G,{css:h.fileName,children:(0,a.tZ)(c.x,{text:o.text,highlight:o.ranges,dimmed:!t})})]})]})}var m={match:l.kN,forward:!1,tiebreakers:[function(e,n,t){return t(e.item).trim().length-t(n.item).trim().length}]};function g(e){for(var n=(0,i.Z)(e.values()).sort((function(e,n){return e-n})),t=[],r=n[0],o=n[0],a=1;a<n.length;a++)n[a]===o+1?o++:(t.push({from:r,to:o+1}),r=n[a],o=n[a]);return t.push({from:r,to:o+1}),t}function y(e,n){return Z.apply(this,arguments)}function Z(){return(Z=(0,r.Z)((function(e,n){return(0,o.__generator)(this,(function(t){switch(t.label){case 0:return[4,new l.Zn(n,m).find(e)];case 1:return[2,t.sent().map((function(e){return{path:e.item,score:e.score,ranges:g(e.positions)}}))]}}))}))).apply(this,arguments)}function b(e){var n=e.path,t=e.ranges,r=function(e){var n=e.ranges,t=e.path,r=(0,p.UO)(t),i=(0,p.Il)(t);if(!i)return{filename:{text:r,ranges:n.length?n:void 0}};var o=i.length,a=o+1,l=[],c=[],u=!0,s=!1,d=void 0;try{for(var f,h=n[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var v=f.value;if(v.from<o){l.push({from:v.from,to:Math.min(v.to,o)});var m=v.to-a;if(m<=0)continue;c.push({from:0,to:m})}else v.from<a||c.push({from:v.from-a,to:v.to-a})}}catch(g){s=!0,d=g}finally{try{u||null==h.return||h.return()}finally{if(s)throw d}}return{filename:{text:r,ranges:c.length?c:void 0},directory:{text:i,ranges:l.length?l:void 0}}}({path:n,ranges:null!==t&&void 0!==t?t:[]}),i=r.directory?44:32;return{height:i,content:(0,a.tZ)(v,{match:r,height:i})}}},81420:function(e,n,t){t.d(n,{i:function(){return b},w:function(){return g}});var r=t(57135),i=t(2272),o=t(96583),a=t(74985),l=(t(50959),t(33064)),c=t(76735),u=t(94452),s=t(83005),d=t(85368),f=t(61284),p=t(39541),h=t(22011),v=t(10444),m=t(24592);function g(e){return y.apply(this,arguments)}function y(){return(y=(0,r.Z)((function(e){var n,t,r;return(0,o.__generator)(this,(function(i){switch(i.label){case 0:return n=e.search,t=e.paths,r=e.run,n?[4,(0,v.Rz)(n,t)]:[2,t.map((function(e){return{data:{type:"action",label:e,icon:(0,a.tZ)(s.Z,{path:e}),run:function(){return r(e)}},match:function(){return{score:1,render:(0,v.xy)({path:e})}}}}))];case 1:return[2,i.sent().map((function(e){var n=e.path,t=e.score,i=e.ranges;return{data:{type:"action",label:n,icon:(0,a.tZ)(s.Z,{path:n}),run:function(){return r(n)}},match:function(){return{score:t,render:(0,v.xy)({path:n,ranges:i})}}}}))]}}))}))).apply(this,arguments)}function Z(){return(0,a.BX)(d.G,{css:[p.l0.rowWithGap(8)],children:[(0,a.tZ)(c.Z,{}),(0,a.tZ)(f.xv,{color:"dimmest",multiline:!1,children:"Something went wrong searching your Repl's files. Please try again."})]})}function b(e){return(0,u.fA)({type:"context",label:"Files",description:"Find a file",icon:(0,a.tZ)(l.Z,{}),keyboardShortcut:e.keyboardShortcut?e.keyboardShortcut:void 0},{match:(0,u.zf)({defaultScore:3}),commands:function(){var n=(0,r.Z)((function(n){var t,l,u,d,f,p,v,y,b,w,x,k,C,S,T,E;return(0,o.__generator)(this,(function(R){switch(R.label){case 0:return t=e.fs,l=e.shouldHideFile,n.search||n.active&&!e.lazyLoad?[4,Promise.resolve(e.getRecentFiles())]:[2,[]];case 1:return u=R.sent(),d=[],n.search||n.active?[4,t.listFiles()]:[3,3];case 2:if((f=R.sent()).error)return[2,[{data:{type:"error",label:f.error,icon:(0,a.tZ)(c.Z,{})},match:function(){return{score:1,render:{content:(0,a.tZ)(Z,{})}}}}]];if(!f.files)throw new Error("Expected files");p=!0,v=!1,y=void 0;try{for(b=f.files[Symbol.iterator]();!(p=(w=b.next()).done);p=!0)x=w.value,l(x)||u.includes(x)||d.push(x)}catch(I){v=!0,y=I}finally{try{p||null==b.return||b.return()}finally{if(v)throw y}}R.label=3;case 3:return k=[],[4,Promise.all([g({search:n.search,paths:u,run:function(n){e.openFile({path:n})}}),g({search:n.search,paths:d,run:function(n){e.openFile({path:n})}})])];case 4:return C=i.Z.apply(void 0,[R.sent(),2]),S=C[0],T=C[1],S.length&&k.push({data:{type:"context",label:"Recent",icon:(0,a.tZ)(m.Z,{})},commands:function(){return S}}),T.length&&k.push({data:{type:"group",key:"files"},commands:function(){return T}}),0===T.length&&0===S.length&&n.active&&(E=n.search,k.push({data:{label:E,description:"Create a new file",icon:(0,a.tZ)(s.Z,{path:E}),type:"action",run:(0,r.Z)((function(){return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return[4,t.writeFile(E,h.Z.from(""))];case 1:return n.sent().error?[2,{type:"error",message:'Could not create "'+E+'"'}]:(e.openFile({path:E}),[2])}}))}))},match:function(){return{score:1}}})),[2,k]}}))}));return function(e){return n.apply(this,arguments)}}()})}},94452:function(e,n,t){t.d(n,{fA:function(){return i},pl:function(){return a},zf:function(){return o}});var r=t(16918);function i(e,n){var t=n.commands;return{data:e,match:n.match,commands:t}}function o(e){var n=e.defaultScore,t=void 0===n?1:n;return function(e){var n=e.search,i=e.data,o=e.active;if("group"===i.type)return null;if(!n&&o)return{score:t};if(!n)return{score:t};var a=r.Z.match(n,i.label);return a?{score:a.score,render:{ranges:a.ranges}}:null}}var a=o({defaultScore:1})},1088:function(e,n,t){t.d(n,{F:function(){return S},q:function(){return C}});var r=t(57135),i=t(2272),o=t(96583),a=t(74985),l=(t(50959),t(16918)),c=t(94452),u=t(2255),s=t(12260),d=t(76735),f=t(39541),p=t(85368),h=t(61284),v=t(82568),m=t(83005),g=t(250),y=t(68702),Z=(0,v.X)({root:[f.l0.colWithGap(4),f.l0.align.start,f.l0.flex.growAndShrink(1),f.l0.p(8)],header:[f.l0.rowWithGap(4),f.l0.align.center],singleLine:[{whiteSpace:"nowrap",fontFamily:f.TV.fontFamilyCode},f.l0.truncate,f.l0.color.foregroundDimmest]});function b(e){var n=e.path,t=e.line;return(0,a.BX)(p.G,{css:Z.root,children:[(0,a.BX)(p.G,{css:Z.header,children:[(0,a.tZ)(m.Z,{path:n,size:12}),(0,a.BX)(h.xv,{variant:"small",color:"dimmest",multiline:!1,children:[n.replace(/^\.\//,""),":",t.lineNumber]})]}),(0,a.tZ)(p.G,{css:Z.singleLine,children:(0,a.tZ)(u.xK,{source:t.content,matches:t.matches})})]})}function w(){return(0,a.BX)(p.G,{css:[f.l0.px(8),f.l0.rowWithGap(8),f.l0.align.center],children:[(0,a.tZ)(d.Z,{}),(0,a.tZ)(h.xv,{color:"dimmest",multiline:!1,children:"Something went wrong searching your Repl's contents. Please try again."})]})}function x(){return(0,a.BX)(p.G,{css:[f.l0.rowWithGap(8),f.l0.p(8),f.l0.align.center],children:[(0,a.tZ)(d.Z,{}),(0,a.tZ)(h.xv,{color:"dimmest",multiline:!1,children:"Displaying only part of the results, try being more specific with your search."})]})}function k(){return(0,a.tZ)(p.G,{css:[f.l0.rowWithGap(8),f.l0.p(8),f.l0.align.center],children:(0,a.tZ)(h.xv,{color:"dimmest",multiline:!1,children:"Nothing came up searching your Repl's content."})})}var C=(0,g.l2)({cmdOrCtrl:!0,shift:!0,key:"f"});function S(e){var n,t=(0,y.e)({container:e.container});return(0,c.fA)({type:"context",description:"Search through your files",label:"Search",icon:(0,a.tZ)(s.Z,{}),keyboardShortcut:e.keyboardShortcut?C:void 0},{match:(0,c.zf)({defaultScore:2}),commands:function(){var c=(0,r.Z)((function(r){var c,u,s,f,h,v,g,y,Z,C,S,T;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return r.search?!r.active&&e.activeOnly?[2,[]]:(c=Math.random(),n=c,[4,t({query:r.search})]):[2,[]];case 1:if(u=o.sent(),s=u.results,f=u.error,h=u.isPartialResult,c!==n)return[2,[]];if(null!==f)return r.active?[2,[{data:{type:"error",label:"error",icon:(0,a.tZ)(d.Z,{})},match:function(){return{score:1,render:{content:(0,a.tZ)(w,{})}}}}]]:[2,[]];v=[],g=!0,y=!1,Z=void 0;try{for(C=function(){var n=(0,i.Z)(T.value,2),t=n[0];n[1].forEach((function(n){var i=n.matches[0].column;v.push({match:function(){var e=l.Z.match(r.search,n.content);return{score:(null===e||void 0===e?void 0:e.score)||1,render:{height:60,content:(0,a.tZ)(b,{path:t,line:n})}}},data:{type:"action",label:t,icon:(0,a.tZ)(m.Z,{path:t}),key:[t,n.lineNumber,i].join(":"),run:function(){e.openFile({path:t,line:n.lineNumber,col:i})}}})}))},S=Object.entries(s)[Symbol.iterator]();!(g=(T=S.next()).done);g=!0)C()}catch(E){y=!0,Z=E}finally{try{g||null==S.return||S.return()}finally{if(y)throw Z}}if(0===v.length&&r.active)return[2,[{data:{type:"output",label:"",icon:(0,a.tZ)(p.G,{})},match:function(){return{score:1,render:{content:(0,a.tZ)(k,{})}}}}]];if(r.active){if(0===v.length)return[2,[{data:{type:"output",label:"",icon:(0,a.tZ)(p.G,{})},match:function(){return{score:1,render:{content:(0,a.tZ)(k,{})}}}}]];h&&v.push({data:{type:"error",label:"error",icon:(0,a.tZ)(d.Z,{})},match:function(){return{score:1/0,render:{content:(0,a.tZ)(x,{})}}}})}return[2,v]}}))}));return function(e){return c.apply(this,arguments)}}()})}},67570:function(e,n,t){t.d(n,{Z:function(){return ke}});var r=t(57135),i=t(72006),o=t(4405),a=t(2272),l=t(96583),c=t(74985),u=t(50959),s=t(91926),d=t(32343),f=t(48306),p=t.n(f),h=function(e){var n=(0,d.Z)({},e);return(0,c.BX)(c.HY,{children:[(0,c.tZ)(p(),{id:"fcfe85a13ecbf46b",children:".one.jsx-fcfe85a13ecbf46b{opacity:.1;-webkit-animation:dot 1.5s ease-in-out infinite;-moz-animation:dot 1.5s ease-in-out infinite;-o-animation:dot 1.5s ease-in-out infinite;animation:dot 1.5s ease-in-out infinite;-webkit-animation-delay:0s;-moz-animation-delay:0s;-o-animation-delay:0s;animation-delay:0s}.two.jsx-fcfe85a13ecbf46b{opacity:.1;-webkit-animation:dot 1.5s ease-in-out infinite;-moz-animation:dot 1.5s ease-in-out infinite;-o-animation:dot 1.5s ease-in-out infinite;animation:dot 1.5s ease-in-out infinite;-webkit-animation-delay:.1s;-moz-animation-delay:.1s;-o-animation-delay:.1s;animation-delay:.1s}.three.jsx-fcfe85a13ecbf46b{opacity:.1;-webkit-animation:dot 1.5s ease-in-out infinite;-moz-animation:dot 1.5s ease-in-out infinite;-o-animation:dot 1.5s ease-in-out infinite;animation:dot 1.5s ease-in-out infinite;-webkit-animation-delay:.2s;-moz-animation-delay:.2s;-o-animation-delay:.2s;animation-delay:.2s}@-webkit-keyframes dot{\n            0% {\n              opacity: 0.1;\n            }\n            50% {\n              opacity: 1;\n            }\n            100% {\n              opacity: 0.1;\n            }\n        }@-moz-keyframes dot{\n            0% {\n              opacity: 0.1;\n            }\n            50% {\n              opacity: 1;\n            }\n            100% {\n              opacity: 0.1;\n            }\n        }@-o-keyframes dot{\n            0% {\n              opacity: 0.1;\n            }\n            50% {\n              opacity: 1;\n            }\n            100% {\n              opacity: 0.1;\n            }\n        }@keyframes dot{\n            0% {\n              opacity: 0.1;\n            }\n            50% {\n              opacity: 1;\n            }\n            100% {\n              opacity: 0.1;\n            }\n        }"}),(0,c.tZ)("span",(0,o.Z)((0,i.Z)({},n),{className:"jsx-fcfe85a13ecbf46b "+(n&&null!=n.className&&n.className||"one"),children:"."})),(0,c.tZ)("span",(0,o.Z)((0,i.Z)({},n),{className:"jsx-fcfe85a13ecbf46b "+(n&&null!=n.className&&n.className||"two"),children:"."})),(0,c.tZ)("span",(0,o.Z)((0,i.Z)({},n),{className:"jsx-fcfe85a13ecbf46b "+(n&&null!=n.className&&n.className||"three"),children:"."}))]})},v=t(39137),m=t(61284),g=t(45510),y=t(43119),Z=t(71440),b=t(24635),w=t(50216);function x(){var e=(0,y.Z)(["\n  query ConfigReplLanguage($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        language\n      }\n    }\n  }\n"]);return x=function(){return e},e}function k(){var e=(0,y.Z)(["\n  mutation ConfigUpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n      }\n    }\n  }\n"]);return k=function(){return e},e}var C={},S=(0,Z.Ps)(x());var T=(0,Z.Ps)(k());var E=t(45285),R=t(2041),I=t(35301),G=t(39541),D=t(17807),_=t(85368),P=t(12318),B=t(76735),A=t(10702),U=t(48330),L=t(75920),X=t(63064),N=t(94716),M=t(29838),F=t(12260),O=t(16918),W=t(21371);function H(e){var n,t=e.options,r=e.initialSelectedOption,l=e.inputRef,c=e.setInputValue,s=(0,a.Z)(u.useState(""),2),d=s[0],f=s[1],p=(n={options:t,filter:d},u.useMemo((function(){return n.filter?O.Z.filter(n.filter.toLowerCase(),n.options).map((function(e){return e.original})):n.options}),[n.options,n.filter])),h=(0,W.Kb)({items:p,initialHighlightedIndex:0,initialSelectedItem:r,stateReducer:function(e,n){var t,r,a=n.type,u=n.changes;(a===W.Kb.stateChangeTypes.ItemClick||a===W.Kb.stateChangeTypes.InputKeyDownEnter&&u.selectedItem)&&(null===(t=l.current)||void 0===t||t.blur());return a!==W.Kb.stateChangeTypes.InputBlur||u.selectedItem?a===W.Kb.stateChangeTypes.InputBlur&&u.selectedItem?(c(null!==(r=u.selectedItem)&&void 0!==r?r:""),u):u:(0,o.Z)((0,i.Z)({},u),{isOpen:!0})}});return{filteredOptions:p,combobox:h,setFilter:f,filter:d}}var V=t(66482),z=t(43312),j=t(97858),q=t(12341),$=(0,z.iv)([G.l0.py(8),G.l0.pl(8),G.l0.pr(32),{color:"inherit",outline:"0 none",border:"1px solid",fontSize:"inherit",lineHeight:G.TV.space16,display:"block",width:"100%","::placeholder, :disabled":{color:G.TV.foregroundDimmer,borderColor:"transparent"},cursor:"text"}]),Y=(0,z.iv)([G.l0.reset.button,D.gU.listItem,G.l0.borderRadius(8),G.l0.center,{width:24,height:24}]),K=_.K.button;function Q(e){var n=e.id,t=e.onSelect,r=e.onInit,l=e.options,s=e.initialSelectedOption,d=e.placeholderText,f=e.autoFocus,p=e.disabled,h=u.useRef(null),g=(0,a.Z)(u.useState(null!==s&&void 0!==s?s:""),2),y=g[0],Z=g[1],b=H({options:l,initialSelectedOption:s,inputRef:h,setInputValue:Z}),w=b.filteredOptions,x=b.filter,k=b.combobox,C=b.setFilter,S=(0,N.Z)(t),T=(0,N.Z)(r);return u.useEffect((function(){s&&(T.current(s),Z(s),C(""))}),[s]),(0,M.Z)((function(){var e;k.selectedItem&&(null===(e=h.current)||void 0===e||e.blur(),S.current(k.selectedItem),Z(k.selectedItem),C(""))}),[k.selectedItem,S]),u.useEffect((function(){s&&(k.selectItem(s),Z(s),C(""))}),[s]),(0,c.BX)(_.G,{children:[(0,c.tZ)("div",(0,o.Z)((0,i.Z)({},k.getComboboxProps()),{children:(0,c.BX)(_.G,{css:[G.l0.flex.row,{position:"relative"}],children:[(0,c.tZ)(_.G,{css:[G.l0.flex.growAndShrink(1)],children:(0,c.tZ)(v.II,(0,o.Z)((0,i.Z)({},k.getInputProps({id:n,spellCheck:!1,autoFocus:f,onChange:function(e){C(e.currentTarget.value.toLowerCase()),Z(e.currentTarget.value)},ref:h,onFocus:function(e){k.openMenu(),e.currentTarget.select()}})),{value:y,placeholder:null!==s&&void 0!==s?s:d,css:[$],disabled:p,dataCy:"import-config-entrypoint-input"}))}),p?null:(0,c.tZ)(_.G,{css:[{position:"absolute",top:0,right:0,height:"100%"},G.l0.center],children:(0,c.tZ)(K,(0,o.Z)((0,i.Z)({},k.getToggleButtonProps()),{css:Y,type:"button",children:k.inputValue&&!k.isOpen?(0,c.tZ)(V.Z,{}):(0,c.tZ)(F.Z,{})}))})]})})),(0,c.BX)("div",(0,o.Z)((0,i.Z)({},k.getMenuProps()),{css:{position:"relative"},children:[k.isOpen&&w.length?(0,c.tZ)(j.Z,{children:(0,c.tZ)("ul",{css:[G.l0.pt(4),G.l0.pb(8)],children:w.map((function(e,n){return(0,c.tZ)("li",(0,o.Z)((0,i.Z)({},k.getItemProps({item:e,index:n})),{children:(0,c.tZ)(q.Z,(0,o.Z)((0,i.Z)({},J(e)),{filter:x,selected:k.selectedItem===e,highlighted:k.highlightedIndex===n}))}),e.toLowerCase())}))})}):null,x&&!w.length&&k.isOpen?(0,c.tZ)(j.Z,{children:(0,c.tZ)(_.G,{css:[G.l0.p(16),G.l0.colWithGap(4)],children:(0,c.BX)(m.xv,{color:"dimmer",multiline:!1,children:['No results for "',x,'"']})})}):null]}))]})}function J(e){return{title:e,key:e.toLowerCase()}}var ee,ne=t(63128),te=t(87978);!function(e){e.Unknown="UNKNOWN",e.Npm="NPM",e.Django="DJANGO",e.Rails="RAILS",e.DotNet="DOTNET",e.Cargo="CARGO",e.Make="MAKE",e.RegularRun="REGULAR_RUN"}(ee||(ee={}));var re=new RegExp("((index)|(main)|(app)|(run)|(start)|(server))\\..+","i"),ie=new RegExp("((node_modules)|(venv)|(bower_components)|(vendor)|(build)|(dist)|(target)|(\\.git)|(\\.vscode)|(\\.idea)).+$","i");function oe(e){var n=e.initRunCommand,t=e.isCompiled,r=e.allFiles,i=new Set(r);return i.has("Makefile")||i.has("makefile")?ee.Make:i.has("package.json")?ee.Npm:i.has("Cargo.toml")?ee.Cargo:t?ee.Unknown:i.has("config/application.rb")?ee.Rails:function(e,n){return e.some((function(e){return(0,te.r6)(e)===n}))}(r,"csproj")?ee.DotNet:i.has("manage.py")?ee.Django:re.test(n)?ee.RegularRun:ee.Unknown}function ae(e,n){var t=n.initRunCommand,r=n.allFiles;switch(e){case ee.Npm:return"npm run start";case ee.RegularRun:var i=function(e){var n;return null!==(n=e.filter((function(e){return!ie.test(e)})).find((function(e){return re.test(e)})))&&void 0!==n?n:null}(r);return null==i?null:t.replace(re,i);case ee.Django:return"python3 manage.py runserver 0.0.0.0:3000";case ee.Rails:return"bundle exec rails server --binding=0.0.0.0";case ee.DotNet:return"dotnet run";case ee.Cargo:return"cargo run";case ee.Make:case ee.Unknown:default:return null}}function le(e){switch(e){case ee.Make:return"make";case ee.Cargo:case ee.DotNet:case ee.Npm:return"";default:return null}}function ce(e,n,t){if(0===t.length)return{projType:ee.Unknown,runCommand:null,compileCommand:null};var r={initRunCommand:e,isCompiled:n,allFiles:t},i=oe(r);return{projType:i,runCommand:ae(i,r),compileCommand:le(i)}}var ue=t(625),se=t(15679),de=t(59331),fe=t(75665);var pe=t(81203),he=t(4561),ve=t(26289),me=t(4024),ge=t(71813),ye=t(32104);function Ze(e){var n=e.children;return(0,c.BX)(ne.Tg,{background:"default",css:[G.l0.borderRadius(8),{width:"100%",height:"calc(100% - var(--space-2))",backgroundColor:"var(--background-default)",overflowY:"auto",marginTop:"0px"}],children:[(0,c.tZ)(_.G,{children:(0,c.tZ)(m.xv,{multiline:!1,variant:"subheadDefault",css:[G.l0.color.foregroundDimmest,G.l0.pl(16),G.l0.pt(16)],children:".replit"})}),(0,c.tZ)(_.G,{css:[G.l0.p(16),G.l0.justify.center,G.l0.align.center,{flex:"1 1 auto"}],children:n})]})}function be(e){var n,t=Boolean(e.hasInterpreter),d=e.initialRun,f=null!==(n=e.initialCompile)&&void 0!==n?n:"",p=e.isFrameworkRecommended,h=!!e.projType&&e.projType===ee.Rails,y=e.isApplyingConfig,Z=(0,a.Z)(u.useState("Unknown"===s.Z.get(e.initialLanguage).displayName?"bash":e.initialLanguage),2),b=Z[0],w=(Z[1],(0,P.Y)(e.initialRun,(function(e){if(!e)return{message:"Add a run command"}}))),x=(0,a.Z)(u.useState(e.initialCompile),2),k=x[0],C=x[1];u.useEffect((function(){w.setValue(d)}),[d]),u.useEffect((function(){C(null!==f&&void 0!==f?f:"")}),[f]);var S=(0,P.Y)("",(function(e){if(!e)return{message:"Choose an entry point file"}})),T=(0,a.Z)(u.useState(Boolean(t&&!p)),2),U=T[0],N=T[1];u.useEffect((function(){N(Boolean(t&&!p))}),[t,p]);var M=_.K.a,F=(0,a.Z)(u.useState([]),2),O=F[0],W=F[1],H=(0,X.Z)(),V=function(){var e=(0,E.Z)(),n=e.fs,t=e.dotReplit,i=(0,pe.P)(t),o=(0,X.Z)(),c=(0,a.Z)(u.useState(null),2),s=c[0],d=c[1];return u.useEffect((function(){var e=function(){var e=(0,r.Z)((function(){var e,t,r,a;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return i?[4,n.listFiles()]:[2];case 1:return e=l.sent(),o.current?e.error||!e.files?(d([]),[2]):[4,n.readFile(A.l)]:[2];case 2:return t=l.sent(),r=e.files,a=ve.uP.concat(ve.nh),d(r.filter((function(e){return(t.error===he.Df.NotFound||!i.some((function(n){return function(e){var n=e.split("/");if(1===n.length)return n;for(var t=[],r=0;r<n.length;r++)t.push(n.slice(0,r+1).join("/"));return t}(e).some((function(e){return null!=e.match(n)}))})))&&!a.includes(e)}))),[2]}}))}));return function(){return e.apply(this,arguments)}}();e()}),[i,n,o]),s}();return u.useEffect((function(){V&&H.current&&W(V)}),[H,V]),(0,c.BX)("form",{onSubmit:function(n){n.preventDefault(),e.setIsApplyingConfig(!0),w.value||U?e.onSubmit({run:w.value,compile:null!==k&&void 0!==k?k:"",entry:S.value,deleteInterp:!U,onDone:e.closeConfigPane,runChanged:w.value!==d,compileChanged:k!==f,projType:e.projType}):w.validate()},css:[G.l0.maxWidth(400),{width:"100%"}],children:[(0,c.BX)(_.G,{css:[G.l0.colWithGap(8)],children:[e.hasProcfile?(0,c.tZ)(_.G,{css:[G.l0.colWithGap(8)],children:(0,c.BX)(m.xv,{variant:"small",css:[G.l0.mb(24)],children:["Looks like you came from Heroku!",(0,c.tZ)(M,{target:"_blank",href:"https://docs.replit.com/tutorials/import-heroku",rel:"noopener noreferrer",children:"Read more about Replit and Heroku here."})]})}):null,t?(0,c.tZ)(_.G,{css:[G.l0.pb(16)],children:(0,c.BX)(L.hE,{disabled:y,name:"interpreterView",value:U.toString(),row:!0,onChange:function(){return N((function(e){return!e}))},stretch:!0,primary:!0,children:[(0,c.tZ)(L.rK,{id:"interpreterFalse",value:"false",text:"Use run command"}),(0,c.tZ)(L.rK,{id:"interpreterTrue",value:"true",text:"Use default interpreter"})]})}):null,(0,c.BX)(_.G,{css:[G.l0.height(e.initialCompile?210:170),G.l0.colWithGap(8)],children:[U?null:(0,c.BX)(_.G,{css:[G.l0.maxWidth(400),G.l0.colWithGap(8)],children:[e.initialCompile?(0,c.BX)(_.G,{css:[G.l0.colWithGap(4)],children:[(0,c.tZ)("label",{htmlFor:"compile-sel",children:"Configure the Compile Command"}),(0,c.tZ)(m.xv,{variant:"small",color:"dimmest",children:"This is optional, and is executed before your run command."}),(0,c.tZ)(v.II,{disabled:y,id:"compile-sel",type:"text",value:k,placeholder:"Enter a command to compile the program",onChange:function(e){C(e.currentTarget.value)},css:{"&:disabled":{color:G.TV.foregroundDimmer}}})]}):null,(0,c.tZ)("label",{htmlFor:"run-sel",css:[G.l0.mt(4)],children:"Configure the Run Command"}),(0,c.tZ)(v.II,{disabled:y,id:"run-sel",type:"text",value:w.value,placeholder:"Enter a command to run the program",onChange:function(e){w.setValue(e.currentTarget.value)},css:[{"&:disabled":{color:G.TV.foregroundDimmer,cursor:"auto"},cursor:"text"}]}),h?(0,c.BX)(m.xv,{variant:"small",color:"dimmest",children:["We detected this is a Rails project. You will need",(0,c.BX)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://docs.replit.com/misc/rails-on-replit",children:[" ","additional changes"," "]}),"to your config files to use all of Replit\u2019s features."]}):null,w.error||!w.value?(0,c.BX)(_.G,{css:[G.l0.color.accentNegativeDefault,G.l0.rowWithGap(4),G.l0.align.center],children:[(0,c.tZ)(B.Z,{size:12}),(0,c.tZ)(_.G,{children:w.error?w.error.message:"Add a run command"})]}):null]}),U?(0,c.BX)(_.G,{css:[{maxWidth:400},G.l0.colWithGap(8)],children:[(0,c.tZ)("label",{htmlFor:"entry-sel","data-cy":"import-config-entrypoint",children:"Configure entry point"}),(0,c.tZ)(m.xv,{variant:"small",css:[G.l0.color.foregroundDimmest],children:"The entry point is the file that\u2019s run by default and shown first."}),0!==O.length?(0,c.tZ)(Q,(0,o.Z)((0,i.Z)({id:"config-selector",onSelect:S.setValue,onInit:S.setValue,options:O},O.length&&Boolean(V)&&{initialSelectedOption:O[0]}),{disabled:y})):(0,c.tZ)(v.II,{disabled:y,id:"entry-sel",type:"text",value:S.value,placeholder:"Choose entry point file",onChange:function(e){S.setValue(e.currentTarget.value)},css:[D.gU.filled,{cursor:"text"}]}),S.error?(0,c.BX)(_.G,{css:[{color:"var(--accent-negative-default)"},G.l0.rowWithGap(4),G.l0.align.center],children:[(0,c.tZ)(B.Z,{size:12}),(0,c.tZ)(_.G,{children:S.error.message})]}):null]}):null,(0,c.tZ)(M,{css:[G.l0.color.accentPrimaryStronger,{fontWeight:G.TV.fontWeightMedium}],target:"_blank",href:"https://docs.replit.com/programming-ide/running-github-repositories-replit",rel:"noopener noreferrer",children:"Not sure what to do?"}),(0,c.tZ)(_.G,{css:[G.l0.flex.row,G.l0.pt(16)],children:(0,c.tZ)(g.zx,{colorway:"primary",outlined:!0,type:"submit",text:y?"Saving...":"Done",disabled:y||!U&&(Boolean(w.error)||!w.value),css:[D.gU.filledAndOutlined,{fontWeight:G.TV.fontWeightMedium,color:G.TV.accentPrimaryStronger}],dataCy:"import-config-done"})})]})]}),(0,c.tZ)(R.u,{isOpen:!1,preventClose:!0,onRequestClose:function(){},children:(0,c.tZ)(_.G,{css:[G.l0.borderRadius(16),G.l0.p(32),{backgroundColor:"var(--background-default)"}],children:(0,c.BX)(I.gC,{align:"center",spacing:1,children:[(0,c.tZ)(ye.Z,{size:32}),(0,c.BX)(m.xv,{multiline:!1,children:["Upgrading to ",s.Z.get(b).displayName]})]})})})]})}function we(){return(0,c.BX)(_.G,{children:[(0,c.tZ)(_.G,{children:".replit looks a lil messed up :/"}),(0,c.tZ)("a",{css:[G.l0.pt(8),{fontSize:G.TV.fontSizeSmall}],target:"_blank",href:"https://docs.replit.com/programming-ide/configuring-repl",children:"View docs"})]})}function xe(){return(0,c.tZ)(_.G,{children:(0,c.BX)("p",{children:["Initializing run configuration",(0,c.tZ)(h,{style:{color:"var(--foreground-default)"}})]})})}var ke=function(e){var n,t=(0,U.Z)(),o=(0,E.Z)(),s=o.fs,d=o.dotReplit,f=(0,a.Z)(function(e){var n=(0,i.Z)({},C,e);return w.D(T,n)}(),1)[0],p=(0,X.Z)(),h=function(e){var n=(0,i.Z)({},C,e);return b.a(S,n)}({variables:{replId:t}}),v="Repl"===(null===(n=h.data)||void 0===n?void 0:n.repl.__typename)?h.data.repl:null,m=e.useReadFile(s,A.l),g=(0,a.Z)(u.useState(!1),2),y=g[0],Z=g[1],x=(0,a.Z)(u.useState(!1),2),k=x[0],R=x[1],I=m&&!m.error?m.content.toString("utf8"):"",G=(0,a.Z)(u.useState(""),2),D=G[0],_=G[1],P=(0,a.Z)(u.useState(""),2),B=P[0],L=P[1],N=(0,a.Z)(u.useState(!1),2),M=N[0],F=N[1],O=(0,a.Z)(u.useState(ee.Unknown),2),W=O[0],H=O[1],V=(0,a.Z)(u.useState(!1),2),z=V[0],j=V[1];u.useEffect((function(){function e(){return e=(0,r.Z)((function(){var e,n,t,r,i,o,a,c,u,f,h,v,m,g,b,w;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return[4,d.getConfig()];case 1:return e=l.sent(),n=e.config,e.error?[2]:(r=(0,me.Cq)(null!==(t=n.run)&&void 0!==t?t:void 0),o=(0,me.Cq)(null!==(i=n.compile)&&void 0!==i?i:void 0),a=Boolean(n.compile),c=Boolean(n.interpreter),[4,s.listFiles()]);case 2:return u=l.sent(),p.current?(null!=u.error||null==u.files||0===u.files.length||(f=u.files,h=ce(r,a,f),v=h.projType,m=h.runCommand,g=h.compileCommand,b=y?null!==r&&void 0!==r?r:m:null!==m&&void 0!==m?m:r,w=null!==g&&void 0!==g?g:o,Z(f.includes(ge.E)),_(b),L(w),F(v!==ee.Unknown&&v!==ee.RegularRun),H(v),j(c)),[2]):[2]}}))})),e.apply(this,arguments)}I&&function(){e.apply(this,arguments)}()}),[I,p]),u.useEffect((function(){(0,ue.j)(ue.U3.NIX_GH_IMPORT_USED,{action:se.D.ImportEnded,replId:t})}),[t]);var q=(0,de.Z)();u.useEffect((function(){q(!1)}),[]);var $=function(){var e=(0,r.Z)((function(e){var n,r,i,o,a,c,u,p,h,v;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return n=e.run,r=e.compile,i=e.entry,o=e.deleteInterp,a=e.onDone,c=e.runChanged,u=e.compileChanged,p=e.projType,(0,ue.j)(ue.U3.NIX_GH_IMPORT_USED,{action:se.D.ConfigDone,interpUsed:!o,isCompiled:""!==r,runChanged:c,compileChanged:u,projType:p,replId:t}),h=function(e,n,t,r){var i=[];return r?(i.push((0,fe.xz)("interpreter")),i.push((0,fe.xz)("entrypoint")),i.push((0,fe.KQ)(e)),i.push((0,fe.X6)(e)),t?(i.push((0,fe.D3)(t)),i.push((0,fe.pi)(t))):(i.push((0,fe.xz)("compile")),i.push((0,fe.xz)("deployment/build")))):(i.push((0,fe.xz)("run")),i.push((0,fe.If)(n))),i}(n,i,r,o),v=f({variables:{input:{id:t}}}),[4,d.updateDotReplit(h)];case 1:return l.sent(),s.flush().then((function(){s.persist({skipDebounce:!0})})),[4,v];case 2:return l.sent(),a(),[2]}}))}));return function(n){return e.apply(this,arguments)}}();return v&&m?(null===m||void 0===m?void 0:m.error)?(0,c.tZ)(Ze,{children:(0,c.tZ)(we,{})}):(0,c.tZ)(Ze,{children:(0,c.tZ)(be,{initialLanguage:"",initialRun:D,initialCompile:B,hasInterpreter:z,fs:s,hasProcfile:y,isApplyingConfig:k,setIsApplyingConfig:R,onSubmit:$,isFrameworkRecommended:M,projType:W,closeConfigPane:e.closeConfigPane})}):(0,c.tZ)(Ze,{children:(0,c.tZ)(xe,{})})}},23562:function(e,n,t){var r=t(74985),i=t(50959),o=t(85368),a=t(66656),l=t(39541),c=t(9829),u=t(61284),s=function(e){var n=e.reason,t=e.children;return(0,r.BX)(o.G,{css:[l.l0.center,l.l0.minWidth(225),l.l0.height(225),l.l0.p(16),l.l0.color.foregroundDefault,l.l0.borderRadius(8),l.l0.backgroundColor.backgroundOverlay,l.l0.zIndex(5e5),{cursor:"not-allowed"}],children:[(0,r.tZ)(c.Z,{height:80}),(0,r.BX)(u.xv,{multiline:!1,variant:"subheadBig",css:[l.l0.mt(32)],dataCy:"import-loading-spinner",children:[n,"..."]}),t]})};function d(e){var n=e.reason,t=e.children;return(0,r.tZ)(a.h,{children:(0,r.tZ)(o.G,{css:[l.l0.position.fixed,l.l0.flex.row,l.l0.align.center,l.l0.justify.center,l.l0.backgroundColor.backgroundOverlay,{top:0,bottom:0,left:0,right:0,zIndex:5e5,cursor:"not-allowed"}],children:(0,r.tZ)(s,{reason:null!==n&&void 0!==n?n:"Importing",children:t})})})}n.Z=(0,i.memo)(d)},52143:function(e,n,t){t.d(n,{xV:function(){return J},du:function(){return I},av:function(){return Y}});var r=t(57389),i=t(72006),o=t(74985),a=t(18988),l=t(52564),c=t(99964),u=t(10464),s=t(48468),d=t(47518),f=t(42174),p=t(82568),h=t(66656),v=t(63128),m=t(39541),g=t(50959),y=t(92153),Z=t(91398),b=t(56581),w=t(92683),x=t(13525);function k(){return(0,g.useState)((function(){return(0,Z.MT)()}))[0]}var C=(0,g.createContext)(null);function S(){var e=(0,g.useContext)(C);if(!e)throw new Error("Expected store in context");return e}function T(e){return(0,w.Dv)(e,{store:S()})}function E(e){return(0,x.b)(e,S())}var R=function(e){return(0,w.b9)(e,{store:S()})};function I(e){var n=k();return(0,o.tZ)(C.Provider,{value:n,children:e.children})}var G,D=(0,t(68973).$)(["display","visibility","transform","maxHeight","width"]),_=D.cssVars,P=D.styleTokens,B=(0,Z.cn)(null),A=(0,Z.cn)("default"),U=(0,Z.cn)({command:null,offset:{x:0,y:0},visible:!1}),L=(0,b.kv)(U,(function(e){return e.offset})),X=(0,b.kv)(U,(function(e){return e.command})),N=(0,b.kv)(U,(function(e){return e.visible})),M=(0,b.kv)(B,(function(e){return null!==(G=null===e||void 0===e?void 0:e.initial)&&void 0!==G?G:null})),F=(0,Z.cn)((function(e){var n=e(L);if(!n)return null;var t=n.y,r=window.innerHeight-t,i=e(M),o=null!==i?i-r:0;return o>0&&(t=Math.max(16,t-Math.min(200,o))),t})),O=(0,Z.cn)((function(e){var n=e(L);if(!n)return null;var t=n.x,r=window.innerWidth,i=e(H),o=i?t+i:null,a=o?o-r+16:0;return a>0&&(t=Math.max(16,t-a)),t})),W=(0,Z.cn)((function(e){var n=e(O),t=e(F);return null==n||null===t?null:(0,r.Z)({},_.transform,"translate(".concat(n,"px, ").concat(t,"px)"))})),H=(0,Z.cn)(null),V=(0,Z.cn)((function(e){var n=e(H);return(0,r.Z)({},_.width,null===n?"auto":n+"px")})),z=(0,Z.cn)((function(e){var n=e(F);return null===n?null:(0,r.Z)({},_.maxHeight,"calc(100vh - ".concat(m.TV.space16," - ").concat(n,"px)"))})),j=(0,Z.cn)(null,(function(e,n){n(B,null),n(H,null),n(q,null),n(U,(function(e){return(0,y.ZP)(e,(function(e){e.visible=!1,e.command=null}))}))})),q=(0,Z.cn)(null),$=(0,Z.cn)(null,(function(e,n,t){if(n(A,t.background),t.target){var r=t.target.getBoundingClientRect(),i={x:r.x,y:r.y+r.height+8};return n(q,r),void n(U,(function(e){return(0,y.ZP)(e,(function(e){e.command=t.command,e.offset=i,e.visible=!0}))}))}n(U,(function(e){return(0,y.ZP)(e,(function(e){e.command=t.command,e.offset=t.offset,e.visible=!0}))}))}));function Y(){var e=R($),n=(0,v.nZ)({elevated:!0});return{openContextMenu:(0,g.useCallback)((function(t){e({command:t.command,target:t.target,background:n})}),[e,n]),onContextMenu:(0,g.useCallback)((function(t,r){t.preventDefault(),e({command:r,offset:{x:t.clientX,y:t.clientY},target:null,background:n})}),[e,n])}}var K=(0,p.X)({surface:[m.l0.shadow(3),m.l0.borderRadius(8),m.l0.position.absolute,{top:0,left:0,border:"1px solid",borderColor:m.TV.outlineDefault,maxWidth:"min(500px, calc(100vw - ".concat(m.TV.space16,"))"),minWidth:"min(100px, calc(100vw - ".concat(m.TV.space16,"))"),maxHeight:P.maxHeight,width:P.width,transform:P.transform,visibility:P.visibility,display:P.display}]});function Q(){var e=T(q);return e?(0,o.tZ)("div",{style:{position:"fixed",width:e.width,height:e.height,top:e.y,left:e.x}}):null}var J=(0,g.memo)((function(e){var n=e.fontSize,t=void 0===n?14:n,p=R(j),m=T(X),y=E(N),Z=(0,g.useRef)((function(){}));(0,g.useEffect)((function(){var e=function(e){var n;e?null===(n=Z.current)||void 0===n||n.call(Z):k.current=!1};return e(y.current),y.subscribe(e)}),[y]);var b=R(B),w=(0,c.Z)((function(){y.current&&p()}),[y]),x=R(H),k=(0,g.useRef)(!1),C=(0,s.Z)((function(e){0===e.width||k.current||(k.current=!0,x(e.width))})),S=(0,g.useRef)(null),I=E(W);(0,f.j)(S,I),(0,f.j)(S,E(z)),(0,f.j)(S,y,(function(e){var n;return n={},(0,r.Z)(n,_.visibility,e?"visible":"hidden"),(0,r.Z)(n,_.display,e?"flex":"none"),n}));var G=E(V);(0,f.j)(S,G);var D=(0,u.Z)(),P=T(N)&&!D,U=T(A),L=(0,i.Z)({},I.current,G.current);return m?(0,o.BX)(h.h,{children:[(0,o.tZ)(Q,{}),(0,o.tZ)(a.MT,{autoFocus:P,restoreFocus:!0,contain:!0,children:(0,o.tZ)(v.Tg,{onKeyDown:function(e){"Escape"===e.key&&p()},innerRef:(0,d.l)(C,S,w),css:K.surface,style:L,background:U,children:(0,o.tZ)(l.X,{iconBreadcrumbs:!0,command:m,onAction:p,onSelect:p,onTotalHeightChange:b,focusRef:Z,fontSize:t})})})]}):null}))},11192:function(e,n,t){t.d(n,{$f:function(){return b},OD:function(){return k},xk:function(){return m}});var r=t(57135),i=t(2272),o=t(96583),a=t(57966),l=t(77970),c=t(70991),u=t(51631),s=t(34489),d=t(96742),f=t(4024),p=t(75665),h=t(88688),v=t(4561);function m(e){return g.apply(this,arguments)}function g(){return(g=(0,r.Z)((function(e){var n,t;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:return[4,e.readFile(".env")];case 1:if((n=r.sent()).error===v.Df.NotFound)return[2,[]];if(n.error)throw n.error;return t=s.Z.parse(n.content.toString()),[2,Object.entries(t).map((function(e){var n=(0,i.Z)(e,2);return{name:n[0],value:n[1]}}))]}}))}))).apply(this,arguments)}function y(e){return Z.apply(this,arguments)}function Z(){return(Z=(0,r.Z)((function(e){var n,t,r;return(0,o.__generator)(this,(function(i){switch(i.label){case 0:return[4,e.getConfig()];case 1:if(n=i.sent(),t=n.config,(r=n.error)===h.Yt.NotFound)return[2];if(r)throw new Error("Failed to get .replit config with Error: "+r);return[2,t]}}))}))).apply(this,arguments)}function b(e){return w.apply(this,arguments)}function w(){return(w=(0,r.Z)((function(e){var n,t,r,i,a,c,s,d,p,h,v,m,g;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return n=null,t=null,r=null,i=null,a=null,[4,y(e)];case 1:if(!(c=o.sent()))return[2,{buildCommand:n,runCommand:t,ignorePorts:r,appType:i,publicDir:a}];if(!c.deployment)return[3,2];switch(s=c.deployment,d=s.build,p=s.run,h=s.ignorePorts,v=s.target,m=s.publicDir,d&&(n=(0,f.Cq)(d)),p&&(t=(0,f.Cq)(p)),null!==h&&void 0!==h&&(r=h),v){case l.api.DeploymentConfig.Target.GCE:i=r?u.Vp.Worker:u.Vp.Server;break;case l.api.DeploymentConfig.Target.CLOUDRUN:i=u.Vp.CloudRun;break;case l.api.DeploymentConfig.Target.STATIC:i=u.Vp.Static}return m&&(a=m),[3,4];case 2:return[4,e.getRunConfig()];case 3:g=o.sent(),c.compile&&(n=(0,f.Cq)(c.compile)),g.run?t=(0,f.Cq)(g.run.run):c.run&&(t=(0,f.Cq)(g.run)),o.label=4;case 4:return[2,{buildCommand:n,runCommand:t,ignorePorts:r,appType:i,publicDir:a}]}}))}))).apply(this,arguments)}var x={buildCommand:{delete:function(){return(0,p.xz)("deployment/build")},create:function(e){return(0,p.pi)(e.toString())}},runCommand:{delete:function(){return(0,p.xz)("deployment/run")},create:function(e){return(0,p.X6)(e.toString())}},ignorePorts:{delete:function(){return(0,p.xz)("deployment/ignorePorts")},create:function(e){return(0,p.KB)(Boolean(e))}},appType:{delete:function(){return(0,p.xz)("deployment/deploymentTarget")},create:function(e){var n=null;switch(e){case u.Vp.Server:case u.Vp.Worker:n="gce";break;case u.Vp.CloudRun:n="cloudrun";break;case u.Vp.Static:n="static"}return n?(0,p.zk)(n):null}},publicDir:{delete:function(){return(0,p.xz)("deployment/publicDir")},create:function(e){return(0,p.TT)(e.toString())}}};function k(e,n,t){return C.apply(this,arguments)}function C(){return(C=(0,r.Z)((function(e,n,t){var r,i,l,u,s,f,p,h,m,g,y,Z,b,w,k;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:r=[],i=!0,l=!1,u=void 0;try{for(s=Object.keys(e)[Symbol.iterator]();!(i=(f=s.next()).done);i=!0)p=f.value,m=e[h=p],g=n[h],y=x[h],m!==g&&("string"===typeof m&&(0,d.A)(m)||"boolean"===typeof m&&m?(Z=y.create(m))&&r.push(Z):r.push(y.delete()))}catch(C){l=!0,u=C}finally{try{i||null==s.return||s.return()}finally{if(l)throw u}}if(t.container.getConnectionState()!==a.em.CONNECTED)throw new c.QO;return r.length?[4,t.dotReplit.updateDotReplit(r)]:[3,2];case 1:if(b=o.sent(),w=b.error)throw new Error(w);o.label=2;case 2:return k=null,[4,new Promise((function(e){t.fs.getStatus()!==v.kO.Syncing&&e(!0),k=setInterval((function(){t.fs.getStatus()===v.kO.Syncing||e(!0)}),1e3)}))];case 3:return o.sent(),k&&clearInterval(k),[2]}}))}))).apply(this,arguments)}},29316:function(e,n,t){var r,i;function o(e){return"string"===typeof e&&Object.values(r).includes(e)}function a(e){return"tabs"in e&&void 0!==e.tabs&&e.tabs}function l(e){return"alias"in e}function c(e){return null!==e&&"object"===typeof e&&"view"in e}function u(e,n){return e.view===n?null===e||void 0===e?void 0:e.data:void 0}t.d(n,{BJ:function(){return l},D1:function(){return o},Em:function(){return c},Zs:function(){return a},ap:function(){return i},kO:function(){return r},yF:function(){return u}}),function(e){e.Intro="intro",e.TierSelection="tier_selection",e.Deployment="deployment",e.DeploymentOptions="deployment_options",e.DeploymentInProgress="deployment_in_progress",e.Domains="domains",e.History="history",e.Analytics="analytics",e.Logs="logs",e.Settings="settings"}(r||(r={})),function(e){e.SendDeploymentLifecycleCommand="send_deployment_lifecycle_command",e.CheckoutSuccess="checkout_success",e.ChangeView="change_view",e.GoBack="go_back"}(i||(i={}))},9493:function(e,n,t){t.d(n,{Z:function(){return v},e:function(){return m}});var r=t(74985),i=t(63128),o=t(61284),a=t(85368),l=t(82568),c=t(39541),u=t(87978),s=t(13233),d=t(87076),f=t(77806),p=(0,l.X)({surface:[c.l0.borderRadius(8),c.l0.p(8),c.l0.flex.row,c.l0.rowWithGap(8),c.l0.align.center]});function h(e){var n=e.value,t=(0,s.Z)();return(0,r.tZ)(d.h,{alt:"Copy",tooltipHidden:!0,onClick:function(){navigator.clipboard.writeText(n).then((function(){t.showConfirm("Copied")}))},children:(0,r.tZ)(f.Z,{})})}function v(e){var n=m(e.filePath,e.keyName);if(!n)return null;var t=n.import,l=n.access;return(0,r.BX)(a.G,{css:c.l0.colWithGap(8),children:[t?(0,r.BX)(i.Tg,{elevated:e.elevated,css:p.surface,children:[(0,r.tZ)(h,{value:t}),(0,r.tZ)(o.xv,{variant:"small",css:[c.l0.font.code,c.l0.flex.grow(1)],multiline:!1,children:t})]}):null,(0,r.BX)(i.Tg,{elevated:e.elevated,css:p.surface,children:[(0,r.tZ)(h,{value:l}),(0,r.tZ)(o.xv,{variant:"small",css:[c.l0.font.code,c.l0.flex.grow(1)],multiline:!1,children:l})]})]})}function m(e,n){if(!e)return null;switch((0,u.r6)(e)){case"js":case"ts":case"jsx":case"tsx":return{import:null,access:"const mySecret = process.env['".concat(n,"']")};case"py":return{import:"import os",access:"my_secret = os.environ['".concat(n,"']")};case"go":return{import:'import "os"',access:'mySecret := os.Getenv("'.concat(n,'")')};case"java":case"scala":return{import:null,access:'System.getenv("'.concat(n,'")')};case"rb":return{import:null,access:'ENV["'.concat(n,'"]')};case"c":case"cpp":return{import:"#include <stdlib.h>",access:'char* mySecret = getenv("'.concat(n,'")')};case"cs":return{import:"using System;",access:'string mySecret = System.Environment.GetEnvironmentVariable("'.concat(n,'");')};case"sh":return{import:null,access:'"$'.concat(n,'"')};default:return null}}},39187:function(e,n,t){t.d(n,{tr:function(){return L}});var r=t(57389),i=t(81962),o=t(74985),a=t(50959),l=t(4561),c=t(39541),u=t(85368),s=t(43312),d=t(48712),f=t(83005),p=t(87978),h=t(57913),v=t(1261),m=t(45285),g=t(28681),y=t(82568),Z=t(11619),b=t(66656),w=t(68973),x=t(99964),k=t(63128),C=t(17807),S=t(88541);function T(e){var n=e.node;return n.type===l.Tv.Directory?(0,o.tZ)(d.Z,{size:16}):(0,o.tZ)(f.Z,{size:16,path:n.path})}var E=(0,w.$)(["menuY","menuX"]),R=E.cssVars,I=E.styleTokens,G=(0,y.X)({root:[c.l0.maxHeight(400),c.l0.position.absolute,c.l0.borderRadius(8),c.l0.shadow(3),{border:"1px solid",borderColor:c.TV.outlineDefault,top:I.menuY,left:I.menuX,"& > div":[c.l0.maxHeight(400)]}]}),D=(0,s.iv)([C.gU.nofill,{transitionProperty:"background-color, box-shadow, opacity",opacity:.8,":focus":{zIndex:1,opacity:1}}]),_={button:(0,s.iv)([c.l0.reset.button,c.l0.p(2),c.l0.rowWithGap(4),c.l0.align.center,D]),text:(0,s.iv)({fontSize:c.TV.fontSizeSmall})},P={opacity:1};function B(e){var n,t=function(){var e,n=null===(e=h.current)||void 0===e?void 0:e.getBoundingClientRect();n&&f({x:n.x+"px",y:n.y+n.height+4+"px"})},l=e.node,c=e.openFile,s=(0,a.useState)(!1),d=s[0],f=s[1],h=(0,a.useRef)(null),v=(0,x.Z)((function(e){var n;d&&((0,i.Z)(e.target,HTMLElement)&&(null===(n=h.current)||void 0===n?void 0:n.contains(e.target))||f(!1))}),[d]),m=(0,a.useId)(),g=(0,a.useId)(),y=(0,p.Il)(l.path)||".",Z=(0,p.UO)(l.path);return(0,o.BX)(o.HY,{children:[(0,o.BX)(u.G,{innerRef:h,tag:"button",id:m,style:d?P:void 0,"aria-haspopup":"true","aria-expanded":Boolean(d),"aria-controls":g,css:_.button,onClick:function(){d?f(!1):t()},onKeyDown:function(e){switch(e.key){case" ":case"Enter":case"ArrowDown":t()}},children:[(0,a.cloneElement)((0,o.tZ)(T,{node:l}),{size:12}),(0,o.tZ)(u.G,{css:_.text,children:Z})]}),d?(0,o.tZ)(b.h,{children:(0,o.tZ)(k.Tg,{id:g,css:G.root,innerRef:v,style:(n={},(0,r.Z)(n,R.menuX,d.x),(0,r.Z)(n,R.menuY,d.y),n),onKeyDown:function(e){var n;"Escape"===e.key&&(f(!1),null===(n=h.current)||void 0===n||n.focus())},children:(0,o.tZ)(A,{openFile:c,parentPath:y,currentPath:l.path})})}):null]})}function A(e){var n=(0,m.Z)().fs,t=(0,Z.Z)().preferences,r=(0,g.T)(!0),i=(0,a.useCallback)((function(e){return!r(e.filename)}),[r]),l=(0,S.P5)({controlName:"flag-filetree-menu-ultra",logFlagToAnalytics:!1}),c=(0,v.pR)({fs:n,filter:i,focusedPath:e.currentPath,fontSize:t.fontSize,root:e.parentPath,manageWidth:!0,onFileSelect:function(n){var t=n.path;e.openFile(t)},readOnly:!l,alwaysShowCreateRow:!0});return(0,o.tZ)(v.s8,{store:c.store})}var U=(0,s.iv)([c.l0.flex.row,c.l0.align.center,c.l0.height("100%"),c.l0.px(2)]),L=(0,a.memo)((function(e){var n=e.path,t=e.onFileClick,r=e.children,i=function(e){var n=e.split("/"),t=n.length;return n.map((function(e,r){return{type:r===t-1?l.Tv.File:l.Tv.Directory,path:n.slice(0,r+1).join("/")}}))}(n);return(0,o.BX)(u.G,{css:U,children:[i.map((function(e){return(0,o.BX)(a.Fragment,{children:[(0,o.tZ)(B,{node:e,openFile:t}),e.type===l.Tv.Directory?(0,o.tZ)(h.Z,{size:12}):null]},function(e){return CSS.escape(e.path)}(e))})),r||null]})}))},35273:function(e,n,t){t.d(n,{VY:function(){return B},HK:function(){return U},h4:function(){return G},Qc:function(){return _},H4:function(){return M},$E:function(){return A},Mp:function(){return O}});var r=t(57135),i=t(96583),o=t(74985),a=t(39541),l=t(85368),c=t(43312),u=t(39187),s=t(50959),d=t(92508),f=t(90171),p=t.n(f),h=t(18171),v=t(94452),m=t(77806),g=t(60566),y=t(49747),Z=t(15544),b=t(63740),w=t(13716),x=t(45285),k=t(71045),C=t(49085),S=t(87978);function T(e,n){return E.apply(this,arguments)}function E(){return(E=(0,r.Z)((function(e,n){var t,r,o;return(0,i.__generator)(this,(function(i){return t=(0,S.yC)(e),r=(0,S.UO)(e),(o=document.createElement("a")).setAttribute("href","data:".concat(t,";base64,").concat(n.toString("base64"))),o.setAttribute("download",r),o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o),[2]}))}))).apply(this,arguments)}var R=t(54873),I=(0,c.iv)([a.l0.height(28),a.l0.flex.row,a.l0.align.center,{borderBottom:"1px solid ".concat(a.TV.backgroundHigher),opacity:.8,":hover":{opacity:1}}]);function G(e){return"/replEnvironmentDesktop"===p().pathname?(0,o.tZ)(l.G,{css:I,children:e.children}):null}var D=(0,c.iv)([a.l0.flex.row,a.l0.align.center,a.l0.flex.growAndShrink(1),a.l0.overflowX("auto"),a.l0.height("100%"),{"&::-webkit-scrollbar":{height:0},scrollbarWidth:"none"}]);function _(e){return(0,o.tZ)(l.G,{css:D,children:e.children})}var P=(0,c.iv)([a.l0.flex.growAndShrink(1),a.l0.position.relative]);function B(e){return(0,o.tZ)(l.G,{css:[P,e.children&&a.l0.center],children:e.children})}function A(e){return{type:(0,d.Dp)({path:e}),data:{path:e}}}function U(e){var n=e.path,t=e.performPaneOperation,r=(0,s.useCallback)((function(e){t({operation:"replace",pane:A(e)})}),[t]);return(0,o.tZ)(G,{children:(0,o.tZ)(_,{children:(0,o.tZ)(u.tr,{path:n,onFileClick:r})})})}function L(e){return{match:v.pl,data:{label:"Copy file path",icon:(0,o.tZ)(C.Z,{}),type:"action",run:function(){(0,g.Z)(e)}}}}function X(e){return{match:v.pl,data:{label:"Copy link",icon:(0,o.tZ)(Z.Z,{}),type:"action",run:function(){var n=(0,y.dr)({path:e});(0,g.Z)(n)}}}}function N(e,n,t){return{match:v.pl,data:{label:"Duplicate file",icon:(0,o.tZ)(m.Z,{}),type:"action",run:function(){return(0,r.Z)((function(){var r;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,(0,k.Z)(e,n)];case 1:return r=i.sent(),[3,3];case 2:return i.sent(),[2,{type:"error",message:"Error duplicating file"}];case 3:return t(r),[2]}}))}))()}}}}function M(e,n){return{match:v.pl,data:{label:"Download",icon:(0,o.tZ)(b.Z,{}),type:"action",run:function(){return(0,r.Z)((function(){var t;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return[4,n.readFile(e)];case 1:return(t=r.sent()).error?[2,{type:"error",message:"Error downloading file"}]:[4,T(e,t.content)];case 2:return r.sent(),[2]}}))}))()}}}}function F(e,n){return{match:v.pl,data:{label:"Delete",icon:(0,o.tZ)(R.Z,{}),type:"action",run:function(){n(e)}}}}function O(e){var n=e.path,t=e.performPaneOperation,r=(0,x.Z)(),i=(0,w._o)();return(0,h.Z)((function(){return n?[L(n),X(n),N(n,r.fs,(function(e){t({operation:"replace",pane:{type:(0,d.Dp)({path:e}),data:{path:e}}})})),M(n,r.fs),F(n,i)]:null}),[n,r.fs,t,i])}},39985:function(e,n,t){t.d(n,{Z:function(){return s}});var r=t(74985),i=(t(50959),t(87978)),o=t(61284),a=t(85368),l=t(39541),c=t(45510),u=t(92471);function s(e){var n,t=e.paths,s=e.onCancel,d=e.onConfirm;return(0,r.BX)(a.G,{css:[l.l0.colWithGap(24)],children:[(0,r.tZ)(o.h4,{level:1,variant:"headerDefault",children:t.length>1?"Overwrite files?":"Overwrite file?"}),(0,r.BX)(o.xv,{children:[(n=t,(n=n.map(i.UO)).length<2?n[0]:"".concat(n.slice(0,-1).join(", ")," and ").concat(n.slice(-1)))," already"," ",t.length>1?"exist":"exists"," in the destination, are you sure you want to overwrite ",t.length>1?"them":"it","? This cannot be undone."]}),(0,r.BX)(a.G,{css:[l.l0.rowWithGap(12),l.l0.justify.end],children:[(0,r.tZ)(c.zx,{onClick:function(){return s()},text:"Cancel"}),(0,r.tZ)(c.zx,{colorway:"negative",onClick:function(){return d()},text:"Yes, overwrite ".concat(t.length>1?"these files":"this file"),iconLeft:(0,r.tZ)(u.Z,{})})]})]})}},69886:function(e,n,t){var r=t(74985),i=(t(50959),t(2041)),o=t(61284),a=t(45510),l=t(85368),c=t(90171),u=t(47255),s=t(39541);n.Z=function(e){var n=e.isOpen,t=(0,c.useRouter)();return(0,r.tZ)(i.u,{preventClose:!0,isOpen:n,centered:!0,onRequestClose:function(){},maxWidth:600,children:(0,r.BX)(l.G,{css:[s.l0.colWithGap(32)],children:[(0,r.BX)(l.G,{css:[s.l0.rowWithGap(16),s.l0.align.center],children:[(0,r.tZ)(u.Z,{size:24,css:[s.l0.color.orangeStrongest]}),(0,r.tZ)(o.h4,{css:[{width:"fit-content"}],level:2,variant:"headerDefault",children:"You can\u2019t join this Repl from Firewall Mode."})]}),(0,r.BX)(l.G,{css:[s.l0.pr(32),s.l0.colWithGap(16)],children:[(0,r.tZ)(o.xv,{children:"This Repl was started by someone not in Firewall Mode. If you would like to join, please do one of the following:"}),(0,r.BX)(l.G,{css:[s.l0.colWithGap(16),s.l0.pl(16)],children:[(0,r.tZ)(o.xv,{multiline:!1,children:"\u2022 Exit Firewall Mode."}),(0,r.tZ)(o.xv,{multiline:!1,children:"\u2022 Ask the creator to open this Repl in Firewall Mode."})]})]}),(0,r.BX)(l.G,{css:[s.l0.rowWithGap(16),s.l0.justify.end],children:[(0,r.tZ)(a.zx,{text:"Exit Firewall Mode",onClick:function(){window.location.href="https://www.replit.com".concat(t.asPath)}}),(0,r.tZ)(a.zx,{text:"Leave",onClick:function(){t.push("/home","~/")}})]})]})})}},41681:function(e,n,t){t.d(n,{qe:function(){return A},kq:function(){return B},Gb:function(){return P}});var r=t(74985),i=t(48306),o=t.n(i),a=t(87978),l=t(87076),c=t(32104),u=t(39541),s=t(43330),d=t(5616),f=t(45510),p=t(57135),h=t(2272),v=t(96583),m=t(50959),g=t(45285),y=t(69921),Z=t(22011),b=t(91926),w=t(13233),x=t(8082),k=t(625),C=t(29457);function S(e){var n=e.filePath,t=e.replLanguage,r=(0,g.Z)(),i=r.fs,o=r.container,l=(0,y.Z)({container:o,service:"format",skip:!b.Z.supportsFormatting(t)}).channel,c=(0,h.Z)(m.useState(!1),2),u=c[0],s=c[1],d=(0,w.Z)().showError,f=(0,m.useCallback)((function(e){s(!1),e&&C.kg.time("formatter_ran",Date.now()-e,{extension:(0,a.r6)(n),type:"formatter_service"})}),[n]);return m.useEffect((function(){if(u&&l){var e=!1,t=null,r=i.watchTextFile(n,{onReady:function(e){!function(e,n){o.apply(this,arguments)}(e.initialContent,e.writeChange)},onChange:function(e){var n=e.changes;t=t?t.compose(n):n},onError:function(){f()},onMoveOrDelete:function(){f()}});return function(){e=!0,r()}}function o(){return(o=(0,p.Z)((function(r,i){var o,c,u,s,p;return(0,v.__generator)(this,(function(h){switch(h.label){case 0:return o=Date.now(),e||!l?[2]:0===r.length?(f(),[2]):[4,l.request({file:{path:n,content:Z.Z.from(r).toBuffer()}})];case 1:return c=h.sent(),e?[2]:c.error||!c.file?(d("Failed to format ".concat(n),1500),f(),(0,k.j)(k.U3.AUTO_FORMAT_FAILED,{extension:(0,a.r6)(n)}),[2]):0===(u=Z.Z.from(c.file.content).toString()).length||0===(s=(0,x.F)(r,u)).length||0===(p=t?s.map(s,!0):s).length?(f(o),[2]):(i(p),f(o),[2])}}))}))).apply(this,arguments)}}),[l,n,f,i,u,d]),m.useEffect(f,[n,f]),b.Z.supportsFormatting(t)?function(){return s(!0)}:null}var T=t(9970),E=t(11619),R=t(64491),I=t(29820);var G=t(27562),D=36,_=function(){return(0,r.BX)("div",{className:"jsx-3e741e4d889c73d "+o().dynamic([["7b5cc3030f1a201a",[D]]])+" file-header-format-button",children:[(0,r.tZ)("div",{className:"jsx-3e741e4d889c73d "+o().dynamic([["7b5cc3030f1a201a",[D]]])+" file-header-format-icon",children:(0,r.BX)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16.581 16.428",className:"jsx-3e741e4d889c73d "+o().dynamic([["7b5cc3030f1a201a",[D]]]),children:[(0,r.tZ)("path",{d:"M13.26.747H3.323A2.569,2.569,0,0,0,.754,3.316h0v9.795a2.569,2.569,0,0,0,2.568,2.57h9.937a2.569,2.569,0,0,0,2.569-2.569h0V3.316A2.569,2.569,0,0,0,13.26.747Z",className:"jsx-3e741e4d889c73d "+o().dynamic([["7b5cc3030f1a201a",[D]]])+" cls-1"}),(0,r.tZ)("path",{d:"M13.118,11.269a.759.759,0,0,1-.759.759H3.921a.759.759,0,0,1-.759-.759V11.23a.671.671,0,0,1,.689-.653l.07.006h8.438a.671.671,0,0,1,.753.578.7.7,0,0,1,.006.069ZM3.161,5.111V5.073a.759.759,0,0,1,.759-.759h8.439a.759.759,0,0,1,.759.759v.038a.759.759,0,0,1-.759.759H3.921a.759.759,0,0,1-.76-.758ZM3.148,8.2a.759.759,0,0,1,.758-.76H8.4a.759.759,0,0,1,.759.759v.038a.759.759,0,0,1-.759.759H3.907a.759.759,0,0,1-.759-.759Z",className:"jsx-3e741e4d889c73d "+o().dynamic([["7b5cc3030f1a201a",[D]]])+" cls-2"})]})}),(0,r.tZ)(o(),{id:"3e741e4d889c73d",children:".file-header-format-button.jsx-3e741e4d889c73d .cls-1{fill:var(--foreground-default)}.file-header-format-button.jsx-3e741e4d889c73d .cls-2{fill:var(--background-default)}"}),(0,r.tZ)(o(),{id:"7b5cc3030f1a201a",dynamic:[D],children:".file-header-format-button.__jsx-style-dynamic-selector{padding:0 10px;height:100%;width:".concat(D,"px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;opacity:.7}.file-header-format-button.__jsx-style-dynamic-selector:hover{opacity:1}.file-header-format-icon.__jsx-style-dynamic-selector{height:16px;width:16px;cursor:pointer}")})]})};function P(e){var n=e.filePath,t=e.onComplete,r=(0,G.Z)(),i=S({filePath:n,replLanguage:r}),o=function(e){var n,t=e.filePath,r=(0,E.Z)().preferences,i=(0,g.Z)().fs,o=(0,R.Z)(t),l=Boolean(null===(n=null===o||void 0===o?void 0:o.getServerCapabilities())||void 0===n?void 0:n.documentFormattingProvider),c=(0,m.useState)([]),u=c[0],s=c[1],d=(0,w.Z)(),f=d.showError,h=d.showConfirm;return l?{fn:function(){if(!u.includes(t)){s((function(e){return(0,T.Z)(e).concat([t])}));var e=null,n=function(e){(null===e||void 0===e?void 0:e.didErr)?(f("Sorry, formatting ".concat(t," failed"),1500),(0,k.j)(k.U3.AUTO_FORMAT_FAILED,{extension:(0,a.r6)(t)})):h("Formatted ".concat(t," successfully"),1500),l(),s((function(e){return e.filter((function(e){return e!==t}))})),(null===e||void 0===e?void 0:e.startTime)&&C.kg.time("formatter_ran",Date.now()-e.startTime,{extension:(0,a.r6)(t),type:"lsp_format"})},l=i.watchTextFile(t,{onReady:function(){var i=(0,p.Z)((function(i){var a,l,c,u,s,d;return(0,v.__generator)(this,(function(f){switch(f.label){case 0:if(a=i.initialContent,l=i.writeChange,!o)throw new Error("LSP client not found");return c=Date.now(),[4,o.request.format(t,{insertSpaces:r.indentIsSpaces,tabSize:r.indentSize})];case 1:return"error"in(u=f.sent())||u.cancelled?(n({didErr:!0}),[2]):u.result?(s=(0,I.Z)(u.result,a.toString()),0===(d=e?s.map(e,!0):s).length?(n({startTime:c}),[2]):(l(d),n({startTime:c}),[2])):(n({didErr:!0}),[2])}}))}));return function(e){return i.apply(this,arguments)}}(),onChange:function(n){var t=n.changes;e=e?e.compose(t):t}})}},isFormatting:u.includes(t)}:null}({filePath:n});return(0,a.Mb)(n)&&(o||i)?{format:function(){!function(e){var n=e.formatWithLsp,t=e.formatWithService,r=e.replLanguage,i=e.filePath,o=(null===n||void 0===n?void 0:n.fn)||t;if(!o)throw new Error("Expected format function");(0,k.j)(k.U3.AUTO_FORMAT_USED,{language:r,extension:(0,a.r6)(i)}),o()}({formatWithLsp:o,formatWithService:i,replLanguage:r,filePath:n}),t&&t()},isFormatting:Boolean(null===o||void 0===o?void 0:o.isFormatting)}:null}var B={cmdOrCtrlKey:!0,altKey:!1,shiftKey:!1,key:"S"},A=function(e){var n=e.filePath,t=e.inline,i=e.onComplete,o=e.disableKeyboardShortcut,p=P({filePath:n,onComplete:i});if((0,s.x)(B,{enabled:Boolean(!o&&p),run:function(){null===p||void 0===p||p.format()}}),!p)return null;var h=(0,a.eb)(n);return t?(0,r.tZ)(f.zx,{text:"Format",iconLeft:(0,r.tZ)(d.Z,{}),onClick:function(){return p.format()}}):(0,r.tZ)(l.h,{css:[u.l0.zIndex(1),{alignSelf:"center"}],alt:p.isFormatting?"Formatting ".concat(h,", please wait"):"Format ".concat(h," code"),tooltipPlacement:"left-end",onClick:function(){return p.format()},children:(null===p||void 0===p?void 0:p.isFormatting)?(0,r.tZ)(c.Z,{}):(0,r.tZ)(_,{})})}},77306:function(e,n,t){t.d(n,{e:function(){return g},f:function(){return m}});var r=t(74985),i=t(82568),o=t(45510),a=t(39541),l=t(50959),c=t(43312),u=t(72799),s=t(60566),d=t(77806),f=t(625),p=t(66539),h=(0,c.F4)({"0%":{opacity:0,transform:"translateX(8px)"},"10%":{opacity:1,transform:"translateX(0)"},"95%":{opacity:1},"100%":{opacity:0}}),v=(0,i.X)({buttonContainer:[a.l0.position.relative,{transition:"opacity 75ms linear",opacity:1}],buttonWrapper:[a.l0.flex.row],button:[a.l0.backgroundColor.backgroundDefault],buttonToast:{position:"absolute",display:"block",bottom:"100%",paddingBottom:a.TV.space4,paddingRight:a.TV.space8,animation:"".concat(h," 3s"),fontFamily:a.TV.fontFamilyDefault,fontSize:a.TV.fontSizeDefault,whiteSpace:"nowrap",userSelect:"none"}}),m=function(e){var n=e.code,t=(0,l.useState)(!1),i=t[0],a=t[1];return(0,r.BX)("div",{css:v.buttonContainer,children:[i?(0,r.tZ)("span",{css:v.buttonToast,onAnimationEnd:function(){requestAnimationFrame((function(){a(!1)}))},"aria-hidden":!0,children:"Copied!"}):null,(0,r.tZ)(o.zx,{css:v.button,text:"Copy",small:!0,iconLeft:(0,r.tZ)(d.Z,{}),onClick:function(){(0,f.j)(f.U3.GHOSTWRITER_CHAT_CODE_COPIED),(0,s.Z)(n),a(!0)}})]})},g=function(e){var n=e.code,t=e.insertCode,i=(0,l.useState)(!1),a=i[0],c=i[1],s=!t,d=(0,r.tZ)(o.zx,{css:v.button,text:"Insert",disabled:!t,small:!0,iconLeft:(0,r.tZ)(u.Z,{}),onClick:function(){t&&(t(n),c(!0))}});return(0,r.BX)("div",{css:v.buttonContainer,children:[a?(0,r.tZ)("span",{css:v.buttonToast,onAnimationEnd:function(){requestAnimationFrame((function(){c(!1)}))},"aria-hidden":!0,children:"Inserted!"}):null,s?(0,r.tZ)(p.u,{placement:"bottom",tooltip:"Place cursor in a file to insert code",children:d}):d]})}},37584:function(e,n,t){t.d(n,{v:function(){return De},z:function(){return Te}});var r=t(74985),i=t(39541),o=t(17755),a=t(61284),l=t(85368),c=t(87076),u=t(32104),s=t(38556),d=t(50959),f=t(81202),p=t.n(f),h=t(34495),v=t(57135),m=t(72006),g=t(96583),y=t(83293),Z=t(18171),b=t(34979),w=t(625),x=t(45510),k=t(42237),C=t(15544),S=t(45285),T=t(4421),E=t(51624),R=t(34227),I=t(7006),G=function(){(0,w.j)(w.U3.GHOSTWRITER_CHAT_CODE_COPIED)},D=function(e){var n=e.title;return(0,r.tZ)(l.G,{css:[i.l0.backgroundColor.backgroundDefault,i.l0.px(4),{borderTopLeftRadius:4,borderTopRightRadius:4}],children:(0,r.tZ)(a.xv,{variant:"small",multiline:!1,children:n})})},_=function(e){var n=e.originalCode,t=e.transformedCode,o=e.filePath,a=e.showDiffDecorations,c=(0,y.J)({left:{code:n,filePath:o},right:{code:t,filePath:o},showDiffDecorations:a}),u=c.left,s=c.right,d=(0,S.Z)().fs,f=(0,E.t)();return(0,r.BX)(l.G,{css:[i.l0.width("100%")],children:[(0,r.BX)(l.G,{css:[i.l0.flex.row,i.l0.flex.wrap],children:[u.ref?(0,r.BX)(l.G,{css:[{flex:"1 1 50%",minWidth:T.j.mobileMin}],children:[(0,r.tZ)(D,{title:"original"}),(0,r.tZ)(R.Z,{ref:u.ref,css:[i.l0.viewStyle,i.l0.backgroundColor.backgroundHigher,i.l0.overflow("auto"),i.l0.maxHeight(300)],initialDoc:u.code,lineWrapping:!1,readOnly:!0})]}):null,s.ref?(0,r.BX)(l.G,{css:[{flex:"1 1 50%",minWidth:T.j.mobileMin}],children:[(0,r.tZ)(D,{title:"transformed"}),(0,r.tZ)(R.Z,{ref:s.ref,css:[i.l0.viewStyle,i.l0.backgroundColor.backgroundHigher,i.l0.overflow("auto"),i.l0.maxHeight(300)],initialDoc:s.code,lineWrapping:!1,readOnly:!0})]}):null]}),(0,r.tZ)(l.G,{css:[i.l0.rowWithGap(4),i.l0.pt(8)],children:(0,r.tZ)(x.zx,{small:!0,outlined:!0,iconLeft:(0,r.tZ)(C.Z,{}),text:o,onClick:function(){f({path:o})}})}),(0,r.tZ)(l.G,{css:[i.l0.rowReverseWithGap(4),i.l0.py(8)],children:(0,r.tZ)(x.zx,{text:"Replace original",colorway:"primary",stretch:!0,css:[i.l0.px(16)],onClick:(0,v.Z)((function(){var e;return(0,g.__generator)(this,(function(n){return e=d.watchTextFile(o,{onReady:function(n){var r=n.initialContent;(0,n.writeChange)({from:0,to:r.toString().length,insert:t},I.B),d.flush().finally((function(){e()}))}}),[2]}))}))})})]})},P=t(2272),B=t(40675),A=t(40417),U=t(80336),L=t(45667),X=t(25439),N=t(3516),M=t(1459),F=t(80629),O=t(51631),W=t(43119),H=t(71440),V=t(50216);function z(){var e=(0,W.Z)(["\n  mutation AIFeedback($input: CodexFeedback2Input!) {\n    giveCodexFeedback2(input: $input) {\n      ... on CodexFeedback2 {\n        id\n        __typename\n      }\n      ... on UnauthorizedError {\n        __typename\n      }\n      ... on NotFoundError {\n        __typename\n      }\n    }\n  }\n"]);return z=function(){return e},e}var j={},q=(0,H.Ps)(z());var $=function(e){var n=e.provideFeedback;return(0,r.BX)(l.G,{css:[i.l0.rowWithGap(8),i.l0.justify.start,i.l0.align.center],children:[(0,r.tZ)(c.h,{alt:"Helpful",colorway:"positive",children:(0,r.tZ)(M.Z,{css:{"&:not(:hover)":[i.l0.color.foregroundDimmer]},onClick:function(){return n(O.TY.Yes)}})}),(0,r.tZ)(c.h,{alt:"Unhelpful",colorway:"negative",children:(0,r.tZ)(X.Z,{css:{"&:not(:hover)":[i.l0.color.foregroundDimmer]},onClick:function(){return n(O.TY.No)}})})]})},Y=function(e){var n=e.provideFeedback;return(0,r.BX)(l.G,{css:[i.l0.rowWithGap(8),i.l0.justify.start,i.l0.align.center],children:[(0,r.tZ)(x.zx,{text:"Yes",onClick:function(){return n(O.TY.Yes)},small:!0,colorway:"positive",iconLeft:(0,r.tZ)(L.Z,{}),css:{backgroundColor:i.TV.backgroundHighest,":hover":{backgroundColor:i.TV.accentPositiveDimmest}}}),(0,r.tZ)(x.zx,{text:"No",onClick:function(){return n(O.TY.No)},colorway:"negative",small:!0,iconLeft:(0,r.tZ)(U.Z,{}),css:{backgroundColor:i.TV.backgroundHighest,":hover":{backgroundColor:i.TV.accentNegativeDimmest}}})]})},K=function(e){var n=e.feedback;return e.minimumStyle?n===O.TY.Yes?(0,r.tZ)(F.Z,{}):(0,r.tZ)(N.Z,{}):(0,r.BX)(r.HY,{children:[(0,r.tZ)(L.Z,{}),(0,r.tZ)(a.xv,{variant:"small",multiline:!1,children:"Thanks for the feedback!"})]})};function Q(e){var n=e.inferenceId,t=e.inferenceClass,o=e.feedbackFeature,c=e.minimumStyle,u=(0,d.useState)(null),s=u[0],f=u[1],p=(0,P.Z)(function(e){var n=(0,m.Z)({},j,e);return V.D(q,n)}(),2),h=p[0],v=p[1],g=v.data,y=v.error,Z=v.called,b=function(e){t===O.Sg.Chat&&(0,w.j)(w.U3.GHOSTWRITER_CHAT_FEEDBACK_SUBMITTED,{feedback:e}),h({variables:{input:{feedback:e,inferenceClass:t,inferenceId:n}}}),f(e)};return(0,r.tZ)(l.G,{css:[i.l0.flex.row,i.l0.align.center,i.l0.justify.start,i.l0.rowWithGap(4),i.l0.width("100%"),i.l0.color.foregroundDimmer],children:Z&&s&&"NotFoundError"!==(null===g||void 0===g?void 0:g.giveCodexFeedback2.__typename)&&"UnauthorizedError"!==(null===g||void 0===g?void 0:g.giveCodexFeedback2.__typename)&&!y?(0,r.tZ)(K,{feedback:s,minimumStyle:c||t===O.Sg.Chat}):(0,r.tZ)(r.HY,{children:(0,r.BX)(l.G,{css:[i.l0.flex.grow(1),i.l0.flex.row,i.l0.align.center,i.l0.maxWidth("100%"),i.l0.flex.wrap,i.l0.justify.spaceBetween,i.l0.fontSize(12),{gap:"4px"}],children:[(0,r.tZ)(a.xv,{variant:"small",color:"dimmer",multiline:!1,children:c?"":J(t)}),(0,r.tZ)(l.G,{css:[i.l0.rowWithGap(8),i.l0.justify.start,i.l0.align.center],children:c||t===O.Sg.Chat?(0,r.tZ)($,{provideFeedback:b}):(0,r.tZ)(Y,{provideFeedback:b})}),o?(0,r.tZ)(A.Z,{feature:B.l.AI}):null]})})})}function J(e){return e===O.Sg.Chat?"":"Is this code valuable?"}var ee=t(73194),ne=t.n(ee),te=t(69365),re=t(64918),ie=t(76735),oe=t(96351),ae=t(40207),le=t(52364),ce=t(38335),ue=t(31854),se=t(44090),de=t(72370),fe=t(6394),pe=t(66539),he=t(82568),ve=t(83005),me=t(34938),ge=t(4405),ye=t(87762);function Ze(e){return(0,r.tZ)(ye.Z,(0,ge.Z)((0,m.Z)({viewBox:"0 0 13 12"},e),{children:(0,r.tZ)("path",{d:"M6.25 0.721688C6.4047 0.632371 6.5953 0.632371 6.75 0.721688L10.9462 3.14434C11.1009 3.23365 11.1962 3.39872 11.1962 3.57735V8.42265C11.1962 8.60128 11.1009 8.76635 10.9462 8.85566L6.75 11.2783C6.5953 11.3676 6.4047 11.3676 6.25 11.2783L2.05385 8.85566C1.89915 8.76635 1.80385 8.60128 1.80385 8.42265V3.57735C1.80385 3.39872 1.89915 3.23365 2.05385 3.14434L6.25 0.721688Z",fill:"#5239CC",stroke:"#795EFF"})}))}var be=t(93658),we=(0,he.X)({footerContainer:[i.l0.rowWithGap(8),i.l0.flex.wrap],retryButton:[i.l0.width(100),{"@keyframes slideLeft":{"0%":{paddingLeft:30},"100%":{paddingLeft:8}},"@keyframes slideRight":{"0%":{paddingLeft:8},"100%":{paddingLeft:30}}}]}),xe=function(e){var n,t=e.showAdvancedModelCheckbox,o=e.onRetry,a=e.onReply,u=(0,d.useState)(void 0),s=u[0],f=u[1],p=(0,d.useId)();return n=void 0===s?void 0:s?"slideLeft 300ms ease-out":"slideRight 300ms ease-out",(0,r.BX)(l.G,{css:we.footerContainer,children:[(0,r.BX)(l.G,{css:[i.l0.rowWithGap(8),i.l0.flex.growAndShrink(1)],children:[(0,r.tZ)(x.zx,{css:[we.retryButton,{paddingLeft:s?8:30,animation:n}],outlined:!0,iconLeft:(0,r.tZ)(k.RotateCcw,{}),iconRight:(0,r.tZ)(Ze,{css:[{transition:"opacity 300ms ease-out",opacity:s?1:0}]}),text:"Retry",onClick:function(e){return o(Boolean(s))}}),t?(0,r.BX)(l.G,{css:[i.l0.rowWithGap(8),i.l0.align.center],children:[(0,r.tZ)(me.X,{onChange:function(){f((function(e){return!e}))},id:p,checked:s}),(0,r.tZ)("label",{htmlFor:p,children:"Use Advanced Model"}),(0,r.tZ)(c.h,{alt:"Useful for more complex, vague, or creative requests.",size:24,children:(0,r.tZ)(be.Z,{})})]}):null]}),(0,r.tZ)(x.zx,{colorway:"primary",text:"Reply",iconLeft:(0,r.tZ)(k.GwChat,{}),onClick:a})]})},ke=t(88541),Ce=ne()((function(){return t.e(4295).then(t.bind(t,34295))}),{loadableGenerated:{webpack:function(){return[34295]}}}),Se=[{title:"Default",value:"NONE",icon:(0,r.tZ)(k.Chat,{})},{title:"Generate code",value:"GENERATE",icon:(0,r.tZ)(k.Sparkle,{})},{title:"Explain code",value:"EXPLAIN",icon:(0,r.tZ)(k.BookClosed,{})},{title:"Edit code",value:"TRANSFORM",icon:(0,r.tZ)(de.Z,{})},{title:"Replit docs",value:"REPLIT_DOCS",icon:(0,r.BX)("div",{css:[i.l0.position.relative,i.l0.width(16),i.l0.height(16)],children:[(0,r.tZ)(k.BookClosed,{}),(0,r.tZ)(k.Logo,{css:[i.l0.position.absolute],style:{transform:"scale(0.5)",top:0,left:.3}})]})}],Te=function(e){var n=e.author,t=e.intent,c=e.smallAvatar,u=e.id,s=e.regenerate,d="NONE"!==t;return(0,r.BX)(l.G,{css:[i.l0.rowWithGap(4),i.l0.align.center],children:[(0,r.tZ)(o.n,{src:n.image,username:n.username,small:c}),t?(0,r.BX)(r.HY,{children:[d?(0,r.tZ)(a.xv,{multiline:!1,children:"used"}):null,s&&u?(0,r.tZ)(Ie,{"aria-label":"Reclassify message",intent:t,id:u,regenerate:s}):d&&(0,r.tZ)(Re,{intent:t})]}):null]})},Ee=function(){return(0,r.BX)(l.G,{css:[i.l0.color.accentNegativeStronger,i.l0.flex.row,i.l0.rowWithGap(4),i.l0.align.center],children:[(0,r.tZ)(ie.Z,{}),(0,r.tZ)(a.xv,{children:"Response reached maximum output length"})]})},Re=function(e){var n=e.intent,t=Se.find((function(e){return e.value===n}));return(0,r.tZ)(oe.D,{css:[i.l0.fontSize(14),i.l0.height(26),i.l0.p(8),i.l0.backgroundColor.backgroundDefault,{borderColor:i.TV.blurpleDefault,borderWidth:"1px",borderStyle:"solid","> span":{paddingLeft:4}}],text:(null===t||void 0===t?void 0:t.title)||"",iconLeft:null===t||void 0===t?void 0:t.icon})},Ie=function(e){var n=e.id,t=e.intent,o=e.regenerate,a=(0,le.gp)(),l=a?"You cannot change the action while the message is sending":"Change Ghostwriter's action for this message";if(!(0,re.J1)(t))return null;var c="NONE"===t?null:Se.find((function(e){return e.value===t})),u=Se.filter((function(e){return e.value!==t}));return(0,r.tZ)(pe.u,{tooltip:l,placement:"top",children:(0,r.tZ)(ue.P,{items:u,disabled:a,css:[i.l0.backgroundColor.backgroundDefault,i.l0.borderRadius(16),i.l0.height(26),i.l0.p(8),{borderColor:i.TV.blurpleDefault}],placeholder:"Select action",selectedItem:c,onChange:function(e){(0,re.J1)(e.value)&&((0,w.j)(w.U3.GHOSTWRITER_CHAT_INTENT_RECLASSIFIED,{from:t,to:e.value}),o(n,e.value))}})})},Ge=(0,he.X)({inlineCodeReferenceBlockContainer:[i.l0.px(16),i.l0.pt(8),i.l0.pb(16)],inlineCodeReferenceBlock:[{backgroundColor:i.TV.backgroundHigher},i.l0.p(8),i.l0.borderRadius(8),{borderTopLeftRadius:0}],inlineCodeReferenceFilePathContainer:[i.l0.rowWithGap(4)],inlineCodeReferenceFilePathButton:[{borderBottomWidth:0,borderBottomLeftRadius:0,borderBottomRightRadius:0}]}),De=(0,d.memo)((function(e){var n,t,o=e.message,f=e.autoScroll,p=e.postMessageComponent,v=e.canReclassify,g=void 0!==v&&v,y=e.onReply,w=o.text,k=o.author,S=o.loading,T=o.error,R=o.attribution,I=o.inferenceId,D=o.stopReason,P=(0,le.Gd)(),B=(0,ae.d$)(),A="Assistant"===R,U=D===re.tD.MaxTokens,L=(0,ae.wK)({messageId:o.id}),X=(0,le.gp)(),N=(0,E.t)(),M=Boolean(o.stopReason),F=(0,ke.P5)({controlName:"flag-ghostwriter-model-selection",logFlagToAnalytics:!0}),W=F&&A&&(M||o.error)&&g,H=Boolean(o.error||"EXPLAIN"===o.intent||"GENERATE"===o.intent||"TRANSFORM"===o.intent),V=(0,d.useRef)(null),z=(0,te.rM)();(0,d.useLayoutEffect)((function(){f&&V.current&&requestAnimationFrame((function(){f&&V.current&&((0,h.Z)(V.current,{behavior:"auto",scrollMode:"always"}),z(!0))}))}),[w,f,z,W]);var j=i.TV.foregroundDefault;A&&S&&(j=i.TV.foregroundDimmer);var q,$,Y=(0,Z.Z)((function(){var e,n,t,i,o=null===L||void 0===L||null===(e=L.workspaceContext)||void 0===e?void 0:e.mostRecentFile,a=null!==(i=null===L||void 0===L||null===(n=L.workspaceContext)||void 0===n?void 0:n.fileContext.find((function(e){return e.filePath===o})))&&void 0!==i?i:null===L||void 0===L||null===(t=L.workspaceContext)||void 0===t?void 0:t.fileContext[0],l=null===a||void 0===a?void 0:a.code;return o&&l?function(e){var n=e.originalCode,t=e.filePath,i=e.showDiffDecorations;return function(e){var o=String(e.children);return(0,Z.Z)((function(){return e.inline?(0,r.tZ)(b.Z,(0,m.Z)({onCodeCopied:G},e)):(0,r.tZ)(_,{originalCode:n,transformedCode:o,filePath:t,showDiffDecorations:i})}),[e,o])}}({originalCode:l,filePath:o,showDiffDecorations:M}):se.O}),[null===L||void 0===L||null===(n=L.workspaceContext)||void 0===n?void 0:n.fileContext,null===L||void 0===L||null===(t=L.workspaceContext)||void 0===t?void 0:t.mostRecentFile,M]);return"transformCode"!==o.type||B?(q="GENERATE"===o.intent?se.O:"TRANSFORM"===o.intent?Y:se.O,$="explainCode"!==o.type||o.loading?"Human"===o.attribution?(0,r.tZ)(ce.J,{text:w,textColor:j}):(0,r.tZ)(ce.J,{text:w,textColor:j,codeComponent:q}):"Human"===o.attribution?(0,r.tZ)(l.G,{children:(0,r.tZ)(ce.J,{text:"Explain code",textColor:j,codeComponent:q})}):(0,r.BX)(l.G,{children:[o.codeReference?(0,r.BX)(l.G,{css:Ge.inlineCodeReferenceBlockContainer,children:[(0,r.tZ)(l.G,{css:Ge.inlineCodeReferenceFilePathContainer,children:(0,r.tZ)(x.zx,{small:!0,outlined:!0,css:Ge.inlineCodeReferenceFilePathButton,iconLeft:(0,r.tZ)(ve.Z,{size:12,path:o.codeReference.filePath}),iconRight:(0,r.tZ)(C.Z,{}),text:"".concat(o.codeReference.filePath," ").concat(o.codeReference.range.lineFrom,":").concat(o.codeReference.range.lineTo),onClick:function(){o.codeReference&&N({path:o.codeReference.filePath,line:o.codeReference.range.lineTo})}})}),(0,r.tZ)(fe.Z,{css:Ge.inlineCodeReferenceBlock,lineNumbers:!0,lineNumbersStart:o.codeReference.range.lineFrom,language:o.codeReference.language,code:o.codeReference.code,filePath:o.codeReference.filePath})]}):null,(0,r.tZ)(ce.J,{text:w,textColor:j,codeComponent:q})]}),(0,r.BX)(l.G,{css:[i.l0.px(8),i.l0.py(12),i.l0.colWithGap(8),"Assistant"===R?{background:"linear-gradient(90.7deg, rgba(82, 57, 204, 0.1) 0.6%, rgba(166, 148, 255, 0.1) 137.79%)",borderWidth:"1px 0px",borderStyle:"solid",borderColor:"rgba(121, 94, 255, 0.5)"}:null],children:[(0,r.BX)(l.G,{css:[i.l0.flex.row,i.l0.justify.spaceBetween,i.l0.align.center],children:[(0,r.tZ)(Te,{author:k,intent:o.intent,id:o.id,regenerate:g?P:null}),(0,r.BX)(l.G,{css:[i.l0.rowWithGap(8)],children:[!F&&A&&g&&!X?(0,r.tZ)(c.h,{alt:"Regenerate",css:{"&:not(:hover)":[i.l0.color.foregroundDimmer]},onClick:function(){P(o.id)},children:(0,r.tZ)(s.Z,{})}):null,I?(0,r.tZ)(l.G,{css:[i.l0.rowWithGap(8),i.l0.align.center],children:(0,r.tZ)(Q,{inferenceClass:O.Sg.Chat,inferenceId:I})}):null]})]}),(0,r.BX)(l.G,{css:[i.l0.rowWithGap(8),i.l0.align.center],children:[A&&S?(0,r.tZ)(u.Z,{}):null,(0,r.tZ)(l.G,{css:[i.l0.colWithGap(8),i.l0.flex.growAndShrink(1)],children:$})]}),p||null,A&&"string"===typeof T?(0,r.tZ)(l.G,{children:(0,r.tZ)(a.xv,{css:[i.l0.color.accentNegativeStronger,i.l0.fontSize(16)],children:T})}):null,U?(0,r.tZ)(Ee,{}):null,W?(0,r.tZ)(xe,{showAdvancedModelCheckbox:H,onRetry:function(){P(o.id)},onReply:function(){return y&&y()}}):null,B?(0,r.tZ)(Ce,{message:o}):null,f?(0,r.tZ)(l.G,{css:{marginTop:-8,marginBottom:0},innerRef:V}):null]})):null}),(function(e,n){return n.autoScroll===e.autoScroll&&n.canReclassify===e.canReclassify&&p()(n.message,e.message)}))},38335:function(e,n,t){t.d(n,{J:function(){return g}});var r=t(72006),i=t(74985),o=t(47900),a=t(39541),l=t(61284),c=t(85368),u=t(49810),s=t(50959),d=t(71253),f=t(66164),p=[t(25462).Z,f.Z,d.Z],h=[],v=function(e){return(0,i.tZ)(c.G,{children:(0,i.tZ)(l.xv,{children:e.children})})},m={h1:v,h2:v,h3:v,h4:v,h5:v,h6:v},g=(0,s.memo)((function(e){var n=e.text,t=e.textColor,l=e.codeComponent,c=l?{code:l}:void 0;return(0,i.tZ)(o.ZP,{remarkPlugins:p,rehypePlugins:h,components:(0,r.Z)({},m,c),css:[u.Z,{p:{color:t,lineHeight:1.875}},a.l0.px(16),a.l0.maxWidth("100%")],lineBreaks:!0,children:n})}))},44090:function(e,n,t){t.d(n,{O:function(){return p}});var r=t(72006),i=t(74985),o=t(83005),a=t(61284),l=t(85368),c=t(39541),u=t(68525),s=t(34979),d=t(5293),f=t(77306);var p=function(e){var n=(0,d.G6)();if(e.inline)return(0,i.tZ)(s.Z,(0,r.Z)({},e));var t=(0,s.F)(e.className),p=t&&function(e){switch(e){case"crystal":return"main.cr";case"python":case"py":return"main.py";case"sh":case"fish":case"zsh":case"bash":return"main.sh";case"javascript":case"js":return"index.js";case"typescript":case"ts":return"index.ts";case"csharp":case"cs":return"main.cs";case"java":return"Main.java";case"go":return"main.go";case"ruby":case"rb":return"main.rb";case"php":return"main.php";case"rust":return"main.rs";case"swift":return"main.swift";case"kotlin":return"main.kt";case"scala":return"main.scala";case"c":return"main.c";case"cpp":case"c++":return"main.cpp";case"dart":return"main.dart";case"elixir":return"main.ex";case"haskell":return"Main.hs";case"lua":return"main.lua";case"perl":return"main.pl";case"r":return"main.r";case"sql":return"main.sql";case"ocaml":return"main.ml";case"html":return"index.html";case"json":return"main.json";case"css":return"main.css";default:return}}(t),h=p?u.$R.from(p):void 0,v=null===h||void 0===h?void 0:h.name,m=String(e.children);return(0,i.tZ)(l.G,{css:[c.l0.colWithGap(12)],children:(0,i.BX)(l.G,{children:[(0,i.BX)(l.G,{css:[c.l0.flex.row,c.l0.align.center,c.l0.p(8),c.l0.backgroundColor.backgroundDefault,{borderTopLeftRadius:4,borderTopRightRadius:4}],children:[(0,i.BX)(l.G,{css:[c.l0.flex.row,c.l0.align.center,{flexGrow:1}],children:[p?(0,i.tZ)(o.Z,{size:12,path:p}):null,v?(0,i.tZ)(a.xv,{multiline:!1,css:[c.l0.pl(4),c.l0.fontSize(12),c.l0.color.foregroundDimmer],children:v}):null]}),(0,i.tZ)(f.f,{code:m}),(0,i.tZ)(n,{code:m})]}),(0,i.tZ)(s.Z,(0,r.Z)({disableCopy:!0,blockStyles:[c.l0.p(8),{borderBottomLeftRadius:4,borderBottomRightRadius:4}]},e))]})})}},95652:function(e,n,t){t.d(n,{p:function(){return h}});var r=t(16988),i=t(48330),o=t(72006),a=t(43119),l=t(71440),c=t(24635);function u(){var e=(0,a.Z)(["\n  query GhostwriterChatCurrentUserQuery {\n    currentUser {\n      username\n      id\n      image\n      isStaff: hasRole(role: REPLIT_STAFF)\n      isVerified\n    }\n  }\n"]);return u=function(){return e},e}var s={},d=(0,l.Ps)(u());var f=t(39691),p=t(50959),h=function(){var e=(0,r.v)(),n=(0,f.$e)(),t=function(e){var n=(0,o.Z)({},s,e);return c.a(d,n)}(),a=t.data,l=t.loading,u=t.error,h=(0,i.Z)();(0,p.useEffect)((function(){n({chatModel:e,replId:h,currentUserData:a,currentUserLoading:l,currentUserError:u})}),[e,a,u,l,n,h])}},51624:function(e,n,t){t.d(n,{e:function(){return p},t:function(){return f}});var r=t(40207),i=t(18171),o=t(91398),a=t(50959),l=t(29203),c={performPaneOperation:function(){}},u=(0,o.cn)(c),s=(0,o.cn)((function(e){return e(u).performPaneOperation})),d=(0,o.cn)(null,(function(e,n,t){var r=t.path,i=t.line,o=t.col,a=e(s);a&&a({operation:"open",pane:{type:"codeEditor",data:{path:r,line:i,col:o}}})})),f=function(){return(0,l.$X)(d)};function p(e){var n=e.debugMode,t=void 0!==n&&n,o=e.performPaneOperation,s=(0,l.Uu)(),d=(0,i.Z)((function(){return{performPaneOperation:o}}),[o]);(0,a.useEffect)((function(){return s.set(r.nE,t),s.set(u,d),function(){s.set(r.nE,!1),s.set(u,c)}}),[t,d,s])}},39605:function(e,n,t){t.d(n,{V:function(){return S}});var r=t(57135),i=t(96583),o=t(45285),a=t(13716),l=t(64918),c=t(39691),u=t(9970),s=t(87978),d=t(68710),f=t(12583),p=t(4561),h=t(59253),v=t(5894);function m(e){var n=(0,s.r6)(e),t=v.hI.some((function(n){return e.endsWith(n)})),r=v.HH.some((function(n){return e.endsWith(n)})),i=v.Fv.some((function(n){return e.split("/").some((function(e){return e.includes(n)}))}));return!n||t||r||i}function g(e){var n=e.length;if(0===n)return!1;var t=0,r=Math.min(n,512);if(n>=3&&239===e[0]&&187===e[1]&&191===e[2])return!1;if(n>=4&&0===e[0]&&0===e[1]&&254===e[2]&&255===e[3])return!1;if(n>=4&&255===e[0]&&254===e[1]&&0===e[2]&&0===e[3])return!1;if(n>=4&&132===e[0]&&49===e[1]&&149===e[2]&&51===e[3])return!1;if(r>=5&&"%PDF-"===e.slice(0,5).toString())return!0;if(n>=2&&254===e[0]&&255===e[1])return!1;if(n>=2&&255===e[0]&&254===e[1])return!1;for(var i=0;i<r;i++){if(0===e[i])return!0;if((e[i]<7||e[i]>14)&&(e[i]<32||e[i]>127)){if(e[i]>193&&e[i]<224&&i+1<r){if(e[++i]>127&&e[i]<192)continue}else if(e[i]>223&&e[i]<240&&i+2<r&&e[++i]>127&&e[i]<192&&e[i+1]>127&&e[i+1]<192){i++;continue}if(t++,i>=32&&100*t/r>10)return!0}}return 100*t/r>10}var y=t(9608),Z=t(91926);function b(e){return w.apply(this,arguments)}function w(){return(w=(0,r.Z)((function(e){var n,t,r,o,a,l,c,v,b,w,x,k,C,S,T,E,R,I,G,D,_,P;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return n=e.recentFiles,t=e.fs,r=e.dotReplit,o=e.maxCharacters,a=e.replLanguage,[4,r.getConfig()];case 1:return c=i.sent().config,v=(null===c||void 0===c?void 0:c.entrypoint)||Z.Z.getMainFileName(a)||null,b=((null===c||void 0===c?void 0:c.hidden)||[]).map((function(e){return(0,d.Z)(e)})).filter(Boolean),(l=w=[]).push.apply(l,(0,u.Z)(n)),v&&w.length<10?(w.push(v),x=(0,s.Il)(v),k=""===x?f.Ql:x,[4,t.readDir(k)]):[3,3];case 2:"children"in(C=i.sent())&&(S=w).push.apply(S,(0,u.Z)(C.children.filter((function(e){return e.type===p.Tv.File})).map((function(e){return k===f.Ql?e.filename:"".concat(x,"/").concat(e.filename)})))),i.label=3;case 3:return 0===(T=(0,u.Z)(new Set(w)).filter((function(e){return!m(e)&&!(0,h.lv)(e,b)&&(0,s.Mb)(e)})).slice(0,10)).length?[2,[]]:[4,Promise.all(T.map((function(e){return t.readFile(e)})))];case 4:for(var B in E=i.sent(),R=[],I=o,T)if(G=T[B],D=(0,y.S)(G),!(_=E[B]).error&&!g(_.content.toBuffer())&&(P=_.content.toString().slice(0,I),R.push({filePath:G,language:D,code:P}),(I-=P.length)<=0))return[2,R];return[2,R]}}))}))).apply(this,arguments)}var x=t(50959),k=t(29203),C=t(27562),S=function(){var e=(0,o.Z)(),n=e.fs,t=e.dotReplit,u=(0,k.c1)(c.aK),s=(0,a.AA)(),d=(0,C.Z)();return(0,x.useCallback)((0,r.Z)((function(){var e,r;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:if(!n||!t)throw new Error("Expected fs and dotReplit services");return e=(0,l.yL)(u).fileContextCharacters,[4,b({recentFiles:r=s(),fs:n,dotReplit:t,maxCharacters:e,replLanguage:d})];case 1:return[2,{fileContext:i.sent(),mostRecentFile:r[0]||null}]}}))})),[n,t,u,s,d])}},56392:function(e,n,t){t.d(n,{b:function(){return v}});var r=t(29203),i=t(18171),o=t(39605),a=t(74985),l=t(31672),c=t(13716),u=t(625),s=t(77306),d=t(7006),f=function(e){var n=e.code,t=(0,c.R3)(),r=(0,c.ex)(),i=(0,l.Z)(null!==t&&void 0!==t?t:r),o=(0,c.Qt)();return(0,a.tZ)(s.e,{code:n,insertCode:function(){var e,t;i&&((0,u.j)(u.U3.GHOSTWRITER_CHAT_CODE_INSERTED),i({code:n,insertAt:null!==(t=null===(e=o())||void 0===e?void 0:e.position.offset)&&void 0!==t?t:"end"},d.B))}})},p=t(5293),h=t(50959);function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,n=(0,o.V)(),t=(0,r.Uu)(),a=(0,i.Z)((function(){var t;return{getGhostwriterWorkspaceFileContext:n,insertCodeButtonComponent:f,openGhostwriterPane:null!==(t=null===e||void 0===e?void 0:e.openGhostwriterPane)&&void 0!==t?t:function(){}}}),[n,null===e||void 0===e?void 0:e.openGhostwriterPane]);(0,h.useEffect)((function(){return t.set(p.Vx,a),function(){t.set(p.Vx,p.f9)}}),[a,t])}},15823:function(e,n,t){t.d(n,{CN:function(){return o},CT:function(){return i},bO:function(){return a}});var r=t(250),i="git",o={gitCommit:{id:"git.commit",name:"Git: Commit",scope:i,default:(0,r.l2)({cmdOrCtrl:!0,key:"Enter"})}},a=Object.values(o)},21303:function(e,n,t){t.d(n,{Ai:function(){return g},BI:function(){return s},Jp:function(){return d},_H:function(){return f},_Z:function(){return m},bA:function(){return v},ox:function(){return y}});var r=t(72006),i=t(4405),o=t(35981),a=t(91398),l=t(92683),c=t(50959),u=t(18171),s=(0,o.u)((function(){return null})),d=(0,o.u)((function(){return null}));function f(e){var n=d.current();(0,c.useEffect)((function(){e!==n&&d.set((function(){return e}))}),[e,n])}var p=(0,a.cn)(null);var h=(0,a.cn)(null,(function(e,n,t){var o=e(p),a=o?(0,r.Z)({},o,t):(0,r.Z)({},t),l=null===a||void 0===a?void 0:a.changes,c=null===a||void 0===a?void 0:a.filePath;if(!c||!l)throw new Error('"filePath", "changes", "users" required when initializing history state');var u=function(e){var n=e.changes.length;return(0,r.Z)({users:{},count:n,version:Math.max(0,n-1),playing:!1,comparing:!1},e)}((0,i.Z)((0,r.Z)({},a),{changes:l,filePath:c}));s.set((function(){return u}));var d=u.changes.length;0!==d?((null===o||void 0===o?void 0:o.changes)&&u.changes!==o.changes&&(u.count=d,u.version=Math.min(u.version,d-1),u.playing=!1,u.comparing=!1),u.version===d-1&&(u.playing=!1),n(p,u)):n(p,u)}));function v(){return(0,l.Dv)(p,{store:Z()})}function m(){return(0,l.b9)(h,{store:Z()})}function g(){return(0,l.b9)((0,u.Z)((function(){return(0,a.cn)(null,(function(e,n){n(p,null)}))}),[]),{store:Z()})}var y=(0,c.createContext)(null);function Z(){var e=(0,c.useContext)(y);if(!e)throw new Error("Expected store in context");return e}},46889:function(e,n,t){t.d(n,{j:function(){return u},p:function(){return s}});var r=t(72006),i=t(625),o=t(13424),a=t(50959),l=t(9353),c=t(21303);function u(){var e=(0,o.uV)();return(0,a.useCallback)((function(n,t,i){e({origin:"History2: useHistoryBSOD",error:n,tags:{source:"ws-history2",type:t},extras:(0,r.Z)({state:c.BI.current()},i)})}),[e])}function s(e){(0,i.j)(l.U3.HISTORY_USED,{action:e,which:"ws"})}},79249:function(e,n,t){t.d(n,{h:function(){return T},w:function(){return C}});var r=t(72006),i=t(4405),o=t(74985),a=t(42256),l=t(39137),c=t(50959),u=t(92153),s=t(91398),d=t(92683);function f(){return(0,c.useState)((function(){return(0,s.MT)()}))[0]}var p=(0,c.createContext)(null);function h(){var e=(0,c.useContext)(p);if(!e)throw new Error("Expected store in context");return e}var v=function(e){return(0,d.b9)(e,{store:h()})};var m=t(18171),g=(0,s.cn)(-1),y=(0,s.cn)([]),Z=(0,s.cn)(void 0),b=(0,s.cn)(null,(function(e,n,t){var r=e(Z);switch(r&&(clearTimeout(r.id),r.cb()),t){case"forward":n(g,(function(n){return Math.min(e(y).length,n+1)}));break;case"backward":n(g,(function(e){return Math.max(0,e-1)}))}var i=e(y),o=e(g);return o>=i.length?"":i[o]})),w=(0,s.cn)(null,(function(e,n,t){var r;clearTimeout(null===(r=e(Z))||void 0===r?void 0:r.id);var i=function(){if(t.length>0){var r=!1;n(y,(function(n){return(0,u.ZP)(n,(function(n){if(t!==n[e(g)])for(r=!0,n.push(t);n.length>20;)n.shift()}))})),r&&n(g,e(y).length-1)}n(Z,void 0)};n(Z,{id:setTimeout(i,2e3),cb:i})}));function x(e){var n=v(w),t=function(){var e=v(b);return{forward:(0,m.Z)((function(){return function(){return e("forward")}}),[e]),backward:(0,m.Z)((function(){return function(){return e("backward")}}),[e])}}(),o=t.forward,l=t.backward,u=(0,c.useRef)(e.value);return(0,c.useEffect)((function(){e.value!==(null===u||void 0===u?void 0:u.current)&&(e.value&&n(e.value),u.current=e.value)}),[n,e.value]),(0,i.Z)((0,r.Z)({},e),{onKeyDown:(0,m.Z)((function(){return function(n){var t;if(n.shiftKey||(0,a.j)(n)){var r;null===(r=e.onKeyDown)||void 0===r||r.call(e,n)}else{var i=n.currentTarget,c=Boolean(i.value.match(/\n/));if("ArrowUp"===n.key){if(c&&i.selectionStart&&i.selectionStart>0)return;return e.onChange(l()),n.preventDefault(),void n.stopPropagation()}if("ArrowDown"===n.key){if(c&&i.selectionEnd&&i.selectionEnd<i.value.length)return;return e.onChange(o()),n.preventDefault(),void n.stopPropagation()}null===(t=e.onKeyDown)||void 0===t||t.call(e,n)}}}),[l,o,e]),onChange:(0,m.Z)((function(){return function(n){e.onChange(n.target.value)}}),[e])})}var k=c.forwardRef((function(e,n){var t=x(e);return(0,o.tZ)(l.B,(0,r.Z)({ref:n},t))})),C=c.forwardRef((function(e,n){var t=f();return(0,o.tZ)(p.Provider,{value:t,children:(0,o.tZ)(k,(0,r.Z)({ref:n},e))})})),S=c.forwardRef((function(e,n){var t=x(e);return(0,o.tZ)(l.II,(0,r.Z)({ref:n},e,t))})),T=c.forwardRef((function(e,n){var t=f();return(0,o.tZ)(p.Provider,{value:t,children:(0,o.tZ)(S,(0,r.Z)({ref:n},e))})}))},59200:function(e,n,t){t.d(n,{m:function(){return h}});var r=t(74985),i=(t(50959),t(43312)),o=t(85368),a=t(39541),l=t(66539),c=t(85682),u=t(47250),s=t(9396),d=t(84721),f=(0,i.F4)("0%,100%{opacity:1;}50%{opacity:0.25;}"),p={root:(0,i.iv)([a.l0.height(20),a.l0.width(20),a.l0.center]),pulse:(0,i.iv)({animation:"".concat(f," 2s infinite")})};function h(){var e=(0,c.Z)(),n=e.isSaving;return e.isOffline?(0,r.tZ)(l.u,{tooltip:"Reconnecting, changes will be synced when you\u2019re online",placement:"right",children:(0,r.tZ)(o.G,{css:p.root,children:(0,r.tZ)(u.Z,{size:16,color:a.TV.redDefault})})}):n?(0,r.tZ)(l.u,{tooltip:"Saving",placement:"right",children:(0,r.tZ)(o.G,{css:[p.root,p.pulse],children:(0,r.tZ)(s.Z,{size:16,color:a.TV.foregroundDimmest})})}):(0,r.tZ)(l.u,{tooltip:"Saved",placement:"right",children:(0,r.tZ)(o.G,{css:p.root,children:(0,r.tZ)(d.Z,{size:16,color:a.TV.foregroundDimmest})})})}},71321:function(e,n,t){t.d(n,{B:function(){return c}});var r=t(74985),i=t(43312),o=t(39541),a=t(85368),l=(0,i.iv)([o.l0.borderRadius("full"),o.l0.position.absolute,o.l0.top(-3),o.l0.right(-3)]);function c(e){var n=e.color,t=void 0===n?o.TV.redStronger:n,i=e.small?6:8;return(0,r.tZ)(a.G,{style:{backgroundColor:t,width:i,height:i},css:l})}},53870:function(e,n,t){t.d(n,{I:function(){return u}});var r=t(72006),i=t(4405),o=t(60471),a=t(68825),l=t(50959),c={nodejs:["package.json","package-lock.json","yarn.lock","node_modules"],python:["poetry.lock","pyproject.toml","requirements.txt",".venv/",".local"],ruby:["Gemfile","Gemfile.lock"],java:["pom.xml","target"]};function u(){var e=(0,a.Z)(),n=(0,o.T)();return(0,l.useMemo)((function(){var t,o=(null===n||void 0===n?void 0:n.packagers)||[],a=(null===o||void 0===o?void 0:o.map((function(e){var n;return(0,i.Z)((0,r.Z)({},e),{title:e.language,packagerFiles:(null===(n=e.packagerFiles)||void 0===n?void 0:n.length)?e.packagerFiles:null!==(t=c[e.language])&&void 0!==t?t:[]})})))||[];return"html"!==(null===e||void 0===e?void 0:e.language)&&"html_beta"!==(null===e||void 0===e?void 0:e.language)||a.push({id:"html",title:"html",name:"HTML Packager",language:"html",packageSearch:!0,guessImports:!1,packagerFiles:[]}),a}),[n,e])}},80848:function(e,n,t){t.d(n,{Z:function(){return c}});var r=t(9970),i=t(74985),o=t(68711),a=t.n(o),l=t(13716);function c(e){var n=e.replTitle,t=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return(0,r.Z)(n.filter(Boolean)).concat(["Replit"]).join(" - ")}((0,l.ex)(),n);return(0,i.tZ)(a(),{children:(0,i.tZ)("title",{children:t},"title")})}},91821:function(e,n,t){t.d(n,{Z:function(){return u}});var r=t(74985),i=t(48306),o=t.n(i),a=(t(50959),t(24025)),l=t(69861),c=t(39541);function u(e){var n=e.preventHighlightBorder,t=(0,l.Z)();return(0,r.BX)("div",{className:o().dynamic([["b8bdeb39d1178985",[t&&!n?"0 3px 0 3px ".concat(t):"var(--shadow-1)"]]])+" loader",children:[(0,r.tZ)("div",{className:o().dynamic([["b8bdeb39d1178985",[t&&!n?"0 3px 0 3px ".concat(t):"var(--shadow-1)"]]])+" wrap",children:(0,r.BX)(a.Z,{backgroundColor:c.TV.backgroundHighest,foregroundColor:c.TV.backgroundHigher,uniqueKey:"editorLoader",children:[(0,r.tZ)("rect",{x:"0",y:"0",rx:"3",ry:"3",width:"70",height:"10",className:o().dynamic([["b8bdeb39d1178985",[t&&!n?"0 3px 0 3px ".concat(t):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"80",y:"0",rx:"3",ry:"3",width:"100",height:"10",className:o().dynamic([["b8bdeb39d1178985",[t&&!n?"0 3px 0 3px ".concat(t):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"190",y:"0",rx:"3",ry:"3",width:"10",height:"10",className:o().dynamic([["b8bdeb39d1178985",[t&&!n?"0 3px 0 3px ".concat(t):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"15",y:"20",rx:"3",ry:"3",width:"130",height:"10",className:o().dynamic([["b8bdeb39d1178985",[t&&!n?"0 3px 0 3px ".concat(t):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"155",y:"20",rx:"3",ry:"3",width:"130",height:"10",className:o().dynamic([["b8bdeb39d1178985",[t&&!n?"0 3px 0 3px ".concat(t):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"15",y:"40",rx:"3",ry:"3",width:"90",height:"10",className:o().dynamic([["b8bdeb39d1178985",[t&&!n?"0 3px 0 3px ".concat(t):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"115",y:"40",rx:"3",ry:"3",width:"60",height:"10",className:o().dynamic([["b8bdeb39d1178985",[t&&!n?"0 3px 0 3px ".concat(t):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"185",y:"40",rx:"3",ry:"3",width:"60",height:"10",className:o().dynamic([["b8bdeb39d1178985",[t&&!n?"0 3px 0 3px ".concat(t):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"0",y:"60",rx:"3",ry:"3",width:"30",height:"10",className:o().dynamic([["b8bdeb39d1178985",[t&&!n?"0 3px 0 3px ".concat(t):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"15",y:"80",rx:"3",ry:"3",width:"70",height:"10",className:o().dynamic([["b8bdeb39d1178985",[t&&!n?"0 3px 0 3px ".concat(t):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"95",y:"80",rx:"3",ry:"3",width:"60",height:"10",className:o().dynamic([["b8bdeb39d1178985",[t&&!n?"0 3px 0 3px ".concat(t):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"165",y:"80",rx:"3",ry:"3",width:"30",height:"10",className:o().dynamic([["b8bdeb39d1178985",[t&&!n?"0 3px 0 3px ".concat(t):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"15",y:"100",rx:"3",ry:"3",width:"110",height:"10",className:o().dynamic([["b8bdeb39d1178985",[t&&!n?"0 3px 0 3px ".concat(t):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"135",y:"100",rx:"3",ry:"3",width:"100",height:"10",className:o().dynamic([["b8bdeb39d1178985",[t&&!n?"0 3px 0 3px ".concat(t):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"0",y:"120",rx:"3",ry:"3",width:"70",height:"10",className:o().dynamic([["b8bdeb39d1178985",[t&&!n?"0 3px 0 3px ".concat(t):"var(--shadow-1)"]]])})]})}),(0,r.tZ)(o(),{id:"b8bdeb39d1178985",dynamic:[t&&!n?"0 3px 0 3px ".concat(t):"var(--shadow-1)"],children:".loader.__jsx-style-dynamic-selector{z-index:3;height:100%;width:100%;background-color:var(--background-default);overflow:hidden;padding:var(--space-16);-webkit-border-bottom-right-radius:var(--border-radius-4);-moz-border-radius-bottomright:var(--border-radius-4);border-bottom-right-radius:var(--border-radius-4);-webkit-border-bottom-left-radius:var(--border-radius-4);-moz-border-radius-bottomleft:var(--border-radius-4);border-bottom-left-radius:var(--border-radius-4);-webkit-box-shadow:".concat(t&&!n?"0 3px 0 3px ".concat(t):"var(--shadow-1)",";-moz-box-shadow:").concat(t&&!n?"0 3px 0 3px ".concat(t):"var(--shadow-1)",";box-shadow:").concat(t&&!n?"0 3px 0 3px ".concat(t):"var(--shadow-1)","}.wrap.__jsx-style-dynamic-selector{overflow:hidden}.wrap.__jsx-style-dynamic-selector>svg{max-width:640px;min-width:500px;height:auto}@media screen and (min-width:900px){.loader.__jsx-style-dynamic-selector{padding:30px}}")})]})}},19358:function(e,n,t){t.d(n,{M:function(){return T}});var r=t(74985),i=t(2272),o=t(45510),a=t(87076),l=t(85368),c=t(80336),u=t(47880),s=t(39541),d=t(50959),f=t(69583);function p(e){var n=e.onDismiss,t=e.context,p=(0,i.Z)(d.useState(!1),2),h=p[0],v=p[1];return(0,r.BX)(r.HY,{children:[(0,r.BX)(l.G,{css:[s.l0.rowWithGap(4),s.l0.align.center,s.l0.justify.start],dataCy:"ghostwriter-opt-in-banner",children:[(0,r.tZ)(o.zx,{iconLeft:(0,r.tZ)(u.Z,{}),text:"Try Ghostwriter",colorway:"blurple",css:[s.l0.flex.grow(1),s.l0.flex.shrink(0),{">div":[s.l0.align.center]}],onClick:function(){return v(!0)}}),(0,r.tZ)(a.h,{onClick:n,tooltipHidden:!0,alt:"Close banner",children:(0,r.tZ)(c.Z,{})})]}),(0,r.tZ)(f.Z,{context:t,isOpen:h,onRequestClose:function(){return v(!1)},uponPurchaseGoTo:"cyclesPage",powerUp:"ghostwriter"})]})}var h=t(33280),v=t(61284),m=t(85747),g=t(54822);function y(e){var n=e.context,t=(0,m.s)(),a=t.cta,c=t.trialExpiryDate,p=(0,i.Z)(d.useState(!1),2),y=p[0],Z=p[1];if(a!==m.m.TrialOngoing&&a!==m.m.TrialExpired)return null;var b=(0,g.X)(c);return(0,r.BX)(r.HY,{children:[(0,r.BX)(l.G,{css:[s.l0.colWithGap(8)],dataCy:"ghostwriter-trial-expiry-banner",children:[(0,r.BX)(l.G,{css:[s.l0.flex.row,s.l0.justify.spaceBetween,{flexWrap:"wrap",gap:"8px"}],children:[(0,r.BX)(l.G,{css:[s.l0.align.center,s.l0.rowWithGap(8)],children:[(0,r.tZ)(u.Z,{}),(0,r.tZ)(v.xv,{multiline:!1,children:"Ghostwriter Trial"})]}),(0,r.tZ)(v.xv,{color:"dimmer",multiline:!1,children:a===m.m.TrialOngoing?b:"Ended"})]}),(0,r.tZ)(o.zx,{onClick:function(){return Z(!0)},text:a===m.m.TrialOngoing?"Subscribe Now":"Reactivate",colorway:"blurple"}),(0,r.tZ)(h.R,{})]}),(0,r.tZ)(f.Z,{context:n,isOpen:y,onRequestClose:function(){return Z(!1)},uponPurchaseGoTo:"cyclesPage",powerUp:"ghostwriter"})]})}var Z=t(46688),b=t(10601);function w(e){var n=e.context,t=(0,m.s)(),i=t.cta,o=t.trialExpiryDate,a=i===m.m.TrialOngoing&&(0,b.Z)(o,new Date)<=3,l=i===m.m.TrialExpired;return a?(0,r.tZ)(x,{context:n}):l?(0,r.tZ)(k,{context:n}):null}function x(e){var n=e.context,t=(0,Z.Z)("workspace","ghostwriter-trial-3-day-left-modal"),i=t.shouldDisplay,o=t.dismiss,a=t.register;return d.useEffect((function(){a()}),[a]),(0,r.tZ)(f.Z,{context:n,isOpen:i,onRequestClose:o,powerUp:"ghostwriter",isAutoTriggered:!0,uponPurchaseGoTo:"cyclesPage"})}function k(e){var n=e.context,t=(0,Z.Z)("workspace","ghostwriter-trial-expired-modal"),i=t.shouldDisplay,o=t.dismiss,a=t.register;return d.useEffect((function(){a()}),[a]),(0,r.tZ)(f.Z,{context:n,isOpen:i,onRequestClose:o,powerUp:"ghostwriter",isAutoTriggered:!0,uponPurchaseGoTo:"cyclesPage"})}var C=t(25150),S=t(70232);function T(){var e=(0,m.s)(),n=e.cta,t=e.loading,i=(0,C.o)("ghostwriter-repl-resources-cta"),o=i.isLoading,a=i.isDone,l=i.setAsDone;if(o||t)return null;switch(n){case m.m.None:case m.m.Activated:return null;case m.m.TrialOngoing:case m.m.TrialExpired:return(0,r.BX)(r.HY,{children:[(0,r.tZ)(w,{context:"repl_resources"}),(0,r.tZ)(y,{context:"repl_resources"})]});case m.m.Activate:return a||o?null:(0,r.tZ)(p,{onDismiss:l,context:"repl_resources"});default:(0,S.Z)(n)}}},35536:function(e,n,t){t.d(n,{ky:function(){return f},qo:function(){return s}});var r=t(72006),i=t(43119),o=t(71440),a=t(24635);function l(){var e=(0,i.Z)(["\n  fragment PowerUpActionsMultiBoostToggle on Repl {\n    id\n    powerUps {\n      __typename\n      ... on ReplPowerUpTypes {\n        boost {\n          __typename\n          sku\n          methodOfPayment\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,i.Z)(["\n  query MultiBoostToggle($replId: String!) {\n    repl(id: $replId) {\n      __typename\n      ... on Repl {\n        ...PowerUpActionsMultiBoostToggle\n      }\n    }\n  }\n  ","\n"]);return c=function(){return e},e}var u={},s=(0,o.Ps)(l()),d=(0,o.Ps)(c(),s);function f(e){var n=(0,r.Z)({},u,e);return a.a(d,n)}},98054:function(e,n,t){t.d(n,{Z:function(){return Me}});var r=t(74985),i=t(50959),o=t(85368),a=t(39541),l=t(77511),c=t(9970),u=t(61284),s=t(63128),d=t(31854),f=t(48667),p=t(32104),h=t(56169);function v(e){var n=e.id,t=e.title,l=e.children,c=(0,h.H)()(n);return(0,r.BX)(o.G,{css:[a.l0.flex.row,a.l0.justify.spaceBetween,a.l0.align.center],children:[(0,r.tZ)(o.G,{css:a.l0.flex.growAndShrink(1),tag:"label",htmlFor:c,children:"string"===typeof t?(0,r.tZ)(u.xv,{multiline:!1,children:t}):t}),i.cloneElement(l,{id:c})]})}var m=t(87076),g=t(59066),y=t(85747),Z=t(80572),b=t(70232),w=t(57389),x=t(31858),k=t(88541),C=t(11619),S=t(625),T=t(66539),E=t(70719),R=t(98416),I=t(72006),G=t(43119),D=t(71440),_=t(24635);function P(){var e=(0,G.Z)(["\n  query CodeSuggestionPreferences {\n    currentUser {\n      id\n      userPowerUpsByType {\n        __typename\n        ... on UnauthorizedError {\n          message\n        }\n        ... on UserPowerUpsTypes {\n          ghostwriter {\n            active\n          }\n        }\n      }\n    }\n  }\n"]);return P=function(){return e},e}var B={},A=(0,D.Ps)(P());var U=t(33280),L=t(44333),X=Array.from(R.vw,(function(e){return{title:e,value:e}})),N={titleContainer:[a.l0.rowWithGap(8),a.l0.align.center]};function M(){var e,n,t=(0,k.P5)({controlName:"flag-code-suggestion-engine",logFlagToAnalytics:!1}),i=function(e){var n=(0,I.Z)({},B,e);return _.a(A,n)}().data,l="UserPowerUpsTypes"===(null===i||void 0===i||null===(e=i.currentUser)||void 0===e?void 0:e.userPowerUpsByType.__typename)&&i.currentUser.userPowerUpsByType.ghostwriter.active,s=(0,C.Z)(),f=s.preferences,p=s.update,h=(0,x.Z)().engine,m={value:null,title:"default"},g=function(e,n){p((0,w.Z)({},e,n)),(0,S.j)(S.U3.SETTINGS_TOGGLED,{settingChanged:e,updatedValue:n})};return l?(0,r.BX)(o.G,{css:a.l0.colWithGap(12),children:[(0,r.tZ)(v,{id:"codeSuggestionToggle",title:(0,r.BX)(r.HY,{children:[(0,r.tZ)(o.G,{css:N.titleContainer,children:(0,r.tZ)(u.xv,{multiline:!1,children:"Complete Code"})}),(0,r.BX)(u.xv,{variant:"small",css:[a.l0.color.foregroundDimmest],children:["Complete Code provides inline \u201cghost text\u201d suggestions while you code.",(0,r.tZ)("br",{}),"Press tab or swipe right on your mobile device to accept."]})]}),children:(0,r.tZ)(r.HY,{children:(0,r.tZ)(L.r,{"aria-label":"Code complete",isSelected:f.codeSuggestion,onChange:function(e){g("codeSuggestion",e)}})})}),t?(0,r.BX)(r.HY,{children:[(0,r.tZ)(U.R,{}),(0,r.tZ)(v,{id:"completeCodeEngine",title:(0,r.BX)(r.HY,{children:[(0,r.BX)(o.G,{css:[a.l0.flex.row,a.l0.rowWithGap(8),a.l0.center,a.l0.justify.start],children:[(0,r.BX)(u.xv,{multiline:!1,children:["Ghostwriter Complete Code Engine (override)"," "]}),(0,r.tZ)(T.u,{tooltip:"You are seeing this functionality because you have special permissions.",children:(0,r.tZ)(E.Z,{})})]}),(0,r.BX)(u.xv,{variant:"small",css:[a.l0.color.foregroundDimmest],children:["Current applied engine: ",h]})]}),children:(0,r.tZ)(r.HY,{children:(0,r.tZ)(d.P,{css:[a.l0.minWidth(184)],initialSelectedItem:null!==(n=X.find((function(e){return e.value===f.completeCodeEngine})))&&void 0!==n?n:m,onChange:function(e){return g("completeCodeEngine",null===e||void 0===e?void 0:e.value)},items:[m].concat((0,c.Z)(X))})})})]}):null]}):null}var F={titleContainer:[a.l0.rowWithGap(8),a.l0.align.center],surface:[a.l0.p(8),a.l0.colWithGap(8),a.l0.borderRadius(8),a.l0.align.start]};function O(){var e=(0,y.s)(),n=e.cta,t=e.loading,i=(0,l.rv)();if(t)return(0,r.tZ)(v,{id:"ghostwriter",title:"Ghostwriter",children:(0,r.tZ)(p.Z,{})});switch(n){case y.m.None:return null;case y.m.Activated:case y.m.TrialOngoing:return(0,r.tZ)(M,{});case y.m.TrialExpired:case y.m.Activate:return i?null:(0,r.tZ)(v,{id:"ghostwriter",title:(0,r.BX)(r.HY,{children:[(0,r.BX)(o.G,{css:F.titleContainer,children:[(0,r.tZ)(u.xv,{multiline:!1,children:"Ghostwriter"}),(0,r.tZ)(Z.Z,{context:"workspace_settings_pane",powerUp:"ghostwriter"})]}),(0,r.tZ)(u.xv,{variant:"small",css:[a.l0.color.foregroundDimmest],multiline:!1,children:"Replit's AI pair programmer can complete, generate, explain, and transform code."})]}),children:(0,r.tZ)(g.Z,{context:"workspace_settings_pane"})});default:(0,b.Z)(n)}}var W=t(16988),H=t(64918),V=t(18180),z=Array.from(H.ce,(function(e){return{title:e,value:e}}));function j(){var e,n=(0,V.d)(),t=(0,k.P5)({controlName:"flag-ghostwriter-chat-engine-override",logFlagToAnalytics:!1}),i=(0,C.Z)(),l=i.preferences,s=i.update,f=(0,W.v)(),p={value:null,title:"default"};return(0,r.tZ)(r.HY,{children:n&&t?(0,r.BX)(r.HY,{children:[(0,r.tZ)(U.R,{}),(0,r.tZ)(v,{id:"completeCodeEngine",title:(0,r.BX)(r.HY,{children:[(0,r.BX)(o.G,{css:[a.l0.flex.row,a.l0.rowWithGap(8),a.l0.center,a.l0.justify.start],children:[(0,r.BX)(u.xv,{multiline:!1,children:["Ghostwriter Chat Engine (override)"," "]}),(0,r.tZ)(T.u,{tooltip:"You are seeing this functionality because you have special permissions.",children:(0,r.tZ)(E.Z,{})})]}),(0,r.BX)(u.xv,{variant:"small",css:[a.l0.color.foregroundDimmest],children:["Current applied engine: ",f]})]}),children:(0,r.tZ)(r.HY,{children:(0,r.tZ)(d.P,{css:[a.l0.minWidth(184)],initialSelectedItem:null!==(e=z.find((function(e){return e.value===l.chatEngine})))&&void 0!==e?e:p,onChange:function(e){return n="chatEngine",t=null===e||void 0===e?void 0:e.value,s((0,w.Z)({},n,t)),void(0,S.j)(S.U3.SETTINGS_TOGGLED,{settingChanged:n,updatedValue:t});var n,t},items:[p].concat((0,c.Z)(z))})})})]}):null})}var q=t(34147),$=t(2439),Y=t(42256),K=t(90171),Q=t(45510),J=t(39137),ee=t(82568),ne=t(63837),te=t(41120),re=t(8622);function ie(e){return e.slice().sort((function(e,n){return e-n}))}var oe=(0,ee.X)({ruler:[a.l0.py(4),a.l0.px(8),a.l0.rowWithGap(4),a.l0.align.center,a.l0.borderRadius(8)],remove:[a.l0.borderRadius(4)],title:[a.l0.pr(8),a.l0.overflow("visible"),a.l0.flex.shrink(0)],body:[a.l0.flex.row,a.l0.flex.wrapReverse,a.l0.align.start,a.l0.justify.end,a.l0.flex.growAndShrink(1),{gap:a.TV.space4}],list:[a.l0.flex.row,a.l0.flex.wrap,a.l0.flex.growAndShrink(1),a.l0.align.end,a.l0.justify.end,{gap:a.TV.space4}],add:[a.l0.rowWithGap(4),a.l0.align.center]});function ae(e){var n=e.pos,t=e.onRemove;return(0,r.BX)(s.Tg,{css:oe.ruler,elevated:!0,children:[(0,r.tZ)(u.xv,{multiline:!1,children:n}),(0,r.tZ)(m.h,{css:oe.remove,alt:"Remove ruler",onClick:t,children:(0,r.tZ)(te.Z,{})})]})}function le(){var e=(0,i.useState)(!1),n=e[0],t=e[1],a=(0,i.useState)(80),l=a[0],s=a[1],d=(0,i.useRef)(null),f=(0,i.useRef)(null),p=-1===l,h=l>=0&&l<=1e3,m=(0,C.Z)(),g=m.preferences,y=m.update,Z=ie(g.rulers);return(0,r.tZ)(v,{id:"rulers",title:(0,r.tZ)(u.xv,{css:oe.title,multiline:!1,children:"Rulers"}),children:(0,r.BX)(o.G,{css:oe.body,children:[(0,r.tZ)(o.G,{css:oe.list,children:Z.map((function(e,n){return(0,r.tZ)(ae,{pos:e,onRemove:function(){y({rulers:Z.filter((function(e,t){return t!==n}))})}},n)}))}),n?(0,r.BX)(o.G,{css:oe.add,children:[(0,r.tZ)(J.II,{ref:d,type:"number",style:{width:p?"6ch":l.toString().length+5.5+"ch"},value:l>=0?l.toString():"",onChange:function(e){if(""===e.target.value)s(-1);else{var n=parseInt(e.target.value,10);isNaN(n)||s(n)}},onKeyDown:function(e){"Escape"===e.key?(s(80),t(!1)):"Enter"===e.key&&h&&(y({rulers:ie((0,c.Z)(Z).concat([l]))}),t(!1),s(80))},onBlur:function(e){e.relatedTarget!==f.current&&(t(!1),s(80))},onFocus:function(e){e.target.select()},autoFocus:!0}),(0,r.tZ)(Q.zx,{ref:f,text:"Accept",colorway:"primary",iconLeft:(0,r.tZ)(ne.Z,{}),disabled:!h,onClick:function(){h&&(y({rulers:ie((0,c.Z)(Z).concat([l]))}),t(!1),s(80))},onBlur:function(e){e.relatedTarget!==d.current&&(t(!1),s(80))}})]}):(0,r.tZ)(r.HY,{children:Z.length>=10?null:(0,r.tZ)(Q.zx,{text:"Add Ruler",iconLeft:(0,r.tZ)(re.Z,{}),onClick:function(){return t(!0)}})})]})})}var ce=t(54659),ue=t(25198);function se(e){var n=e.onBeforePreferencesUpdate,t=e.hideLayoutControl,i=e.className,h=e.resetLayout,g=(0,C.Z)(),y=g.preferences,Z=g.update,b=(0,l.Vg)((0,K.useRouter)()),w=(0,l.T3)(),x=(0,ce.cR)(),T=(0,k.P5)({controlName:"flag-ws-minimap",logFlagToAnalytics:!1}),E=(0,k.P5)({controlName:"flag-editor-rulers",logFlagToAnalytics:!1}),R=function(e){n&&n(e),Object.keys(e).forEach((function(n){var t=e[n];(0,S.j)(S.U3.SETTINGS_TOGGLED,{settingChanged:n,updatedValue:t})})),Z(e)};if(!y)return null;var I=[{value:"side-by-side",title:"side-by-side"},{value:"stacked",title:"stacked"}],G=[{value:10,title:"tiny"},{value:12,title:"small"},{value:14,title:"normal"},{value:18,title:"large"},{value:24,title:"huge"}],D=[{value:"spaces",title:"spaces"},{value:"tabs",title:"tabs"}],_=[{value:2,title:"2"},{value:4,title:"4"},{value:8,title:"8"}],P=[{value:"default",title:"default"},{value:"emacs",title:"emacs"},{value:"vim",title:"vim"}],B=[{value:"none",title:"none"},{value:"soft",title:"soft wrap"}],A=[{value:"none",title:"none"},{value:"blocks",title:"blocks"},{value:"characters",title:"characters"}],X=["cmdOrCtrlKey","altKey"].map((function(e){return{value:e,title:Y.U[e]}}));return(0,r.BX)(s.Tg,{className:i,background:"default",css:[a.l0.p(16),a.l0.colWithGap(12)],children:[t?null:(0,r.BX)(r.HY,{children:[(0,r.tZ)(v,{id:"layout",title:"Default layout",children:(0,r.BX)(o.G,{css:[a.l0.align.center,a.l0.rowWithGap(8)],children:[h?(0,r.tZ)(m.h,{alt:"Reset layout",onClick:function(){h.reset()},children:h.reseting?(0,r.tZ)(p.Z,{}):(0,r.tZ)(f.Z,{})}):null,(0,r.tZ)(d.P,{initialSelectedItem:I.find((function(e){return y.isLayoutStacked?"stacked"===e.value:"side-by-side"===e.value})),onChange:function(e){var n="stacked"===(null===e||void 0===e?void 0:e.value);R({isLayoutStacked:n})},items:(0,c.Z)(I)})]})}),(0,r.tZ)(U.R,{})]}),(0,r.tZ)(v,{id:"fontSize",title:"Font size",children:(0,r.tZ)(d.P,{initialSelectedItem:G.find((function(e){return e.value===y.fontSize})),onChange:function(e){var n="number"===typeof(null===e||void 0===e?void 0:e.value)?e.value:14;R({fontSize:n})},items:(0,c.Z)(G)})}),(0,r.tZ)(U.R,{}),(0,r.tZ)(v,{id:"indentType",title:"Indent type",children:(0,r.tZ)(d.P,{initialSelectedItem:D.find((function(e){return e.value===(y.indentIsSpaces?"spaces":"tabs")})),onChange:function(e){var n="spaces"===(null===e||void 0===e?void 0:e.value);R({indentIsSpaces:n})},items:(0,c.Z)(D)})}),(0,r.tZ)(U.R,{}),(0,r.tZ)(v,{id:"indentSize",title:"Indent size",children:(0,r.tZ)(d.P,{initialSelectedItem:_.find((function(e){return e.value===y.indentSize})),onChange:function(e){var n="number"===typeof(null===e||void 0===e?void 0:e.value)?e.value:2;R({indentSize:n})},items:(0,c.Z)(_)})}),(0,r.tZ)(U.R,{}),(0,r.tZ)(v,{id:"wrapping",title:"Wrapping",children:(0,r.tZ)(d.P,{initialSelectedItem:B.find((function(e){return e.value===(y.wrapping?"soft":"none")})),onChange:function(e){var n="soft"===(null===e||void 0===e?void 0:e.value);R({wrapping:n})},items:(0,c.Z)(B)})}),(0,r.tZ)(U.R,{}),T&&!w?(0,r.BX)(r.HY,{children:[(0,r.tZ)(v,{id:"minimap",title:"Minimap",children:(0,r.tZ)(d.P,{initialSelectedItem:A.find((function(e){return e.value===y.minimapDisplay})),onChange:function(e){R({minimapDisplay:e.value})},items:(0,c.Z)(A)})}),(0,r.tZ)(U.R,{})]}):null,E?(0,r.BX)(r.HY,{children:[(0,r.tZ)(le,{}),(0,r.tZ)(U.R,{})]}):null,(0,r.tZ)(v,{id:"keybinds",title:"Keybinds",children:(0,r.tZ)(d.P,{initialSelectedItem:P.find((function(e){return["vim","emacs"].includes(e.value)?e.value===y.keyboardHandler:"default"===e.value&&!y.keyboardHandler})),onChange:function(e){var n=["vim","emacs"].includes(e.value)?e.value:null;R({keyboardHandler:n})},items:(0,c.Z)(P),dataCy:"keybinds"})}),(0,r.tZ)(U.R,{}),(0,r.tZ)(v,{id:"multiselectModifier",title:(0,r.BX)(r.HY,{children:[(0,r.tZ)(u.xv,{multiline:!1,children:"Multiselect modifier key"}),(0,r.tZ)(u.xv,{variant:"small",css:[a.l0.color.foregroundDimmest],children:"Modifier key for selecting multiple items in the filetree."})]}),children:(0,r.tZ)(d.P,{initialSelectedItem:X.find((function(e){return e.value===y.multiselectModifierKey})),onChange:function(e){R({multiselectModifierKey:e.value})},items:(0,c.Z)(X)})}),(0,r.tZ)(U.R,{}),(0,r.tZ)(O,{}),(0,r.tZ)(j,{}),(0,r.tZ)(U.R,{}),(0,r.tZ)(v,{id:"codeIntelligence",title:(0,r.BX)(r.HY,{children:[(0,r.tZ)(u.xv,{multiline:!1,children:"Code intelligence"}),(0,r.tZ)(u.xv,{variant:"small",css:[a.l0.color.foregroundDimmest],children:"Code intelligence gives you autocomplete, syntax highlighting, and hints as you type."})]}),children:(0,r.tZ)(L.r,{"aria-label":"Code Intelligence",isSelected:y.codeIntelligence,onChange:function(e){R({codeIntelligence:e})}})}),(0,r.tZ)(U.R,{}),(0,r.tZ)(v,{id:"accessibleTerminal",title:(0,r.BX)(r.HY,{children:[(0,r.tZ)(u.xv,{multiline:!1,children:"Accessible Terminal Output"}),(0,r.tZ)(u.xv,{variant:"small",css:[a.l0.color.foregroundDimmest],children:"Enable this setting to use a screen reader. Warning: this can affect performance."})]}),children:(0,r.tZ)(L.r,{"aria-label":"Accessible Terminal Output",isSelected:y.accessibleTerminal,onChange:function(e){R({accessibleTerminal:e})}})}),(0,r.tZ)(U.R,{}),(0,r.tZ)(v,{id:"webviewAutoOpenOnPortOpened",title:(0,r.BX)(r.HY,{children:[(0,r.tZ)(u.xv,{multiline:!1,children:x?"Automatic webview (unavailable in this Repl)":"Automatic webview"}),(0,r.tZ)(u.xv,{variant:"small",css:[a.l0.color.foregroundDimmest],multiline:!1,children:"Open a webview automatically when a port is open"}),x?(0,r.tZ)(o.G,{css:[a.l0.pt(8),a.l0.maxWidth("calc(100% - 12px)")],children:(0,r.tZ)(ue.E,{colorway:"orange",text:'This preference is unavailable in Extension Repls. To view custom tools in dev mode, click the "Preview" button in Extension Devtools instead.'})}):null]}),children:(0,r.tZ)(L.r,{"aria-label":"Automatic Webview",isSelected:y.webviewAutoOpenOnPortOpened,isDisabled:x,onChange:function(e){R({webviewAutoOpenOnPortOpened:e})}})}),b?null:(0,r.BX)(r.HY,{children:[(0,r.tZ)(U.R,{}),(0,r.tZ)(v,{id:"theme",title:"Theme",children:(0,r.tZ)(q.Z,{css:[a.l0.minWidth(184),a.l0.backgroundColor.backgroundHigher],context:$.HY.WorkspacePreferencesPane})})]})]})}var de=t(82001),fe=t(17807),pe=t(80731),he=t(1050),ve=t(26992),me=t(99964),ge=t(18988),ye=t(76735),Ze=t(250),be=t(83718),we=t(16918),xe=t(91291),ke=t(49944),Ce=t(70804),Se=t(18171),Te=t(43312);function Ee(e){var n=function(){r.current&&clearTimeout(r.current),o.current=[]},t=function(t){e({type:"success",shortcut:t.length>1?[t[0],t[1]]:t[0]}),n()},r=(0,i.useRef)(null),o=(0,i.useRef)([]);return{onKeyDown:function(n){var i=r.current,a=o.current;n.preventDefault(),n.stopPropagation(),i&&clearTimeout(i);var l=(0,Ze.lc)(n);if(l)if((0,Ze.ZG)(l))e({type:"update",recorded:a.length?[a[0],l]:[l]});else if(a.length>0&&"Enter"===l)t(a);else{a.push(l),e({type:"update",recorded:a});var c=2===a.length?0:600;r.current=setTimeout((function(){return t(a)}),c)}},startRecording:function(){n(),e({type:"start"})},stopRecording:function(){n(),e({type:"stop"})}}}var Re=(0,ee.X)({root:[a.l0.colWithGap(8)],row:[a.l0.rowWithGap(8),a.l0.align.center,a.l0.minHeight(28)],left:[a.l0.colWithGap(2),a.l0.flex.grow(0),a.l0.flex.shrink(1)],right:[a.l0.rowWithGap(4),a.l0.align.center,a.l0.justify.end,a.l0.position.relative,a.l0.flex.grow(1),a.l0.flex.shrink(0)],recordingRow:[a.l0.flex.column,a.l0.align.center,a.l0.justify.end,a.l0.pr(24)],recordingRowInner:[a.l0.rowWithGap(8),a.l0.align.center],recordingRowKeys:[a.l0.position.relative],recordingRowHint:[a.l0.position.absolute,a.l0.top(20),a.l0.right(0),{fontStyle:"italic"}],recordingRowPlaceholder:[a.l0.display.flex,a.l0.align.baseline,a.l0.rowWithGap(4),{fontStyle:"italic"}],keys:[a.l0.display.inlineFlex,a.l0.rowWithGap(12)],secondaryText:[a.l0.display.flex,a.l0.flex.row,a.l0.align.center,a.l0.rowWithGap(4)],secondaryTextId:[a.l0.flex.grow(1),a.l0.flex.shrink(0)],secondaryTextDescription:[a.l0.flex.grow(0),a.l0.flex.shrink(1),a.l0.color.foregroundDimmest],buttons:[a.l0.pl(8),a.l0.display.flex,a.l0.flex.row]}),Ie=[a.l0.reset.button,fe.gU.listItem,a.l0.height(24),a.l0.width(24),a.l0.p(2)],Ge=(0,ee.X)({root:[a.l0.rowWithGap(8),a.l0.align.center],recordingRow:[a.l0.rowWithGap(4),a.l0.align.center]});function De(e){var n,t,a,l,c=e.command,s=e.filter,d=(0,de.w0)(),f=d.enableRunner,p=d.disableRunner,h=(0,de.r3)(),v=(0,de.wU)(),g=(0,de.V_)(c.id),y=(0,i.useState)(null),Z=y[0],b=y[1],w=(0,i.useState)(null),x=w[0],k=w[1],C=Ee((function(e){switch(e.type){case"start":return p(),k({recorded:[]}),void b(null);case"stop":return f(),k(null),void b(null);case"update":return k({recorded:e.recorded}),void b(null);case"success":f();var n=(0,Ze.SG)(e.shortcut);if(!n)return k(null),void b(null);var t=h(c.id,n);return t?(k(null),void b('This shortcut conflicts with "'.concat(t.conflict.name,'"'))):void k(null);case"error":var r;return void k((function(n){return{error:e.message,recorded:null!==(r=null===n||void 0===n?void 0:n.recorded)&&void 0!==r?r:[]}}))}})),S=C.stopRecording,T=C.startRecording,E=C.onKeyDown,R=(0,me.Z)((function(){return S()}),[]),I=Boolean(x);Be(I);var G=null!==(l=null===x||void 0===x?void 0:x.recorded)&&void 0!==l?l:[],D=null===x||void 0===x?void 0:x.error,_=s.length>0,P=null===(n=we.Z.match(s,c.name))||void 0===n?void 0:n.ranges,B=null===(t=we.Z.match(s,c.id))||void 0===t?void 0:t.ranges,A=(null===c||void 0===c?void 0:c.description)?null===(a=we.Z.match(s,c.description))||void 0===a?void 0:a.ranges:void 0,U=(0,Se.Z)((function(){return s.replaceAll('"',"").split("-").map((function(e){return e.toLowerCase()}))}),[s]),L=[{label:"Remove",key:"remove"}];g&&g!==c.shortcut&&L.push({label:"Reset",key:"reset"});var X,N=(0,Se.Z)((function(){return function(e){switch(e){case"remove":v(c.id);break;case"reset":var n=h(c.id,g);n&&b("".concat(g,' conflicts with "').concat(n.conflict.name,'"'))}}}),[c.id,g,h,v]);return(0,r.BX)(o.G,{css:Re.root,children:[(0,r.BX)(o.G,{css:Re.row,children:[(0,r.BX)(o.G,{css:Re.left,children:[(0,r.tZ)(ke.x,{text:c.name,highlight:P,dimmed:_}),(0,r.BX)(u.xv,{variant:"small",css:Re.secondaryText,multiline:!1,children:[_?(0,r.tZ)(ke.x,{css:Re.secondaryTextId,text:c.id,highlight:B,dimmed:_}):null,c.description?(0,r.BX)(r.HY,{children:[_?(0,r.tZ)(u.xv,{color:"dimmest",multiline:!1,children:"\u2022"}):null,(0,r.tZ)(ke.x,{css:Re.secondaryTextDescription,text:c.description,highlight:A,dimmed:_})]}):null]})]}),(0,r.BX)(o.G,{innerRef:I?R:void 0,css:Re.right,children:[I?(0,r.tZ)(ge.MT,{autoFocus:!0,restoreFocus:!0,children:(0,r.tZ)("input",{onKeyDown:E,css:{opacity:0,width:1}})}):null,c.shortcut&&!I?(0,r.tZ)(be.bM,{small:!0,keyCombo:c.shortcut,match:U}):null,c.shortcut||I?null:(0,r.tZ)(Q.zx,{small:!0,outlined:!0,iconLeft:(0,r.tZ)(re.Z,{}),text:"Add shortcut",onClick:function(){return T()}}),I?(0,r.tZ)(o.G,{css:Re.recordingRow,children:(0,r.BX)(o.G,{css:Re.recordingRowInner,children:[(0,r.tZ)(o.G,{css:Re.recordingRowKeys,children:G.length>0?(0,r.tZ)(o.G,{css:[Re.keys],children:G.map((function(e,n){return(0,r.tZ)(be.bM,{small:!0,keyCombo:e},"".concat(e,"-").concat(n))}))}):(0,r.tZ)(u.xv,{multiline:!1,color:"dimmest",css:Re.recordingRowPlaceholder,children:"Recording..."})}),(0,r.tZ)(m.h,{alt:"Stop",onClick:function(){return S()},children:(0,r.tZ)(Le,{})})]})}):null,c.shortcut&&!I?(0,r.BX)(o.G,{css:Re.buttons,children:[(0,r.tZ)(m.h,{alt:"Change",onClick:function(){return T()},children:(0,r.tZ)(he.Z,{})}),(0,r.tZ)(pe.ZE,{"aria-label":"More",cssProps:Ie,items:L,icon:(0,r.tZ)(Ce.Z,{size:12}),placement:"bottom-end",onAction:N,children:L.map((function(e){return(0,r.tZ)(pe.ck,{textValue:e.label,children:(0,r.tZ)(u.xv,{multiline:!1,children:e.label})},e.key)}))})]}):null]})]}),D?(0,r.tZ)(ue.E,{icon:(0,r.tZ)(ye.Z,{}),colorway:"warning",text:D,closable:!0,closeAction:function(){return k((function(e){return{recorded:null!==(X=null===e||void 0===e?void 0:e.recorded)&&void 0!==X?X:[]}}))}}):null,Z?(0,r.tZ)(ue.E,{icon:(0,r.tZ)(ye.Z,{}),colorway:"warning",text:Z,closable:!0,closeAction:function(){return b(null)}}):null]})}var _e=(0,ee.X)({root:[a.l0.colWithGap(8),a.l0.p(0)],surface:[a.l0.pt(8),a.l0.borderRadius(8),a.l0.colWithGap(12)]});function Pe(){var e=(0,de.w0)(),n=e.enableRunner,t=e.disableRunner,a=(0,i.useState)(""),l=a[0],d=a[1],f=(0,de.xF)(),p=(0,Se.Z)((function(){return(0,c.Z)(f.values())}),[f]);function h(e){var n=e.flat();return n.length>1?n.map((function(e){return h([e])})).join(" "):(0,Ze.QR)(n[0]).map((function(e){return'"'.concat(e,'"')})).join("-").replaceAll(" ","space")}var v=we.Z.filter(l,p,{extract:function(e){var n="".concat(e.name," ").concat(e.id);return e.description&&(n+=" ".concat(e.description)),e.shortcut&&(n+=" ".concat(h([e.shortcut]))),n}}),g=(0,i.useRef)(null),y=(0,i.useState)(!1),Z=y[0],b=y[1];Be(Z);var w=Ee((function(e){switch(e.type){case"start":var r;return t(),b(!0),d(""),void(null===g||void 0===g||null===(r=g.current)||void 0===r||r.focus());case"stop":case"error":var i,o;return n(),b(!1),null===g||void 0===g||null===(i=g.current)||void 0===i||i.focus(),void(null===g||void 0===g||null===(o=g.current)||void 0===o||o.select());case"success":return void d(h([e.shortcut]));case"update":return void d(h(e.recorded))}})),x=w.stopRecording,k=w.startRecording,C=w.onKeyDown;return(0,r.BX)(o.G,{css:_e.root,children:[(0,r.BX)(o.G,{css:Ge.root,children:[(0,r.tZ)(ge.MT,{children:(0,r.tZ)(J.II,{ref:g,placeholder:Z?"Recording keys. Press Escape to exit":"Type to search keyboard shortcuts",onBlur:Z?x:void 0,onChange:function(e){return d(e.target.value)},onKeyDown:Z?function(e){"Escape"===e.key?x():C(e)}:void 0,value:l})}),(0,r.tZ)(o.G,{css:Ge.recordingRow,children:Z?(0,r.BX)(r.HY,{children:[(0,r.tZ)(u.xv,{color:"dimmest",css:[{fontStyle:"italic"}],multiline:!1,children:"Recording..."}),(0,r.tZ)(m.h,{alt:"Stop Recording",onClick:x,children:(0,r.tZ)(Le,{})})]}):(0,r.tZ)(m.h,{alt:"Record Keys",onClick:k,children:(0,r.tZ)(xe.Z,{})})}),(0,r.tZ)(m.h,{alt:"Clear Input",disabled:0===l.length,onClick:function(){var e;d(""),null===g||void 0===g||null===(e=g.current)||void 0===e||e.focus()},children:(0,r.tZ)(te.Z,{})})]}),v.length>0?(0,r.tZ)(s.Tg,{css:_e.surface,children:v.map((function(e,n){return(0,r.BX)(i.Fragment,{children:[n>0?(0,r.tZ)(s.Tg,{elevated:!0,style:{height:1}}):null,(0,r.tZ)(De,{command:e.original,filter:l})]},e.original.id)}))}):null]})}function Be(e){var n="You have unsaved changes";(0,i.useEffect)((function(){var t=function(e){return e.preventDefault(),e.returnValue=n,n};if(e)return window.addEventListener("beforeunload",t),function(){window.removeEventListener("beforeunload",t)}}),[e])}var Ae=(0,Te.F4)("0%{transform:scale(1);}40%{transform:scale(1.3);}100%{transform:scale(1);}"),Ue=(0,ee.X)({background:[{animationName:Ae,animation:"".concat(Ae," 2s cubic-bezier(0.4, 0, 0.6, 1) infinite"),boxShadow:"0 0 10px ".concat(a.TV.redStronger)},a.l0.height(11),a.l0.width(11),a.l0.borderRadius("full"),a.l0.position.absolute],container:[a.l0.position.relative,a.l0.align.center,a.l0.justify.center],icon:[{zIndex:1}]});function Le(){return(0,r.BX)(o.G,{css:Ue.container,children:[(0,r.tZ)(ve.Z,{css:Ue.icon,color:a.TV.redStronger}),(0,r.tZ)(o.G,{css:Ue.background})]})}function Xe(){var e=(0,h.H)()("keyboard_shortcuts");return(0,r.BX)(s.Tg,{background:"default",css:[a.l0.px(16),a.l0.pb(16),a.l0.colWithGap(12)],children:[(0,r.tZ)(o.G,{tag:"label",htmlFor:e}),(0,r.tZ)(Pe,{})]})}var Ne=t(12470);function Me(e){var n=e.hideLayoutControl,t=e.resetLayout,i=(0,l.T3)();return(0,r.BX)(r.HY,{children:[(0,r.tZ)(o.G,{css:[a.l0.flex.row,a.l0.justify.spaceBetween,a.l0.align.center,a.l0.px(16),a.l0.py(8)],children:(0,r.tZ)(u.h4,{variant:"subheadBig",level:3,children:"Settings"})}),i?(0,r.tZ)(se,{hideLayoutControl:n,resetLayout:t}):(0,r.tZ)(o.G,{children:(0,r.BX)(Ne.mQ,{css:[{width:"100%"}],children:[(0,r.BX)(Ne.td,{withDividers:!1,css:[{"[aria-selected=true]":[a.l0.fontWeight.medium]}],children:[(0,r.tZ)(Ne.OK,{css:[a.l0.py(8),a.l0.px(16)],children:"Editor preferences"}),(0,r.tZ)(Ne.OK,{css:[a.l0.py(8),a.l0.px(16)],children:"Keyboard shortcuts"})]}),(0,r.BX)(Ne.nP,{children:[(0,r.tZ)(Ne.x4,{children:(0,r.tZ)(se,{resetLayout:t})}),(0,r.tZ)(Ne.x4,{children:(0,r.tZ)(Xe,{})})]})]})})]})}},65443:function(e,n,t){t.d(n,{BZ:function(){return D},HX:function(){return I},WM:function(){return B},ap:function(){return F},gF:function(){return L},l9:function(){return A},pr:function(){return W},vN:function(){return V},vi:function(){return N},zu:function(){return P}});var r=t(72006),i=t(43119),o=t(71440),a=t(3839),l=t(75982),c=t(91350),u=t(70196),s=t(35536),d=t(27923),f=t(78828),p=t(45941),h=t(90024),v=t(24635),m=t(50216);function g(){var e=(0,i.Z)(["\n  fragment ReplPowerUpCosts on Repl {\n    id\n    powerUpCosts {\n      ... on PowerUpCostsType {\n        alwaysOn {\n          cycles\n          explanation\n        }\n        gpu {\n          cycles\n          explanation\n        }\n      }\n    }\n  }\n"]);return g=function(){return e},e}function y(){var e=(0,i.Z)(["\n  fragment WorkspaceHeaderReplInfoRepl on Repl {\n    id\n    title\n    rawTemplateLabel: templateLabel(disableFallbackToTitle: true)\n    description\n    isPrivate\n    isRenamed\n    url\n    slug\n    workspaceCta\n    isAlwaysOn\n    isBoosted\n    hasGpu\n    lastPublishedAt\n    publishedAs\n    currentUserPermissions {\n      containerAttach\n      changeIconUrl\n      changeTemplateLabel\n      changeTitle\n      changeDescription\n      changePrivacy\n      delete\n      changeAlwaysOn\n      publish\n      fork\n    }\n    hostingDeployment {\n      ... on HostingDeployment {\n        id\n        currentBuild {\n          id\n        }\n      }\n    }\n    hostingDeploymentPermissions {\n      canDeploy\n    }\n    user {\n      id\n      image\n      ...UserLinkUser\n    }\n    ...WorkspaceHeaderReplMetadataRepl\n    ...ReplEnvironmentWebviewRepl\n    ...PublishReleaseFormRepl\n    ...PowerUpActionsMultiBoostToggle\n    ...ReplInfoEditReplTitleRepl\n    ...ReplInfoEditReplDescriptionRepl\n    ...ReplInfoEditReplTemplateLabelRepl\n    ...ReplPowerUpCosts\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return y=function(){return e},e}function Z(){var e=(0,i.Z)(["\n  query WorkspaceHeaderReplInfo($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...WorkspaceHeaderReplInfoRepl\n      }\n    }\n  }\n  ","\n"]);return Z=function(){return e},e}function b(){var e=(0,i.Z)(["\n  query CurrentUserStates {\n    currentUser {\n      __typename\n      ... on CurrentUser {\n        id\n        userSubscriptionType\n      }\n    }\n  }\n"]);return b=function(){return e},e}function w(){var e=(0,i.Z)(["\n  query ReplPowerUpStatus {\n    currentUser {\n      __typename\n      ... on CurrentUser {\n        id\n        userPowerUpsByType {\n          ... on UserPowerUpsTypes {\n            privateRepls {\n              active\n              cost {\n                cycles\n                explanation\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return w=function(){return e},e}function x(){var e=(0,i.Z)(["\n  mutation WorkspaceHeaderReplInfoUnpublishTemplate(\n    $input: DeleteReplDeploymentInput!\n  ) {\n    deleteReplDeployment(input: $input) {\n      ... on Repl {\n        id\n        ...PublishReplData\n      }\n    }\n  }\n  ","\n"]);return x=function(){return e},e}function k(){var e=(0,i.Z)(["\n  mutation WorkspaceHeaderReplInfoUpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...WorkspaceHeaderReplInfoRepl\n      }\n    }\n  }\n  ","\n"]);return k=function(){return e},e}function C(){var e=(0,i.Z)(["\n  mutation WorkspaceHeaderReplInfoDeleteRepl($id: String!) {\n    deleteRepl(id: $id) {\n      id\n    }\n  }\n"]);return C=function(){return e},e}function S(){var e=(0,i.Z)(["\n  mutation WorkspaceHeaderReplInfoSetAlwaysOn(\n    $replId: ID!\n    $enabled: Boolean!\n  ) {\n    setAlwaysOn(replId: $replId, enabled: $enabled) {\n      ... on Repl {\n        id\n        ...WorkspaceHeaderReplInfoRepl\n        ...ReplPowerUpCosts\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n  ","\n"]);return S=function(){return e},e}function T(){var e=(0,i.Z)(["\n  mutation WorkspaceHeaderReplInfoSetGpu($replId: ID!, $enabled: Boolean!) {\n    setGpu(replId: $replId, enabled: $enabled) {\n      ... on Repl {\n        id\n        ...WorkspaceHeaderReplInfoRepl\n        ...ReplPowerUpCosts\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n  ","\n"]);return T=function(){return e},e}var E={},R=(0,o.Ps)(g()),I=(0,o.Ps)(y(),a._,l.s,c.sY,u.wd,s.qo,d.Zx,f.LU,p.Jr,R),G=(0,o.Ps)(Z(),I);function D(e){var n=(0,r.Z)({},E,e);return v.a(G,n)}var _=(0,o.Ps)(b());function P(e){var n=(0,r.Z)({},E,e);return v.a(_,n)}var B=(0,o.Ps)(w());function A(e){var n=(0,r.Z)({},E,e);return v.a(B,n)}var U=(0,o.Ps)(x(),h.FW);function L(e){var n=(0,r.Z)({},E,e);return m.D(U,n)}var X=(0,o.Ps)(k(),I);function N(e){var n=(0,r.Z)({},E,e);return m.D(X,n)}var M=(0,o.Ps)(C());function F(e){var n=(0,r.Z)({},E,e);return m.D(M,n)}var O=(0,o.Ps)(S(),I,R);function W(e){var n=(0,r.Z)({},E,e);return m.D(O,n)}var H=(0,o.Ps)(T(),I,R);function V(e){var n=(0,r.Z)({},E,e);return m.D(H,n)}},67626:function(e,n,t){t.d(n,{Z:function(){return gt}});var r=t(57135),i=t(72006),o=t(4405),a=t(2272),l=t(96583),c=t(74985),u=t(48306),s=t.n(u),d=t(88254),f=t(50959),p=t(43117),h=t(76357),v=t(39603),m=t(82568),g=t(87076),y=t(39541),Z=t(61284),b=t(85368),w=t(1050),x=t(86763),k=t.n(x),C=t(39137),S=t(45510),T=t(27923),E=t(76735),R=t(63837),I=t(18171),G=t(32104),D=t(80336),_=t(56169),P={positive:y.TV.accentPositiveDefault,warning:y.TV.orangeDefault,dimmer:y.TV.foregroundDimmer,error:y.TV.redDefault},B=(0,m.X)({root:[y.l0.rowWithGap(4),{"& > *":{color:"inherit"}}]});function A(e){return(0,c.BX)(b.G,{style:{color:P[e.color]},css:B.root,children:[(0,f.cloneElement)(e.icon,{size:12}),(0,c.tZ)(Z.xv,{variant:"small",multiline:!1,children:e.text})]})}var U=(0,m.X)({root:[y.l0.colWithGap(8)],controls:[y.l0.rowWithGap(8),y.l0.justify.end],inputRow:[y.l0.rowWithGap(8)],messages:[y.l0.colWithGap(4)],positiveText:[y.l0.color.accentPositiveDefault,y.l0.rowWithGap(4)],warningText:[y.l0.color.orangeDefault,y.l0.rowWithGap(4)],loadingText:[y.l0.color.foregroundDimmer,y.l0.rowWithGap(4)],input:[y.l0.flex.growAndShrink(1)],hidden:[y.l0.visibility.hidden]});function L(e){var n,t=e.repl,r=e.done,i=(0,f.useState)(t.title),o=i[0],l=i[1],u=(0,f.useState)(null),s=u[0],d=u[1],p=(0,_.H)()("title"),h=(0,a.Z)((0,T.uB)({onCompleted:function(){r()},onError:function(){d("Something went wrong")}}),2),v=h[0],m=h[1],g="Team"===(null===(n=t.owner)||void 0===n?void 0:n.__typename)?t.owner.id:null,y=t.title!==o,w=function(e){var n=(0,f.useState)(null),t=n[0],r=n[1],i=(0,a.Z)((0,T.C4)({onCompleted:function(e){var n="AvailableReplTitleResult"===e.availableReplTitle.__typename?e.availableReplTitle:null;r(n?{type:"result",isAvailable:n.isAvailable}:{type:"error",message:"Something went wrong"})},onError:function(){r({type:"error",message:"Something went wrong"})}}),1)[0],o=(0,I.Z)((function(){return k()(i)}),[i]),l=null===e||void 0===e?void 0:e.title,c=null===e||void 0===e?void 0:e.teamId;return(0,f.useEffect)((function(){l&&(r({type:"loading"}),o({variables:{input:{title:l,teamId:c}}}))}),[o,l,c]),t}(y?{title:o,teamId:g}:null),x="result"===(null===w||void 0===w?void 0:w.type)&&w.isAvailable,P="result"===(null===w||void 0===w?void 0:w.type)&&!w.isAvailable,B=y&&x&&o;return(0,c.BX)(b.G,{tag:"form",onSubmit:function(e){e.preventDefault(),v({variables:{input:{title:o,id:t.id}}})},css:U.root,children:[(0,c.tZ)(b.G,{tag:"label",htmlFor:p,children:(0,c.tZ)(Z.xv,{variant:"small",color:"dimmer",multiline:!1,children:"Name"})}),(0,c.BX)(b.G,{css:U.inputRow,children:[(0,c.tZ)(C.II,{placeholder:t.title,id:p,value:o,onChange:function(e){s&&d(null);var n=e.currentTarget.value;l(n.length>60?n.slice(0,60):n)},autoFocus:!0}),(0,c.BX)(b.G,{css:U.controls,children:[(0,c.tZ)(S.zx,{text:"Cancel",onClick:function(){return r()}}),m.loading?(0,c.tZ)(S.zx,{disabled:!0,text:"Renaming",colorway:"primary"}):(0,c.tZ)(S.zx,{type:"submit",disabled:!B,text:"Rename",colorway:"primary"})]})]}),(0,c.BX)(b.G,{css:U.messages,children:["loading"===(null===w||void 0===w?void 0:w.type)?(0,c.BX)(c.HY,{children:[(0,c.tZ)(A,{icon:(0,c.tZ)(G.Z,{}),text:"Loading...",color:"dimmer"}),(0,c.tZ)(Z.xv,{css:U.hidden,variant:"small",multiline:!1,children:"..."})]}):null,B?(0,c.BX)(c.HY,{children:[(0,c.tZ)(A,{icon:(0,c.tZ)(R.Z,{}),text:"\u201c".concat(o,"\u201d is available"),color:"positive"}),(0,c.tZ)(A,{icon:(0,c.tZ)(E.Z,{}),text:"Your Repl will momentarily turn off while the Workspace reloads.",color:"warning"})]}):null,P?(0,c.tZ)(A,{icon:(0,c.tZ)(D.Z,{}),text:"The Repl \u201c".concat(o,"\u201d already exists on this account."),color:"error"}):null,s?(0,c.tZ)(A,{icon:(0,c.tZ)(E.Z,{}),text:s,color:"warning"}):null]})]})}var X=t(78828),N=t(90355),M=(0,m.X)({root:[y.l0.colWithGap(8)],controls:[y.l0.rowWithGap(8),y.l0.justify.end]});function F(e){var n,t=e.repl,r=e.done,i=(0,_.H)()("description"),o=(0,f.useState)(null!==(n=t.description)&&void 0!==n?n:""),l=o[0],u=o[1],s=(0,f.useState)(null),d=s[0],p=s[1],h=t.description!==l,v=(0,a.Z)((0,X.Ot)({onCompleted:function(){r()},onError:function(){p("Something went wrong")}}),2),m=v[0],g=v[1];return(0,c.BX)(b.G,{tag:"form",css:M.root,onSubmit:function(e){e.preventDefault(),m({variables:{input:{description:l,id:t.id}}})},children:[(0,c.tZ)(b.G,{tag:"label",htmlFor:i,children:(0,c.tZ)(Z.xv,{variant:"small",color:"dimmer",multiline:!1,children:"Description"})}),(0,c.tZ)(C.B,{autoFocus:!0,placeholder:"What does this Repl do?",id:i,autoSize:!0,value:l,onChange:function(e){d&&p(null);var n=e.currentTarget.value;u(n.length>N.p?n.slice(0,N.p):n)}}),d?(0,c.tZ)(A,{icon:(0,c.tZ)(E.Z,{}),text:d,color:"warning"}):null,(0,c.BX)(b.G,{css:M.controls,children:[(0,c.tZ)(S.zx,{text:"Cancel",onClick:function(){return r()}}),g.loading?(0,c.tZ)(S.zx,{disabled:!0,text:"Saving\u2026",colorway:"primary"}):(0,c.tZ)(S.zx,{disabled:!h,text:"Save description",colorway:"primary",type:"submit"})]})]})}var O=t(45941),W=(0,m.X)({root:[y.l0.colWithGap(8)],inputRow:[y.l0.rowWithGap(8)],controls:[y.l0.rowWithGap(8),y.l0.justify.end]});function H(e){var n,t=e.repl,r=e.done,i=(0,_.H)()("templateLabel"),o=(0,f.useState)(null!==(n=t.templateLabel)&&void 0!==n?n:""),l=o[0],u=o[1],s=(0,f.useState)(null),d=s[0],p=s[1],h=t.templateLabel!==l&&l,v=(0,a.Z)((0,O.ie)({onCompleted:function(){r()},onError:function(){p("Something went wrong")}}),2),m=v[0],g=v[1];return(0,c.BX)(b.G,{tag:"form",css:W.root,onSubmit:function(e){e.preventDefault(),m({variables:{input:{templateLabel:l,id:t.id}}})},children:[(0,c.tZ)(b.G,{tag:"label",htmlFor:i,children:(0,c.tZ)(Z.xv,{variant:"small",color:"dimmer",multiline:!1,children:"Template label"})}),(0,c.BX)(b.G,{css:W.inputRow,children:[(0,c.tZ)(C.II,{autoFocus:!0,placeholder:"An optional custom title",id:i,value:l,onChange:function(e){d&&p(null),u(e.currentTarget.value)}}),(0,c.BX)(b.G,{css:W.controls,children:[(0,c.tZ)(S.zx,{text:"Cancel",onClick:function(){return r()}}),g.loading?(0,c.tZ)(S.zx,{disabled:!0,text:"Saving\u2026",colorway:"primary"}):(0,c.tZ)(S.zx,{disabled:!h,text:"Save",colorway:"primary",type:"submit"})]})]}),d?(0,c.tZ)(A,{icon:(0,c.tZ)(E.Z,{}),text:d,color:"warning"}):null]})}var V=(0,m.X)({root:[y.l0.colWithGap(0)],row:[y.l0.rowWithGap(8),y.l0.align.center],text:[y.l0.flex.growAndShrink(1)]});function z(e){var n=e.repl,t=(0,f.useState)(!1),r=t[0],i=t[1];return r?(0,c.tZ)(L,{repl:n,done:function(){return i(!1)}}):(0,c.BX)(b.G,{css:V.root,children:[(0,c.tZ)(Z.xv,{variant:"small",color:"dimmer",multiline:!1,children:"Name"}),(0,c.BX)(b.G,{css:V.row,children:[(0,c.BX)(Z.xv,{multiline:!1,color:n.isRenamed?void 0:"dimmest",css:V.text,children:[n.isRenamed?null:"Default name: ",n.title]}),(0,c.tZ)(g.h,{alt:"Edit",onClick:function(){return i(!0)},children:(0,c.tZ)(w.Z,{})})]})]})}var j=(0,m.X)({root:[y.l0.colWithGap(0)],row:[y.l0.rowWithGap(8),y.l0.justify.spaceBetween,y.l0.align.start],text:[y.l0.flex.growAndShrink(1)]});function q(e){var n=e.repl,t=(0,f.useState)(!1),r=t[0],i=t[1];return r?(0,c.tZ)(F,{repl:n,done:function(){return i(!1)}}):(0,c.BX)(b.G,{css:j.root,children:[(0,c.tZ)(Z.xv,{variant:"small",color:"dimmer",multiline:!1,children:"Description"}),(0,c.BX)(b.G,{css:j.row,children:[n.description?(0,c.tZ)(Z.xv,{color:"dimmer",css:j.text,maxLines:2,multiline:!1,children:n.description}):(0,c.tZ)(Z.xv,{color:"dimmest",css:j.text,multiline:!1,children:"No description"}),(0,c.tZ)(g.h,{alt:"Edit",onClick:function(){return i(!0)},children:(0,c.tZ)(w.Z,{})})]})]})}function $(e){var n=e.repl,t=(0,f.useState)(!1),r=t[0],i=t[1];return r?(0,c.tZ)(H,{repl:n,done:function(){return i(!1)}}):(0,c.BX)(b.G,{css:j.root,children:[(0,c.tZ)(Z.xv,{variant:"small",color:"dimmer",multiline:!1,children:"Template label"}),(0,c.BX)(b.G,{css:j.row,children:[n.templateLabel?(0,c.tZ)(Z.xv,{css:j.text,multiline:!1,children:n.templateLabel}):(0,c.tZ)(Z.xv,{color:"dimmest",css:j.text,multiline:!1,children:"No template label"}),(0,c.tZ)(g.h,{alt:"Edit",onClick:function(){return i(!0)},children:(0,c.tZ)(w.Z,{})})]})]})}var Y=t(49142),K=t(28518),Q=t(69583),J=t(23220),ee=t(34937),ne=t(58745),te=t(82108),re=t(81462),ie=t(88541),oe=t(43743),ae=t(63064),le=t(94716),ce=t(13233),ue=t(48330),se=t(65673),de=t(98707),fe=t(13979),pe=t(625),he=t(11116),ve=t(73204),me=t(66195),ge=t(56260),ye=t(57389),Ze=t(25198),be=t(66539),we=t(34938),xe=t(51631),ke=t(70196),Ce=t(12318),Se=t(72463),Te=t(43119),Ee=t(71440),Re=t(24635);function Ie(){var e=(0,Te.Z)(["\n  query PendingChanges($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        deployment {\n          id\n          activeRelease {\n            id\n            pendingChanges {\n              fileName\n              changeType\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return Ie=function(){return e},e}var Ge={},De=(0,Ee.Ps)(Ie());function _e(e){var n,t,r=function(e){var n=(0,i.Z)({},Ge,e);return Re.a(De,n)}({variables:{replId:e.replId},fetchPolicy:"cache-and-network",ssr:!1}),o=r.data,a=r.loading,l=r.error;if(a)return{loading:a,pendingChanges:null,error:null};if(l)return{loading:!1,pendingChanges:null,error:l};var c="Repl"===(null===o||void 0===o?void 0:o.repl.__typename)?o.repl:null;return c?{loading:!1,pendingChanges:(null===(n=c.deployment)||void 0===n||null===(t=n.activeRelease)||void 0===t?void 0:t.pendingChanges)||[],error:l}:{loading:!1,pendingChanges:null,error:new Error("Repl not found")}}var Pe=t(7822),Be=t(50216);function Ae(){var e=(0,Te.Z)(["\n  mutation RevertTemplateRelease($input: RevertReplReleaseInput!) {\n    revertReplRelease(input: $input) {\n      ... on Repl {\n        id\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return Ae=function(){return e},e}var Ue={},Le=(0,Ee.Ps)(Ae());function Xe(e){if(!e.data)return null;var n=e.data;if("revertReplRelease"in n){if("NotFoundError"===n.revertReplRelease.__typename||"UnauthorizedError"===n.revertReplRelease.__typename||"UserError"===n.revertReplRelease.__typename)return n.revertReplRelease.message;if("Repl"!==n.revertReplRelease.__typename)return"Something went wrong reverting your Template"}}function Ne(){var e=(0,a.Z)(function(e){var n=(0,i.Z)({},Ue,e);return Be.D(Le,n)}({refetchQueries:["ReplEnvironmentHeader"]}),2),n=e[0];function t(){return(t=(0,r.Z)((function(e){var t,r;return(0,l.__generator)(this,(function(i){switch(i.label){case 0:return t=e.input,[4,n({variables:{input:t}})];case 1:return[2,{data:(r=i.sent()).data,error:Xe(r)}]}}))}))).apply(this,arguments)}return{revertTemplateRelease:function(e){return t.apply(this,arguments)},state:e[1]}}var Me=t(83005),Fe=t(52735),Oe=t(87978),We=t(56412),He=t(30504),Ve=b.K.form;function ze(e){if(0===e.length)return{message:"You cannot leave this empty."}}function je(e){var n,t,r=e.changeType;return r===xe.J5.NewFile?(n=y.TV.accentPositiveStronger,t="Added"):r===xe.J5.DeletedFile?(n=y.TV.accentNegativeStronger,t="Deleted"):(n=y.TV.foregroundDefault,t="Changed"),(0,c.tZ)(Z.xv,{variant:"small",css:[{color:n}],multiline:!1,children:t})}function qe(e){var n=e.pendingChangesState,t=e.isReplitTemplate;if(n.loading)return(0,c.tZ)(b.G,{css:[y.l0.center],children:(0,c.tZ)(G.Z,{})});if(n.error)return(0,c.tZ)(Ze.E,{icon:(0,c.tZ)(E.Z,{}),text:n.error.message||"Could not load modified files - please try again.",colorway:"negative"});if(!n.pendingChanges||0===n.pendingChanges.length)return t?null:(0,c.tZ)(Z.xv,{children:"No changes to publish. Come back when you have made changes to your Repl."});var r=n.pendingChanges,i=r.slice(0,15);return(0,c.BX)(b.G,{css:[{display:"grid",gridTemplateColumns:"1fr 1fr",gap:y.TV.space8}],children:[i.map((function(e){return(0,c.BX)(f.Fragment,{children:[(0,c.BX)(b.G,{css:[y.l0.rowWithGap(4),y.l0.align.center],children:[(0,c.tZ)(Me.Z,{size:12,path:e.fileName}),(0,c.tZ)(Z.xv,{multiline:!1,children:e.fileName})]},e.fileName),(0,c.tZ)(je,{changeType:e.changeType})]},e.fileName)})),r.length>i.length&&(0,c.BX)(Z.xv,{multiline:!1,children:["And ",r.length-i.length," other files..."]})]})}function $e(e){var n=e.repl,t=Ne(),i=function(){var e=(0,r.Z)((function(e){return(0,l.__generator)(this,(function(r){switch(r.label){case 0:return[4,t.revertTemplateRelease({input:{replId:n.id,releaseId:e}})];case 1:return r.sent(),[2]}}))}));return function(n){return e.apply(this,arguments)}}();return(0,c.BX)(b.G,{children:[(0,c.tZ)(Z.h4,{level:1,variant:"subheadBig",css:[y.l0.mb(16)],children:"Existing Releases"}),(0,c.tZ)(b.G,{css:[{display:"grid",gridTemplateColumns:"2fr 3fr 1fr",gap:y.TV.space8}],children:n.releases.items.map((function(e){var t,r;return(0,c.BX)(f.Fragment,{children:[(0,c.tZ)("span",{children:(0,We.Z)(new Date(e.timeCreated),"do MMM, hh:mm a")}),(0,c.tZ)("span",{children:e.description}),(0,c.tZ)("span",{style:{justifySelf:"end"},children:e.id===(null===(t=n.deployment)||void 0===t||null===(r=t.activeRelease)||void 0===r?void 0:r.id)?(0,c.tZ)("span",{css:[y.l0.p(4),{display:"flex"}],children:"(active)"}):(0,c.tZ)(S.zx,{text:"revert",colorway:"primary",small:!0,onClick:function(n){n.preventDefault(),i(e.id)}})})]},e.id)}))})]})}function Ye(e){var n=e.children;return(0,c.tZ)(b.G,{css:[y.l0.rowWithGap(8),y.l0.py(2)],children:n})}function Ke(e){var n,t,u,s,d,p,h=e.repl,v=(0,_.H)(),m=(0,a.Z)(f.useState(!1),2),g=m[0],w=m[1],x=(0,a.Z)(f.useState(!1),2),k=x[0],T=x[1],R=function(e){var n=_e({replId:e.replId}),t=f.useMemo((function(){if(!n.pendingChanges)return[];var e=n.pendingChanges.slice().sort((function(e,n){return e.fileName.localeCompare(n.fileName)})).map((function(e){return{file:e,pathDepth:(0,Oe.U$)(e.fileName)}})).sort((function(e,n){return e.pathDepth-n.pathDepth})).map((function(e){return e.file}));return e}),[n.pendingChanges]);return(0,o.Z)((0,i.Z)({},n),{pendingChanges:t})}({replId:h.id}),I=(0,Pe.r)(),G=(0,Ce.Y)("",ze),D=0!==(null===(n=R.pendingChanges)||void 0===n?void 0:n.length),P=(null===(t=h.user)||void 0===t?void 0:t.username)===He.IU||"templates"===(null===(u=h.user)||void 0===u?void 0:u.username),B=(0,f.useState)({ran:!1,tested:!1}),A=B[0],U=B[1];f.useEffect((function(){U({ran:!1,tested:!1})}),[U]);var L=Boolean(G.error||!P&&!D||I.loading||P&&(!A.ran||!A.tested)),X=P&&(null===(s=h.releases)||void 0===s||null===(d=s.items)||void 0===d?void 0:d.length)>1,N="";return G.error?N="Please fill out the form":P||D||(N="No changes to publish in this release"),g?(0,c.tZ)(Fe.q,{repl:h,isUpdate:!0}):k?(0,c.tZ)(b.G,{css:[y.l0.p(16),y.l0.colWithGap(16)],children:(0,c.tZ)($e,{repl:h})}):(0,c.BX)(Ve,{onSubmit:function(){var e=(0,r.Z)((function(e){return(0,l.__generator)(this,(function(n){switch(n.label){case 0:return e.preventDefault(),L||G.validate()?[2]:[4,I.createRelease({input:{replId:h.id,description:G.value}})];case 1:return n.sent().error||w(!0),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),css:[y.l0.colWithGap(24),y.l0.p(16)],children:[(0,c.tZ)(Z.h4,{level:1,variant:"headerDefault",children:"Publish a new release"}),(0,c.BX)(b.G,{css:[y.l0.colWithGap(8)],children:[(0,c.tZ)(Z.h4,{level:2,variant:"subheadDefault",children:"Modified files"}),(0,c.tZ)(qe,{pendingChangesState:R,isReplitTemplate:P})]}),P||D?(0,c.BX)(b.G,{css:[y.l0.colWithGap(4)],children:[(0,c.tZ)("label",{htmlFor:v("description"),css:[y.l0.color.foregroundDimmer,{fontSize:y.TV.fontSizeSmall,lineHeight:y.TV.lineHeightSmall}],children:"Description"}),(0,c.tZ)(C.B,{id:v("description"),"aria-label":"Description",onChange:function(e){return G.setValue(e.target.value)},css:[y.l0.width("100%"),y.l0.minHeight(64),y.l0.maxHeight(128),{resize:"vertical"}],placeholder:"Explain what has changed about your template"}),G.error?(0,c.tZ)(Ze.E,{icon:(0,c.tZ)(E.Z,{}),text:null===(p=G.error)||void 0===p?void 0:p.message,colorway:"negative"}):null]}):null,P?(0,c.tZ)(Qe,{repl:h,state:A,onChange:function(e,n){return U((function(t){return(0,o.Z)((0,i.Z)({},t),(0,ye.Z)({},e,n))}))}}):null,(0,c.tZ)(b.G,{children:I.error?(0,c.tZ)(Ze.E,{icon:(0,c.tZ)(E.Z,{}),text:I.error,colorway:"negative"}):null}),(0,c.BX)(b.G,{css:[y.l0.rowWithGap(12),y.l0.justify.end],children:[X?(0,c.tZ)(S.zx,{text:"Revert to older",colorway:"negative",onClick:function(){return T(!0)}}):null,(0,c.tZ)(be.u,{tooltip:N,placement:"bottom",isDisabled:!N,children:(0,c.tZ)(S.zx,{text:"Publish release",type:"submit",colorway:"primary",iconLeft:(0,c.tZ)(Se.Z,{}),disabled:L})})]})]})}function Qe(e){var n,t,r,i=e.repl,o=e.state,a=e.onChange,l=(0,_.H)(),u=(0,ke.e9)(),s=u.data,d=u.loading,f=null===s||void 0===s||null===(n=s.currentUser)||void 0===n?void 0:n.username;return(0,c.BX)(b.G,{css:[y.l0.colWithGap(12)],children:[(0,c.tZ)(Z.h4,{level:2,children:"Official Replit Template publishing checklist"}),(0,c.BX)(b.G,{children:[(0,c.BX)(Ye,{children:[(0,c.tZ)(we.X,{id:l("ran"),checked:o.ran,onChange:function(e){return a("ran",e.target.checked)}}),(0,c.tZ)("label",{htmlFor:l("ran"),children:"Run Repl:"}),(0,c.BX)("span",{children:["to generate and cache package guesser result into ",(0,c.tZ)("code",{children:".upm"}),"."]})]}),(0,c.BX)(Ye,{children:[(0,c.tZ)(we.X,{id:l("tested"),checked:o.tested,onChange:function(e){return a("tested",e.target.checked)}}),(0,c.tZ)("label",{htmlFor:l("tested"),children:"Run tests:"}),(0,c.BX)("span",{children:['Run "Test working copy" for @',null===(t=i.user)||void 0===t?void 0:t.username,"/",i.slug," in"," ",(0,c.tZ)("a",{href:"https://tmpltester.util.repl.co/",target:"_blank",children:"template tester"}),". ",(0,c.tZ)("br",{}),"If there are no tests, consider adding one."]})]})]}),d||(null===(r=i.user)||void 0===r?void 0:r.username)!==f?null:(0,c.tZ)(Ze.E,{text:"You can't publish an update while impersonating. Add yourself as a member of the 'replit' team using CLUI tool 'add-remove-team-member', then open this Repl from your account.",colorway:"negative"})]})}var Je=t(80866),en=t(65897),nn=t(75920),tn=t(2041),rn=t(63128),on=t(51529),an=t(57475),ln=t(14654),cn=t(13548),un=t(86302),sn=t(23127),dn=t(12259),fn=t(5884),pn=t(26721),hn=t(27691),vn=t(77712),mn=t(3652),gn=t(65629),yn=t(20952),Zn=(0,m.X)({self:[y.l0.flex.column],content:[y.l0.pt(16),y.l0.px(12),y.l0.pb(12),y.l0.colWithGap(16)],header:[y.l0.p(12),y.l0.rowWithGap(8),y.l0.justify.start,y.l0.align.center,y.l0.border({color:y.TV.outlineDefault,width:1,style:"solid",direction:"bottom"})],actions:[y.l0.colWithGap(8)],footer:[y.l0.rowWithGap(16),y.l0.justify.spaceBetween,y.l0.align.center,y.l0.pt(4)],loadingWrapper:[y.l0.center],storageBarWrapper:[y.l0.colWithGap(8)],summaryWrapper:[y.l0.colWithGap(8),y.l0.align.start],totalSummaryDot:[y.l0.backgroundColor.backgroundHigher,y.l0.width(8),y.l0.height(8),{borderRadius:"50%"}],replSummaryDot:[y.l0.backgroundColor.accentPrimaryDefault,y.l0.width(8),y.l0.height(8),{borderRadius:"50%"}],summaryRow:[y.l0.rowWithGap(8),y.l0.justify.start,y.l0.align.center,y.l0.fontSize(14),y.l0.height(14)],replSummaryText:[y.l0.color.accentPrimaryStronger],replSummaryUsage:[y.l0.color.accentPrimaryStrongest],replUsagePlaceholder:[hn.p.backgroundPulse(y.TV.backgroundHigher,y.TV.backgroundRoot),{opacity:.5},y.l0.borderRadius(4),y.l0.height("100%"),y.l0.width(64)],totalUsagePlaceholder:[hn.p.backgroundPulse(y.TV.backgroundHigher,y.TV.backgroundRoot),{opacity:.5},y.l0.borderRadius(4),y.l0.height("100%"),y.l0.width(140)],availablePlaceholder:[hn.p.backgroundPulse(y.TV.backgroundHigher,y.TV.backgroundRoot),{opacity:.5},y.l0.borderRadius(4),y.l0.height("100%"),y.l0.width(64)],availableText:[y.l0.color.foregroundDimmest]}),bn="workspace_info_modal",wn=function(e){var n=e.isOpen,t=e.onRequestClose,r=(0,ee.Z)(),i=(0,f.useState)(!1),o=i[0],a=i[1],l=(0,fn.Pf)({fetchPolicy:"network-only",ssr:!1,notifyOnNetworkStatusChange:!0}),u=l.data,s=l.loading,d=l.refetch,p=(0,ie.P5)({controlName:"flag-buzzing-astrophage",type:"boolean",logFlagToAnalytics:!1});return(0,c.BX)(tn.u,{noPadding:!0,isOpen:n,onRequestClose:t,preventClose:o,hideCloseButton:!0,children:[(0,c.BX)(b.G,{css:Zn.self,children:[(0,c.BX)(b.G,{css:Zn.header,children:[(0,c.tZ)(g.h,{onClick:t,alt:"Back",size:28,children:(0,c.tZ)(mn.Z,{size:16})}),(0,c.tZ)(sn.Z,{size:16}),(0,c.tZ)(Z.xv,{variant:"subheadDefault",multiline:!1,children:"Repl Storage"})]}),(0,c.tZ)(xn,{loading:s,isInDesktopApp:r,data:u,setShowUpgradeModal:a})]}),p?(0,c.tZ)(Q.Z,{isOpen:o,context:bn,powerUp:"storage",uponPurchaseGoTo:"workspace",onRequestClose:function(){d(),a(!1)}}):(0,c.tZ)(pn.Z,{isOpen:o,initialTab:"plans",context:bn,uponPurchaseGoTo:"workspace",onPlanCheckoutComplete:function(){d(),a(!1)},onRequestClose:function(){a(!1)}})]})},xn=function(e){var n,t=e.isInDesktopApp,r=e.loading,a=e.data,l=e.setShowUpgradeModal,u=(0,ie.P5)({controlName:"flag-storage-utilization",logFlagToAnalytics:!1});if(r&&!a)return(0,c.BX)(b.G,{css:Zn.content,children:[(0,c.tZ)(gn.M,{}),(0,c.tZ)(b.G,{css:Zn.footer,children:t?(0,c.tZ)(S.zx,{onClick:function(){J.X.openExternalUrl(dn.$I.as)},text:"Manage Repls"}):(0,c.tZ)(un.Z,{href:dn.$I.href,as:dn.$I.as,text:"Manage Repls"})})]});if(a&&"CurrentUser"===(null===(n=a.currentUser)||void 0===n?void 0:n.__typename)&&"StorageQuota"===a.currentUser.storageInfo.storageQuota.__typename&&"AccountStorageUtilization"===a.currentUser.storageInfo.accountStorageUtilization.__typename){var s=a.currentUser.username,d=a.currentUser.userSubscriptionType===xe.HP.HackerPro;return(0,c.BX)(b.G,{css:Zn.content,children:[a?(0,c.tZ)(gn.l,{data:a}):(0,c.tZ)(gn.M,{}),(0,c.BX)(b.G,{css:Zn.footer,children:[(0,c.tZ)(un.Z,(0,o.Z)((0,i.Z)({},(0,vn.Ru)(s)),{text:"Manage Repls"})),u?(0,c.tZ)(yn.U,{isPro:d,setShowUpgradeModal:l}):null]})]})}return(0,c.BX)(b.G,{css:Zn.content,children:[(0,c.tZ)(Z.xv,{color:"dimmest",multiline:!1,children:"We had trouble loading your storage information. Please try again later."}),(0,c.tZ)(b.G,{css:Zn.footer,children:(0,c.tZ)(un.Z,{href:dn.$I.href,as:dn.$I.as,text:"Manage Repls"})})]})},kn=t(4421),Cn=t(14227),Sn=t(90171),Tn=t(70232),En=t(65443),Rn=t(90349),In=t(8879),Gn=t(254),Dn=t(35301),_n=t(88467),Pn=t(8023),Bn=t(32905);function An(e){var n=f.useRef(null),t=(0,a.Z)(f.useState(e.value),2),r=t[0],i=t[1],o=(0,a.Z)(f.useState(null),2),l=o[0],u=o[1],d=(0,Gn.Z)({onUpload:function(n){var t=n.url;e.onChange(t)},onUploadPreview:function(e){var n=e.dataUrl;i(n)},onError:function(e){u(e.message)}});f.useEffect((function(){i(e.value)}),[e.value]);var p=null===r||void 0===r?void 0:r.startsWith("data:"),h=32;return(0,c.BX)(Dn.gC,{spacing:"var(--space-4)",children:[(0,c.BX)("div",{onClick:function(){var e;null===(e=n.current)||void 0===e||e.click()},"aria-label":r?"Change icon":"Upload an icon","data-microtip-position":"right",role:"tooltip",className:s().dynamic([["5de27f185cb9bc33",[h,h]]])+" "+((r?"update-icon":"add-icon")||""),children:[r?(0,c.BX)(c.HY,{children:[(0,c.tZ)(In.Z,{iconUrl:r,size:h,alt:"icon"}),p?(0,c.tZ)("div",{className:s().dynamic([["5de27f185cb9bc33",[h,h]]])+" loading-state",children:(0,c.tZ)("div",{className:s().dynamic([["5de27f185cb9bc33",[h,h]]])+" loading-icon",children:(0,c.tZ)(G.Z,{})})}):(0,c.tZ)("div",{className:s().dynamic([["5de27f185cb9bc33",[h,h]]])+" hover-state",children:(0,c.tZ)(w.Z,{})})]}):(0,c.tZ)(_n.Z,{}),(0,c.tZ)("input",{ref:n,accept:Pn.W9.join(","),type:"file",onChange:function(e){var n=e.target,t=n.validity,r=n.files;t.valid&&(null===r||void 0===r?void 0:r.length)&&(u(null),d.uploadImage(r[0],Bn.N.TemplateIcon))},className:s().dynamic([["5de27f185cb9bc33",[h,h]]])})]}),l?(0,c.tZ)("div",{className:s().dynamic([["5de27f185cb9bc33",[h,h]]])+" error",children:l}):null,(0,c.tZ)(s(),{id:"5de27f185cb9bc33",dynamic:[h,h],children:".add-icon.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;border:1px dashed var(--foreground-dimmest);background-color:var(--background-root);width:".concat(h,"px;height:").concat(h,"px}.add-icon.__jsx-style-dynamic-selector:hover{color:var(--accent-primary-default);border-color:var(--accent-primary-default)}.add-icon.__jsx-style-dynamic-selector,.update-icon.__jsx-style-dynamic-selector{position:relative;cursor:pointer;background-color:var(--background-higher);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:2px}.update-icon.__jsx-style-dynamic-selector:hover .hover-state.__jsx-style-dynamic-selector{opacity:.8}.hover-state.__jsx-style-dynamic-selector{opacity:0}.loading-state.__jsx-style-dynamic-selector{opacity:.8}.loading-icon.__jsx-style-dynamic-selector{-webkit-animation:rotate 1s linear infinite;-moz-animation:rotate 1s linear infinite;-o-animation:rotate 1s linear infinite;animation:rotate 1s linear infinite;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}@-webkit-keyframes rotate{from{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes rotate{from{-moz-transform:rotate(0deg);transform:rotate(0deg)}to{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes rotate{from{-o-transform:rotate(0deg);transform:rotate(0deg)}to{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes rotate{from{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}.hover-state.__jsx-style-dynamic-selector,.loading-state.__jsx-style-dynamic-selector{color:var(--accent-primary-default);position:absolute;top:0;left:0;width:100%;height:100%;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);background-color:var(--background-root);overflow:hidden;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}input.__jsx-style-dynamic-selector{opacity:0;position:absolute;top:0;left:0;width:100%;height:100%;z-index:-1}.error.__jsx-style-dynamic-selector{font-size:var(--font-size-default);color:var(--accent-negative-default)}")})]})}var Un,Ln,Xn=t(51523),Nn=t(62405),Mn=t(84607),Fn=t(54873),On=t(22642),Wn=t(84815);!function(e){e.DeleteRepl="DeleteRepl",e.PowerUp="PowerUp",e.BuyCycles="BuyCycles",e.ForkRepl="ForkRepl",e.Unpublish="Unpublish",e.UnpublishTemplate="UnpublishTemplate",e.EditPublishSettings="EditPublishSettings",e.Publish="Publish",e.UpdatePublishedTemplate="UpdatePublishedTemplate",e.UpdatePublishedRepl="UpdatePublishedRepl",e.ManageStorage="ManageStorage"}(Un||(Un={})),function(e){e.Fork="Fork",e.Delete="Delete",e.Unpublish="Unpublish",e.UnpublishTemplate="UnpublishTemplate",e.EditPublishSettings="EditPublishSettings"}(Ln||(Ln={}));var Hn=t(97807),Vn=t(80731),zn=t(70804),jn=(0,m.X)({destructiveMenuItem:[y.l0.color.accentNegativeStronger]});function qn(e){var n=e.repl,t=(0,ee.Z)(),r=(0,f.useMemo)((function(){return n.user?{text:n.user.username,css:[{"&, & span":y.l0.flex.shrink(1)}],iconLeft:(0,c.tZ)(Rn.q,{src:n.user.image,username:n.user.username})}:{text:""}}),[n]);if(!n.user)return null;var a=(0,vn.Ru)(n.user);return t?(0,c.tZ)(S.zx,(0,o.Z)((0,i.Z)({},r),{onClick:function(){J.X.openExternalUrl(a.as)}})):(0,c.tZ)(un.Z,(0,o.Z)((0,i.Z)({},r,a),{prefetch:!1}))}function $n(e){var n=e.setActiveDialog,t=e.repl,r=e.isTemplate,a=e.updateIconUrl,l=e.showCloseButton,u=e.setIsEditing,s=e.updateReplInfo,d=(0,Hn.Z)(),f=Boolean(t.publishedAs),p=t.currentUserPermissions.publish,h=(0,ee.Z)(),v=!(null===t||void 0===t?void 0:t.publishedAs)&&!h,m=(null===t||void 0===t?void 0:t.publishedAs)===xe.O2.RegularRepl,x=[];t.currentUserPermissions.fork&&x.push({value:Ln.Fork,label:"Fork",icon:(0,c.tZ)(Mn.Z,{})}),t.publishedAs===xe.O2.RegularRepl&&p&&!h&&x.push({value:Ln.Unpublish,label:"Unpublish",icon:(0,c.tZ)(Nn.Z,{})}),r&&p&&!h&&x.push({value:Ln.UnpublishTemplate,label:"Unpublish template",icon:(0,c.tZ)(Nn.Z,{})}),f&&p&&!h&&x.push({value:Ln.EditPublishSettings,label:"Edit Publish Settings",icon:(0,c.tZ)(w.Z,{})}),t.currentUserPermissions.delete&&x.push({isDestructive:!0,value:Ln.Delete,label:"Delete",icon:(0,c.tZ)(Fn.Z,{})});var k=(null===t||void 0===t?void 0:t.isPrivate)||!(null===t||void 0===t?void 0:t.isRenamed),C="";return(null===t||void 0===t?void 0:t.isPrivate)?C="This Repl is private. You need to make it public in order to publish it!":(null===t||void 0===t?void 0:t.isRenamed)||(C="You need to give this Repl a name before publishing it."),(0,c.BX)(b.G,{css:[y.l0.colWithGap(8),y.l0.p(8)],children:[(0,c.BX)(b.G,{css:[y.l0.rowWithGap(8),y.l0.align.center,y.l0.justify.spaceBetween,(0,ye.Z)({},y.BC.max("mobileMax"),[y.l0.flex.columnReverse,y.l0.align.start,{gap:y.TV.space8}])],children:[(0,c.BX)(b.G,{css:[y.l0.rowWithGap(8),y.l0.center,y.l0.flex.shrink(1)],children:[(0,c.tZ)(qn,{repl:t}),t.currentUserPermissions.changeIconUrl&&r?(0,c.tZ)(An,{value:t.iconUrl,onChange:a}):null]}),(0,c.BX)(b.G,{css:[y.l0.align.center,y.l0.rowWithGap(8),(0,ye.Z)({},y.BC.max("mobileMax"),{width:"100%",">*:not(div)":{flex:1}})],children:[h?null:(0,c.tZ)(un.Z,(0,o.Z)((0,i.Z)({prefetch:!1},(0,Xn.j3)(t)),{iconLeft:(0,c.tZ)(Wn.Z,{}),colorway:"primary",text:"Cover page",target:"_blank"})),p&&v&&!d?(0,c.tZ)(be.u,{tooltip:C,isDisabled:!k,children:(0,c.tZ)(S.zx,{type:"button",iconLeft:(0,c.tZ)(_n.Z,{}),onClick:function(){n(Un.Publish)},dataCy:"ws-publish-button",text:"Publish",disabled:k})}):null,r&&!h?(0,c.tZ)(S.zx,{type:"button",iconLeft:(0,c.tZ)(_n.Z,{}),onClick:function(){return n(Un.UpdatePublishedTemplate)},text:"Update"}):null,m&&!h?(0,c.tZ)(S.zx,{type:"button",iconLeft:(0,c.tZ)(On.Z,{}),onClick:function(){return n(Un.UpdatePublishedRepl)},text:"Update"}):null,x.length>0&&(0,c.tZ)(Vn.ZE,{icon:(0,c.tZ)(zn.Z,{size:16}),"aria-label":r?"Template Actions":"Repl Actions",cssProps:[y.l0.backgroundColor.backgroundDefault],placement:"bottom-end",onAction:function(e){switch(e){case Ln.Fork:return void n(Un.ForkRepl);case Ln.Unpublish:return void n(Un.Unpublish);case Ln.UnpublishTemplate:return void n(Un.UnpublishTemplate);case Ln.Delete:return void n(Un.DeleteRepl);case Ln.EditPublishSettings:n(Un.EditPublishSettings)}},children:x.map((function(e){return(0,c.tZ)(Vn.ck,{children:(0,c.BX)(b.G,{css:[y.l0.rowWithGap(8),e.isDestructive&&jn.destructiveMenuItem],children:[e.icon,(0,c.tZ)(b.G,{children:e.label})]})},e.value)}))}),l?(0,c.tZ)(g.h,{alt:"Close",tooltipHidden:!0,onClick:function(){s(),u(!1)},children:(0,c.tZ)(D.Z,{})}):null]})]}),t.lastPublishedAt&&p?(0,c.BX)(Z.xv,{variant:"small",color:"dimmest",multiline:!1,children:["Last published on"," ",new Date(t.lastPublishedAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})]}):null]})}var Yn=t(41102),Kn=t(18200),Qn=t(80572),Jn=t(44333),et=t(31992),nt=t(96351),tt=t(70523),rt=t(92683),it=(0,m.X)({self:[y.l0.display.flex,y.l0.flex.row,y.l0.align.center,y.l0.justify.spaceBetween],powerupInfo:[y.l0.colWithGap(8)],powerupLabel:[y.l0.rowWithGap(8),y.l0.align.center],editButtonWrapper:[y.l0.rowWithGap(8),y.l0.align.center],pill:[y.l0.border({style:"none"}),y.l0.fontWeight.medium,y.l0.backgroundColor.foregroundDimmer,y.l0.color.backgroundRoot,y.l0.maxWidth("fit-content")],loadingPill:[y.l0.border({style:"none"}),y.l0.fontWeight.medium,y.l0.backgroundColor.foregroundDimmer,y.l0.color.backgroundRoot,y.l0.maxWidth("fit-content"),hn.p.backgroundPulse(y.TV.foregroundDimmer,y.TV.foregroundDimmest),hn.p.foregroundPulse(y.TV.backgroundRoot,y.TV.backgroundHigher)],editButton:[y.l0.p(16),y.l0.backgroundColor.backgroundHigher]}),ot=function(e){var n,t=e.showPowerUpModal,r=(0,tt.Z)().dataAtom.disk,i=r.currentAtom,o=r.totalAtom,a=(0,ue.Z)(),l=(0,rt.Dv)(i),u=(0,rt.Dv)(o),s=(0,f.useState)(!1),d=s[0],p=s[1],h=(0,fn.Pf)({pollInterval:3e3,onError:function(e){y()}}),v=h.data,m=h.loading,y=h.stopPolling;(0,f.useEffect)((function(){var e,n,t;return v&&"AccountStorageUtilization"!==(null===(e=v.currentUser)||void 0===e?void 0:e.storageInfo.accountStorageUtilization.__typename)&&y(),v&&"AccountStorageUtilization"===(null===(n=v.currentUser)||void 0===n?void 0:n.storageInfo.accountStorageUtilization.__typename)&&"ReplStorageUtilization"===(null===(t=v.currentUser.storageInfo.accountStorageUtilization.perRepl.find((function(e){return e.repl.id===a})))||void 0===t?void 0:t.__typename)&&(p(!0),y()),function(){y()}}),[v,a,y]);var w=null;if(v&&"CurrentUser"===(null===(n=v.currentUser)||void 0===n?void 0:n.__typename)&&"StorageQuota"===v.currentUser.storageInfo.storageQuota.__typename&&"AccountStorageUtilization"===v.currentUser.storageInfo.accountStorageUtilization.__typename){var x=v.currentUser.storageInfo,k=x.storageQuota.quota,C=x.accountStorageUtilization.total;w="0"===k?C:k}var S=1024*l*1024,T=1024*u*1024,E="".concat((0,et.fZ)(S,{precision:1})),R=m||"string"!==typeof w?"".concat((0,et.fZ)(T,{precision:1})," Repl"):"".concat((0,et.fZ)(Number(w),{precision:1})," Account");return(0,c.BX)(b.G,{css:it.self,tag:"li",children:[(0,c.BX)(b.G,{css:it.powerupInfo,children:[(0,c.BX)(b.G,{css:it.powerupLabel,children:[(0,c.tZ)(sn.Z,{size:16})," ",(0,c.tZ)(Z.xv,{variant:"subheadDefault",multiline:!1,children:"Storage"}),(0,c.tZ)(Yn.Z,{content:"Beta",tooltip:"Storage is currently in beta. Some things may not work as expected."})]}),(0,c.tZ)(Z.xv,{color:"dimmer",multiline:!1,children:"Manage disk space"})]}),(0,c.BX)(b.G,{css:it.editButtonWrapper,children:[m||!d?(0,c.tZ)(nt.D,{iconLeft:(0,c.tZ)(G.Z,{size:16}),text:"Loading...",css:it.loadingPill}):(0,c.tZ)(nt.D,{text:"".concat(E,"/").concat(R),css:it.pill}),(0,c.tZ)(g.h,{size:24,css:it.editButton,alt:"Manage storage",onClick:function(){return t()},children:(0,c.tZ)(Wn.Z,{})})]})]})},at=t(61097),lt=t(94630),ct=t(97128),ut=t(26752),st=t(35536);function dt(e){var n=e.onRequestPowerUpModal,t=(0,ue.Z)(),r=(0,st.ky)({variables:{replId:t}}),i=r.data;return r.loading?(0,c.tZ)(G.Z,{}):"Repl"!==(null===i||void 0===i?void 0:i.repl.__typename)||"ReplPowerUpTypes"!==i.repl.powerUps.__typename?null:i.repl.powerUps.boost.sku===xe.ri.Off?(0,c.tZ)(Jn.r,{"aria-label":"Enable Boost",isSelected:!1,onChange:n}):(0,c.BX)(b.G,{css:[y.l0.rowWithGap(8),y.l0.align.center],children:[(0,c.tZ)(ct.Z,{variant:i.repl.powerUps.boost.sku,extraText:"Boosted"}),(0,c.tZ)(g.h,{size:24,css:[y.l0.p(16),{backgroundColor:y.TV.backgroundHigher}],alt:"Change boost",onClick:n,children:(0,c.tZ)(w.Z,{})})]})}function ft(e){var n=e.context,t=e.goToPowerUpDetails;return(0,c.tZ)(c.HY,{children:(0,c.BX)(b.G,{tag:"li",css:[y.l0.display.flex,y.l0.flex.row,y.l0.align.center,y.l0.justify.spaceBetween],children:[(0,c.BX)(b.G,{css:[y.l0.colWithGap(8)],children:[(0,c.BX)(b.G,{css:[y.l0.rowWithGap(8),y.l0.align.center],children:[(0,c.tZ)(ut.Z,{size:16})," ",(0,c.tZ)(b.G,{css:[y.l0.rowWithGap(8),y.l0.align.center],children:(0,c.tZ)(Z.xv,{variant:"subheadDefault",multiline:!1,children:Kn.S0.boost.name})}),(0,c.tZ)(Qn.Z,{context:n,powerUp:"boost"})]}),(0,c.tZ)(Z.xv,{color:"dimmer",multiline:!1,children:Kn.S0.boost.description})]}),(0,c.tZ)(dt,{onRequestPowerUpModal:function(){(0,pe.j)(pe.U3.POWER_UP_TOGGLE_REQUESTED,{powerUp:"boost",source:n}),t("boost")}})]})})}function pt(e){var n=e.isAlwaysOn,t=e.isAlwaysOnLoading,r=e.isGpu,i=e.isGpuLoading,o=e.canGpu,a=e.onAlwaysOnChange,l=e.onGpuChange,u=e.showManageStorageModal,s=e.goToPowerUpDetails,d=(0,ie.P5)({controlName:"flag-storage-utilization",logFlagToAnalytics:!1}),f=(0,_.H)(),p=f("always-on"),h=f("gpu");return(0,c.BX)(b.G,{css:[y.l0.colWithGap(16)],tag:"ul","aria-label":"Repl Powerups",children:[(0,c.BX)(b.G,{tag:"li",css:[y.l0.display.flex,y.l0.flex.row,y.l0.align.center,y.l0.justify.spaceBetween],children:[(0,c.BX)(b.G,{css:[y.l0.colWithGap(8)],children:[(0,c.BX)(b.G,{css:[y.l0.rowWithGap(8),y.l0.align.center],children:[(0,c.tZ)(lt.Z,{size:16})," ",(0,c.tZ)(Z.xv,{variant:"subheadDefault",id:p,multiline:!1,children:Kn.S0["always-on"].name}),(0,c.tZ)(Qn.Z,{context:"workspace_info_modal",powerUp:"always-on"})]}),(0,c.tZ)(Z.xv,{color:"dimmer",multiline:!1,children:Kn.S0["always-on"].description})]}),(0,c.tZ)(Jn.r,{"aria-labelledby":p,dataCy:"ws-always-on-toggle",isSelected:n,onChange:a,isReadOnly:t,colorway:t?"grey":"primary"})]}),(0,c.tZ)(ft,{context:"workspace_info_modal",goToPowerUpDetails:s}),d?(0,c.tZ)(ot,{showPowerUpModal:u}):null,o?(0,c.BX)(b.G,{tag:"li",css:[y.l0.display.flex,y.l0.flex.row,y.l0.align.center,y.l0.justify.spaceBetween],children:[(0,c.BX)(b.G,{css:[y.l0.colWithGap(8)],children:[(0,c.BX)(b.G,{css:[y.l0.rowWithGap(8),y.l0.align.center],children:[(0,c.tZ)(at.Z,{size:16})," ",(0,c.tZ)(Z.xv,{variant:"subheadDefault",id:h,multiline:!1,children:"GPU"}),(0,c.tZ)(Yn.Z,{content:"Beta",link:"https://replit.com/@util/GPU-Beta-Resources?v=1#README.md",tooltip:"GPUs are currently in beta. Some things may not work as expected yet."})]}),(0,c.tZ)(Z.xv,{color:"dimmer",multiline:!1,children:"Add an NVIDIA Tesla K80 GPU to the Repl"})]}),(0,c.tZ)(Jn.r,{"aria-labelledby":h,dataCy:"ws-gpu-toggle",isSelected:r,onChange:l,isDisabled:i,colorway:i?"grey":"primary"})]}):null]})}var ht=t(71002),vt={query:re.s8},mt={query:K.BW};function gt(e){var n=e.setIsEditing,t=e.showCloseButton,r=e.onDeployClick,i=(0,ue.Z)(),o=(0,En.BZ)({variables:{replId:i}}),a=o.data,l=o.refetch,u="Repl"===(null===a||void 0===a?void 0:a.repl.__typename)?a.repl:null;return u?(0,c.tZ)(Zt,{setIsEditing:n,showCloseButton:t,repl:u,refetch:l,onDeployClick:r}):(0,c.tZ)(b.G,{css:[y.l0.center,y.l0.p(16)],children:(0,c.tZ)(G.Z,{})})}var yt=(0,m.X)({titleDescription:[y.l0.colWithGap(8),y.l0.p(8)]});function Zt(e){var n,t,u,m,g,w,x=e.repl,k=e.showCloseButton,T=e.setIsEditing,E=e.onDeployClick,R=(0,ie.P5)({controlName:"flag-storage-utilization",logFlagToAnalytics:!1}),I=(0,Sn.useRouter)(),G=(0,ee.Z)(),D=(0,a.Z)(f.useState(null),2),P=D[0],B=D[1],A=(0,a.Z)(f.useState(null),2),U=A[0],L=A[1],X=(0,a.Z)(f.useState(x.hasGpu),2),M=X[0],F=X[1],O=(0,a.Z)(f.useState(x.isRenamed?x.title:""),2),W=O[0],H=O[1],V=(0,a.Z)(f.useState(x.description||""),2),j=V[0],K=V[1],re=(0,a.Z)(f.useState(x.rawTemplateLabel),2),ue=re[0],ye=re[1],be=(0,te.Z)({forceFetch:!1}).cycles,we=(0,En.zu)().data,ke=(0,ce.Z)().showError,Ce=x.publishedAs===xe.O2.Template;f.useEffect((function(){K(x.description||"")}),[x.description]);var Se=(0,ae.Z)(),Te=(0,he.Z)(),Ee=f.useRef(x),Re=(0,a.Z)((0,En.ap)({variables:{id:x.id},onCompleted:function(){G?J.X.closeCurrentWindow():I.push("/home","/~")},update:function(e,n){var t;(null===(t=n.data)||void 0===t?void 0:t.deleteRepl)&&(e.evict({id:e.identify(n.data.deleteRepl)}),e.gc())},onError:function(e){return ke((0,se.Z)(e.message))}}),1),Ie=Re[0],Ge=(0,a.Z)((0,En.vi)({onError:function(e){return ke((0,se.Z)(e.message))},onCompleted:function(e){var n=e.updateRepl.repl,t=Ee.current,r={};t.description!==n.description&&(r.description=n.description),t.title!==n.title&&(r.title=n.title),t.url!==n.url&&(r.url=n.url,I.push({pathname:Te,query:{replUrl:n.url}},n.url+"#"+window.location.search)),t.isRenamed!==n.isRenamed&&(r.isRenamed=!!n.isRenamed),Ee.current=x,Object.keys(r).length>0&&T(!1)}}),2),De=Ge[0],_e=Ge[1].loading,Pe=(0,a.Z)((0,oe.Z)(),2),Be=Pe[0],Ae=Pe[1].loading,Ue=(0,a.Z)((0,En.pr)({onCompleted:function(e){"UserError"===e.setAlwaysOn.__typename&&ke(e.setAlwaysOn.message)},onError:function(e){return ke((0,se.Z)(e.message))},refetchQueries:[vt,mt]}),2),Le=Ue[0],Xe=Ue[1].loading,Ne=(0,a.Z)((0,En.vN)({onCompleted:function(e){"UserError"!==e.setGpu.__typename&&"UnauthorizedError"!==e.setGpu.__typename?((0,Cn.Z)({replId:x.id}).catch((function(e){d.Tb(e),Se.current&&ke("Something went wrong when adding a GPU to your Repl. Please refresh or try again.")})),Se.current&&"Repl"===e.setGpu.__typename&&F(e.setGpu.hasGpu)):ke(e.setGpu.message)},onError:function(e){d.Tb(e),ke((0,se.Z)(e.message))},refetchQueries:[vt,mt]}),2),Me=Ne[0],Fe=Ne[1].loading,Oe=(0,a.Z)((0,En.gF)({variables:{input:{replId:x.id}},onError:function(e){d.Tb(e),ke((0,se.Z)(e.message))}}),2),We=Oe[0],He=Oe[1],Ve=(0,En.l9)({fetchPolicy:"cache-and-network",ssr:!1}),ze=Ve.data,je=Ve.loading,qe=Ve.error,$e=f.useMemo((function(){return!(!W||W===x.title)||(ue!==x.rawTemplateLabel||!(""===j&&!x.description)&&j!==x.description)}),[x,W,j,ue]),Ye=(0,le.Z)($e),Qe=f.useCallback((function(){if($e){var e={id:x.id,title:W.trim()||x.title,description:j,templateLabel:x.currentUserPermissions.changeTemplateLabel?ue:void 0};De({variables:{input:e}})}}),[$e,De,x,W,j,ue]),un=(0,le.Z)(Qe);f.useLayoutEffect((function(){return function(){Ye.current&&un.current()}}),[un,Ye]);var sn,dn=f.useContext(ne.G).isGooglePlayStoreTWA,fn=f.useCallback((function(e){switch(e){case"always-on":return"PowerUpCostsType"===x.powerUpCosts.__typename?x.powerUpCosts.alwaysOn.explanation:null;case"private":var n,t,r;return"UserPowerUpsTypes"===(null===ze||void 0===ze||null===(n=ze.currentUser)||void 0===n?void 0:n.userPowerUpsByType.__typename)?null===(r=null===(t=ze.currentUser.userPowerUpsByType)||void 0===t?void 0:t.privateRepls.cost)||void 0===r?void 0:r.explanation:null;case"gpu":var i,o;return"PowerUpCostsType"===x.powerUpCosts.__typename?null===(i=x.powerUpCosts)||void 0===i||null===(o=i.gpu)||void 0===o?void 0:o.explanation:null;default:(0,Tn.Z)(e)}}),[ze,x]),hn=function(){De({variables:{input:{id:x.id,isPrivate:!x.isPrivate}},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:(0,o.Z)((0,i.Z)({},x),{isPrivate:!x.isPrivate})}},refetchQueries:[{query:En.WM,variables:{replId:x.id}},vt,mt]}),(0,pe.j)(pe.U3.PRIVATE_TOGGLED,{enabled:!x.isPrivate,source:"workspace_info_modal"})},vn=function(){if(!Xe){var e=!x.isAlwaysOn;Le({variables:{replId:x.id,enabled:e},optimisticResponse:{__typename:"RootMutationType",setAlwaysOn:(0,o.Z)((0,i.Z)({},x),{__typename:"Repl",powerUpCosts:{__typename:"PowerUpCostsType",alwaysOn:{__typename:"PowerUpCostDetailType",cycles:0,explanation:xe.Ch.ActivateExistingOrder},gpu:{__typename:"PowerUpCostDetailType",cycles:0,explanation:xe.Ch.ActivateExistingOrder}},isAlwaysOn:e})}})}},mn=function(){if(!Fe){var e=!M;Me({variables:{replId:x.id,enabled:e},optimisticResponse:{__typename:"RootMutationType",setGpu:(0,o.Z)((0,i.Z)({},x),{__typename:"Repl",hasGpu:e,powerUpCosts:{__typename:"PowerUpCostsType",gpu:{__typename:"PowerUpCostDetailType",cycles:0,explanation:xe.Ch.ActivateExistingOrder},alwaysOn:{__typename:"PowerUpCostDetailType",cycles:0,explanation:xe.Ch.ActivateExistingOrder}}})}})}},gn=x.isRenamed?"Name your Repl":"Default name: ".concat(x.title),yn=[xe.Sy.Submit,xe.Sy.PublishTemplate,xe.Sy.EditTemplate].includes(x.workspaceCta),Zn=(0,_.H)(),bn=(null===we||void 0===we||null===(n=we.currentUser)||void 0===n?void 0:n.id)===(null===(t=x.user)||void 0===t?void 0:t.id),xn=(0,de.jX)(null===we||void 0===we||null===(u=we.currentUser)||void 0===u?void 0:u.userSubscriptionType),Rn=0===be&&bn&&!xn,In=(0,ie.P5)({controlName:"flag-gpus",logFlagToAnalytics:!1}),Gn=(0,ie.P5)({controlName:"flag-edit-repl-info-forms",logFlagToAnalytics:!1}),Dn=(0,me.P)({step:"not_shown"}),_n="Team"===(null===(m=x.owner)||void 0===m?void 0:m.__typename),Pn=x.hostingDeploymentPermissions.canDeploy&&"function"===typeof E,Bn="/replEnvironmentDesktop"===Te&&Pn,An=(0,ht.gg)(),Ln=An.isDeployableRepl,Xn=An.reason,Nn="HostingDeployment"===(null===(g=x.hostingDeployment)||void 0===g?void 0:g.__typename)&&x.hostingDeployment.currentBuild;return(0,c.tZ)("div",{css:{overflow:"auto",maxHeight:"80vh"},children:"not_shown"!==Dn.currentStep.step?(0,c.tZ)(ve.s,(0,o.Z)((0,i.Z)({},Dn),{analyticsContext:"workspace_info_modal"})):(0,c.BX)(c.HY,{children:[(0,c.tZ)($n,{repl:x,isTemplate:Ce,showCloseButton:k,setActiveDialog:B,setIsEditing:T,updateIconUrl:function(e){return De({variables:{input:{id:x.id,iconUrl:e}},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:(0,o.Z)((0,i.Z)({},x),{iconUrl:e})}}})},updateReplInfo:Qe}),Gn?(0,c.BX)(b.G,{css:yt.titleDescription,children:[(0,c.tZ)(z,{repl:x}),(0,c.tZ)(q,{repl:x}),Ce&&x.currentUserPermissions.changeTemplateLabel?(0,c.tZ)($,{repl:x}):null]}):(0,c.tZ)("form",{onSubmit:function(e){e.preventDefault(),Qe()},className:s().dynamic([["7206d0025a598b40",[x.currentUserPermissions.changeDescription?"auto":"not-allowed",kn.j.mobileMax]]]),children:(0,c.BX)(b.G,{css:[y.l0.align.stretch,y.l0.colWithGap(16)],children:[(0,c.BX)(rn.Tg,{background:"default",css:[y.l0.colWithGap(16)],children:[(0,c.tZ)(b.G,{css:[y.l0.flex.column],children:(0,c.BX)(b.G,{css:[y.l0.colWithGap(4)],children:[(0,c.BX)(b.G,{css:[y.l0.flex.row,y.l0.justify.spaceBetween,y.l0.align.end],children:[(0,c.tZ)("label",{htmlFor:Zn("name"),className:s().dynamic([["7206d0025a598b40",[x.currentUserPermissions.changeDescription?"auto":"not-allowed",kn.j.mobileMax]]]),children:(0,c.tZ)(Z.xv,{variant:"small",color:"dimmer",multiline:!1,children:"Name"})}),(0,c.tZ)(v.Z,{maxLength:60,value:W,hideLabel:!0})]}),(0,c.tZ)(C.II,{style:{cursor:x.currentUserPermissions.changeTitle?"auto":"not-allowed"},disabled:!x.currentUserPermissions.changeTitle,maxLength:60,placeholder:gn,value:W,onChange:function(e){return H(e.target.value)},spellCheck:!1,id:Zn("name"),dataCy:"ws-repl-info-title-input"})]})}),(0,c.tZ)(b.G,{css:[y.l0.flex.column],children:(0,c.BX)(b.G,{css:[y.l0.colWithGap(4)],children:[(0,c.BX)(b.G,{css:[y.l0.flex.row,y.l0.justify.spaceBetween,y.l0.align.end],children:[(0,c.tZ)("label",{htmlFor:Zn("description"),className:s().dynamic([["7206d0025a598b40",[x.currentUserPermissions.changeDescription?"auto":"not-allowed",kn.j.mobileMax]]]),children:(0,c.tZ)(Z.xv,{variant:"small",color:"dimmer",multiline:!1,children:"Description"})}),(0,c.tZ)(v.Z,{maxLength:N.p,value:j,hideLabel:!0})]}),(0,c.tZ)(C.B,{onKeyDown:function(e){13===e.keyCode&&(e.ctrlKey||e.metaKey)},disabled:!x.currentUserPermissions.changeDescription,maxLength:N.p,value:j,onChange:function(e){return K(e.target.value)},placeholder:"What does this Repl do?",css:[y.l0.minHeight(96),y.l0.maxHeight(256),{resize:"vertical"}],id:Zn("description")})]})})]}),Ce&&x.currentUserPermissions.changeTemplateLabel?(0,c.tZ)(rn.Tg,{background:"default",css:[y.l0.colWithGap(4)],children:(0,c.BX)(b.G,{css:[y.l0.colWithGap(4)],children:[(0,c.tZ)("label",{htmlFor:Zn("template"),className:s().dynamic([["7206d0025a598b40",[x.currentUserPermissions.changeDescription?"auto":"not-allowed",kn.j.mobileMax]]]),children:(0,c.tZ)(Z.xv,{color:"dimmer",variant:"small",multiline:!1,children:"Template label"})}),(0,c.tZ)(C.II,{value:ue,maxLength:60,placeholder:"Template label",spellCheck:!1,onChange:function(e){return ye(e.target.value)},id:Zn("template")})]})}):null]})}),yn?null:(0,c.BX)(b.G,{css:[y.l0.colWithGap(24),y.l0.p(8),y.l0.pt(0)],children:[!dn&&Rn?(0,c.tZ)(S.zx,{iconLeft:(0,c.tZ)(on.Z,{}),type:"button",colorway:"primary",stretch:!0,onClick:function(){(0,pe.j)(pe.U3.UPGRADE_SELECTED,{source:"workspace_info_modal"}),B(Un.BuyCycles)},text:"Power Up this Repl"}):null,x.currentUserPermissions.changePrivacy===xe.HA.Allowed&&(0,c.BX)(b.G,{css:[y.l0.colWithGap(8)],children:[(0,c.BX)(nn.hE,{tag:"fieldset",name:Zn("privacy"),value:x.isPrivate.toString(),onChange:function(){var e,n,t,r;if(!_e)if(x.isPrivate)hn();else if(x.currentUserPermissions.changePrivacy===xe.HA.Allowed&&null!=(null===(e=x.user)||void 0===e?void 0:e.id)&&null!=(null===we||void 0===we||null===(n=we.currentUser)||void 0===n?void 0:n.id)&&x.user.id!==we.currentUser.id)hn();else{var i="UserPowerUpsTypes"===(null===ze||void 0===ze||null===(t=ze.currentUser)||void 0===t?void 0:t.userPowerUpsByType.__typename)&&(null===(r=ze.currentUser.userPowerUpsByType)||void 0===r?void 0:r.privateRepls.active),o=fn("private");if(null==o||je)ke("You're too fast for us! Please try again in a moment.");else{if(!qe)return(0,pe.j)(pe.U3.POWER_UP_TOGGLE_REQUESTED,{powerUp:"private",setting:!x.isPrivate,source:"workspace_info_modal",costExplanation:o}),i?void hn():(L("private"),void B(Un.PowerUp));ke("This action is currently unavailable. Please refresh and try again.")}}},row:!0,primary:!0,stretch:!0,children:[(0,c.tZ)(nn.rK,{id:Zn("false"),value:"false",text:"Public",icon:(0,c.tZ)(ln.Z,{})}),(0,c.tZ)(nn.rK,{id:Zn("true"),value:"true",text:"Private",icon:(0,c.tZ)(cn.Z,{})})]}),(0,c.tZ)(Z.xv,{variant:"small",color:"dimmest",children:(0,fe.Z)(x.isPrivate,_n)})]}),x.currentUserPermissions.changeAlwaysOn!==xe.fn.Disallowed&&(0,c.tZ)(pt,{isAlwaysOn:x.isAlwaysOn,isAlwaysOnLoading:Xe||null==fn("always-on"),isGpu:M,isGpuLoading:Boolean(Fe||null==fn("gpu")),canGpu:In,onAlwaysOnChange:function(){var e=fn("always-on");if(null==e||Xe)ke("You're too fast for us! Please try again in a moment.");else if(qe)ke("This action is currently unavailable. Please refresh and try again.");else{if((0,pe.j)(pe.U3.POWER_UP_TOGGLE_REQUESTED,{powerUp:"always-on",setting:!x.isAlwaysOn,source:"workspace_info_modal",costExplanation:e}),!x.isAlwaysOn&&("NEEDS_CYCLES"===e||"SPEND_CYCLES"===e))return L("always-on"),void B(Un.PowerUp);vn()}},onGpuChange:function(){var e=fn("gpu");if(null!=e)if(qe)ke("This action is currently unavailable. Please refresh and try again.");else{if((0,pe.j)(pe.U3.POWER_UP_TOGGLE_REQUESTED,{powerUp:"gpu",setting:!M,source:"workspace_info_modal",costExplanation:e}),!M&&("NEEDS_CYCLES"===e||"SPEND_CYCLES"===e))return L("gpu"),void B(Un.PowerUp);mn()}else ke("You're too fast for us! Please try again in a moment.")},showManageStorageModal:function(){return B(Un.ManageStorage)},goToPowerUpDetails:function(e){return Dn.goTo({step:"power_up_details",powerUpCategory:e})}}),Bn?(0,c.BX)(b.G,{css:y.l0.colWithGap(8),children:[(0,c.tZ)(S.zx,{text:Nn?"Redeploy your project":"Deploy your project",iconLeft:(0,c.tZ)(an.Z,{}),colorway:Nn?void 0:"primary",onClick:function(){E(),Nn||(0,pe.j)(pe.U3.DEPLOY_PROJECT_SELECTED,{source:"workspace_info_modal"})},disabled:!Ln}),Ln?null:(0,c.tZ)(Ze.E,{text:Xn})]}):null]}),(0,c.tZ)(tn.u,{isOpen:P===Un.DeleteRepl,onRequestClose:function(){return B(null)},children:(0,c.tZ)(h.Z,{delete:Ie,entityType:"Repl",hideModal:function(){return B(null)}})}),(0,c.tZ)(Q.Z,{context:"workspace_info_modal",isOpen:P===Un.PowerUp,uponPurchaseGoTo:"workspace",replTitle:x.title,onRequestClose:function(e){"InsertDeploymentsPane"===e&&Pn&&(E(),(0,pe.j)(pe.U3.DEPLOY_PROJECT_SELECTED,{source:"power_up_modal"})),B(null)},onRequestPowerUp:(0,r.Z)((function(){return(0,l.__generator)(this,(function(e){switch(e.label){case 0:switch(U){case null:case"boost":case"hosting_tier":break;case"always-on":vn();break;case"private":hn();break;case"gpu":mn();break;default:(0,Tn.Z)(U)}return[4,new Promise((function(e){return setTimeout(e,3e3)}))];case 1:return e.sent(),B(null),[2]}}))})),powerUp:null!==U&&void 0!==U?U:"boost",canDeploy:Bn},P),R?(0,c.tZ)(wn,{isOpen:P===Un.ManageStorage,onRequestClose:function(){return B(null)}}):null,(0,c.tZ)(pn.Z,{initialTab:"default",isOpen:P===Un.BuyCycles,onRequestClose:function(){return B(null)},uponPurchaseGoTo:"workspace",context:"workspace_info_modal",replTitle:x.title}),(0,c.tZ)(tn.u,{isOpen:P===Un.ForkRepl,onRequestClose:function(){return B(null)},children:(0,c.tZ)(Y.Z,{onFork:function(e,n,t,r){Be({originId:x.id,teamId:e,title:n,description:t,isPrivate:r,forkToPersonal:!e,trackingData:{forkSource:"editReplPopoverMenuItem"}})},initialTitle:x.title,initialDescription:null!==(sn=x.description)&&void 0!==sn?sn:"",initialPrivacy:x.isPrivate,hideModal:function(){Ae||B(null)},teamContext:null===(w=x.user)||void 0===w?void 0:w.username})}),(0,c.tZ)(tn.u,{isOpen:P===Un.Unpublish,onRequestClose:function(){return B(null)},children:(0,c.tZ)(en.Z,{repl:x,source:"replEnvironment",onDone:function(){B(null)}})}),(0,c.tZ)(tn.u,{isOpen:P===Un.UnpublishTemplate,onRequestClose:function(){return B(null)},children:(0,c.tZ)(p.Z,{confirmLabel:"Yes, unpublish this Template",isDestructive:!0,title:"Unpublish Template",onCancel:function(){return B(null)},onConfirm:function(){He.loading||(We(),B(null))},children:"Your Repl will no longer be discoverable on Templates. You can republish again at any time, and all of your comments or reactions will stick around."})}),(0,c.tZ)(tn.u,{isOpen:P===Un.EditPublishSettings,onRequestClose:function(){return B(null)},noPadding:!0,maxWidth:872,fitContent:!0,children:(0,c.tZ)(ge.Z,{source:"replEnvironment",replId:x.id})}),(0,c.tZ)(tn.u,{isOpen:P===Un.Publish,onRequestClose:function(){return B(null)},noPadding:!0,maxWidth:872,fitContent:!0,children:(0,c.tZ)(ge.Z,{source:"replEnvironment",replId:x.id})}),(0,c.tZ)(tn.u,{isOpen:P===Un.UpdatePublishedTemplate,onRequestClose:function(){return B(null)},noPadding:!0,children:(0,c.tZ)(Ke,{repl:x})}),(0,c.tZ)(tn.u,{isOpen:P===Un.UpdatePublishedRepl,onRequestClose:function(){return B(null)},children:(0,c.tZ)(Je.Z,{repl:x,onDone:function(){return B(null)},source:"replEnvironment"})}),(0,c.tZ)(s(),{id:"7206d0025a598b40",dynamic:[x.currentUserPermissions.changeDescription?"auto":"not-allowed",kn.j.mobileMax],children:"form.__jsx-style-dynamic-selector{padding:var(--space-8)}textarea.__jsx-style-dynamic-selector{min-height:42px;height:200px;resize:none;cursor:".concat(x.currentUserPermissions.changeDescription?"auto":"not-allowed",";font-size:var(--font-size-default);font-family:var(--font-family-default);padding:var(--space-8);display:block;width:100%;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);border:1px solid var(--outline-dimmest);-webkit-transition:.2s border-color;-moz-transition:.2s border-color;-o-transition:.2s border-color;transition:.2s border-color;background-color:transparent;color:var(--foreground-default)}textarea.__jsx-style-dynamic-selector:hover{border-color:var(--accent-primary-dimmer)}textarea.__jsx-style-dynamic-selector:active,textarea.__jsx-style-dynamic-selector:focus{border-color:var(--accent-primary-default)}textarea.__jsx-style-dynamic-selector:disabled{opacity:.5}textarea.__jsx-style-dynamic-selector:focus,textarea.__jsx-style-dynamic-selector:active{outline:none;border-color:var(--accent-primary-default)}.edit-repl-actions.__jsx-style-dynamic-selector{padding:0 var(--space-16)}.menu-item.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;color:var(--foreground-default)}.delete-menu-item.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;color:var(--accent-negative-default)}.icon-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;padding:0 var(--space-4)}.menu-text.__jsx-style-dynamic-selector{padding:0 var(--space-4)}.upgrade-button-container.__jsx-style-dynamic-selector{padding:0 var(--space-8)}.upgrade-button-container.__jsx-style-dynamic-selector .sentence-case{text-transform:none}.upgrade-text-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;padding:var(--space-8);-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}.always-on-indicator.__jsx-style-dynamic-selector{margin-left:var(--space-4);margin-right:var(--space-8);width:8px;height:8px;-webkit-border-radius:100%;-moz-border-radius:100%;border-radius:100%;background-color:var(--accent-green-default);-webkit-box-shadow:0 0 12px var(--accent-green-default);-moz-box-shadow:0 0 12px var(--accent-green-default);box-shadow:0 0 12px var(--accent-green-default)}@media screen and (max-width:").concat(kn.j.mobileMax,"px){.edit-repl.__jsx-style-dynamic-selector{width:80vw}}")})]})})}},75982:function(e,n,t){t.d(n,{s:function(){return l}});var r=t(43119),i=t(71440),o=t(3839);function a(){var e=(0,r.Z)(["\n  fragment WorkspaceHeaderReplMetadataRepl on Repl {\n    id\n    title\n    iconUrl\n    user {\n      id\n      ...UserLinkUser\n    }\n  }\n  ","\n"]);return a=function(){return e},e}var l=(0,i.Ps)(a(),o._)},21835:function(e,n,t){t.d(n,{Z:function(){return d}});var r=t(57389),i=t(74985),o=(t(50959),t(82568)),a=t(39541),l=t(61284),c=t(85368),u=t(75863),s=(0,o.X)({metadata:[a.l0.rowWithGap(6),a.l0.align.center,a.l0.flex.growAndShrink(1)],text:[a.l0.flex.shrink(1),a.l0.flex.row],usernameOuter:{flexShrink:1,display:"grid",transition:"grid-template-columns 80ms ease-out"},usernameInner:[a.l0.flex.shrink(1),a.l0.rowWithGap(1),a.l0.overflow("hidden")],username:[a.l0.maxWidth(160),a.l0.truncate,a.l0.flex.shrink(1)],title:[a.l0.flex.shrink(1),a.l0.truncate]});function d(e){var n=e.repl,t=n.user?(0,i.tZ)(c.G,{css:s.usernameOuter,"data-repl-info-username":!0,children:(0,i.BX)(c.G,{css:s.usernameInner,children:[(0,i.tZ)(l.xv,{multiline:!1,css:s.username,children:n.user.username}),(0,i.tZ)(l.xv,{multiline:!1,color:"dimmest",children:"/"})]})}):null;return(0,i.BX)(c.G,{css:s.metadata,children:[(0,i.tZ)(c.G,{css:[a.l0.display.none,(0,r.Z)({},a.BC.min("tabletMax"),[a.l0.display.flex])],children:(0,i.tZ)(u.ZP,{iconUrl:n.iconUrl,size:20,alt:"Repl icon"})}),(0,i.BX)(c.G,{css:s.text,children:[t,(0,i.tZ)(l.xv,{multiline:!1,css:s.title,"data-cy":"header-repl-title",children:n.title})]})]})}},80587:function(e,n,t){t.d(n,{Z:function(){return ye}});var r=t(72006),i=t(74985),o=t(4405),a=t(43312),l=t(82568),c=t(39541),u=t(61284),s=t(85368),d=t(84563),f=t(77637),p=t(43119),h=t(91398),v=t(92683),m=t(50959),g=t(27691),y=t(87076),Z=t(18171),b=t(93658),w=t(76735);function x(){var e=(0,p.Z)(["from { opacity: 0 } to { opacity: 1 }"]);return x=function(){return e},e}var k=(0,l.X)({self:[c.l0.flex.row,c.l0.flex.wrap,c.l0.justify.spaceBetween,c.l0.align.center],text:[c.l0.rowWithGap(2),c.l0.align.center,c.l0.minHeight(c.TV.space24)],textLoading:[c.l0.height(16),c.l0.width(c.TV.space64),g.p.backgroundPulse(),c.l0.borderRadius(4)],textLoadingWrapper:[c.l0.height("fit-content"),{animation:"".concat((0,a.F4)(x())," 120ms forwards ease-out alternate")}],textWarn:[c.l0.rowWithGap(4),c.l0.align.center,c.l0.px(4)],textPadding:[c.l0.height(16),{lineHeight:"16px"}],textHighlight:[c.l0.color.accentPrimaryStronger],selfMini:[c.l0.rowWithGap(4),c.l0.align.center]});function C(e){var n,t=e.title,r=e.description,o=e.limitStatusAtom,a=e.limitTextSecondaryAtom,l=e.mini,d=e.loading,p=(0,f.Z)(e,["title","description","limitStatusAtom","limitTextSecondaryAtom","mini","loading"]),g=(0,m.useMemo)((function(){return null!==(n=p.limitTextAtom)&&void 0!==n?n:(0,h.cn)(null)}),[p.limitTextAtom]),x=(0,v.Dv)((0,Z.Z)((function(){return(0,h.cn)((function(e){return"At limit"===e(o)||"Close to limit"===e(o)}))}),[o]));if(l)return(0,i.BX)(s.G,{css:k.selfMini,children:[(0,i.tZ)(u.xv,{variant:"small",css:c.l0.color.foregroundDimmer,multiline:!1,children:t}),x?(0,i.tZ)(w.Z,{color:c.TV.orangeStronger}):null]});var C=null;return C=d?(0,i.tZ)(s.G,{css:k.textLoading}):(0,i.tZ)(u.xv,{variant:"small",css:k.textPadding,multiline:!1,children:a?(0,i.BX)(i.HY,{children:[(0,i.BX)("span",{css:k.textHighlight,children:[" ",(0,i.tZ)(S,{text:g})]})," + ",(0,i.tZ)(S,{text:a})]}):(0,i.tZ)(S,{text:g})}),(0,i.BX)(s.G,{css:k.self,children:[(0,i.BX)(s.G,{css:k.text,children:[(0,i.tZ)(u.xv,{css:{fontWeight:c.TV.fontWeightMedium},multiline:!1,children:t}),(0,i.tZ)(y.h,{alt:r,size:24,children:(0,i.tZ)(b.Z,{})}),x?(0,i.BX)(s.G,{css:k.textWarn,children:[(0,i.tZ)(w.Z,{color:c.TV.orangeStronger}),(0,i.tZ)(u.xv,{variant:"small",css:k.textPadding,multiline:!1,children:(0,i.tZ)(S,{text:o})})]}):null]}),(0,i.tZ)(s.G,{css:k.textLoadingWrapper,children:C},d?"loadingResources":"finishedLoadingResources")]})}function S(e){var n=e.text,t=(0,v.Dv)(n);return null===t?null:(0,i.tZ)(i.HY,{children:t})}var T=t(45317);function E(e,n){if(void 0===e)return"empty";var t=e/n;return t>=1?"At limit":t>=.9?"Close to limit":"fine"}function R(e){return"At limit"===e?T.TV.accentNegativeDefault:"Close to limit"===e?T.TV.orangeDefault:void 0}function I(e,n,t,r,i){return"empty"===e||void 0===n?"":"vCPU"===i?Math.round(100*Math.min(1,n/t))+"% of "+r+" vCPUs":Math.round(n).toLocaleString()+"/"+Math.round(t).toLocaleString()+" "+i}var G=t(33594),D={accordionTitle:(0,a.iv)([c.l0.rowWithGap(4),c.l0.align.center]),accordionText:(0,a.iv)([c.l0.color.foregroundDimmer]),accordionIcon:(0,a.iv)([c.l0.cursor.pointer]),expandedWrapper:(0,a.iv)([c.l0.colWithGap(4),c.l0.py(8),c.l0.border({direction:"bottom",color:c.TV.outlineDefault,width:1})])};function _(){return(0,i.tZ)(G.Q,{headerContent:(0,i.tZ)(u.xv,{variant:"small",css:D.accordionText,multiline:!1,children:"About RAM"}),children:(0,i.BX)(s.G,{css:D.expandedWrapper,children:[(0,i.tZ)(U,{type:"Project",text:"is what your programs, code intelligence, and some editor features use. It holds programs that are running right now."}),(0,i.tZ)(U,{type:"Cache",text:"caches file contents, libraries, and executables. If Program Memory gets too high, it will replace Cache Memory. If there\u2019s not enough Cache Memory, processes will slow down."})]})})}var P={self:(0,a.iv)([c.l0.width(8),c.l0.height(8),c.l0.borderRadius(8),c.l0.flex.shrink(0)])};function B(e){var n=e.variant;return(0,i.tZ)("div",{css:[P.self,"primary"===n?c.l0.backgroundColor.accentPrimaryDefault:c.l0.backgroundColor.outlineDefault]})}var A={self:(0,a.iv)([c.l0.rowWithGap(8),c.l0.align.center]),text:(0,a.iv)([c.l0.flex.shrink(1)]),underline:(0,a.iv)({textDecoration:"underline"})};function U(e){var n=e.type,t=e.text;return(0,i.BX)(s.G,{css:A.self,children:[(0,i.tZ)(B,{variant:"Project"===n?"primary":"secondary"}),(0,i.BX)(u.xv,{variant:"small",css:A.text,children:[(0,i.BX)("span",{css:A.underline,children:[n," Memory"]})," ",t]})]})}var L=(0,l.X)({self:[c.l0.colWithGap(2)],selfMini:[c.l0.colWithGap(4),c.l0.flex.growAndShrink(2),{flexBasis:32}],selfMiniBar:[c.l0.height(8)]});function X(e){var n=e.totalAtom,t=e.currentAtom,a=e.currentSecondaryAtom,l=e.measure,c=e.cpuCountAtom,u=e.title,d=e.description,f=(0,Z.Z)((function(){return(0,h.cn)((function(e){return E(e(t),e(n))}))}),[t,n]),p=(0,Z.Z)((function(){return(0,h.cn)((function(e){return I(e(f),e(t),e(n),c&&e(c),l)}))}),[f,t,n,c,l]),v=(0,Z.Z)((function(){return(0,h.cn)((function(e){return a?I(e(f),e(a),e(n),c&&e(c),l):""}))}),[f,a,n,c,l]),m=(0,Z.Z)((function(){return(0,h.cn)((function(e){return a?Math.round(e(t)).toString():e(p)}))}),[a,t,p]);return(0,i.BX)(s.G,{css:e.mini?L.selfMini:L.self,children:[(0,i.tZ)(C,(0,o.Z)((0,r.Z)({title:u,description:d,limitStatusAtom:f,limitTextAtom:m},a?{limitTextSecondaryAtom:v}:{}),{mini:e.mini,loading:e.loading})),(0,i.tZ)(M,(0,o.Z)((0,r.Z)({},e),{limitStatusAtom:f,limitTextAtom:p,limitTextSecondaryAtom:v}))]})}var N={tooltip:(0,a.iv)(c.l0.colWithGap(2)),tooltipItem:(0,a.iv)(c.l0.rowWithGap(4),c.l0.align.center,c.l0.width("100%"),c.l0.flex.growAndShrink(1)),tooltipItemText:(0,a.iv)(c.l0.flex.row,c.l0.align.center,c.l0.justify.spaceBetween,c.l0.flex.growAndShrink(1),{"&>span":c.l0.display.inlineFlex,gap:T.TV.space4})};function M(e){var n=e.currentAtom,t=e.currentLabel,a=e.currentSecondaryAtom,l=e.currentSecondaryLabel,c=e.totalAtom,u=e.mini,f=e.inactive,p=e.limitStatusAtom,g=e.limitTextAtom,y=e.limitTextSecondaryAtom,b=e.loading,w=e.secondaryLimitDeterminesStatus,x=void 0!==w&&w,k=(0,v.Dv)(n),C=(0,v.Dv)((0,m.useMemo)((function(){return null!==a&&void 0!==a?a:(0,h.cn)(0)}),[a])),S=(0,v.Dv)(c),E=(0,v.Dv)(g),I=(0,v.Dv)(y),G=(0,v.Dv)((0,Z.Z)((function(){return(0,h.cn)((function(e){return R(e(p))}))}),[p])),D=(0,v.Dv)(p),_="At limit"!==D&&"Close to limit"!==D||!x?T.TV.outlineDimmer:R(D),P={shake:"At limit"===D,smoke:"Close to limit"===D||"At limit"===D};return a?(0,i.tZ)(d.J,(0,o.Z)((0,r.Z)({},P),{loading:b,css:u&&L.selfMiniBar,disabled:f,total:S,tooltip:(0,i.BX)(s.G,{css:N.tooltip,children:[(0,i.tZ)(F,{variant:"primary",label:t,labelValue:E}),(0,i.tZ)(F,{variant:"secondary",label:l,labelValue:I})]}),data:[{current:k,color:G},{current:C,color:_}]})):(0,i.tZ)(d.J,(0,o.Z)((0,r.Z)({},P),{loading:b,css:u&&L.selfMiniBar,disabled:f,total:S,current:k,color:G,tooltip:E}))}function F(e){var n=e.variant,t=e.label,r=e.labelValue;return(0,i.BX)(s.G,{css:N.tooltipItem,children:[(0,i.tZ)(B,{variant:n}),(0,i.BX)(u.xv,{css:N.tooltipItemText,multiline:!1,children:[(0,i.BX)("span",{children:[t,":"]}),(0,i.tZ)("span",{children:r})]})]})}var O=t(57135),W=t(96583),H=t(5884),V=t(70523),z=t(31992),j=t(12290),q=t(48330),$=t(66539),Y=(0,l.X)({self:[c.l0.colWithGap(8)],summary:[c.l0.colWithGap(2)],summaryRow:[c.l0.rowWithGap(4),c.l0.align.center,c.l0.width("100%"),c.l0.flex.growAndShrink(1)],summaryRowText:[c.l0.flex.row,c.l0.align.center,c.l0.justify.spaceBetween,c.l0.flex.growAndShrink(1),{"&>span":c.l0.display.inlineFlex,gap:T.TV.space4}],miniBar:[c.l0.height(8)],dot:[c.l0.width(8),c.l0.height(8),c.l0.minWidth(8),c.l0.maxHeight(8),{borderRadius:"50%"}]});function K(e){var n=e.thisReplAtom,t=e.otherReplsAtom,a=e.quotaAtom,l=e.mini,c=e.inactive,u=e.accountLimitStatusAtom,f=e.thisReplTextAtom,p=e.otherReplsTextAtom,m=e.quotaTextAtom,g=e.scratchDiskTextAtom,y=e.scratchLimitStatusAtom,b=e.loading,w=(0,v.Dv)(n),x=(0,v.Dv)(t),k=(0,v.Dv)(a),C=(0,v.Dv)(f),S=(0,v.Dv)(p),E=(0,v.Dv)(m),I=(0,v.Dv)(g),G=(0,v.Dv)((0,Z.Z)((function(){return(0,h.cn)((function(e){return R(e(u))}))}),[u])),D=(0,v.Dv)(u),_=(0,v.Dv)(y),P="At limit"===_||"Close to limit"===_?T.TV.orangeStrongest:T.TV.foregroundDimmer,B="At limit"===D||"Close to limit"===D?R(D):T.TV.outlineDimmer,A={shake:"At limit"===D,smoke:"Close to limit"===D||"At limit"===D};return(0,i.BX)(s.G,{css:Y.self,children:[(0,i.tZ)(d.J,(0,o.Z)((0,r.Z)({},A),{loading:b,css:l&&Y.miniBar,disabled:c,total:k,tooltip:(0,i.BX)(s.G,{css:Y.summary,children:[(0,i.tZ)(ee,{label:"This Repl",labelValue:C,color:T.TV.accentPrimaryStronger}),(0,i.tZ)(ee,{label:"Your other Repls",labelValue:S,color:T.TV.foregroundDimmer}),(0,i.tZ)(ee,{label:"Total account storage",labelValue:E,color:T.TV.foregroundDimmest}),(0,i.tZ)(ne,{displaySize:I,color:P})]}),data:[{current:w,color:G},{current:x||0,color:B}]})),l?null:(0,i.BX)(s.G,{css:Y.summary,children:[(0,i.tZ)(ee,{label:"This Repl",labelValue:C,color:T.TV.accentPrimaryStronger}),(0,i.tZ)(ee,{label:"Your other Repls",labelValue:S,color:T.TV.foregroundDimmer}),(0,i.tZ)(ee,{label:"Total account storage",labelValue:E,color:T.TV.foregroundDimmest}),(0,i.tZ)(ne,{displaySize:I,color:P,tooltip:"Scratch disk storage is temporary storage used for package installation or to store temporary files. It does not count towards account storage, and resets regularly."})]})]})}var Q=s.K.div,J=s.K.span;function ee(e){var n=e.color,t=e.label,r=e.labelValue;return(0,i.BX)(s.G,{css:Y.summaryRow,children:[(0,i.tZ)(Q,{css:Y.dot,style:{backgroundColor:n}}),(0,i.tZ)(u.xv,{variant:"small",css:Y.summaryRowText,multiline:!1,children:(0,i.BX)(J,{style:{color:n},children:[t,": ",r]})})]})}var ne=function(e){var n=e.displaySize,t=e.tooltip,r=e.color;return(0,i.tZ)(s.G,{css:Y.summaryRow,children:t?(0,i.tZ)($.u,{tooltip:t,children:(0,i.BX)(u.xv,{variant:"small",css:Y.summaryRowText,multiline:!1,children:[(0,i.BX)(J,{style:{color:r},children:["Scratch Disk: ",n]}),(0,i.tZ)(b.Z,{style:{color:r}})]})}):(0,i.tZ)(u.xv,{variant:"small",css:Y.summaryRowText,multiline:!1,children:(0,i.BX)(J,{style:{color:r},children:["Scratch Disk: ",n]})})})};function te(){var e=(0,p.Z)(["from { opacity: 0 } to { opacity: 1 }"]);return te=function(){return e},e}var re=(0,l.X)({center:[c.l0.flex.row,c.l0.flex.wrap,c.l0.justify.spaceBetween,c.l0.align.center],text:[c.l0.rowWithGap(2),c.l0.align.center,c.l0.minHeight(c.TV.space24)],textLoading:[c.l0.height(16),c.l0.width(c.TV.space64),g.p.backgroundPulse(),c.l0.borderRadius(4)],textLoadingWrapper:[c.l0.height("fit-content"),{animation:"".concat((0,a.F4)(te())," 120ms forwards ease-out alternate")}],textWarn:[c.l0.rowWithGap(4),c.l0.align.center,c.l0.px(4)],textPadding:[c.l0.height(16),{lineHeight:"16px"}],textHighlight:[c.l0.color.accentPrimaryStronger],selfMini:[c.l0.rowWithGap(4),c.l0.align.center]});function ie(e){var n=e.title,t=e.description,r=e.accountLimitStatusAtom,o=e.accountLimitTextAtom,a=e.expandedAccountUseTextAtom,l=e.scratchLimitStatusAtom,d=e.mini,f=e.loading,p=(0,v.Dv)((0,Z.Z)((function(){return(0,h.cn)((function(e){return"At limit"===e(r)||"Close to limit"===e(r)}))}),[r])),m=(0,v.Dv)((0,Z.Z)((function(){return(0,h.cn)((function(e){return"At limit"===e(l)||"Close to limit"===e(l)}))}),[l])),g=p||m;if(d)return(0,i.BX)(s.G,{css:re.selfMini,children:[(0,i.tZ)(u.xv,{multiline:!1,variant:"small",css:m?c.l0.color.orangeStrongest:c.l0.color.foregroundDimmer,children:n}),g?(0,i.tZ)(w.Z,{size:12,color:c.TV.orangeStrongest}):null]});var x=null;return x=f?(0,i.tZ)(s.G,{css:re.textLoading}):(0,i.BX)(u.xv,{variant:"small",css:re.textPadding,multiline:!1,children:[(0,i.BX)("span",{css:re.textHighlight,children:[" ",(0,i.tZ)(oe,{text:o})]})," + ",(0,i.tZ)(oe,{text:a})]}),(0,i.BX)(s.G,{css:re.center,children:[(0,i.BX)(s.G,{css:re.text,children:[(0,i.tZ)(u.xv,{css:{fontWeight:c.TV.fontWeightMedium},multiline:!1,children:n}),(0,i.tZ)(y.h,{alt:t,size:24,children:(0,i.tZ)(b.Z,{})}),p?(0,i.BX)(s.G,{css:re.textWarn,children:[(0,i.tZ)(w.Z,{color:c.TV.orangeStronger}),(0,i.tZ)(u.xv,{variant:"small",css:re.textPadding,multiline:!1,children:(0,i.tZ)(oe,{text:r})})]}):null]}),(0,i.tZ)(s.G,{css:re.textLoadingWrapper,children:x},f?"loadingResources":"finishedLoadingResources")]})}function oe(e){var n=e.text,t=(0,v.Dv)(n);return(0,i.tZ)(i.HY,{children:t})}var ae=t(8030);function le(){var e=(0,p.Z)(["from { opacity: 0 } to { opacity: 1 }"]);return le=function(){return e},e}var ce=(0,l.X)({self:[c.l0.colWithGap(2)],selfMini:[c.l0.colWithGap(4),c.l0.flex.growAndShrink(2),{flexBasis:32}],center:[c.l0.flex.row,c.l0.flex.wrap,c.l0.justify.spaceBetween,c.l0.align.center],text:[c.l0.rowWithGap(2),c.l0.align.center,c.l0.minHeight(T.TV.space24)],textLoading:[c.l0.height(16),c.l0.width(T.TV.space64),g.p.backgroundPulse(),c.l0.borderRadius(4)],textLoadingWrapper:[c.l0.height("fit-content"),{animation:"".concat((0,a.F4)(le())," 120ms forwards ease-out alternate")}],textMini:[{alignSelf:"start"},c.l0.color.foregroundDimmest],titleWrapper:[c.l0.rowWithGap(4),c.l0.align.center],titleMini:[c.l0.color.foregroundDimmer],title:[c.l0.fontWeight.medium]});function ue(e){var n=e.currentAtom,t=e.mini,r=e.loading,o=e.description,a=(0,Z.Z)((function(){return(0,h.cn)((function(e){return(0,ae.s)(1024*e(n)*1024)}))}),[n]);if(t)return(0,i.BX)(s.G,{css:ce.selfMini,children:[(0,i.tZ)(s.G,{css:ce.titleWrapper,children:(0,i.tZ)(u.xv,{multiline:!1,variant:"small",css:ce.titleMini,height:"singleLine",children:"Storage"})}),(0,i.tZ)(u.xv,{multiline:!1,variant:"small",css:ce.textMini,height:"singleLine",children:(0,i.tZ)(se,{text:a})})]});var l=r?(0,i.tZ)(s.G,{css:ce.textLoading}):(0,i.tZ)(u.xv,{variant:"small",height:"singleLine",multiline:!1,children:(0,i.tZ)(se,{text:a})});return(0,i.tZ)(s.G,{css:t?ce.selfMini:ce.self,children:(0,i.BX)(s.G,{css:ce.center,children:[(0,i.BX)(s.G,{css:ce.text,children:[(0,i.tZ)(u.xv,{css:ce.title,multiline:!1,children:"Storage"}),(0,i.tZ)(y.h,{alt:o,size:24,children:(0,i.tZ)(b.Z,{})})]}),(0,i.tZ)(s.G,{css:ce.textLoadingWrapper,children:l},r?"loadingResources":"finishedLoadingResources")]})})}function se(e){var n=e.text,t=(0,v.Dv)(n);return(0,i.tZ)(i.HY,{children:t})}var de=(0,l.X)({self:[c.l0.colWithGap(2)],selfMini:[c.l0.colWithGap(4),c.l0.flex.growAndShrink(2),{flexBasis:32}],selfMiniBar:[c.l0.height(8)]}),fe=3e5;function pe(e){var n,t,o,a,l=(0,q.Z)(),c=(0,V.Z)(),u=c.dataAtom.disk,s=c.loading,d=(0,H.mE)({variables:{replId:l}}),f=d.data,p=d.loading,h="Repl"===(null===f||void 0===f||null===(n=f.repl)||void 0===n?void 0:n.__typename)&&"Team"===(null===(t=f.repl.owner)||void 0===t?void 0:t.__typename),v="Repl"===(null===f||void 0===f||null===(o=f.repl)||void 0===o?void 0:o.__typename)?null===(a=f.repl.owner)||void 0===a?void 0:a.id:void 0;return p||h?(0,i.tZ)(X,(0,r.Z)({title:"Storage",description:"How much room your Repl has to store files",currentAtom:u.currentAtom,totalAtom:u.totalAtom,measure:"MiB",loading:p||s},e)):(0,i.tZ)(he,(0,r.Z)({title:"Storage",description:"How much space your account has to store files",resourceData:c,replId:l,ownerId:v},e))}function he(e){var n,t,a,l=e.title,c=e.description,u=e.resourceData,d=e.replId,f=e.ownerId,p=u.dataAtom.disk,g=p.currentAtom,y=p.totalAtom,b=p.scratchTotalAtom,w=p.scratchCurrentAtom,x=u.loading,k=(0,v.Dv)(y),C=(0,v.Dv)(g),S=(0,v.Dv)(b),T=(0,v.Dv)(w),R=(0,H.Pf)({fetchPolicy:"network-only",nextFetchPolicy:"cache-and-network",ssr:!1}),I=R.data,G=R.loading,D=R.refetch,_="number"===typeof f&&(null===I||void 0===I||null===(n=I.currentUser)||void 0===n?void 0:n.id)===f,P=(0,m.useMemo)((function(){return(0,j.Z)((function(){return D()}),{wait:12e4,maxWait:fe})}),[D]);(0,m.useEffect)((function(){var e=!1,n=null,t=function(){var r=(0,O.Z)((function(){return(0,W.__generator)(this,(function(r){switch(r.label){case 0:return e?[2]:[4,P()];case 1:return r.sent(),n=setTimeout(t,fe),[2]}}))}));return function(){return r.apply(this,arguments)}}();return t(),function(){e=!0,n&&clearTimeout(n),P.isScheduled()&&P.flush()}}),[P,C,k,D]);var B="AccountStorageUtilization"===(null===I||void 0===I||null===(t=I.currentUser)||void 0===t?void 0:t.storageInfo.accountStorageUtilization.__typename)?Number(I.currentUser.storageInfo.accountStorageUtilization.total):0,A="StorageQuota"===(null===I||void 0===I||null===(a=I.currentUser)||void 0===a?void 0:a.storageInfo.storageQuota.__typename)?Number(I.currentUser.storageInfo.storageQuota.quota):0,U=me(d,I),L=!(A>0&&B>0)&&(G||x),X=1024*C*1024,N=Math.max(B-U,0),M=(0,z.p6)(B),F=(0,z.p6)(N),V=(0,z.p6)(A),q=ve(1024*T*1024,1024*S*1024),$=E(M,V),Y=E(T,S),Q=(0,ae.s)(X),J=(0,ae.s)(N),ee=(0,ae.s)(A),ne=ve(N,A),te=(0,z.$s)(X).toLocaleString(void 0,{maximumFractionDigits:1}),re=(0,Z.Z)((function(){return(0,h.cn)(F)}),[F]),oe=(0,Z.Z)((function(){return(0,h.cn)(V)}),[V]),le=(0,Z.Z)((function(){return(0,h.cn)($)}),[$]),ce=(0,Z.Z)((function(){return(0,h.cn)(Y)}),[Y]),se=(0,Z.Z)((function(){return(0,h.cn)(Q)}),[Q]),pe=(0,Z.Z)((function(){return(0,h.cn)(ee)}),[ee]),he=(0,Z.Z)((function(){return(0,h.cn)(q)}),[q]),ge=(0,Z.Z)((function(){return(0,h.cn)(J)}),[J]),ye=(0,Z.Z)((function(){return(0,h.cn)(ne)}),[ne]),Ze=(0,Z.Z)((function(){return(0,h.cn)(te)}),[te]);return _?(0,i.BX)(s.G,{css:e.mini?de.selfMini:de.self,children:[(0,i.tZ)(ie,{title:l,description:c,scratchLimitStatusAtom:ce,accountLimitStatusAtom:le,accountLimitTextAtom:Ze,expandedAccountUseTextAtom:ye,mini:e.mini,loading:L}),(0,i.tZ)(K,(0,o.Z)((0,r.Z)({},e),{loading:L,thisReplAtom:g,otherReplsAtom:re,quotaAtom:oe,accountLimitStatusAtom:le,thisReplTextAtom:se,otherReplsTextAtom:ge,quotaTextAtom:pe,scratchDiskTextAtom:he,scratchLimitStatusAtom:ce}))]}):(0,i.tZ)(ue,(0,r.Z)({currentAtom:g,loading:L},e))}var ve=function(e,n){var t=(0,z.$s)(e).toLocaleString(void 0,{maximumFractionDigits:2}),r=(0,z.$s)(n).toLocaleString(void 0,{maximumFractionDigits:2});return"".concat(t," / ").concat(r," GiB")},me=function(e,n){var t,r;if("AccountStorageUtilization"!==(null===n||void 0===n||null===(t=n.currentUser)||void 0===t?void 0:t.storageInfo.accountStorageUtilization.__typename))return 0;var i=null===(r=n.currentUser.storageInfo.accountStorageUtilization.perRepl.find((function(n){return n.repl.id===e})))||void 0===r?void 0:r.usage;return Number(null!==i&&void 0!==i?i:0)},ge=t(88541);function ye(e){var n=e.resources,t=n.dataAtom,o=t.cpu,a=t.ram,l=t.disk,u=n.loading,d=(0,ge.P5)({controlName:"flag-storage-dynamic-resize-beta",logFlagToAnalytics:!1}),f=(0,i.tZ)(X,(0,r.Z)({title:"RAM",description:"How much memory your Repl is using",currentAtom:a.currentRssAtom,currentLabel:"Project Memory",currentSecondaryAtom:a.currentCacheAtom,currentSecondaryLabel:"Cache Memory",totalAtom:a.totalAtom,measure:"MiB",loading:u},e));return(0,i.BX)(i.HY,{children:[(0,i.tZ)(X,(0,r.Z)({title:"CPU",description:"How much processing power your Repl is using",currentAtom:o.currentAtom,totalAtom:o.totalAtom,cpuCountAtom:o.cpuCountAtom,measure:"vCPU",loading:u},e)),e.mini?f:(0,i.BX)(s.G,{css:c.l0.colWithGap(4),children:[f,(0,i.tZ)(_,{})]}),d?(0,i.tZ)(pe,(0,r.Z)({},e)):(0,i.tZ)(X,(0,r.Z)({title:"Storage",description:"How much room your Repl has to store files",currentAtom:l.currentAtom,totalAtom:l.totalAtom,measure:"MiB",loading:u},e))]})}},8030:function(e,n,t){t.d(n,{s:function(){return o}});var r=t(29262),i=t(31992),o=function(e){return e>2*r.lb?"".concat((0,i.$s)(e).toLocaleString(void 0,{maximumFractionDigits:1})," GiB"):"".concat(Math.round((0,i.p6)(e)).toLocaleString()," MiB")}},73162:function(e,n,t){t.d(n,{hF:function(){return D},Kq:function(){return N},lR:function(){return L}});var r=t(74985),i=t(43312),o=(t(87076),t(63128),t(61284)),a=t(85368),l=(t(36443),t(94045),t(39541)),c=(t(19358),t(70523)),u=(t(50959),t(80587)),s=t(38467),d=t(48330),f=t(77511),p=t(51631),h=t(90171),v=t(72006),m=t(43119),g=t(71440),y=t(24635);function Z(){var e=(0,m.Z)(["\n  query ReplResourcesCallToAction($replId: String!) {\n    currentUser {\n      id\n      userSubscriptionType\n    }\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        owner {\n          ... on Team {\n            id\n          }\n          ... on User {\n            id\n          }\n        }\n      }\n    }\n  }\n"]);return Z=function(){return e},e}var b,w={},x=(0,g.Ps)(Z());function k(){var e,n,t,r,i=(0,d.Z)(),o=(0,h.useRouter)(),a=function(e){var n=(0,v.Z)({},w,e);return y.a(x,n)}({variables:{replId:i}}).data;return(0,f.Vg)(o)||"number"===typeof(null===a||void 0===a||null===(e=a.currentUser)||void 0===e?void 0:e.id)&&"Repl"===(null===a||void 0===a?void 0:a.repl.__typename)&&(null===a||void 0===a||null===(n=a.currentUser)||void 0===n?void 0:n.id)!==(null===(t=null===a||void 0===a?void 0:a.repl.owner)||void 0===t?void 0:t.id)||(null===a||void 0===a||null===(r=a.currentUser)||void 0===r?void 0:r.userSubscriptionType)===p.HP.HackerPro?b.Nothing:b.Upgrade}function C(){var e=null;return k()===b.Upgrade&&(e=(0,r.BX)(r.HY,{children:[(0,r.tZ)(o.xv,{children:"Low on resources?"}),(0,r.tZ)(s.Z,{context:"repl_resources_upgrade"})]})),(0,r.BX)(r.HY,{children:[e,(0,r.BX)(o.xv,{color:"dimmer",variant:"small",children:["These resources are for the cloud machine that hosts this Repl."," ",(0,r.tZ)("a",{href:"https://blog.replit.com/repl-resources",target:"_blank",children:"Learn more"})," ","about resource limits."]})]})}!function(e){e.Upgrade="UPGRADE",e.Nothing="NOTHING"}(b||(b={}));var S=t(18171),T=t(84563),E=(t(93658),t(76735)),R=t(91398),I=t(92683);function G(e){var n=e.title,t=e.doWarnAtom,i=e.inactive,c=void 0!==i&&i,u=(0,I.Dv)(t);return(0,r.BX)(a.G,{css:[l.l0.rowWithGap(4),l.l0.align.center],children:[(0,r.tZ)(o.xv,{variant:"small",css:l.l0.color.foregroundDimmer,multiline:!1,children:c?n+" last run":n}),u?(0,r.tZ)(E.Z,{color:l.TV.orangeStronger}):null]})}function D(e){var n=e.title,t=e.totalAtom,i=e.currentAtom,o=e.countAtom,c=e.measure,u=e.limitText,s=e.inactive,d=void 0!==s&&s,f=(0,S.Z)((function(){return(0,R.cn)((function(e){return P(e(i),e(t))}))}),[i,t]),p=(0,S.Z)((function(){return(0,R.cn)((function(e){return u||A(e(f),e(i),e(t),o&&e(o),c)}))}),[u,f,i,t,o,c]),h=(0,S.Z)((function(){return(0,R.cn)((function(e){var n=e(f);return"At limit"===n||"Close to limit"===n}))}),[f]);return(0,r.BX)(a.G,{css:[l.l0.colWithGap(4),l.l0.flex.growAndShrink(2),{flexBasis:32}],children:[n?(0,r.tZ)(G,{title:n,doWarnAtom:h,inactive:d}):null,(0,r.tZ)(_,{currentAtom:i,totalAtom:t,inactive:d,limitTextAtom:p,mini:!0})]})}function _(e){var n=e.currentAtom,t=e.totalAtom,i=e.limitTextAtom,o=e.inactive,a=e.mini,c=(0,I.Dv)(t),u=(0,I.Dv)(n),s=(0,I.Dv)(i),d=function(e){switch(e){case"empty":case"fine":default:return;case"At limit":return l.TV.accentNegativeDefault;case"Close to limit":return l.TV.orangeDefault}}(P(u,c));return(0,r.tZ)(T.J,{css:a&&l.l0.height(8),total:c,current:u,color:d,disabled:o,tooltip:s})}function P(e,n){if(void 0===e)return"empty";var t=e/n;return t>=1?"At limit":t>=.9?"Close to limit":"fine"}function B(e){return Math.round(100*(e+Number.EPSILON))/100}function A(e,n,t,r,i){if("empty"!==e&&void 0!==n)return"vCPU"===i?B(100*Math.min(1,n/t))+"% of "+r+" vCPUs":B(n).toLocaleString()+"/"+B(t).toLocaleString()+" "+i}l.l0.p(8),l.l0.colWithGap(8),"1px solid ".concat(l.TV.backgroundHigher);var U={self:(0,i.iv)([l.l0.overflow("hidden"),l.l0.rowWithGap(12),l.l0.flex.grow(1),l.l0.justify.spaceBetween,l.l0.align.center,l.l0.focusRing,l.l0.cursor.pointer])};function L(e){var n=e.resources,t=e.inactive,i=void 0!==t&&t;return(0,r.tZ)(a.G,{css:U.self,"aria-expanded":!1,children:(0,r.tZ)(u.Z,{mini:!0,inactive:i,resources:n})})}l.l0.overflow("hidden"),l.l0.reset.button,l.l0.rowWithGap(12),l.l0.flex.grow(1),l.l0.justify.spaceBetween,l.l0.align.center,l.l0.focusRing,l.l0.cursor.pointer;var X={self:(0,i.iv)([l.l0.colWithGap(12),l.l0.p(8)]),selfCollapsable:(0,i.iv)([l.l0.colWithGap(12)]),headerCollapsable:(0,i.iv)([l.l0.flex.row,l.l0.justify.spaceBetween])};function N(e){var n=e.inactive,t=void 0!==n&&n,i=(0,c.Z)();return(0,r.BX)(a.G,{css:X.self,children:[(0,r.tZ)(u.Z,{inactive:t,resources:i}),(0,r.tZ)(C,{})]})}},67283:function(e,n,t){t.d(n,{ZP:function(){return ne},al:function(){return Y},L7:function(){return J}});var r=t(57135),i=t(57389),o=t(72006),a=t(4405),l=t(96583),c=t(74985),u=t(50959),s=t(43119),d=t(71440),f=t(24635);function p(){var e=(0,s.Z)(["\n  query WorkspaceRunButton($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        language\n        title\n        rootOriginReplUrl\n        source {\n          release {\n            id\n            repl {\n              id\n              title\n              owner {\n                ... on User {\n                  id\n                  username\n                }\n                ... on Team {\n                  id\n                  username\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    currentUser {\n      id\n    }\n  }\n"]);return p=function(){return e},e}var h={},v=(0,d.Ps)(p());var m=t(625),g=t(48330),y=t(10841),Z=t(39541),b=t(85368),w=t(32104),x=t(61284),k=t(66539),C=t(43312),S=t(4421),T=t(2272),E=t(92683),R=t(56581);function I(){var e=(0,s.Z)(["\n  query CelebrateReplRunCurrentUser {\n    currentUser {\n      id\n      timeCreated\n    }\n  }\n"]);return I=function(){return e},e}var G={},D=(0,d.Ps)(I());var _=t(31410),P=t(88254),B=t(11619),A=new Date("2022-07-08"),U=(0,R.O4)("useCelebrateFirstReplPlay",!1);function L(){var e,n,t=function(e){var n=(0,o.Z)({},G,e);return f.a(D,n)}(),r=(0,B.Z)().preferences.extraDelight,i=(0,_.$0)().fireCircularBurstFrom,a=(0,T.Z)((0,E.KO)(U),2),l=a[0],c=a[1],u=null!==(n=null===(e=t.data)||void 0===e?void 0:e.currentUser)&&void 0!==n?n:null,s=!l&&u&&new Date(u.timeCreated)>=A;return{hasCelebrated:l,celebrate:function(e){e?((r||s)&&i({element:e}),s&&c(!0)):P.Tb(new Error("Cannot find element for celebrate Repl run confetti"))}}}var X,N=t(40735),M=t(65416),F=t(34338),O=t(13233),W=t(29457),H=t(47518),V=t(45353);function z(e){var n=e.runState,t=e.size,r=void 0===t?16:t;switch(n){case y.Ah.IDLE:return(0,c.tZ)(N.Z,{size:r});case y.Ah.RUNNING:return(0,c.tZ)(M.Z,{size:r});default:return(0,c.tZ)(w.Z,{size:r})}}var j,q,$=(X={},(0,i.Z)(X,y.Ah.IDLE,"Run"),(0,i.Z)(X,y.Ah.RUNNING,"Stop"),(0,i.Z)(X,y.Ah.STOPPING,"Stopping"),(0,i.Z)(X,y.Ah.OFFLINE,"Working"),X),Y=(j={small:48,large:100},(0,i.Z)(j,y.Ah.IDLE,68),(0,i.Z)(j,y.Ah.RUNNING,72),(0,i.Z)(j,y.Ah.STOPPING,92),(0,i.Z)(j,y.Ah.OFFLINE,86),j),K=(0,C.iv)([Z.l0.py(12),Z.l0.width(Y.small),Z.l0.flex.row,Z.l0.center,Z.l0.borderRadius(6),Z.l0.backgroundColor.accentPositiveDimmest,Z.l0.color.accentPositiveStrongest,Z.l0.cursor.pointer,Z.l0.focusRing,(q={transition:"color 0.2s ease 0s, background-color 0.2s ease 0s",border:"1px solid",borderColor:"transparent",lineHeight:1,outline:"0 none","&:hover":[{color:"white"},Z.l0.backgroundColor.accentPositiveDefault],"&:active":[{borderColor:Z.TV.accentPositiveStrongest}]},(0,i.Z)(q,(0,F.et)("tabletMax"),[Z.l0.width(Y.large)]),(0,i.Z)(q,":focus-visible",{outlineColor:"".concat(Z.TV.accentPositiveStrongest)}),q)]),Q=(0,C.iv)([Z.l0.color.foregroundDimmer,Z.l0.backgroundColor.backgroundHigher,{borderColor:"transparent","&:hover":[{color:"white"},Z.l0.backgroundColor.backgroundHighest],"&:active":[{borderColor:Z.TV.accentPrimaryDefault}]}]);function J(e){var n=(0,u.useState)(e.getRunState()),t=n[0],r=n[1];return(0,u.useEffect)((function(){return r(e.getRunState()),e.onStateChanged((function(e){r(e)}))}),[e]),t}var ee=u.forwardRef((function(e,n){var t=e.runner,s=e.runConfig,d=e.onRunInitiated,p=e.style,w=void 0===p?"default":p,C=e.disableTooltip,T=e.shortcut,E=(0,g.Z)(),R=J(t),I=function(e){var n=(0,o.Z)({},h,e);return f.a(v,n)}({variables:{id:E}}).data,G="Repl"===(null===I||void 0===I?void 0:I.repl.__typename)?I.repl:null,D=L().celebrate,_=R!==y.Ah.IDLE&&R!==y.Ah.RUNNING,P=(0,O.Z)().showError,B=(0,u.useRef)(null),A=function(){var e=(0,r.Z)((function(){var e,n,r,i,o,a,c,u;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return l.trys.push([0,3,,4]),R!==y.Ah.IDLE?[3,2]:(d&&d(),B.current&&D(B.current),[4,t.run(s)]);case 1:return l.sent(),G&&(0,m.j)(m.U3.PROJECT_RAN,{language:G.language,replId:G.id,replTitle:G.title,rootOriginReplUrl:G.rootOriginReplUrl,templateTitle:null===(e=G.source)||void 0===e||null===(n=e.release)||void 0===n||null===(r=n.repl)||void 0===r?void 0:r.title,templateOwner:null===(i=G.source)||void 0===i||null===(o=i.release)||void 0===o||null===(a=o.repl)||void 0===a||null===(c=a.owner)||void 0===c?void 0:c.username}),[2];case 2:return R===y.Ah.RUNNING?[2,t.stopRun()]:[3,4];case 3:return u=l.sent(),P(u.toString()),W.kg.error("run button error",{errorMessage:u.message}),R===y.Ah.RUNNING?[2,t.stopRun()]:[3,4];case 4:return[2]}}))}));return function(){return e.apply(this,arguments)}}();if("floating"===w)return(0,c.tZ)(b.G,{tag:"button",disabled:_,css:[{position:"fixed",right:24,bottom:72,zIndex:1},Z.l0.center,{height:"50px",width:"50px",opacity:"0.5",cursor:"pointer",borderRadius:"100%",border:"solid 2px var(--accent-positive-dimmer)",backgroundColor:Z.TV.accentPositiveDimmest}],onClick:A,innerRef:B,children:(0,c.tZ)(z,{runState:R})});var U=R===y.Ah.IDLE;return"inline-small"===w?(0,c.BX)("button",{"data-cy":"ws-run-btn",onClick:A,ref:B,disabled:_,css:[Z.l0.p(12),Z.l0.flex.row,Z.l0.center,Z.l0.borderRadius(8),U?Z.l0.backgroundColor.accentPositiveDimmest:Z.l0.backgroundColor.backgroundHigher,U?Z.l0.color.accentPositiveStronger:Z.l0.color.foregroundDimmer,{border:"1px solid",borderColor:U?Z.TV.accentPositiveDimmest:Z.TV.backgroundHigher},Z.l0.width("100%"),Z.l0.height("100%")],children:[(0,c.tZ)(z,{runState:R}),(0,c.tZ)(x.xv,{variant:"subheadDefault",css:[Z.l0.pl(8)],multiline:!1,children:$[R]})]}):(0,c.tZ)(k.u,{placement:"bottom",isDisabled:C||!T,tooltip:T?(0,c.tZ)(b.G,{css:{margin:-4},children:(0,c.tZ)(V.bM,{keyCombo:T,small:!0})}):null,children:function(e,t){return(0,c.BX)("button",(0,a.Z)((0,o.Z)({},e),{onClick:A,ref:(0,H.l)(B,t,n),css:[K,!U&&Q,Z.l0.height(32),(0,i.Z)({transition:"width 80ms ease-out"},(0,F.et)("tabletMax"),Z.l0.width(Y[R]))],children:[(0,c.tZ)(z,{runState:R,size:12}),(0,c.tZ)(x.xv,{multiline:!1,css:[Z.l0.pl(6),Z.l0.display.none,Z.l0.fontWeight.medium,(0,i.Z)({lineHeight:1,overflow:"visible"},"@media (min-width: ".concat(S.j.tabletMax,"px)"),[Z.l0.display.block])],children:$[R]})]}))}})})),ne=ee},57388:function(e,n,t){t.d(n,{Z:function(){return s}});var r=t(72006),i=t(4405),o=t(77637),a=t(74985),l=t(87076),c=t(39541),u=(0,t(82568).X)({checked:[c.l0.width(32),c.l0.height(32),c.l0.backgroundColor.backgroundHigher],unchecked:[c.l0.width(32),c.l0.height(32),c.l0.color.foregroundDimmest]});function s(e){var n=e.alt,t=e.icon,c=e.checked,s=e.onClick,d=(0,o.Z)(e,["alt","icon","checked","onClick"]);return(0,a.tZ)(l.h,(0,i.Z)((0,r.Z)({},d),{css:c?u.checked:u.unchecked,alt:"".concat(c?"Disable":"Enable"," ").concat(n),onClick:s,children:t}))}},10452:function(e,n,t){t.d(n,{Z:function(){return z}});var r=t(2272),i=t(74985),o=t(50959),a=t(25198),l=t(17755),c=t(85368),u=t(39541),s=t(96351),d=t(66539),f=t(61284),p=t(63837),h=t(206),v=t(82893),m=t.n(v),g=t(72006),y=t(3927),Z=t(47900),b=t(66164),w=t(25462),x=t(11619),k=t(43312),C=function(e){return(0,k.iv)({wordBreak:"break-word",boxSizing:"border-box",whiteSpace:"normal",lineHeight:1.5,color:u.TV.foregroundDefault,fontFamily:"".concat(u.TV.fontFamilyDefault," !important"),fontSize:e,textSizeAdjust:"100%","h1, h2, h3, h4, h5, h6":{color:u.TV.foregroundDefault,fontWeight:u.TV.fontWeightMedium,marginBottom:u.TV.space16,lineHeight:1.25,wordWrap:"break-word"},"h1, h2":{paddingBottom:u.TV.space8,borderBottom:"1px solid ".concat(u.TV.backgroundHigher),marginTop:u.TV.space32},h1:{fontSize:"2em"},h2:{fontSize:"1.5em"},h3:{fontSize:"1.25em",marginTop:u.TV.space24},h4:{fontSize:"1em",marginTop:u.TV.space16},h5:{fontSize:"0.875em"},h6:{color:u.TV.foregroundDimmer,fontSize:"0.85em"},".anchor":{float:"left",lineHeight:1,marginLeft:"calc(-1 * ".concat(u.TV.space16,")"),paddingRight:u.TV.space4},".anchor:focus":{outline:"none"},p:{marginBottom:u.TV.space16,fontSize:e,fontFamily:"".concat(u.TV.fontFamilyDefault," !important")},"p:last-child":{marginBottom:0},table:{borderSpacing:0,borderCollapse:"collapse",display:"block",width:"100%",overflow:"auto",marginBottom:u.TV.space16,wordBreak:"normal",th:{fontWeight:u.TV.fontWeightMedium},"td, th":{padding:"".concat(u.TV.space8," ").concat(u.TV.space12),border:"1px solid ".concat(u.TV.backgroundHighest),minWidth:"16ch"},tr:{backgroundColor:u.TV.backgroundDefault,borderTop:"1px solid ".concat(u.TV.backgroundHighest)},"tr:nth-child(2n)":{backgroundColor:u.TV.backgroundRoot}},"hr:after":{clear:"both"},"li > p":{marginBottom:0},li:{marginTop:u.TV.space4},dd:{marginLeft:0},"ol, ul":{paddingLeft:u.TV.space16,marginTop:0,marginBottom:0},ul:{listStyle:"initial",listStyleType:"disc",marginBottom:u.TV.space16},ol:{listStyle:"decimal",marginBottom:u.TV.space16},"ol ol, ol ul, ul ol, ul ul":{paddingLeft:u.TV.space16,marginTop:0,marginBottom:0,paddingBottom:0},"ul ul":{listStyleType:"circle"},"ul ul ul":{listStyleType:"square"},"ol ol, ul ol":{listStyleType:"lower-roman"},"ol ol ol, ol ul ol, ul ol ol, ul ul ol":{listStyleType:"lower-alpha"},pre:{fontFamily:"".concat(u.TV.fontFamilyCode," !important"),margin:"".concat(u.TV.space16," 0"),borderRadius:4,wordBreak:"break-all",wordWrap:"break-word",whiteSpace:"pre-wrap",color:u.TV.foregroundDefault},"pre:last-child":{marginBottom:"0 !important"},blockquote:{padding:"0 1em",marginBottom:u.TV.space16,borderLeft:"".concat(u.TV.space2," solid ").concat(u.TV.backgroundHighest),paddingLeft:u.TV.space16},"blockquote > *":{color:"".concat(u.TV.foregroundDimmer," !important")},"blockquote > :last-child":{marginBottom:"0 !important",borderBottom:"none !important"},"blockquote > :first-child":{marginTop:"0 !important"},kbd:{display:"inline-block",padding:"3px 5px",font:"11px ".concat(u.TV.fontFamilyCode),color:u.TV.foregroundDimmer,verticalAlign:"middle",backgroundColor:u.TV.backgroundHigher,border:"none",borderRadius:3,boxShadow:"inset 0 -1px 0 ".concat(u.TV.backgroundHighest)},a:{color:u.TV.accentPrimaryStronger,backgroundColor:"initial"},"> :first-child":{marginTop:"0 !important",paddingTop:"0 !important"},"> :last-child":{borderBottom:"none !important",marginBottom:"0 !important",paddingBottom:"0 !important"},'[type="checkbox"]':{boxSizing:"border-box",marginRight:u.TV.space8,padding:0},details:{marginBottom:u.TV.space16,display:"block",background:u.TV.backgroundHigher,borderRadius:u.TV.borderRadius4,padding:u.TV.space16},summary:{display:"list-item",userSelect:"none",cursor:"pointer",fontWeight:u.TV.fontWeightBold},"details[open] > summary":{borderBottom:"1px solid ".concat(u.TV.backgroundHighest),marginBottom:u.TV.space16,paddingBottom:u.TV.space16},hr:{height:1,backgroundColor:u.TV.backgroundHigher,margin:"".concat(u.TV.space24," 0"),border:0}})},S=t(71253),T=t(42173),E=t(88167),R=t(34979),I=["a","pre","code","em","strong","p","ul","ol","li","img","del","h1","h2","h3","h4","h5","h6","sup","sub","br","hr","blockquote","span","div"];function G(e){var n=e.content,t=(0,x.Z)().preferences.fontSize,r=o.useCallback((function(e){return(0,i.tZ)(R.Z,(0,g.Z)({},e))}),[]);return(0,i.tZ)("div",{css:[{"& ol":{paddingInlineStart:"20px"},"& ul":{paddingInlineStart:"20px",listStyle:"initial"}}],children:(0,i.tZ)(y.D,{css:C(t),allowedElements:I,remarkPlugins:[Z.Ic,b.Z,w.Z,S.Z],linkTarget:"_blank",rehypePlugins:[T.Z],components:{code:r,img:E.Z},children:n})})}var D=(0,o.memo)(G),_=t(99397),P=t(79637),B=t(54873),A=t(43119),U=t(71440),L=t(91015),X=t(50216);function N(){var e=(0,A.Z)(["\n  mutation DeleteThreadMessage($id: String!) {\n    deleteThreadMessage(messageId: $id) {\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return N=function(){return e},e}var M={},F=(0,U.Ps)(N(),L.j7);var O=t(57370),W=t(13233),H=t(88541),V=function(e){var n=e.thread,t=e.message,v=(0,O.d)(),y=(0,W.Z)().showError,Z=(0,r.Z)(function(e){var n=(0,g.Z)({},M,e);return X.D(F,n)}({onError:function(e){y(e.message)},onCompleted:function(e){var n;"UserError"===(null===(n=e.deleteThreadMessage)||void 0===n?void 0:n.__typename)&&y(e.deleteThreadMessage.message)}}),2),b=Z[0],w=Z[1].loading,x=(0,H.P5)({controlName:"flag-threads-dropdown-menu",default:!1,type:"boolean",logFlagToAnalytics:!1}),k=!(!n||n.indexStart!==n.indexEnd),C={resolved:"Thread resolved. Re-open it any time in the inbox.",unresolved:"Thread re-opened"},S="Outdated",T="The code has changed since the comment was left",E=o.useMemo((function(){return{diff:(0,h.Y)(t.timeCreated),full:(0,h.u)(t.timeCreated)}}),[t]);if(!t.user)return null;var R=v===t.user.id?[{label:"Delete",icon:(0,i.tZ)(B.Z,{}),isDestructive:!0}]:[];return(0,i.BX)(c.G,{children:[(0,i.BX)(c.G,{css:[u.l0.flex.row,u.l0.justify.spaceBetween,u.l0.pb(4)],children:[(0,i.BX)(c.G,{css:[u.l0.flex.row,u.l0.align.center,u.l0.rowWithGap(8)],children:[(0,i.tZ)(m(),{passHref:!0,href:"/@".concat(t.user.username),children:(0,i.tZ)("a",{children:(0,i.tZ)(l.n,{small:!0,src:t.user.image,username:t.user.username})})}),(0,i.tZ)("p",{children:(0,i.tZ)(d.u,{tooltip:E.full,placement:"top",children:(0,i.tZ)(f.xv,{variant:"small",color:"dimmer",multiline:!1,children:E.diff})})}),R.length>0&&x?(0,i.tZ)(P.Z,{items:R,onItemClick:function(e){"Delete"!==e.label||w||b({variables:{id:t.id}})},label:"More"}):null]}),k?(0,i.tZ)(d.u,{tooltip:T,children:(0,i.tZ)(s.D,{colorway:"negative",text:S})}):null]}),"StatusMessageContentType"===t.content.__typename&&"resolved"===t.content.status?(0,i.tZ)(a.E,{colorway:"positive",icon:(0,i.tZ)(p.Z,{}),text:C.resolved}):null,"StatusMessageContentType"===t.content.__typename&&"unresolved"===t.content.status?(0,i.tZ)(a.E,{colorway:"primary",icon:(0,i.tZ)(_.Z,{}),text:C.unresolved}):null,"TextMessageContentType"===t.content.__typename&&(0,i.tZ)(D,{content:t.content.text})]})},z=(0,o.memo)(V)},206:function(e,n,t){t.d(n,{Y:function(){return o},u:function(){return a}});var r=t(22107),i=t(52224),o=function(e){var n=new Date(e),t=new Date;return(0,i.Z)(t,n)<60?"just now":(0,r.F)(n,!0)+" ago"},a=function(e){return new Date(e).toLocaleString()}},71603:function(e,n,t){t.d(n,{Z:function(){return ge}});var r=t(2272),i=t(74985),o=t(50959),a=t(54629),l=t(19065),c=t(8622),u=t(48330),s=t(32104),d=t(72006),f=t(4405),p=t(70751),h=t(33814),v=t(66482),m=t(2041),g=t(85368),y=t(39541),Z=t(61284),b=t(45510),w=t(86302),x=t(13233),k=t(54631),C=t(99397),S=t(48306),T=t.n(S),E=t(69994),R=t(14806),I=t(34227),G=t(64804),D=R.q6.define();function _(e){var n=e.editorRef,t=e.onChange,r=e.placeholder,a=e.skeleton,l=e.language,c=e.skeletonClosingBracket,u=e.indentSize,s=void 0===u?2:u,d=(0,G.Z)(),f=d.ref,p=d.view,h=o.useRef(a?"".concat(a,"\n"):""),v=c?"\n".concat(c):"",m=" ".repeat(s);return o.useEffect((function(){if(p&&p.state.doc.length){var e=h.current;h.current=a?"".concat(a,"\n"):"",p.dispatch({changes:{from:0,to:e.length-1,insert:a},annotations:[R.YW.addToHistory.of(!1),D.of(!0)]})}}),[p,a]),o.useEffect((function(){if(p){var e=R.yy.changeFilter.of((function(e){return!!e.annotation(D)||[-1,h.current.length,e.startState.doc.length-v.length,e.startState.doc.length+1]})),i=E.tk.updateListener.of((function(e){var n=e.state.doc.slice(h.current.length,e.state.doc.toString().length-v.length).toString();if(n!=="".concat(m).concat(r,"\n").concat(m)?t(n):t(""),e.docChanged&&e.state.doc.length===h.current.length+v.length){var i="\n"+m;p.dispatch({changes:{from:h.current.length-1,insert:"\n"+m},selection:{anchor:h.current.length+i.length-1},annotations:[D.of(!0)]})}})),o="".concat(h.current).concat(m).concat(r,"\n").concat(v);p.dispatch({changes:{from:0,to:p.state.doc.length,insert:o},effects:R.Py.appendConfig.of([e,i]),selection:{anchor:o.length},annotations:R.YW.addToHistory.of(!1)}),n({setValue:function(e){if(e){var n=p.state.doc.toString().length;p.dispatch({changes:{from:h.current.length,to:n-v.length,insert:e},annotations:R.YW.addToHistory.of(!1)})}},focus:function(){return p.focus()}})}}),[t,l,p,v,n,r,m]),(0,i.BX)("div",{className:"jsx-c0a72647b9c20ef editor",children:[(0,i.tZ)(I.Z,{ref:f,language:l,indentSize:2,fontSize:14,indentIsSpaces:!0}),(0,i.tZ)(T(),{id:"c0a72647b9c20ef",children:".editor.jsx-c0a72647b9c20ef{overflow:auto;position:absolute;width:100%;height:100%}.loader.jsx-c0a72647b9c20ef{height:100%;width:100%;z-index:5}"})]})}var P=t(625),B=t(63837);function A(e){var n,t,a,l,c=e.isOpen,s=e.meta,h=e.language,w=e.hasMetadata,C=e.onClose,S=(0,u.Z)(),T=(0,x.Z)().showConfirm,E=(0,r.Z)(o.useState(null),2),R=E[0],I=E[1],G=(0,r.Z)(o.useState(!0),2),D=G[0],_=G[1],A=(0,r.Z)(o.useState((null===s||void 0===s?void 0:s.initialization)||""),2),M=A[0],F=A[1],O=(0,r.Z)(o.useState((null===s||void 0===s?void 0:s.imports)||""),2),W=O[0],H=O[1],V=(0,r.Z)(o.useState((null===s||void 0===s?void 0:s.setup)||""),2),z=V[0],j=V[1],q=(0,r.Z)(o.useState((null===s||void 0===s?void 0:s.tearDown)||""),2),$=q[0],Y=q[1],K=(0,r.Z)((0,p.rU)({onError:function(e){return I(e.message)},update:function(e,n){var t,r=null===(t=n.data)||void 0===t?void 0:t.createReplUnitTestMeta;r&&("UserError"===r.__typename?I(r.message):"ReplUnitTestMeta"===r.__typename&&(e.modify({id:e.identify({__typename:"Repl",id:S}),fields:{unitTests:function(n){var t=e.writeFragment({data:r,fragment:p.aA});return n?(0,f.Z)((0,d.Z)({},n),{meta:(0,d.Z)({},t)}):{__typename:"ReplUnitTestsWithMeta",meta:t,tests:[]}}}}),T("Setup saved!"),C()))}}),2),Q=K[0],J=K[1],ee=(0,r.Z)((0,p.AF)({onError:function(e){return I(e.message)},onCompleted:function(e){var n=e.updateReplUnitTestMeta;n&&("UserError"===n.__typename?I(n.message):"ReplUnitTestMeta"===n.__typename&&(T("Imports updated!"),C()))}}),2),ne=ee[0],te=ee[1],re=(0,k.x)(h),ie=W!==(null===s||void 0===s?void 0:s.imports)||M!==(null===s||void 0===s?void 0:s.initialization)||z!==(null===s||void 0===s?void 0:s.setup)||$!==(null===s||void 0===s?void 0:s.tearDown),oe=J.loading||te.loading;return(0,i.tZ)(m.u,{isOpen:c,onRequestClose:C,maxWidth:872,children:(0,i.BX)(g.G,{css:[y.l0.colWithGap(24)],children:[(0,i.tZ)(Z.h4,{level:1,variant:"headerDefault",children:"Setup"}),(0,i.tZ)(U,{unitTestsLib:re,onChange:H,language:h,initialValue:null!==(n=null===s||void 0===s?void 0:s.imports)&&void 0!==n?n:""}),(0,i.tZ)(g.G,{onClick:function(){return _(!D)},css:{cursor:"pointer"},children:(0,i.BX)(g.G,{css:[y.l0.rowWithGap(8),y.l0.align.center],children:[(0,i.tZ)(Z.h4,{level:2,variant:"headerDefault",children:"Advanced"}),(0,i.tZ)(v.Z,{color:"var(--foreground-default)",size:20,rotate:D?270:0})]})}),D?null:(0,i.BX)(g.G,{css:[y.l0.colWithGap(8)],children:[(0,i.tZ)(L,{unitTestsLib:re,onChange:F,language:h,initialValue:null!==(t=null===s||void 0===s?void 0:s.initialization)&&void 0!==t?t:""}),(0,i.tZ)(X,{unitTestsLib:re,onChange:j,language:h,initialValue:null!==(a=null===s||void 0===s?void 0:s.setup)&&void 0!==a?a:""}),(0,i.tZ)(N,{unitTestsLib:re,onChange:Y,language:h,initialValue:null!==(l=null===s||void 0===s?void 0:s.tearDown)&&void 0!==l?l:""})]}),(0,i.BX)(g.G,{css:[y.l0.flex.row,y.l0.justify.spaceBetween],children:[(0,i.tZ)(Z.xv,{css:[y.l0.color.accentNegativeStronger],children:R}),(0,i.BX)(g.G,{css:[y.l0.rowWithGap(12)],children:[(0,i.tZ)(b.zx,{disabled:oe,onClick:C,text:"Cancel"}),(0,i.tZ)(b.zx,{colorway:"primary",disabled:!ie||oe,onClick:function(){(0,P.j)(P.U3.REPL_UNIT_TEST_USED,{action:"modifiedSetup"}),w?ne({variables:{input:{initialization:M,imports:W,setup:z,tearDown:$,replId:S}}}):Q({variables:{input:{initialization:M,imports:W,setup:z,tearDown:$,replId:S}}})},iconLeft:(0,i.tZ)(B.Z,{}),text:"".concat(oe?"Saving...":"Save")})]})]})]})})}function U(e){var n=e.unitTestsLib,t=e.onChange,a=e.language,l=e.initialValue,c=(0,r.Z)(o.useState(null),2),u=c[0],s=c[1];o.useEffect((function(){u&&(u.setValue(l),u.focus())}),[u,l]);var d=n.defaultImports().trim();return(0,i.BX)(g.G,{css:[y.l0.colWithGap(8)],children:[(0,i.BX)(g.G,{css:[y.l0.flex.row,y.l0.justify.spaceBetween,y.l0.align.center],children:[(0,i.tZ)(Z.h4,{level:2,variant:"subheadDefault",children:"Imports"}),(0,i.tZ)(w.Z,{iconLeft:(0,i.tZ)(C.Z,{}),text:"Docs",href:"https://docs.replit.com/teams-edu/unit-testing",target:"_blank",outlined:!0})]}),(0,i.tZ)(g.G,{css:[y.l0.backgroundColor.backgroundDefault,y.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,i.tZ)(g.G,{css:[y.l0.borderRadius(8),y.l0.height(200),y.l0.position.relative],children:(0,i.tZ)(_,{onChange:t,placeholder:"".concat(n.getCommentChar()," Add imports here"),editorRef:s,language:a,skeleton:d,skeletonClosingBracket:"",indentSize:0})})})]})}function L(e){var n=e.unitTestsLib,t=e.onChange,a=e.language,l=e.initialValue,c=(0,r.Z)(o.useState(null),2),u=c[0],s=c[1];o.useEffect((function(){u&&u.setValue(l)}),[u,l]);var d=n.classConstructorName();return(0,i.BX)(g.G,{css:[y.l0.colWithGap(8)],children:[(0,i.BX)(g.G,{css:[y.l0.flex.row,y.l0.justify.spaceBetween,y.l0.align.center],children:[(0,i.tZ)(Z.h4,{level:2,variant:"subheadDefault",children:"Initialization"}),(0,i.tZ)(w.Z,{iconLeft:(0,i.tZ)(C.Z,{}),text:"Docs",href:"https://docs.replit.com/teams-edu/unit-testing",target:"_blank",outlined:!0})]}),d?(0,i.BX)(Z.xv,{children:["Hint: constructor name is ",(0,i.tZ)("code",{children:d}),"."]}):null,(0,i.tZ)(g.G,{css:[y.l0.backgroundColor.backgroundDefault,y.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,i.tZ)(g.G,{css:[y.l0.borderRadius(8),y.l0.height(200),y.l0.position.relative],children:(0,i.tZ)(_,{onChange:t,placeholder:"".concat(n.getCommentChar()," Add initialization code here"),editorRef:s,language:a,skeleton:"",skeletonClosingBracket:"",indentSize:0})})})]})}function X(e){var n=e.unitTestsLib,t=e.onChange,a=e.language,l=e.initialValue,c=(0,r.Z)(o.useState(null),2),u=c[0],s=c[1];o.useEffect((function(){u&&u.setValue(l)}),[u,l]);var d=n.setupIntro().trim();return(0,i.BX)(g.G,{css:[y.l0.colWithGap(8)],children:[(0,i.BX)(g.G,{css:[y.l0.flex.row,y.l0.justify.spaceBetween,y.l0.align.center],children:[(0,i.tZ)(Z.h4,{level:2,variant:"subheadDefault",children:"Setup"}),(0,i.tZ)(w.Z,{iconLeft:(0,i.tZ)(C.Z,{}),text:"Docs",href:"https://docs.replit.com/teams-edu/unit-testing",target:"_blank",outlined:!0})]}),(0,i.tZ)(g.G,{css:[y.l0.backgroundColor.backgroundDefault,y.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,i.tZ)(g.G,{css:[y.l0.borderRadius(8),y.l0.height(200),y.l0.position.relative],children:(0,i.tZ)(_,{onChange:t,placeholder:"".concat(n.getCommentChar()," Add setup code here"),editorRef:s,language:a,skeleton:d,skeletonClosingBracket:n.hasClosingBrackets()?n.getClosingBrackets():""})})})]})}function N(e){var n=e.unitTestsLib,t=e.onChange,a=e.language,l=e.initialValue,c=(0,r.Z)(o.useState(null),2),u=c[0],s=c[1];o.useEffect((function(){u&&u.setValue(l)}),[u,l]);var d=n.tearDownIntro().trim();return(0,i.BX)(g.G,{css:[y.l0.colWithGap(8)],children:[(0,i.BX)(g.G,{css:[y.l0.flex.row,y.l0.justify.spaceBetween,y.l0.align.center],children:[(0,i.tZ)(Z.h4,{level:2,variant:"subheadDefault",children:"Teardown"}),(0,i.tZ)(w.Z,{iconLeft:(0,i.tZ)(C.Z,{}),text:"Docs",href:"https://docs.replit.com/teams-edu/unit-testing",target:"_blank",outlined:!0})]}),(0,i.tZ)(g.G,{css:[y.l0.backgroundColor.backgroundDefault,y.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,i.tZ)(g.G,{css:[y.l0.borderRadius(8),y.l0.height(200),y.l0.position.relative],children:(0,i.tZ)(_,{onChange:t,placeholder:"".concat(n.getCommentChar()," Add teardown code here"),editorRef:s,language:a,skeleton:d,skeletonClosingBracket:n.hasClosingBrackets()?n.getClosingBrackets():""})})})]})}var M=function(e){var n=e.language,t=e.meta,a=(0,r.Z)(o.useState(!1),2),l=a[0],c=a[1];return(0,i.BX)(i.HY,{children:[(0,i.tZ)(b.zx,{iconLeft:(0,i.tZ)(h.Z,{}),onClick:function(){return c(!0)},text:"Setup"}),(0,i.tZ)(A,{language:n,isOpen:l,onClose:function(){return c(!1)},hasMetadata:Boolean(null===t||void 0===t?void 0:t.id),meta:t})]})},F=t(9970),O=t(51631),W=t(1809),H=t(1050),V=t(54873),z=t(80336),j=t(88477),q=t(39137),$=t(87076),Y=t(17309),K=t(12318),Q=t(57135),J=t(96583),ee=t(66016),ne=t(45285),te=t(1468),re=t(40842),ie="\x1b[0;31m",oe="\x1b[0m",ae=["\u28fe","\u28fd","\u28fb","\u28bf","\u287f","\u28df","\u28ef","\u28f7","\u2801","\u2802","\u2804","\u2840","\u2880","\u2820","\u2810","\u2808"];function le(e){var n=e.name,t=e.failureMessage,r=e.stack;return"\u274c\t".concat(ie).concat(n).concat(oe,"\r").concat(t?"\nMessage: ".concat(t,"\r"):"","\nStack Trace:\r\n").concat(r.replace(/\n/g,"\r\n"),"\n\r\n\r\n")}var ce=function(e){var n=e.language,t=e.unitTests,a=e.onResult,l=e.trackingContext,c=e.getRunnerOutput,u=function(e){var n,t;null===(n=c())||void 0===n||null===(t=n.write)||void 0===t||t.call(n,e)},s=function(){var e,n;null===(e=c())||void 0===e||null===(n=e.clear)||void 0===n||n.call(e),u("\r\n")},f=(0,r.Z)(o.useState(!1),2),p=f[0],h=f[1],v=(0,ne.Z)(),m=v.container,y=v.packager,Z=v.fs,w=null,x=function(){h(!1),(0,re.WT)(Z),w&&(w.stopLogSpinner(),w=null)},C=function(){var e=(0,Q.Z)((function(){var e,r,i,o,c,f,v,g,b,C,S,T,E,R,I,G,D,_,B,A,U,L;return(0,J.__generator)(this,(function(X){switch(X.label){case 0:if(p)return[2];if(e=null,w={startLogSpinner:function(n){if(e)throw new Error("A spinner is already active! call stopSpinner first or use the update callback to update the active spinner's message.");var t=n,r=0;return e=setInterval((function(){r++;var e=ae[r%ae.length];if(!w)throw new Error("Expected logger");w.clearLine(),w.logMessage(e+" "+t)}),100),function(e){t=e}},stopLogSpinner:function(){e&&clearInterval(e),e=null},logMessage:u,clearLogs:s,clearLine:function(){if(!w)throw new Error("Expected logger");w.logMessage("\x1b[1K\r")}},!t)throw new Error("Run button should not be active if there are no tests");return h(!0),(0,P.j)(P.U3.REPL_UNIT_TEST_USED,{trackingData:{context:l},action:"ranTests"}),w.clearLogs(),[4,(r=(0,k.x)(n)).buildAndRunTests((0,d.Z)({container:m,fs:Z,packager:y,logger:w},t))];case 1:if(i=X.sent(),w.stopLogSpinner(),w.clearLine(),w.clearLogs(),null!==i.error)return w.logMessage("".concat(ie).concat(i.error).concat(oe,"\r\n")),x(),t.tests.map((function(e){return{testId:e.id,didPass:!1}})),[2];if(o=i.result.passed?[]:i.result.failures.map((function(e){return r.parseTestResultName(e.name)})),c=[],f=t.tests.map((function(e){return r.getProperTestName(e.name)})),v=o.filter((function(e){return!f.includes(e)})),v.length)b=v[0],C=i.result.failures[0].stack,w.logMessage(le({name:b,failureMessage:"The following error occurred but was not related to a single unit test",stack:C})),(g=c).push.apply(g,(0,F.Z)(t.tests.map((function(e){return{testId:e.id,didPass:!1}}))));else{S=!0,T=!1,E=void 0;try{for(R=t.tests[Symbol.iterator]();!(S=(I=R.next()).done);S=!0)G=I.value,D=r.getProperTestName(G.name),_=o.indexOf(D),B=-1===_,c.push({testId:G.id,didPass:B}),B?w.logMessage((N=D,"\u2705\t".concat("\x1b[0;32m").concat(N).concat(oe,"\r\n\r\n"))):(A=i.result.failures[_].stack,w.logMessage(le({name:D,failureMessage:G.failureMessage,stack:A})))}catch(M){T=!0,E=M}finally{try{S||null==R.return||R.return()}finally{if(T)throw E}}}return a(c),U=t.tests.length,i.result.passed?(w.logMessage("".concat("\x1b[48;5;22m","  All tests have passed ").concat(U,"/").concat(U,"  ").concat(oe,"\r\n")),x(),[2]):(L=U-i.result.failures.length,w.logMessage("".concat("\x1b[48;5;88m","  ").concat(L,"/").concat(U," passed, see errors above  ").concat(oe)),x(),[2])}var N}))}));return function(){return e.apply(this,arguments)}}(),S=function(){var e=(0,Q.Z)((function(){return(0,J.__generator)(this,(function(e){try{C()}catch(n){te.c_.withScope((function(e){e.setTag("unittestsrun","true"),te.c_.captureException(n)})),w&&w.logMessage("\r\n".concat(ie," Sorry, we have failed to run your tests. Please try again or contact support. ").concat(oe,"\r\n")),x()}return[2]}))}));return function(){return e.apply(this,arguments)}}();return Boolean(t&&t.tests.length>0)?(0,i.tZ)(g.G,{children:(0,i.tZ)(b.zx,{disabled:p,colorway:"primary",iconLeft:(0,i.tZ)(ee.Z,{}),onClick:S,text:p?"Running tests...":"Run tests"})}):null},ue=t(1734);function se(e){var n=e.isOpen,t=e.test,a=e.language,l=e.onClose,s=e.trackingContext,h=(0,u.Z)(),v=(0,x.Z)().showConfirm,C=(0,r.Z)(o.useState(null),2),S=C[0],T=C[1],E=(0,r.Z)(o.useState(""),2),R=E[0],I=E[1],G=(0,r.Z)(o.useState(""),2),D=G[0],A=G[1],U=(0,r.Z)(o.useState(""),2),L=U[0],X=U[1],N=(0,r.Z)((0,p.Hd)({onError:function(e){return X(e.message)},update:function(e,n){var t,r=null===(t=n.data)||void 0===t?void 0:t.createReplUnitTest;r&&("UserError"===r.__typename?X(r.message):"ReplUnitTest"===r.__typename&&(e.modify({id:e.identify({__typename:"Repl",id:h}),fields:{unitTests:function(n){var t=e.writeFragment({data:r,fragment:p.Rb});return n?(0,f.Z)((0,d.Z)({},n),{tests:(0,F.Z)(n.tests).concat([t])}):{__typename:"ReplUnitTestsWithMeta",meta:null,tests:[t]}}}}),v("Test created!"),l()))}}),2),M=N[0],O=N[1],H=(0,r.Z)((0,p.kO)({onError:function(e){return X(e.message)},onCompleted:function(e){var n=e.updateReplUnitTest;n&&("UserError"===n.__typename?X(n.message):"ReplUnitTest"===n.__typename&&(v("Test updated!"),l()))}}),2),V=H[0],$=H[1],Q=(0,K.Y)("",(function(e){return e.length<=0?{message:"Must include test name"}:e.trim().split(" ").length>1?{message:"Test name must only be one word"}:void 0}));o.useEffect((function(){Q.setValue((null===t||void 0===t?void 0:t.name)||"",{preventTouch:!0}),A((null===t||void 0===t?void 0:t.failureMessage)||""),I((null===t||void 0===t?void 0:t.code)||""),S&&S.setValue((null===t||void 0===t?void 0:t.code)||"")}),[t,S]),o.useEffect((function(){X("")}),[R,X]);var J=(0,k.x)(a),ee="".concat(J.getCommentChar()," Enter code here"),ne=!t||t.name!==Q.value||t.code!==R||t.failureMessage!==D,te=O.loading||$.loading,re=J.testIntro(Q.value||""),ie=J.hasClosingBrackets()?J.getClosingBrackets():"",oe=(0,r.Z)(o.useState(!1),2),ae=oe[0],le=oe[1],ce=function(){S&&(S.setValue("  "+J.exampleTest.code),S.focus()),I(J.exampleTest.code)};return(0,i.tZ)(m.u,{isOpen:n,onRequestClose:l,maxWidth:872,children:(0,i.BX)(g.G,{css:[y.l0.colWithGap(24)],children:[(0,i.tZ)(Z.h4,{level:1,variant:"headerDefault",children:"New unit test"}),(0,i.BX)(g.G,{css:[y.l0.colWithGap(8)],children:[(0,i.tZ)("label",{htmlFor:"name",children:(0,i.tZ)(Z.h4,{level:2,variant:"subheadDefault",children:"Name"})}),(0,i.tZ)(Y.Z,{id:"name",label:"Test name",status:null,autoFocus:!0,required:!0,value:Q.value,isValid:Q.isValid,error:Q.error,warning:Q.warning,touched:Q.touched,onChange:function(e){Q.setValue(e.target.value)},placeholder:"Enter test name here"})]}),(0,i.BX)(g.G,{css:[y.l0.colWithGap(8)],children:[(0,i.BX)(g.G,{css:[y.l0.flex.row,y.l0.align.center,y.l0.justify.spaceBetween],children:[(0,i.tZ)(Z.h4,{level:2,variant:"subheadDefault",children:"Code"}),(0,i.BX)(g.G,{css:[y.l0.rowWithGap(4)],children:[(0,i.BX)(ue.Z,{isOpen:ae,onClickOutside:function(){return le(!1)},placement:"bottom-end",children:[(0,i.tZ)(b.zx,{iconLeft:(0,i.tZ)(W.Z,{}),small:!0,outlined:!0,text:"View an example",onClick:function(){[ee,J.exampleTest.code].includes(R.trim())?ce():le(!0)}}),(0,i.BX)(g.G,{children:["This will overwrite your current test. Are you sure?",(0,i.BX)(g.G,{css:[y.l0.rowWithGap(4),y.l0.pt(8)],children:[" ",(0,i.tZ)(b.zx,{text:"No, go back",small:!0,iconLeft:(0,i.tZ)(z.Z,{}),onClick:function(){le(!1)}}),(0,i.tZ)(b.zx,{text:"Yes, delete test",colorway:"negative",small:!0,iconLeft:(0,i.tZ)(B.Z,{}),onClick:function(){ce(),le(!1)}})]})]})]}),(0,i.tZ)(w.Z,{iconLeft:(0,i.tZ)(j.Z,{}),small:!0,outlined:!0,text:"View docs",target:"_blank",href:"https://docs.replit.com/teams-edu/unit-testing"})]})]}),(0,i.tZ)(g.G,{css:[y.l0.backgroundColor.backgroundDefault,y.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,i.tZ)(g.G,{css:[y.l0.borderRadius(8),y.l0.height(200),y.l0.position.relative],children:(0,i.tZ)(_,{skeleton:re,skeletonClosingBracket:ie,language:a,editorRef:T,onChange:I,placeholder:ee})})})]}),(0,i.BX)(g.G,{css:[y.l0.colWithGap(8)],children:[(0,i.tZ)(Z.h4,{level:2,variant:"subheadDefault",children:"Failure message"}),(0,i.tZ)(q.II,{value:D,onChange:function(e){return A(e.target.value)},placeholder:"This will be displayed on test failure"})]}),(0,i.BX)(g.G,{css:[y.l0.flex.row,y.l0.align.center,y.l0.justify.spaceBetween],children:[(0,i.tZ)(Z.xv,{css:[y.l0.color.accentNegativeStronger],multiline:!1,children:L}),(0,i.BX)(g.G,{css:[y.l0.rowWithGap(12)],children:[(0,i.tZ)(b.zx,{text:"Cancel",onClick:l}),(0,i.tZ)(b.zx,{text:"".concat(te?"Creating test...":"Create test"),iconLeft:(0,i.tZ)(c.Z,{}),colorway:"primary",disabled:!ne||te,onClick:function(){Q.validate()||(R.length<=0?X("Test cannot be empty"):t?(V({variables:{input:{name:Q.value,code:R,failureMessage:D,testId:t.id}}}),(0,P.j)(P.U3.REPL_UNIT_TEST_USED,{trackingData:{context:s},action:"modifiedTest"})):(M({variables:{input:{name:Q.value,code:R,failureMessage:D,replId:h}}}),(0,P.j)(P.U3.REPL_UNIT_TEST_USED,{trackingData:{context:s},action:"addedTest"})))}})]})]})]})})}function de(e){var n=e.testId,t=e.onClose,a=(0,x.Z)().showConfirm,l=(0,u.Z)(),c=(0,r.Z)((0,p.IV)({onError:function(e){return k(e.message)},update:function(e,r){var i,o=null===(i=r.data)||void 0===i?void 0:i.deleteReplUnitTest;o&&("UserError"===o.__typename?k(o.message):"ReplUnitTest"===o.__typename&&n&&(e.modify({id:e.identify({__typename:"Repl",id:l}),fields:{unitTests:function(e,t){var r=t.readField,i=e.tests.filter((function(e){return r("id",e)!==n}));return(0,f.Z)((0,d.Z)({},e),{tests:(0,F.Z)(i)})}}}),(0,P.j)(P.U3.REPL_UNIT_TEST_USED,{action:"removedTest"}),a("Test deleted!"),t()))}}),2),s=c[0],h=c[1],v=(0,r.Z)(o.useState(""),2),w=v[0],k=v[1];return(0,i.tZ)(m.u,{isOpen:Boolean(n),onRequestClose:t,children:(0,i.BX)(g.G,{css:[y.l0.colWithGap(24)],children:[(0,i.tZ)(Z.h4,{level:1,variant:"headerDefault",children:"Delete test?"}),(0,i.tZ)(Z.xv,{children:"Are you sure you want to delete this test? This cannot be undone."}),(0,i.BX)(g.G,{css:[y.l0.flex.row,y.l0.justify.spaceBetween,y.l0.align.center],children:[(0,i.tZ)(Z.xv,{css:[y.l0.color.accentNegativeStronger],children:w}),(0,i.BX)(g.G,{css:[y.l0.rowWithGap(12),y.l0.justify.end],children:[(0,i.tZ)(b.zx,{text:"Cancel",disabled:h.loading,onClick:t}),(0,i.tZ)(b.zx,{text:"Yes, delete this test",colorway:"negative",iconLeft:(0,i.tZ)(V.Z,{}),disabled:h.loading,onClick:function(){if(!n)throw new Error("Expected a testId");s({variables:{testId:n}})}})]})]})]})})}var fe=function(e){var n=e.unitTests,t=e.isAddingTest,a=e.onClose,l=e.language,s=e.canWrite,d=e.trackingContext,f=void 0===d?"default":d,h=e.getRunnerOutput,v=(0,r.Z)(o.useState(t),2),m=v[0],w=v[1],x=(0,r.Z)(o.useState(null),2),k=x[0],C=x[1],S=(0,r.Z)(o.useState(null),2),E=S[0],R=S[1],I=(0,u.Z)(),G=(0,r.Z)((0,p.lQ)(),1)[0],D=(null===n||void 0===n?void 0:n.tests)||[];return(0,i.BX)(g.G,{css:[y.l0.colWithGap(16)],children:[(0,i.tZ)(ce,{language:l,unitTests:n,onResult:function(e){G({variables:{input:{replId:I,results:e},replId:I}})},getRunnerOutput:h,trackingContext:f}),D.length>0?(0,i.tZ)(g.G,{css:[y.l0.colWithGap(8),y.l0.align.center],children:D.map((function(e){var n,t;return"ReplUnitTestLastRun"===(null===(n=e.lastRun)||void 0===n?void 0:n.__typename)&&(e.lastRun.status===O.$I.Passed?t="passed-test":e.lastRun.status===O.$I.Failed&&(t="failed-test")),(0,i.tZ)(g.G,{className:"test ".concat(t),css:{width:"100%"},children:(0,i.BX)(g.G,{css:[y.l0.flex.row,y.l0.justify.spaceBetween,y.l0.align.center,y.l0.p(8),y.l0.borderRadius(8),{border:"1px solid var(--background-highest);"}],children:[(0,i.tZ)(Z.xv,{multiline:!1,children:e.name}),s?(0,i.BX)(g.G,{css:[y.l0.rowWithGap(8)],children:[(0,i.tZ)($.h,{onClick:function(){C(e)},alt:"Edit",children:(0,i.tZ)(H.Z,{})}),(0,i.tZ)($.h,{onClick:function(){R(e.id)},alt:"Delete",children:(0,i.tZ)(V.Z,{})})]}):null]})},e.id)}))}):(0,i.BX)(g.G,{css:[y.l0.colWithGap(8),y.l0.align.center],children:[(0,i.tZ)(Z.xv,{css:[y.l0.textAlign.center],children:"Looks like you don\u2019t have any tests yet!"}),s?(0,i.tZ)(b.zx,{text:"Add test",onClick:function(){return w(!0)},iconLeft:(0,i.tZ)(c.Z,{})}):null]}),(0,i.tZ)(se,{isOpen:m||Boolean(k)||t,test:k,language:l,onClose:function(){C(null),w(!1),a&&a()},trackingContext:f}),(0,i.tZ)(de,{testId:E,onClose:function(){return R(null)}}),(0,i.tZ)(T(),{id:"a2df1ed8108a6cad",children:".tests-wrapper.jsx-a2df1ed8108a6cad{-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:var(--space-16)0;width:100%}.test.jsx-a2df1ed8108a6cad{padding:var(--space-8)var(--space-8);border:1px solid var(--outline-dimmest);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4)}.passed-test.jsx-a2df1ed8108a6cad{border-color:var(--accent-positive-default);background:var(--accent-positive-dimmer)}.failed-test.jsx-a2df1ed8108a6cad{border-color:var(--accent-negative-default);background:var(--accent-negative-dimmer)}"})]})},pe=t(27522),he=t(48667);var ve=function(e){var n=e.onClick,t=e.hasTests,r=t?{"aria-label":"Delete all tests to switch test type","data-microtip-position":"bottom","data-microtip-size":"medium",role:"tooltip"}:{};return(0,i.BX)("div",(0,f.Z)((0,d.Z)({},r),{className:"jsx-44786ca38dd3aa42 "+(r&&null!=r.className&&r.className||"back-button"),children:[(0,i.tZ)(pe.Z,{filled:!1,border:!1,size:"small",Icon:he.Z,onClick:n,disabled:t,children:"Switch test type"}),(0,i.tZ)(T(),{id:"44786ca38dd3aa42",children:".back-button.jsx-44786ca38dd3aa42{width:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}"})]}))},me=t(72196);var ge=function(e){var n,t,d,f,p=e.onBack,h=e.getRunnerOutput,v=(0,u.Z)(),m=(0,r.Z)(o.useState(!1),2),b=m[0],w=m[1],x=(0,me.Z)(),k=x.language,C=x.isLoading,S=(0,a.CH)({variables:{replId:v}}),T=null===(n=S.data)||void 0===n?void 0:n.repl;if(S.loading||C)return(0,i.tZ)(g.G,{css:[y.l0.backgroundColor.backgroundDefault,y.l0.flex.row,y.l0.align.center,y.l0.justify.center,y.l0.p(16)],children:(0,i.tZ)(s.Z,{})});if(!T||"Repl"!==T.__typename)return(0,i.tZ)(g.G,{css:[y.l0.p(16)],children:(0,i.tZ)(Z.xv,{css:{textAlign:"center"},children:"Unable to fetch tests, please try again."})});if(!k)return(0,i.tZ)(g.G,{css:[y.l0.p(16)],children:(0,i.tZ)(Z.xv,{css:{textAlign:"center"},children:"Unit tests are currently only supported in Java, Python, and Node.js Repls."})});var E="default";(null===T||void 0===T?void 0:T.isProject)?E="project_repl":(null===T||void 0===T?void 0:T.isProjectFork)&&(E="submission_repl");var R=Boolean((null===(t=T.unitTests)||void 0===t?void 0:t.tests)&&T.unitTests.tests.length>0);return(null===T||void 0===T||null===(d=T.currentUserPermissions)||void 0===d?void 0:d.writeTests)?(0,i.BX)(g.G,{css:[y.l0.colWithGap(16),y.l0.align.center],children:[(0,i.BX)(g.G,{css:[y.l0.flex.row,y.l0.justify.spaceBetween,y.l0.align.center,{width:"100%"}],children:[(0,i.tZ)(l.Z,{truncate:!0,level:4,children:"Unit tests"}),(0,i.tZ)($.h,{alt:"Add test",size:32,onClick:function(){return w(!0)},children:(0,i.tZ)(c.Z,{})})]}),(0,i.BX)(g.G,{css:[y.l0.colWithGap(8),y.l0.maxWidth(256),{width:"80%"}],children:[(0,i.tZ)(M,{language:k,meta:(null===(f=T.unitTests)||void 0===f?void 0:f.meta)||null}),(0,i.tZ)(fe,{isAddingTest:b,unitTests:(null===T||void 0===T?void 0:T.unitTests)||null,onClose:function(){return w(!1)},language:k,canWrite:!0,trackingContext:E,getRunnerOutput:h}),p?(0,i.tZ)(ve,{hasTests:R,onClick:p}):null]})]}):(0,i.BX)(g.G,{css:[y.l0.colWithGap(16)],children:[(0,i.tZ)(Z.h4,{level:1,variant:"headerDefault",children:"Unit tests"}),(0,i.tZ)(g.G,{css:{width:"100%",overflowY:"auto"},children:(0,i.tZ)(fe,{unitTests:(null===T||void 0===T?void 0:T.unitTests)||null,language:k,isAddingTest:!1,canWrite:!1,trackingContext:E,getRunnerOutput:h})})]})}},54631:function(e,n,t){t.d(n,{x:function(){return E},y:function(){return T}});var r=t(57135),i=t(9970),o=t(96583),a=t(625),l=t(1468),c=t(66091),u=function(){function e(n){(0,c.Z)(this,e),this.code="",this.currentIndent=0,this.lib=n}var n=e.prototype;return n.indent=function(){this.currentIndent+=1},n.dedent=function(){if(0===this.currentIndent)throw new Error("indent at zero");this.currentIndent-=1},n.addIndents=function(){for(var e=0;e<this.currentIndent;e++)this.code+="  "},n.push=function(e){var n=e.split("\n"),t=!0,r=!1,i=void 0;try{for(var o,a=n[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;this.addIndents(),this.code+=l,this.newLine()}}catch(c){r=!0,i=c}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}},n.newLine=function(){this.code+="\n"},n.closeCurly=function(){this.addIndents(),this.code+=this.lib.getClosingBrackets()},n.toString=function(){return this.code},e}(),s=t(40842),d={testRunnerName:function(){return"TestRunner"},testSuiteName:function(){return"TestSuite"},defaultImports:function(){return"import org.junit.Before;\nimport org.junit.After;\nimport org.junit.Test;\nimport static org.junit.Assert.*;"},classIntro:function(){return"public class ".concat((0,s.Og)(d.testSuiteName())," {")},classConstructorName:function(){return(0,s.Og)(d.testSuiteName())},setupIntro:function(){return"@Before\npublic void setUp() {"},tearDownIntro:function(){return"@After\npublic void tearDown() {"},testIntro:function(e){return"".concat(d.testIntroPreName()).concat(e).concat(d.testIntroPostName())},testIntroPreName:function(){return"@Test\npublic void "},testIntroPostName:function(){return"() {"},getProperTestName:function(e){return e},parseTestResultName:function(e){return e.replace("(".concat((0,s.Og)(d.testSuiteName()),")"),"")},buildSuite:function(e){var n=e.tests,t=e.meta,r=new u(d);r.push(d.defaultImports()),t&&t.imports&&r.push(t.imports),r.newLine(),r.push(d.classIntro()),r.newLine(),r.indent(),t&&(t.initialization&&(r.push(t.initialization),r.newLine()),t.setup&&(r.push(d.setupIntro()),r.indent(),r.push(t.setup),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()),t.tearDown&&(r.push(d.tearDownIntro()),r.indent(),r.push(t.tearDown),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()));var i=!0,o=!1,a=void 0;try{for(var l,c=n[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;s.code&&(r.push(d.testIntro(s.name)),r.indent(),r.push(s.code),r.dedent(),r.closeCurly(),r.newLine(),r.newLine())}}catch(f){o=!0,a=f}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return r.dedent(),r.closeCurly(),r.toString()},runSuite:function(e){return v.apply(this,arguments)},buildAndRunTests:function(e){var n=e.container,t=e.fs,r=e.packager,i=e.logger,o=e.tests,a=e.meta,l=d.buildSuite({tests:o,meta:a});return d.runSuite({container:n,fs:t,packager:r,logger:i,suiteCode:l})},hasClosingBrackets:function(){return!0},getClosingBrackets:function(){return"}"},hasSemicolon:function(){return!0},getCommentChar:function(){return"//"},getHelpText:function(){return"no react in this bitch either"},captureSetupError:function(e){var n=e.tag,t=e.raw;l.c_.withScope((function(e){e.setTag("unitTestLib","true"),e.setExtra("raw",t),e.setExtra("language","java10"),l.c_.captureException(n)}))},exampleTest:{id:-1,failureMessage:"An Adder class should have an add method that adds two ints and returns the result",name:"add",code:"Adder adder = new Adder();\nint result = adder.add(1, 2);\nassertEquals(3, result);\n"}},f="__UNIT_TEST_RESULT_START__",p="__UNIT_TEST_RESULT_END__",h="import org.json.simple.JSONArray;\nimport org.json.simple.JSONObject;\nimport org.junit.runner.JUnitCore;\nimport org.junit.runner.Result;\nimport org.junit.runner.notification.Failure;\n\npublic class ".concat((0,s.Og)(d.testRunnerName())," {\n    public static void main(String[] args) {\n      Result result = JUnitCore.runClasses(").concat((0,s.Og)(d.testSuiteName()),'.class);\n      JSONArray failures = new JSONArray();\n\n        for (Failure failure : result.getFailures()) {\n            JSONObject obj = new JSONObject();\n            obj.put("name", failure.getTestHeader());\n            obj.put("stack", failure.getTrace());\n            failures.add(obj);\n        }\n        JSONObject out = new JSONObject();\n        out.put("passed", result.wasSuccessful());\n        out.put("failures", failures);\n        System.out.println();\n        System.out.println("').concat(f,'");\n        System.out.println(out);\n        System.out.println("').concat(p,'");\n    }\n}');function v(){return(v=(0,r.Z)((function(e){var n,t,r,l,c,u,v,m,g,y,Z,b,w,x,k,C,S,T,E,R,I,G,D,_;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return n=e.container,t=e.fs,r=e.packager,l=e.logger,c=e.suiteCode,v=l.startLogSpinner("Setting up the environment"),[4,(0,s.WT)(t)];case 1:return o.sent(),v("Creating your test files 1/2"),[4,(0,s.e3)({fs:t,code:c,filename:"".concat(d.testSuiteName(),".java")})];case 2:return m=o.sent(),(g=m.error)?("Failed to create suite code file",d.captureSetupError({tag:"Failed to create suite code file",raw:g}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}]):(v("Creating your test files 2/2"),[4,(0,s.e3)({fs:t,code:h,filename:"".concat(d.testRunnerName(),".java")})]);case 3:return y=o.sent(),(Z=y.error)?("Failed to create test runner file",d.captureSetupError({tag:"Failed to create test runner file",raw:Z}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}]):(l.stopLogSpinner(),l.clearLine(),l.logMessage("Installing imported packages\r\n"),[4,r.addPackages([{name:"junit:junit",version:"4.12"},{name:"com.googlecode.json-simple:json-simple",version:"1.1.1"},{name:"org.hamcrest:hamcrest-core",version:"1.3"}])]);case 4:return o.sent(),[4,r.installPackages()];case 5:return o.sent().error?[2,{error:"Failed to install packages\r\n"}]:(l.clearLogs(),v=l.startLogSpinner("Compiling your files"),[4,n.exec("find",".","-type","f","-name","*.java","-print0")]);case 6:if(b=o.sent(),w=b.output,x=b.error)return k="Failed to fetch working directory java files",d.captureSetupError({tag:k,raw:x}),[2,{error:"".concat(k,"\r\n\r\n")+(null===w||void 0===w?void 0:w.replace(/\n/g,"\n\r"))+"\r\n\r\n"+x}];if("string"!==typeof w)throw new Error("expected working directory files to be a string");return C=w.slice(0,-1).split("\0"),S=".:./target/dependency/*",[4,(u=n).exec.apply(u,["javac","-classpath",S,"-d","."].concat((0,i.Z)(C)))];case 7:return T=o.sent(),E=T.output,(R=T.error)?(I="Failed to compile test runner file",d.captureSetupError({tag:I,raw:R}),[2,{error:"".concat(I,"\r\n\r\n")+(null===E||void 0===E?void 0:E.replace(/\n/g,"\n\r"))+"\r\n\r\n"+R}]):(v("Running your tests"),[4,n.exec("java","-classpath",S,(0,s.Og)(d.testRunnerName()))]);case 8:if(G=o.sent(),D=G.output,_=G.error)return(0,a.j)(a.U3.REPL_UNIT_TEST_CONSTRUCTION_ERROR_INTERNAL),[2,{error:"Running tests failed\r\n\r\n"+(null===D||void 0===D?void 0:D.replace(/\n/g,"\n\r"))+"\r\n\r\n"+_}];if("string"!==typeof D)throw new Error("expected runOutput to be a string");return[2,{result:JSON.parse(D.slice(D.indexOf(f)+f.length,D.lastIndexOf(p))),error:null}]}}))}))).apply(this,arguments)}var m=d,g=function(e){return!!e&&e.trim().length>0&&e.split("\n").some((function(e){return!(e.trim().startsWith("#")||""===e.trim())}))},y={testRunnerName:function(){return"test_runner"},testSuiteName:function(){return"test_suite"},defaultImports:function(){return"import unittest\nfrom main import *\n"},classIntro:function(){return"class UnitTests(unittest.TestCase):"},classConstructorName:function(){return"__init__"},setupIntro:function(){return"def setUp(self):"},tearDownIntro:function(){return"def tearDown(self):"},testIntro:function(e){return y.testIntroPreName()+e+y.testIntroPostName()},testIntroPreName:function(){return"def test_"},testIntroPostName:function(){return"(self):"},getProperTestName:function(e){return"test_".concat(e)},parseTestResultName:function(e){return e},buildSuite:function(e){var n=e.tests,t=e.meta,r=new u(y);r.push(y.defaultImports()),t&&t.imports&&r.push(t.imports),r.newLine(),r.push(y.classIntro()),r.newLine(),r.indent(),t&&(t.initialization&&(r.push(t.initialization),r.newLine()),g(t.setup)&&(r.push(y.setupIntro()),r.indent(),r.push(t.setup),r.dedent(),r.newLine()),g(t.tearDown)&&(r.push(y.tearDownIntro()),r.indent(),r.push(t.tearDown),r.dedent(),r.newLine()));var i=!0,o=!1,a=void 0;try{for(var l,c=n[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;r.push(y.testIntro(s.name)),r.indent(),r.push(s.code||"pass"),r.dedent(),r.newLine()}}catch(d){o=!0,a=d}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return r.toString()},runSuite:function(e){return x.apply(this,arguments)},buildAndRunTests:function(e){var n=e.container,t=e.fs,r=e.packager,i=e.logger,o=e.tests,a=e.meta,l=y.buildSuite({tests:o,meta:a});return y.runSuite({container:n,fs:t,packager:r,logger:i,suiteCode:l})},hasClosingBrackets:function(){return!1},getClosingBrackets:function(){throw new Error("This language does not have closing brackets, check `hasClosingBrackets` first")},hasSemicolon:function(){return!1},getCommentChar:function(){return"#"},getHelpText:function(){return"no react in this bitch"},captureSetupError:function(e){var n=e.tag,t=e.raw;l.c_.withScope((function(e){e.setTag("unitTestLib","true"),e.setExtra("raw",t),e.setExtra("language","python3"),l.c_.captureException(n)}))},exampleTest:{id:-1,failureMessage:"In main.py you should have an add functions that adds two numbers and returns the result",name:"add",code:"self.assertEquals(add(1, 2), 3)"}},Z="__UNIT_TEST_RESULT_START__",b="__UNIT_TEST_RESULT_END__",w="import unittest\nimport ".concat((0,s.Og)(y.testSuiteName()),"\nimport os\nimport json\nfrom time import sleep\n\nsuite = unittest.TestLoader().loadTestsFromTestCase(\n  ").concat((0,s.Og)(y.testSuiteName()),'.UnitTests)\nf = open(os.devnull,"w")\ntest_res = unittest.TextTestRunner(stream=f).run(suite)\n\n# Merge errors and failures and normalize to {name, stack}\nfailures = [\n    {\n        "name": r[0]._testMethodName,\n        "stack": r[1],\n    } for r in test_res.errors + test_res.failures\n]\nprint()\nprint(\'').concat(Z,'\')\nsleep(1)\nprint(json.dumps({\n    "passed": test_res.wasSuccessful(),\n    "failures": failures,\n}))\nprint()\nprint(\'').concat(b,"');");function x(){return(x=(0,r.Z)((function(e){var n,t,r,i,l,c,u,d,f,p,h,v,m;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return n=e.container,t=e.fs,r=e.packager,i=e.logger,l=e.suiteCode,c=i.startLogSpinner("Setting up the environment"),[4,(0,s.WT)(t)];case 1:return o.sent(),c("Creating your test files 1/2"),[4,(0,s.e3)({fs:t,code:l,filename:"".concat(y.testSuiteName(),".py")})];case 2:return u=o.sent(),(d=u.error)?("Failed to create suite code file",y.captureSetupError({tag:"Failed to create suite code file",raw:d}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}]):(c("Creating your test files 2/2"),[4,(0,s.e3)({fs:t,code:w,filename:"".concat(y.testRunnerName(),".py")})]);case 3:return f=o.sent(),(p=f.error)?("Failed to create test runner file",y.captureSetupError({tag:"Failed to create test runner file",raw:p}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}]):(i.stopLogSpinner(),i.clearLine(),i.logMessage("Installing imported packages\r\n"),[4,r.installPackages()]);case 4:return o.sent().error?[2,{error:"Failed to install packages\r\n"}]:(i.clearLogs(),i.startLogSpinner("Running your tests"),[4,n.exec("python","-B",(0,s.Og)("".concat(y.testRunnerName(),".py")))]);case 5:if(h=o.sent(),v=h.output,m=h.error)return(0,a.j)(a.U3.REPL_UNIT_TEST_CONSTRUCTION_ERROR_INTERNAL),[2,{error:"Running tests failed\r\n\r\n"+(null===v||void 0===v?void 0:v.replace(/\n/g,"\n\r"))+"\r\n"+m}];if("string"!==typeof v)throw new Error("expected runoutput to be a string");return[2,{result:JSON.parse(v.slice(v.indexOf(Z)+Z.length,v.lastIndexOf(b))),error:null}]}}))}))).apply(this,arguments)}var k={testRunnerName:function(){throw new Error("Node test runner uses jest directly")},testSuiteName:function(){return"test_suite"},defaultImports:function(){return"const index = require('./index.js');"},classIntro:function(){return'describe("UnitTests", function() {'},classConstructorName:function(){return null},setupIntro:function(){return"beforeAll(async function() {"},tearDownIntro:function(){return"afterAll(async function() {"},testIntro:function(e){return k.testIntroPreName()+e+k.testIntroPostName()},testIntroPreName:function(){return'test("'},testIntroPostName:function(){return'", async function() {'},getProperTestName:function(e){return e},parseTestResultName:function(e){return e},buildSuite:function(e){var n=e.tests,t=e.meta,r=new u(k);r.push(k.defaultImports()),t&&t.imports&&r.push(t.imports),r.newLine(),r.push(k.classIntro()),r.newLine(),r.indent(),t&&(t.initialization&&(r.push(t.initialization),r.newLine()),t.setup&&(r.push(k.setupIntro()),r.indent(),r.push(t.setup),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()),t.tearDown&&(r.push(k.tearDownIntro()),r.indent(),r.push(t.tearDown),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()));var i=!0,o=!1,a=void 0;try{for(var l,c=n[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;s.code&&(r.push(k.testIntro(s.name)),r.indent(),r.push(s.code),r.dedent(),r.closeCurly(),r.newLine(),r.newLine())}}catch(d){o=!0,a=d}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return r.dedent(),r.closeCurly(),r.toString()},runSuite:function(e){return C.apply(this,arguments)},buildAndRunTests:function(e){var n=e.container,t=e.fs,r=e.packager,i=e.logger,o=e.tests,a=e.meta,l=k.buildSuite({tests:o,meta:a});return k.runSuite({container:n,fs:t,packager:r,logger:i,suiteCode:l})},hasClosingBrackets:function(){return!0},getClosingBrackets:function(){return"});"},hasSemicolon:function(){return!0},getCommentChar:function(){return"//"},getHelpText:function(){return"no react yet"},captureSetupError:function(e){var n=e.tag,t=e.raw;l.c_.withScope((function(e){e.setTag("unitTestLib","true"),e.setExtra("raw",t),e.setExtra("language","nodejs"),l.c_.captureException(n)}))},exampleTest:{id:-1,failureMessage:"",name:"add",code:"expect(index.add(1, 2)).toBe(3);"}};function C(){return(C=(0,r.Z)((function(e){var n,t,r,i,l,c,u,d,f,p,h,v,m,g,y,Z,b,w,x,C,S,T;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return n=e.container,t=e.fs,r=e.packager,i=e.logger,l=e.suiteCode,c=i.startLogSpinner("Setting up the environment"),[4,(0,s.WT)(t)];case 1:return o.sent(),c("Creating your test files 1/2"),[4,(0,s.e3)({fs:t,code:l,filename:"".concat(k.testSuiteName(),".js")})];case 2:return u=o.sent(),(d=u.error)?("Failed to create suite code file",k.captureSetupError({tag:"Failed to create suite code file",raw:d}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}]):(c("Creating your test files 2/2"),f=69,p="jest.config.json",h={testRegex:(0,s.Og)("".concat(k.testSuiteName(),".js")),testEnvironment:"node",testFailureExitCode:f},[4,(0,s.e3)({fs:t,code:JSON.stringify(h),filename:p})]);case 3:return v=o.sent(),(m=v.error)?("Failed to create config file",k.captureSetupError({tag:"Failed to create config file",raw:m}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}]):(i.stopLogSpinner(),i.clearLine(),i.logMessage("Installing imported packages\r\n"),[4,r.installPackages()]);case 4:return o.sent().error?[2,{error:"Failed to install packages\r\n"}]:(i.clearLogs(),c=i.startLogSpinner("Running your tests"),g=(0,s.Og)("output.json"),[4,n.exec("jest","--json","--outputFile",g,"--config",(0,s.Og)(p),"--forceExit","--passWithNoTests")]);case 5:return y=o.sent(),Z=y.output,(b=y.error)&&!b.endsWith(f.toString())?((0,a.j)(a.U3.REPL_UNIT_TEST_CONSTRUCTION_ERROR_INTERNAL),[2,{error:"Running tests failed\r\n\r\n"+(null===Z||void 0===Z?void 0:Z.replace(/\n/g,"\n\r"))+"\r\n"+b}]):(c("Parsing your test results"),[4,t.readFile(g)]);case 6:return(w=o.sent()).error?("Error reading test results",k.captureSetupError({tag:"Error reading test results",raw:w.error}),[2,{error:"There was an error getting test results, if this happens please contact support."}]):(x=w.content.toString(),(C=JSON.parse(x)).success?[2,{error:null,result:{passed:!0,failures:[]}}]:(S=C.testResults[0],(T=S.assertionResults.filter((function(e){return"passed"!==e.status})).map((function(e){return{name:e.title,stack:e.failureMessages[0]}}))).length?[2,{error:null,result:{passed:!1,failures:T}}]:[2,{error:S.message.replace(/\n/g,"\r\n")}]))}}))}))).apply(this,arguments)}var S={java10:m,java10_beta:m,java:m,python3:y,python3_beta:y,python:y,nodejs:k,javascript:k,nodejs_beta:k};function T(e){return e in S}function E(e){if(!T(e))throw new Error("".concat(e," is not a supported unit testing language, it has to be one of ").concat(Object.keys(S)));return S[e]}},40842:function(e,n,t){t.d(n,{Og:function(){return s},WT:function(){return p},e3:function(){return d}});var r=t(57135),i=t(96583),o=t(1468),a=t(22011),l=t(12583),c=t(4561),u="_test_runner";function s(e){return u+e}function d(e){return f.apply(this,arguments)}function f(){return(f=(0,r.Z)((function(e){var n,t,r,o,l;return(0,i.__generator)(this,(function(i){return n=e.fs,t=e.code,r=e.filename,o=s(r),l=a.Z.from(t,"utf8"),[2,n.writeFile(o,l)]}))}))).apply(this,arguments)}function p(e){return h.apply(this,arguments)}function h(){return(h=(0,r.Z)((function(e){var n,t;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,e.readDir(l.Ql)];case 1:return(n=r.sent()).error?[2]:[4,Promise.all(n.children.map((function(n){return n.filename.startsWith(u)?n.type===c.Tv.File?e.deleteFile(n.filename):e.deleteDir(n.filename):Promise.resolve(null)})))];case 2:return r.sent(),[3,4];case 3:return t=r.sent(),o.c_.withScope((function(e){e.setTag("unitTestLib","true"),o.c_.captureException(t)})),[3,4];case 4:return[2]}}))}))).apply(this,arguments)}},70751:function(e,n,t){t.d(n,{AF:function(){return w},Hd:function(){return k},IV:function(){return E},Rb:function(){return g},aA:function(){return m},kO:function(){return S},lQ:function(){return I},rU:function(){return Z}});var r=t(72006),i=t(43119),o=t(71440),a=t(50216);function l(){var e=(0,i.Z)(["\n  fragment UnitTestsReplUnitTestMeta on ReplUnitTestMeta {\n    id\n    imports\n    initialization\n    setup\n    tearDown\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,i.Z)(["\n  fragment UnitTestsReplUnitTest on ReplUnitTest {\n    id\n    name\n    code\n    failureMessage\n  }\n"]);return c=function(){return e},e}function u(){var e=(0,i.Z)(["\n  mutation createUnitTestMeta($input: CreateReplUnitTestMetaInput!) {\n    createReplUnitTestMeta(input: $input) {\n      ... on ReplUnitTestMeta {\n        id\n        ...UnitTestsReplUnitTestMeta\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return u=function(){return e},e}function s(){var e=(0,i.Z)(["\n  mutation updateUnitTestMeta($input: UpdateReplUnitTestMetaInput!) {\n    updateReplUnitTestMeta(input: $input) {\n      ... on ReplUnitTestMeta {\n        id\n        ...UnitTestsReplUnitTestMeta\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return s=function(){return e},e}function d(){var e=(0,i.Z)(["\n  mutation createUnitTest($input: CreateReplUnitTestInput!) {\n    createReplUnitTest(input: $input) {\n      ... on ReplUnitTest {\n        id\n        ...UnitTestsReplUnitTest\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function f(){var e=(0,i.Z)(["\n  mutation updateUnitTest($input: UpdateReplUnitTestInput!) {\n    updateReplUnitTest(input: $input) {\n      ... on ReplUnitTest {\n        id\n        ...UnitTestsReplUnitTest\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function p(){var e=(0,i.Z)(["\n  mutation deleteUnitTest($testId: Int!) {\n    deleteReplUnitTest(testId: $testId) {\n      ... on ReplUnitTest {\n        id\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return p=function(){return e},e}function h(){var e=(0,i.Z)(["\n  mutation updateReplUnitTestLastRun(\n    $input: UpdateReplUnitTestLastRunInput!\n    $replId: String!\n  ) {\n    updateReplUnitTestLastRun(input: $input) {\n      ... on UpdateReplUnitTestLastRunUpdatedTests {\n        __typename\n        updatedTests {\n          ... on ReplUnitTest {\n            id\n            __typename\n            lastRun(replId: $replId) {\n              ... on ReplUnitTestLastRun {\n                __typename\n                status\n              }\n              ... on UserError {\n                __typename\n                message\n              }\n            }\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n      ... on UserError {\n        __typename\n        message\n      }\n    }\n  }\n"]);return h=function(){return e},e}var v={},m=(0,o.Ps)(l()),g=(0,o.Ps)(c()),y=(0,o.Ps)(u(),m);function Z(e){var n=(0,r.Z)({},v,e);return a.D(y,n)}var b=(0,o.Ps)(s(),m);function w(e){var n=(0,r.Z)({},v,e);return a.D(b,n)}var x=(0,o.Ps)(d(),g);function k(e){var n=(0,r.Z)({},v,e);return a.D(x,n)}var C=(0,o.Ps)(f(),g);function S(e){var n=(0,r.Z)({},v,e);return a.D(C,n)}var T=(0,o.Ps)(p());function E(e){var n=(0,r.Z)({},v,e);return a.D(T,n)}var R=(0,o.Ps)(h());function I(e){var n=(0,r.Z)({},v,e);return a.D(R,n)}},72196:function(e,n,t){t.d(n,{Z:function(){return c}});var r=t(68825),i=t(88688),o=t(45285),a=t(50959),l=t(54631);function c(){var e=(0,r.Z)(),n=(0,o.Z)().dotReplit,t=null===e||void 0===e?void 0:e.language,c=(0,a.useState)(null),u=c[0],s=c[1],d=(0,a.useState)(!0),f=d[0],p=d[1];return(0,a.useEffect)((function(){if(t){if((0,l.y)(t))return s(t),void p(!1);var e=!1,r=n.watch((function(n){var t,r;if(e||(e=!0,p(!1)),n.error)n.error===i.Yt.NotFound&&s(null);else{var o=null===(t=n.config.unitTest)||void 0===t||null===(r=t.language)||void 0===r?void 0:r.toLowerCase();o&&(0,l.y)(o)?s(o):s(null)}}));return function(){r()}}}),[t,n]),{language:u,isLoading:f}}},41677:function(e,n,t){t.d(n,{Z:function(){return E}});var r=t(72006),i=t(4405),o=t(2272),a=t(74985),l=t(88541),c=t(63064),u=t(77511),s=t(625),d=t(45510),f=t(2041),p=t(61284),h=t(85368),v=t(39541),m=t(46688),g=t(20811),y=t(80587),Z=t(70523),b=t(51631),w=t(91398),x=t(92683),k=t(90171),C=t(50959),S=t(94716),T="resources_upgrade_modal";function E(e){var n=e.isOwnRepl,t=e.userSubscriptionType,r=(0,k.useRouter)(),i=(0,l.P5)({controlName:"flag-slippery-banana",logFlagToAnalytics:!0}),c=(0,o.Z)(C.useState(!0),2),s=c[0],d=c[1],f=(0,m.Z)("announcement","resources-upgrade-modal"),p=f.shouldDisplay,h=f.register,v=f.dismiss;return C.useEffect((function(){!(0,u.Vg)(r)&&n&&t!==b.HP.HackerPro&&i&&h()}),[i,n,h,r,t]),C.useEffect((function(){var e=setTimeout((function(){d(!1)}),6e4);return function(){return clearTimeout(e)}}),[]),i?s||(0,u.Vg)(r)?null:n?t===b.HP.HackerPro?null:p?(0,a.tZ)(R,{dismissTour:v}):null:null:null}function R(e){var n=e.dismissTour,t=(0,o.Z)(C.useState(null),2),l=t[0],u=t[1],m=(0,Z.Z)(),b=m.dataAtom,k=b.cpu,E=b.ram,R=b.disk,I=C.useRef(!1),G=(0,c.Z)(),D=(0,x.Dv)(k.currentAtom),_=(0,C.useState)(D),P=_[0],B=_[1],A=(0,S.Z)(D),U=D/(0,x.Dv)(k.totalAtom),L=(0,x.Dv)(E.currentRssAtom),X=(0,C.useState)(D),N=X[0],M=X[1],F=(0,S.Z)(L),O=L/(0,x.Dv)(E.totalAtom),W=C.useCallback((function(e){u("cta"),B(D),M(L),(0,s.j)(s.U3.MODAL_VIEWED,{modalName:T,cause:e,unsolicited:!0})}),[D,L,B,M]);C.useEffect((function(){var e;if(!l&&!I.current)return U>.9?(I.current=!0,e=setTimeout((function(){I.current=!1,A.current>.9&&W("cpu")}),1e4)):O>.9&&(I.current=!0,e=setTimeout((function(){I.current=!1,F.current>.9&&W("ram")}),1e4)),function(){G.current||clearTimeout(e)}}),[U,I,l,G,L,W,A,O,F]);var H=(0,i.Z)((0,r.Z)({},m),{dataAtom:{cpu:(0,i.Z)((0,r.Z)({},k),{currentAtom:(0,w.cn)(P)}),ram:(0,i.Z)((0,r.Z)({},E),{currentRssAtom:(0,w.cn)(N)}),disk:R}});return(0,a.tZ)(f.u,{isOpen:null!==l,preventOutsideModalClickClose:!0,onRequestClose:function(){u(null),n()},maxWidth:"plans"===l?g.W:360,children:"plans"===l?(0,a.tZ)(g.Z,{context:T,uponPurchaseGoTo:"profile",initialTab:"plans"}):(0,a.BX)(h.G,{css:[v.l0.p(8),v.l0.colWithGap(24)],children:[(0,a.BX)(h.G,{css:[v.l0.colWithGap(16)],children:[(0,a.tZ)(p.xv,{variant:"subheadDefault",multiline:!1,children:"Your Repl ran out of resources!"}),(0,a.tZ)(p.xv,{children:"Upgrade to a plan to increase your Repl's resources so your programs can use more power."})]}),(0,a.tZ)(h.G,{css:[v.l0.colWithGap(12)],children:(0,a.tZ)(y.Z,{mini:!0,inactive:!1,resources:H})}),(0,a.tZ)(d.zx,{big:!0,text:"Upgrade to get more resources",colorway:"primary",onClick:function(){(0,s.j)(s.U3.UPGRADE_SELECTED,{source:T}),u("plans")}})]})})}},67183:function(e,n,t){t.d(n,{Q:function(){return o}});var r=t(74985),i=t(50959);function o(e){var n=e.uploadFiles,t=e.fileUploadInputRef,o=e.dirUploadInputRef,a=(0,i.useRef)(Math.random().toString(36));return(0,r.BX)(r.HY,{children:[(0,r.tZ)("input",{style:{display:"none"},ref:t,id:"file-upload-input-".concat(a.current),type:"file",onChange:function(e){var t=e.target.files;t&&n({files:Array.from(t)})},onClick:function(e){e.currentTarget.value=""},multiple:!0,accept:"*"}),(0,r.tZ)("input",{style:{display:"none"},ref:o,id:"dir-upload-input-".concat(a.current),type:"file",onChange:function(e){var t=e.target.files;t&&n({files:Array.from(t)})},onClick:function(e){e.currentTarget.value=""},webkitdirectory:"true",mozdirectory:"true",msdirectory:"true",odirectory:"true",directory:"true",accept:"*"})]})}},91350:function(e,n,t){t.d(n,{I5:function(){return h},sY:function(){return f}});var r=t(72006),i=t(43119),o=t(71440),a=t(24635);function l(){var e=(0,i.Z)(["\n  fragment ReplEnvironmentWebviewDeployBanner on Repl {\n    hostingDeployment {\n      ... on HostingDeployment {\n        id\n        currentBuild {\n          id\n        }\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n    hostingDeploymentPermissions {\n      canDeploy\n    }\n    config {\n      isVnc\n    }\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,i.Z)(["\n  fragment ReplEnvironmentWebviewRepl on Repl {\n    id\n    prodUrl: hostedUrl(dotty: true)\n    devUrl: hostedUrl(dev: true)\n    currentUserPermissions {\n      linkDomain\n    }\n    lang {\n      id\n    }\n  }\n"]);return c=function(){return e},e}function u(){var e=(0,i.Z)(["\n  query ReplEnvironmentWebview($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        ...ReplEnvironmentWebviewRepl\n        ...ReplEnvironmentWebviewDeployBanner\n      }\n    }\n  }\n  ","\n  ","\n"]);return u=function(){return e},e}var s={},d=(0,o.Ps)(l()),f=(0,o.Ps)(c()),p=(0,o.Ps)(u(),f,d);function h(e){var n=(0,r.Z)({},s,e);return a.a(p,n)}},19660:function(e,n,t){t.d(n,{Z:function(){return ae}});var r=t(72006),i=t(4405),o=t(74985),a=t(50959),l=t(88254),c=t(91350),u=t(48330),s=t(48306),d=t.n(s),f=t(24743),p=t(19065),h=t(35301),v=t(625);function m(){return a.useEffect((function(){(0,v.j)(v.U3.WS_REPLCO_UNREACHABLE)}),[]),(0,o.BX)("div",{className:"jsx-88c49dc4f1cb807b unreachable",children:[(0,o.BX)(h.gC,{align:"center",spacing:4,children:[(0,o.BX)(h.gC,{align:"center",children:[(0,o.tZ)(p.Z,{level:1,children:"\ud83d\ude48"}),(0,o.tZ)(p.Z,{level:4,children:"This Repl link isn\u2019t broken!"}),(0,o.tZ)(p.Z,{level:4,foreground:2,children:"It\u2019s just blocked."})]}),(0,o.BX)(h.gC,{spacing:2,className:"why",children:[(0,o.tZ)(f.Z,{foreground:2,children:"Why this might be happening:"}),(0,o.tZ)(f.Z,{foreground:2,children:(0,o.BX)("ul",{className:"jsx-88c49dc4f1cb807b",children:[(0,o.BX)("li",{className:"jsx-88c49dc4f1cb807b",children:["repl.co URLs could be"," ",(0,o.tZ)(f.Z,{fontWeight:"medium",foreground:1,children:"blocked by a firewall,"})," ","so contact your IT administrator"]}),(0,o.BX)("li",{className:"jsx-88c49dc4f1cb807b",children:["repl.co URLs could be"," ",(0,o.tZ)(f.Z,{fontWeight:"medium",foreground:1,children:"blocked by your ISP,"})," ","so try getting in touch with them"]})]})})]}),(0,o.BX)(f.Z,{foreground:2,align:"center",children:["If you have any other questions, please check out"," ",(0,o.tZ)("a",{href:"https://docs.replit.com/teams-edu/it-administrators-toolkit",target:"_blank",rel:"noopener noreferrer",className:"jsx-88c49dc4f1cb807b",children:"our IT docs"})," ","or"," ",(0,o.tZ)("a",{href:"https://replit.com/support",target:"_blank",rel:"noopener noreferrer",className:"jsx-88c49dc4f1cb807b",children:"contact support"}),"."]})]}),(0,o.tZ)(d(),{id:"88c49dc4f1cb807b",children:".unreachable.jsx-88c49dc4f1cb807b{padding:var(--space-32)}.unreachable.jsx-88c49dc4f1cb807b ul.jsx-88c49dc4f1cb807b{list-style-position:inside}.unreachable.jsx-88c49dc4f1cb807b li.jsx-88c49dc4f1cb807b{padding-bottom:var(--space-16)}"})]})}var g=a.createContext(!1),y=t(85368),Z=t(39541),b=t(94488),w=t(2272),x=t(1050),k=t(96864),C=t(32973),S=t(8907),T=t(24976),E=t(87076),R=(0,a.forwardRef)((function(e,n){return(0,o.tZ)(E.h,(0,r.Z)({disabled:e.disabled,ref:n,className:e.className,css:[{color:"var(--foreground-dimmest)",":hover":{color:"var(--foreground-default)"}},e.css]},e))})),I=t(91102),G=t(13716),D=new Set(["draw.js"]);function _(e,n){var t=(0,b.f6)(),r=(0,G.R3)(),i=a.useCallback((function(e,t){var r,i;null===(r=n.current)||void 0===r||null===(i=r.contentWindow)||void 0===i||i.postMessage({action:"FILE_UPDATE",file:e,content:t},"*")}),[n]);a.useEffect((function(){if(n.current&&t){var r=!0,o=!1,a=void 0;try{for(var l,c=function(){var t=l.value;n.current.onload=function(){e.readFile(t).then((function(e){e.error||i(t,e.content.toString())}))}},u=D[Symbol.iterator]();!(r=(l=u.next()).done);r=!0)c()}catch(s){o=!0,a=s}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}}}),[e,i,n,t]),a.useEffect((function(){if(t&&r&&D.has(r))return e.watchTextFile(r,{onReady:function(e){var n=e.initialContent;return i(r,n)},onChange:function(e){var n=e.latestContent;return i(r,n)}})}),[e,r,i,t])}var P=function(e){var n=e.iframe,t=(0,u.Z)();return a.useEffect((function(){var e="https://".concat(t,".id.repl.co"),n=function(n){if(n.origin===e&&"DOWNLOAD"===n.data.action){var t=document.createElement("a");document.body.appendChild(t),t.setAttribute("style","display: none"),t.href=n.data.url,t.download=n.data.filename,t.click(),document.body.removeChild(t)}};return window.addEventListener("message",n),function(){window.removeEventListener("message",n)}}),[t]),(0,o.BX)(o.HY,{children:[(0,o.tZ)(R,{alt:"Save image",onClick:function(){var e,t;null===(e=n.current)||void 0===e||null===(t=e.contentWindow)||void 0===t||t.postMessage({action:"REQUEST_SCREENSHOT"},"*")},children:(0,o.tZ)(T.Z,{})}),(0,o.tZ)(R,{alt:"Toggle Record",onClick:function(){var e,t;null===(e=n.current)||void 0===e||null===(t=e.contentWindow)||void 0===t||t.postMessage({action:"REQUEST_TOGGLE_RECORD"},"*")},children:(0,o.tZ)(I.Z,{})})]})},B=t(70628),A=t(1734),U=t(39137),L=t(43312),X=(0,L.F4)("from{transform:rotate(0deg);}to{transform:rotate(359deg);}");function N(e){var n,t=e.canRefresh,r=e.refreshing,i=e.devToolsBadge,l=e.url,c=e.displayUrl,u=e.onToggleDevtools,s=a.useRef(null),d=(0,w.Z)(a.useState(!1),2),f=d[0],p=d[1];return n=t?r?"Refreshing":"Refresh":"Run the Repl to refresh",(0,o.BX)(y.G,{css:[Z.l0.rowWithGap(8),Z.l0.p(8),Z.l0.align.center],children:[(0,o.tZ)(R,{disabled:!t,alt:n,onClick:e.onRefresh,css:r&&{animation:"".concat(X," infinite 0.5s")},children:(0,o.tZ)(k.Z,{})}),(0,o.tZ)(U.II,{dataCy:"ws-webview-url-bar-input",css:[Z.l0.px(4),Z.l0.py(2),Z.l0.flex.growAndShrink(1),Z.l0.fontSize(12)],value:null!==c&&void 0!==c?c:l,type:"text",onFocus:function(n){e.trackUrlSelect(),n.currentTarget.select()},readOnly:!0}),(0,o.BX)(y.G,{css:[Z.l0.rowWithGap(4)],children:[e.canEditDomain?(0,o.BX)(A.Z,{showArrow:!0,maxWidth:320,isOpen:f,onClickOutside:function(){return p(!1)},growToMaxWidth:!0,children:[(0,o.tZ)(R,{alt:"Custom domain",onClick:function(){return p(!f)},children:(0,o.tZ)(x.Z,{})}),(0,o.tZ)(S.Z,{onLink:function(){return p(!1)},onUnlink:function(){return p(!1)},replId:e.replId})]}):null,u?(0,o.tZ)(R,{alt:"Toggle developer tools",ref:s,onClick:u,css:{position:"relative"},suffix:!!i&&(0,o.tZ)("span",{css:{position:"absolute",color:Z.TV.accentNegativeStrongest,borderRadius:Z.TV.borderRadiusRound,padding:"".concat(Z.TV.space2," ").concat(Z.TV.space4),backgroundColor:Z.TV.accentNegativeDimmer,top:-5,right:-3,fontSize:9},children:i}),children:(0,o.tZ)(B.Z,{})}):null,(0,o.tZ)("a",{href:l,css:{color:"inherit"},target:"_blank",children:(0,o.tZ)(R,{alt:"Open in a new tab",children:(0,o.tZ)(C.Z,{})})}),e.isKaboomDraw&&e.iframe?(0,o.tZ)(P,{iframe:e.iframe}):null]})]})}var M=t(54733),F=t(20841),O=t(61284);function W(){return(0,o.BX)(y.G,{css:[Z.l0.align.center,Z.l0.p(64)],children:[(0,o.BX)(y.G,{css:[Z.l0.align.center],children:[(0,o.tZ)(p.Z,{level:1,children:"\ud83d\ude48"}),(0,o.tZ)(O.xv,{css:[Z.l0.textAlign.center,Z.l0.pb(8)],variant:"headerDefault",children:"We've detected a crash loop"}),(0,o.tZ)(O.xv,{css:[Z.l0.textAlign.center],variant:"subheadDefault",color:"dimmer",children:"Preview is disabled until you click the run button again."})]}),(0,o.tZ)(y.G,{css:[Z.l0.p(16)],children:(0,o.tZ)(O.xv,{css:[Z.l0.color.foregroundDimmer,Z.l0.textAlign.center,Z.l0.pb(16)],children:"There may be errors in the code that are causing your application to repeatedly crash."})})]})}var H=t(88541),V=t(46688),z=t(23785),j=t(45317),q=t(45510),$=t(57475),Y=t(71002);function K(e){var n=e.onCompleted,t=e.startTimeInSeconds,r=(0,w.Z)(a.useState(t),2),i=r[0],l=r[1];a.useEffect((function(){var e=setInterval((function(){return l((function(n){return 0===n?(clearInterval(e),0):n-1}))}),1e3);return function(){return clearInterval(e)}}),[]),a.useEffect((function(){i>0||n()}),[i]);var c=24*2.6;return(0,o.tZ)(y.G,{css:{width:24,height:24},children:(0,o.BX)(y.G,{css:[Z.l0.flex.row,Z.l0.align.center,Z.l0.justify.center,{width:"100%",height:"100%",strokeDasharray:c,strokeDashoffset:c,strokeLinecap:"butt",strokeWidth:2,stroke:j.TV.accentPrimaryDefault,fill:"none"}],children:[(0,o.tZ)("svg",{width:"100%",height:"100%",className:d().dynamic([["23bd846669111030",[c]]]),children:(0,o.tZ)("circle",{r:10,cx:12,cy:12,style:{animationName:"countdown-animation",animationDuration:"".concat(t,"s"),animationDelay:"0s",animationTimingFunction:"linear"},className:d().dynamic([["23bd846669111030",[c]]])})}),(0,o.tZ)(d(),{id:"23bd846669111030",dynamic:[c],children:"@-webkit-keyframes countdown-animation{from{stroke-dashoffset:0px}to{stroke-dashoffset:".concat(c,"px}}@-moz-keyframes countdown-animation{from{stroke-dashoffset:0px}to{stroke-dashoffset:").concat(c,"px}}@-o-keyframes countdown-animation{from{stroke-dashoffset:0px}to{stroke-dashoffset:").concat(c,"px}}@keyframes countdown-animation{from{stroke-dashoffset:0px}to{stroke-dashoffset:").concat(c,"px}}")}),(0,o.tZ)(O.xv,{css:[Z.l0.position.absolute],variant:"small",multiline:!1,children:i})]})})}function Q(e){var n=e.onCompleted,t=[Z.l0.rowWithGap(4),Z.l0.align.center,Z.l0.justify.spaceBetween,Z.l0.p(6),Z.l0.pl(8),Z.l0.flex.growAndShrink(1),{borderWidth:1,borderStyle:"solid",background:j.TV.accentPrimaryDimmest,borderColor:j.TV.accentPrimaryDimmer,color:j.TV.accentPrimaryStrongest}];return(0,o.BX)(y.G,{css:t,children:[(0,o.BX)(y.G,{css:[Z.l0.rowWithGap(4),Z.l0.align.center],children:[(0,o.tZ)(O.xv,{variant:"small",children:"When you're ready, you can deploy from the"}),(0,o.tZ)(q.zx,{iconLeft:(0,o.tZ)($.Z,{}),text:"Release",disabled:!0,small:!0}),(0,o.tZ)(O.xv,{variant:"small",children:"menu!"})]}),(0,o.tZ)(K,{startTimeInSeconds:3,onCompleted:n})]})}function J(e){var n,t=e.repl,r=e.onClick,i=(0,w.Z)(a.useState(!1),2),l=i[0],c=i[1],u=(0,Y.gg)().isDeployableRepl,s=(0,V.Z)("workspace","workspace-deployments-webview-banner"),d=s.shouldDisplay,f=s.register,p=s.dismiss;a.useEffect((function(){f()}),[f]);var h=t.hostingDeploymentPermissions.canDeploy&&u,m="HostingDeployment"===(null===(n=t.hostingDeployment)||void 0===n?void 0:n.__typename)&&t.hostingDeployment.currentBuild;return h&&!m&&d?(0,o.tZ)(y.G,{children:l?(0,o.tZ)(Q,{onCompleted:function(){p()}}):(0,o.tZ)(z.U,{onClick:function(){(0,v.j)(v.U3.DEPLOY_PROJECT_SELECTED,{source:"workspace_webview_deploy_banner"}),p(),r()},onDismiss:function(){c(!0)},rounded:!1})}):null}var ee=t(5889),ne={container:(0,L.iv)(Z.l0.p(16),Z.l0.height("100%"),Z.l0.align.center),imageContainer:(0,L.iv)(Z.l0.height("100%"),Z.l0.colWithGap(16),Z.l0.align.center,Z.l0.justify.center,Z.l0.width(300)),image:(0,L.iv)(Z.l0.width(200))};function te(){return(0,o.tZ)(y.G,{css:ne.container,children:(0,o.BX)(y.G,{css:ne.imageContainer,children:[(0,o.tZ)("div",{css:ne.image,children:(0,o.tZ)(ee.Z,{src:"/public/images/run_pointer.svg",alt:"A play button with a mouse pointer",height:"250px",width:"400px"})}),(0,o.tZ)(O.h4,{level:3,variant:"subheadDefault",children:"Run this Repl to see the hosted output."})]})})}var re=t(10841),ie=function(e,n){return e===re.Ah.OFFLINE||e===re.Ah.STOPPING||e===re.Ah.IDLE&&"html"!==n.mode},oe=function(e,n){var t=e.fs,s=e.session,d=e.runner,f=e.trackUrlSelect,p=e.openPane,h=e.isVisible,w=e.className,x=e.containerRef,k=(0,u.Z)(),C=(0,c.I5)({variables:{id:k}}).data,S="Repl"===(null===C||void 0===C?void 0:C.repl.__typename)?C.repl:null,T=(0,a.useContext)(g),E=(0,M.S)().isCircuitBroken,R=(0,a.useRef)(null),I=(0,a.useState)(!1),G=I[0],D=I[1],P=(0,a.useState)(!1),B=P[0],A=P[1],U=(0,a.useState)(d.getRunState()),L=U[0],X=U[1],O=(0,a.useState)(0),V=O[0],z=O[1],j=(0,b.f6)();_(t,R);var q="html"===(null===S||void 0===S?void 0:S.lang.id)||"html_beta"===(null===S||void 0===S?void 0:S.lang.id),$=(0,H.P5)({controlName:"flag-webview-show-protocol",logFlagToAnalytics:!1}),Y=null;Y=S?T?(0,o.tZ)(m,{}):E?(0,o.tZ)(W,{}):ie(L,d)?(0,o.tZ)(te,{}):(0,o.tZ)("iframe",(0,r.Z)({title:"webview","data-cy":"ws-webview",ref:R,src:S.devUrl,onLoad:function(){return D(!0)},css:[Z.l0.flex.growAndShrink(1),{border:"none",display:"block",backgroundColor:Z.TV.white}]},F.Z)):null,(0,a.useEffect)((function(){var e=function(e){var n;if((new URL(e.origin).hostname.endsWith(".id.repl.co")||new URL(e.origin).hostname.endsWith(".id.firewalledreplit.co"))&&"object"===typeof e.data&&(null===(n=e.data)||void 0===n?void 0:n.type))switch(e.data.type){case"event":var t=e.data,o=t.event,a=t.payload;return void("error"===o?l.Tb(a):(0,v.j)(o,(0,i.Z)((0,r.Z)({},a),{replId:k,isHTML:q})));case"show-badge":return void z(e.data.count);case"ready":var c,u;if(e.data.wasShown)null===(c=R.current)||void 0===c||null===(u=c.contentWindow)||void 0===u||u.postMessage({type:"toggleDevtools",source:"automatic"},"*");return}},n=d.onStateChanged(X);if(R.current)return window.addEventListener("message",e),function(){window.removeEventListener("message",e),n()}}),[k,q,R.current,s,d]);var K=function(){z(0),A(!0),t.flush().then((function(){R.current&&(R.current.src+="")})).finally((function(){A(!1)}))};if((0,a.useImperativeHandle)(n,(function(){return{refresh:K}})),!S)return null;var Q=$?S.prodUrl:S.prodUrl.replace(/^(https?:)?\/\//,"");return(0,o.BX)(y.G,{className:w,css:[Z.l0.backgroundColor.backgroundDefault,Z.l0.height("100%"),Z.l0.borderRadius(4),{overflow:"hidden"}],innerRef:x,children:[(0,o.tZ)(N,{canEditDomain:S.currentUserPermissions.linkDomain,displayUrl:Q,url:S.prodUrl,trackUrlSelect:function(){f&&f(S.devUrl)},replId:k,refreshing:B,onRefresh:K,isKaboomDraw:j,canRefresh:!ie(L,d),iframe:R,isVisible:h,devToolsBadge:V,onToggleDevtools:function(){var e,n;z(0),null===(e=R.current)||void 0===e||null===(n=e.contentWindow)||void 0===n||n.postMessage({type:"toggleDevtools",source:"manual"},"*")}}),G?(0,o.tZ)(J,{repl:S,onClick:function(){return p({type:"deployments"})}}):null,Y]})},ae=(0,a.forwardRef)(oe)},83505:function(e,n,t){t.d(n,{Z:function(){return i}});var r=t(50959);function i(e){var n=e.container,t=e.runner,i=e.refreshWebView;(0,r.useEffect)((function(){var e,r=[];return"shellrunner"===t.mode&&r.push(t.onOutput((function(n){n&&n.includes("exit status 1")&&(e=Date.now())}))),r.push(n.onPortOpened((function(n){var t=n.isVnc;if(n.isForwarded&&!t){var r=Date.now();void 0!==e&&r-e<1e3||i()}}))),function(){return r.forEach((function(e){return e()}))}}),[n,i,t])}},95587:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(50959),i=t(10841);function o(e){var n=e.runner,t=e.refreshWebView;(0,r.useEffect)((function(){if("html"===n.mode)return n.onStateChanged((function(e){e===i.Ah.RUNNING&&t()}))}),[n,t])}},54733:function(e,n,t){t.d(n,{S:function(){return f},e:function(){return d}});var r=t(2272),i=t(10841),o=t(45285),a=t(29457),l=t(50959),c=t(91398),u=t(92683),s=(0,c.cn)(!1),d=function(){return(0,u.KO)(s)};function f(){var e=(0,o.Z)().runner,n=(0,r.Z)(d(),2),t=n[0],c=n[1];return l.useEffect((function(){if("shellrunner"===e.mode){var n,t=[],r=Date.now(),o=Array(6),l=0;return t.push(e.onLocalRun((function(){r=Date.now(),c(!1)}))),t.push(e.onStateChanged((function(e){if(n===i.Ah.RUNNING&&e===i.Ah.IDLE){var t=Date.now();o[l%6]=t;var u=o.at((l-5)%6);void 0!==u&&t-u<6e4&&null!=r&&r<u&&(c(!0),a.kg.info("webview circuit broken",{lastRunnerStops:JSON.stringify(o),runnerStopCount:l,lastLocalRunTimestamp:r})),l++,n=e}else n=e}))),function(){c(!1),t.forEach((function(e){return e()}))}}}),[e,c]),{isCircuitBroken:t}}},54659:function(e,n,t){t.d(n,{cR:function(){return y},Sp:function(){return Z}});var r=t(2272),i=t(50959),o=t(45285),a=t(48330),l=t(72006),c=t(43119),u=t(71440),s=t(24635),d=t(50216);function f(){var e=(0,c.Z)(["\n  query ReplConfigIsExtension($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        config {\n          isExtension\n        }\n      }\n    }\n  }\n"]);return f=function(){return e},e}function p(){var e=(0,c.Z)(["\n  mutation UpdateReplConfigIsExtension(\n    $replId: String!\n    $isExtension: Boolean!\n  ) {\n    updateRepl(input: { id: $replId, isExtension: $isExtension }) {\n      repl {\n        id\n        config {\n          isExtension\n        }\n      }\n    }\n  }\n"]);return p=function(){return e},e}var h={},v=(0,u.Ps)(f());var m=(0,u.Ps)(p());var g=t(48506);t(47031);function y(){var e,n=i.useContext(g.Z),t=(0,r.Z)(i.useState(null!==(e=null===n||void 0===n?void 0:n.replConfigIsExtension)&&void 0!==e&&e),2),a=t[0],l=t[1],c=(0,o.Z)().dotReplit;return i.useEffect((function(){return c.watch((function(e){var n,t,r,i=null!==(r=null===(n=e.config)||void 0===n||null===(t=n.extension)||void 0===t?void 0:t.isExtension)&&void 0!==r&&r;l(i)}))}),[c]),a}function Z(){var e=(0,a.Z)(),n=function(e){var n=(0,l.Z)({},h,e);return s.a(v,n)}({variables:{replId:e}}),t=n.data,c=n.loading,u=n.error,f=(0,r.Z)(function(e){var n=(0,l.Z)({},h,e);return d.D(m,n)}(),1)[0],p=function(){var e,n;return!c&&!u&&(!(!(null===t||void 0===t?void 0:t.repl)||"Repl"!==t.repl.__typename)&&(null!==(n=null===(e=t.repl.config)||void 0===e?void 0:e.isExtension)&&void 0!==n&&n))}(),g=(0,r.Z)(i.useState(!1),2),y=g[0],Z=g[1],b=(0,o.Z)().dotReplit;i.useEffect((function(){return b.watch((function(e){var n,t,r;Z(null!==(r=null===(n=e.config)||void 0===n||null===(t=n.extension)||void 0===t?void 0:t.isExtension)&&void 0!==r&&r)}))}),[b]),i.useEffect((function(){c||u||y!==p&&f({variables:{replId:e,isExtension:y},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:{id:e,__typename:"Repl",config:{__typename:"ReplConfig",isExtension:y}}}}})}),[c,u,e,p,y,f])}},77410:function(e,n,t){t.d(n,{AR:function(){return k},LF:function(){return x},R9:function(){return b},Ve:function(){return C},aq:function(){return E},gp:function(){return w},jF:function(){return R},q_:function(){return T}});var r=t(72006),i=t(43119),o=t(71440),a=t(24635);function l(){var e=(0,i.Z)(["\n  fragment TopLevelExtensionUser on User {\n    __typename\n    id\n    username\n    displayName\n    image\n    url\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,i.Z)(["\n  fragment TopLevelExtensionManifest on ExtensionManifest {\n    __typename\n    name\n    description\n    scopes {\n      name\n      reason\n    }\n    icon\n    tags\n    fileHandlers {\n      glob\n      handler\n      name\n      icon\n    }\n    tools {\n      handler\n      name\n      icon\n    }\n    background {\n      page\n    }\n  }\n"]);return c=function(){return e},e}function u(){var e=(0,i.Z)(["\n  fragment TopLevelExtension on Extension {\n    __typename\n    id\n    url\n    name\n    description\n    user {\n      id\n      ...TopLevelExtensionUser\n    }\n    manifest {\n      ... on ExtensionManifest {\n        ...TopLevelExtensionManifest\n      }\n      ... on ExtensionManifestError {\n        message\n      }\n    }\n    installCount\n    isBlessed\n    isListed\n    enableInternalApi\n  }\n  ","\n  ","\n"]);return u=function(){return e},e}function s(){var e=(0,i.Z)(["\n  fragment TopLevelExtensionInstallation on ExtensionInstallation {\n    __typename\n    id\n    repl {\n      id\n    }\n    user {\n      id\n    }\n    extension {\n      id\n      ...TopLevelExtension\n    }\n    installer {\n      id\n    }\n  }\n  ","\n"]);return s=function(){return e},e}function d(){var e=(0,i.Z)(["\n  query ExtensionSystemUserContext {\n    currentUser {\n      id\n      isAdmin: hasRole(role: ADMIN)\n      isStaff: hasRole(role: REPLIT_STAFF)\n    }\n  }\n"]);return d=function(){return e},e}function f(){var e=(0,i.Z)(["\n  query ExtensionInstallationById($installationId: String!) {\n    extensionInstallationById(id: $installationId) {\n      __typename\n      ... on ExtensionInstallation {\n        ...TopLevelExtensionInstallation\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function p(){var e=(0,i.Z)(["\n  query ExtensionInstallationsInRepl($replId: String!) {\n    extensionInstallations(replId: $replId) {\n      __typename\n      ... on ExtensionInstallationList {\n        installations {\n          ...TopLevelExtensionInstallation\n        }\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return p=function(){return e},e}function h(){var e=(0,i.Z)(["\n  query ExtensionReplHostedUrl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        hostedUrl\n      }\n    }\n  }\n"]);return h=function(){return e},e}function v(){var e=(0,i.Z)(["\n  mutation InstallExtension($extensionId: String!, $replId: String) {\n    installExtension(extensionId: $extensionId, replId: $replId) {\n      __typename\n      ... on ExtensionInstallation {\n        ...TopLevelExtensionInstallation\n        extension {\n          id\n          installation(replId: $replId) {\n            ...TopLevelExtensionInstallation\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return v=function(){return e},e}function m(){var e=(0,i.Z)(["\n  mutation UninstallExtension($installationId: String!, $replId: String) {\n    uninstallExtension(installationId: $installationId) {\n      __typename\n      ... on ExtensionInstallation {\n        ...TopLevelExtensionInstallation\n        extension {\n          id\n          installation(replId: $replId) {\n            ...TopLevelExtensionInstallation\n          }\n        }\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}var g={},y=(0,o.Ps)(l()),Z=(0,o.Ps)(c()),b=(0,o.Ps)(u(),y,Z),w=(0,o.Ps)(s(),b),x=(0,o.Ps)(d());var k=(0,o.Ps)(f(),w);var C=(0,o.Ps)(p(),w);var S=(0,o.Ps)(h());function T(e){var n=(0,r.Z)({},g,e);return a.a(S,n)}var E=(0,o.Ps)(v(),w);var R=(0,o.Ps)(m(),w)},18952:function(e,n,t){t.d(n,{LM:function(){return r.LM},Mu:function(){return i.Mu},WF:function(){return r.WF},WG:function(){return i.WG},jx:function(){return i.jx},ot:function(){return r.ot},r9:function(){return i.r9}});var r=t(35759),i=t(7909)},35759:function(e,n,t){t.d(n,{EO:function(){return G},I1:function(){return P},Kf:function(){return _},LM:function(){return I},WF:function(){return R},bN:function(){return T},dI:function(){return D},ot:function(){return E},zm:function(){return B}});var r=t(57135),i=t(81962),o=t(72006),a=t(4405),l=t(2272),c=t(96583),u=t(48330),s=t(625),d=t(40176),f=t(91398),p=t(19334),h=t.n(p),v=t(50959),m=t(91046),g=t(97836),y=t(85234),Z=t.n(y),b=t(44945),w=t(77410),x=t(98449),k=t(7909),C=t(99822),S=t(47031);function T(){var e=(0,C.E4)(k.We);return v.useCallback(function(){var n=(0,r.Z)((function(n){return(0,c.__generator)(this,(function(t){return e({installationId:n}),[2]}))}));return function(e){return n.apply(this,arguments)}}(),[e])}function E(){var e=L(),n=e.throwSystemError,t=e.throwExtensionError,l=(0,C.E4)(k.nk),u=(0,C.ZC)(k.Ol),s=(0,C.Ld)();return v.useCallback(function(){var e=(0,r.Z)((function(e){var r,d,f,p,v,y,Z,w,C,T,E,R,I,G,D,_,P,B,A,U;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:return r=e.installationId,d=e.forceRefetch,f=void 0===d||d,[4,(0,x.Al)()];case 1:return!(p=c.sent())||p.error?(n({friendlyMessage:"Failed to load user context",error:p.error}),[2]):(v=p.result.userHasInternalApiEnabled,(y=s.get(k.Lq).find((function(e){return e.installationId===r})))?[4,(0,x.V9)(y.baseUrl)]:[3,3]);case 2:return Z=c.sent(),w=u.createLogger({extensionId:y.extensionId,installationId:y.installationId,local:!0}),Z.error?(C=(0,a.Z)((0,o.Z)({},y),{manifest:(0,m.fF)(),enableExperimentalApi:!1,enableInternalApi:!1,logger:w.createLogger({extensionName:"Unnamed Extension"}),isLocal:!0}),u.info("Adding extension: ".concat(C.manifest.name),{extensionArgs:h()(C,["extensionId","installationId","baseUrl","manifest","enableExperimentalApi","enableInternalApi","isLocal"]),local:C.isLocal,error:!0}),l(C),T="Failed to load extension manifest",(0,i.Z)(Z.error,b.jm)&&(T=Z.error.issues.map((function(e){return"".concat(e.path,": ").concat(e.message)})).join("\n")),t({extensionId:y.extensionId,installationId:y.installationId,extensionError:{error:Z.error,friendlyMessage:T}}),[2]):(E=(0,g.MU)(Z.result,"experimental-api"),R=(0,a.Z)((0,o.Z)({},y),{manifest:Z.result,enableExperimentalApi:E,enableInternalApi:v,logger:w.createLogger({extensionName:Z.result.name}),isLocal:!0}),u.info("Adding extension: ".concat(R.manifest.name),{extensionArgs:h()(R,["extensionId","installationId","baseUrl","manifest","enableExperimentalApi","enableInternalApi","isLocal"]),local:!0}),l(R),[3,5]);case 3:return[4,(0,x.mr)(r,f)];case 4:return(I=c.sent()).error?(n({friendlyMessage:"Something went wrong while downloading an extension",error:I.error}),[2]):(G=I.result)?(D=G.extension)?D.manifest?"ExtensionManifestError"===D.manifest.__typename?(t({extensionId:(0,S.T8)(D.id),installationId:(0,S.Ad)(G.id),extensionError:{friendlyMessage:"An error occurred while loading the extension manifest: ".concat(D.manifest.message),error:new Error(D.manifest.message)}}),[2]):D.manifest&&"ExtensionManifest"===D.manifest.__typename?(_=(0,m.tr)(D.manifest),P=(0,g.MU)(_,"experimental-api"),B=(0,S.T8)(D.id),A=D.enableInternalApi,U={extensionId:B,installationId:r,manifest:_,baseUrl:(0,m.BY)(D.url),enableExperimentalApi:P,enableInternalApi:v||A,logger:u.createLogger({extensionId:B,installationId:r,extensionName:_.name,local:!1}),isLocal:!1},u.info("Adding extension: ".concat(U.manifest.name),{extensionArgs:h()(U,["extensionId","installationId","baseUrl","manifest","enableExperimentalApi","enableInternalApi","isLocal"]),local:!1}),l(U),[2,G]):(t({extensionId:(0,S.T8)(D.id),installationId:(0,S.Ad)(G.id),extensionError:{friendlyMessage:"An error occurred while loading the extension manifest",error:new Error("Expected extension manifest to be defined")}}),[2]):(t({extensionId:(0,S.T8)(D.id),installationId:(0,S.Ad)(G.id),extensionError:{friendlyMessage:"Extension failed to install",error:new Error("Expected extension manifest to be defined")}}),[2]):(n({friendlyMessage:"Extension failed to install",error:new Error("Expected extension to be defined")}),[2]):(n({friendlyMessage:"Extension failed to install",error:new Error("Expected installation to be defined")}),[2]);case 5:return[2]}}))}));return function(n){return e.apply(this,arguments)}}(),[l,t,n,s,u])}function R(){var e=E(),n=L().throwSystemError;return v.useCallback(function(){var t=(0,r.Z)((function(t){var r,i,o,a,l;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:return r=t.extensionId,i=t.replId,[4,(0,x.Wc)({extensionId:r,replId:i})];case 1:return(l=c.sent()).error?(n({error:l.error,friendlyMessage:"Something went wrong while installing an extension"}),[2]):((0,s.j)(s.U3.EXTENSION_INSTALLED,{name:null===(o=l.result)||void 0===o||null===(a=o.extension)||void 0===a?void 0:a.name,extensionId:r}),[4,e({installationId:(0,S.Ad)(l.result.id)})]);case 2:return c.sent(),[2,l.result]}}))}));return function(e){return t.apply(this,arguments)}}(),[e,n])}function I(){var e=T(),n=(0,C.Ld)(),t=L().throwSystemError;return v.useCallback(function(){var i=(0,r.Z)((function(r){var i,o,a,l;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:return i=r.installationId,o=r.replId,a=n.get(k._t),(l=a.find((function(e){return e.installationId===i})))?l.installationId&&l.extensionId?((0,s.j)(s.U3.EXTENSION_UNINSTALLED,{name:l.manifest.name,extensionId:l.extensionId}),[4,(0,x.Y4)({installationId:l.installationId,replId:o})]):(t({friendlyMessage:"Failed to uninstall extension",error:new Error("Expected installationId to be defined")}),[2]):(t({friendlyMessage:"Extension appears to be already uninstalled",error:new Error("Expected extension to be defined")}),[2]);case 1:return c.sent(),[4,e(l.installationId)];case 2:return c.sent(),[2]}}))}));return function(e){return i.apply(this,arguments)}}(),[e,n,t])}function G(){var e=T(),n=E();return v.useCallback(function(){var t=(0,r.Z)((function(t){return(0,c.__generator)(this,(function(r){switch(r.label){case 0:return[4,e(t)];case 1:return r.sent(),[4,n({installationId:t,forceRefetch:!0})];case 2:return r.sent(),[2]}}))}));return function(e){return t.apply(this,arguments)}}(),[e,n])}function D(){var e=function(){var e=E(),n=(0,C.ZC)(k.Ol),t=L().throwSystemError;return v.useCallback(function(){var i=(0,r.Z)((function(r){var i,o,a,l,u,s,d,f,p;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:return[4,(0,x.Zw)(r)];case 1:if((i=c.sent()).error)return t({friendlyMessage:"Failed to load installed extensions",error:i.error}),[2];o=!0,a=!1,l=void 0,c.label=2;case 2:c.trys.push([2,9,10,11]),u=i.result[Symbol.iterator](),c.label=3;case 3:if(o=(s=u.next()).done)return[3,8];d=s.value,c.label=4;case 4:return c.trys.push([4,6,,7]),[4,e({installationId:(0,S.Ad)(d.id),forceRefetch:!0})];case 5:return c.sent(),[3,7];case 6:return f=c.sent(),n.error("Extension Loading error: ".concat(f.message),{extension:!0,errors:f.message}),[3,7];case 7:return o=!0,[3,3];case 8:return[3,11];case 9:return p=c.sent(),a=!0,l=p,[3,11];case 10:try{o||null==u.return||u.return()}finally{if(a)throw l}return[7];case 11:return[2]}}))}));return function(e){return i.apply(this,arguments)}}(),[e,t,n])}(),n=(0,C.E4)(k.Ol),t=(0,C.E4)(k.zk),i=(0,l.Z)(v.useState(!1),2),o=i[0],a=i[1],u=(0,l.Z)(v.useState(null),2),s=u[0],f=u[1],p=(0,l.Z)(v.useState(null),2),h=p[0],m=p[1];return v.useEffect((function(){if(s&&h&&!o){var n=s.replId;a(!0),e(n)}}),[s,h,e,o]),v.useCallback((function(e){var r=e.replId,i=e.userId;if(!o){f({replId:r,userId:i});var a=(0,d.Z)({extension:!0,isInitialized:!0,replId:r,userId:i},{onLog:function(e){t(e)}});m(a),n(a)}}),[n,o,t])}function _(){var e=E(),n=(0,k.qr)(),t=(0,k.Mu)(),i=(0,C.E4)(k.ot);return v.useCallback(function(){var o=(0,r.Z)((function(r){var o,a,l,u;return(0,c.__generator)(this,(function(c){return o=(0,m.BY)(r),(a=n.find((function(e){return e.baseUrl===o})))||(l=(0,S.T8)(Z()()),u=(0,S.Ad)(Z()()),i(a={extensionId:l,installationId:u,baseUrl:o})),t.find((function(e){return e.extensionId===(null===a||void 0===a?void 0:a.extensionId)}))||e({installationId:a.installationId}),[2]}))}));return function(e){return o.apply(this,arguments)}}(),[n,t,i,e])}function P(){var e=(0,u.Z)(),n=(0,w.q_)({variables:{replId:e}}).data,t=(0,C.E4)(k.M1),i=(0,C.Ld)(),o=E();return v.useCallback((0,r.Z)((function(){var e;return(0,c.__generator)(this,(function(r){switch(r.label){case 0:return"Repl"!==(null===n||void 0===n?void 0:n.repl.__typename)?[2]:(e=t(n.repl.hostedUrl),[4,o({installationId:e.installationId,forceRefetch:!0})]);case 1:return r.sent(),[2,i.get(k._t).find((function(n){return n.installationId===e.installationId}))]}}))})),[n,t,o,i])}function B(){var e=(0,u.Z)(),n=(0,w.q_)({variables:{replId:e}}).data,t=(0,C.E4)(k.M1),r=(0,k.Mu)();return v.useMemo((function(){if("Repl"===(null===n||void 0===n?void 0:n.repl.__typename)){var e=t(n.repl.hostedUrl);return r.find((function(n){return e.installationId===n.installationId}))}}),[n,r,t])}var A=(0,f.cn)(null,(function(e,n,t){var r=e(k.Ol);n(k.wQ,t),r.error("Extension System Error: ".concat(t.error.message),{extensionSystem:!0,originalError:t.error.message,friendlyMessage:t.friendlyMessage})})),U=(0,f.cn)(null,(function(e,n,t){var r=e(k._t),i=e(k.Ol),o=r.find((function(e){return e.extensionId===t.extensionId}));if(i.error("Extension Error: ".concat(t.extensionError.friendlyMessage),{extension:!0,extensionId:t.extensionId,originalError:t.extensionError.error.message,friendlyMessage:t.extensionError.friendlyMessage}),!o)return n(k.nk,{extensionId:t.extensionId,installationId:t.installationId,manifest:(0,m.fF)({name:t.extensionId}),baseUrl:"",enableExperimentalApi:!1,enableInternalApi:!1,logger:i.createLogger({extensionId:t.extensionId,extensionName:t.extensionId,installationId:t.installationId,local:void 0}),isLocal:null}),void n(k.f4,{extensionId:t.extensionId,extensionError:t.extensionError});n(k.f4,{extensionId:t.extensionId,extensionError:t.extensionError})}));function L(){return{throwSystemError:(0,C.E4)(A),throwExtensionError:(0,C.E4)(U)}}},98449:function(e,n,t){t.d(n,{Al:function(){return Z},V9:function(){return g},Wc:function(){return u},Y4:function(){return d},Zw:function(){return v},mr:function(){return p}});var r=t(57135),i=t(96583),o=t(68216),a=t(12379),l=t(91046),c=t(77410);function u(e){return s.apply(this,arguments)}function s(){return(s=(0,r.Z)((function(e){var n,t,r,o,l,u;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return n=e.extensionId,t=e.replId,a.l?[4,a.l.mutate({mutation:c.aq,variables:{extensionId:n,replId:t}})]:[2,{error:new Error("expected apolloClient to be initialized"),result:null}];case 1:return(o=i.sent()).errors&&o.errors.length>0?(l=o.errors.map((function(e){return e.message})).join(", "),[2,{error:new Error("Error when installing extension: "+l),result:null}]):(u=null===(r=o.data)||void 0===r?void 0:r.installExtension)?"UnauthorizedError"===(null===u||void 0===u?void 0:u.__typename)||"UserError"===(null===u||void 0===u?void 0:u.__typename)?[2,{error:new Error("Error when installing extension: "+u.message),result:null}]:u.extension?u.extension.url?[2,{result:u,error:null}]:[2,{error:new Error("Error when installing extension: Extension does not have a URL and cannot be installed"),result:null}]:[2,{error:new Error("Error when installing extension: expected extension to be set"),result:null}]:[2,{error:new Error("Error when installing extension: expected result"),result:null}]}}))}))).apply(this,arguments)}function d(e){return f.apply(this,arguments)}function f(){return(f=(0,r.Z)((function(e){var n,t,r,o,l,u;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return n=e.installationId,t=e.replId,a.l?[4,a.l.mutate({mutation:c.jF,variables:{installationId:n,replId:t}})]:[2,{error:new Error("expected apolloClient to be initialized"),result:null}];case 1:return(o=i.sent()).errors&&o.errors.length>0?(l=o.errors.map((function(e){return e.message})).join(", "),[2,{error:new Error("Error when uninstalling extension: "+l),result:null}]):(u=null===(r=o.data)||void 0===r?void 0:r.uninstallExtension)?"NotFoundError"===(null===u||void 0===u?void 0:u.__typename)||"UserError"===(null===u||void 0===u?void 0:u.__typename)?[2,{error:new Error("Error when uninstalling extension: "+u.message),result:null}]:[2,{result:u,error:null}]:[2,{error:new Error("Error when uninstalling extension: expected result"),result:null}]}}))}))).apply(this,arguments)}function p(e){return h.apply(this,arguments)}function h(){return h=(0,r.Z)((function(e){var n,t,r,o=arguments;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return n=o.length>1&&void 0!==o[1]&&o[1],a.l?[4,a.l.query({query:c.AR,variables:{installationId:e},fetchPolicy:n?"network-only":"cache-first"})]:[2,{error:new Error("expected apolloClient to be initialized"),result:null}];case 1:return t=i.sent(),"ExtensionInstallation"!==(r=t.data.extensionInstallationById).__typename?[2,{error:new Error("Expected to find extension installation"),result:null}]:r.extension?[2,{result:r,error:null}]:[2,{error:new Error("Expected installation.extension"),result:null}]}}))})),h.apply(this,arguments)}function v(e){return m.apply(this,arguments)}function m(){return(m=(0,r.Z)((function(e){var n,t;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return a.l?[4,a.l.query({query:c.Ve,variables:{replId:e}})]:[2,{error:new Error("expected apolloClient to be initialized"),result:null}];case 1:return n=r.sent(),"ExtensionInstallationList"!==(t=n.data.extensionInstallations).__typename?[2,{error:new Error("Expected to find ExtensionInstallationList"),result:null}]:[2,{result:t.installations,error:null}]}}))}))).apply(this,arguments)}function g(e){return y.apply(this,arguments)}function y(){return(y=(0,r.Z)((function(e){var n,t,r,a,c;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:n=(0,l.BP)(e),i.label=1;case 1:return i.trys.push([1,4,,5]),[4,fetch(n)];case 2:return[4,i.sent().text()];case 3:return t=i.sent(),r=o.ku(t),(a=(0,l.U4)(r)).error?[2,{error:a.error,result:null}]:[2,{result:a.manifest,error:null}];case 4:return"SyntaxError"===(c=i.sent()).name?[2,{error:new Error("Error when fetching manifest: invalid JSON"),result:null}]:[2,{error:new Error("Error when fetching manifest: "+c.message),result:null}];case 5:return[2]}}))}))).apply(this,arguments)}function Z(){return b.apply(this,arguments)}function b(){return(b=(0,r.Z)((function(){var e,n;return(0,i.__generator)(this,(function(t){switch(t.label){case 0:return a.l?[4,a.l.query({query:c.LF,fetchPolicy:"cache-first"})]:[2,{error:new Error("expected apolloClient to be initialized"),result:null}];case 1:return e=t.sent(),(n=e.data.currentUser)&&"CurrentUser"===n.__typename?[2,{result:{userHasInternalApiEnabled:n.isAdmin||n.isStaff},error:null}]:[2,{error:new Error("Expected to find CurrentUser"),result:null}]}}))}))).apply(this,arguments)}},7909:function(e,n,t){t.d(n,{FX:function(){return T},Lq:function(){return m},M1:function(){return k},Mu:function(){return G},Ol:function(){return y},Sj:function(){return Z},WG:function(){return B},We:function(){return C},_t:function(){return v},c_:function(){return P},f4:function(){return S},jx:function(){return D},nk:function(){return w},ot:function(){return x},qr:function(){return U},r9:function(){return _},s6:function(){return A},wQ:function(){return g},zk:function(){return b}});var r=t(57135),i=t(72006),o=t(4405),a=t(9970),l=t(96583),c=t(91398),u=t(47031),s=t(92153),d=t(99822),f=t(85234),p=t.n(f),h=t(40176),v=(0,c.cn)([]);var m=(0,c.cn)([]),g=(0,c.cn)(null),y=(0,c.cn)((0,h.Z)({extension:!0,isInitialized:!1},{onLog:function(){throw new Error("Logged before extension system was initialized.")}})),Z=(0,c.cn)([]),b=(0,c.cn)(null,(function(e,n,t){var r=e(Z),i=(0,s.ZP)(r,(function(e){e.push(t),e.length>1e3&&e.splice(0,e.length-1e3)}));n(Z,i)})),w=(0,c.cn)(null,function(){var e=(0,r.Z)((function(e,n,t){return(0,l.__generator)(this,(function(r){if(e(v).find((function(e){return e.extensionId===t.extensionId})))throw new Error("Extension already loaded");return n(v,(function(e){return(0,s.ZP)(e,(function(e){var n=function(e){var n,t=e.baseUrl,r=e.extensionId,i=e.installationId,o=e.manifest,a=e.enableExperimentalApi,l=e.enableInternalApi,u=e.logger;return{baseUrl:t,extensionId:r,installationId:i,manifest:o,isLocal:e.isLocal,stateAtom:(0,c.cn)({error:null,panes:[],scopes:new Set(null===(n=o.scopes)||void 0===n?void 0:n.map((function(e){return e.name}))),enableExperimentalApi:a,enableInternalApi:l,commands:new Map}),logger:u}}(t);e.push(n)}))})),[2]}))}));return function(n,t,r){return e.apply(this,arguments)}}()),x=(0,c.cn)(null,function(){var e=(0,r.Z)((function(e,n,t){return(0,l.__generator)(this,(function(r){if(e(m).find((function(e){return e.extensionId===t.extensionId||e.installationId===t.installationId||e.baseUrl===t.baseUrl})))throw new Error("Extension already loaded");return n(m,(function(e){return(0,s.ZP)(e,(function(e){e.push(t)}))})),[2]}))}));return function(n,t,r){return e.apply(this,arguments)}}()),k=(0,c.cn)(null,(function(e,n,t){var r=e(m).find((function(e){return e.baseUrl===t}));if(r)return r;var i={baseUrl:t,extensionId:(0,u.T8)(p()()),installationId:(0,u.Ad)(p()())};return n(m,(function(e){return(0,s.ZP)(e,(function(e){e.push(i)}))})),i})),C=(0,c.cn)(null,function(){var e=(0,r.Z)((function(e,n,t){return(0,l.__generator)(this,(function(e){return n(v,(function(e){return(0,s.ZP)(e,(function(e){var n=e.findIndex((function(e){return"extensionId"in t?e.extensionId===t.extensionId:e.installationId===t.installationId}));-1!==n&&e.splice(n,1)}))})),[2]}))}));return function(n,t,r){return e.apply(this,arguments)}}()),S=(0,c.cn)(null,(function(e,n,t){var r=e(v).find((function(e){return e.extensionId===t.extensionId}));if(!r)throw new Error("Extension not found");n(r.stateAtom,(function(e){return(0,s.ZP)(e,(function(e){e.error=t.extensionError}))}))})),T=(0,c.cn)(null,(function(e,n,t){var r=t.command.data.id;if(!r)throw new Error("A top level command must have an id");n(t.extensionStateAtom,(function(e){return(0,s.ZP)(e,(function(e){e.commands.set(r,t.command)}))}))})),E=(0,c.cn)((function(e){return e(v).flatMap((function(n){return(0,a.Z)(e(n.stateAtom).commands.values())}))})),R=(0,c.cn)((function(e){return e(v).map((function(e){var n;return null===(n=e.manifest.fileHandlers)||void 0===n?void 0:n.map((function(n){return(0,o.Z)((0,i.Z)({},n),{extension:e})}))})).flat().filter((function(e){return!!e}))})),I=(0,c.cn)((function(e){return e(v).map((function(e){var n;return null===(n=e.manifest.tools)||void 0===n?void 0:n.map((function(n){return(0,o.Z)((0,i.Z)({},n),{extension:e})}))})).flat().filter((function(e){return!!e}))}));function G(){return(0,d.ZC)(v)}function D(e){return G().find((function(n){return n.installationId===e}))}function _(e){var n=D(e);return n&&e?n.stateAtom:null}function P(){return(0,d.ZC)(R)}function B(){return(0,d.ZC)(I)}function A(){return(0,d.ZC)(E)}function U(){return(0,d.ZC)(m)}},99822:function(e,n,t){t.d(n,{E4:function(){return d},Ld:function(){return u},Wv:function(){return f},ZC:function(){return s}});var r=t(2272),i=t(74985),o=t(91398),a=t(92683),l=t(50959),c=(0,l.createContext)(null);function u(){return function(){var e=(0,l.useContext)(c);if(!e)throw new Error("Expected extensions context");return e}().store}function s(e){var n=u();return(0,a.Dv)(e,{store:n})}var d=function(e){var n=u();return(0,a.b9)(e,{store:n})};function f(e){var n=e.children,t=(0,r.Z)(l.useState((function(){return(0,o.MT)()})),1)[0];return(0,i.tZ)(c.Provider,{value:{store:t},children:n})}},47031:function(e,n,t){t.d(n,{Ad:function(){return o},T8:function(){return i},YC:function(){return r},ZC:function(){return a}});var r;Symbol("extensionId"),Symbol("installationId"),Symbol("extensionCommandId");function i(e){return e}function o(e){return e}function a(e){if(!e.data.id)throw new Error("A Command at the top level must have an id");if(!e.data.contributions||0===e.data.contributions.length)throw new Error("A Command at the top level must describe one or more contributions");return e}!function(e){e.CommandBar="commandbar",e.FiletreeContextMenu="filetree-context-menu"}(r||(r={}))},40176:function(e,n,t){t.d(n,{Z:function(){return d},i:function(){return r}});var r,i=t(57389),o=t(72006),a=t(4405),l=t(29457),c=t(59245),u=t.n(c),s=t(49500);function d(e,n){var t=function(t){var a,c,d,f,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{logLevel:r.debug},h=null!==(a=(c={},(0,i.Z)(c,r.debug,l.kg.debug),(0,i.Z)(c,r.warn,l.kg.warn),(0,i.Z)(c,r.info,l.kg.info),(0,i.Z)(c,r.error,l.kg.error),c)[p.logLevel])&&void 0!==a?a:l.kg.debug,v=null!==(d=(f={},(0,i.Z)(f,r.debug,s.debug),(0,i.Z)(f,r.warn,s.warn),(0,i.Z)(f,r.info,s.info),(0,i.Z)(f,r.error,s.error),f)[p.logLevel])&&void 0!==d?d:s.debug;v(t,p),h(t,u()((0,o.Z)({},p,e),["replId","logLevel"])),n.onLog((0,o.Z)({message:t},p,e))},c={context:e,info:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t(e,(0,a.Z)((0,o.Z)({},n),{logLevel:r.info}))},warn:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t(e,(0,a.Z)((0,o.Z)({},n),{logLevel:r.warn}))},error:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t(e,(0,a.Z)((0,o.Z)({},n),{logLevel:r.error}))},createLogger:function(t){return d((0,o.Z)({},e,t),n)}};return c}!function(e){e.debug="debug",e.info="info",e.warn="warn",e.error="error"}(r||(r={}))},10507:function(e,n,t){t.d(n,{aG:function(){return v},pu:function(){return h}});var r=t(57370),i=t(24746);t(50959);var o=t(45285),a=t(4821),l=t(72006),c=t(43119),u=t(71440),s=t(24635);function d(){var e=(0,c.Z)(["\n  query WorkspaceActiveUsers($userIds: [Int!]!) {\n    usersByIds(ids: $userIds) {\n      id\n      image\n    }\n  }\n"]);return d=function(){return e},e}var f={},p=(0,u.Ps)(d());function h(e){var n=function(e){var n=(0,l.Z)({},f,e);return s.a(p,n)}({variables:{userIds:e.slice(0,a.I)},skip:0===e.length}).data;return n?new Map(n.usersByIds.map((function(e){return[e.id,e.image]}))):null}function v(){var e=function(){var e=(0,o.Z)().presence,n=(0,i.Z)({presence:e}),t=(0,r.d)();return n.filter((function(e){return e.id!==t}))}(),n=h(e.map((function(e){return e.id}))),t=[],a=!0,l=!1,c=void 0;try{for(var u,s=e[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var d=u.value;t.push({id:d.id,username:d.username,color:d.color,image:null===n||void 0===n?void 0:n.get(d.id)})}}catch(f){l=!0,c=f}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}return t}},74121:function(e,n,t){t.d(n,{Cl:function(){return a},VD:function(){return d},uN:function(){return s}});var r=t(91398),i=t(92683),o=t(50959),a=(0,o.createContext)(null),l=(0,r.cn)(null),c=(0,r.cn)(null,(function(e,n,t){n(l,t)}));function u(){var e=(0,o.useContext)(a);if(!e)throw new Error("Expected store in context");return e}function s(){return(0,i.Dv)(l,{store:u()})}function d(e){var n=(0,i.Dv)(l,{store:u()}),t=(0,i.b9)(c,{store:u()});(0,o.useEffect)((function(){n!==e&&t(e)}),[e,n,t])}},31672:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(45285),i=t(50959),o=t(87978);function a(e){var n=(0,r.Z)().fs,t=(0,i.useCallback)((function(t,r){var i=t.code,a=t.insertAt,l=t.newLine,c=void 0===l||l;if(!e||(0,o.T3)(e)||(0,o.sL)(e)||(0,o.IQ)(e))throw new Error("Invalid file, this should never happen");if(0!==i.length)var u=n.watchTextFile(e,{onReady:function(e){var t=e.initialContent,o=e.writeChange,l=t.toString(),s="end"===a?l.length:a,d=i;c&&(0!==s&&s!==l.length&&-1===(s=l.indexOf("\n",s))&&(s=l.length),0!==s&&"\n"!==l[s-1]&&(d="\n"+d),"\n"!==l[s]&&(d+="\n")),o({from:s,insert:d},r),n.flush().finally((function(){u()}))}})}),[e,n]);return!e||(0,o.T3)(e)||(0,o.sL)(e)?null:t}},20125:function(e,n,t){t.d(n,{Z:function(){return y}});var r=t(57135),i=t(9970),o=t(96583),a=t(50959),l=t(83293),c=t(625),u=t(12583),s=t(4561),d=t(13716),f=t(45285),p=t(13424),h=t(87978),v=t(49514),m=t(84524),g=t(1468);function y(e){var n=e.moveOrDeleteFile,t=(0,f.Z)().fs,y=(0,v.K)(),Z=(0,a.useRef)(new Map),b=(0,d.ex)(),w=(0,a.useState)(!1),x=w[0],k=w[1],C=(0,a.useState)(!1),S=C[0],T=C[1],E=(0,a.useState)([]),R=E[0],I=E[1],G=(0,m.k)(),D=(0,p.uV)(),_=R.map((function(e){return e.path})).map((function(e){return{title:e,path:e}})),P=(0,a.useState)(),B=P[0],A=P[1],U=(0,d.Gg)();(0,a.useEffect)((function(){if(b&&!Z.current.has(b)&&b!==u.rq){var e=function(e){var t=e.node.path;U(e.eventType===s.kS.Move?{path:t,type:"move",to:e.to}:{path:t,type:"delete"}),n&&n(e),Z.current.delete(b),I((function(e){return e.filter((function(e){return e.path!==b}))}))};(0,h.Mb)(b)?t.watchTextFile(b,{onMoveOrDelete:e,onError:function(e,n){e.code||(t.flush(),t.persist({skipDebounce:!0}),g.c_.withScope((function(t){n&&t.setExtras(n),t.setExtra("origin","useContentsDiverged: fs.watchTextFile"),t.setTag("ot",!0),t.setTag("bsod",!1),g.c_.captureException(e)})))},onReconnectFail:function(e,n){I((function(t){return(0,i.Z)(t.filter((function(e){return e.path!==b}))||[]).concat([{path:b,prompt:n,cb:e}])})),y("user:ot:diverged",{path:b,divergence:n}),k(!0),B||A(b)}}):t.watchFile(b,{onChange:function(){},onMoveOrDelete:e}),Z.current.set(b,!0)}}),[b,t,D,n,B,y,U]);var L,X,N=function(){var e=(0,r.Z)((function(e){return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return(0,c.j)(c.U3.FILE_RECONNECT_FALLBACK_CHOSEN,{choice:e}),(0,c.j)(c.U3.CONTENTS_DIVERGED_ACTION,{action:"local"===e?"client":"server"}),T(!0),[4,Promise.all(R.map((function(n){return I((function(e){var t=e.filter((function(e){return e.path!==n.path}));return 0===t.length?k(!1):A(t[0].path),t})),n.cb(e)})))];case 1:return n.sent(),T(!1),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),M=B?R.find((function(e){return e.path===B})):null,F=null===M||void 0===M?void 0:M.prompt,O=B,W=(0,l.J)({left:{code:null!==(L=null===F||void 0===F?void 0:F.localContent)&&void 0!==L?L:"",filePath:O},right:{code:null!==(X=null===F||void 0===F?void 0:F.remoteContent)&&void 0!==X?X:"",filePath:O}}),H=W.left,V=W.right;return{isConverging:S,didContentsDiverge:x,showMoreDetail:G,failedFiles:R,failedFilesOptions:_,selectedFile:B,setSelectedFile:A,reviewingPrompt:F,onChoice:N,local:H,remote:V}}},79410:function(e,n,t){t.d(n,{F:function(){return ve}});var r,i,o,a=t(57135),l=t(72006),c=t(4405),u=t(2272),s=t(96583),d=t(71813),f=t(13233),p=t(48330),h=t(75885),v=t(77502),m=t(45285);!function(e){e[e.NONE=0]="NONE",e[e.PUSH=1]="PUSH",e[e.CLONE=2]="CLONE",e[e.FETCH=3]="FETCH",e[e.GITHUB_CREATE=4]="GITHUB_CREATE",e[e.GITHUB_GET_INFO=5]="GITHUB_GET_INFO"}(r||(r={})),function(e){e.None="NONE",e.NoMergeBase="NO_MERGE_BASE",e.AuthFetchError="AUTH_FETCH_ERROR",e.IndexFilesCorrupted="INDEX_FILES_CORRUPTED"}(i||(i={})),function(e){e[e.UNTRACKED=0]="UNTRACKED",e[e.MODIFIED=1]="MODIFIED",e[e.MOVED=2]="MOVED",e[e.DELETED=3]="DELETED"}(o||(o={}));r.NONE,i.None;var g="git log -0 2>/dev/null && ".concat("git symbolic-ref HEAD --short"," || echo 'HEAD'");function y(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return["bash","-c",n.join("&&")]}var Z=function(e,n){return y('[ ! -d ".git" ]',"git init","git checkout -b main",'git config user.name "'.concat(n.username||"Replit user",'"'),'git config user.email "<>"',"touch .git/branches/.keep","touch .git/info/.keep","touch .git/objects/.keep","touch .git/refs/.keep")},b=function(e){var n,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=null!==(n=e.remote)&&void 0!==n?n:"";return y(t?"git fetch ".concat(r," --progress --deepen=10"):"git fetch ".concat(e.remote," +refs/heads/*:refs/remotes/origin/* --progress --depth=10"))},w=function(e){return["git","remote","get-url","origin"]},x=function(e,n){return n.includes("No such remote")||n.startsWith("fatal")?(0,c.Z)((0,l.Z)({},e),{remote:""}):(0,c.Z)((0,l.Z)({},e),{remote:n.trim()})},k=function(e,n){return e.remote?y("git remote remove origin; git remote add origin ".concat(n)):y("git remote add origin ".concat(n))},C=function(e){var n;return y("git remote show ".concat(null!==(n=e.remote)&&void 0!==n?n:""," | grep 'HEAD branch'"))},S=function(e,n){var t=(0,u.Z)(n.split(":"),2),r=(t[0],t[1].trim());return(0,c.Z)((0,l.Z)({},e),{defaultBranch:r})},T=function(e){return y("git checkout -f ".concat(e.defaultBranch))},E=function(e){return y((n="git reset $(".concat(g,") --"),"if ! (( $(busybox ps -o comm | grep git) )) ; then rm -rf .git/index.lock; fi ; ".concat(n)));var n},R=t(69834),I=t(50959),G=t(10702),D=t(33859),_=t.n(D),P=t(87861),B=t(20593),A=t(43119),U=t(71440),L=t(3481),X=t(24635);function N(){var e=(0,A.Z)(["\n  query DotReplitEditorRootOriginRepl($rootOriginReplUrl: String!) {\n    repl(url: $rootOriginReplUrl) {\n      ... on Repl {\n        id\n        ...CrosisContextRepl\n      }\n    }\n    currentUser {\n      id\n      ...CrosisContextCurrentUser\n    }\n  }\n  ","\n  ","\n"]);return N=function(){return e},e}function M(){var e=(0,A.Z)(["\n  query DotReplitEditorRootOriginReplById($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...CrosisContextRepl\n      }\n    }\n    currentUser {\n      id\n      ...CrosisContextCurrentUser\n    }\n  }\n  ","\n  ","\n"]);return M=function(){return e},e}var F={},O=(0,U.Ps)(N(),L.C,L.D);var W=(0,U.Ps)(M(),L.C,L.D);var H=t(5993),V="Couldn't fetch the template .replit. Please try again.",z=function(){var e=(0,f.Z)().showError,n=function(e){var n=(0,l.Z)({},F,e);return X.a(W,n)}({fetchPolicy:"no-cache",skip:!0}).refetch,t=function(e){var n=(0,l.Z)({},F,e);return X.a(O,n)}({fetchPolicy:"no-cache",skip:!0}).refetch,r=(0,H.S)(),i=I.useCallback(function(){var i=(0,a.Z)((function(i){var o,a,l,c,u,d,f,p,h,v,m,g;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:return o=i.replId,a=i.replUrl,o?[4,n({replId:o})]:[3,2];case 1:return l=s.sent(),[3,5];case 2:return a?[4,t({rootOriginReplUrl:a})]:[3,4];case 3:return l=s.sent(),[3,5];case 4:throw new Error("how did we even get here?");case 5:if(c=l.data,u=l.error,!c||u)return e(V),[2,null];if(d=c.repl,f=c.currentUser,"Repl"!==(null===d||void 0===d?void 0:d.__typename)||"CurrentUser"!==(null===f||void 0===f?void 0:f.__typename))return e(V),[2,null];(p=(0,P.ZP)({onUnrecoverableError:function(){e(V)}})).connect({context:{repl:d,currentUser:f,asViewer:!0},getMinimumRetryDelayMs:r}),h=(0,B.Z)({container:p}),s.label=6;case 6:return s.trys.push([6,8,,9]),[4,h.readFile(G.l)];case 7:return"content"in(m=s.sent())&&(v=m.content),[3,9];case 8:return s.sent(),e(V),p.destroy(),[2,null];case 9:if(p.destroy(),!v)return e(V),[2,null];try{g=_().parse(v.toString())}catch(y){return e(V),[2,null]}return[2,g]}}))}));return function(e){return i.apply(this,arguments)}}(),[n,t,e,r]);return i},j=t(9125);function q(){var e=(0,A.Z)(["\n  query WorkspacePatchDotReplitRepl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        rootOriginReplUrl\n      }\n    }\n  }\n"]);return q=function(){return e},e}var $={},Y=(0,U.Ps)(q());var K=function(e,n){return{op:"add",path:e,value:JSON.stringify(n)}},Q=new Map([["hintsList","hints"]]);function J(e){return ee.apply(this,arguments)}function ee(){return ee=(0,a.Z)((function(e){var n,t,r,i,o,c,d,f,p,h,v,m,g,y,Z;function b(){return w.apply(this,arguments)}function w(){return(w=(0,a.Z)((function(){var e,t,o;return(0,s.__generator)(this,(function(a){switch(a.label){case 0:return(e="object"===typeof r.env?r.env:null)&&0!==Object.keys(e).length?(t="object"===typeof i.env?i.env:null,o=t?(0,l.Z)({},e,t):e,[4,n.updateDotReplit([K("env",o)])]):[2];case 1:return a.sent(),[2]}}))}))).apply(this,arguments)}function x(){return k.apply(this,arguments)}function k(){return(k=(0,a.Z)((function(){var e,a,l,c;return(0,s.__generator)(this,(function(u){switch(u.label){case 0:return(null===(e=i.nix)||void 0===e?void 0:e.channel)?[2]:(null===r||void 0===r||null===(a=r.nix)||void 0===a?void 0:a.channel)?[3,2]:[4,t.getLatestStableChannel()];case 1:return(c=u.sent()).channel?(l=c.channel,[3,3]):[2];case 2:l=r.nix.channel,u.label=3;case 3:return[4,n.updateDotReplit([K("nix/channel",l)])];case 4:return u.sent().error||o.push("Nix channel was not detected in your imported .replit file but is required for all Nix Repls. The latest stable Nix channel "+'"'.concat(l.channel,'" was automatically added to your .replit file.')),[2]}}))}))).apply(this,arguments)}function C(e,n){return S.apply(this,arguments)}function S(){return S=(0,a.Z)((function(e,t){var a,l,c,u,d,f;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:return a=i[e],l=Boolean(a),Array.isArray(a)?l=a.length>0:a&&"object"===typeof a&&(l=Object.keys(a).length>0),u=null!==(c=Q.get(e))&&void 0!==c?c:e,l||!r[u]?[2]:(d=K(u,r[u]),[4,n.updateDotReplit([d])]);case 1:return s.sent().error||!t||(f="A ".concat(t," was not detected in your imported .replit file so a recommended one was automatically added."),o.push(f)),[2]}}))})),S.apply(this,arguments)}return(0,s.__generator)(this,(function(a){switch(a.label){case 0:n=e.dotReplit,t=e.nixService,r=e.templateConfig,i=e.config,o=[],c={entrypoint:"entrypoint config",hidden:"hidden files config",audio:"audio config",run:"run command",refreshWebViewOnFileChange:"webview refresh config",language:"language config",onBoot:"onBoot command",languages:"languages config",compile:"compile command",debugger:"debugger config",packager:"packager config",interpreter:"interpreter config",unitTest:"unit test config",nix:x,env:b,hosting:"hosting config",gitHubImport:"GitHub import config",auth:"Repl Auth config",hintsList:"Hints config",ports:"Ports config",deployment:"deployment config",orderedEnv:null,modules:"nix modules config",extension:"extension config"},d=[],f=!0,p=!1,h=void 0;try{for(v=Object.entries(c)[Symbol.iterator]();!(f=(m=v.next()).done);f=!0)g=(0,u.Z)(m.value,2),y=g[0],null!==(Z=g[1])&&("function"===typeof Z?d.push(Z()):d.push(C(y,Z)))}catch(l){p=!0,h=l}finally{try{f||null==v.return||v.return()}finally{if(p)throw h}}return[4,Promise.all(d)];case 1:return a.sent(),[2,o]}}))})),ee.apply(this,arguments)}function ne(){var e=(0,m.Z)(),n=e.dotReplit,t=e.nixService,r=(0,p.Z)(),i=(0,u.Z)(function(e){var n=(0,l.Z)({},$,e);return j.t(Y,n)}(),1)[0],o=z(),c=(0,f.Z)().showWarning;return(0,I.useCallback)((0,a.Z)((function(){var e,a,l,u,d,f,p,h,v,m,g;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:return[4,n.getConfig()];case 1:return(e=s.sent().config)?[4,i({variables:{replId:r}})]:[2];case 2:return a=s.sent().data,(null===(l="Repl"===(null===a||void 0===a?void 0:a.repl.__typename)?a.repl:null)||void 0===l?void 0:l.rootOriginReplUrl)?[4,o({replUrl:l.rootOriginReplUrl})]:[2];case 3:return(u=s.sent())?[4,J({nixService:t,dotReplit:n,config:e,templateConfig:u})]:[2];case 4:d=s.sent(),f=!0,p=!1,h=void 0;try{for(v=d[Symbol.iterator]();!(f=(m=v.next()).done);f=!0)g=m.value,c(g,1e3)}catch(y){p=!0,h=y}finally{try{f||null==v.return||v.return()}finally{if(p)throw h}}return[2]}}))})),[r,c,n,t,i,o])}var te=t(29061),re=t(26201),ie=t(75665),oe=t(12583),ae=t(4561),le=t(50216);function ce(){var e=(0,A.Z)(["\n  query WorkspaceDoGitHubImportFlow($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        config {\n          gitRemoteUrl\n          doClone\n        }\n      }\n    }\n    currentUser {\n      id\n      gitHubInfo {\n        accessToken\n      }\n      username\n    }\n  }\n"]);return ce=function(){return e},e}function ue(){var e=(0,A.Z)(["\n  mutation WorkspaceDoGitHubImportFlowFinishClone($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        config {\n          doClone\n        }\n      }\n    }\n  }\n"]);return ue=function(){return e},e}function se(){var e=(0,A.Z)(["\n  query GitHubImportRootOriginReplUrl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        rootOriginReplUrl\n      }\n    }\n  }\n"]);return se=function(){return e},e}var de={},fe=(0,U.Ps)(ce());var pe=(0,U.Ps)(ue());se();var he=t(91620).lW;function ve(e){var n=e.insertConfigPlugin,t=e.setConfigScreenLockIsOpen,o=e.openFile,g=(0,p.Z)(),y=(0,u.Z)(function(e){var n=(0,l.Z)({},de,e);return le.D(pe,n)}(),2),D=y[0],_=y[1],P=(0,m.Z)(),B=P.container,A=P.fs,U=P.runner,L=P.dotReplit,X=(0,v.Z)(B),N=(0,f.Z)(),M=N.showError,F=N.showConfirm,O=ne();(0,I.useEffect)((function(){_.error&&M("Failed to finish cloning Repl - "+_.error)}),[_.error]),(0,I.useEffect)((function(){_.data&&F("Finished cloning Repl")}),[_.data]),(0,I.useEffect)((function(){H()}),[]);var W=(0,u.Z)(function(e){var n=(0,l.Z)({},de,e);return j.t(fe,n)}({variables:{replId:g},fetchPolicy:"no-cache",onCompleted:function(){var e=(0,a.Z)((function(e){var n,t,r,i,o;return(0,s.__generator)(this,(function(a){return n=e.repl,t=e.currentUser,"Repl"===n.__typename&&t&&"CurrentUser"===t.__typename&&n.config.gitRemoteUrl&&n.config.doClone?(ge({remote:null!==(i=n.config.gitRemoteUrl)&&void 0!==i?i:"",accessToken:null!==(o=null===(r=t.gitHubInfo)||void 0===r?void 0:r.accessToken)&&void 0!==o?o:null,username:t.username}),[2]):[2]}))}));return function(n){return e.apply(this,arguments)}}()}),1),H=W[0],V={isInitialized:!1,hasConflictsWithFetchedRemote:!1,hasMergeBaseWithFetchedRemote:!0,authError:r.NONE,badState:i.None,remote:"",repoId:null,branch:"",defaultBranch:"main",branches:[],installations:[],changedFiles:[],commits:[],commitsAhead:null,commitsBehind:null,remoteToken:null,gitHubName:null,ownerId:null,gitHubAvatarUrl:null,gitHubEmail:null},z=function(){var e=(0,a.Z)((function(e){return(0,s.__generator)(this,(function(n){switch(n.label){case 0:return[4,X({args:Z(V,null!==e&&void 0!==e?e:"")})];case 1:return n.sent(),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),q=function(){var e=(0,a.Z)((function(e){return(0,s.__generator)(this,(function(n){switch(n.label){case 0:return[4,X({args:k(V,e)})];case 1:return n.sent(),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),$=function(){var e=(0,a.Z)((function(){var e,n;return(0,s.__generator)(this,(function(t){switch(t.label){case 0:return[4,X({args:w(V)})];case 1:return e=t.sent(),x?(n=x(V,null===e.error?e.output:""),[2,n.remote]):[2]}}))}));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=(0,a.Z)((function(e){var n,t,r,i;return(0,s.__generator)(this,(function(o){switch(o.label){case 0:return n=e.remote,t=e.remoteToken,[4,X({args:C((0,c.Z)((0,l.Z)({},V),{remote:n,remoteToken:t}))})];case 1:return r=o.sent(),S?(i=S(V,null===r.error?r.output:"HEAD branch: main"),[2,i.defaultBranch]):[2]}}))}));return function(n){return e.apply(this,arguments)}}(),K=function(){var e=(0,a.Z)((function(e){return(0,s.__generator)(this,(function(n){switch(n.label){case 0:return[4,X({args:T((0,c.Z)((0,l.Z)({},V),{defaultBranch:e}))})];case 1:return n.sent(),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),Q=function(){var e=(0,a.Z)((function(e){var n,t;return(0,s.__generator)(this,(function(r){switch(r.label){case 0:return n=e.remote,t=e.remoteToken,[4,J()];case 1:return r.sent(),[4,$()];case 2:return r.sent(),[4,ee({deepen:!0,remote:n,remoteToken:t})];case 3:return r.sent(),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),J=function(){var e=(0,a.Z)((function(){return(0,s.__generator)(this,(function(e){switch(e.label){case 0:return[4,X({args:E(V)})];case 1:return e.sent(),[2]}}))}));return function(){return e.apply(this,arguments)}}(),ee=function(){var e=(0,a.Z)((function(e){var n,t,r,i;return(0,s.__generator)(this,(function(o){switch(o.label){case 0:return n=e.deepen,t=void 0!==n&&n,r=e.remote,i=e.remoteToken,r.startsWith("https://api.glitch.com")?[4,X({args:["git","fetch",r,"+refs/heads/*:refs/remotes/origin/*"]})]:[3,2];case 1:case 3:return o.sent(),[2];case 2:return[4,X({args:b((0,c.Z)((0,l.Z)({},V),{remote:r,remoteToken:i}),t)})]}}))}));return function(n){return e.apply(this,arguments)}}(),ce=function(){var e=(0,a.Z)((function(){var e,n,t,r,i,o,a;return(0,s.__generator)(this,(function(l){switch(l.label){case 0:return[4,A.readDir(oe.Ql)];case 1:return(r=l.sent()).error?[2]:[4,L.getConfig()];case 2:return i=l.sent(),(null===(e=i.config)||void 0===e||null===(n=e.gitHubImport)||void 0===n?void 0:n.requiredFiles)?(o=i.config.gitHubImport.requiredFiles,a=o.map((function(e){return new RegExp(e)})),[4,Promise.all(r.children.filter((function(e){return!a.some((function(n){return null!=e.filename.match(n)}))})).map((function(e){return e.type===ae.Tv.Directory?A.deleteDir(e.filename):A.deleteFile(e.filename)})))]):[3,4];case 3:return l.sent(),[3,6];case 4:return(null===(t=i.config)||void 0===t?void 0:t.entrypoint)?[4,A.deleteFile(i.config.entrypoint)]:[3,6];case 5:l.sent(),l.label=6;case 6:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),ue=function(){var e=(0,a.Z)((function(e,n,t){var r;return(0,s.__generator)(this,(function(i){switch(i.label){case 0:return[4,z(t)];case 1:return i.sent(),[4,q(e)];case 2:return i.sent(),[4,$()];case 3:return i.sent(),[4,ee({deepen:!1,remote:e,remoteToken:n})];case 4:return i.sent(),[4,Y({remote:e,remoteToken:n})];case 5:return r=i.sent(),[4,K(null!==r&&void 0!==r?r:"")];case 6:return i.sent(),[4,Q({remote:e,remoteToken:n})];case 7:return i.sent(),"html"!==U.mode?[3,10]:[4,(0,te.r)(B,oe.Ql)];case 8:return i.sent(),[4,U.run()];case 9:i.sent(),i.label=10;case 10:return[2]}}))}));return function(n,t,r){return e.apply(this,arguments)}}(),se=function(){var e=(0,a.Z)((function(){var e,n,t;return(0,s.__generator)(this,(function(r){switch(r.label){case 0:return[4,A.readDir(oe.Ql)];case 1:return(e=r.sent()).error||(n=e.children.map((function(e){return e.filename})),(t=(0,R.T)(n,"nix"))&&o({path:t})),[2]}}))}));return function(){return e.apply(this,arguments)}}(),ve=function(){var e=(0,a.Z)((function(e,n){var t,r,i;return(0,s.__generator)(this,(function(o){switch(o.label){case 0:return[4,(0,re.J9)({repoNameWithOwner:e,accessToken:n})];case 1:return"error"in(t=o.sent())?[2,{hasDotReplit:!1,hasProcfile:!1}]:(r=t.some((function(e){return e.path===G.l})),i=t.some((function(e){return e.path===d.E})),[2,{hasDotReplit:r,hasProcfile:i}])}}))}));return function(n,t){return e.apply(this,arguments)}}(),me=function(){var e=(0,a.Z)((function(e,n){var t,r,i,o,a,l,c,u;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:return[4,(0,re.LK)({repoNameWithOwner:e,filePath:d.E,accessToken:n})];case 1:return"error"in(t=s.sent())?[2,{showConfigPanel:!0}]:(r=he.from(t.content,"base64").toString(),(i=(0,d.c)(r))&&(a=null!==(o=i.web)&&void 0!==o?o:i.worker)?(l=a.command+" "+a.options.join(" "),[4,L.updateDotReplit([(0,ie.KQ)(l),(0,ie.xz)("interpreter")])]):[2,{showConfigPanel:!0}]);case 2:return c=s.sent(),u=i.web&&!i.worker||!i.web&&i.worker,c.error||!u?[2,{showConfigPanel:!0}]:[2,{showConfigPanel:!1}]}}))}));return function(n,t){return e.apply(this,arguments)}}(),ge=function(){var e=(0,a.Z)((function(e){var r,i,o,a,l,c,u,d,f,p;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:return r=e.remote,i=e.accessToken,o=e.username,t(!0),[4,ce()];case 1:return s.sent(),[4,ue(r,i,o)];case 2:return s.sent(),[4,O()];case 3:return s.sent(),[4,D({variables:{input:{id:g,doClone:!1}}})];case 4:return s.sent(),[4,se()];case 5:return s.sent(),a=(0,h.J)(r),l=!1,a?(c=a.username,u=a.repository,[4,ve("".concat(c,"/").concat(u),i)]):[3,9];case 6:return d=s.sent(),f=d.hasDotReplit,!d.hasProcfile||f?[3,8]:[4,me("".concat(c,"/").concat(u),i)];case 7:return p=s.sent(),l=!p.showConfigPanel,[3,9];case 8:l=f,s.label=9;case 9:return t(!1),"html"===U.mode?[2]:(l||n(),[2])}}))}));return function(n){return e.apply(this,arguments)}}()}},36662:function(e,n,t){t.d(n,{T:function(){return d}});var r=t(48330),i=t(72006),o=t(43119),a=t(71440),l=t(24635);function c(){var e=(0,o.Z)(["\n  query WorkspaceEduPaneEnabled($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isModelSolution\n        isProject\n        isProjectFork\n        owner {\n          __typename\n          ... on Team {\n            id\n            isAdmin\n          }\n          ... on User {\n            id\n          }\n        }\n      }\n    }\n  }\n"]);return c=function(){return e},e}var u={},s=(0,a.Ps)(c());function d(){var e,n=function(e){var n=(0,i.Z)({},u,e);return l.a(s,n)}({variables:{replId:(0,r.Z)()}}).data,t="Repl"===(null===n||void 0===n||null===(e=n.repl)||void 0===e?void 0:e.__typename)?null===n||void 0===n?void 0:n.repl:null;if(!t)return!1;var o=t.owner;return!!o&&(t.isProjectFork&&!t.isModelSolution&&"Team"===o.__typename&&o.isAdmin)}},85682:function(e,n,t){t.d(n,{Z:function(){return c}});var r=t(50959),i=t(89479),o=t(45285),a=t(4561),l=t(87861);function c(){var e=(0,o.Z)().fs,n=(0,r.useState)(!1),t=n[0],c=n[1],u=(0,i.Z)(),s=(0,r.useState)(!1),d=s[0],f=s[1];return(0,r.useEffect)((function(){u===l.em.CONNECTED&&f(!0)}),[u]),(0,r.useEffect)((function(){return c(e.getStatus()===a.kO.Syncing),e.onStatusChange((function(e){c(e===a.kO.Syncing)}))}),[e]),d?{isSaving:t,isOffline:u!==l.em.CONNECTED}:{isSaving:!1,isOffline:!1}}},68243:function(e,n,t){t.d(n,{O:function(){return c}});var r=t(57135),i=t(96583),o=t(88541),a=t(12404),l=t(38567);function c(){var e,n,t=(0,o.P5)({controlName:"flag-filetree-git-status",logFlagToAnalytics:!1}),c=(0,l.Z)(function(){var e=(0,r.Z)((function(e){var n,r;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return t?[4,e.getRepositoryState()]:[2,{status:null,error:null}];case 1:return(n=i.sent()).error?[2,n]:n.type!==a.y5.NORMAL?[2,{status:null,error:null}]:[4,e.status()];case 2:return(r=i.sent()).error?[2,r]:[2,{status:r,error:null}]}}))}));return function(n){return e.apply(this,arguments)}}(),[t]);return c&&!c.error&&(null===(e=c.status)||void 0===e?void 0:e.changes)?function(e){var n=new Map,t=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;n.set(l.path,{index:l.type.index,worktree:l.type.worktree})}}catch(c){r=!0,i=c}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n}(null===(n=c.status)||void 0===n?void 0:n.changes):null}},61253:function(e,n,t){t.d(n,{Z:function(){return p}});var r=t(74985),i=t(50959),o=t(45285),a=t(13233),l=t(76735),c=t(85368),u=t(61284),s=t(39541),d=(0,t(82568).X)({noticeContainer:[s.l0.rowWithGap(8),s.l0.align.center],noticeText:[s.l0.colWithGap(0)]}),f=new Set([3e3,3001,3002,3003,4200,5e3,5173,6e3,6800,8e3,8008,8080,8081,8888,9e3,1e4,25565,25577]);function p(){var e=(0,o.Z)().container,n=(0,a.Z)().showNotice;(0,i.useEffect)((function(){return e.onPortOpened((function(e){var t=e.port,i=e.address;if(!e.isForwarded&&f.has(t)){var o="Port ".concat(t," opened on host ").concat(i,".");n((0,r.BX)(c.G,{css:d.noticeContainer,children:[(0,r.tZ)(l.Z,{}),(0,r.BX)(c.G,{css:d.noticeText,children:[(0,r.tZ)(u.xv,{multiline:!1,children:o}),(0,r.tZ)(u.xv,{variant:"small",multiline:!1,children:"Use the host 0.0.0.0 to open the port to web traffic."})]})]}),1e4)}}))}),[n,e])}},29552:function(e,n,t){t.d(n,{V:function(){return a},Z:function(){return l}});var r=t(50959),i=t(45285),o=t(4561),a=".tutorial";function l(){var e=(0,i.Z)().fs,n=(0,r.useState)({isLoading:!0,isTutorial:!1}),t=n[0],l=n[1];return(0,r.useEffect)((function(){e.watchDir(".",{onChange:function(e){l({isLoading:!1,isTutorial:e.some((function(e){return e.type===o.Tv.Directory&&e.filename===a}))})},onMoveOrDelete:function(){l({isLoading:!1,isTutorial:!1})},onError:function(){l({isLoading:!1,isTutorial:!1})}})}),[e]),t}},37056:function(e,n,t){t.d(n,{ZP:function(){return R},Ln:function(){return E}});var r=t(57135),i=t(96583),o=t(50959),a=t(91398),l=t(92683),c=t(45285),u=t(88254),s=t(48330),d=t(68051),f=t(87861),p=t(43694),h=t(18548),v=t(20593),m=t(72006),g=t(43119),y=t(71440),Z=t(3481),b=t(24635);function w(){var e=(0,g.Z)(["\n  query ReplEnvironmentDesktopLoadCurriculum($id: String!) {\n    currentUser {\n      id\n      isTeacher: hasRole(role: TEACHER)\n      ...CrosisContextCurrentUser\n    }\n    repl(id: $id) {\n      ... on Repl {\n        id\n        isProject\n        isProjectFork\n        isModelSolution\n        isModelSolutionFork\n        owner {\n          ... on Team {\n            id\n          }\n          ... on User {\n            id\n          }\n        }\n        language\n        origin {\n          id\n          ...CrosisContextRepl\n          origin {\n            id\n            ...CrosisContextRepl\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return w=function(){return e},e}var x={},k=(0,y.Ps)(w(),Z.D,Z.C);var C=t(5993),S=t(49500),T=(0,a.cn)(!1);function E(){return(0,l.Dv)(T)}function R(){var e,n,t=(0,s.Z)(),a=(0,c.Z)().fs,g=function(e){var n=(0,m.Z)({},x,e);return b.a(k,n)}({variables:{id:t}}).data,y=(0,l.b9)(T);o.useEffect((function(){return function(){y(!1)}}),[y]);var Z="Repl"===(null===g||void 0===g?void 0:g.repl.__typename)?g.repl:null,w="CurrentUser"===(null===g||void 0===g||null===(e=g.currentUser)||void 0===e?void 0:e.__typename)?g.currentUser:null,E="Repl"===(null===g||void 0===g?void 0:g.repl.__typename)&&g.repl.isModelSolutionFork,R=E?Z&&(null===(n=Z.origin)||void 0===n?void 0:n.origin):Z&&Z.origin||null,I=(0,p.b)("Repl"===(null===R||void 0===R?void 0:R.__typename)?{repl:R,currentUser:w||void 0}:null),G=(0,C.S)();o.useEffect((function(){Z&&w&&Z.isProject&&a.stat(".lesson").then((function(e){e.exists||a.createDir(".lesson")}))}),[a,w,Z]),o.useEffect((function(){if(Z&&(Z.isProjectFork||E)&&R&&I){var e=(0,f.ZP)({onUnrecoverableError:function(e){S.error(e),u.$e((function(n){n.setTag("curriculum-authoring",!0),n.setExtra("originId",R.id),u.Tb(e)}))}}),n=(0,v.Z)({container:e});e.connect({context:I,getMinimumRetryDelayMs:G,fetchConnectionMetadata:function(){return(0,d.Z)({url:"/data/repls/".concat(Z.id,"/get_repl_origin_guest_connection_metadata")})}});var t=e.onConnectionStateChanged(function(){var o=(0,r.Z)((function(r){var o,l;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:if(r!==h.e.CONNECTED)return[3,8];t(),i.label=1;case 1:return i.trys.push([1,6,7,8]),[4,a.copyDirFromRemote(".lesson",".lesson",n)];case 2:return(o=i.sent()).error?(u.$e((function(e){e.setTag("curriculum-authoring",!0),e.setExtra("originId",R.id),u.Tb(new Error("Error copying lesson: ".concat(o.error)))})),[3,5]):[3,3];case 3:return[4,a.stat(".lesson/instructions.md")];case 4:i.sent().exists&&y(!0),i.label=5;case 5:return[3,8];case 6:return l=i.sent(),u.$e((function(e){e.setTag("curriculum-authoring",!0),u.Tb(l)})),[3,8];case 7:return e.destroy(),[7];case 8:return[2]}}))}));return function(e){return o.apply(this,arguments)}}());return function(){return e.destroy()}}}),[a,I,Z,R,E,y])}},10578:function(e,n,t){t.d(n,{Z:function(){return c},f:function(){return l}});var r=t(50959),i=t(92683),o=t(91398),a=t(94716),l=(0,o.cn)({current:null});function c(){var e=(0,a.Z)((0,i.Dv)(l));return(0,r.useCallback)((function(){var n,t;null===(n=e.current)||void 0===n||null===(t=n.current)||void 0===t||t.refresh()}),[e])}},70523:function(e,n,t){t.d(n,{Z:function(){return Z}});var r=t(57135),i=t(2272),o=t(96583),a=t(91398),l=t(92683),c=t(29457),u=t(77502),s=t(45285),d=t(10206),f=t.n(d),p=t(50959),h=t(94716),v=t(18171),m="date '+%s%N' && cat /sys/fs/cgroup/cpu/cpuacct.usage /sys/fs/cgroup/cpu/cpu.cfs_quota_us /sys/fs/cgroup/cpu/cpu.cfs_period_us /sys/fs/cgroup/memory/memory.usage_in_bytes /sys/fs/cgroup/memory/memory.soft_limit_in_bytes /sys/fs/cgroup/memory/memory.limit_in_bytes &&grep '^\\(total_rss\\|total_cache\\) ' /sys/fs/cgroup/memory/memory.stat",g="cat /repl/stats/subvolume_usage_bytes /repl/stats/subvolume_total_bytes /repl/stats/scratch_usage_bytes /repl/stats/scratch_total_bytes",y=1073741824;function Z(){var e=(0,v.Z)((function(){return(0,a.cn)({wallTimeNanos:f().BigInt(0),cpuTimeNanos:f().BigInt(0),cpuUtilPercent:0,memoryUsageRssBytes:0,memoryUsageCacheBytes:0,memorySoftLimitBytes:0,memoryHardLimitBytes:0,storageUsedBytes:0,storageTotalBytes:0,scratchUsedBytes:0,scratchTotalBytes:0,numVCpu:0})}),[]),n=(0,v.Z)((function(){return{cpu:{currentAtom:(0,a.cn)((function(n){return b(n(e).cpuUtilPercent)})),totalAtom:(0,a.cn)((function(){return 100})),cpuCountAtom:(0,a.cn)((function(n){return n(e).numVCpu}))},ram:{currentCacheAtom:(0,a.cn)((function(n){return b(w(n(e).memoryUsageCacheBytes))})),currentRssAtom:(0,a.cn)((function(n){return b(w(n(e).memoryUsageRssBytes))})),totalAtom:(0,a.cn)((function(n){return w(n(e).memorySoftLimitBytes)}))},disk:{currentAtom:(0,a.cn)((function(n){return w(n(e).storageUsedBytes)})),totalAtom:(0,a.cn)((function(n){return w(n(e).storageTotalBytes)})),scratchCurrentAtom:(0,a.cn)((function(n){return w(n(e).scratchUsedBytes)})),scratchTotalAtom:(0,a.cn)((function(n){return w(n(e).scratchTotalBytes)}))}}}),[e]),t=(0,l.b9)(e),d=(0,i.Z)(p.useState(!0),2),Z=d[0],x=d[1];return function(e){var n=(0,s.Z)().container,t=(0,u.Z)(n),i=(0,h.Z)(e);p.useEffect((function(){var e=!1,n=null;function a(){return l.apply(this,arguments)}function l(){return(l=(0,r.Z)((function(){var r,l,u;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return[4,t({args:["bash","-c",m]})];case 1:return l=o.sent(),e?[2]:null!==l.error?(c.kg.error("Error running resource tracking command",{errorMessage:l.error}),[2]):[4,t({args:["bash","-c",g]})];case 2:return u=o.sent(),e?[2]:null===u.error||(null===(r=u.output)||void 0===r?void 0:r.includes("No such file or directory"))?(i.current({trackingResult:l,storageResult:u}),n=setTimeout(a,2e3),[2]):(c.kg.error("Error running storage command",{errorMessage:u.error}),[2])}}))}))).apply(this,arguments)}return a(),function(){e=!0,n&&clearTimeout(n)}}),[n,t,i])}((function(e){var n=e.trackingResult,r=e.storageResult;t((function(e){var t,o;try{t=function(e,n){if(9!==e.length)throw new Error("Received unexpected output from resource tracking command: ".concat(e));var t={wallTimeNanos:f().BigInt(0),cpuTimeNanos:f().BigInt(0),cpuUtilPercent:0,memoryUsageRssBytes:0,memoryUsageCacheBytes:0,memorySoftLimitBytes:0,memoryHardLimitBytes:0,storageUsedBytes:0,storageTotalBytes:y,scratchUsedBytes:0,scratchTotalBytes:2147483648,numVCpu:0},r=e.slice(0,7).map((function(e){return parseInt(e,10)}));if(r.includes(NaN))throw new Error("Could not parse one or more values from resource monitoring command: ".concat(e));var o,a,l=f().BigInt(e[0]),c=f().BigInt(e[1]),u=r[2],s=r[3],d=r[5],p=r[6],h=new Map(e.slice(7).map((function(e){var n=(0,i.Z)(e.trim().split(" "),2),t=n[0],r=n[1];return[t,parseInt(r,10)]}))),v=null!==(o=h.get("total_rss"))&&void 0!==o?o:0,m=null!==(a=h.get("total_cache"))&&void 0!==a?a:0;if(!(v>=0&&m>=0&&p>0&&d>0))throw new Error("Memory usage or limit reported negative: ".concat(e));if(t.memoryUsageRssBytes=v,t.memoryUsageCacheBytes=m,t.memorySoftLimitBytes=d,t.memoryHardLimitBytes=p,f().GT(n.wallTimeNanos,0)&&f().GT(n.cpuTimeNanos,0)){var g=f().toNumber(f().subtract(l,n.wallTimeNanos)),Z=f().toNumber(f().subtract(c,n.cpuTimeNanos));if(g>0&&Z>=0&&u>0&&s>0){var b=u/s;t.cpuUtilPercent=100*Z/g/b,t.numVCpu=b}else t.cpuUtilPercent=0}return t.wallTimeNanos=l,t.cpuTimeNanos=c,t}((n.output||"").trim().split("\n"),e)}catch(a){return c.kg.error("Could not calculate resources",{errorMessage:a.message}),e}if(!t)throw new Error("Expected resources");try{o=function(e){if(4!==e.length)throw new Error("Received unexpected output from storage command: ".concat(e));var n=parseInt(e[0],10),t=parseInt(e[1],10),r=parseInt(e[2],10),i=parseInt(e[3],10);if(isNaN(n)||isNaN(t)||isNaN(r)||isNaN(i))throw new Error("Could not parse values from storage output command: ".concat(e));return{storageUsedBytes:n,storageTotalBytes:t,scratchUsedBytes:r,scratchTotalBytes:i}}((r.output||"").trim().split("\n"))}catch(l){return c.kg.error("Could not calculate resources",{errorMessage:l.message}),e}return t.storageUsedBytes=o.storageUsedBytes,t.storageTotalBytes=o.storageTotalBytes,t.scratchUsedBytes=o.scratchUsedBytes,t.scratchTotalBytes=o.scratchTotalBytes,x(!1),t}))})),{dataAtom:n,loading:Z}}function b(e){return Math.round(100*(e+Number.EPSILON))/100}function w(e){return e/1024/1024}},28681:function(e,n,t){t.d(n,{T:function(){return Z}});var r=t(50959),i=t(81203),o=t(48330),a=t(72006),l=t(43119),c=t(71440),u=t(24635);function s(){var e=(0,l.Z)(["\n  query ShouldHideFileInWorkspace($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isProjectFork\n        isModelSolution\n        isModelSolutionFork\n      }\n    }\n  }\n"]);return s=function(){return e},e}var d={},f=(0,c.Ps)(s());function p(e){var n=(0,a.Z)({},d,e);return u.a(f,n)}var h=t(59253),v=t(27562),m=t(20575),g=t(45285),y=t(13716),Z=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=(0,o.Z)(),t=(0,v.Z)(),a=(0,g.Z)().dotReplit,l=p({variables:{replId:n}}),c=l.data,u=l.loading,s="Repl"===(null===c||void 0===c?void 0:c.repl.__typename)&&(c.repl.isProjectFork||c.repl.isModelSolution||c.repl.isModelSolutionFork),d=(0,i.P)(a),f=(0,y.t9)();return r.useCallback((function(n){return!!((s||u)&&(0,h.TI)(n)||(0,h.MF)(n))||!f&&(e&&(0,h.uC)(n)||(0,m.C)(n)||(0,h.yb)(n,t)||(0,h.lv)(n,d))}),[s,u,t,f,d,e])}},84524:function(e,n,t){t.d(n,{k:function(){return d}});var r=t(90171),i=t(72006),o=t(43119),a=t(71440),l=t(24635);function c(){var e=(0,o.Z)(["\n  query WorkspaceShowAdmin {\n    currentUser {\n      id\n      isAdmin: hasRole(role: ADMIN)\n    }\n  }\n"]);return c=function(){return e},e}var u={},s=(0,a.Ps)(c());function d(){var e,n=function(e){var n=(0,i.Z)({},u,e);return l.a(s,n)}().data,t=(0,r.useRouter)();return(null===n||void 0===n||null===(e=n.currentUser)||void 0===e?void 0:e.isAdmin)||Boolean(t.query.debug)}},99662:function(e,n,t){t.d(n,{B:function(){return P}});var r=t(2272),i=t(92508),o=t(29552),a=t(53870),l=t(72196),c=t(36662),u=t(18171),s=t(48330),d=t(72006),f=t(43119),p=t(71440),h=t(24635);function v(){var e=(0,f.Z)(["\n  fragment WorkspaceToolPanesRepl on Repl {\n    isProjectFork\n    isModelSolution\n    isProject\n    isProjectFork\n    workspaceCta\n    owner {\n      __typename\n      ... on Team {\n        id\n        isAdmin\n        isTeamsPro: subscriptionIsType(subscriptionType: PRO)\n      }\n      ... on User {\n        id\n      }\n    }\n    currentUserPermissions {\n      containerWrite\n      editMultiplayers\n    }\n    hostingDeploymentPermissions {\n      canDeploy\n    }\n    lang {\n      id\n      key\n      engine\n      supportsGit\n      hasLibSearch\n      supportsPackager3\n      hasDAP\n    }\n    config {\n      isServer\n      isVnc\n    }\n  }\n"]);return v=function(){return e},e}function m(){var e=(0,f.Z)(["\n  query WorkspaceToolPanes($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...WorkspaceToolPanesRepl\n      }\n    }\n    currentUser {\n      id\n      isAdmin: hasRole(role: ADMIN)\n      isPrivacyLimitedAccess: hasRole(role: PRIVACY_LIMITED_ACCESS)\n      userSubscriptionType\n      userPowerUpsByType {\n        __typename\n        ... on UserPowerUpsTypes {\n          ghostwriter {\n            active\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}var g={},y=(0,p.Ps)(v()),Z=(0,p.Ps)(m(),y);var b=t(90171),w=t(88541),x=t(37056),k=t(77511),C=t(60471),S=t(51631),T=t(18952),E=t(91046),R=t(98707),I=t(54659);function G(){var e,n=function(e){var n=(0,d.Z)({},g,e);return h.a(Z,n)}({variables:{replId:(0,s.Z)()}}).data,t="Repl"===(null===n||void 0===n||null===(e=n.repl)||void 0===e?void 0:e.__typename)?null===n||void 0===n?void 0:n.repl:null;return t?{repl:t,currentUser:(null===n||void 0===n?void 0:n.currentUser)||null}:{repl:null,currentUser:null}}var D=["shell","git","packager","envEditor","deployments","database","neon","ghostwriterChat","unitTests","submitEduRepl","preferences","docs","multiplayer","adminPanel","sshConfigurator","webview"],_=["ghostwriterChat","deployments"];function P(){var e,n,t=G(),s=t.repl,d=t.currentUser,f=(0,b.useRouter)(),p=(0,k.T3)(),h=(0,w.P5)({controlName:"flag-neon-databases",logFlagToAnalytics:!1}),v=(0,w.P5)({controlName:"flag-postgres-db-god-mode",logFlagToAnalytics:!1}),m=(0,w.P5)({controlName:"flag-deployments",logFlagToAnalytics:!1}),g=Boolean(m&&(null===s||void 0===s?void 0:s.hostingDeploymentPermissions.canDeploy)),y=(0,w.P5)({controlName:"flag-repl-auth-sidebar",logFlagToAnalytics:!1}),Z=(0,w.P5)({controlName:"flag-nix-modules-tool",logFlagToAnalytics:!1}),P=(0,I.cR)(),B=(0,l.Z)().language,A=(0,c.T)(),U=(0,x.Ln)(),L=(0,o.Z)().isTutorial,X=(0,a.I)().length>0,N=(0,C.T)(),M=(0,T.WG)(),F=(null===N||void 0===N?void 0:N.debuggers)&&(null===N||void 0===N?void 0:N.debuggers.length)>0||!1,O=(0,R.jX)(null===d||void 0===d?void 0:d.userSubscriptionType),W="Team"===(null===s||void 0===s||null===(e=s.owner)||void 0===e?void 0:e.__typename)&&(null===s||void 0===s?void 0:s.owner.isTeamsPro),H=(null===d||void 0===d?void 0:d.isAdmin)||Boolean(f.query.debug),V="UserPowerUpsTypes"===(null===d||void 0===d||null===(n=d.userPowerUpsByType)||void 0===n?void 0:n.__typename)&&(null===d||void 0===d?void 0:d.userPowerUpsByType.ghostwriter)&&(null===d||void 0===d?void 0:d.userPowerUpsByType.ghostwriter.active),z=Boolean(d&&!d.isPrivacyLimitedAccess)&&!p||V,j=(0,i.Se)();return(0,u.Z)((function(){var e=p&&(null===s||void 0===s?void 0:s.currentUserPermissions.editMultiplayers)?[{type:"multiplayer"}]:[];if(!s||!d)return e;var n=Boolean(s.config.isServer),t=Boolean(s.config.isVnc),i=s.lang.supportsGit,o=s.lang.key.startsWith("html"),a="nix"===s.lang.key,l=!o,c=s.isProject||s.isProjectFork,u=!o,f=O||W,m=Boolean(y&&X),b=[[{type:"shell"},!0],[{type:"instructions"},U],[{type:"markdown",data:{path:""}},!0],[{type:"threadInbox"},!0],[{type:"chat"},!0],[{type:"docs",data:{url:null}},!0],[{type:"webview"},n||o],[{type:"vnc"},t],[{type:"runnerOutput"},!o],[{type:"git"},i],[{type:"packager"},X],[{type:"envEditor"},l],[{type:"debugger"},F],[{type:"tutorial"},L],[{type:"database"},u],[{type:"neon"},v||a&&h],[{type:"replAuth"},m],[{type:"autograder"},c],[{type:"unitTests"},!c&&null!==B],[{type:"education"},Boolean(A)],[{type:"preferences"},!0],[{type:"adminPanel"},H],[{type:"deployments"},g],[{type:"sshConfigurator"},f],[{type:"ghostwriterChat"},z],[{type:"searchReplace"},!0],[{type:"extensionStore",data:{page:"store"}},!0],[{type:"modules"},Z],[{type:"extensionDevtools"},P]];if(p){var w=s.workspaceCta===S.Sy.Submit||s.workspaceCta===S.Sy.Resubmit;b.push([{type:"submitEduRepl"},w])}var x=!0,k=!1,C=void 0;try{for(var T,R=M[Symbol.iterator]();!(x=(T=R.next()).done);x=!0){var I=T.value;b.push([{type:"extension",data:{extensionId:I.extension.extensionId,installationId:I.extension.installationId,name:I.name||I.extension.manifest.name,icon:I.icon||I.extension.manifest.icon,url:(0,E.Vh)(I.extension.baseUrl,I.handler)}},!0])}}catch(Q){k=!0,C=Q}finally{try{x||null==R.return||R.return()}finally{if(k)throw C}}var G=!0,N=!1,V=void 0;try{for(var q,$=b[Symbol.iterator]();!(G=(q=$.next()).done);G=!0){var Y=(0,r.Z)(q.value,2),K=Y[0];Y[1]&&(p&&!D.includes(K.type)||e.push(K))}}catch(Q){N=!0,V=Q}finally{try{G||null==$.return||$.return()}finally{if(N)throw V}}return e.map((function(e){return{title:j.getTitle(e),pane:e}})).sort((function(e,n){return _.includes(e.pane.type)?-1:_.includes(n.pane.type)?1:e.title.localeCompare(n.title)})).map((function(e){return e.pane}))}),[s,d,h,g,y,B,A,U,L,X,F,H,p,v,Z,M,P,O,W,j,z])}},23159:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(29457),i=t(50959);function o(){(0,i.useEffect)((function(){var e=null;return function n(){if(window.performance.memory){var t=window.performance.memory,i={jsHeapSizeLimit:t.jsHeapSizeLimit,totalJSHeapSize:t.totalJSHeapSize,usedJSHeapSize:t.usedJSHeapSize,timeElapsed:window.performance.now()};r.kg.info("perf:browser_memory",i);var o=5*-Math.log(Math.random())*60*1e3;e=setTimeout(n,o)}}(),function(){e&&clearTimeout(e)}}),[])}},24370:function(e,n,t){t.d(n,{L:function(){return c}});var r=t(72006),i=t(48330),o=t(50959),a=t(43746),l=t(48224);function c(){var e=(0,i.Z)(),n=(0,l.Z)("fileTree").trackTimeToLoadFileStart;return o.useCallback((function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(t);var o={action:"select",source:"filetree"};i.newTab?o={action:"newTab",source:"filetree"}:i.newPane&&(o={action:"newPane",source:"filetree"}),(0,a.Z)((0,r.Z)({replId:e},o))}),[e,n])}},18946:function(e,n,t){t.d(n,{Z:function(){return p}});var r=t(29457),i=t(48330),o=t(50959),a=t(45285),l=t(47726),c=t(68241),u=t(88688),s=t(63763),d=t(88541);var f=new Set;function p(e){var n=e.workspaceType,t=(0,i.Z)(),p=(0,a.Z)(),h=p.dotReplit,v=p.container,m=(0,d.P5)({controlName:"flag-channel-request-priority",logFlagToAnalytics:!1});(0,o.useEffect)((function(){if(!f.has(t)){f.add(t);var e=h.watch((function(t){if(!t.error||t.error!==u.Yt.Disconnected){try{var i=v.getConnectionMetadata();if(!i||!i.token)throw new Error("Expected token in measure call.");!function(e){var n=e.workspaceType,t=e.parsedToken,i=e.flagChannelRequestPriority,o=Boolean(window.performance.getEntriesByName(c.Iy.pageNavStart,"mark").length),a={ssr:!o,workspaceType:n,tokenCluster:t.cluster,flagChannelRequestPriority:i},u="time to code";window.performance.measure(u,o?c.Iy.pageNavStart:void 0);var s=window.performance.getEntriesByName(u,"measure")[0];if(s){var d="page invisible fetch connection metadata",f=s.duration;Boolean(window.performance.getEntriesByName(c.Iy.fetchConnectionMetadataPageInvisibleStart,"mark").length)&&(window.performance.measure(d,c.Iy.fetchConnectionMetadataPageInvisibleStart,c.Iy.fetchConnectionMetadataPageInvisibleEnd),f-=window.performance.getEntriesByName(d,"measure")[0].duration,window.performance.clearMeasures(d),window.performance.clearMarks(c.Iy.fetchConnectionMetadataPageInvisibleStart),window.performance.clearMarks(c.Iy.fetchConnectionMetadataPageInvisibleEnd)),r.kg.time("time to code minus page invisible",f,a),r.kg.time("time to code with page invisible",s.duration,a),window.performance.clearMeasures(u),l.v.addTiming("time_to_code_minus_page_invisible",f),l.v.addTiming("time_to_code_with_page_invisible",s.duration)}else r.kg.info("Could not obtain measure for time to code",a)}({workspaceType:n,parsedToken:(0,s.he)(i.token),flagChannelRequestPriority:m})}catch(o){r.kg.info("Could not measure time to code",{workspaceType:n,e:o,dotReplitResult:t.error?t.error:"success"})}e()}}));return e}}),[t,n,h,v,m])}},48224:function(e,n,t){t.d(n,{Z:function(){return c}});var r=t(87978),i=t(29457),o=t(89448),a=new Map,l=function(e){var n=a.get(e);if(void 0!==n){var t=n.start,r=n.source,l=window.performance.now(),c=(0,o.V)(e);i.kg.time("time to load file",l-t,{from:r,fileViewerType:c}),a.delete(e)}};function c(e){return{trackTimeToLoadFileStart:function(n){return function(e,n){if((0,r.Mb)(e)){var t=window.performance.now();a.set(e,{start:t,source:n})}}(n,e)},trackTimeToLoadFileEnd:l}}},83718:function(e,n,t){t.d(n,{bM:function(){return m}});var r=t(57389),i=t(72006),o=t(4405),a=t(74985),l=t(250),c=t(82568),u=t(39541),s=t(85368),d=t(56997),f=(0,t(68973).$)(["fontSize","gap"]),p=f.cssVars,h=f.styleTokens,v=(0,c.X)({chord:[u.l0.display.inlineFlex,u.l0.rowWithGap(12)],shortcut:[u.l0.justify.end,u.l0.display.inlineFlex,u.l0.flex.row,{fontSize:h.fontSize,"& > div":{minWidth:u.TV.space16,marginRight:h.gap},"& > div:last-child":{marginRight:0}}]});function m(e){if((0,l.bU)(e.keyCombo))return(0,a.tZ)(s.G,{css:v.chord,children:e.keyCombo.map((function(n,t){return(0,a.tZ)(m,(0,o.Z)((0,i.Z)({},e),{keyCombo:n}),t)}))});var n,t=(0,l.QR)(e.keyCombo);return(0,a.tZ)(s.G,{css:v.shortcut,style:(n={},(0,r.Z)(n,p.fontSize,e.small?u.TV.fontSizeSmall:u.TV.fontSizeDefault),(0,r.Z)(n,p.gap,e.hideBorder?"2px":"4px"),n),title:e.keyCombo,children:t.map((function(n){var t;return(0,a.tZ)(Z,{text:n,hideBorder:e.hideBorder,small:e.small,isActive:null===e||void 0===e||null===(t=e.match)||void 0===t?void 0:t.includes(n.toLowerCase())},n)}))})}var g=(0,c.X)({root:[u.l0.color.foregroundDimmest,u.l0.position.relative,u.l0.px(4),u.l0.py(2),{fontSize:"inherit",width:"max-content",textAlign:"center",textTransform:"capitalize"}],border:[u.l0.coverContainer,u.l0.borderRadius(4),{opacity:.5,minWidth:u.TV.space16,border:"1px solid",borderColor:u.TV.outlineStrongest}]}),y={Ctrl:d.V5?"\u2303":"Ctrl",Cmd:d.V5?"\u2318":"Cmd",Alt:d.V5?"\u2325":"Alt",Shift:d.V5?"\u21e7":"Shift",Enter:d.V5?"Return":"Enter",ArrowLeft:"\u2190",ArrowRight:"\u2192",ArrowUp:"\u2191",ArrowDown:"\u2193"," ":"Space"};function Z(e){var n,t=e.text,r=e.isActive,i=void 0!==r&&r,o=e.hideBorder,l=void 0!==o&&o,c={fontWeight:u.TV.fontWeightMedium,color:u.TV.foregroundDefault},d={borderColor:u.TV.foregroundDefault,opacity:1};return(0,a.BX)(s.G,{css:g.root,style:i?c:void 0,children:[null!==(n=y[t])&&void 0!==n?n:t,l?null:(0,a.tZ)(s.G,{css:g.border,style:i?d:void 0})]})}},45353:function(e,n,t){t.d(n,{GO:function(){return u},Il:function(){return o.Il},bM:function(){return c.bM},gf:function(){return o.gf}});var r=t(74985),i=t(50959),o=t(82001),a=t(250),l=t(88541),c=t(83718);function u(e){var n=(0,o.ns)(e);return(0,r.BX)(o.Ge.Provider,{value:n,children:[e.children,(0,r.tZ)(s,{})]})}function s(){var e=(0,o.gk)(),n=(0,o.XU)(),t=(0,i.useRef)(null),r=(0,l.P5)({controlName:"flag-run-keybindings-in-capture",logFlagToAnalytics:!1}),c=function(e,n){if(e){var t=e.run,r=e.bubble;if(!1===t())return;if(n.preventDefault(),!r)return 1}},u=function(e,n){e&&!1!==e.run()&&(n.defaultPrevented||n.preventDefault())};return(0,i.useEffect)((function(){var i=function(r){if(e){var i=(0,a.IX)(r);if(i)if(t.current){var o=n.scopedShortcuts.get(t.current),l=n.globalShortcuts.get(t.current);if(t.current=null,o&&"chord"===o.type){var s=o.matches.get(i);if(c(s,r))return}if(l&&"chord"===l.type){var d=l.matches.get(i);u(d,r)}}else{var f=n.scopedShortcuts.get(i),p=n.globalShortcuts.get(i);if(f||p){if("chord"===(null===f||void 0===f?void 0:f.type)||"chord"===(null===p||void 0===p?void 0:p.type))return t.current=i,void r.preventDefault();if(f&&"shortcut"===f.type)if(c(f,r))return;p&&"shortcut"===p.type&&u(p,r)}}}};return document.addEventListener("keydown",i,r),function(){document.removeEventListener("keydown",i,r)}}),[e,n,r]),null}},86188:function(e,n,t){t.d(n,{_:function(){return Z},O:function(){return g}});var r=t(57135),i=t(2272),o=t(96583),a=t(250),l=t(72006),c=t(43119),u=t(71440),s=t(50216);function d(){var e=(0,c.Z)(["\n  mutation SetUserKeybindings($input: SetUserKeybindingsInput!) {\n    setUserKeybindings(input: $input) {\n      ... on Keybindings {\n        keybindings\n      }\n    }\n  }\n"]);return d=function(){return e},e}var f={},p=(0,u.Ps)(d());var h=t(18171),v=t(53306),m=t(47091);function g(){var e=(0,m.O)(),n=(0,i.Z)(function(e){var n=(0,l.Z)({},f,e);return s.D(p,n)}(),1)[0];return(0,h.Z)((function(){return function(){var t=(0,r.Z)((function(t){var r,a,l,c,u,s,d,f,p;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:r=[],a=!0,l=!1,c=void 0;try{for(u=t[Symbol.iterator]();!(a=(s=u.next()).done);a=!0)d=(0,i.Z)(s.value,2),f=d[0],p=d[1],r.push({commandId:f,keyCombo:p})}catch(h){l=!0,c=h}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}return[4,n({variables:{input:{environment:e,platform:(0,v.X)(),keybindings:r}}})];case 1:return o.sent(),[2]}}))}));return function(e){return t.apply(this,arguments)}}()}),[e,n])}function y(e){if(e&&"object"===typeof e&&"commandId"in e&&"string"===typeof e.commandId&&"keyCombo"in e){if(Array.isArray(e.keyCombo)){var n=(0,a.uv)(e.keyCombo);return{commandId:e.commandId,keyCombo:n}}if("string"===typeof e.keyCombo){var t=(0,a.gD)(e.keyCombo);return{commandId:e.commandId,keyCombo:t}}return{commandId:e.commandId,keyCombo:null}}}function Z(e){var n=new Map;if(!Array.isArray(e))return n;var t=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=y(o.value);l&&n.set(l.commandId,l.keyCombo)}}catch(c){r=!0,i=c}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n}},53306:function(e,n,t){t.d(n,{X:function(){return o}});var r=t(56997),i=t(11086);function o(){return r.V5||r.gn?i.K5.Mac:r.ED?i.K5.Windows:i.K5.Linux}},74441:function(e,n,t){t.d(n,{R:function(){return s}});var r=t(57135),i=t(96583),o=t(12379),a=t(43119),l=t(71440);function c(){var e=(0,a.Z)(["\n  query FiletreeDownloadZip($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        url\n      }\n    }\n  }\n"]);return c=function(){return e},e}var u=(0,l.Ps)(c());function s(e){return d.apply(this,arguments)}function d(){return(d=(0,r.Z)((function(e){var n,t,r;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return[4,null===o.l||void 0===o.l?void 0:o.l.query({query:u,variables:{replId:e}})];case 1:return t=i.sent(),r="Repl"===(null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.repl.__typename)?t.data.repl.url:window.location.pathname,window.open(r+".zip","_blank"),[2]}}))}))).apply(this,arguments)}},73941:function(e,n,t){t.d(n,{mn:function(){return s}});var r=t(2272),i=t(9970),o=t(4561),a=t(87978),l=["json","md","draw","txt"],c=[".gitignore",".replit"];function u(e,n){var t=new Map,o=!0,l=!1,c=void 0;try{for(var u,s=e[Symbol.iterator]();!(o=(u=s.next()).done);o=!0){var d=u.value,f=(0,a.r6)(d);if(f&&(!n||f.startsWith(n))){var p,h=null!==(p=t.get(f))&&void 0!==p?p:0;t.set(f,h+1)}}}catch(v){l=!0,c=v}finally{try{o||null==s.return||s.return()}finally{if(l)throw c}}return(0,i.Z)(t.entries()).sort((function(e,n){var t=(0,r.Z)(e,2)[1];return(0,r.Z)(n,2)[1]-t})).map((function(e){return(0,r.Z)(e,1)[0]}))}function s(e,n){if(e.fileType===o.Tv.Directory||!e.input)return[];if("."===e.input)return c.map((function(e){return{value:e,highlight:[{from:1,to:e.length}]}}));if(e.input.startsWith("."))return c.filter((function(n){return n.startsWith(e.input)})).map((function(n){return{value:n,highlight:[{from:n.length-e.input.length,to:n.length}]}}));var t,r=(0,a.r6)(e.input),s=u(e.siblings.map((function(e){return e.filename})),r);s.length<3&&(t=s).push.apply(t,(0,i.Z)(u(n(),r)));if(s.length<3){var d,f=r?l.filter((function(e){return e.startsWith(r)})):l;(d=s).push.apply(d,(0,i.Z)(f))}return(0,i.Z)(new Set(s)).slice(0,3).map((function(n){var t="."+n,i=e.input;i.endsWith(".")?i=i.slice(0,-1):r&&(i=i.slice(0,-(r.length+1)));var o=i+t;return{value:o,highlight:[{from:e.input.length,to:o.length}]}}))}},52624:function(e,n,t){t.d(n,{B:function(){return o}});var r=t(4561),i=function(e){if(1===e.length)return e[0].type===r.Tv.File?"file":"folder";if(e.length>1){var n=e.filter((function(e){return e.type===r.Tv.File})).length,t=e.filter((function(e){return e.type===r.Tv.Directory})).length,i=n>1?"files":"file",o=t>1?"folders":"folder",a="file";return n>0&&t>0?a="".concat(i," and ").concat(o):n>0?a="".concat(i):t>0&&(a="".concat(o)),"".concat(a)}return""};function o(e){var n=i(e),t=1===e.length?n:"".concat(e.length," ").concat(n),r=e.slice(0,5).map((function(e){return e.path})).join(", ");return{name:t,description:e.length>5?"".concat(r," and ").concat(e.length-5," more ").concat(i(e.slice(5))):r,confirmDescription:t}}},43330:function(e,n,t){t.d(n,{h:function(){return s},x:function(){return u}});var r=t(9970),i=t(50959),o=t(42256),a=t(91398),l=t(92683),c=(0,a.cn)([]);function u(e,n){var t=n.run,o=n.enabled,a=void 0===o||o,u=(0,l.b9)(c);(0,i.useEffect)((function(){if(a){var n=(Array.isArray(e)?e:[e]).map((function(e){return{shortcut:e,run:t}}));return u((function(e){return(0,r.Z)(e).concat((0,r.Z)(n))})),function(){u((function(e){return e.filter((function(e){return!n.includes(e)}))}))}}}),[e,t,u,a])}function s(){var e=(0,l.Dv)(c);return(0,i.useEffect)((function(){var n=function(n){var t=!0,r=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var c,u=a.value,s=u.shortcut,d=u.run;Boolean(s.cmdOrCtrlKey)===Boolean((0,o.j)(n))&&Boolean(s.altKey)===Boolean(n.altKey)&&Boolean(s.shiftKey)===Boolean(n.shiftKey)&&(null===(c=s.key)||void 0===c?void 0:c.toLowerCase())===n.key.toLowerCase()&&(n.preventDefault(),d(s))}}catch(f){r=!0,i=f}finally{try{t||null==l.return||l.return()}finally{if(r)throw i}}};return document.addEventListener("keydown",n),function(){document.removeEventListener("keydown",n)}}),[e]),null}},29061:function(e,n,t){function r(e,n){return new Promise((function(t){var r=e.openChannel({service:"gcsfiles"},(function(e){return e.channel.request({persistMirror:{path:n}}).then((function(e){e.ok,r(),t()})),function(e){e.willReconnect&&r()}}))}))}t.d(n,{r:function(){return r}})},68702:function(e,n,t){t.d(n,{e:function(){return R},Z:function(){return E}});var r=t(72006),i=t(2272),o=t(85234),a=t.n(o),l=t(50993),c=t(37001),u=t(77637),s=t(1468),d="exit status 1";function f(e){var n=e.execer,t=e.onComplete,r=e.onError,i=e.onParse,o=(0,u.Z)(e,["execer","onComplete","onError","onParse"]);if(0!==o.query.length){var a=new TextEncoder,f=(0,c.Tq)(),p=0,h=0,v=function(){},m=function(e){r(e),t("error")},g=n.onOutput((function(e){var n=a.encode(e).length;h+=n;var t=f(e);if(t){var r=t.error,o=t.filesMap,l=t.filesMapChanges;r&&m(r),p=o.size,l.forEach((function(e){var n=o.get(e);n&&o.set(e,(0,c.Vd)(n))})),i(o,l)}})),y=n.onStderr((function(e){if(e.trim()===d)return m(l.f.EMPTY_RESULTS);m(l.f.INVALID_COMMAND)}));v=function(){g(),y()};var Z=(0,c.PR)(o);n.request({args:Z}).then((function(e){if(e.error)return e.error.trim()===d?m(l.f.EMPTY_RESULTS):m(l.f.INVALID_COMMAND);var n;n="finished",0!==p||"finished"!==n?("finished"===n?t(n,{bytes:h}):t(n),v()):m(l.f.EMPTY_RESULTS)})).catch((function(e){return s.c_.captureException(new Error("Ripgrep search command failed with error: ".concat(e))),m(l.f.INVALID_COMMAND)}))}else t("abort")}var p=t(86763),h=t.n(p),v=t(57135),m=t(9970),g=t(96583),y=t(88254),Z=t(32524),b="signal: broken pipe",w="Channel closed";function x(){return(x=(0,v.Z)((function(e){var n,t,r,i,o,a,s;return(0,g.__generator)(this,(function(f){switch(f.label){case 0:return t=e.container,0===(r=(0,u.Z)(e,["container"])).query.trim().length?[2,k(l.f.EMPTY_QUERY)]:t.getConnectionState()===Z.em.DISCONNECTED?[2,k(l.f.CONTAINER_DISCONNECTED)]:t.getConnectionState()===Z.em.CONNECTING?[2,k(l.f.CONTAINER_CONNECTING)]:[4,(n=t).exec.apply(n,(0,m.Z)((0,c.PR)(r)))];case 1:if(i=f.sent(),o=i.output,a=i.error)switch(a){case d:return[2,k(l.f.EMPTY_RESULTS)];case b:return[2,k(l.f.PARTIAL_RESULTS)];case w:return[2,k(l.f.CHANNEL_CLOSED)];default:return y.Tb(new Error("Ripgrep search command failed with error: ".concat(a))),[2,{error:a,data:null}]}return(null===o||void 0===o?void 0:o.trim())&&((s=(0,c.Tq)()(o))&&0!==s.filesMap.size)?[2,k(s.error,s.filesMap)]:[2,k(l.f.EMPTY_RESULTS)]}}))}))).apply(this,arguments)}function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{error:e,data:n}}var C=t(46335),S=t(29457),T="File Search Used";function E(e){var n=e.container,t=e.onError,i=e.onUpdate,o=e.onLoadingStateChange,u=e.isStreaming,s=e.trackLatency,d=void 0!==s&&s,p=(0,C.Z)({container:n}),v=[],m=a()(),g=Date.now(),y=function(e){i(v=e)};return h()((function(e){var n=a()();m=n,g=Date.now(),t(null),o(!0);var i=!0;if(""===e.query)return y([]),void o(!1);f((0,r.Z)({execer:p,onComplete:function(r,i){if(m===n){o(!1);var a,u,s,f,p="finished"===r&&i&&i.bytes===c.Ak;if(p&&t(l.f.PARTIAL_RESULTS),d)S.kg.time("".concat(T," - complete"),Date.now()-g,{query:e.query,isRegex:e.isRegex,isCaseSensitive:e.isCaseSensitive,hasIncludes:(null!==(s=null===e||void 0===e||null===(a=e.includeGlobs)||void 0===a?void 0:a.length)&&void 0!==s?s:0)>0,hasExcludes:(null!==(f=null===e||void 0===e||null===(u=e.excludeGlobs)||void 0===u?void 0:u.length)&&void 0!==f?f:0)>0,latency:Date.now()-g,isPartialResults:p})}},onError:function(e){m===n&&t(e)},onParse:function(t,r){if(m===n){if(i){var a,l,s,f;if(d)S.kg.time("".concat(T," - first_chunk"),Date.now()-g,{query:e.query,isRegex:e.isRegex,isCaseSensitive:e.isCaseSensitive,hasIncludes:(null!==(s=null===e||void 0===e||null===(a=e.includeGlobs)||void 0===a?void 0:a.length)&&void 0!==s?s:0)>0,hasExcludes:(null!==(f=null===e||void 0===e||null===(l=e.excludeGlobs)||void 0===l?void 0:l.length)&&void 0!==f?f:0)>0});y((0,c.Md)([],t,r)),i=!1}else y((0,c.Md)(v,t,r));u&&o(!1)}},mode:"json",context:0},e))}),200)}function R(e){var n=e.container,t=h()((function(e,t,o){(function(e){return x.apply(this,arguments)})((0,r.Z)({container:n,mode:"json",context:1,isCaseSensitive:!1},e)).then((function(e){var n=e.data?function(e){var n={},t=!0,r=!1,o=void 0;try{for(var a,l=e.entries()[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var c=(0,i.Z)(a.value,2),u=c[0],s=c[1];n[u]=s.lines.map((function(e){return{content:e.content,lineNumber:e.lineNumber,matches:e.matches.map((function(e){return{column:e.start,length:e.length}}))}})).filter((function(e){return e.matches.length>0}))}}catch(d){r=!0,o=d}finally{try{t||null==l.return||l.return()}finally{if(r)throw o}}return n}(e.data):{},r=e.error===l.f.PARTIAL_RESULTS;return r?t({error:null,results:n,isPartialResult:r}):e.error?t({error:e.error,results:null,isPartialResult:r}):t({error:null,results:n,isPartialResult:r})})).catch(o)}),200);return function(e){return new Promise((function(n,r){return t(e,n,r)}))}}},17843:function(e,n,t){t.d(n,{Eu:function(){return u},m6:function(){return i}});var r=t(9970);function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=[],r=function(e){return e.forEach((function(e){return e&&t.push("-g",e)}))},i=[],c=[],u=!0,s=!1,d=void 0;try{for(var f,p=e[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var h=f.value,v=l(h);v.startsWith("**")?i.push(v):c.push(v)}}catch(m){s=!0,d=m}finally{try{u||null==p.return||p.return()}finally{if(s)throw d}}return c.length>0&&(r(["!*"]),new Set(c).forEach((function(e){r(a(e).map(o))}))),r(i),r(n.map((function(e){return"!".concat(o(l(e)))}))),t}function o(e){return e.startsWith("**")||e.startsWith("/")?e:"/".concat(e)}function a(e){var n=function(e){var n;Array.isArray(i[e])||(i[e]=[]);var o=t[e],a=o.startsWith("{")&&o.endsWith("}")?u(o.substring(1,o.length-1),","):[o];(n=i[e]).push.apply(n,(0,r.Z)(a.map((function(n){var t=i[e-1];return t&&t.length>0?t.map((function(e){return"".concat(e,"/").concat(n)})):n})).flat(2)))},t=u(e,"/").filter((function(e){return e.length>0}));"**"!==t[t.length-1]&&t.push("**");for(var i={},o=0;o<t.length;o++)n(o);return Object.values(i).flat(2)}function l(e){return e.replaceAll(/\*/g,(function(e,n,t){return n>0&&("*"===t[n-1]||"\\"===t[n-1])||n<t.length-1&&"*"===t[n+1]?e:"**"}))}var c=function(){var e={},n={},t=function(t,r){e[t]=r,n[r]=t};return t("{","}"),t("(",")"),t("[","]"),{hasKey:function(n){return n in e},getKey:function(n){return e[n]},hasValue:function(e){return e in n},getValue:function(e){return n[e]}}}();function u(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";if(0===e.length)return[];var t=[],r=[],i="",o=!0,a=!1,l=void 0;try{for(var u,s=e[Symbol.iterator]();!(o=(u=s.next()).done);o=!0){var d=u.value;if(d===n){if(0===r.length){t.push(i),i="";continue}}else if(c.hasKey(d))r.push(d);else if(c.hasValue(d)&&r.pop()!==c.getValue(d))return[e];i+=d}}catch(f){a=!0,l=f}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}return 0!==r.length?[e]:(i.length>0&&t.push(i),t)}},37001:function(e,n,t){t.d(n,{Ak:function(){return d},Tq:function(){return f},PR:function(){return y},Vd:function(){return m},Md:function(){return g}});var r=t(72006),i=t(4405),o=t(9970);function a(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.map((function(e){return e.match(/["\s]/)&&!e.match(/'/)?"'".concat(e.replace(/(['\\])/g,"\\$1"),"'"):e.match(/["'\s]/)?'"'.concat(e.replace(/(["\\$`!])/g,"\\$1"),'"'):e.replace(/[#!"$&'()*,:;<=>?@[\\\]^`{|}]/g,"\\$&")})).join(" ")}var l=t(17843),c=t(50993),u=t(29457),s=t(91620).lW,d=524288;function f(){var e="",n=new Map;return function(t){var r=new Set,i=!1;if(t.trim().startsWith("error"))return{error:c.f.INVALID_COMMAND,filesMap:n,filesMapChanges:r};var o=t.indexOf("\n"),a=0,l=e+t;if(o>=0){for(o+=e.length;o>=0;){var u=l.substring(a,o).trim();if(0!==u.length){var s=p(u);if(s)h(s,n,r)||(i=!0)}a=o+1,o=l.indexOf("\n",a)}return e=l.substring(a),{error:i?c.f.INVALID_LINE:null,filesMap:n,filesMapChanges:r}}e=l}}function p(e){try{return JSON.parse(e)}catch(n){return null}}function h(e,n,t){switch(e.type){case"begin":var o=v(e.data.path);if(!o)return!1;n.set(o,{path:o,lines:[],dedentBy:0}),t.add(o);break;case"end":return!0;case"match":case"context":var a=v(e.data.path);if(!a)return!1;t.add(a);var l=n.get(a);if(!l)return!1;var c=function(e,n){var t,o,a=v(e.data.lines);if(!a)return null;var l=a.trimEnd().split(/\r?\n/),c=[];""===(null===(t=l[0])||void 0===t?void 0:t.trim())&&l.shift();""===(null===(o=l[l.length-1])||void 0===o?void 0:o.trim())&&l.pop();var u=0,s=0,d=e.data.submatches;return l.forEach((function(n,t){var r=e.data.line_number+t,i=s;s+=n.length+1;for(var o=[];u<d.length;){var a=d[u];if(a.start>=s)break;var l=a.start-i,f=void 0;if(f=a.end<s?a.end-a.start:a.end===s?a.end-a.start-1:n.length-l,l<n.length&&o.push({start:l,length:f}),a.end>s){a.start=s;break}u++}c.push({lineNumber:r,content:n,matches:o})})),(0,i.Z)((0,r.Z)({},n),{lines:n.lines.concat(c)})}(e,l);return c&&n.set(a,c),!0;case"error":return u.kg.error("Invalid Search Line",{line:JSON.stringify(e)}),!1}return!0}function v(e){return e?"bytes"in e?s.from(e.bytes,"base64").toString():e.text:null}function m(e){var n,t=e.lines.length>0?(n=Math).min.apply(n,(0,o.Z)(e.lines.map((function(e){return e.content.match(/^[\t ]+/)})).flat().map((function(e){return(null===e||void 0===e?void 0:e.length)||0})))):0;return(0,i.Z)((0,r.Z)({},e),{dedentBy:t})}function g(e,n,t){for(var r=(0,o.Z)(e),i=new Set,a=0;a<r.length;a++){var l=r[a].path,c=n.get(l);t.has(l)&&c&&(r[a]=c,i.add(l))}var u=!0,s=!1,d=void 0;try{for(var f,p=t[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var h=f.value,v=n.get(h);!i.has(h)&&v&&r.push(v)}}catch(m){s=!0,d=m}finally{try{u||null==p.return||p.return()}finally{if(s)throw d}}return r}function y(e){var n,t=e.mode,r=e.query,i=e.context,c=e.isRegex,u=e.isCaseSensitive,s=e.isMatchingWholeWords,f=e.includeGlobs,p=e.excludeGlobs,h=["rg"];switch(t){case"json":h.push("--json");break;case"files":h.push("--files-with-matches")}return null!==i&&h.push("--context","".concat(i)),r.includes("\n")&&h.push("--multiline"),c||h.push("--fixed-strings"),h.push("--max-count","100"),h.push("--max-filesize","4M"),h.push("--max-depth","24"),h.push("--max-columns","512"),h.push("--max-columns-preview"),h.push(u?"--case-sensitive":"--ignore-case"),s&&h.push("--word-regexp"),(n=h).push.apply(n,(0,o.Z)((0,l.m6)(f,p))),h.push("--",r),function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d;return["sh","-c","".concat(a.apply(void 0,(0,o.Z)(e))," | head -c ").concat(n)]}(h)}},50993:function(e,n,t){var r;t.d(n,{f:function(){return r}}),function(e){e.PARTIAL_RESULTS="Displaying partial results, try being more specific with your search.",e.EMPTY_RESULTS="Nothing came up searching your Repl's content.",e.EMPTY_QUERY="No search query was provided.",e.INVALID_LINE="We encountered an invalid line while parsing your search results.",e.INVALID_COMMAND="Ripgrep returned an invalid response.",e.CONTAINER_DISCONNECTED="Disconnected from the container.",e.CONTAINER_CONNECTING="Connecting to the container.",e.CHANNEL_CLOSED="Channel was closed."}(r||(r={}))},43746:function(e,n,t){t.d(n,{Z:function(){return i}});var r=t(625);function i(e){(0,r.j)(r.U3.FILETREE_USED,e)}},29599:function(e,n,t){t.d(n,{YI:function(){return A},kW:function(){return B}});var r,i=t(72006),o=t(4405),a=t(74985),l=t(48306),c=t.n(l),u=(t(50959),t(24743));!function(e){e.TEXT="TEXT",e.MENTION="MENTION",e.LINK="LINK",e.REPL_LINK="REPL_LINK",e.DEEP_LINK="DEEP_LINK",e.CODE="CODE",e.BOLD="BOLD",e.ITALICS="ITALICS",e.STRIKETHROUGH="STRIKETHROUGH",e.QUOTE="QUOTE"}(r||(r={}));var s=function(e){var n=e.fragment,t=e.onClick;return(0,a.tZ)(u.Z,{size:"small",onClick:t,children:n.content})},d=function(e){var n=e.fragment,t=e.onClick;return(0,a.tZ)(u.Z,{size:"small",fontWeight:"medium",onClick:t,children:n.content})},f=function(e){var n=e.fragment,t=e.onClick;return(0,a.tZ)("a",{href:n.url,onClick:t,rel:"noreferrer noopener nofollow",target:"_blank",children:n.content})},p=function(e){var n=e.fragment,t=e.onClick;return(0,a.tZ)("a",{href:n.url,onClick:t,target:"_blank",children:n.content})},h=function(e){var n=e.fragment,t=e.onClick;return(0,a.tZ)("a",{href:n.url,onClick:t,children:n.content})},v=function(e){var n=e.fragment,t=e.onClick,r=e.style;return(0,a.tZ)("code",{onClick:t,style:r,children:n.content})},m=function(e){var n=e.fragment,t=e.onClick;return(0,a.tZ)("b",{onClick:t,children:n.content})},g=function(e){var n=e.fragment,t=e.onClick;return(0,a.tZ)("i",{onClick:t,children:n.content})},y=function(e){var n=e.fragment,t=e.onClick;return(0,a.BX)("span",{onClick:t,className:"jsx-e2f6e2707e7599fa",children:[n.content,(0,a.tZ)(c(),{id:"e2f6e2707e7599fa",children:"span.jsx-e2f6e2707e7599fa{text-decoration:line-through}"})]})},Z=function(e){var n=e.fragment,t=e.onClick;return(0,a.BX)("blockquote",{onClick:t,className:"jsx-8741a91fadaf26be",children:[n.content,(0,a.tZ)(c(),{id:"8741a91fadaf26be",children:"blockquote.jsx-8741a91fadaf26be{border-left:2px solid var(--foreground-dimmest);padding-left:6px;color:var(--foreground-dimmest)}"})]})},b=/(@[0-9a-zA-Z_]+)/,w=/(#[-a-zA-Z0-9@:%._+~#=/]+)/,x=/(https?:\/\/[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{2,6}\b(?:[-a-zA-Z0-9()@:%_+.~#?&//=]*))/,k=/(`.+?`)/,C=/(\*\*.+?\*\*)/,S=/(_.+?_)/,T=/(\*.+?\*)/,E=/(~~.+?~~)/,R=/(^>.+?$\n?)/m,I=/\/@([0-9a-zA-Z_]+)\/(.+)/;function G(e){var n=e.url;return{type:r.LINK,url:n,content:n}}function D(e){var n=e.hash;return{type:r.DEEP_LINK,url:n,content:n}}function _(e,n){if(x.test(e)){var t={};try{t=new window.URL(e)}catch(o){return{content:e,type:r.TEXT}}return["repl.it","replit.com","firewalledreplit.com",document.location.host].includes(t.host)?t.pathname===n.replUrl?D({hash:t.hash}):I.test(t.pathname)?function(e){var n=e.url,t=I.exec(n.pathname);if(!t)throw new Error("Not a Repl URL");return{type:r.REPL_LINK,url:n.href,content:"@".concat(t[1],"/").concat(t[2]).concat(n.hash)}}({url:t}):G({url:e}):G({url:e})}if(w.test(e))return D({hash:e});if(R.test(e))return function(e){var n=e.text;return{type:r.QUOTE,content:n}}({text:e.slice(1).trim()});if(k.test(e))return function(e){var n=e.code;return{type:r.CODE,content:n}}({code:e.slice(1,-1)});if(C.test(e))return function(e){var n=e.text;return{type:r.BOLD,content:n}}({text:e.slice(2,-2)});if(S.test(e)||T.test(e))return function(e){var n=e.text;return{type:r.ITALICS,content:n}}({text:e.slice(1,-1)});if(E.test(e))return function(e){var n=e.text;return{type:r.STRIKETHROUGH,content:n}}({text:e.slice(2,-2)});if(b.test(e)){var i=e.slice(1);if(!n.users||n.users.includes(i))return function(e){var n=e.username;return{type:r.MENTION,username:n,content:"@".concat(n)}}({username:i})}return{content:e,type:r.TEXT}}var P=new RegExp([k.source,C.source,S.source,T.source,E.source,x.source,b.source,w.source,R.source].join("|"),"m");function B(e,n){var t=e.split(P),i=[],o=[],a=!0,l=!1,c=void 0;try{for(var u,s=t[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var d=u.value;if(d){var f=_(d,n);if(f){if(f.type===r.MENTION){if(!f.username)continue;i.push(f.username)}o.push(f)}}}}catch(p){l=!0,c=p}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}return{tokens:o,mentions:i}}function A(e){var n=e.message,t=e.onMentionClick,l=void 0===t?function(){}:t,c=e.codeStyles,u=void 0===c?{}:c;return(0,a.tZ)(a.HY,{children:n.tokens.map((function(e,n){var t={fragment:e,key:n};return e.type===r.MENTION?(0,a.tZ)(d,(0,o.Z)((0,i.Z)({},t),{onClick:function(){return l(e)}})):e.type===r.LINK?(0,a.tZ)(f,(0,i.Z)({},t)):e.type===r.REPL_LINK?(0,a.tZ)(p,(0,i.Z)({},t)):e.type===r.DEEP_LINK?(0,a.tZ)(h,(0,i.Z)({},t)):e.type===r.CODE?(0,a.tZ)(v,(0,o.Z)((0,i.Z)({},t),{style:u})):e.type===r.BOLD?(0,a.tZ)(m,(0,i.Z)({},t)):e.type===r.ITALICS?(0,a.tZ)(g,(0,i.Z)({},t)):e.type===r.STRIKETHROUGH?(0,a.tZ)(y,(0,i.Z)({},t)):e.type===r.QUOTE?(0,a.tZ)(Z,(0,i.Z)({},t)):(0,a.tZ)(s,(0,i.Z)({},t))}))})}},39319:function(e,n,t){t.d(n,{D:function(){return Nf}});var r=t(72006),i=t(4405),o=t(9970),a=t(74985),l=t(77511),c=t(83005),u=t(28998),s=t(62405),d=t(71338),f=t(83946),p=t(90171),h=t.n(p),v=function(){return Boolean(h().query.embed||h().query.lite)},m=t(91398),g=t(2272),y=t(48306),Z=t.n(y),b=t(50959),w=t(2187),x=t(85368),k=t(39541),C=t(76328),S=t(67543),T=t(74376),E=t(86763),R=t.n(E),I=t(56997),G=t(74121),D=t(95245),_=function(e){var n=e.buttons,t=e.onClick,r=e.onUndo,i=e.onRedo;return(0,a.BX)("nav",{className:"jsx-43582faf24448cbd",children:[n.map((function(e){return(0,a.tZ)("button",{onClick:function(n){n.stopPropagation(),n.preventDefault(),t(e)},className:"jsx-43582faf24448cbd",children:void 0!==e.label?e.label:e.value},e.value)})),(0,a.tZ)("button",{onClick:function(e){e.stopPropagation(),e.preventDefault(),r()},className:"jsx-43582faf24448cbd",children:(0,a.tZ)(C.Z,{})}),(0,a.tZ)("button",{onClick:function(e){e.stopPropagation(),e.preventDefault(),i()},className:"jsx-43582faf24448cbd",children:(0,a.tZ)(S.Z,{})}),(0,a.tZ)(Z(),{id:"43582faf24448cbd",children:'nav.jsx-43582faf24448cbd{font-family:Monaco,Menlo,"Ubuntu Mono",Consolas,source-code-pro,monospace;height:48px;background-color:var(--background-root);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:stretch;-webkit-align-items:stretch;-moz-box-align:stretch;-ms-flex-align:stretch;align-items:stretch}button.jsx-43582faf24448cbd{color:var(--foreground-default);padding:10px;font-family:inherit;font-size:16px;background-color:transparent;border:0 none;-webkit-box-flex:1;-webkit-flex:1 1 auto;-moz-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto}'})]})},P=[{value:"{}",cursorOffset:1},{value:"()",cursorOffset:1},{value:'""',cursorOffset:1}],B=function(e){var n=e.path,t=(0,o.Z)(P).concat([{value:"= ",cursorOffset:2}]);return n.endsWith(".html")&&(t.unshift({value:"<>",cursorOffset:1}),t.unshift({label:"div",value:"<div></div>",cursorOffset:5})),t},A="visualViewport"in window;function U(e){var n=e.filePath,t=e.isLoading,r=(0,G.uN)(),i=(0,D.d)({tablet:!1}),o=(0,w.Z)();b.useEffect((function(){o&&r&&r.requestMeasure({read:function(){return{cursor:r.coordsAtPos(r.state.selection.main.head),scroller:r.scrollDOM.getBoundingClientRect()}},write:function(e){var n=e.cursor,t=e.scroller;if(n){var i=(n.top+n.bottom)/2,o=(t.top+t.bottom)/2;Math.abs(i-o)>5&&(r.scrollDOM.scrollTop+=i-o+(I.gn?50:0))}}})}),[o,r]);var l=(0,g.Z)(b.useState(0),2),c=l[0],u=l[1];if(b.useEffect((function(){if(I.gn){var e=window.visualViewport;if(A&&e){var n=R()((function(){u(window.innerHeight-e.height-e.offsetTop)}),100);return e.addEventListener("scroll",n),e.addEventListener("resize",n),function(){e.removeEventListener("scroll",n),e.removeEventListener("resize",n)}}}}),[]),!o||t)return null;if(!i)return null;var s=(0,a.tZ)(_,{onUndo:function(){r&&((0,T.Yw)(r),r.focus())},onRedo:function(){r&&((0,T.KX)(r),r.focus())},onClick:function(e){if(r){var n,t=null!==(n=r.state.selection.ranges[0].from)&&void 0!==n?n:0;r.dispatch({changes:{from:t,insert:e.value},selection:{anchor:t+e.cursorOffset}}),r.focus()}},buttons:B({path:n})});return!I.gn||A?(0,a.tZ)(x.G,{css:[k.l0.position.fixed,k.l0.width("100%"),k.l0.zIndex(100),k.l0.bottom(c),k.l0.left(0)],children:s}):s}var L=t(86419),X=t(23271),N=[{img:"/public/images/kaboomdraw/rect.png",code:"\ndrawRect({\n\tpos: vec2(80, 80),\n\twidth: 120,\n\theight: 80,\n\tcolor: rgb(250, 242, 164),\n})\n    ".trim()},{img:"/public/images/kaboomdraw/triangle.png",code:"\ndrawTriangle({\n\tpos: vec2(100, 100),\n\tp1: vec2(0, -48),\n\tp2: vec2(-60, 48),\n\tp3: vec2(60, 48),\n\tcolor: rgb(164, 250, 204),\n})\n  ".trim()},{img:"/public/images/kaboomdraw/circle.png",code:"\ndrawCircle({\n\tpos: vec2(100, 100),\n\tradius: 48,\n\tcolor: rgb(181, 164, 250),\n})\n    ".trim()},{img:"/public/images/kaboomdraw/ellipse.png",code:"\ndrawEllipse({\n\tpos: vec2(120, 100),\n\tradiusX: 64,\n\tradiusY: 40,\n\tcolor: rgb(164, 209, 250),\n})\n    ".trim()},{img:"/public/images/kaboomdraw/polygon.png",code:"\ndrawPolygon({\n\tpos: vec2(100, 100),\n\tpts: [\n\t\tvec2(0, -48),\n\t\tvec2(-64, 0),\n\t\tvec2(-32, 64),\n\t\tvec2(32, 64),\n\t\tvec2(64, 0),\n\t],\n\tcolor: rgb(250, 164, 226),\n})\n    ".trim()},{img:"/public/images/kaboomdraw/text.png",code:'\ndrawText({\n\ttext: "hi",\n\tpos: vec2(60, 60),\n})\n    '.trim()}],M=function(e){var n=e.img,t=e.code,r=(0,g.Z)((0,X.c)({item:{type:L.z.Code,code:t},type:L.z.Code}),2)[1];return(0,a.tZ)("img",{alt:"kaboom shape",ref:r,src:n,css:[k.l0.p(12),{userDrag:"none",height:"100%",cursor:"pointer",transition:"0.1s transform",":hover":{transform:"scale(1.2)"}}]})},F=function(){return(0,a.tZ)(x.G,{css:[k.l0.flex.row,k.l0.justify.spaceEvenly,k.l0.backgroundColor.backgroundHigher,k.l0.borderRadius(8),k.l0.width("calc(100% - 32px)"),k.l0.height("64px"),k.l0.position.absolute,k.l0.overflowY("hidden"),{zIndex:5,left:16,bottom:16,border:"solid 1px var(--outline-dimmest)"}],children:N.map((function(e){return(0,a.tZ)(M,(0,r.Z)({},e),e.img)}))})},O=t(94488),W=t(27256),H=t(57135),V=t(96583),z=t(26833),j=t(14806),q=t(69994),$=t(48468),Y=t(29457),K=t(625),Q=t(64491),J=t(4653);function ee(e){var n=(0,g.Z)(b.useState(null),2),t=n[0],r=n[1];return b.useEffect((function(){if(e)return r((0,J.Z)(e)),e.onServerCapabilitiesChange((function(){r((0,J.Z)(e))}));r(null)}),[e]),t}var ne=t(45285),te=t(60566),re=t(49747),ie=t(87978),oe=t(85234),ae=t.n(oe),le=t(66091),ce=t(5683),ue=t(45347),se=t(10422),de=t(71540),fe=t(61284),pe=t(13405),he=t(75015);function ve(e){var n=e.containerProps,t=e.codeActions,o=e.onExecuted,l=e.path,c=(0,ne.Z)().fs,u=(0,Q.Z)(l);return t.length&&u?(0,a.tZ)(W.XZ,(0,i.Z)((0,r.Z)({},n),{children:t.map((function(e,n){return(0,a.tZ)(pe.Z,{onClick:function(n){n.stopPropagation(),(0,he.S)(e,u,c),o()},children:(0,a.tZ)(W.sN,{children:(0,a.tZ)(fe.xv,{multiline:!1,children:e.title})})},n)}))})):null}var me=t(18171);var ge=new Map;var ye="undefined"===typeof WeakRef?function(e){return{deref:function(){return e}}}:WeakRef,Ze=t(63064);function be(e){var n=e.path,t=e.range,r=e.lspClient;t=function(e){var n,t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:JSON.stringify)(e),r=null===(n=ge.get(t))||void 0===n?void 0:n.deref();return null!=r?r:(ge.set(t,new ye(e)),e)}(t);var i=(0,Ze.Z)(),a=b.useRef(null),l=(0,g.Z)(function(e,n){var t=b.useRef(),r=(0,me.Z)((function(){return R()((function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(void 0,(0,o.Z)(r)).then((function(e){var n;null===(n=t.current)||void 0===n||n.call(t,e)}))}),n)}),[e,n]);return[r,b.useCallback((function(e){t.current=e}),[])]}(b.useCallback(function(){var e=(0,H.Z)((function(e,n){return(0,V.__generator)(this,(function(t){return r.isOpen(e)?(a.current={requestPath:e,requestRange:n},[2,r.request.codeActions(e,n)]):[2,{result:null}]}))}));return function(n,t){return e.apply(this,arguments)}}(),[r]),1e3),2),c=l[0],u=l[1],s=(0,g.Z)(b.useState([]),2),d=s[0],f=s[1],p=b.useCallback((0,H.Z)((function(){return(0,V.__generator)(this,(function(e){return r&&n?(u((function(e){i.current&&("error"in e||null===e.result||0===e.result.length?f([]):f(e.result))})),c(n,t),[2]):[2]}))})),[r,n,c,t,u,i]);return b.useEffect((function(){return p(),function(){c.cancel()}}),[p,c]),[d,p]}var we=t(85577),xe=t(35981),ke=t(73872),Ce=t(45634),Se=j.Py.define();function Te(e){var n=e.state,t=n.doc,r=n.selection.main,i=r.from,o=r.to;return{start:(0,we.s)(t,i),end:(0,we.s)(t,o)}}var Ee=function(e){var n=e.view,t=e.path,r=e.lspClient,i=e.visible,o=e.coords,l=(0,g.Z)(b.useState({x:0,y:0}),2),c=l[0],u=l[1],s=(0,g.Z)(be({path:t,lspClient:r,range:Te(n)}),2),d=s[0],f=s[1],p=(0,ke.Z)(i),h=(0,ke.Z)(o),v=b.useCallback((function(){i.current=!1,n.focus()}),[n,i]);if(b.useEffect((function(){h&&u({x:h.left,y:h.top})}),[h]),b.useEffect((function(){var e=function(e){"Escape"===e.key&&v()};if(p)return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[v,p]),!d.length)return null;var m=d.some((function(e){return"kind"in e&&"quickfix"===e.kind}))?"#75bdff":"#ffcc00";return(0,a.BX)("div",{role:"presentation",onMouseDown:function(e){p||(e.stopPropagation(),e.preventDefault(),u({x:e.nativeEvent.pageX,y:e.nativeEvent.pageY}),i.current=!p)},children:[(0,a.tZ)(de.Z,{css:{fill:m,color:m,cursor:"pointer"},className:"lightbulb"}),p?(0,a.tZ)(ve,{path:t,containerProps:{view:n,verticalOffset:W.R$*d.length,closeMenu:v,width:"auto",coords:c},onExecuted:function(){v(),f()},codeActions:d}):null]})},Re=function(e){(0,ce.Z)(t,e);var n=(0,ue.Z)(t);function t(){var e;return(0,le.Z)(this,t),(e=n.apply(this,arguments)).visible=(0,xe.u)(!1),e.coords=(0,xe.u)(null),e.container=b.createRef(),e}var o=t.prototype;return o.toDOM=function(e){var n=document.createElement("div");return n.setAttribute("aria-hidden","true"),n.className="cm-code-action",this.visible.current=!1,this.props.setDecoration(se.createPortal((0,a.tZ)("span",{ref:this.container,children:(0,a.tZ)(Ee,(0,i.Z)((0,r.Z)({},this.props),{view:e,visible:this.visible,coords:this.coords}))}),n)),n},o.contains=function(e){var n;return(null===(n=this.container.current)||void 0===n?void 0:n.contains(e))||!1},o.updateDOM=function(){return!0},t}(q.l9);var Ie=function(e){return q.lg.fromClass(function(){function n(t){(0,le.Z)(this,n),this.widget=new Re,this.widget.props=e,this.decoration=q.p.widget({widget:this.widget,side:0}),this.updateDecorations(t)}var t=n.prototype;return t.update=function(e){var n=this;(e.docChanged||e.selectionSet)&&this.updateDecorations(e.view),(0,Ce.j)(e,Se,(function(t){var r=t.value;n.widget.visible.current=!0,n.widget.coords.current=r,n.updateDecorations(e.view)}))},t.updateDecorations=function(e){var n,t=e.state,r=t.doc,i=t.selection,o=r.lineAt(i.main.from);this.widget.visible.current||0!==r.length?(n=function(e){return/^( {2}|\u3000|\t)/.test(e)}(o.text)||1===o.number&&1===r.lines?o.from:1===o.number?Math.min(r.length,o.to+1):r.lineAt(o.from-1).from,this.decorations=q.p.set([this.decoration.range(n)])):this.decorations=q.p.none},n}(),{decorations:function(e){return e.decorations},eventHandlers:{scroll:function(){this.widget.visible.current=!1}}})},Ge=q.tk.baseTheme({".cm-code-action":{position:"absolute",zIndex:101,top:"calc(50% - 8px)",left:"0",height:"16px",width:"16px",background:"transparent",fontFamily:k.TV.fontFamilyDefault,"& svg":{display:"block"}}});var De=t(59165),_e=new(function(e){(0,ce.Z)(t,e);var n=(0,ue.Z)(t);function t(){return(0,le.Z)(this,t),n.apply(this,arguments)}return t.prototype.toDOM=function(){return document.createTextNode("\u25cf")},t}(q.SJ)),Pe=j.Py.define({}),Be=j.Py.define({}),Ae=q.p.line({attributes:{class:"cm-debuggerLine"}}),Ue=j.Py.define({}),Le=j.QQ.define({create:function(){return null},update:function(e,n){var t=!0,r=!1,i=void 0;try{for(var o,a=n.effects[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;if(l.is(Ue))return l.value}}catch(c){r=!0,i=c}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return e}});function Xe(e){var n=new j.f_,t=e.state.field(Le);if(null!==t&&t<=e.state.doc.lines){var r=e.state.doc.line(t);n.add(r.from,r.from,Ae)}return n.finish()}var Ne=q.lg.fromClass(function(){function e(n){(0,le.Z)(this,e),this.decorations=Xe(n)}return e.prototype.update=function(e){this.decorations=Xe(e.view)},e}(),{decorations:function(e){return e.decorations}});function Me(e,n){e.dispatch({effects:Be.of({pos:n})})}var Fe=j.QQ.define({create:function(){return j.Xs.empty},update:function(e,n){e=e.map(n.changes);var t=!0,r=!1,i=void 0;try{for(var o,a=function(){var t=o.value;if(t.is(Be)){var r=!1;e.between(t.value.pos,t.value.pos+1,(function(){r=!0})),e=r?e.update({filter:function(e){return e!==t.value.pos}}):e.update({add:[_e.range(t.value.pos)]})}t.is(Pe)&&(e=He(t.value.lines,n.state))},l=n.effects[Symbol.iterator]();!(t=(o=l.next()).done);t=!0)a()}catch(c){r=!0,i=c}finally{try{t||null==l.return||l.return()}finally{if(r)throw i}}return e}}),Oe=q.tk.baseTheme({".cm-breakpoint-gutter .cm-gutterElement":{color:k.TV.accentPrimaryDefault,paddingLeft:k.TV.space4,paddingRight:k.TV.space2,cursor:"default"},".cm-debuggerLine":{backgroundColor:k.TV.accentPrimaryDimmest,borderRadius:k.TV.borderRadius4,marginRight:k.TV.space4}});function We(e,n){var t;return e&&0!==e.length?null===n||(null===(t=e[0].source)||void 0===t?void 0:t.path)!==n?null:e[0].line:null}function He(e,n){var t=(0,o.Z)(new Set(e.filter((function(e){return e<=n.doc.lines})))).map((function(e){return _e.range(n.doc.line(e).from)}));return j.Xs.of(t,!0)}var Ve=t(45853),ze=t(23398),je=t(47581),qe=t(47900),$e=t(7225),Ye=t(34979),Ke={p:{padding:"".concat(k.TV.space2," ").concat(k.TV.space8),lineHeight:1.4,marginBottom:"".concat(k.TV.space8," !important")},"p:first-of-type":{marginTop:"".concat(k.TV.space4," !important")},"p:last-of-type":{marginBottom:"".concat(k.TV.space4," !important")},pre:{margin:"".concat(k.TV.space2," ").concat(k.TV.space8)},"pre + p":{borderTop:"1px solid ".concat(k.TV.outlineDimmest),paddingTop:k.TV.space4},"h1, h2, h3":{margin:"".concat(k.TV.space8," !important"),marginTop:"".concat(k.TV.space12," !important"),padding:"0 !important",paddingBottom:"".concat(k.TV.space4," !important"),fontSize:"100% !important",borderBottom:"1px solid ".concat(k.TV.backgroundHighest," !important"),lineHeight:1},"h1:first-of-type, h2:first-of-type, h3:first-of-type":{marginTop:"".concat(k.TV.space4," !important")},hr:{margin:"".concat(k.TV.space8," !important"),borderTop:"2px solid ".concat(k.TV.backgroundHighest," !important")},li:{margin:"".concat(k.TV.space2," ").concat(k.TV.space8)},".lsp-completion-detail":{borderBottom:"1px solid ".concat(k.TV.backgroundHighest),marginBottom:k.TV.space4},".cm-line":{paddingLeft:k.TV.space4,paddingRight:k.TV.space4},".cm-content":{paddingLeft:k.TV.space4,paddingRight:k.TV.space4}},Qe=b.memo((function(e){var n=e.content,t=e.className;return(0,a.tZ)(x.G,{css:Ke,children:(0,a.tZ)(qe.ZP,{className:t,components:{code:function(e){return(0,a.tZ)(Ye.Z,(0,r.Z)({minimal:!0,disableCopy:!0},e))}},children:n})})}));function Je(e){var n=e.content,t=e.className;return"string"===typeof n?(0,a.tZ)(Qe,{css:[{p:{whiteSpace:"pre-wrap"}}],className:t,content:n}):n.kind===$e.MarkupKind.PlainText?(0,a.tZ)(x.G,{children:(0,a.tZ)(fe.xv,{className:t,children:n.value})}):(0,a.tZ)(Qe,{className:t,content:n.value})}var en=(0,je.B)(),nn=j.Py.define(),tn=j.QQ.define({create:function(){return null},update:function(e,n){if(n.isUserEvent("select")||n.isUserEvent("undo")||n.isUserEvent("redo"))return null;if(!n.isUserEvent("input.type"))return e;if(n.changes.empty)return e;var t="";return n.changes.iterChanges((function(e,n,r,i,o){t=o.sliceString(0,1)})),t||null}});function rn(e){var n=e.lspClient,t=e.path,o=e.setDecoration,l=function(e){return se.createPortal((0,a.tZ)(on,(0,r.Z)({},e)),u)},c=function(e,n){var t=e.state.field(en.state,!1);return"active"!==(0,ze.LR)(e.state)&&(null!=t&&("navigate"!==n||t.signatures.length>1))},u=document.createElement("div"),s={},d={current:null};function f(e,n){return p.apply(this,arguments)}function p(){return p=(0,H.Z)((function(e,r){var i,o,a,l,c,u,s;return(0,V.__generator)(this,(function(f){switch(f.label){case 0:return(l=(null===(i=n.getServerCapabilities())||void 0===i||null===(o=i.signatureHelpProvider)||void 0===o?void 0:o.triggerCharacters)||[])?(c=e.field(h,!1),u=e.field(tn,!1),c||null!=u&&l.includes(u)?[4,ln(e,r,n,t,d)]:[2,null]):[2,null];case 1:return(null===(s=f.sent())||void 0===s||null===(a=s.signatures)||void 0===a?void 0:a.length)?[2,s]:[2,null]}}))})),p.apply(this,arguments)}var h=j.QQ.define({create:function(){return null},update:function(e,n){return n.isUserEvent("select.pointer")?null:(e&&n.newSelection.main.from!==e.pos&&(e=(0,i.Z)((0,r.Z)({},e),{pos:n.newSelection.main.from})),(0,Ce.j)(n,en.effect,(function(t){var r=t.value;e=r?{pos:n.newSelection.main.from,create:function(){return function(e){var n=0,t=function(t){o((0,a.tZ)(l,{help:e,index:n,onLayout:t}))};return t(),s.dom=u,s.update=function(r){(0,Ce.j)(r,nn,(function(i){var o=n+i.value;o>e.signatures.length-1||o<0?setTimeout((function(){r.view.dispatch({effects:en.effect.of(null)})})):n=o,t((function(){(0,q.E2)(r.view)}))}))},s}(r)},above:!0}:null})),e)},provide:function(e){return q.hJ.from(e)}}),v=q.lg.define((function(){var e=R()(function(){var e=(0,H.Z)((function(e){var n,t,r;return(0,V.__generator)(this,(function(i){switch(i.label){case 0:return(n=e.state.selection.main).empty?(t=e.state.field(en.state,!1),[4,f(e.state,n.from)]):[3,2];case 1:(r=i.sent())&&!t&&(0,ze._B)(e),e.dispatch({effects:en.effect.of(r)}),i.label=2;case 2:return[2]}}))}));return function(n){return e.apply(this,arguments)}}(),0);return{update:function(n){n.transactions.some((function(e){return e.selection}))&&n.state.selection.main.empty&&e(n.view)}}})),m=function(e){return function(n){return!!c(n,"navigate")&&(n.dispatch({effects:nn.of(e)}),!0)}},g=[{key:"ArrowDown",run:m(1)},{key:"ArrowUp",run:m(-1)},{key:"Escape",run:function(e){return!!c(e,"dismiss")&&(e.dispatch({effects:en.effect.of(null)}),!0)}}];return[h,en.state,tn,v,j.Wl.high(q.$f.of(g))]}var on=function(e){var n,t,r=e.help,i=e.index,o=e.onLayout,l="1px solid ".concat(k.TV.outlineDimmer),c="min(425px, 80vw)";b.useLayoutEffect((function(){return null===o||void 0===o?void 0:o()}),[o]);var u=r.signatures[i],s=r.signatures.length>1;if(!u)return null;var d=u.documentation,f=null!=r.activeParameter&&(null===(n=u.parameters)||void 0===n||null===(t=n[r.activeParameter])||void 0===t?void 0:t.documentation);return(0,a.BX)(x.G,{css:[k.l0.flex.row,k.l0.backgroundColor.backgroundHigher,{width:"max-content"}],children:[s?(0,a.tZ)(x.G,{css:[k.l0.flex.row,k.l0.pl(4),{borderRight:l,paddingBottom:5}],children:(0,a.BX)("span",{css:[{alignSelf:"flex-end"},k.l0.p(4)],children:[i+1,"/",r.signatures.length]})}):null,(0,a.BX)(x.G,{children:[(0,a.tZ)(x.G,{css:[k.l0.py(4),k.l0.pl(s?4:8),k.l0.pr(8),k.l0.maxHeight(100),k.l0.overflowY("scroll"),k.l0.font.code,{lineHeight:k.TV.lineHeightSmall,maxWidth:c}],children:(0,a.tZ)(an,{signature:u,activeParameter:r.activeParameter})}),Boolean(d||f)&&(0,a.BX)(x.G,{css:[k.l0.px(s?4:8),k.l0.py(2),k.l0.maxHeight(200),k.l0.overflow("scroll"),{borderTop:l,maxWidth:c}],children:[f?(0,a.tZ)(Je,{content:f}):null,d?(0,a.tZ)(Je,{content:d}):null]})]})]})};function an(e){var n,t=e.signature,r=t.label,i=t.parameters,o=e.activeParameter;if(null==o||!i)return(0,a.tZ)("span",{children:r});var l=null===(n=i[o])||void 0===n?void 0:n.label;if(!l)return(0,a.tZ)("span",{children:r});var c=(0,g.Z)("string"===typeof l?[r.indexOf(l),r.indexOf(l)+l.length]:l,2),u=c[0],s=c[1];return(0,a.BX)("div",{children:[(0,a.tZ)("span",{children:r.slice(0,u)}),(0,a.tZ)("strong",{children:l}),(0,a.tZ)("span",{children:r.slice(s)})]})}function ln(e,n,t,r,i){return cn.apply(this,arguments)}function cn(){return cn=(0,H.Z)((function(e,n,t,r,i){var o,a;return(0,V.__generator)(this,(function(l){switch(l.label){case 0:return i.current&&t.notify.cancelRequest(i.current),o=t.generateId(),i.current=o,[4,t.request.signatureHelp(r,(0,we.s)(e.doc,n),{id:o})];case 1:return a=l.sent(),i.current=null,"error"in a?[2,null]:[2,a.result]}}))})),cn.apply(this,arguments)}var un=t(99127),sn=t(92674),dn=t.n(sn),fn=t(67745),pn=new Map;function hn(e){var n=e.lspClient,t=e.path,r=e.view,i=dn().v4();return function(){var e,a=null!==(e=pn.get(t))&&void 0!==e?e:[];pn.set(t,(0,o.Z)(a).concat([i])),n.notify.didOpen(t,r.state.doc.toString())}(),{id:i,destroy:function(){var e,r=(null!==(e=pn.get(t))&&void 0!==e?e:[]).filter((function(e){return e!==i}));n.getServerState()===fn.a.INITIALIZED&&n.isOpen(t)&&n.notify.didClose(t),0===r.length?pn.delete(t):pn.set(t,r)},update:function(e){var r;if(function(){var e;return(null!==(e=pn.get(t))&&void 0!==e?e:[])[0]===i}()&&e.docChanged){var o=null===(r=n.getServerCapabilities())||void 0===r?void 0:r.textDocumentSync;if(o!==un.TextDocumentSyncKind.None&&n.isOpen(t))if(o!==un.TextDocumentSyncKind.Full)n.notify.didChange(t,function(e,n){var t=[],r=n;return e.iterChanges((function(e,n,i,o,a){var l=a.sliceString(0),c=n-e,u=c+i;t.push({range:{start:(0,we.s)(r,i),end:(0,we.s)(r,u)},rangeLength:c,text:l}),r=r.replace(i,u,a)})),t}(e.changes,e.startState.doc));else{var a=e.view.state.doc.toString();n.notify.didChange(t,[{text:a}])}}}}}function vn(e){var n=e.lspClient,t=e.path;return q.lg.define((function(e){return hn({lspClient:n,path:t,view:e})}))}var mn=t(81962),gn=t(28814),yn=t(1468),Zn=t(53028);function bn(e){var n=e.lspClient,t=e.path,r=e.askGhostwriter;return[q.lg.define((function(e){var n=function(e){var n=e.target;(0,mn.Z)(n,HTMLElement)&&n.classList.contains("cm-diagnosticAction")&&e.stopPropagation()};return e.dom.addEventListener("mousedown",n),{destroy:function(){e.dom.removeEventListener("mousedown",n)}}})),q.lg.define((function(e){var i=n.onDiagnostics((function(n){if(n.path===t){var i=function(e,n,t){var r=[],i=!0,o=!1,a=void 0;try{for(var l,c=function(){var e=l.value,i=(0,we.R)(n.doc,e.range.start),o=(0,we.R)(n.doc,e.range.end);if(i===o){var a=n.wordAt(o);if(a)i=a.from,o=a.to;else if(o<n.doc.length)o+=1;else{if(!(i>0))return"continue";i-=1}}if(i>=o)return yn.c_.withScope((function(n){n.setExtra("diagnostic",JSON.stringify(e)),n.setExtra("range",{from:i,to:o}),yn.c_.captureException(new Error("Expected diagnostic range to not be empty"))})),"continue";var c="info";switch(e.severity){case $e.DiagnosticSeverity.Error:c="error";break;case $e.DiagnosticSeverity.Warning:c="warning";break;case $e.DiagnosticSeverity.Hint:case $e.DiagnosticSeverity.Information:c="info"}var u=[];t&&u.push({name:"\ud83d\udd2e Debug",apply:function(){return t({text:(0,Zn.Vh)(e.message,"lsp"),type:"debugger",errorType:"lsp"})}}),r.push({from:i,to:o,severity:c,message:e.message,source:e.source,actions:u})},u=e[Symbol.iterator]();!(i=(l=u.next()).done);i=!0)c()}catch(d){o=!0,a=d}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}var s={error:1,warning:2,info:3,hint:4};return r.sort((function(e,n){return s[n.severity]-s[e.severity]}))}(n.diagnostics,e.state,r);e.dispatch((0,gn.p0)(e.state,i))}}));return{destroy:function(){i()}}}))]}function wn(e){return(0,gn.p0)(e,[])}var xn,kn,Cn=t(57389),Sn=t(44478),Tn=t(48960),En=t(77637),Rn=t(68935),In=t(57988),Gn=t(98539),Dn=t(7742);!function(e){e[e.Dollar=0]="Dollar",e[e.Colon=1]="Colon",e[e.Comma=2]="Comma",e[e.CurlyOpen=3]="CurlyOpen",e[e.CurlyClose=4]="CurlyClose",e[e.Backslash=5]="Backslash",e[e.Forwardslash=6]="Forwardslash",e[e.Pipe=7]="Pipe",e[e.Int=8]="Int",e[e.VariableName=9]="VariableName",e[e.Format=10]="Format",e[e.Plus=11]="Plus",e[e.Dash=12]="Dash",e[e.QuestionMark=13]="QuestionMark",e[e.EOF=14]="EOF"}(xn||(xn={})),function(e){e[e.DollarSign=36]="DollarSign",e[e.Plus=43]="Plus",e[e.Comma=44]="Comma",e[e.Dash=45]="Dash",e[e.Slash=47]="Slash",e[e.Digit0=48]="Digit0",e[e.Digit9=57]="Digit9",e[e.Colon=58]="Colon",e[e.QuestionMark=63]="QuestionMark",e[e.A=65]="A",e[e.Z=90]="Z",e[e.Backslash=92]="Backslash",e[e.Underline=95]="Underline",e[e.a=97]="a",e[e.z=122]="z",e[e.OpenCurlyBrace=123]="OpenCurlyBrace",e[e.Pipe=124]="Pipe",e[e.CloseCurlyBrace=125]="CloseCurlyBrace"}(kn||(kn={}));var _n,Pn=function(){function e(){(0,le.Z)(this,e),this.value="",this.pos=0}var n=e.prototype;return n.text=function(e){this.value=e,this.pos=0},n.tokenText=function(e){return this.value.substr(e.pos,e.len)},n.next=function(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};var n,t=this.pos,r=0,i=this.value.charCodeAt(t);if("number"===typeof(n=e._table[i]))return this.pos+=1,{type:n,pos:t,len:1};if(e.isDigitCharacter(i)){n=8;do{r+=1,i=this.value.charCodeAt(t+r)}while(e.isDigitCharacter(i));return this.pos+=r,{type:n,pos:t,len:r}}if(e.isVariableCharacter(i)){n=9;do{i=this.value.charCodeAt(t+ ++r)}while(e.isVariableCharacter(i)||e.isDigitCharacter(i));return this.pos+=r,{type:n,pos:t,len:r}}n=10;do{r+=1,i=this.value.charCodeAt(t+r)}while(!isNaN(i)&&"undefined"===typeof e._table[i]&&!e.isDigitCharacter(i)&&!e.isVariableCharacter(i));return this.pos+=r,{type:n,pos:t,len:r}},e.isDigitCharacter=function(e){return e>=48&&e<=57},e.isVariableCharacter=function(e){return 95===e||e>=97&&e<=122||e>=65&&e<=90},e}();Pn._table=(_n={},(0,Cn.Z)(_n,36,0),(0,Cn.Z)(_n,58,1),(0,Cn.Z)(_n,44,2),(0,Cn.Z)(_n,123,3),(0,Cn.Z)(_n,125,4),(0,Cn.Z)(_n,92,5),(0,Cn.Z)(_n,47,6),(0,Cn.Z)(_n,124,7),(0,Cn.Z)(_n,43,11),(0,Cn.Z)(_n,45,12),(0,Cn.Z)(_n,63,13),_n);var Bn=function(){function e(){var n;(0,le.Z)(this,e),this._children=[],n=this,["parent"].forEach((function(e){Object.defineProperty(n,e,{enumerable:!1,writable:!0})}))}var n=e.prototype;return n.appendChild=function(e){return(0,mn.Z)(e,An)&&(0,mn.Z)(this._children[this._children.length-1],An)?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this},n.replace=function(e,n){var t,r=e.parent,i=r.children.indexOf(e),a=r.children.slice(0);(t=a).splice.apply(t,[i,1].concat((0,o.Z)(n))),r._children=a,function e(n,t){var r=!0,i=!1,o=void 0;try{for(var a,l=n[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;c.parent=t,e(c.children,c)}}catch(u){i=!0,o=u}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}}(n,r)},n.toString=function(){return this.children.reduce((function(e,n){return e+n.toString()}),"")},n.len=function(){return 0},n.match=function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=Object.entries(Vn)[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=(0,g.Z)(i.value,2),l=a[0],c=a[1];if((0,mn.Z)(this,c)&&l in e)return e[l](this)}}catch(u){t=!0,r=u}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}},(0,In.Z)(e,[{key:"children",get:function(){return this._children}},{key:"rightMostDescendant",get:function(){return this._children.length>0?this._children[this._children.length-1].rightMostDescendant:this}},{key:"snippet",get:function(){for(var e=this;;){if(!e)return;if((0,mn.Z)(e,Wn))return e;e=e.parent}}}]),e}(),An=function(e){(0,ce.Z)(t,e);var n=(0,ue.Z)(t);function t(e){var r;return(0,le.Z)(this,t),(r=n.call(this)).value=e,r}var r=t.prototype;return r.toString=function(){return this.value},r.toTextmateString=function(){return t.escape(this.value)},r.len=function(){return this.value.length},r.clone=function(){return new t(this.value)},t.escape=function(e){return e.replace(/\$|}|\\/g,"\\$&")},t}(Bn),Un=function(e){(0,ce.Z)(t,e);var n=(0,ue.Z)(t);function t(){return(0,le.Z)(this,t),n.apply(this,arguments)}return t}(Bn),Ln=function(e){(0,ce.Z)(t,e);var n=(0,ue.Z)(t);function t(e){var r;return(0,le.Z)(this,t),(r=n.call(this)).index=e,r}var r=t.prototype;return r.toTextmateString=function(){var e="";return this.transform&&(e=this.transform.toTextmateString()),0!==this.children.length||this.transform?0===this.children.length?"${".concat(this.index).concat(e,"}"):this.choice?"${".concat(this.index,"|").concat(this.choice.toTextmateString(),"|").concat(e,"}"):"${".concat(this.index,":").concat(this.children.map((function(e){return e.toTextmateString()})).join("")).concat(e,"}"):"$".concat(this.index)},r.clone=function(){var e=new t(this.index);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map((function(e){return e.clone()})),e},t.compareByIndex=function(e,n){return e.index===n.index?0:e.isFinalTabstop?1:n.isFinalTabstop||e.index<n.index?-1:e.index>n.index?1:0},(0,In.Z)(t,[{key:"isFinalTabstop",get:function(){return 0===this.index}},{key:"choice",get:function(){return 1===this._children.length&&(0,mn.Z)(this._children[0],Xn)?this._children[0]:void 0}}]),t}(Un),Xn=function(e){(0,ce.Z)(t,e);var n=(0,ue.Z)(t);function t(){var e;return(0,le.Z)(this,t),(e=n.apply(this,arguments)).options=[],e}var r=t.prototype;return r.appendChild=function(e){return(0,mn.Z)(e,An)&&(e.parent=this,this.options.push(e)),this},r.toString=function(){return this.options[0].value},r.toTextmateString=function(){return this.options.map((function(e){return e.value.replace(/\||,|\\/g,"\\$&")})).join(",")},r.len=function(){return this.options[0].len()},r.clone=function(){var e=new t;return this.options.forEach(e.appendChild,e),e},t}(Bn),Nn=function(e){(0,ce.Z)(t,e);var n=(0,ue.Z)(t);function t(){var e;return(0,le.Z)(this,t),(e=n.apply(this,arguments)).regexp=new RegExp(""),e}var r=t.prototype;return r.resolve=function(e){var n=this,t=!1,r=e.replace(this.regexp,(function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return t=!0,n._replace(r.slice(0,-2))}));return!t&&this._children.some((function(e){return(0,mn.Z)(e,Mn)&&Boolean(e.elseValue)}))&&(r=this._replace([])),r},r._replace=function(e){var n="",t=!0,r=!1,i=void 0;try{for(var o,a=this._children[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;if((0,mn.Z)(l,Mn)){var c=e[l.index]||"";n+=c=l.resolve(c)}else n+=l.toString()}}catch(u){r=!0,i=u}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n},r.toString=function(){return""},r.toTextmateString=function(){return"/".concat(this.regexp.source,"/").concat(this.children.map((function(e){return e.toTextmateString()})),"/").concat((this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":""))},r.clone=function(){var e=new t;return e.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),e._children=this.children.map((function(e){return e.clone()})),e},t}(Bn),Mn=function(e){(0,ce.Z)(t,e);var n=(0,ue.Z)(t);function t(e,r,i,o){var a;return(0,le.Z)(this,t),(a=n.call(this)).index=e,a.shorthandName=r,a.ifValue=i,a.elseValue=o,a}var r=t.prototype;return r.resolve=function(e){return"upcase"===this.shorthandName?e?e.toLocaleUpperCase():"":"downcase"===this.shorthandName?e?e.toLocaleLowerCase():"":"capitalize"===this.shorthandName?e?e[0].toLocaleUpperCase()+e.substr(1):"":"pascalcase"===this.shorthandName?e?this._toPascalCase(e):"":"camelcase"===this.shorthandName?e?this._toCamelCase(e):"":Boolean(e)&&"string"===typeof this.ifValue?this.ifValue:e||"string"!==typeof this.elseValue?e||"":this.elseValue},r._toPascalCase=function(e){var n=e.match(/[a-z0-9]+/gi);return n?n.map((function(e){return e.charAt(0).toUpperCase()+e.substr(1)})).join(""):e},r._toCamelCase=function(e){var n=e.match(/[a-z0-9]+/gi);return n?n.map((function(e,n){return 0===n?e.charAt(0).toLowerCase()+e.substr(1):e.charAt(0).toUpperCase()+e.substr(1)})).join(""):e},r.toTextmateString=function(){var e="${";return e+=this.index,this.shorthandName?e+=":/".concat(this.shorthandName):this.ifValue&&this.elseValue?e+=":?".concat(this.ifValue,":").concat(this.elseValue):this.ifValue?e+=":+".concat(this.ifValue):this.elseValue&&(e+=":-".concat(this.elseValue)),e+="}"},r.clone=function(){return new t(this.index,this.shorthandName,this.ifValue,this.elseValue)},t}(Bn),Fn=function(e){(0,ce.Z)(t,e);var n=(0,ue.Z)(t);function t(e){var r;return(0,le.Z)(this,t),(r=n.call(this)).name=e,r}var r=t.prototype;return r.resolve=function(e){var n=e.resolve(this);return this.transform&&(n=this.transform.resolve(n||"")),void 0!==n&&(this._children=[new An(n)],!0)},r.toTextmateString=function(){var e="";return this.transform&&(e=this.transform.toTextmateString()),0===this.children.length?"${".concat(this.name).concat(e,"}"):"${".concat(this.name,":").concat(this.children.map((function(e){return e.toTextmateString()})).join("")).concat(e,"}")},r.clone=function(){var e=new t(this.name);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map((function(e){return e.clone()})),e},t}(Un);function On(e,n){for(var t=(0,o.Z)(e);t.length>0;){var r,i=t.shift();if(!n(i))break;(r=t).unshift.apply(r,(0,o.Z)(i.children))}}var Wn=function(e){(0,ce.Z)(t,e);var n=(0,ue.Z)(t);function t(){return(0,le.Z)(this,t),n.apply(this,arguments)}var r=t.prototype;return r.offset=function(e){var n=0,t=!1;return this.walk((function(r){return r===e?(t=!0,!1):(n+=r.len(),!0)})),t?n:-1},r.fullLen=function(e){var n=0;return On([e],(function(e){return n+=e.len(),!0})),n},r.enclosingPlaceholders=function(e){for(var n=[],t=e.parent;t;)(0,mn.Z)(t,Ln)&&n.push(t),t=t.parent;return n},r.resolveVariables=function(e){var n=this;return this.walk((function(t){return(0,mn.Z)(t,Fn)&&t.resolve(e)&&delete n._placeholders,!0})),this},r.appendChild=function(e){return delete this._placeholders,(0,Gn.Z)((0,Dn.Z)(t.prototype),"appendChild",this).call(this,e)},r.replace=function(e,n){return delete this._placeholders,(0,Gn.Z)((0,Dn.Z)(t.prototype),"replace",this).call(this,e,n)},r.toTextmateString=function(){return this.children.reduce((function(e,n){return e+n.toTextmateString()}),"")},r.clone=function(){var e=new t;return this._children=this.children.map((function(e){return e.clone()})),e},r.walk=function(e){On(this.children,e)},(0,In.Z)(t,[{key:"placeholderInfo",get:function(){if(!this._placeholders){var e,n=[];this.walk((function(t){return(0,mn.Z)(t,Ln)&&(n.push(t),e=!e||e.index<t.index?t:e),!0})),this._placeholders={all:n,last:e}}return this._placeholders}},{key:"placeholders",get:function(){return this.placeholderInfo.all}}]),t}(Bn),Hn=function(){function e(){(0,le.Z)(this,e),this._scanner=new Pn,this._token={type:14,pos:0,len:0}}var n=e.prototype;return n.text=function(e){return this.parse(e).toString()},n.parse=function(e,n,t){var r=new Wn;return this.parseFragment(e,r),this.ensureFinalTabstop(r,null!==t&&void 0!==t&&t,null!==n&&void 0!==n&&n),r},n.parseFragment=function(e,n){var t=n.children.length;for(this._scanner.text(e),this._token=this._scanner.next();this._parse(n););var r=new Map,i=[];n.walk((function(e){return(0,mn.Z)(e,Ln)&&(e.isFinalTabstop?r.set(0,void 0):!r.has(e.index)&&e.children.length>0?r.set(e.index,e.children):i.push(e)),!0}));var o=function(e,t){var i=r.get(e.index);if(i){var a=new Ln(e.index);a.transform=e.transform;var l=!0,c=!1,u=void 0;try{for(var s,d=i[Symbol.iterator]();!(l=(s=d.next()).done);l=!0){var f=s.value.clone();a.appendChild(f),(0,mn.Z)(f,Ln)&&r.has(f.index)&&!t.has(f.index)&&(t.add(f.index),o(f,t),t.delete(f.index))}}catch(p){c=!0,u=p}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}n.replace(e,[a])}},a=new Set,l=!0,c=!1,u=void 0;try{for(var s,d=i[Symbol.iterator]();!(l=(s=d.next()).done);l=!0){var f=s.value;o(f,a)}}catch(p){c=!0,u=p}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}return n.children.slice(t)},n.ensureFinalTabstop=function(e,n,t){(n||t&&e.placeholders.length>0)&&(e.placeholders.find((function(e){return 0===e.index}))||e.appendChild(new Ln(0)))},n._accept=function(e,n){if(void 0===e||this._token.type===e){var t=!n||this._scanner.tokenText(this._token);return this._token=this._scanner.next(),t}return!1},n._backTo=function(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1},n._until=function(e){for(var n=this._token;this._token.type!==e;){if(14===this._token.type)return!1;if(5===this._token.type){var t=this._scanner.next();if(0!==t.type&&4!==t.type&&5!==t.type)return!1}this._token=this._scanner.next()}var r=this._scanner.value.substring(n.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),r},n._parse=function(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)},n._parseEscaped=function(e){var n;return!!(n=this._accept(5,!0))&&(n=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||n,e.appendChild(new An(n)),!0)},n._parseTabstopOrVariableName=function(e){var n,t=this._token;return this._accept(0)&&(n=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(n)?new Ln(Number(n)):new Fn(n)),!0):this._backTo(t)},n._parseComplexPlaceholder=function(e){var n,t=this._token;if(!(this._accept(0)&&this._accept(3)&&(n=this._accept(8,!0))))return this._backTo(t);var r=new Ln(Number(n));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(r),!0;if(!this._parse(r))return e.appendChild(new An("${"+n+":")),r.children.forEach(e.appendChild,e),!0}else{if(!(r.index>0&&this._accept(7)))return this._accept(6)?this._parseTransform(r)?(e.appendChild(r),!0):(this._backTo(t),!1):this._accept(4)?(e.appendChild(r),!0):this._backTo(t);for(var i=new Xn;;){if(this._parseChoiceElement(i)){if(this._accept(2))continue;if(this._accept(7)&&(r.appendChild(i),this._accept(4)))return e.appendChild(r),!0}return this._backTo(t),!1}}},n._parseChoiceElement=function(e){for(var n=this._token,t=[];2!==this._token.type&&7!==this._token.type;){var r=void 0;if(!(r=(r=this._accept(5,!0))?this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||r:this._accept(void 0,!0)))return this._backTo(n),!1;t.push(r)}return 0===t.length?(this._backTo(n),!1):(e.appendChild(new An(t.join(""))),!0)},n._parseComplexVariable=function(e){var n,t=this._token;if(!(this._accept(0)&&this._accept(3)&&(n=this._accept(9,!0))))return this._backTo(t);var r=new Fn(n);if(!this._accept(1))return this._accept(6)?this._parseTransform(r)?(e.appendChild(r),!0):(this._backTo(t),!1):this._accept(4)?(e.appendChild(r),!0):this._backTo(t);for(;;){if(this._accept(4))return e.appendChild(r),!0;if(!this._parse(r))return e.appendChild(new An("${"+n+":")),r.children.forEach(e.appendChild,e),!0}},n._parseTransform=function(e){for(var n=new Nn,t="",r="";!this._accept(6);){var i=void 0;if(i=this._accept(5,!0))t+=i=this._accept(6,!0)||i;else{if(14===this._token.type)return!1;t+=this._accept(void 0,!0)}}for(;!this._accept(6);){var o=void 0;if(o=this._accept(5,!0))o=this._accept(5,!0)||this._accept(6,!0)||o,n.appendChild(new An(o));else if(!this._parseFormatString(n)&&!this._parseAnything(n))return!1}for(;!this._accept(4);){if(14===this._token.type)return!1;r+=this._accept(void 0,!0)}try{n.regexp=new RegExp(t,r)}catch(a){return!1}return e.transform=n,!0},n._parseFormatString=function(e){var n=this._token;if(!this._accept(0))return!1;var t=!1;this._accept(3)&&(t=!0);var r=this._accept(8,!0);if(!r)return this._backTo(n),!1;if(!t)return e.appendChild(new Mn(Number(r))),!0;if(this._accept(4))return e.appendChild(new Mn(Number(r))),!0;if(!this._accept(1))return this._backTo(n),!1;if(this._accept(6)){var i=this._accept(9,!0);return i&&this._accept(4)?(e.appendChild(new Mn(Number(r),i)),!0):(this._backTo(n),!1)}if(this._accept(11)){var o=this._until(4);if(o)return e.appendChild(new Mn(Number(r),void 0,o,void 0)),!0}else if(this._accept(12)){var a=this._until(4);if(a)return e.appendChild(new Mn(Number(r),void 0,void 0,a)),!0}else if(this._accept(13)){var l=this._until(1);if(l){var c=this._until(4);if(c)return e.appendChild(new Mn(Number(r),void 0,l,c)),!0}}else{var u=this._until(4);if(u)return e.appendChild(new Mn(Number(r),void 0,void 0,u)),!0}return this._backTo(n),!1},n._parseAnything=function(e){return 14!==this._token.type&&(e.appendChild(new An(this._scanner.tokenText(this._token))),this._accept(void 0),!0)},e.escape=function(e){return e.replace(/\$|}|\\/g,"\\$&")},e.asInsertText=function(n){return(new e).parse(n).toString()},e.guessNeedsClipboard=function(e){return/\${?CLIPBOARD/.test(e)},e}(),Vn={Text:An,Placeholder:Ln,Variable:Fn,FormatString:Mn,Choice:Xn};function zn(e,n){var t=n.mapPos(e.from,-1,j.gc.TrackDel),r=n.mapPos(e.to,1,j.gc.TrackDel);return null==t||null==r?null:{field:e.field,from:t,to:r}}var jn=function(){function e(n){(0,le.Z)(this,e),this.lines=n.split(/\r\n?|\n/).map((function(e){return(new Hn).parse(e).children}))}return e.prototype.apply=function(n){var t=n.view,r=n.from,i=n.to,o=e.instantiate(this.lines,n),a=o.text,l=o.ranges,c={from:r,to:i,insert:j.xv.of(a)},u={changes:c,scrollIntoView:!0,annotations:ze.Jv.of(n.completion)};if(l.length&&(u.selection=et(l,0)),l.length>1){var s=new Yn(l,0),d=u.effects=[Kn.of(s)];void 0===t.state.field(Jn,!1)&&d.push(j.Py.appendConfig.of([Jn,tt,rt]))}if(r===i&&!l.length){var f=j.as.of(c,t.state.doc.length),p=t.state.selection.ranges.map((function(e){return e.map(f,0)}));u.selection=j.jT.create(p,t.state.selection.mainIndex)}return u},e.resolveVariable=function(e,n){var t=n.view,r=n.from,i=n.path;switch(e){case"TM_FILENAME":return(0,Tn.basename)(i);case"TM_FILENAME_BASE":return(0,Tn.basename)(i,(0,Tn.extname)(i));case"TM_DIRECTORY":return(0,Tn.dirname)(i);case"TM_FILEPATH":return i;case"TM_LINE_INDEX":return(t.state.doc.lineAt(r).number-1).toString();case"TM_LINE_NUMBER":return t.state.doc.lineAt(r).number.toString();default:return e}},e.instantiate=function(n,t){var a,l=t.view,c=t.from,u=l.state,s=[],d=[],f=u.doc.lineAt(c),p=/^\s*/.exec(f.text)[0],h=u.facet(Rn.c),v=!0,m=!1,g=void 0;try{for(var y,Z=function(){var n=y.value,r=0,i="",o=function(e){var n=0,t=r;if(0===r&&(n=/^\t*/.exec(e)[0].length)){var o=p+h.repeat(n);e=o+e.slice(n),t+=o.length}return i+=e,r+=e.length,{line:s.length,from:t,to:r}},a=function(n){var i=!0,l=!1,u=void 0;try{for(var f,p=n[Symbol.iterator]();!(i=(f=p.next()).done);i=!0){f.value.match({Text:function(e){o(e.value)},Variable:function(n){var r=n.name,i=n.transform,a=e.resolveVariable(r,t);i&&(a=a.replace(i.regexp,(function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return i.children.map((function(e){return e.match({Text:function(e){return e.value},FormatString:function(e){return e.resolve(n[e.index])}})})).filter(Boolean).join("")}))),o(a)},Choice:function(e){o(e.options[0].value)},Placeholder:function(e){var n,t=s.length?c+s.map((function(e){return e.length})).reduce((function(e,n){return e+n})):c;if(null===(n=e.children)||void 0===n?void 0:n.length){var i={field:e.index,from:t+r,to:null};d.push(i),a(e.children),i.to=t+r}else{o("");var l=t+r;d.push({field:e.index,from:l,to:l})}}})}}catch(h){l=!0,u=h}finally{try{i||null==p.return||p.return()}finally{if(l)throw u}}};a(n),s.push(i)},b=n[Symbol.iterator]();!(v=(y=b.next()).done);v=!0)Z()}catch(x){m=!0,g=x}finally{try{v||null==b.return||b.return()}finally{if(m)throw g}}var w=(a=Math).max.apply(a,(0,o.Z)(d.map((function(e){return e.field}))));return{text:s,ranges:d.map((function(e){var n=e.field,t=(0,En.Z)(e,["field"]);return(0,i.Z)((0,r.Z)({},t),{field:0===n?w:n-1})}))}},e}(),qn=q.p.widget({widget:new(function(e){(0,ce.Z)(t,e);var n=(0,ue.Z)(t);function t(){return(0,le.Z)(this,t),n.apply(this,arguments)}var r=t.prototype;return r.toDOM=function(){var e=document.createElement("span");return e.className="cm-snippetFieldPosition",e},r.ignoreEvent=function(){return!1},t}(q.l9))}),$n=q.p.mark({class:"cm-snippetField"}),Yn=function(){function e(n,t){(0,le.Z)(this,e),this.ranges=n,this.active=t,this.deco=q.p.set(n.map((function(e){return(e.from===e.to?qn:$n).range(e.from,e.to)})))}var n=e.prototype;return n.map=function(n){var t=[],r=!0,i=!1,o=void 0;try{for(var a,l=this.ranges[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=zn(a.value,n);if(!c)return null;t.push(c)}}catch(u){i=!0,o=u}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return new e(t,this.active)},n.isSelectionInsideField=function(e){var n=this;return e.ranges.every((function(e){return n.ranges.some((function(t){return t.field===n.active&&t.from<=e.from&&t.to>=e.to}))}))},e}(),Kn=j.Py.define({map:function(e,n){return null===e||void 0===e?void 0:e.map(n)}}),Qn=j.Py.define(),Jn=j.QQ.define({create:function(){return null},update:function(e,n){var t=!0,r=!1,i=void 0;try{for(var o,a=n.effects[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;if(l.is(Kn))return l.value;if(l.is(Qn)&&e)return new Yn(e.ranges,l.value)}}catch(c){r=!0,i=c}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return e&&n.docChanged&&(e=e.map(n.changes)),e&&n.selection&&!e.isSelectionInsideField(n.selection)&&(e=null),e},provide:function(e){return q.tk.decorations.from(e,(function(e){return e?e.deco:q.p.none}))}});function et(e,n){var t=e.filter((function(e){return e.field===n})).map((function(e){return j.jT.range(e.from,e.to)}));if(0!==t.length)return j.jT.create(t)}function nt(e){return function(n){var t,r=n.state,i=n.dispatch,a=r.field(Jn,!1);if(!a||e<0&&0===a.active)return!1;var l=a.active+e,c=(t=Math).max.apply(t,(0,o.Z)(a.ranges.map((function(e){return e.field})))),u=e>0&&a.active>=c;return i(r.update({selection:et(a.ranges,l),effects:Kn.of(u?null:new Yn(a.ranges,l))})),!0}}var tt=j.Wl.highest(q.$f.of([{key:"Tab",run:nt(1),shift:nt(-1)},{key:"Escape",run:function(e){var n=e.state,t=e.dispatch;return!!n.field(Jn,!1)&&(t(n.update({effects:Kn.of(null)})),!0)}}])),rt=q.tk.domEventHandlers({mousedown:function(e,n){var t,r=n.state.field(Jn,!1);if(!r||null==(t=n.posAtCoords({x:e.clientX,y:e.clientY})))return!1;var i=r.ranges.find((function(e){return e.from<=t&&e.to>=t}));return!(!i||i.field===r.active)&&(n.dispatch({selection:et(r.ranges,i.field),effects:Kn.of(r.ranges.some((function(e){return e.field>i.field}))?new Yn(r.ranges,i.field):null)}),!0)}}),it=t(35086),ot=t(93731);function at(e){var n=e.facet(Rn.dK);return null===n||void 0===n?void 0:n.name}var lt=t(43e3),ct=t(47880),ut=t(72669),st=t(82568),dt="cm-ghostwriter-hint-tooltip",ft=q.tk.theme((0,Cn.Z)({".cm-ghostwriter-hint":{display:"none",width:"100%",backgroundColor:k.TV.backgroundHigher,borderTop:"solid 1px ".concat(k.TV.outlineDefault)}},".cm-tooltip-autocomplete.".concat(dt," .cm-ghostwriter-hint"),{display:"block"})),pt=(0,st.X)({hint:[k.l0.p(4),k.l0.rowWithGap(8),k.l0.align.center,k.l0.font.default,{opacity:.6}],prompt:[k.l0.rowWithGap(4),k.l0.align.center]});function ht(){return(0,a.BX)(x.G,{css:pt.hint,children:[(0,a.tZ)(ct.Z,{width:8,height:8}),(0,a.BX)(x.G,{css:pt.prompt,children:[(0,a.tZ)(it.ZP,{size:"small",dimmed:!1,shortcut:{key:"tab"}}),(0,a.tZ)(fe.xv,{variant:"small",multiline:!1,children:"to use Ghostwriter suggestion."})]})]})}var vt=q.lg.define((function(e){var n=function(){return Array.from(e.dom.children).filter((function(e){return e.classList.contains("cm-tooltip-autocomplete")}))},t=function(e){return Array.from(e.children).filter((function(e){return e.classList.contains("cm-ghostwriter-hint")}))},r=!1;return{update:function(){null!==(0,ze.LR)(e.state)&&Promise.resolve().then((function(){if(!r){var e=!0,i=!1,o=void 0;try{for(var l,c=n()[Symbol.iterator]();!(e=(l=c.next()).done);e=!0){var u=l.value;if(0===t(u).length){var s=(0,ut.VV)((0,a.tZ)(ht,{}));s.className="cm-ghostwriter-hint",u.appendChild(s)}}}catch(d){i=!0,o=d}finally{try{e||null==c.return||c.return()}finally{if(i)throw o}}}}))},destroy:function(){var e=!0,i=!1,o=void 0;try{for(var a,l=n()[Symbol.iterator]();!(e=(a=l.next()).done);e=!0){var c=a.value,u=!0,s=!1,d=void 0;try{for(var f,p=t(c)[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var h=f.value;c.removeChild(h)}}catch(v){s=!0,d=v}finally{try{u||null==p.return||p.return()}finally{if(s)throw d}}}}catch(v){i=!0,o=v}finally{try{e||null==l.return||l.return()}finally{if(i)throw o}}r=!0}}}));function mt(e){var n=Object.keys(e).join(""),t=/\w/.test(n);return t&&(n=n.replace(/\w/g,"")),"[".concat(t?"\\w":"").concat(n.replace(".","").replace(/[^\w\s]/g,"\\$&"),"]")}function gt(e,n){var t=e.state,r=e.pos;if(e.explicit)return{triggerKind:un.CompletionTriggerKind.Invoked};var i=t.doc.lineAt(r),o=i.text[r-i.from-1],a=i.text.substring(0,r-i.from);if(null===n||void 0===n?void 0:n.includes(o)){var l=o;return{triggerKind:un.CompletionTriggerKind.TriggerCharacter,triggerCharacter:l}}return a.match(/\w$/)?{triggerKind:un.CompletionTriggerKind.Invoked}:null}var yt=Object.entries($e.CompletionItemKind).reduce((function(e,n){var t=(0,g.Z)(n,2),i=t[0],o=t[1];return(0,r.Z)((0,Cn.Z)({},o,i.toLowerCase()),e)}),{});function Zt(e,n){var t=(0,we.R)(e.state.doc,n.range.start),r=(0,we.R)(e.state.doc,n.range.end);if(null!==t&&null!==r)return{from:t,to:r,insert:n.newText}}function bt(e){var n,t=e.context,l=e.items,c=e.client,u=e.path,s=e.setDecoration,d=e.trackCompletion,f=0,p=null!==(n=at(t.state))&&void 0!==n?n:"unknown",h=function(e,n){var t=new Set;return e.filter((function(e){var r=n.map((function(n){return e[n]})).join("\u241e");return!t.has(r)&&(t.add(r),!0)}))}(l.filter((function(e){return Boolean(e.label)})),["label","kind"]).map((function(e){var n=e.additionalTextEdits,t={label:e.label,detail:e.detail,apply:function(t,a,l,c){if(e.insertTextFormat===$e.InsertTextFormat.Snippet){var s,f,h,v,m=[];n&&m.push({changes:n.map((function(e){return Zt(t,e)}))});var y=null!==(v=null!==(h=null===(f=e.textEdit)||void 0===f?void 0:f.newText)&&void 0!==h?h:e.insertText)&&void 0!==v?v:e.label,Z=new jn(y);e.textEdit&&"range"in e.textEdit&&(l=(0,we.R)(t.state.doc,e.textEdit.range.start),c=Math.max(c,(0,we.R)(t.state.doc,e.textEdit.range.end)));var b=Z.apply({view:t,from:l,to:c,path:u,completion:a});return(s=t).dispatch.apply(s,(0,o.Z)(m).concat([b])),void d("completion-accepted",{language:p,completionKind:e.kind,insertTextFormat:e.insertTextFormat})}var w=function(e){var n,t=e.view,o=e.item,a=e.from,l=e.to,c=t.state,u=c.doc,s=c.selection,d=[];if(o.textEdit){var f=o.textEdit,p=f.range,h=f.newText,v=(0,we.R)(u,p.start),m=(0,we.R)(u,p.end);if(null===v||null===m)return;d.push({from:v,insert:h,to:Math.max(m,s.main.to)})}else{var y=o.insertText||o.label,Z=t.state.wordAt(l);Z&&Z.to>l&&y.includes(t.state.doc.sliceString(l,Z.to))&&(l=Z.to),d.push({from:a,to:l,insert:y})}var b=(0,g.Z)(d,1)[0],w="";null===(n=o.additionalTextEdits)||void 0===n||n.forEach((function(e){var n=Zt(t,e);n&&("from"in b&&n.from===b.from&&(w=n.insert),d.push(n))}));var x=l-a;s.ranges.forEach((function(e){if(e!==s.main){if(!("insert"in b)||!b.insert)throw new Error("Expected insert in mainChange");var n=e.from-x,t=w+b.insert;d.push({from:n,to:e.to,insert:t})}}));var k=d.map((function(e){return"from"in e&&"undefined"!==typeof e.to?(0,i.Z)((0,r.Z)({},e),{from:Math.min(e.from,e.to),to:Math.max(e.from,e.to)}):e})),C=j.as.of(k,u.length),S=s.ranges.map((function(e){return e.map(C,0)}));return{changes:C,selection:j.jT.create(S,s.mainIndex)}}({view:t,item:(0,i.Z)((0,r.Z)({},e),{additionalTextEdits:n}),to:c,from:l});w&&(d("completion-accepted",{language:p,completionKind:e.kind,insertTextFormat:e.insertTextFormat}),t.dispatch({changes:w.changes,selection:w.selection,annotations:ze.Jv.of(a)}))},type:e.kind&&yt[e.kind],filterText:(e.filterText||e.label).toLowerCase(),sortText:(e.sortText||e.label).toLowerCase()},l=(0,J.Z)(c).isCompletionItemResolveSupported;return c&&l?t.info=(0,H.Z)((function(){var t,r,i,o,l,h,v;return(0,V.__generator)(this,(function(m){switch(m.label){case 0:return[4,c.request.resolveCompletionItem(e)];case 1:return t=m.sent(),r="cancelled"in t&&t.cancelled,i="result"in t?t.result:null,r||!i?[2,null]:(i.additionalTextEdits&&(n=i.additionalTextEdits),f++,o=[],i.detail&&i.detail!==e.detail&&i.detail!==e.label&&(l=(0,Tn.extname)(u).slice(1),h=["```"+l,i.detail,"```"].join("\n"),o.push((0,a.tZ)(Je,{className:"lsp-completion-detail",content:{value:h,kind:"markdown"}},"".concat(f,"-detail")))),i.documentation&&o.push((0,a.tZ)(Je,{content:i.documentation},"".concat(f,"-documentation"))),0===o.length?[2,null]:(d("resolution-presented",{language:p,resolutionSource:"request",completionKind:e.kind}),v=document.createElement("div"),s(se.createPortal((0,a.tZ)(a.HY,{children:o}),v)),[2,v]))}}))})):e.documentation&&(t.info=function(){if(!e.documentation)return null;d("resolution-presented",{language:p,resolutionSource:"documentation",completionKind:e.kind});var n=document.createElement("div");return s(se.createPortal((0,a.tZ)(a.HY,{children:(0,a.tZ)(Je,{content:e.documentation})}),n)),n}),t}));h=h.sort((function(e,n){return e.sortText<n.sortText?-1:e.sortText>n.sortText?1:0}));for(var v=0;v<h.length;v++)h[v-1]&&h[v].sortText===h[v-v].sortText?h[v].boost=h[v-1].boost:h[v].boost=h.length-v;var m=(0,g.Z)(function(e){var n=Object.create(null),t=Object.create(null),r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value.filterText;n[c[0]]=!0;for(var u=1;u<c.length;u++)t[c[u]]=!0}}catch(d){i=!0,o=d}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}var s=mt(n)+mt(t)+"*$";return[new RegExp("^"+s),new RegExp(s)]}(h),2),y=m[0],Z=m[1],b=t.matchBefore(Z),w=t.pos;return b&&(w=b.from),h.length&&d("completion-options-presented",{language:p}),{from:w,options:h,validFor:y}}var wt=q.tk.baseTheme({".lsp-completion-keyboard-shortcuts":{display:"none"},'[aria-selected="true"] .lsp-completion-keyboard-shortcuts':{float:"right",display:"inline-block"}}),xt=t(38453),kt=t(88541),Ct=t(11619);function St(e){var n=e.content,t=e.className,i=e.showHoveredVariable,o=(0,Ct.Z)().preferences;if("string"!==typeof n&&"kind"in n)return(0,a.tZ)(Je,{content:n});var l=(Array.isArray(n)?n:[n]).map((function(e){return"string"===typeof e?e:"```"+e.language+"\n"+e.value+"\n```"})).join("\n");return(0,a.tZ)(qe.ZP,{css:[{p:{fontSize:o.fontSize}},i?[k.l0.maxHeight(Tt),k.l0.overflowY("auto")]:void 0],className:t,components:{code:function(e){return(0,a.tZ)(Ye.Z,(0,r.Z)({minimal:!0,disableCopy:!0},e))}},children:l})}var Tt=100;function Et(e){var n=e.className,t=e.content,i=e.textHovered,o=(0,kt.P5)({controlName:"flag-debugger-hover-variable",logFlagToAnalytics:!1}),l=(0,ne.Z)().debuggest,c=(0,ke.Z)(l.mainClient),u=c&&("running"===c.state.current||"paused"===c.state.current),s=(0,g.Z)(b.useState(!1),2),d=s[0],f=s[1],p=(0,g.Z)(b.useState(void 0),2),h=p[0],v=p[1],m=o&&u&&h;return b.useEffect((function(){function e(){return e=(0,H.Z)((function(){var e,n,t;return(0,V.__generator)(this,(function(a){switch(a.label){case 0:if(!o||!u)return[3,4];f(!0),a.label=1;case 1:return a.trys.push([1,,3,4]),[4,c.evaluate({expression:i,context:"hover"})];case 2:return n=a.sent(),(null===(e=n.body)||void 0===e?void 0:e.result)&&(t=(0,r.Z)({name:i,value:n.body.result},n.body),v(t)),[3,4];case 3:return f(!1),[7];case 4:return[2]}}))})),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[o,c,u,i]),(0,a.BX)(x.G,{css:[Ke,m?k.l0.maxHeight(Tt+190):k.l0.maxHeight(190),k.l0.minHeight(30),k.l0.overflowY("auto"),k.l0.borderRadius(4),k.l0.backgroundColor.backgroundHigher],children:[d?void 0:(0,a.tZ)(St,{content:t,className:n,showHoveredVariable:Boolean(m)}),m?(0,a.tZ)(x.G,{css:[k.l0.maxHeight(190),k.l0.overflowY("auto")],children:(0,a.tZ)(xt._,{depth:0,client:c,variable:h})}):void 0]})}var Rt=t(951);function It(e){var n,t,r=e.hover,i=e.state,o=e.offset,l=e.languageId;if((Array.isArray(r.contents)||"string"===typeof r.contents)&&0===r.contents.length)return null;l.endsWith("css")&&Array.isArray(r.contents)&&(r.contents={kind:"markdown",value:"```html \n".concat(r.contents[0],"\n```\n").concat(r.contents[1],"\n      ")});var c="",u=i.doc;if(r.range)n=(0,we.R)(u,r.range.start),t=(0,we.R)(u,r.range.end),c=u.sliceString(n,t);else if(t=void 0,(n=o)<=i.doc.length){var s=i.wordAt(n);s?(c=u.sliceString(s.from,s.to),n=Math.min(n,s.from),t=s.to):c=u.sliceString(n,n+1)}return{pos:n,end:t,create:function(){var e=(0,ut.VV)((0,a.tZ)(Et,{content:r.contents,textHovered:c}));return e.classList.add("hover-tooltip"),e.style.padding="0",{dom:e,mount:function(e){var n;n=function(){(0,q.E2)(e)},[0,50,200,1e3].forEach((function(e){return setTimeout(n,e)}))}}},above:!0}}var Gt=t(21449),Dt=t(87042),_t=t(99964),Pt=t(94971),Bt=t(12318),At=t(45510),Ut=t(87076),Lt=t(80336),Xt=t(63837);var Nt=(0,st.X)({headerContainer:[k.l0.flex.row,k.l0.align.center,k.l0.pr(4)],bodyContainer:[k.l0.justify.center,k.l0.align.center,k.l0.p(8),k.l0.pt(4)],input:[k.l0.p(4),k.l0.borderRadius(4)],wrapper:[k.l0.flex.column,k.l0.justify.center,k.l0.borderRadius(4),k.l0.shadow(2),k.l0.width(200)]});function Mt(e){var n=(0,_t.Z)(e.onClose,[e.onClose]);!function(e){(0,b.useEffect)((function(){var n=function(n){"Escape"===n.key&&e(n)};return window.addEventListener("keydown",n),function(){window.removeEventListener("keydown",n)}}),[e])}(e.onClose);var t=(0,b.useRef)(null),r=(0,Bt.Y)(e.currentValue,(function(n){return n?n===e.currentValue?{message:"Must pick a new name"}:void 0:{message:"New name can't be empty"}}));return(0,a.tZ)(x.G,{"data-testid":"RenameInput",innerRef:n,css:Nt.wrapper,children:(0,a.BX)("form",{onSubmit:function(n){n.preventDefault(),r.error||e.onRename(r.value)},children:[(0,a.BX)(x.G,{css:Nt.headerContainer,children:[(0,a.tZ)(fe.h4,{level:2,variant:"subheadDefault",css:[k.l0.p(4),k.l0.pl(8)],children:"Rename"}),(0,a.tZ)(fe.h4,{level:2,variant:"subheadDefault",color:"dimmer",css:[k.l0.maxWidth(100),k.l0.overflow("hidden"),{whiteSpace:"nowrap",textOverflow:"ellipsis"}],children:e.currentValue}),(0,a.tZ)(Ut.h,{alt:"Close rename input",tooltipHidden:!0,onClick:e.onClose,css:[k.l0.position.absolute,k.l0.top(4),k.l0.right(4)],children:(0,a.tZ)(Lt.Z,{})})]}),(0,a.tZ)(x.G,{css:Nt.bodyContainer,children:(0,a.tZ)(Pt.ZP,{css:Nt.input,name:"rename",ref:t,onBlur:r.handleBlur,onChange:function(e){r.setValue(e.target.value)},value:r.value,placeholder:"New name",autoFocus:!0,autoCorrect:"off",autoCapitalize:"off",autoComplete:"off",validationResults:r.error?[{message:r.error.message,state:"error"}]:void 0})}),(0,a.tZ)(x.G,{css:[k.l0.flex.rowReverse,k.l0.p(8),k.l0.pt(0)],children:(0,a.tZ)(At.zx,{type:"submit",text:"Rename",colorway:"primary",iconLeft:(0,a.tZ)(Xt.Z,{}),disabled:Boolean(r.error)||!r.value})})]})})}var Ft=t(9951),Ot=t(59053),Wt=j.Py.define(),Ht=j.Py.define();var Vt=j.QQ.define({create:function(){return null},update:function(e,n){if(null!==e&&(e=n.changes.mapPos(e,-1,j.gc.TrackDel)),(0,Ce.j)(n,Wt,(function(n){e=n.value})),e){if(e>n.state.doc.length)return null;if(!n.state.wordAt(e))return null}return e},provide:function(e){var n=new ut.Jf(Mt),t=function(n){var t=n.field(e);if(!t)throw Error("Expected non-null offset");var r=n.wordAt(t);if(!r)throw new Error("Expected non-null range");return n.sliceDoc(r.from,r.to)},o=function(o){var a=o.state.field(e);if(!a)throw Error("Expected non-null offset");if(!o.state.wordAt(a))throw new Error("Expected non-null range");var l=n.create({currentValue:t(o.state),onClose:function(){o.dispatch({effects:Wt.of(null)}),o.focus()},onRename:function(e){o.dispatch({effects:Ht.of(e)})}});l.classList.add("replit-tooltip"),l.style.padding="0";return{dom:l,update:function(e){n.update(l,(function(n){var o=t(e.state);return o!==n.currentValue?(0,i.Z)((0,r.Z)({},n),{currentValue:o}):n}))}}};return q.hJ.from(e,(function(e){return null===e?null:{pos:e,create:o}}))}});function zt(e,n){return q.lg.define((function(t){var r=null;return{onRename:function(i){return(0,H.Z)((function(){var o,a,l,c;return(0,V.__generator)(this,(function(u){switch(u.label){case 0:if(this.cancelInflightRequest(),!(o=t.state.facet(Rt.Yp)))throw new Error("Expected non-null file path");return(a=t.state.field(Vt))?(r=n.generateId(),[4,n.request.rename(o,(0,we.s)(t.state.doc,a),i,{id:r,tap:function(e){return(0,Dt.SC)(t,e)}})]):[2];case 1:if((l=u.sent()).cancelled)return[2];if("error"in l)throw new Error("Something went wrong renaming ".concat(l.error.message));return(c=l.result)?((0,Ot.w)({edit:c,fs:e,client:n}),t.dispatch({effects:Wt.of(null)}),[2]):[2]}}))})).apply(this)},cancelInflightRequest:function(){r&&(n.notify.cancelRequest(r),r=null)},update:function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=e.transactions[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value,l=!0,c=!1,u=void 0;try{for(var s,d=a.effects[Symbol.iterator]();!(l=(s=d.next()).done);l=!0){var f=s.value;f.is(Ht)&&this.onRename(f.value)}}catch(p){c=!0,u=p}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}}}catch(p){t=!0,r=p}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}},destroy:function(){this.cancelInflightRequest()}}}))}var jt=t(42256),qt=t(22917),$t={current:null};function Yt(e){return Kt.apply(this,arguments)}function Kt(){return Kt=(0,H.Z)((function(e){var n,t,r,i,o,a,l,c,u,s,d,f,p,h,v,m,y,Z;return(0,V.__generator)(this,(function(b){switch(b.label){case 0:return n=e.offset,t=e.lspClient,r=e.openFile,i=e.view,o=e.newPane,(a=i.state.facet(Rt.Yp))?(0,J.Z)(t).isFindDefinitionSupported?($t.current&&t.notify.cancelRequest($t.current),$t.current=t.generateId(),l=(0,we.s)(i.state.doc,n),c=setTimeout((function(){var e;$t.current&&t.notify.cancelRequest($t.current);var r=null!==(e=at(i.state))&&void 0!==e?e:"unknown";Y.kg.warn("Timed out looking for definition",{filePath:a,offset:n,language:r}),(0,Ft.J)(i,{message:"Timed out looking for your definition. Try again",offset:n})}),12e3),[4,t.request.findDefinitions(a,l,{id:$t.current,tap:function(e){return(0,Dt.SC)(i,e)}})]):[2]:[2];case 1:if(u=b.sent(),clearTimeout(c),$t.current=null,"error"in u)throw new Error("Something went wrong fetching definition location: ".concat(u.error.message));return s=u.result,u.cancelled?[2]:s&&0!==s.length?(d=(0,g.Z)(s,1),f=d[0],p=f.uri,h=f.range,v=h.start,m=t.documentUriToPath(p),y=v.line+1,Z=v.character,m!==a||o?(r({path:m,line:y,col:Z,newPane:o,newPaneEdge:"right"}),[2]):((0,qt.S)({view:i,line:y,col:Z}),i.focus(),[2])):((0,Ft.J)(i,{message:"No definition found",offset:n}),[2])}}))})),Kt.apply(this,arguments)}var Qt=q.p.mark({class:"cm-lsp-definition-target-word"}),Jt=q.tk.baseTheme({".cm-lsp-definition-target-word span":{backgroundColor:k.TV.backgroundHigher,color:k.TV.accentPrimaryStrongest,cursor:"pointer",textDecoration:"underline"}});var er=t(22488);function nr(e){var n,t=e.fs,i=e.lspClient,o=e.path,l=e.decorations,c=e.openFile,u=e.askGhostwriter,s=(0,J.Z)(i),d=function(e){return function(n){setTimeout((function(){l.update((function(t){return t.set(e,n)}))}))}},f=[vn({lspClient:i,path:o}),bn({lspClient:i,path:o,askGhostwriter:u})];return(0,er.isMobile)()||(s.isAutoCompleteSupported&&f.push(function(e){var n=e.lspClient,t=e.path,i=e.setDecoration,o=Math.random()<.01,l=0,c=function(e,i){if(o){var a=n.getLanguageId(t);return Y.kg.info("lsp:autocomplete:".concat(e),(0,r.Z)({languageId:a},i)),(0,K.j)(K.U3.LSP_COMPLETION_USED,(0,r.Z)({type:e,sampleRate:.01},i))}};function u(){return u=(0,H.Z)((function(e){var r,o,a,u,s,d,f;return(0,V.__generator)(this,(function(p){switch(p.label){case 0:return(o=n.getServerCapabilities())?(a=(null===o||void 0===o||null===(r=o.completionProvider)||void 0===r?void 0:r.triggerCharacters)||[],(u=gt(e,a))?(l&&n.notify.cancelRequest(l),l=n.generateId(),[4,n.request.completion(t,(0,we.s)(e.state.doc,e.pos),u,{id:l})]):[2,null]):[2,null];case 1:return"error"in(s=p.sent())?[2,null]:(d=s.result,e.aborted?[2,null]:d?(f=Array.isArray(d)?d:d.items,[2,bt({context:e,items:f,client:n,path:t,setDecoration:i,trackCompletion:c})]):[2,null])}}))})),u.apply(this,arguments)}return[ft,vt,(0,ze.ys)({defaultKeymap:!1,closeOnBlur:!1,tooltipClass:function(e){return(0,ot.Z)(e)?dt:""},addToOptions:[{render:function(e,n){if(!(0,ot.Z)(n))return null;var t=document.createElement("div");return t.className="lsp-completion-keyboard-shortcuts",(0,Sn.createRoot)(t).render((0,a.tZ)(lt.C,{children:(0,a.tZ)(it.ZP,{size:"inherit",shortcut:{key:"\u23ce"}})})),t},position:200}],override:[(0,ze.eC)(["LineComment","BlockComment"],(function(e){return u.apply(this,arguments)}))]}),wt]}({setDecoration:d("autocomplete"),lspClient:i,path:o})),s.isSignatureHelpSupported&&f.push(rn({setDecoration:d("signatureSuggestion"),lspClient:i,path:o})),f.push(function(e){if(!(0,J.Z)(e).isHoverSupported)return[];var n=null,t=(0,q.bF)(function(){var t=(0,H.Z)((function(t,r){var i,o,a,l,c,u,s;return(0,V.__generator)(this,(function(d){switch(d.label){case 0:if(!(i=t.state.facet(Rt.Yp)))return[2,null];o=(0,we.s)(t.state.doc,r);try{a=t.state.wordAt(r)}catch(f){return[2,null]}if(n){if(n.from===(null===a||void 0===a?void 0:a.from)&&n.to===(null===a||void 0===a?void 0:a.to))return[2,null];e.notify.cancelRequest(n.id)}return l=e.generateId(),n={id:l,from:null===a||void 0===a?void 0:a.from,to:null===a||void 0===a?void 0:a.to},[4,e.request.hover(i,o,{id:l})];case 1:return c=d.sent(),n=null,u=e.getLanguageId(i),"error"in c||null===(s=c.result)?[2,null]:[2,It({hover:s,offset:r,state:t.state,languageId:u})]}}))}));return function(e,n){return t.apply(this,arguments)}}(),{hideOn:function(e){return!e.annotation(j.YW.remote)&&!!(e.isUserEvent("input")||e.isUserEvent("delete")||e.isUserEvent("select"))},hoverTime:0});return t}(i)),s.isCodeActionsSupported&&f.push((n={setDecoration:d("codeActions"),lspClient:i,path:o},[Ge,Ie(n)])),s.isFindDefinitionSupported&&c&&f.push(function(e){var n=e.lspClient,t=e.openFile;return q.tk.domEventHandlers({click:function(e,r){var i=r.state.selection.main;if(i.from!==i.to)return!1;if((0,jt.j)(e)){var o=e.clientX,a=e.clientY,l=r.posAtCoords({x:o,y:a});if(null!==l){var c=e.altKey;return Yt({offset:l,lspClient:n,openFile:t,view:r,newPane:c}),!1}}}})}({lspClient:i,openFile:c}),function(e){var n=e.filePath,t=e.lspClient,r={current:null},i=j.Py.define(),o=j.Py.define(),a=j.Py.define(),l=j.QQ.define({create:function(){return{keyDown:!1,mousePosition:null}},update:function(e,n){var t=!0,r=!1,a=void 0;try{for(var l,c=n.effects[Symbol.iterator]();!(t=(l=c.next()).done);t=!0){var u=l.value;u.is(i)&&(e.mousePosition=u.value),u.is(o)&&(e.keyDown=u.value)}}catch(s){r=!0,a=s}finally{try{t||null==c.return||c.return()}finally{if(r)throw a}}return e}}),c=j.QQ.define({create:function(){return{exists:!1,range:null}},update:function(e,n){var t=!0,r=!1,i=void 0;try{for(var o,l=n.effects[Symbol.iterator]();!(t=(o=l.next()).done);t=!0){var c=o.value;c.is(a)&&(e=c.value)}}catch(u){r=!0,i=u}finally{try{t||null==l.return||l.return()}finally{if(r)throw i}}return e}}),u=j.QQ.define({create:function(){return q.p.none},update:function(e,n){var t=n.state.field(l,!1);if(!t)return q.p.none;var r=t.keyDown,i=t.mousePosition;if(!r)return q.p.none;if(!i)return q.p.none;var o=n.state.field(c,!1);if(!o||!o.exists||!o.range)return q.p.none;var a=(0,we.R)(n.state.doc,o.range.start),u=(0,we.R)(n.state.doc,o.range.end);if(a===u)return q.p.none;var s=(0,we.R)(n.state.doc,i);return s<a||s>u?q.p.none:q.p.set(Qt.range(a,u),!0)},provide:function(e){return q.tk.decorations.from(e)}}),s=q.lg.fromClass(function(){function e(n){(0,le.Z)(this,e),this.view=n,document.addEventListener("keydown",this.onKeyDown.bind(this)),document.addEventListener("keyup",this.onKeyUp.bind(this))}var n=e.prototype;return n.destroy=function(){document.removeEventListener("keydown",this.onKeyDown.bind(this)),document.removeEventListener("keyup",this.onKeyUp.bind(this))},n.onKeyDown=function(e){(0,jt.j)(e)&&this.view.dispatch({effects:o.of(e.key===(I.V5?"Meta":"Control"))})},n.onKeyUp=function(e){(0,jt.j)(e)&&this.view.dispatch({effects:o.of(!1)})},e}(),{eventHandlers:{mousemove:function(e,n){if(0!==e.buttons){var t=n.state.selection.main;if(t.from!==t.to)return void n.dispatch({effects:i.of(null)})}var r=e.clientX,a=e.clientY,l=n.posAtCoords({x:r,y:a}),c=null;null!=l&&(c=(0,we.s)(n.state.doc,l)),n.dispatch({effects:[i.of(c),o.of((0,jt.j)(e))]})},click:function(e,n){var t;(null===(t=n.state.field(l,!1))||void 0===t?void 0:t.keyDown)&&n.dispatch({effects:o.of(!1)})}}}),d=q.tk.updateListener.of(function(){var e=(0,H.Z)((function(e){var i,o,u,s,d,f,p,h,v,m,g;return(0,V.__generator)(this,(function(y){switch(y.label){case 0:return(i=e.state.field(l)).keyDown&&i.mousePosition?(o=(0,we.R)(e.state.doc,i.mousePosition),!e.docChanged&&(u=e.state.field(c))&&u.range&&(s=(0,we.R)(e.state.doc,u.range.start),d=(0,we.R)(e.state.doc,u.range.end),o>=s&&o<=d)?[2]:(f=e.state.wordAt(o))?r.current&&(p=r.current.word,h=f.from===p.from,v=f.to===p.to,h&&v)?[2]:(r.current&&t.notify.cancelRequest(r.current.id),m=t.generateId(),r.current={id:m,word:f},g=(0,we.s)(e.state.doc,o),[4,t.request.findDefinitions(n,g,{id:m}).then((function(n){if(r.current=null,void 0!==n.cancelled&&!0!==n.cancelled){var t=n.result;if(t){var i=e.state.wordAt(o),l=t.length>0&&null!=i,c=null;if(i){var u=(0,we.s)(e.state.doc,i.from),s=(0,we.s)(e.state.doc,i.to);c=$e.Range.create(u,s)}e.view.dispatch({effects:a.of({exists:l,range:c})})}}}))]):[2]):[2];case 1:return y.sent(),[2]}}))}));return function(n){return e.apply(this,arguments)}}());return[Jt,d,s,l,c,u]}({lspClient:i,filePath:o})),(s.isFindDefinitionSupported||s.isFindReferencesSupported)&&c&&f.push((0,Gt.w)({setDecoration:d("tooltip"),lspClient:i,path:o,openFile:c})),f.push(function(e,n){return(0,J.Z)(n).isRenameSupported?[Vt,zt(e,n)]:[]}(t,i))),f}var tr=t(67530),rr=t(52364),ir=t(37584),or=t(38335),ar=t(45317),lr=t(96028),cr=RegExp(".*?```(\\w+)\\n(.*?)(?:$|\\n$|\\n`$|\\n``$|\\n```)","gs"),ur=function(e){for(var n,t=[];null!==(n=cr.exec(e));){var r=n[1],i=n[2];t.push({language:r,code:i})}return t},sr=(0,st.X)({inlinePocketContainer:[k.l0.width("100%"),k.l0.backgroundColor.backgroundRoot,k.l0.position.relative],caretWrapper:[k.l0.position.absolute,k.l0.height("fit-content"),k.l0.display.flex,k.l0.flex.row,k.l0.align.center],inlinePocketWrapper:[k.l0.font.default,k.l0.p(4),{borderTopWidth:k.TV.borderWidthDefault,borderBottomWidth:k.TV.borderWidthDefault,borderStyle:"solid",borderColor:k.TV.accentPrimaryDefault}],headerContainer:[k.l0.rowWithGap(4),k.l0.py(4),k.l0.align.center],authorContainer:[k.l0.flex.growAndShrink(1)],inputContainer:[k.l0.p(4),k.l0.py(8),k.l0.rowWithGap(4),k.l0.align.center],input:[{height:28,width:"100%",resize:"vertical"}],messageActionContainer:[k.l0.rowReverseWithGap(4)],messageContainer:[k.l0.rowWithGap(8),k.l0.align.center],messageMarkdown:[k.l0.colWithGap(8),k.l0.py(8),k.l0.flex.growAndShrink(1),{whiteSpace:"normal"}],messageError:[k.l0.px(8)],messageText:[k.l0.color.accentNegativeStronger,k.l0.fontSize(16)]}),dr=t(34204),fr=t(95434),pr=t(39137),hr=t(54414),vr=t(32104),mr=t(48667),gr=function(e){var n=e.isLoading,t=e.autoFocus,r=e.sendDisabled,i=e.onSend,o=function(){requestAnimationFrame((function(){h()})),i(u,u===m.current),m.current=u},l=(0,b.useId)(),c=(0,b.useState)(""),u=c[0],s=c[1],d=(0,b.useRef)(null),f=(0,fr.Z)(),p=f.ref,h=f.update,v=(0,b.useCallback)((function(){var e;null===(e=d.current)||void 0===e||e.focus()}),[]),m=(0,b.useRef)(null),g=!n&&u===m.current;return(0,b.useLayoutEffect)((function(){t&&v()})),(0,a.BX)(x.G,{css:sr.inputContainer,children:[(0,a.tZ)(pr.B,{dataCy:"ghostwriter-inline-input",id:l,ref:(0,dr.lq)(p,d),css:sr.input,autoSize:!0,placeholder:"Write your prompt",value:u,onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),e.shiftKey?(s((function(e){var n,t;return e.slice(0,null===d||void 0===d||null===(n=d.current)||void 0===n?void 0:n.selectionStart)+"\n"+e.slice(null===d||void 0===d||null===(t=d.current)||void 0===t?void 0:t.selectionEnd,e.length)})),requestAnimationFrame((function(){h()}))):o())},onChange:function(e){return s(e.currentTarget.value)}}),g?(0,a.tZ)(Ut.h,{alt:"Regenerate",size:28,onClick:o,children:(0,a.tZ)(mr.Z,{})}):(0,a.tZ)(Ut.h,{dataCy:"ghostwriter-inline-submit",alt:"Send message",size:28,type:"submit",onClick:o,disabled:n||r,children:n?(0,a.tZ)(vr.Z,{}):(0,a.tZ)(hr.Z,{})})]})},yr=t(54873),Zr=t(44090),br=function(e){var n=e.codeReference,t=e.onClose,r=e.updateCodeBlock,i=e.insertCode,o=e.autoFocus,l=e.onLoadingChanged,c=(0,rr.ql)(),u=(0,lr.oQ)(n.filePath),s=(0,rr.gp)(),d=Boolean(null===u||void 0===u?void 0:u.loading),f=(0,b.useRef)(null);(0,b.useLayoutEffect)((function(){var e;u&&!s&&(null===(e=f.current)||void 0===e||e.focus())}),[s,u]),(0,b.useEffect)((function(){l(d)}),[d,l]);var p=(0,b.useMemo)((function(){if(!(null===u||void 0===u?void 0:u.text))return null;var e=ur((null===u||void 0===u?void 0:u.text)||"");return e.length>0?e[0].code:null}),[null===u||void 0===u?void 0:u.text]);(0,b.useEffect)((function(){return r(p)}),[p,r]);var h=null,v="Assistant"===(null===u||void 0===u?void 0:u.attribution)&&"string"===typeof(null===u||void 0===u?void 0:u.error),m=!p&&!s;return u&&!(!v&&!m)&&(h=(0,a.tZ)(x.G,{css:[sr.messageContainer],children:(0,a.BX)(x.G,{css:sr.messageMarkdown,children:[m?(0,a.tZ)(or.J,{text:u.text,textColor:ar.TV.foregroundDefault,codeComponent:Zr.O}):null,v?(0,a.tZ)(x.G,{css:sr.messageError,children:(0,a.tZ)(fe.xv,{css:sr.messageText,children:u.error})}):null]})})),(0,a.BX)(x.G,{children:[(0,a.BX)(x.G,{css:sr.headerContainer,children:[(0,a.tZ)(x.G,{css:sr.authorContainer,children:(0,a.tZ)(ir.z,{author:{username:"Ghostwriter",image:"/public/images/ghostwriter/blurple-circle.svg"},intent:"GENERATE",smallAvatar:!0})}),(0,a.tZ)(Ut.h,{alt:"Close",onClick:t,type:"button",children:(0,a.tZ)(Lt.Z,{})})]}),(0,a.tZ)(gr,{isLoading:d,autoFocus:o,sendDisabled:s,onSend:function(){var e=(0,H.Z)((function(e,t){return(0,V.__generator)(this,(function(r){switch(r.label){case 0:return(0,K.j)(K.U3.CODEX_FEATURE_USED,{feature:"generation",isInline:!0,isRetry:t,action:t?"refresh":"submit",language:n.language}),[4,c({chatMessage:{type:"generateCode",text:e,codeReference:n}})];case 1:return r.sent(),[2]}}))}));return function(n,t){return e.apply(this,arguments)}}()}),h,u&&!s?(0,a.BX)(x.G,{css:sr.messageActionContainer,children:[(0,a.tZ)(At.zx,{dataCy:"ghostwriter-inline-accept-suggestion",ref:f,colorway:"primary",text:"Accept Suggestion",iconLeft:(0,a.tZ)(Xt.Z,{}),onClick:function(){p?(i(p),(0,K.j)(K.U3.CODEX_FEATURE_USED,{feature:"generation",isInline:!0,action:"inserted-in-editor",language:n.language})):t()}}),(0,a.tZ)(At.zx,{text:"Discard",iconLeft:(0,a.tZ)(yr.Z,{}),onClick:t})]}):null]})},wr=t(47648),xr=function(e){var n=e.codeReference,t=e.replaceHighlightedAreaWithCode,r=e.updateCodeBlock,i=e.onClose,o=e.autoFocus,l=e.onLoadingChanged,c=(0,rr.ql)(),u=(0,wr.iH)(n.filePath),s=(0,rr.gp)(),d=Boolean(null===u||void 0===u?void 0:u.loading),f=(0,b.useRef)(null);(0,b.useLayoutEffect)((function(){var e;u&&!s&&(null===(e=f.current)||void 0===e||e.focus())}),[s,u]),(0,b.useEffect)((function(){l(d)}),[d,l]);var p=(0,b.useMemo)((function(){if(!(null===u||void 0===u?void 0:u.text))return null;var e=ur((null===u||void 0===u?void 0:u.text)||"");return e.length>0?e[0].code:null}),[null===u||void 0===u?void 0:u.text]);(0,b.useEffect)((function(){return r(p)}),[p,r]);var h=null,v="Assistant"===(null===u||void 0===u?void 0:u.attribution)&&"string"===typeof(null===u||void 0===u?void 0:u.error),m=!p&&!s;return u&&!(!v&&!m)&&(h=(0,a.tZ)(x.G,{css:[sr.messageContainer],children:(0,a.BX)(x.G,{css:sr.messageMarkdown,children:[m?(0,a.tZ)(or.J,{text:u.text,textColor:ar.TV.foregroundDefault,codeComponent:Zr.O}):null,v?(0,a.tZ)(x.G,{css:sr.messageError,children:(0,a.tZ)(fe.xv,{css:sr.messageText,children:u.error})}):null]})})),(0,a.BX)(x.G,{children:[(0,a.BX)(x.G,{css:sr.headerContainer,children:[(0,a.tZ)(x.G,{css:sr.authorContainer,children:(0,a.tZ)(ir.z,{author:{username:"Ghostwriter",image:"/public/images/ghostwriter/blurple-circle.svg"},intent:"TRANSFORM",smallAvatar:!0})}),(0,a.tZ)(Ut.h,{alt:"Close",onClick:i,type:"button",children:(0,a.tZ)(Lt.Z,{})})]}),(0,a.tZ)(gr,{isLoading:d,autoFocus:o,sendDisabled:s,onSend:function(){var e=(0,H.Z)((function(e,t){return(0,V.__generator)(this,(function(r){switch(r.label){case 0:return(0,K.j)(K.U3.CODEX_FEATURE_USED,{feature:"transformation",inline:!0,isRetry:t,action:t?"refresh":"submit",language:n.language}),[4,c({chatMessage:{type:"transformCode",text:e,codeReference:n}})];case 1:return r.sent(),[2]}}))}));return function(n,t){return e.apply(this,arguments)}}()}),h,u&&!s?(0,a.BX)(x.G,{css:sr.messageActionContainer,children:[(0,a.tZ)(At.zx,{dataCy:"ghostwriter-inline-accept-suggestion",ref:f,colorway:"primary",text:"Accept Suggestion",iconLeft:(0,a.tZ)(Xt.Z,{}),onClick:function(){p?(t(p),(0,K.j)(K.U3.CODEX_FEATURE_USED,{feature:"transformation",isInline:!0,action:"replaced-selection-in-editor",language:n.language})):i()}}),(0,a.tZ)(At.zx,{text:"Discard",iconLeft:(0,a.tZ)(yr.Z,{}),onClick:i})]}):null]})},kr=t(67036),Cr=t(63026),Sr=t(5293),Tr=function(e){var n=e.codeReference,t=e.onClose,r=e.onLoadingChanged,i=(0,rr.Gd)(),o=(0,Sr.OT)(),l=(0,Cr.j)(n.filePath),c=(0,rr.gp)(),u=Boolean(null===l||void 0===l?void 0:l.loading);(0,b.useEffect)((function(){r(u)}),[u,r]);var s=null;if(l){var d=l.attribution,f=l.loading,p=l.error,h="Assistant"===d;s=(0,a.BX)(x.G,{css:[sr.messageContainer,f&&k.l0.px(16)],children:[f?(0,a.tZ)(vr.Z,{}):null,(0,a.BX)(x.G,{css:sr.messageMarkdown,children:[(0,a.tZ)(or.J,{text:l.text,textColor:ar.TV.foregroundDefault,codeComponent:Zr.O}),h&&"string"===typeof p?(0,a.tZ)(x.G,{css:sr.messageError,children:(0,a.tZ)(fe.xv,{css:sr.messageText,children:p})}):null]})]})}return(0,a.BX)(x.G,{children:[(0,a.BX)(x.G,{css:sr.headerContainer,children:[(0,a.tZ)(x.G,{css:sr.authorContainer,children:(0,a.tZ)(ir.z,{author:{username:"Ghostwriter",image:"/public/images/ghostwriter/blurple-circle.svg"},intent:"EXPLAIN",smallAvatar:!0})}),(0,a.tZ)(Ut.h,{dataCy:"ghostwriter-inline-close",alt:"Close",onClick:t,type:"button",children:(0,a.tZ)(Lt.Z,{})})]}),s,s&&!c?(0,a.BX)(x.G,{css:sr.messageActionContainer,children:[(0,a.tZ)(At.zx,{dataCy:"ghostwriter-inline-reply-in-chat",colorway:"primary",text:"Reply in Chat",iconLeft:(0,a.tZ)(kr.Z,{}),onClick:function(){(0,K.j)(K.U3.CODEX_FEATURE_USED,{feature:"explanation",isInline:!0,isRetry:!0,action:"reply-in-chat",language:n.language}),o()}}),(0,a.tZ)(At.zx,{text:"Regenerate",iconLeft:(0,a.tZ)(mr.Z,{}),onClick:function(){l&&((0,K.j)(K.U3.CODEX_FEATURE_USED,{feature:"explanation",isInline:!0,isRetry:!0,action:"refresh",language:n.language}),i(l.id))}})]}):null]})},Er=t(21084),Rr=t(72338),Ir=t(69341),Gr=function(e){var n=e.caretSize,t=void 0===n?[8,12]:n,o=(0,En.Z)(e,["caretSize"]);return(0,a.BX)("svg",(0,i.Z)((0,r.Z)({width:t[0],height:t[1],viewBox:"0 0 12 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o),{children:[(0,a.tZ)("mask",{id:"outline",fill:"white",children:(0,a.tZ)("path",{d:"M0 8L5.2 1.06667C5.6 0.533333 6.40033 0.533776 6.80033 1.06711C8.67223 3.56297 9.93719 5.24959 12 8H0Z"})}),(0,a.tZ)("path",{d:"M0 8L5.2 1.06667C5.6 0.533333 6.40033 0.533776 6.80033 1.06711C8.67223 3.56297 9.93719 5.24959 12 8H0Z",fill:"url(#gradient-fill)"}),(0,a.tZ)("path",{d:"M0 8L-0.8 7.4L-2 9H0V8ZM12 8V9H14L12.8 7.4L12 8ZM5.2 1.06667L4.4 0.466667L5.2 1.06667ZM6.80033 1.06711L6.00033 1.66711L6.80033 1.06711ZM12 7H0V9H12V7ZM0.8 8.6L6 1.66667L4.4 0.466667L-0.8 7.4L0.8 8.6ZM6.00033 1.66711C7.87223 4.16297 9.13719 5.84959 11.2 8.6L12.8 7.4C10.7372 4.64959 9.47223 2.96297 7.60033 0.467109L6.00033 1.66711ZM6 1.66667L6.00033 1.66711L7.60033 0.467109C6.80082 -0.598902 5.20049 -0.600655 4.4 0.466667L6 1.66667Z",fill:"#0079F2",mask:"url(#outline)"}),(0,a.tZ)("defs",{children:(0,a.BX)("linearGradient",{id:"gradient-fill",x1:"5.07692",y1:"0",x2:"5.07692",y2:"21.3333",gradientUnits:"userSpaceOnUse",children:[(0,a.tZ)("stop",{stopColor:"#57ABFF"}),(0,a.tZ)("stop",{offset:"1",stopColor:"#0079F2"})]})})]}))},Dr=function(e){var n=e.children,t=e.onEscapeKey,r=e.caretPosition,i=[12,8];switch((0,Ct.Z)().preferences.fontSize){case 10:i=[8,6];break;case 14:i=[10,6];break;case 18:i=[12,8];break;case 24:i=[14,10]}return(0,a.BX)(x.G,{css:sr.inlinePocketContainer,onKeyDown:function(e){"Escape"===e.key&&t()},children:[null!==r&&(0,a.tZ)("span",{css:[sr.caretWrapper,k.l0.top(-i[1]),k.l0.left(r)],children:(0,a.tZ)(Gr,{caretSize:i})}),(0,a.tZ)(x.G,{css:sr.inlinePocketWrapper,children:n})]})};function _r(e){var n=e.state.field(Pr);if(n){var t=n.codeReference,r=n.type;return"explainCode"===r?(0,K.j)(K.U3.CODEX_FEATURE_USED,{feature:"explanation",isInline:!0,action:"close",language:t.language}):"generateCode"===r?(0,K.j)(K.U3.CODEX_FEATURE_USED,{feature:"generation",isInline:!0,action:"close",language:t.language}):"transformCode"===r&&(0,K.j)(K.U3.CODEX_FEATURE_USED,{feature:"transformation",isInline:!0,action:"close",language:t.language}),e.dispatch({effects:Rr.Q.of(null)}),!0}return!1}var Pr=j.QQ.define({create:function(){return null},update:function(e,n){if((0,Ce.j)(n,Rr.Q,(function(n){e=n.value?{codeReference:n.value.codeReference,type:n.value.type,loading:n.value.loading,data:n.value.data}:null})),!e||n.changes.empty)return e;var t=e.codeReference.range.indexFrom>n.newDoc.length?n.newDoc.length:n.changes.mapPos(e.codeReference.range.indexFrom),o=e.codeReference.range.indexTo>n.newDoc.length?n.newDoc.length:n.changes.mapPos(e.codeReference.range.indexTo);return t>=o?null:e=(0,i.Z)((0,r.Z)({},e),{codeReference:(0,i.Z)((0,r.Z)({},e.codeReference),{range:{indexFrom:t,indexTo:o,lineFrom:n.newDoc.lineAt(t).number,lineTo:n.newDoc.lineAt(o).number}})})},provide:function(e){return[j.Wl.highest(q.$f.of([{key:"Escape",run:_r}])),Dt.gb.from(e,(function(e){var n;return null!==(n=(null===e||void 0===e?void 0:e.loading)&&e.codeReference.range.indexFrom===e.codeReference.range.indexTo)&&void 0!==n?n:null}))]}}),Br=j.QQ.define({create:function(){return null},update:function(e,n){if(!n.state.field(Pr))return null;var t=!0,r=!1,i=void 0;try{for(var o,a=n.effects[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;l.is(Rr.Q)&&(e=null),l.is(Rr.h)&&(e=l.value)}}catch(c){r=!0,i=c}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return e}}),Ar=t(59066),Ur={explainCode:{intent:"EXPLAIN",userFriendlyName:"Explain Code",activationContext:"inline_explain_code"},generateCode:{intent:"GENERATE",userFriendlyName:"Generate Code",activationContext:"inline_generate_code"},editCode:{intent:"TRANSFORM",userFriendlyName:"Edit Code",activationContext:"inline_edit_code"}},Lr=function(e){var n=e.data,t=e.onClose,r=n.from,i=Ur[r],o=i.intent,l=i.userFriendlyName,c=i.activationContext;return(0,a.BX)(x.G,{children:[(0,a.BX)(x.G,{css:sr.headerContainer,children:[(0,a.tZ)(x.G,{css:sr.authorContainer,children:(0,a.tZ)(ir.z,{author:{username:"Ghostwriter",image:"/public/images/ghostwriter/blurple-circle.svg"},intent:o,smallAvatar:!0})}),(0,a.tZ)(Ut.h,{alt:"Close",onClick:t,type:"button",children:(0,a.tZ)(Lt.Z,{})})]}),(0,a.tZ)(x.G,{css:sr.messageContainer,children:(0,a.tZ)(x.G,{css:sr.messageMarkdown,children:(0,a.tZ)(or.J,{text:"Activate Ghostwriter to get access to ".concat(l," and other AI-powered features!"),textColor:k.TV.foregroundDefault,codeComponent:Zr.O})})}),(0,a.tZ)(x.G,{css:sr.messageActionContainer,children:(0,a.tZ)(Ar.Z,{context:c})})]})},Xr=t(81202),Nr=t.n(Xr),Mr=t(10103);function Fr(e,n,t){var r=e.selection.main,i=e.sliceDoc(r.from,r.to),o=(0,ie.r6)(n);return{code:i,filePath:n,fileVersion:t,range:{indexFrom:r.from,indexTo:r.to,lineFrom:e.doc.lineAt(r.from).number,lineTo:e.doc.lineAt(r.to).number},language:o}}var Or=new ut.Jf((function(e){var n=e.codeReference,t=e.type,r=e.data,i=e.autoFocus,o=e.insertCode,l=e.replaceHighlightedAreaWithCode,c=e.updateCodeBlock,u=e.onClose,s=e.getCaretPosition,d=e.onLoadingChanged,f=function(){(0,K.j)(K.U3.CODEX_FEATURE_USED,{feature:"explanation",isInline:!0,action:"close",language:n.language}),u()},p=function(){(0,K.j)(K.U3.CODEX_FEATURE_USED,{feature:"generation",isInline:!0,action:"close",language:n.language}),u()},h=function(){(0,K.j)(K.U3.CODEX_FEATURE_USED,{feature:"transformation",isInline:!0,action:"close",language:n.language}),u()},v=null,m=s(n);return"explainCode"===t?v=(0,a.tZ)(Dr,{caretPosition:m,onEscapeKey:f,children:(0,a.tZ)(Tr,{codeReference:n,onClose:f,onLoadingChanged:d})}):"generateCode"===t?v=(0,a.tZ)(Dr,{caretPosition:m,onEscapeKey:p,children:(0,a.tZ)(br,{codeReference:n,onClose:p,insertCode:o,autoFocus:i,updateCodeBlock:c,onLoadingChanged:d})}):"transformCode"===t?v=(0,a.tZ)(Dr,{caretPosition:m,onEscapeKey:h,children:(0,a.tZ)(xr,{codeReference:n,onClose:h,autoFocus:i,replaceHighlightedAreaWithCode:l,updateCodeBlock:c,onLoadingChanged:d})}):"ghostwriterPaywall"===t&&(v=(0,a.tZ)(Dr,{caretPosition:m,onEscapeKey:u,children:(0,a.tZ)(Lr,{onClose:u,data:r})})),(0,a.tZ)(Ir.Z,{bsod:!0,tags:{ai:!0},extras:{type:t},origin:"ErrorBoundary: InlineAiWidget",children:v})})),Wr=function(e){(0,ce.Z)(t,e);var n=(0,ue.Z)(t);function t(e){var r,i=e.codeReference,o=e.type,a=e.data;return(0,le.Z)(this,t),(r=n.call(this)).codeReference=i,r.type=o,r.data=a,r}var o=t.prototype;return o.toDOM=function(e){var n=this,t=n.codeReference,o=n.type,a=n.data,l=Or.create({codeReference:t,data:a,type:o,onClose:function(){e.dispatch({effects:Rr.Q.of(null)}),e.dispatch({selection:{anchor:t.range.indexTo,head:t.range.indexTo}}),e.hasFocus||e.focus()},insertCode:function(n){var t=e.state.selection.main.head;e.dispatch({changes:{from:t,to:t,insert:n},selection:{anchor:t+n.length},scrollIntoView:!0,effects:Rr.Q.of(null),annotations:Mr.Z.of(!0)}),e.hasFocus||e.focus()},replaceHighlightedAreaWithCode:function(n){e.dispatch({changes:{from:t.range.indexFrom,to:t.range.indexTo,insert:n},scrollIntoView:!0,effects:Rr.Q.of(null),annotations:Mr.Z.of(!0)}),e.hasFocus||e.focus()},updateCodeBlock:function(n){e.dispatch({effects:Rr.h.of(n)})},autoFocus:!0,getCaretPosition:function(n){var t,r=n.range.indexTo<=e.state.doc.length?null===(t=e.coordsAtPos(n.range.indexTo))||void 0===t?void 0:t.left:null,i=e.dom.getBoundingClientRect().left;return r&&i?r-i-6:null},onLoadingChanged:function(n){var t=e.state.field(Pr);t&&t.loading!==n&&e.dispatch({effects:Rr.Q.of((0,i.Z)((0,r.Z)({},t),{loading:n}))})}});l.className="cm-pocket-widget";var c=e.dom.querySelector(".cm-scroller"),u=e.dom.querySelector(".cm-gutters");return c&&u&&Hr(l,c,u),l},o.updateDOM=function(e){var n=this;return Or.update(e,(function(e){return(0,r.Z)({},e,{codeReference:n.codeReference,type:n.type,data:n.data,autoFocus:!1})})),!0},o.eq=function(e){return this.codeReference.range.indexFrom===e.codeReference.range.indexFrom&&this.codeReference.range.indexTo===e.codeReference.range.indexTo&&this.codeReference.filePath===e.codeReference.filePath&&this.codeReference.fileVersion===e.codeReference.fileVersion&&this.type===e.type&&Nr()(this.data,e.data)},t}(q.l9);function Hr(e,n,t){var r=n.clientWidth,i=t.clientWidth;e.style.maxWidth="".concat(r,"px"),e.style.position="sticky",e.style.zIndex="201",e.style.marginLeft="-".concat(i,"px")}var Vr=q.tk.updateListener.of((function(e){(0,Ce.j)(e,Er.R,(function(){var n=(0,o.Z)(e.view.dom.querySelectorAll(".cm-pocket-widget")),t=e.view.dom.querySelector(".cm-scroller"),r=e.view.dom.querySelector(".cm-gutters");if(n.length&&t&&r){var i=!0,a=!1,l=void 0;try{for(var c,u=n[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){Hr(c.value,t,r)}}catch(s){a=!0,l=s}finally{try{i||null==u.return||u.return()}finally{if(a)throw l}}}}))})),zr=t(18180),jr=t(91669),qr=t(4385),$r=RegExp("_(?<num>\\d+)$");function Yr(e,n){return Kr.apply(this,arguments)}function Kr(){return Kr=(0,H.Z)((function(e,n){var t,r,i,o;return(0,V.__generator)(this,(function(a){switch(a.label){case 0:return t=(0,ie.Il)(n),[4,e.readDir(t||".")];case 1:return(r=a.sent()).error?[2,n]:(i=function(e){if(r.children.find((function(n){return"FILE"===n.type&&n.filename===e}))){var n,t=(0,ie.eb)(e),o=(0,ie.r6)(e),a=t.match($r);if(null===a||void 0===a||null===(n=a.groups)||void 0===n?void 0:n.num){var l=Number(a.groups.num);return i("".concat(t.replace($r,""),"_").concat(l+1,".").concat(o))}return i("".concat(t,"_2.").concat(o))}return e},o=i((0,ie.UO)(n)),[2,t?t+"/"+o:o])}}))})),Kr.apply(this,arguments)}var Qr=t(22011),Jr=function(){var e=(0,H.Z)((function(e,n,t){var r,i,o,a,l,c;return(0,V.__generator)(this,(function(u){switch(u.label){case 0:return r=encodeURI(e.name),i=(0,ie.Il)(t),[4,Yr(n,i?i+"/"+r:r)];case 1:return o=u.sent(),[4,(0,jr.pV)(e)];case 2:return a=u.sent(),[4,n.writeFile(o,Qr.Z.from(a))];case 3:return u.sent(),l=(0,ie.eb)(e.name),c=(0,ie.UO)(o),[2,"![".concat(l,"](").concat(c,")")]}}))}));return function(n,t,r){return e.apply(this,arguments)}}(),ei=t(55143);function ni(e){var n=e.view,t=e.event,r=e.clipboardText,i=e.filePath,o=n.state.selection,a=function(){if(!t){var e=r||"";if(o.main.empty){var i=o.main.from+e.length;n.dispatch({changes:[{from:o.main.from,insert:e}],selection:j.jT.range(i,i)})}else n.dispatch(n.state.replaceSelection(e))}};if(i&&(0,ie.gK)(i))if(o.ranges.length>1)a();else if(o.main.from!==o.main.to)if(r&&(0,qr.Z)(r)){t&&t.preventDefault();var l=n.state.sliceDoc(o.main.from,o.main.to),c="[".concat(l,"](").concat(r,")"),u=o.main.from+c.length;n.dispatch({changes:{from:o.main.from,to:o.main.to,insert:c},selection:j.jT.range(u,u)})}else a();else a();else a()}var ti=q.tk.domEventHandlers({paste:function(e,n){var t;ni({filePath:n.state.facet(Rt.Yp),view:n,event:e,clipboardText:null===(t=e.clipboardData)||void 0===t?void 0:t.getData("Text")})}}),ri=new ei.j((function(e,n){return q.tk.domEventHandlers({paste:function(t,r){var i,o=r.state.facet(Rt.Yp),a=null===t||void 0===t||null===(i=t.clipboardData)||void 0===i?void 0:i.files,l=function(e){var n=r.state.selection.main.head;r.dispatch({changes:{from:n,insert:e},selection:{anchor:n,head:n+e.length}})};if(a){var c=!0,u=!1,s=void 0;try{for(var d,f=a[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var p=d.value;e?(0,jr.L0)(p).then((function(e){return l('"'+e+'"')})):o&&(0,ie.gK)(o)&&Jr(p,n,o).then(l)}}catch(h){u=!0,s=h}finally{try{c||null==f.return||f.return()}finally{if(u)throw s}}}}})}));function ii(e){var n=[],t=[],r=!1,i=!0,o=!1,a=void 0;try{for(var l,c=e.selection.ranges[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value;u.empty||(n.push(e.sliceDoc(u.from,u.to)),t.push(u))}}catch(y){o=!0,a=y}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}if(!n.length){var s=-1,d=!0,f=!1,p=void 0;try{for(var h,v=e.selection.ranges[Symbol.iterator]();!(d=(h=v.next()).done);d=!0){var m=h.value.from,g=e.doc.lineAt(m);g.number>s&&(n.push(g.text),t.push({from:g.from,to:Math.min(e.doc.length,g.to+1)})),s=g.number}}catch(y){f=!0,p=y}finally{try{d||null==v.return||v.return()}finally{if(f)throw p}}r=!0}return{text:n.join(e.lineBreak),ranges:t,linewise:r}}function oi(e){var n=e.view,t=e.filePath,r=e.openFile,i=(0,Q.Z)(t),o=b.useRef(null),a=b.useRef(0),l=(0,ne.Z)().fs,c=(0,g.Z)(b.useState(null),2),u=c[0],s=c[1],d=(0,D.d)({tablet:!1}),f=(0,zr.d)(),p=(0,lr.eD)(),h=(0,wr.Ef)(),v=(0,rr.ql)(),m=b.useCallback((function(){s(null),n&&setTimeout((function(){return n.focus()}))}),[n]);b.useEffect((function(){var e=function(e){"Escape"===e.key&&m()};if(u)return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[m,u]),b.useEffect((function(){if(n&&u)return n.scrollDOM.addEventListener("scroll",m),function(){n.scrollDOM.removeEventListener("scroll",m)}}),[n,u,m]);var y=(0,$.Z)((function(){if(n&&u){var e=n.coordsAtPos(a.current);s((function(n){return e?{x:e.left,y:e.top}:n}))}}),{type:"throttle",wait:25}),Z=b.useCallback(function(){var e=(0,H.Z)((function(e,a){var c,u,s,d,m,y,Z,b,w,x,k,C,S,T,E,R,I,G,D,_,P,B,A,U,L;function X(e,n,t){return N.apply(this,arguments)}function N(){return(N=(0,H.Z)((function(e,r,a){var l,u,d,f,p,h,v,m,y;return(0,V.__generator)(this,(function(Z){switch(Z.label){case 0:if(!i||!n)throw new Error("Expected client");return o.current&&i.notify.cancelRequest(o.current),o.current=i.generateId(),l=(0,we.s)(c.doc,s),[4,e(t,l,{id:o.current,tap:function(e){return(0,Dt.SC)(n,e)}})];case 1:if(u=Z.sent(),o.current=null,"error"in u)throw new Error("Something went wrong fetching location: ".concat(u.error.message));return d=u.result,u.cancelled?[2]:d&&0!==d.length?(f=(0,g.Z)(d,1),p=f[0],h=p.uri,v=p.range,m=v.start,(y=i.documentUriToPath(h))!==t?a({path:y,line:m.line+1,col:m.character}):(0,qt.S)({view:n,line:m.line+1,col:m.character}),[2]):((0,Ft.J)(n,{message:r,offset:s}),[2])}}))}))).apply(this,arguments)}return(0,V.__generator)(this,(function(o){switch(o.label){case 0:if(!n)throw new Error("Expected view");switch(c=n.state,u=c.selection.main,s=u.head,(0,K.j)(K.U3.EDITOR_CONTEXT_MENU_ACTION_RAN,{action:e}),e){case W.D2.Cut:return[3,1];case W.D2.Copy:return[3,2];case W.D2.Paste:return[3,3];case W.D2.JumpToDefinition:return[3,8];case W.D2.JumpToTypeDefinition:return[3,10];case W.D2.JumpToImplementation:return[3,12];case W.D2.FindReferences:return[3,14];case W.D2.Rename:return[3,15];case W.D2.SelectAllOccurrences:return[3,16];case W.D2.CodeActions:return[3,17];case W.D2.ToggleBreakpoint:return[3,18];case W.D2.StartThread:return[3,19];case W.D2.ExplainCode:return[3,20];case W.D2.GenerateCode:return[3,21];case W.D2.TransformCode:return[3,22];case W.D2.CopyLinkToPos:return[3,23]}return[3,24];case 1:return d=ii(n.state),m=d.text,y=d.ranges,(0,te.Z)(m),n.state.readOnly?[2]:(n.dispatch({changes:y,scrollIntoView:!0,userEvent:"delete.cut"}),[3,25]);case 2:return Z=ii(n.state).text,(0,te.Z)(Z),[3,25];case 3:b="",o.label=4;case 4:return o.trys.push([4,6,,7]),[4,window.navigator.clipboard.readText()];case 5:return b=o.sent(),[3,7];case 6:return w=o.sent(),Y.kg.error("CodeMirror context menu paste failed",{message:w.message}),[3,25];case 7:return ni({filePath:t,view:n,clipboardText:b}),[3,25];case 8:if(!i)throw new Error("Expected client");return r?[4,Yt({offset:s,lspClient:i,openFile:r,view:n,newPane:Boolean(null===a||void 0===a?void 0:a.isCmdOrCtrl)})]:[3,25];case 9:return o.sent(),[3,25];case 10:if(!i)throw new Error("Expected client");return r?[4,X(i.request.findTypeDefinitions,"No type definition found",r)]:[3,25];case 11:return o.sent(),[3,25];case 12:if(!i)throw new Error("Expected client");return r?[4,X(i.request.findImplementations,"No implementation found",r)]:[3,25];case 13:return o.sent(),[3,25];case 14:return n.dispatch({effects:[Gt.h.of(s)]}),[3,25];case 15:return function(e,n){void 0===n&&(n=e.state.selection.main.head),n>e.state.doc.length||(e.state.wordAt(n)?e.dispatch({effects:Wt.of(n)}):(0,Ft.J)(e,{message:"You cannot rename this element",offset:n}))}(n,s),[3,25];case 16:if(c.selection.main.empty){if(!(x=c.wordAt(s)))return[2];n.dispatch({selection:x})}return(0,z.tm)(n),setTimeout((function(){return n.focus()})),[3,25];case 17:return(k=n.coordsAtPos(s))?(n.dispatch({effects:[Se.of(k)]}),[3,25]):[2];case 18:return C=c.doc.lineAt(s),Me(n,C.from),[3,25];case 19:return n.dispatch({effects:[tr.UQ.of(ae()())]}),[3,25];case 20:return S=n.state.selection.main,T=l.getOTVersion(t),E=Fr(n.state,t,T),f?(v({chatMessage:{type:"explainCode",codeReference:E}}),n.dispatch({selection:{anchor:S.to},effects:[Rr.Q.of({codeReference:E,type:"explainCode"}),q.tk.scrollIntoView(S.to,{y:"center"})]}),(0,K.j)(K.U3.CODEX_FEATURE_USED,{feature:"explanation",isInline:!0,isRetry:!1,action:"submit",language:E.language}),[3,25]):(n.dispatch({selection:{anchor:S.to},effects:[Rr.Q.of({codeReference:E,type:"ghostwriterPaywall",data:{from:"explainCode"}}),q.tk.scrollIntoView(S.to,{y:"center"})]}),[3,25]);case 21:return p(t),R=n.state.selection.main,I=l.getOTVersion(t),G=Fr(n.state,t,I),f?(n.dispatch({selection:{anchor:R.to},effects:[Rr.Q.of({codeReference:G,type:"generateCode"}),q.tk.scrollIntoView(R.to,{y:"center"})]}),[3,25]):(n.dispatch({selection:{anchor:R.to},effects:[Rr.Q.of({codeReference:G,type:"ghostwriterPaywall",data:{from:"generateCode"}}),q.tk.scrollIntoView(R.to,{y:"center"})]}),[3,25]);case 22:return h(t),D=c.selection.main,_=l.getOTVersion(t),P=Fr(n.state,t,_),f?(n.dispatch({selection:{anchor:D.to},effects:[Rr.Q.of({type:"transformCode",codeReference:P}),q.tk.scrollIntoView(D.to,{y:"center"})]}),[3,25]):(n.dispatch({selection:{anchor:D.to},effects:[Rr.Q.of({codeReference:P,type:"ghostwriterPaywall",data:{from:"editCode"}}),q.tk.scrollIntoView(D.to,{y:"center"})]}),[3,25]);case 23:return B=(0,we.s)(c.doc,s),A=B.line,U=B.character,L=(0,re.dr)({path:t,line:A+1,col:U}),(0,te.Z)(L),[3,25];case 24:throw new Error("Unexpected action: ".concat(e));case 25:return[2]}}))}));return function(n,t){return e.apply(this,arguments)}}(),[n,i,t,r,l,v,p,h]),w=(0,g.Z)(b.useState(!1),2),x=w[0],k=w[1];(0,Ve.Z)({view:n,initialExtension:q.tk.updateListener.of((function(e){e.transactions.some((function(e){return e.reconfigured}))&&k("undefined"!==typeof e.view.state.field(Fe,!1))}))});var C=ee(i),S=b.useMemo((function(){if(!n)return[];var e=[];return C&&(C.isFindDefinitionSupported&&e.push(W.D2.JumpToDefinition),C.isFindTypeDefinitionSupported&&e.push(W.D2.JumpToTypeDefinition),C.isFindImplementationSupported&&e.push(W.D2.JumpToImplementation),(C.isFindDefinitionSupported||C.isFindReferencesSupported)&&e.push(W.D2.FindReferences),C.isRenameSupported&&e.push(W.D2.Rename),C.isCodeActionsSupported&&e.push(W.D2.CodeActions)),e.push(W.D2.SelectAllOccurrences),e.push(W.JJ),e.push(W.D2.CopyLinkToPos),x&&e.push(W.D2.ToggleBreakpoint),e.push(W.D2.StartThread),e.push(W.D2.ExplainCode),e.push(W.D2.GenerateCode),e.push(W.D2.TransformCode),e.push(W.JJ),e.push(W.D2.Cut),e.push(W.D2.Copy),window.navigator.clipboard&&"readText"in window.navigator.clipboard&&e.push(W.D2.Paste),e}),[n,C,x]),T=(0,Ve.Z)({view:n});return b.useEffect((function(){if(n){var e=S.filter((function(e){return!(0,W.s3)(e)})).filter((function(e){return"keyboardShortcut"in W.Wo[e]})).filter((function(e){return e!==W.D2.Cut&&e!==W.D2.Copy&&e!==W.D2.Paste})).map((function(e){var n=W.Wo[e].keyboardShortcut,t={key:n.key,preventDefault:!0,run:function(){return Z(e),!0}};return n.altKey&&(t.key="Alt-".concat(t.key)),n.shiftKey&&(t.key="Shift-".concat(t.key)),n.cmdOrCtrlKey&&(t.key="Mod-".concat(t.key)),t}));return n.dispatch({effects:T.reconfigure(q.$f.of(e))}),function(){n.dispatch({effects:T.reconfigure([])})}}}),[n,Z,S,T]),{onAction:Z,actions:S,contextMenuCoords:u,onContextMenu:function(e){if(!d&&n){e.preventDefault();var r=e.clientX,i=e.clientY,o=n.state.selection.main,l=n.posAtCoords({x:r,y:i}),c=n.state.doc.length,u=null===l?c:l;if(a.current=u,u<o.from||u>o.to){var f=j.jT.cursor(u);n.dispatch({selection:f})}var p=(0,ie.r6)(t);(0,K.j)(K.U3.EDITOR_CONTEXT_MENU_OPENED,{ext:p}),s({x:r,y:i})}},closeMenu:m,resizeRef:y}}var ai=t(68825);function li(e){var n=e.view,t=e.debuggest,r=e.filePath,i=e.isLoading,o=(0,ne.Z)().fs,a=(0,ai.Z)(),l=(0,ke.Z)(t.mainClient),c=(0,Ve.Z)({view:n});b.useEffect((function(){if(!i&&a&&l&&n){var e=(0,De.ZF)("/home/runner/".concat(a.slug,"/").concat(r)),t=function(e,n,t,r){var i,o=[];o.push(n.breakpoints.subscribe((function(n){var r=n.get(t);e.dispatch({effects:Pe.of({lines:r?r.map((function(e){return e.line})):[]})})})));var a=q.tk.updateListener.of((function(i){i.transactions.forEach((function(i){i.effects.forEach((function(i){if(i.is(Be)){var o=(0,De.om)(t);if(!o)throw new Error("Expected relative path");n.toggleBreakpoint(t,{line:e.state.doc.lineAt(i.value.pos).number,otVersion:r.getOTVersion(o),otIndex:i.value.pos})}}))}))}));o.push(n.stackFrames.subscribe((function(n){var r=We(n,t);e.dispatch({effects:Ue.of(r)})})));var l=(0,q.v5)({class:"cm-breakpoint-gutter",markers:function(e){return e.state.field(Fe)},initialSpacer:function(){return _e},domEventHandlers:{mousedown:function(e,n){return Me(e,n.from),!0}}}),c=(null===(i=n.breakpoints.current.get(t))||void 0===i?void 0:i.map((function(e){return e.line})))||[],u=[j.Wl.highest(l),Fe.init((function(e){return He(c,e)})),a,Le.init((function(){return We(n.stackFrames.current,t)})),Ne,Oe];return{extensions:u,dispose:function(){return o.forEach((function(e){return e()}))}}}(n,l,e,o),u=t.extensions,s=t.dispose;return n.dispatch({effects:c.reconfigure(u)}),function(){n.dispatch({effects:c.reconfigure([])}),s()}}}),[l,n,a,r,i,o,c])}var ci=t(69051),ui=t(49129),si=t(12290),di=t(94716),fi=t(70065);function pi(e,n,t,r){var i=(0,b.useState)((function(){return new j.F6}))[0],a=(0,di.Z)(e);(0,b.useEffect)((function(){if(t){var e=a.current();if(e){var n=void 0===i.get(t.state)?j.Py.appendConfig.of(i.of(e)):i.reconfigure(e);try{t.dispatch({effects:n})}catch(o){throw fi.Z.wrap(o).setExtras({callsiteForBSODs:r})}return function(){try{t.dispatch({effects:i.reconfigure([])})}catch(o){throw fi.Z.wrap(o).setExtras({callsiteForBSODs:r})}}}}}),[t,i,a,r].concat((0,o.Z)(n)))}var hi=j.Py.define(),vi=j.QQ.define({create:function(){return null},update:function(e,n){var t=e;return(0,Ce.j)(n,hi,(function(e){t=e.value})),t}});function mi(e,n){return gi.apply(this,arguments)}function gi(){return(gi=(0,H.Z)((function(e,n){var t,r,i,o,a,l,c,u,s;return(0,V.__generator)(this,(function(d){switch(d.label){case 0:return[4,e.request.documentSymbol(n)];case 1:if(!(t=d.sent())||t.cancelled)return[2,null];if(!(r="result"in t&&!t.cancelled?t.result:null))return[2,null];i=[],o=!0,a=!1,l=void 0;try{for(c=r[Symbol.iterator]();!(o=(u=c.next()).done);o=!0)(s=u.value)&&"range"in s&&i.push(s)}catch(f){a=!0,l=f}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}return[2,i.length?i:null]}}))}))).apply(this,arguments)}function yi(e){var n=e.view,t=e.filePath,r=e.isLoading,i=e.decorations,o=e.openFile,a=(0,Ct.Z)().preferences.codeIntelligence,l=(0,ne.Z)().fs,c=(0,Q.Z)(t),u=ee(c),s=function(){var e=(0,zr.d)(),n=(0,rr.ql)(),t=(0,Sr.OT)();return(0,me.Z)((function(){if(e)return function(e){t(),n({chatMessage:e})}}),[e,t,n])}();!function(e){var n=e.view,t=e.filePath,r=e.lspClient;pi((function(){if(!n||!t||!r)return null;if(!(0,J.Z)(r).isDocumentSymbolSupported)return null;var e=(0,si.Z)((0,H.Z)((function(){var e;return(0,V.__generator)(this,(function(i){switch(i.label){case 0:return[4,mi(r,t)];case 1:return e=i.sent(),n.dispatch({effects:hi.of(e)}),[2]}}))})),{wait:200}),i=q.tk.updateListener.of((function(n){n.docChanged&&e()}));return e(),[i,vi]}),[n,t,r],n,"useDocumentSymbols")}({view:n,filePath:t,lspClient:c});var d=r||!a||!n||!c||!u||!c.isSupportedFile(t),f=(0,Ve.Z)({view:n});b.useEffect((function(){if(!d)return n.dispatch({effects:f.reconfigure([nr({fs:l,lspClient:c,path:t,decorations:i,openFile:o,askGhostwriter:s})])}),function(){n.dispatch({effects:f.reconfigure([[q.tk.updateListener.of((function(e){e.docChanged&&(0,gn.KS)(e.state)>0&&e.view.dispatch(wn(e.startState))}))]])}),i.unmount()};n&&!a&&n.dispatch(wn(n.state))}),[l,c,n,u,f,t,o,i,d,s,a]),b.useEffect((function(){if(c&&(t&&(0,J.Z)(c).isTextDocumentSyncSupported))return l.watchTextFile(t,{onFlush:function(){c.isOpen(t)&&c.notify.didSave(t)}})}),[l,t,c])}var Zi=t(48224),bi=t(4561),wi=t(13424),xi=q.lg.define((function(e){var n=e.state.facet(ki),t=[];return{update:function(e){n=e.state.facet(ki);var t=!0,r=!1,i=void 0;try{for(var o,a=e.transactions[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;l.changes.empty||this.pushTransaction(l)}}catch(c){r=!0,i=c}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}},flush:function(){t=[]},logs:function(){return t},pushEvent:function(n){var t={anchor:e.state.selection.main.anchor,head:e.state.selection.main.head,docLength:e.state.doc.length,time:Date.now(),type:n.type};(0,mn.Z)(n,KeyboardEvent)&&(t.key=n.key,t.metaKey=n.metaKey,t.shiftKey=n.shiftKey,t.altKey=n.altKey,t.ctrlKey=n.ctrlKey),(0,mn.Z)(n,InputEvent)&&(t.data=n.data,t.inputType=n.inputType,t.isComposing=n.isComposing),(0,mn.Z)(n,CompositionEvent)&&(t.data=n.data),this.pushLog(t)},pushTransaction:function(e){this.pushLog({changes:JSON.stringify(e.changes),time:Date.now(),type:"transaction"})},pushLog:function(e){n&&(t.push(e),t=t.slice(Math.max(0,t.length-100)))}}}),{provide:function(e){var n=function(n,t){var r;return null===(r=t.plugin(e))||void 0===r?void 0:r.pushEvent(n)};return j.Wl.highest(q.tk.domEventHandlers({keypress:n,keydown:n,keyup:n,beforeinput:n,input:n,compositionstart:n,compositionupdate:n,compositionend:n}))}}),ki=j.r$.define({combine:function(e){return!!e.length&&e[0]}}),Ci=new ei.j((function(e){return ki.of(e)})),Si=j.q6.define();var Ti=t(24746),Ei={"#1BC47D":"rgba(27, 196, 125, 0.2)","#EF5533":"rgba(239, 85, 51, 0.2)","#18A0FB":"rgba(24, 160, 251, 0.2)","#FFC700":"rgba(255, 199, 0, 1)","#907CFF":"rgba(144, 124, 255, 0.2)","#00B5CE":"rgba(0, 181, 206, 0.2)","#EE46D3":"rgba(238, 70, 211, 0.2)"};var Ri=j.Py.define(),Ii=j.Py.define(),Gi=j.Py.define(),Di=j.QQ.define({create:function(){return{}},update:function(e,n){if(!n.changes.empty){var t=function(e){return n.changes.mapPos(Math.min(n.changes.length,e))},o={},a=!0,l=!1,c=void 0;try{for(var u,s=Object.values(e)[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var d=u.value;o[d.id]=(0,i.Z)((0,r.Z)({},d),{position:t(d.position),selectionStart:t(d.selectionStart),selectionEnd:t(d.selectionEnd)})}}catch(T){l=!0,c=T}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}e=o}var f=!0,p=!1,h=void 0;try{for(var v,m=n.effects[Symbol.iterator]();!(f=(v=m.next()).done);f=!0){var y=v.value;if(y.is(Er.R)&&(e=(0,r.Z)({},e)),y.is(Ri)&&y.value.position<=n.newDoc.length&&((e=(0,r.Z)({},e))[y.value.id]=(0,r.Z)({},y.value)),y.is(Ii)&&(e=(0,r.Z)({},e),y.is(Ii)&&delete e[y.value]),y.is(Gi)){e=(0,r.Z)({},e);var Z=!0,b=!1,w=void 0;try{for(var x,k=Object.entries(e)[Symbol.iterator]();!(Z=(x=k.next()).done);Z=!0){var C=(0,g.Z)(x.value,2),S=C[0];C[1].username===y.value&&delete e[S]}}catch(T){b=!0,w=T}finally{try{Z||null==k.return||k.return()}finally{if(b)throw w}}}}}catch(T){p=!0,h=T}finally{try{f||null==m.return||m.return()}finally{if(p)throw h}}return e},provide:function(e){return[q.tk.decorations.computeN([e],(function(n){var t=n.field(e);return Object.values(t).map((function(e){var n=e.selectionStart<e.selectionEnd?e.selectionStart:e.selectionEnd,t=e.selectionStart>e.selectionEnd?e.selectionStart:e.selectionEnd;return n===t?null:q.p.set(q.p.mark({attributes:{style:"background-color: ".concat(e.color.selection,"; display: inline-block;")},cursor:e}).range(n,t))})).filter((function(e){return null!==e}))}))]}});function _i(e){return q.tk.updateListener.of((function(n){var t=n.state.selection;t!==n.startState.selection&&(n.transactions.every((function(e){return e.annotation(j.YW.remote)}))||e(t.ranges.map((function(e){var t=n.state.doc.lineAt(e.head);return{position:e.head,line:t.number,column:e.head-t.from+1,selectionStart:e.from,selectionEnd:e.to}})),t.mainIndex))}))}function Pi(e){var n=e.view,t=e.presence,o=e.fs,a=e.filePath,l=(0,b.useState)(null),c=l[0],u=l[1],s=(0,Ti.Z)({presence:t}),d=(0,b.useRef)({}),f=(0,Ze.Z)();(0,b.useEffect)((function(){var e=s.reduce((function(e,n){return n.username&&n.color?(0,i.Z)((0,r.Z)({},e),(0,Cn.Z)({},n.username,n.color)):e}),{});d.current=e}),[s]);var p=(0,Ve.Z)({view:n});return(0,b.useEffect)((function(){if(n){var e=t.onUserLeave((function(e){n.dispatch({effects:Gi.of(e.username)})})),r=o.watchTextFile(a,{onReady:function(e){var t=e.updateSelections;n.dispatch({effects:p.reconfigure([Di,_i((function(e){t(e)}))])}),u(a)},onCursor:function(e){var t=function(e){var n,t=e.cursor,r=e.usernameColorsMap,i=null===(n=t.user)||void 0===n?void 0:n.name;if(i){var o,a=t.id,l=t.position,c=t.selectionStart,u=t.selectionEnd,s=r[i];if(s&&a&&"number"===typeof l&&"number"===typeof c&&"number"===typeof u)return Ri.of({id:a,username:i,position:l,color:{cursor:s,selection:(o=s,Ei[o]||"")},selectionStart:c,selectionEnd:u})}}({cursor:e,usernameColorsMap:d.current});t&&n.dispatch({effects:t})},onRemoveCursor:function(e){n.dispatch({effects:Ii.of(e)})},onError:function(){n.dispatch({effects:p.reconfigure([])})},onMoveOrDelete:function(){n.dispatch({effects:p.reconfigure([])})}});return function(){e(),r(),n.dispatch({effects:p.reconfigure([])}),f.current&&u(null)}}}),[n,a,o,t,p]),{loadedFile:c}}var Bi=t(84630);var Ai=q.tk.theme({".multiplayer-cursor":{width:"2px",left:"0",top:"0"},".multiplayer-cursor .multiplayer-label":{boxShadow:k.TV.shadow1,borderRadius:k.TV.borderRadius4,padding:"1px",position:"absolute",left:"0px",animation:"fadeOut 2s ease-in forwards",color:"white",display:"inline-block",whiteSpace:"nowrap"},".multiplayer-cursor:hover .multiplayer-label":{animation:"auto"}});function Ui(e){e.style.transform="translate(-10000px, -10000px)"}function Li(e){var n=document.createElement("div");n.textContent=e.username,n.style.backgroundColor=e.color.cursor,n.classList.add("multiplayer-label");var t=document.createElement("div");return t.classList.add("multiplayer-cursor"),t.style.backgroundColor=e.color.cursor,t.style.position=I.gn?"absolute":"fixed",t.appendChild(n),{dom:t,label:n}}var Xi=new Map;var Ni=q.lg.define((function(e){var n=function(){u&&(u.disconnect(),a.forEach((function(e){u.observe(e.view.dom)})))},t=function(){if(!Boolean(!i||0===Object.values(i).length)&&(e.inView&&e.requestMeasure(d),l!==e.inView)){if(l=e.inView)return;a.forEach((function(e){Ui(e.view.dom)}))}},r=function(){null===s&&(s=setTimeout((function(){s=null,t()}),50))},i=e.state.field(Di,!1),a=new Map((i?Object.values(i):[]).map((function(e){return[e.id,{view:Li(e),cursor:e}]}))),l=!0,c=0,u="function"===typeof IntersectionObserver?new IntersectionObserver((function(e){Date.now()>c-50&&e.length>0&&e[e.length-1].intersectionRatio<1&&r()}),{threshold:[1]}):null;n();var s=null;window.addEventListener("resize",r);var d={read:function(){return{editorRect:e.scrollDOM.getBoundingClientRect(),dimensions:new Map((i?Object.values(i):[]).map((function(n){var t=a.get(n.id),r=t?function(e,n){var t=Xi.get(e);if(t)return t;var r=n.getBoundingClientRect().width;return Xi.set(e,r),r}(n.username,t.view.label):null;return[n.id,{position:e.coordsAtPos(n.position),labelWidth:r}]})))}},write:function(e){a.forEach((function(n,t){var r=e.dimensions.get(t);!function(e){var n=e.cursorView,t=e.position,r=e.labelWidth,i=e.editorRect,o=n.dom,a=n.label;if(t&&r){var l=t.bottom-t.top;if(t.bottom<=i.top+l||t.top+l>=i.bottom||t.right<i.left-.1||t.left>i.right+.1)Ui(o);else{var c=t.left+r-i.right,u="0px";c>0?(u="-".concat(c,"px"),a.style.borderBottomLeftRadius="4px"):a.style.borderBottomLeftRadius="0px",a.style.pointerEvents="none",a.style.transform="translate(".concat(u,", -100%)");var s=I.gn?{x:t.left-i.left+"px",y:t.top-i.top+"px"}:{x:"calc(".concat(t.left,"px + var(--fixed-position-offset-x))"),y:"calc(".concat(t.top,"px + var(--fixed-position-offset-y))")},d=s.x,f=s.y;o.style.transform="translate(".concat(d,", ").concat(f,")"),o.style.height=l+"px"}}else Ui(o)}({cursorView:n.view,position:(null===r||void 0===r?void 0:r.position)||null,labelWidth:(null===r||void 0===r?void 0:r.labelWidth)||null,editorRect:e.editorRect})}))},key:Math.random().toString()};return{update:function(r){r.transactions.length&&(c=Date.now());var l=r.state.field(Di,!1);if(l!==r.startState.field(Di,!1)){var u=new Map,s=new Set;if(l){var d=new Map((0,o.Z)(a.values()).map((function(e){return[e.cursor.id,e.view]})));Object.values(l).forEach((function(n){var t=d.get(n.id);if(t)s.add(t),u.set(n.id,{view:t,cursor:n});else{var r=Li(n);u.set(n.id,{view:r,cursor:n}),e.dom.appendChild(r.dom)}}))}a.forEach((function(e){s.has(e.view)||e.view.dom.remove()})),a=u,i=l,n(),t()}else r.geometryChanged&&t()},destroy:function(){window.removeEventListener("resize",r),a.forEach((function(e){e.view.dom.remove()})),i=void 0,a=new Map,null===u||void 0===u||u.disconnect(),s&&clearTimeout(s)},maybeMeasure:t}}),{eventHandlers:{scroll:function(){this.maybeMeasure()}}}),Mi=[Ai,Ni];function Fi(e){var n=e.view,t=e.presence,r=e.fs,i=e.filePath,o=function(e){var n=e.view,t=e.fs,r=e.filePath,i=(0,b.useState)(null),o=i[0],a=i[1],l=(0,Ze.Z)(),c=(0,Ve.Z)({view:n}),u=(0,Zi.Z)().trackTimeToLoadFileEnd,s=(0,wi.uV)(),d=(0,wi.Id)(),f=(0,wi.I7)();return(0,b.useEffect)((function(){if(n){var e=0,i=0,o=0,p=null,h=t.watchTextFile(r,{onReady:function(l){var f=l.initialContent,h=l.writeChange,v=l.version;e=v,i=v,d({filePath:r,version:v}),u(r),n.dispatch({changes:{from:0,to:n.state.doc.length,insert:f},annotations:[j.YW.addToHistory.of(!1),j.YW.remote.of(!0),Si.of(!0)]}),n.dispatch({effects:c.reconfigure(q.tk.updateListener.of((function(n){if(n.docChanged){var a=!0,l=!1,c=void 0;try{for(var u,d=function(){var a=u.value;if(a.annotation(j.YW.remote)||a.annotation(Si))return"continue";o++;var l=a.annotation(Mr.Z)?{author:"ghostwriter"}:{};try{h(a.changes,l),p=a.changes}catch(c){throw t.readFile(r,{fromDisk:!1}).then((function(t){var o="replitReadError: "+t.error;t.error||(o=t.content.toString());var l=n.view.contentDOM.innerText,u=n.view.plugin(xi),d=null===u||void 0===u?void 0:u.logs();null===u||void 0===u||u.flush(),s({origin:"Codemirror: ot/writeChange",error:c,tags:{ot:!0},extras:{filePath:r,previousChanges:JSON.stringify(p),transactionChanges:JSON.stringify(a.changes),otherTransactionChanges:JSON.stringify(n.transactions.filter((function(e){return e!==a})).map((function(e){return e.changes}))),transactionDoc:a.newDoc.sliceString(0),updateDoc:n.state.doc.sliceString(0),otClientDoc:o,domText:l,openVersion:i,latestReceivedVersion:e,keystrokes:JSON.stringify(d)}})})),c}},f=n.transactions[Symbol.iterator]();!(a=(u=f.next()).done);a=!0)d()}catch(v){l=!0,c=v}finally{try{a||null==f.return||f.return()}finally{if(l)throw c}}}})))}),a(r)},onChange:function(a){var l=a.changes,c=a.changeSource,u=a.version;e=u,d({filePath:r,version:u});try{n.dispatch({changes:l,annotations:[j.YW.remote.of(c===bi.Fl.Container),j.YW.addToHistory.of(c===bi.Fl.Local),Si.of(!0)]})}catch(f){throw t.readFile(r,{fromDisk:!1}).then((function(e){var t="replitReadError: "+e.error;e.error||(t=e.content.toString());var a=n.contentDOM.innerText;s({origin:"Codemirror: ot/syncRemoteOp",error:f,tags:{ot:!0},extras:{filePath:r,previousChanges:JSON.stringify(p),changes:JSON.stringify(l),changeSource:c,otClientDoc:t,domText:a,cmDoc:n.state.doc.sliceString(0),openVersion:i,version:u,initiatedChanges:o}})})),f}},onError:function(){n.dispatch({effects:c.reconfigure([])})},onMoveOrDelete:function(){n.dispatch({effects:c.reconfigure([])})}});return function(){f({filePath:r}),h(),e=0,i=0,o=0,n.dispatch({effects:[c.reconfigure([])]}),l.current&&a(null)}}}),[n,r,t,l,c,u,s,d,f]),{loadedFile:o}}({view:n,fs:r,filePath:i}),a=o.loadedFile,l=Pi({view:n,fs:r,filePath:i,presence:t}).loadedFile;!function(e){var n=e.view,t=(0,ne.Z)().presence,r=(0,Bi.Z)(),i=(0,Ve.Z)({view:n});b.useEffect((function(){if(r&&n){var e=function(){t.getFollowedUser()&&t.unfollowUser()};return n.dispatch({effects:i.reconfigure(q.tk.domEventHandlers({wheel:e,keydown:function(n){"Control"!==n.key&&"Meta"!==n.key&&e()},click:e}))}),function(){n.dispatch({effects:i.reconfigure([])})}}}),[r,n,t,i]);var o=(0,Ve.Z)({view:n});b.useEffect((function(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(n){var t=j.jT.cursor(e);n.dispatch({effects:[q.tk.scrollIntoView(t,{x:"center",y:"center"})]})}};if(n&&r){var t=n.state.field(Di,!1);if(t){var i=Object.values(t).find((function(e){return e.username===r.username}));i&&e(i.position)}return n.dispatch({effects:o.reconfigure(q.tk.updateListener.of((function(n){var t,i=!0,o=!1,a=void 0;try{for(var l,c=n.transactions[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value,s=!0,d=!1,f=void 0;try{for(var p,h=u.effects[Symbol.iterator]();!(s=(p=h.next()).done);s=!0){var v=p.value;v.is(Ri)&&v.value.username===r.username&&(t=v.value)}}catch(m){d=!0,f=m}finally{try{s||null==h.return||h.return()}finally{if(d)throw f}}}}catch(m){o=!0,a=m}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}t&&e(t.position)})))}),function(){n.dispatch({effects:o.reconfigure([])})}}}),[n,r,o])}({view:n});var c=i!==a||i!==l,u=(0,Ve.Z)({view:n});return(0,Ve.Z)({view:n,initialExtension:Mi}),(0,b.useEffect)((function(){n&&n.dispatch({effects:u.reconfigure([q.tk.editable.of(!c),j.yy.readOnly.of(c)])})}),[n,c,u]),{isLoading:c}}var Oi=t(91926),Wi=t(69583);function Hi(){var e=(0,g.Z)(b.useState(!1),2),n=e[0],t=e[1];return(0,a.BX)(a.HY,{children:[(0,a.tZ)("a",{css:k.l0.linkStyle,onClick:function(){return t(!0)},onKeyDown:function(){return t(!0)},role:"button",tabIndex:0,children:"generate code with Ghostwriter"}),(0,a.tZ)(Wi.Z,{context:"workspace_placeholder_text",isOpen:n,onRequestClose:function(){return t(!1)},uponPurchaseGoTo:"cyclesPage",powerUp:"ghostwriter"})]})}var Vi=t(43119),zi=t(71440),ji=t(24635);function qi(){var e=(0,Vi.Z)(["\n  query IsReplLesson($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        lesson {\n          id\n        }\n      }\n      ... on ReplRedirect {\n        __typename\n      }\n      ... on SubscriptionExpiredError {\n        __typename\n      }\n    }\n  }\n"]);return qi=function(){return e},e}var $i={},Yi=(0,zi.Ps)(qi());var Ki=function(e){var n,t,i=function(e){var n=(0,r.Z)({},$i,e);return ji.a(Yi,n)}({variables:{replId:e.replId}}),o=i.data,a=i.loading;return{isLesson:"Repl"===(null===o||void 0===o?void 0:o.repl.__typename)&&"UserCourseLesson"===(null===o||void 0===o||null===(n=o.repl)||void 0===n||null===(t=n.lesson)||void 0===t?void 0:t.__typename),isLoading:a}},Qi=t(48330),Ji=t(27562),eo=t(49770),no=t(13474),to=t(2041),ro=t(26283);function io(){var e=(0,Vi.Z)(["\n  query ReplCodeExamples($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        deprecatedLanguageConfig {\n          id\n          mainFile\n          examples {\n            name\n            code\n          }\n        }\n      }\n    }\n  }\n"]);return io=function(){return e},e}var oo={},ao=(0,zi.Ps)(io());var lo=t(17807),co=t(4421),uo=t(43312),so=t(6394),fo=x.K.button;function po(e){var n=e.name,t=e.children,r=e.onClick;return(0,a.BX)(fo,{onClick:function(){return r()},css:[lo.gU.nofill,k.l0.p(8),k.l0.focusRing,k.l0.textAlign.left],children:[(0,a.tZ)(fe.xv,{variant:"subheadDefault",css:k.l0.pb(16),multiline:!1,children:n}),(0,a.tZ)(x.G,{css:[k.l0.backgroundColor.backgroundDefault,k.l0.p(8),k.l0.borderRadius(8)],children:t})]})}var ho="@media (min-width: ".concat(co.j.tabletMax,"px)"),vo=(0,uo.iv)([k.l0.colWithGap(16),(0,Cn.Z)({},ho,{width:"calc(50%  - 8px)",flex:"0 0 auto",gap:"16px"})]);function mo(e){var n=e.children;return(0,a.tZ)(x.G,{css:[(0,Cn.Z)({},ho,[k.l0.rowWithGap(16)])],children:n})}function go(e){var n=e.mainFile,t=e.examples,r=e.onSelect;return(0,a.BX)(x.G,{css:[k.l0.colWithGap(24)],children:[(0,a.tZ)(fe.h4,{level:1,variant:"headerDefault",children:"Code examples"}),(0,a.tZ)(fe.xv,{children:"Get started with some program examples."}),(0,a.BX)(mo,{css:[k.l0.colWithGap(16)],children:[(0,a.tZ)(x.G,{css:vo,children:t.slice(0,(t.length+1)/2).map((function(e){return(0,a.tZ)(po,{name:e.name,onClick:function(){return r(e)},children:(0,a.tZ)(so.Z,{code:e.code,filePath:n,fontSize:12,disableCursorStyling:!0})},e.name)}))}),(0,a.tZ)(x.G,{css:vo,children:t.slice((t.length+1)/2).map((function(e){return(0,a.tZ)(po,{name:e.name,onClick:function(){return r(e)},children:(0,a.tZ)(so.Z,{code:e.code,filePath:n,fontSize:12,disableCursorStyling:!0})},e.name)}))})]})]})}function yo(e){var n=e.replId,t=e.onSelect,i=function(e){var n=(0,r.Z)({},oo,e);return ji.a(ao,n)}({variables:{replId:n}}),o=i.data,l=i.loading,c=i.error;if(l)return(0,a.tZ)(x.G,{css:[k.l0.colWithGap(0),k.l0.justify.center,k.l0.align.center,k.l0.pt(32),k.l0.pb(32)],children:(0,a.tZ)(vr.Z,{})});if(c)return(0,a.tZ)(x.G,{css:[k.l0.colWithGap(0),k.l0.justify.center,k.l0.align.center,k.l0.pt(32),k.l0.pb(32)],children:c.message});var u="Repl"===(null===o||void 0===o?void 0:o.repl.__typename)?o.repl:null;if(!u)return null;var s=u.deprecatedLanguageConfig,d=s.mainFile,f=s.examples;return(null===f||void 0===f?void 0:f.length)?(0,a.tZ)(go,{mainFile:d,examples:f,onSelect:t}):(0,a.tZ)(x.G,{css:[k.l0.colWithGap(0),k.l0.justify.center,k.l0.align.center,k.l0.pt(32),k.l0.pb(32)],children:(0,a.BX)(fe.xv,{children:["Sorry, this language doesn\u2019t have any examples. Want to add some? Contact us at ",(0,a.tZ)("a",{href:"mailto:support@replit.com",children:"support@replit.com"}),"!"]})})}var Zo=t(31672),bo=t(51631);function wo(){var e=(0,Vi.Z)(["\n  query PlaceholderTextCurrentUser {\n    currentUser {\n      id\n      userPowerUpsByType {\n        __typename\n        ... on UserPowerUpsTypes {\n          ghostwriter {\n            active\n            CTA\n          }\n        }\n      }\n    }\n  }\n"]);return wo=function(){return e},e}var xo={},ko=(0,zi.Ps)(wo());function Co(e){var n=e.onRequestClose,t=e.filePath,r=(0,ro.e)(no.y.Examples),i=(0,ro.e)(no.y.Editor),o=(0,g.Z)(b.useState(!1),2),l=o[0],c=o[1],u=(0,Zo.Z)(t),s=(0,Qi.Z)(),d=b.useRef(null===r||void 0===r?void 0:r.isActive),f=b.useRef();f.current=null===r||void 0===r?void 0:r.isActive;var p=b.useRef(null===r||void 0===r?void 0:r.goto);return p.current=null===r||void 0===r?void 0:r.goto,b.useEffect((function(){return function(){var e;f.current&&(null===(e=p.current)||void 0===e||e.call(p,no.y.Editor))}}),[]),b.useEffect((function(){(null===i||void 0===i?void 0:i.isActive)&&!d.current&&(l?i.goto(no.y.Examples):c(!0))}),[i,n,l]),b.useEffect((function(){(null===r||void 0===r?void 0:r.isActive)?d.current=!0:d.current&&n(null)}),[n,null===r||void 0===r?void 0:r.isActive]),u?(0,a.tZ)("div",{ref:null===r||void 0===r?void 0:r.delegateTooltip,children:(0,a.tZ)(yo,{replId:s,onSelect:function(e){u({code:e.code,insertAt:0}),n({exampleName:e.name})}})}):(0,a.tZ)("div",{children:"Please make sure you have a file open"})}function So(e){var n=(0,g.Z)(b.useState(!1),2),t=n[0],i=n[1],o=(0,Qi.Z)(),l=(0,Ji.Z)(),c=b.useCallback((function(e){(0,K.j)(K.U3.LANGUAGE_EXAMPLES_VIEWED,(0,r.Z)({language:l,replId:o},e)),i(!1)}),[l,o]);return(0,a.BX)(a.HY,{children:["Not sure what to do? Run some"," ",(0,a.tZ)("a",{"data-cy":"ws-editor-examples",css:k.l0.linkStyle,onClick:function(){i(!0)},onKeyDown:function(){i(!0)},role:"button",tabIndex:0,children:"examples"}),(0,a.tZ)(to.u,{maxWidth:872,isOpen:t,onRequestClose:function(){return c(null)},children:(0,a.tZ)(Co,{onRequestClose:c,filePath:e.filePath})})]})}function To(e){var n,t,i=e.onShowGenerateCodeModal,o=e.filePath,l=(0,Qi.Z)(),c=(0,Ji.Z)(),u=Ki({replId:l}),s=u.isLesson,d=u.isLoading,f=function(e){var n=(0,r.Z)({},xo,e);return ji.a(ko,n)}(),p=f.data,h=f.loading,v=Oi.Z.getDocs(c),m=(0,eo.yR)();if(d||h)return null;var g="UserPowerUpsTypes"===(null===p||void 0===p||null===(n=p.currentUser)||void 0===n?void 0:n.userPowerUpsByType.__typename)&&p.currentUser.userPowerUpsByType.ghostwriter.CTA,y="UserPowerUpsTypes"===(null===p||void 0===p||null===(t=p.currentUser)||void 0===t?void 0:t.userPowerUpsByType.__typename)&&p.currentUser.userPowerUpsByType.ghostwriter.active,Z=!y&&g===bo.e4.Activate;return s&&m?(0,a.BX)(a.HY,{children:["Not sure what to do?"," ",(0,a.tZ)("a",{css:k.l0.linkStyle,onClick:function(){m&&m()},onKeyDown:function(){m&&m()},role:"button",tabIndex:0,children:"Watch the video"})," ","and follow the written tutorial!"]}):(0,a.BX)(a.HY,{children:[(0,a.tZ)(So,{filePath:o}),y?(0,a.BX)(a.HY,{children:[v?", ":" or ",(0,a.tZ)("a",{css:k.l0.linkStyle,onClick:i,onKeyDown:i,role:"button",tabIndex:0,children:"generate code"})]}):null,Z?(0,a.BX)(a.HY,{children:[v?", ":" or ",(0,a.tZ)(Hi,{})]}):null,v&&(0,a.BX)(a.HY,{children:[", or view"," ",(0,a.tZ)("a",{target:"_blank",css:k.l0.linkStyle,href:v,children:"documentation"})]})," ","(start typing to dismiss)"]})}function Eo(e){var n=e.filePath,t=(0,Ji.Z)(),r=Oi.Z.getDocs(t);return(0,a.BX)(a.HY,{children:[(0,a.tZ)(So,{filePath:n}),r&&(0,a.BX)(a.HY,{children:[", or view"," ",(0,a.tZ)("a",{target:"_blank",css:k.l0.linkStyle,href:r,children:"documentation"})]})," ","(start typing to dismiss)"]})}var Ro=(0,st.X)({root:[k.l0.color.foregroundDimmest,{fontFamily:k.TV.fontFamilyCode}]});var Io=function(e){var n=e.onShowGenerateCodeModal,t=e.filePath,r=(0,l.T3)();return(0,a.tZ)("div",{css:Ro.root,children:r?(0,a.tZ)(Eo,{filePath:t}):(0,a.tZ)(To,{filePath:t,onShowGenerateCodeModal:n})})};function Go(e){var n=e.dom,t=e.onShowGenerateCodeModal,r=e.filePath;return se.createPortal((0,a.tZ)(Io,{onShowGenerateCodeModal:t,filePath:r}),n)}function Do(){var e=(0,Vi.Z)(["\n  query DeprecatedLanguageConfig($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        deprecatedLanguageConfig {\n          id\n          mainFile\n        }\n      }\n    }\n  }\n"]);return Do=function(){return e},e}var _o={},Po=(0,zi.Ps)(Do());function Bo(e){var n=function(e){var n=(0,r.Z)({},_o,e);return ji.a(Po,n)}({variables:{replId:e.replId}}).data;return"Repl"===(null===n||void 0===n?void 0:n.repl.__typename)?n.repl.deprecatedLanguageConfig:null}var Ao=t(63128),Uo=t(57913);function Lo(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;if(!e.valid)return[];for(var r=[],i=e.getCursor(n),o=i.next();!o.done&&r.length<t;)r.push(o.value),o=i.next();return r}var Xo=j.Py.define();var No=t(57388),Mo=t(57786),Fo=t(79249);function Oo(e){return e>420?"large":"small"}var Wo=x.K.div,Ho=(0,st.X)({root:[k.l0.rowWithGap(8),k.l0.px(4),k.l0.py(8),{borderBottom:"1px solid",borderColor:k.TV.outlineDimmest}],panelButtonWrapper:[k.l0.center,k.l0.height(32)],content:[k.l0.display.grid,k.l0.flex.growAndShrink(1),{gridTemplateAreas:'"search search-controls"',gridTemplateRows:"1fr",gridTemplateColumns:"1fr max-content",gap:k.TV.space8}],contentExpanded:[{gridTemplateAreas:'"search search-controls" "replace replace-controls"',gridTemplateRows:"1fr 1fr",gridTemplateColumns:"1fr max-content"}],contentExpandedSmall:[{gridTemplateAreas:'"search" "search-controls" "replace" "replace-controls"',gridTemplateRows:"1fr max-content 1fr max-content",gridTemplateColumns:"1fr"}],contentSmall:[{gridTemplateAreas:'"search" "search-controls"',gridTemplateRows:"1fr max-content",gridTemplateColumns:"1fr"}],matchLabel:[k.l0.position.absolute,k.l0.top(0),k.l0.right(0),k.l0.height("100%"),k.l0.center,k.l0.pr(4)],inputControlsSmall:[k.l0.colWithGap(8),k.l0.flex.growAndShrink(1)],searchInputWrapper:[k.l0.position.relative,{gridArea:"search"}],searchControls:[k.l0.display.flex,k.l0.align.center,k.l0.rowWithGap(8),k.l0.flex.wrap,{gridArea:"search-controls"}],replaceInputWrapper:[{gridArea:"replace"}],replaceControls:[k.l0.display.flex,k.l0.align.center,k.l0.rowWithGap(8),k.l0.flex.wrap,{gridArea:"replace-controls"}]});function Vo(e){var n=e.view,t=function(){if(!n)throw new Error("Expected view");(0,z.g)(n);var e=n.state.selection.main;n.dispatch({effects:q.tk.scrollIntoView(e.from,{y:"center",x:"center"})}),B<=1||D((function(n){if(null===n){var t=T.findIndex((function(n){return n.from===e.from&&n.to===e.to}));return-1===t?1:t+1}return n>=B?1:n+1}))},r=function(){if(!n)throw new Error("Expected view");(0,z.a7)(n);var e=n.state.selection.main;n.dispatch({effects:q.tk.scrollIntoView(e.from,{y:"center",x:"center"})}),B<=1||D((function(n){if(null===n){var t=T.findIndex((function(n){return n.from===e.from&&n.to===e.to}));return-1===t?1:t+1}return n<=1?B||1:n-1}))},i=function(e){var t=e;return!!n&&(0,q.$1)(n,t,"search-panel")},o=(0,g.Z)(b.useState(!1),2),l=o[0],c=o[1],u=(0,g.Z)(b.useState(!1),2),s=u[0],f=u[1],p=(0,g.Z)(b.useState(!1),2),h=p[0],v=p[1],m=(0,g.Z)(b.useState(""),2),y=m[0],Z=m[1],w=(0,g.Z)(b.useState(""),2),k=w[0],C=w[1],S=(0,g.Z)(b.useState([]),2),T=S[0],E=S[1],I=(0,g.Z)(b.useState(null),2),G=I[0],D=I[1],_=(0,Ze.Z)(),P=b.useRef(new z.Jb({search:""})),B=T.length,A=(0,di.Z)(T),U=b.useCallback((function(e,n){if(!e.eq(P.current)){Z(e.search),C(e.replace),f(e.caseSensitive),v(e.regexp);var t=Lo(e,n.state.doc);E(t);var r=n.state.selection.main.anchor,i=t.findIndex((function(e){return e.from<=r&&e.to>=r}));D(-1!==i?i+1:null),P.current=e}}),[]),L=b.useCallback((function(){c(!0)}),[]),X=b.useMemo((function(){return R()((function(e){_.current&&(E(Lo(P.current,e)),D(null))}),250)}),[_]),N=b.useMemo((function(){return R()((function(e){if(_.current){var n=A.current.findIndex((function(n){return n.from<=e&&n.to>=e}));D(-1!==n?n+1:null)}}),250)}),[_,A]);b.useEffect((function(){return function(){X.cancel(),N.cancel()}}),[X,N]),function(e){var n=e.view,t=e.onDocChanged,r=e.onSearchQuery,i=e.onSelectionChanged,o=e.onExpandSearchPanel;b.useEffect((function(){n&&n.dispatch({effects:j.Py.appendConfig.of([q.tk.updateListener.of((function(e){e.transactions.forEach((function(n){n.effects.forEach((function(n){n.is(z.ql)&&r(n.value,e.view),n.is(Xo)&&o()}))}))})),q.tk.updateListener.of((function(e){e.docChanged&&t(e.view.state.doc),e.selectionSet&&i(e.view.state.selection.main.anchor)}))])})}),[n,r,o,t,i])}({view:n,onSearchQuery:U,onSelectionChanged:N,onExpandSearchPanel:L,onDocChanged:X}),b.useEffect((function(){if(n){var e=(0,z.uP)(n.state);Z(e.search),C(e.replace),f(e.caseSensitive),v(e.regexp),P.current=e}}),[n]),b.useEffect((function(){if(n){var e=new z.Jb({search:y,replace:k,caseSensitive:s,regexp:h}),t=P.current;if(!e.eq(t)){P.current=e,n.dispatch({effects:z.ql.of(e)});var r=Lo(e,n.state.doc);E(r);var i=n.state.selection.main.anchor,o=r.findIndex((function(e){return e.from<=i&&e.to>=i}));D(-1!==o?o+1:null)}}}),[n,y,k,s,h]);var M=(0,g.Z)(b.useState(Oo(0)),2),F=M[0],O=M[1],W=(0,$.Z)((function(e){e.width&&O(Oo(e.width))}));if(!n)return null;var H=B>0,V=y.length>0?"0 / 0":null,Y=H?"".concat(G||1," / ").concat(B):V,K=Y?8*Y.length:null,Q=(0,a.BX)(a.HY,{children:[(0,a.tZ)(No.Z,{alt:"Case sensitive",icon:(0,a.tZ)(Mo.Z,{}),checked:s,onClick:function(){f((function(e){return!e}))}}),(0,a.tZ)(No.Z,{alt:"Regular expressions",icon:(0,a.tZ)(d.Z,{}),checked:h,onClick:function(){v((function(e){return!e}))}})]}),J=[Ho.content];return"small"!==F&&l?J.push(Ho.contentExpanded):"small"===F&&l?J.push(Ho.contentExpandedSmall):"small"!==F||l||J.push(Ho.contentSmall),(0,a.tZ)(Wo,{ref:W,onKeyDown:function(e){i(e)&&e.preventDefault()},children:(0,a.BX)(Ao.Tg,{elevated:!0,css:Ho.root,children:[(0,a.tZ)(x.G,{css:Ho.panelButtonWrapper,children:(0,a.tZ)(Ut.h,{alt:l?"Close replace panel":"Show replace panel",onClick:function(){c((function(e){return!e}))},children:(0,a.tZ)(Uo.Z,{rotate:l?90:0,style:{transition:"200ms ease"}})})}),(0,a.BX)(x.G,{css:J,children:[(0,a.BX)(x.G,{css:Ho.searchInputWrapper,children:[(0,a.tZ)(Fo.h,{style:{padding:4,paddingRight:null!==K&&void 0!==K?K:void 0},placeholder:"Search",value:y,name:"search","main-field":"true",onKeyDown:function(e){(0,jt.j)(e)&&"f"===e.key?e.currentTarget.select():"enter"===e.key.toLowerCase()&&(i(e)||(e.preventDefault(),e.shiftKey?r():t()))},onChange:function(e){Z(e)}}),Y?(0,a.tZ)(x.G,{css:Ho.matchLabel,children:(0,a.tZ)(fe.xv,{variant:"small",color:"dimmest",multiline:!1,children:Y})}):null]}),(0,a.BX)(x.G,{css:Ho.searchControls,children:[(0,a.tZ)(Ut.h,{alt:"Previous",onClick:function(){r()},children:(0,a.tZ)(Uo.Z,{rotate:-90})}),(0,a.tZ)(Ut.h,{alt:"Next",onClick:function(){t()},children:(0,a.tZ)(Uo.Z,{rotate:90})}),(0,a.tZ)(At.zx,{text:"Select All",onClick:function(){(0,z.i3)(n),n.focus()}}),Q]}),l?(0,a.BX)(a.HY,{children:[(0,a.tZ)(x.G,{css:Ho.replaceInputWrapper,children:(0,a.tZ)(pr.II,{style:{padding:4},placeholder:"Replacement",name:"replace",value:k,onKeyDown:function(e){"enter"===e.key.toLowerCase()&&(i(e)||(e.preventDefault(),(0,z.K9)(n)))},onChange:function(e){C(e.target.value)}})}),(0,a.BX)(x.G,{css:Ho.replaceControls,children:[(0,a.tZ)(At.zx,{text:"Replace",onClick:function(){(0,z.K9)(n)}}),(0,a.tZ)(At.zx,{text:"Replace All",onClick:function(){(0,z.ko)(n)}})]})]}):null]}),(0,a.tZ)(x.G,{css:Ho.panelButtonWrapper,children:(0,a.tZ)(Ut.h,{alt:"Close Search Panel",tooltipHidden:!0,onClick:function(){(0,z.N$)(n)},children:(0,a.tZ)(Lt.Z,{})})})]})})}function zo(e){var n=e.dom,t=e.view;return se.createPortal((0,a.tZ)(Vo,{view:t}),n)}var jo=t(93766),qo=t(11969);function $o(e){var n=e.view,t=e.filePath,a=e.isLoading,l=(0,Qi.Z)(),c=function(){var e=(0,b.useContext)(jo.ZP);if(!e)throw new Error("Expected codemirror state to be in codemirror state context");return e}(),u=(0,Ve.Z)({view:n});(0,b.useEffect)((function(){if(n&&!a){var e,s="".concat(l,":").concat(t),d=c.current.fileMap.get(s);if(d&&n.state.doc.eq(d.editorState.doc)){if(n.state.field(T.cE,!1))throw new Error("History was preconfigured on this view, if you want to use state cache, please make sure history is not already configured for this view");var f=[];(0,Rn.q2)(d.editorState).between(0,n.state.doc.length,(function(e,n){f.push(Rn.SW.of({from:e,to:n}))})),n.dispatch({effects:(0,o.Z)(f).concat([q.tk.scrollIntoView(d.scrollPos,{y:"start"})]),selection:d.editorState.selection}),e=[T.cE.init((function(){return d.editorState.field(T.cE)})),(0,T.m8)()]}else e=(0,T.m8)();var p=!1,h=R()((function(){var e;(null!==(e=globalThis.requestIdleCallback)&&void 0!==e?e:globalThis.requestAnimationFrame)((function(){qo.Z.set("stateCache",(0,jo.oZ)(c.current))}))}),500),v={read:function(e){if(!p){var n=c.current.fileMap.get(s);if(n){var t=function(e){var n=e.scrollDOM.getBoundingClientRect();if(0===n.top&&0===n.bottom)return null;var t=n.top+e.defaultLineHeight;return e.posAtCoords({x:0,y:t},!1)}(e);null===t||t>n.editorState.doc.length||(c.current.fileMap.set(s,(0,i.Z)((0,r.Z)({},n),{scrollPos:t})),h())}}}},m=!1;return n.dispatch({effects:u.reconfigure([e,q.tk.updateListener.of((function(e){p||(!function(e){var n,t=c.current.fileMap.get(s),r=null!==(n=null===t||void 0===t?void 0:t.scrollPos)&&void 0!==n?n:0;c.current.fileMap.set(s,{scrollPos:r,editorState:e}),h()}(e.state),m||(m=!0,e.view.requestMeasure(v),setTimeout((function(){return m=!1}),500)))}))])}),function(){p=!0,n.dispatch({effects:u.reconfigure([])})}}}),[n,t,c,a,u])}var Yo=t(62199),Ko=t(53828),Qo=t(13233);function Jo(e,n,t,o){var a=(0,Qo.Z)().showError,l=(0,Qi.Z)(),c=(0,Ko.eR)({variables:{replId:l,path:e},onError:function(e){a(e.message)},skip:!o||n}),u=b.useMemo((function(){var o;return n||c.loading||c.error||!c.data||"ThreadsByFileResult"!==(null===(o=c.data.threadsByFile)||void 0===o?void 0:o.__typename)?{}:c.data.threadsByFile.threads.filter((function(n){return n.path===e&&(!t||!n.isResolved)})).reduce((function(e,n){return(0,i.Z)((0,r.Z)({},e),(0,Cn.Z)({},n.id,n))}),{})}),[c.loading,c.data,c.error,e,n,t]);return u}var ea=t(23763),na=t(91513),ta=t(57843),ra=t(56440),ia=t(28737);function oa(e){var n=e.view,t=e.filePath,i=e.enable,a=e.isLoading,l=function(e){return[j.Wl.highest((0,tr.zj)(f)),tr.cR,tr.OQ,tr.ZS,tr.PQ,q.tk.decorations.compute([tr.OQ,tr.ZS,tr.PQ],(function(e){var n=e.field(tr.OQ),t=e.field(tr.ZS),r=e.field(tr.PQ),i=t||Object.values(n).find((function(e){return e.id===r}));return q.p.set((0,o.Z)(Object.values(n)).map((function(e){var n=i&&e.id===i.id;return function(e,n,t,r,i){if(n===t)return null;var o=(0,g.Z)(r,2),a=o[0],l=o[1];return q.p.mark({class:"replit-thread-highlight cm-thread-".concat(e),attributes:{style:"background-color: ".concat(i?l:a)},id:e}).range(n,t)}(e.id,e.indexStart,e.indexEnd,m,n)})).filter((function(n){return null!==n&&n.from!==n.to&&n.from<=e.doc.length&&n.to<=e.doc.length})),!0)})),q.tk.decorations.compute([tr.OQ,tr.ZS,tr.PQ],(function(e){var n=e.field(tr.OQ),t=e.field(tr.ZS),r=e.field(tr.PQ),i=(0,o.Z)(Object.values(n)).concat((0,o.Z)(t?[t]:[])).filter(Boolean).find((function(e){return e.id===r}));return i?q.p.set([q.p.widget({widget:new tr.nE(i.id,s),block:!0,side:1}).range(i.indexEnd)],!0):q.p.none})),q.tk.updateListener.of((function(e){(0,Ce.j)(e,Er.R,(function(){var n=(0,o.Z)(e.view.dom.querySelectorAll(".cm-thread-portal-widget")),t=e.view.dom.querySelector(".cm-scroller"),r=e.view.dom.querySelector(".cm-gutters");if(n.length&&t&&r){var i=!0,a=!1,l=void 0;try{for(var c,u=n[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var s=c.value;(0,na.L)(s,t,r)}}catch(d){a=!0,l=d}finally{try{i||null==u.return||u.return()}finally{if(a)throw l}}}}))})),q.tk.updateListener.of((function(e){(0,Ce.j)(e,tr.eR,(function(t){var r=t.value,i=e.state.field(tr.OQ)[r];i&&(null===n||void 0===n||n.dispatch({selection:{anchor:i.indexStart,head:i.indexStart},effects:[q.tk.scrollIntoView(i.indexStart,{x:"center",y:"center"})]}))}))}))]},c=(0,g.Z)(b.useState({}),2),u=c[0],s=c[1],d=(0,Ve.Z)({view:n}),f=(0,ta.x)(),p=(0,ea.kM)();b.useEffect((function(){n&&p&&n.dispatch({effects:[tr.YM.of(p),tr.eR.of(p)]})}),[n,p]);var h=(0,ia.F)().theme,v=(0,g.Z)(b.useState([ar.TV.accentPrimaryDimmest,ar.TV.accentPrimaryDimmer]),2),m=v[0],y=v[1];b.useEffect((function(){var e=h.values.global.accentPrimaryDimmest,n=(0,ra.w)(e),t="rgba(".concat(n.join(","),", 0.5)");y([t,ar.TV.accentPrimaryDimmer])}),[h]),b.useEffect((function(){if(n&&i)return n.dispatch({effects:d.reconfigure(l())}),function(){n.dispatch({effects:d.reconfigure([])})}}),[n,t,d,i]);return function(e,n,t,i){var o=(0,ne.Z)().fs,a=(0,Yo.kL)(t),l=a.contentRef,c=a.loadedFile,u=a.transformSelectionRef;b.useEffect((function(){var a=!1,s=u.current,d=l.current;if(c&&s&&d&&!i&&n){var f=Object.values(e);0!==f.length?Promise.all(f.map((function(e){return(0,Yo.Ft)({anchor:e,version:o.getOTVersion(t),transformSelection:s,content:d})}))).then((function(e){if(!a){var t=e.filter((function(e){return Boolean(e)})).map((function(e){if(!e)throw new Error("expected resolved anchor");return(0,r.Z)({},e.anchor,null===e||void 0===e?void 0:e.newSelection)}));return n.dispatch({effects:tr.qi.of(t.reduce((function(e,n){return e[n.id]=n,e}),{}))}),function(){a=!0,n&&n.dispatch({effects:tr.qi.of({})})}}})):n.dispatch({effects:tr.qi.of({})})}}),[e,n,c,o,u,l,t,i])}(Jo(t,a,!0,i),n,t,a),{threadElements:u}}var aa=t(96351),la=t(88132),ca=t(58027),ua=t(10452),sa=t(97318),da=t(24025),fa=t(9911),pa=t(98150),ha=t(9353),va=t(9247),ma=t(57835),ga=t(21371),ya=t(46179),Za=t(35301),ba=t(47518),wa=t(73785),xa=t(57370),ka=function(e){var n=e.isCreating,t=e.threadId,r=e.filePath,i=e.isResolved,o=e.isLoading,l=e.isPlaceholder,c=e.caretPosition,u=e.onRequestClose,s=void 0===u?function(){}:u,d=e.onResolveThread,f=void 0===d?function(){}:d,p=e.openThreadsInbox,h="Inbox",v="Next thread",m="Previous thread",g="Collapse",y=Jo(null===r?"":r,o,!0,!0),Z=[12,8];switch((0,Ct.Z)().preferences.fontSize){case 10:Z=[8,6];break;case 14:Z=[10,6];break;case 18:Z=[12,8];break;case 24:Z=[14,10]}var w=b.useMemo((function(){return Object.values(y).sort((function(e,n){return e.indexStart-n.indexStart}))}),[y]),C=b.useMemo((function(){return w.findIndex((function(e){return e.id===t}))}),[w,t]),S=(0,ea.a9)(),T=function(){var e=(0,H.Z)((function(){var e;return(0,V.__generator)(this,(function(n){return e=C===w.length-1?w[0].id:w[C+1].id,S(e),[2]}))}));return function(){return e.apply(this,arguments)}}(),E=function(){var e=(0,H.Z)((function(){var e;return(0,V.__generator)(this,(function(n){return e=0===C?w[w.length-1].id:w[C-1].id,S(e),[2]}))}));return function(){return e.apply(this,arguments)}}();return(0,a.BX)(Ao.Tg,{background:"root",css:[k.l0.flex.row,k.l0.align.center,k.l0.justify.spaceBetween,k.l0.position.relative,k.l0.px(12),k.l0.py(8),{borderBottomWidth:k.TV.borderWidthDefault,borderBottomStyle:"solid",borderBottomColor:k.TV.outlineDimmest}],children:[null!==c&&(0,a.tZ)("span",{css:[k.l0.position.absolute,k.l0.top(-Z[1]),k.l0.left(c),k.l0.height("fit-content"),k.l0.display.flex,k.l0.flex.row,k.l0.align.center],children:(0,a.tZ)(Gr,{caretSize:Z})}),(0,a.tZ)(At.zx,{iconLeft:(0,a.tZ)(pa.Z,{}),onClick:function(){p()},text:h,small:!0}),w.length>1?(0,a.BX)(x.G,{css:[k.l0.flex.row,k.l0.align.center,k.l0.rowWithGap(4)],children:[(0,a.tZ)(Ut.h,{alt:m,onClick:E,children:(0,a.tZ)(ca.Z,{})}),(0,a.BX)(fe.xv,{color:"dimmest",variant:"small",multiline:!1,children:[C+1,"/",w.length]}),(0,a.tZ)(Ut.h,{alt:v,onClick:T,children:(0,a.tZ)(la.Z,{})})]}):null,(0,a.BX)(x.G,{css:[k.l0.flex.row,k.l0.align.center,k.l0.rowWithGap(4)],children:[n||i||l?null:(0,a.tZ)(At.zx,{onClick:f,text:"Resolve",small:!0,iconLeft:(0,a.tZ)(Xt.Z,{})}),!n&&i?(0,a.tZ)(aa.D,{text:"Resolved",colorway:"positive"}):null,(0,a.tZ)(At.zx,{onClick:s,text:g,small:!0,iconLeft:(0,a.tZ)(fa.Z,{})})]})]})},Ca=function(e){var n,t=e.threadId,o=e.isResolved,l=e.onMessageChange,c=e.onMessageSubmit,u=e.isPlaceholder,s=e.onRequestClose,d=void 0===s?function(){}:s,f=(0,g.Z)(b.useState(""),2),p=f[0],h=f[1],v=(0,g.Z)(b.useState(dn().v4()),2),m=v[0],y=v[1],w=(0,fr.Z)(),C=w.ref,S=w.update,T=b.useRef(null),E={placeholder:function(){return u?"Start a new thread\u2026 (Markdown is supported)":o?"Reply to re-open thread\u2026":"Reply\u2026 (Markdown is supported)"}},R="Post reply",I="Cancel",G=function(){var e=p.trim();0!==e.length&&(c({message:e,messageId:m}),h(""),y(dn().v4()))},D=(0,xa.d)(),_=(0,ya.Z)(),P=(0,g.Z)((0,ma.Z)({"@":function(){var e=(0,H.Z)((function(e){var n,t;return(0,V.__generator)(this,(function(r){return n=_.filter((function(e){return e.id!==D})),e&&(t=e.toLowerCase(),n=n.filter((function(e){return e.username.toLowerCase().startsWith(t)}))),[2,n.slice(0,5).map((function(e){return{icon:(0,a.tZ)(va.Z,{url:e.image,style:{height:"24px",width:"24px",minWidth:"24px",minHeight:"24px"}}),value:e.username}}))]}))}));return function(n){return e.apply(this,arguments)}}()}),2),B=P[0].suggestions,A=P[1],U=(0,ga.Kb)({items:(null===B||void 0===B?void 0:B.results)||[],defaultHighlightedIndex:0,isOpen:(null!==(n=null===B||void 0===B?void 0:B.results.length)&&void 0!==n?n:0)>0,onSelectedItemChange:function(e){var n=e.selectedItem;if(B&&n){var t=B.applySuggestion({targetValue:p,suggestionValue:n.value}),r=t.fullValue,i=t.cursorIndex;h(r),setTimeout((function(){T.current&&(T.current.setSelectionRange(i,i),T.current.focus(),S())}))}}}),L=U.isOpen,X=U.getInputProps,N=U.getMenuProps,M=U.getItemProps,F=U.highlightedIndex,O=U.getComboboxProps;return b.useEffect((function(){var e="threads/drafts/".concat(t),n=qo.Z.get(e,"string");n&&h(n);var r=T.current;return function(){if(r){var n=r.value;0!==n.length?qo.Z.set(e,n):qo.Z.remove(e)}}}),[t]),(0,a.BX)(Ao.Tg,{background:"root",css:[k.l0.px(12),k.l0.pb(8),k.l0.pt(8),{borderTop:"1px solid ".concat(k.TV.outlineDimmest)}],className:"inline-thread-input",children:[(0,a.BX)("div",(0,i.Z)((0,r.Z)({css:[k.l0.flex.row,k.l0.align.start,k.l0.rowWithGap(8),k.l0.width("full")]},O()),{className:"jsx-45ff32690e481e34",children:[u?(0,a.tZ)(At.zx,{text:I,onClick:d}):null,(0,a.BX)("div",{css:[{width:"100%"}],className:"jsx-45ff32690e481e34",children:[(0,a.tZ)(pr.B,(0,r.Z)({},X({ref:function(e){T.current=e,C(e),A(e)},value:p,onChange:function(e){var n=e.target.value;h(n),l({message:n,messageId:m})},onKeyDown:function(e){L||(e.preventDownshiftDefault=!0,"Enter"!==e.key||e.shiftKey||(e.stopPropagation(),e.preventDefault(),G(),requestAnimationFrame((function(){S()}))))},onKeyUp:function(e){"Escape"===e.key&&(e.stopPropagation(),e.preventDefault(),d())},placeholder:E.placeholder(),css:[k.l0.height(32),k.l0.align.start,{resize:"vertical",width:"100%",flexGrow:1}],autoFocus:!0}))),(0,a.tZ)("div",{css:{position:"relative"},className:"jsx-45ff32690e481e34",children:(0,a.tZ)("div",(0,i.Z)((0,r.Z)({},N({css:[{position:"absolute",top:k.TV.space2,overflow:"hidden"},k.l0.borderRadius(16),k.l0.shadow(1),k.l0.backgroundColor.backgroundDefault]})),{className:"jsx-45ff32690e481e34",children:null===B||void 0===B?void 0:B.results.map((function(e,n){return(0,b.createElement)("div",(0,i.Z)((0,r.Z)({},M({item:e,index:n})),{key:e.value,className:"jsx-45ff32690e481e34"}),(0,a.BX)(Za.Ug,{spacing:2,css:[F===n?k.l0.backgroundColor.backgroundHighest:null,k.l0.p(8)],children:[e.icon,(0,a.tZ)("div",{className:"jsx-45ff32690e481e34",children:e.value})]}))}))}))})]}),(0,a.tZ)(x.G,{css:[k.l0.pt(4)],children:(0,a.tZ)(Ut.h,{alt:R,tooltipDelay:"long",onClick:G,children:(0,a.tZ)(hr.Z,{})})})]})),(0,a.tZ)(Z(),{id:"45ff32690e481e34",children:".inline-thread-input .popover-control-container{-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1}"})]})};var Sa=function(e){var n,t=e.threadId,r=e.isCreating,i=e.isResolved,l=void 0!==i&&i,c=e.view,u=e.filePath,s=e.openThreadsInbox,d=(0,sa.Z)(t,c,u),f=d.thread,p=d.loading,h=d.isPlaceholder,v=d.getLatestAnchor,m=d.updateThread,g=d.changeThreadMessage,y=d.finalizeThreadMessage,Z=function(){null===c||void 0===c||c.dispatch({effects:[tr.YM.of(null)]})},w=(0,Ct.Z)().preferences.fontSize,C=(0,b.useRef)(null);(0,wa.Z)(f);var S=v(),T=c&&!p&&"number"===typeof(null===S||void 0===S?void 0:S.indexEnd)&&S.indexEnd<=c.state.doc.length?null===(n=c.coordsAtPos(S.indexEnd))||void 0===n?void 0:n.left:null,E=(null===c||void 0===c?void 0:c.dom.getBoundingClientRect().left)||null,R=T&&E?T-E-6:null,I=w;switch(w){case 10:I=13;break;case 14:I=19;break;case 18:I=25;break;case 24:I=34}var G=(0,Qo.Z)().showConfirm,D=(0,Qi.Z)(),_=(0,b.useRef)(null);b.useEffect((function(){setTimeout((function(){_.current&&(_.current.scrollTop=_.current.scrollHeight)}),0)}),[null===f||void 0===f?void 0:f.messages]);var P=b.useMemo((function(){return(null===f||void 0===f?void 0:f.messages)?(0,o.Z)(f.messages).sort((function(e,n){return Date.parse(e.timeCreated)-Date.parse(n.timeCreated)})):[]}),[null===f||void 0===f?void 0:f.messages]),B=function(e){var n=(0,b.useRef)(0);return(0,$.Z)((function(t){var r=t.height;r!==n.current&&(null===e||void 0===e||e.requestMeasure()),n.current=r}))}(c);return(0,a.tZ)("div",{css:[k.l0.width("100%"),k.l0.backgroundColor.backgroundRoot],children:(0,a.BX)(x.G,{innerRef:(0,ba.l)(C,B),css:[k.l0.font.default,{borderTopWidth:k.TV.borderWidthDefault,borderBottomWidth:k.TV.borderWidthDefault,borderStyle:"solid",borderColor:k.TV.accentPrimaryDefault}],children:[h||p?null:(0,a.tZ)(ka,{isCreating:r,isResolved:l,isLoading:p,threadId:t,filePath:u,caretPosition:R,isPlaceholder:h,onRequestClose:Z,onResolveThread:function(){m({changes:{isResolved:!0}}),G("Thread resolved. You can reopen it from the inbox.")},openThreadsInbox:s}),!p||h?(0,a.BX)(a.HY,{children:[!r&&P.length>0?(0,a.tZ)("div",{css:[k.l0.px(12),k.l0.py(12),k.l0.maxHeight(300),k.l0.overflowY("auto"),k.l0.colWithGap(16),k.l0.fontSize(w)],ref:_,children:P.map((function(e){return(0,a.tZ)(ua.Z,{thread:f,message:e},e.id)}))}):null,(0,a.tZ)(Ca,{threadId:t,isPlaceholder:h,isResolved:l,onRequestClose:Z,onMessageChange:g,onMessageSubmit:function(e){y(e),(0,K.j)(ha.U3.MESSAGE_SENT,{replId:D,source:"threads",newThread:h})}})]}):(0,a.tZ)(x.G,{css:[k.l0.height(I)],children:(0,a.tZ)(da.Z,{viewBox:"0 0 400 21",backgroundColor:k.TV.accentPrimaryDimmest,backgroundOpacity:0,foregroundColor:k.TV.accentPrimaryDimmest,foregroundOpacity:.2,speed:1,children:(0,a.tZ)("rect",{x:"0",y:"0",width:"100%",height:"100%"})})})]})})},Ta=t(52491);var Ea=t(75205),Ra=t(6191);var Ia=function(e){(0,ce.Z)(t,e);var n=(0,ue.Z)(t);function t(e,r){var i;return(0,le.Z)(this,t),(i=n.call(this)).src=e,i.pos=r,i}var r=t.prototype;return r.eq=function(e){return this.src===e.src&&this.pos===e.pos},r.toDOM=function(){var e=document.createElement("img");return e.src=this.src,e.dataset.pos=this.pos.toString(),e.style.maxHeight="64px",e.style.maxWidth="256px",e},r.ignoreEvent=function(){return!1},t}(q.l9),Ga=/"data:image\/\w+;base64,[^"\s]+"/g,Da=Number.MAX_VALUE,_a=q.lg.define((function(e){var n=new q.Y1({regexp:Ga,decoration:function(e,n,t){if(void 0===e[0])throw new Error("Failed to match image");var r=e[0].substring(1,e[0].length-1);return q.p.replace({widget:new Ia(r,t)})},maxLength:Da});return{matcher:n,deco:n.createDeco(e),update:function(e){e.docChanged&&(this.deco=n.updateDeco(e,this.deco))}}}),{decorations:function(e){return e.deco},provide:function(e){return q.tk.atomicRanges.of((function(n){var t=n.plugin(e);return t?t.deco:q.p.none}))}});var Pa=t(30826),Ba=t.n(Pa),Aa=new Set,Ua=Ba()((function(){var e=!0,n=!1,t=void 0;try{for(var r,i=Aa[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;(0,K.j)(K.U3.WS_TYPED,{fileExt:o})}}catch(a){n=!0,t=a}finally{try{e||null==i.return||i.return()}finally{if(n)throw t}}Aa.clear()}),6e4);function La(e){var n=e.view,t=e.onType,r=e.filePath,i=(0,Ve.Z)({view:n});b.useEffect((function(){if(n&&t&&r){var e=(0,ie.r6)(r)||(0,ie.UO)(r);return n.dispatch({effects:i.reconfigure(q.tk.updateListener.of((function(n){n.docChanged&&(n.transactions.some((function(e){return e.annotation(j.YW.remote)}))||function(e){Aa.has(e)||(Aa.add(e),Ua())}(e))})))}),function(){n.dispatch({effects:i.reconfigure([])})}}}),[n,t,r,i])}var Xa=t(88161),Na=t(38353),Ma=t(12171),Fa=t(9608),Oa=t(88254);function Wa(e){return{filePath:e,text:"",selections:[],hasFocus:!1}}function Ha(e,n){return null==n?Wa(e):{filePath:e,text:null!==(t=n.state.doc.toString())&&void 0!==t?t:"",selections:n.state.selection.ranges.map((function(e){var n=e.from;return{location:n,length:e.to-n}})),hasFocus:n.hasFocus};var t}function Va(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ae()(),i=Ha(e,n),o={messageType:Xa.cF.TEXT_EDITOR_STATE,filePath:e,text:i.text,selections:i.selections,hasFocus:i.hasFocus,hasGhostwriterSuggestion:t.hasGhostwriterSuggestion,revisionId:t.revisionId};(0,Ma.bG)(o,r)}function za(e,n,t,r,i){return r===e&&r===t.textEditorState.filePath&&(n===t.textEditorState.filePath&&i===t.revisionId)}function ja(e){var n=e.map((function(e){return j.jT.range(e.location,e.location+e.length)}));return j.jT.create(n)}function qa(e,n,t,r,i,o){var a=i.payload;if((0,Xa.Se)(a))return function(e,n,t,r,i){if(!za(e,n,r,i.filePath,i.revisionId))return!1;var o=ja(i.selections);return t.dispatch({selection:o,scrollIntoView:!0}),!0}(e,n,t,r,a);if((0,Xa.m7)(a))return function(e,n,t,r,i){if(!za(e,n,r,i.filePath,i.revisionId))return!1;var o=Ha(e,t),a=ja(i.selections);return t.dispatch({changes:{from:0,to:o.text.length,insert:i.text},selection:a,scrollIntoView:!0}),!0}(e,n,t,r,a);if((0,Xa.ac)(a))return function(e,n,t,r,i){if(!za(e,n,r,i.filePath,i.revisionId))return!1;var o=i.insertionRange,a=ja(i.selections);return t.dispatch({changes:{from:o.location,to:o.location+o.length,insert:i.text},selection:a,scrollIntoView:!0}),!0}(e,n,t,r,a);if((0,Xa.fz)(a))return function(e,n,t,r,i){return!!za(e,n,r,i.filePath,i.revisionId)&&(t.dispatch(t.state.replaceSelection(i.text)),!0)}(e,n,t,r,a);if((0,Xa.T$)(a))!function(e,n,t,r,i){!!za(e,n,r,i.filePath,i.revisionId)&&ni({filePath:e,view:t,clipboardText:i.text})}(e,n,t,r,a);else{if(!(0,Xa.aB)(a))throw new Error("Invalid payload.");switch(a.action){case Xa.b9.REQUEST_BLUR:return function(e,n,t,r,i,o){if(!za(e,n,r,i,o))return!1;t.contentDOM.blur()}(e,n,t,r,a.filePath,a.revisionId);case Xa.b9.REQUEST_UNDO:return function(e,n,t,r,i,o){if(!za(e,n,r,i,o))return!1;return(0,T.Yw)(t),!0}(e,n,t,r,a.filePath,a.revisionId);case Xa.b9.REQUEST_REDO:return function(e,n,t,r,i,o){if(!za(e,n,r,i,o))return!1;return(0,T.KX)(t),!0}(e,n,t,r,a.filePath,a.revisionId);case Xa.b9.REQUEST_INDENT_SELECTION:return function(e,n,t,r,i){return!!za(e,n,r,i.filePath,i.revisionId)&&(T.at(t),!0)}(e,n,t,r,a);case Xa.b9.REQUEST_DEDENT_SELECTION:return function(e,n,t,r,i){return!!za(e,n,r,i.filePath,i.revisionId)&&(T.xi(t),!0)}(e,n,t,r,a);case Xa.b9.REQUEST_TOGGLE_COMMENT:return function(e,n,t,r,i){return!!za(e,n,r,i.filePath,i.revisionId)&&(T.O8(t),!0)}(e,n,t,r,a);case Xa.b9.REQUEST_ACCEPT_GHOSTWRITER_SUGGESTION:return function(e,n,t,r,i,o){return!!za(e,n,r,i.filePath,i.revisionId)&&!!(0,Na.$o)(t)&&((0,K.j)(K.U3.CODE_SUGGESTION_USED,{type:"suggestionAccepted",language:(0,Fa.S)(e),engine:o}),Oa.n_({category:"ghostwriter",message:"Suggestion accepted",level:"info"}),(0,ze._B)(t),!0)}(e,n,t,r,a,o);case Xa.b9.REQUEST_FOCUS:return function(e){return e.focus(),!0}(t);default:throw new Error("Unknown BridgeTextEditorAction.")}}}var $a=t(31858),Ya=t(70232);function Ka(e){var n=e.view,t=e.filePath,r=(0,p.useRouter)(),i=(0,l.Vg)(r),o=(0,b.useRef)({revisionId:ae()(),textEditorState:Wa(t),hasGhostwriterSuggestion:!1}),a=(0,b.useRef)(t),c=(0,$a.Z)().engine,u=(0,Ve.Z)({view:n});(0,b.useEffect)((function(){if(n&&i){var e=Ha(t,n);o.current={revisionId:ae()(),textEditorState:e,hasGhostwriterSuggestion:o.current.hasGhostwriterSuggestion},Va(t,n,o.current);return n.dispatch({effects:u.reconfigure(q.tk.updateListener.of((function(r){!function(r){var i,a=(0,ot.Z)(n.state),l=(null===(i=o.current)||void 0===i?void 0:i.hasGhostwriterSuggestion)!==a;r.docChanged?(o.current={revisionId:ae()(),textEditorState:e,hasGhostwriterSuggestion:a},Va(t,n,o.current)):(r.selectionSet||r.focusChanged||l)&&(o.current={revisionId:o.current.revisionId,textEditorState:e,hasGhostwriterSuggestion:a},Va(t,n,o.current))}(r)})))}),function(){n.dispatch({effects:u.reconfigure([])})}}}),[n,t,u,i]),(0,b.useEffect)((function(){if(n&&i){var e=function(e){Va(t,n,o.current,e.messageId)},r=function(r){qa(t,a.current,n,o.current,r,c)?e(r):(0,Ma.pl)(r.messageId)},l=function(i){try{var l=i.data;if(!(0,Xa.CF)(l))return;if(l.protocolVersion!==Xa.Wj)return;var u=l.payload;l.messageDirection===Xa.s1.TO_NATIVE&&(0,Xa.H7)(u)&&(a.current=u.activePaneFilePath),(0,Ma.fp)(i,(function(i){var u=i.type;switch(u){case Xa.cF.TEXT_EDITOR_STATE_REQUEST:e(l);break;case Xa.cF.REQUEST_SET_SELECTION:case Xa.cF.REQUEST_REPLACE_SELECTION:case Xa.cF.REQUEST_SET_TEXT:case Xa.cF.REQUEST_INSERT_TEXT:case Xa.cF.REQUEST_PASTE_TEXT:r(l);break;case Xa.cF.TEXT_EDITOR_REQUEST_ACTION:!function(r){qa(t,a.current,n,o.current,r,c)?e(r):(0,Ma.pl)(r.messageId)}(l);break;default:(0,Ya.Z)(u)}}))}catch(s){throw new Error("Invalid message: ".concat(s))}};return window.addEventListener("message",l),Va(t,n,o.current),function(){!function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ae()(),t={messageType:Xa.cF.TEXT_EDITOR_CLOSED,filePath:e};(0,Ma.bG)(t,n)}(t),window.removeEventListener("message",l)}}}),[n,t,i,c])}var Qa=t(49514);var Ja=t(20864);function el(e){var n=e.selection.main.head,t=e.doc.lineAt(n);return{offset:n,line:t.number,column:n-t.from+1}}var nl,tl,rl=t(80906);function il(e){var n=e.view,t=e.path,r=e.isHidden,i=(0,rl.NH)();!function(e,n){var t=(0,di.Z)(n);pi((function(){return q.tk.focusChangeEffect.of((function(n){return(null===e||void 0===e?void 0:e.hasFocus)?t.current({type:"focus",position:el(n)}):t.current({type:"blur"}),null}))}),[e,t],e,"useCursorChange"),pi((function(){return q.tk.updateListener.of((function(e){e.selectionSet&&t.current({type:"update",hasFocus:e.view.hasFocus,position:el(e.state)})}))}),[t],e,"useCursorChange"),(0,b.useEffect)((function(){return function(){t.current({type:"unmount"})}}),[])}(n,(function(e){i(t,e)})),(0,b.useEffect)((function(){i(t,r?{type:"hidden"}:{type:"unhidden"})}),[r])}var ol=function(e){(0,ce.Z)(t,e);var n=(0,ue.Z)(t);function t(e){var r;return(0,le.Z)(this,t),(r=n.call(this)).type=e,r}return t.from=function(e){switch(e){case"yours":return this.yours;case"base":return this.base;case"middle":return this.middle;case"theirs":return this.theirs}},t.range=function(e,n,t){return this.from(e).range(n,t)},t}(j.uU);function al(e){switch(e){case"<":return"yours";case"|":return"base";case"=":return"middle";case">":return"theirs";default:return null}}function ll(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7;if(e.text.length<n)return null;var t=e.text[0],r=al(t);if(!r)return null;var i=t.repeat(n),o=e.text.slice(0,n);return o!==i||e.text.length>n&&" "!==e.text[n]?null:r}function cl(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length,i=[],o=t;o<=r;){var a=e.lineAt(o),l=ll(a,n);l&&i.push(ol.range(l,a.from,a.to)),o=a.to+1}return i}ol.yours=new ol("yours"),ol.base=new ol("base"),ol.middle=new ol("middle"),ol.theirs=new ol("theirs");var ul=["yours","base","middle","theirs"];function sl(e){Array.isArray(e)&&(e=j.Xs.of(e));var n=[],t=[];if(0===e.size)return{hunks:n,hanging:t};for(var r=e.iter();null!==r.value;){var i={},a={},l=[],c=!0,u=!1,s=void 0;try{for(var d,f=ul[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var p=d.value,h=r.value,v=r.from,m=r.to;if("base"!==p||h.type===p){if(h.type===p)i[p]={from:v,to:m},l.push({from:v,to:m,type:h.type});else{if("yours"===h.type)break;l.push({from:v,to:m,type:h.type})}if(r.next(),null===r.value)break}}}catch(I){u=!0,s=I}finally{try{c||null==f.return||f.return()}finally{if(u)throw s}}if(i.yours&&i.middle&&i.theirs){var g,y,Z;null!==(g=(nl=i).base)&&void 0!==g||(nl.base=null),null!==(y=(tl=a).base)&&void 0!==y||(tl.base=null);var b=null!==(Z=i.base)&&void 0!==Z?Z:i.middle,w=i.yours.to+1,x=b.from-1;if(a.yours=w<x?{from:w,to:x}:null,i.base){var k=i.base.to+1,C=i.middle.from-1;a.base=k<C?{from:k,to:C}:null}var S=i.middle.to+1,T=i.theirs.from-1;a.theirs=S<T?{from:S,to:T}:null;var E={from:i.yours.from,to:i.theirs.to,markers:i,content:a};n.push(E)}else{var R;(R=t).push.apply(R,(0,o.Z)(l))}}return{hunks:n,hanging:t}}var dl,fl=j.r$.define({combine:function(e){return e.length?e[0]:7}}),pl=j.QQ.define({create:function(e){var n=e.doc,t=e.facet(fl),r=j.Xs.of(cl(n,t)),i=sl(r);return{markers:r,hunks:i.hunks,hanging:i.hanging}},update:function(e,n){var t=n.newDoc,r=n.startState.facet(fl),i=n.state.facet(fl);if(r!==i){var o=j.Xs.of(cl(t,i)),a=sl(o);return{markers:o,hunks:a.hunks,hanging:a.hanging}}if(!n.docChanged)return e;var l=null,c=null,u=null,s=null;n.changes.iterChangedRanges((function(e,n,t,r){l=null===l?e:Math.min(l,e),c=null===c?n:Math.max(c,n),u=null===u?t:Math.min(u,t),s=null===s?r:Math.max(s,r)}));var d=e.markers;if(null!==l&&null!==c){var f=n.startState.doc.lineAt(l).from,p=n.startState.doc.lineAt(c).to;d=d.update({filter:function(){return!1},filterFrom:f,filterTo:p})}d=d.map(n.changes),null!==u&&null!==s&&(d=d.update({add:cl(t,i,u,s)}));var h=sl(d);return{markers:d,hunks:h.hunks,hanging:h.hanging}}}),hl=[q.tk.atomicRanges.from(pl,(function(e){return function(){return e.markers}})),j.yy.changeFilter.of((function(e){var n=e.startState.field(pl);if(!e.docChanged||0===n.markers.size)return!0;var t=e.startState.doc,r=[];return e.changes.iterChanges((function(e,i,o,a,l){var c=l.length,u=Math.max(t.lineAt(e).from-1,0),s=Math.min(t.lineAt(i).to+1,t.length);n.markers.between(u,s,(function(n,u){if(!(e<=n&&i>=u)&&(0===c||!(e===u&&"\n"===l.sliceString(0,1)||i===n&&"\n"===l.sliceString(c-1,c)))){if(o===a){if(i===u+1&&0===t.lineAt(i).length)return;if(e===n-1&&0===t.lineAt(e).length)return}r.push(n-1,u+1)}}))})),!(r.length>0)||r})),j.yy.transactionFilter.of((function(e){var n=e.docChanged?e.state.field(pl):e.startState.field(pl);if(0===n.markers.size)return e;var t=e.newSelection,r=!1,i=!1;do{var o=function(e){var o=t.ranges[e],a=o.from,l=o.to,c=a,u=l;if(n.markers.between(a,l,(function(e,n){var t=(e+n)/2;a>e&&a<n&&(c=a<t?e:n),l>e&&l<n&&(u=l<t?e:n)})),c!==a||u!==l){var s,d=o.anchor<o.head?c:u,f=o.anchor<o.head?u:c,p=o.goalColumn,h=null!==(s=o.bidiLevel)&&void 0!==s?s:void 0,v=j.jT.range(d,f,p,h);return t=t.replaceRange(v,e),i=!0,r=!0,"break"}};i=!1;for(var a=0;a<t.ranges.length;a++){if("break"===o(a))break}}while(i);return r?[e,{selection:t,sequential:!0}]:e}))],vl="cm-git-conflict-marker-yours",ml="cm-git-conflict-marker-base",gl="cm-git-conflict-marker-middle",yl="cm-git-conflict-marker-theirs",Zl="cm-git-conflict-marker-hanging",bl="cm-git-conflict-content-yours",wl="cm-git-conflict-content-base",xl="cm-git-conflict-content-theirs";function kl(e){var n=e.background,t=e.color,r=e.noBorder,i=void 0!==r&&r,o={color:t,backgroundColor:n,backgroundClip:"padding-box",paddingTop:k.TV.space4,paddingBottom:k.TV.space4,fontWeight:k.TV.fontWeightBold};return i||(o.borderLeft="4px solid rgba(0, 150, 255, 0.1)",o.paddingLeft="2px"),o}function Cl(e){return{backgroundColor:e.background,backgroundClip:"padding-box",borderLeft:"4px solid rgba(0, 150, 255, 0.1)",paddingLeft:"2px"}}var Sl,Tl=q.tk.theme((dl={},(0,Cn.Z)(dl,".".concat(vl),kl({background:"rgba(0, 150, 255, 0.1)",color:k.TV.blueStrongest,noBorder:!0})),(0,Cn.Z)(dl,".".concat(gl),kl({background:"rgba(255, 0, 0, 0.1)",color:k.TV.redStrongest})),(0,Cn.Z)(dl,".".concat(ml),kl({background:"rgba(255, 165, 0, 0.1)",color:k.TV.orangeStrongest})),(0,Cn.Z)(dl,".".concat(yl),kl({background:"rgba(0, 150, 255, 0.1)",color:k.TV.blueStrongest,noBorder:!0})),(0,Cn.Z)(dl,".".concat(Zl),kl({background:"rgba(100, 150, 255, 0.1)",color:k.TV.blueStrongest,noBorder:!0})),(0,Cn.Z)(dl,".".concat(bl),Cl({background:"rgba(0, 255, 0, 0.1)"})),(0,Cn.Z)(dl,".".concat(xl),Cl({background:"rgba(255, 0, 0, 0.1)"})),(0,Cn.Z)(dl,".".concat(wl),Cl({background:"rgba(255, 165, 0, 0.1)"})),dl)),El={yours:{marker:q.p.line({class:vl}),content:q.p.line({class:bl})},base:{marker:q.p.line({class:ml}),content:q.p.line({class:wl})},middle:{marker:q.p.line({class:gl})},theirs:{marker:q.p.line({class:yl}),content:q.p.line({class:xl})},hanging:{marker:q.p.line({class:Zl})}},Rl=function(){function e(n){(0,le.Z)(this,e),this.builder=new j.f_,this.doc=n}var n=e.prototype;return n.add=function(e,n){var t=this.doc.lineAt(e.from);if(t.to>=e.to)this.builder.add(t.from,t.from,n);else for(var r=t.from;r<=e.to;)this.builder.add(r,r,n),r=this.doc.lineAt(r).to+1},n.finish=function(){return this.builder.finish()},e}(),Il=q.tk.decorations.from(pl,(function(e){return function(n){var t=n.state.doc,r=new Rl(t),i=!0,o=!1,a=void 0;try{for(var l,c=e.hunks[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value;n.viewport.from>u.to||n.viewport.to<u.from||(r.add(u.markers.yours,El.yours.marker),u.content.yours&&r.add(u.content.yours,El.yours.content),u.markers.base&&r.add(u.markers.base,El.base.marker),u.content.base&&r.add(u.content.base,El.base.content),r.add(u.markers.middle,El.middle.marker),u.content.theirs&&r.add(u.content.theirs,El.theirs.content),r.add(u.markers.theirs,El.theirs.marker))}}catch(s){o=!0,a=s}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return r.finish()}})),Gl=q.tk.decorations.from(pl,(function(e){return function(){var n=new j.f_,t=!0,r=!1,i=void 0;try{for(var o,a=e.hanging[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;n.add(l.from,l.from,El.hanging.marker)}}catch(c){r=!0,i=c}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n.finish()}})),Dl=[j.Wl.lowest(Tl),Il,Gl],_l=[pl,hl,Dl],Pl=t(92111),Bl=function(){function e(n,t,r,i,o,a){(0,le.Z)(this,e),this.original=n,this.current=t,this.chunks=r,this.desc=i,this.pending=o,this.ranges=a}var n=e.prototype;return n.hasChanges=function(){return this.ranges.length>0},n.update=function(n,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.original,o=this.chunks,a=this.desc,l=this.pending,c=this.ranges,u=this.pending?this.pending.length:this.current.length,s=Math.abs(u-n.length);if(s>=250||r){var d=(0,Pl.Gj)(a,l,t),f=d.pending;o=(0,Pl.U_)(i,n,{chunks:o,changesB:f}),a=(0,Pl.fu)(o,i.length),l=null,c=(0,Pl.Hu)(a)}else{var p;l=(p=(0,Pl.Gj)(a,l,t)).pending,a=p.desc,c=(0,Pl.Hu)(a)}return l&&n.eq(i)&&(o=[],a=j.as.empty(i.length),l=null,c=[]),new e(i,n,o,a,l,c)},n.isAccurate=function(){return null===this.pending},n.getLineChangeType=function(e){var n=this.current.line(e);return 0===this.original.length&&this.current.length>0?Pl.dQ.COVERED:(0,Pl.dx)(n,Pl.MF.B,this.ranges)},n.iterRanges=function(){return(0,V.__generator)(this,(function(e){switch(e.label){case 0:return[5,(0,V.__values)(this.ranges)];case 1:return e.sent(),[2]}}))},e.create=function(n,t){var r=(0,Pl.U_)(n,t),i=(0,Pl.fu)(r,n.length);return new e(n,t,r,i,null,(0,Pl.Hu)(i))},e}(),Al=j.r$.define({combine:function(e){return null!==(Sl=e.filter(Boolean)[0])&&void 0!==Sl?Sl:null}});var Ul,Ll,Xl,Nl=j.QQ.define({create:function(){return null},update:function(e,n){var t=n.state.facet(Al);return t?(e&&e.original.eq(t)?n.docChanged&&(e=e.update(n.newDoc,n.changes,function(e){return!(e.isUserEvent("input.type")||e.isUserEvent("delete.forward")||e.isUserEvent("delete.backward"))}(n))):e=Bl.create(t,n.newDoc),e):null}}),Ml=k.TV.space2,Fl="cm-diff-gutter",Ol="".concat(Fl,"-element"),Wl="".concat(Ol,"-insertion"),Hl="".concat(Ol,"-modified"),Vl="".concat(Ol,"-deleted"),zl="".concat(Ol,"-file-added"),jl=k.TV.greenDefault,ql=k.TV.greenStronger,$l=k.TV.blueDefault,Yl=k.TV.blueStronger,Kl=k.TV.redDefault,Ql=k.TV.redStronger,Jl=k.TV.greenDimmer,ec=k.TV.greenDefault,nc=q.tk.theme((Ul={},(0,Cn.Z)(Ul,".".concat(Ol),{width:Ml}),(0,Cn.Z)(Ul,".".concat(Wl),{backgroundColor:jl,"&.cm-activeLineGutter":{backgroundColor:ql}}),(0,Cn.Z)(Ul,".".concat(Hl),{backgroundColor:$l,"&.cm-activeLineGutter":{backgroundColor:Yl}}),(0,Cn.Z)(Ul,".".concat(Vl),{backgroundColor:Kl,"&.cm-activeLineGutter":{backgroundColor:Ql}}),(0,Cn.Z)(Ul,".".concat(zl),{backgroundColor:Jl,"&.cm-activeLineGutter":{backgroundColor:ec}}),Ul)),tc=new(function(e){(0,ce.Z)(t,e);var n=(0,ue.Z)(t);function t(){var e;return(0,le.Z)(this,t),(e=n.apply(this,arguments)).elementClass="".concat(Ol," ").concat(Wl),e}return t}(q.SJ)),rc=new(function(e){(0,ce.Z)(t,e);var n=(0,ue.Z)(t);function t(){var e;return(0,le.Z)(this,t),(e=n.apply(this,arguments)).elementClass="".concat(Ol," ").concat(Vl),e}return t}(q.SJ)),ic=new(function(e){(0,ce.Z)(t,e);var n=(0,ue.Z)(t);function t(){var e;return(0,le.Z)(this,t),(e=n.apply(this,arguments)).elementClass="".concat(Ol," ").concat(Hl),e}return t}(q.SJ)),oc=new(function(e){(0,ce.Z)(t,e);var n=(0,ue.Z)(t);function t(){var e;return(0,le.Z)(this,t),(e=n.apply(this,arguments)).elementClass="".concat(Ol," ").concat(zl),e}return t}(q.SJ)),ac=new(function(e){(0,ce.Z)(t,e);var n=(0,ue.Z)(t);function t(){return(0,le.Z)(this,t),n.apply(this,arguments)}return t}(q.SJ)),lc=(0,q.v5)({class:Fl,renderEmptyElements:!0,lineMarker:function(e,n){var t=e.state.field(Nl,!1);if(!t||!t.hasChanges())return null;if(0===t.original.length)return oc;var r=e.state.doc.lineAt(n.from);switch(t.getLineChangeType(r.number)){case Pl.dQ.COVERED:return tc;case Pl.dQ.MODIFIED:return ic;default:return null}},initialSpacer:function(e){return e.state.field(Nl,!1)?oc:ac},updateSpacer:function(e,n){var t=n.state.field(Nl,!1)?oc:ac;return e===t?e:t}}),cc=j.r$.define({enables:function(e){return[Al.computeN([e],(function(n){return n.facet(e)})),nc,Nl,j.Wl.highest(lc)]}}),uc=t(57600),sc=function(){function e(n,t,r,i){(0,le.Z)(this,e),this.a=n,this.b=t,this.chunks=r,this.map=i}var n=e.prototype;return n.line=function(e,n){return n===Pl.MF.A?this.a.line(e):this.b.line(e)},n.bounds=function(e){if(0===this.chunks.length)return null;var n=(0,Pl.Cf)(this.chunks[0],e),t=(0,Pl.Cf)(this.chunks[this.chunks.length-1],e),r=e===Pl.MF.A?this.a.length:this.b.length,i=Math.min(t.to,r);return{from:n.from,to:i}},n.hasChanges=function(){return this.chunks.length>0},n.updateA=function(n,t){var r=this.b,i=(0,Pl.U_)(n,r,{chunks:this.chunks,changesA:t});return new e(n,r,i,(0,Pl.XW)(n,r,i))},n.updateB=function(n,t){var r=this.a,i=(0,Pl.U_)(r,n,{chunks:this.chunks,changesB:t});return new e(r,n,i,(0,Pl.XW)(r,n,i))},n.getContainingChunk=function(e,n){for(var t=0,r=this.chunks.length-1;t<=r;){var i=t+r>>>1,o=this.chunks[i],a=(0,Pl.Cf)(o,n);if(e>=a.from&&e<=a.to)return o;e<a.from?r=i-1:e>a.to&&(t=i+1)}return null},n.getCorrespondingLine=function(e,n){var t=this.map.get(n===Pl.MF.A?-e:e);return t?this.line(t,(0,Pl.rN)(n)):null},n.getLineChangeType=function(e,n){if(this.map.get(n===Pl.MF.A?-e:e))return Pl.dQ.UNCHANGED;var t=this.line(e,n),r=this.getContainingChunk(t.from,n);return r?(0,Pl.dx)(t,n,r.changes,r):Pl.dQ.UNCHANGED},n.iterLines=function(e){var n,t,r,i;return(0,V.__generator)(this,(function(o){switch(o.label){case 0:n=e===Pl.MF.A?this.a:this.b,t=1,o.label=1;case 1:return t<=n.lines?(r=n.line(t),i=this.getCorrespondingLine(r.number,e),[4,{line:r,correspondingLine:i}]):[3,4];case 2:o.sent(),o.label=3;case 3:return t++,[3,1];case 4:return[2]}}))},n.iterRanges=function(){var e,n,t,r,i;return(0,V.__generator)(this,(function(o){switch(o.label){case 0:e=0,o.label=1;case 1:if(!(e<this.chunks.length))return[3,6];n=this.chunks[e].fromA,t=this.chunks[e].fromB,r=0,o.label=2;case 2:return r<this.chunks[e].changes.length?(i=this.chunks[e].changes[r],[4,{fromA:n+i.fromA,toA:n+i.toA,fromB:t+i.fromB,toB:t+i.toB}]):[3,5];case 3:o.sent(),o.label=4;case 4:return r++,[3,2];case 5:return e++,[3,1];case 6:return[2]}}))},e.create=function(n,t){var r=(0,Pl.U_)(n,t);return new e(n,t,r,(0,Pl.XW)(n,t,r))},e}(),dc=t(78194),fc=j.r$.define({combine:function(e){return null!==(Ll=e.filter(Boolean)[0])&&void 0!==Ll?Ll:null}}),pc=j.QQ.define({create:function(){return{diff:null,tree:uc.mp.empty}},update:function(e,n){var t,r,i=n.state.facet(fc),o=null===(t=n.state.facet(Rn.dK))||void 0===t?void 0:t.parser;if(!i)return null===e.diff&&e.tree===uc.mp.empty?e:{diff:null,tree:uc.mp.empty};var a=e.diff,l=e.tree;return a&&a.a.eq(i)?n.docChanged&&(a=a.updateB(n.newDoc,n.changes)):(a=sc.create(i,n.newDoc),l=uc.mp.empty),(null===(r=n.startState.facet(Rn.dK))||void 0===r?void 0:r.parser)!==o&&(l=uc.mp.empty),o&&l.length!==a.a.length?{diff:a,tree:l=(0,dc.p)({parser:o,text:a.a,maxTime:16,base:l})}:e.diff===a&&e.tree===l?e:{diff:a,tree:l}}}),hc="cm-inline-diff-line-deletion-base",vc="cm-inline-diff-line-deletion",mc="cm-inline-diff-text-deletion",gc="cm-inline-diff-line-insertion-base",yc="cm-inline-diff-line-insertion",Zc="cm-inline-diff-text-insertion",bc="rgba(180, 0, 0, 0.075)",wc="rgba(180, 0, 0, 0.125)",xc="rgba(0, 180, 0, 0.075)",kc="rgba(0, 180, 0, 0.125)",Cc="cm-inline-diff-marker",Sc="cm-inline-diff-marker-left",Tc="cm-inline-diff-marker-right";function Ec(e,n){var t="linear-gradient(to right, ".concat(e,", ").concat(e,")");return n&&(t+=", linear-gradient(to right, ".concat(n,", ").concat(n,")")),t}var Rc,Ic=q.tk.theme((Xl={},(0,Cn.Z)(Xl,".".concat(hc,", .").concat(vc),{cursor:"text","&.cm-line ::selection":{backgroundColor:"".concat(k.TV.accentPrimaryDimmest," !important")}}),(0,Cn.Z)(Xl,".".concat(hc),{background:Ec(bc)}),(0,Cn.Z)(Xl,".".concat(vc),{background:Ec(bc,wc)}),(0,Cn.Z)(Xl,".".concat(gc),{background:Ec(xc)}),(0,Cn.Z)(Xl,".".concat(yc),{background:Ec(xc,kc)}),(0,Cn.Z)(Xl,".".concat(Zc),{display:"inline-block",background:kc,"&:first-of-type":{backgroundClip:"padding-box",borderLeft:"3px solid ".concat(kc),paddingLeft:"3px",marginLeft:"-6px"}}),(0,Cn.Z)(Xl,".".concat(mc),{display:"inline-block",background:wc,"&:first-of-type":{backgroundClip:"padding-box",borderLeft:"3px solid ".concat(wc),paddingLeft:"3px",marginLeft:"-6px"}}),(0,Cn.Z)(Xl,".".concat(Cc),{display:"flex",width:"100%",justifyContent:"space-between"}),(0,Cn.Z)(Xl,".".concat(Sc),{width:"calc(50% - 1ch)",textAlign:"right"}),(0,Cn.Z)(Xl,".".concat(Tc),{width:"50%",textAlign:"right"}),Xl)),Gc=t(18599),Dc=t(3341),_c=t.n(Dc),Pc=function(e){(0,ce.Z)(t,e);var n=(0,ue.Z)(t);function t(e,r,i){var o;return(0,le.Z)(this,t),(o=n.call(this)).line=e,o.index=r,o.changed=i,o}var r=t.prototype;return r.toDOM=function(){var e=this,n=document.createElement("div");if(n.className=this.changed?"cm-line ".concat(hc):"cm-line ".concat(vc),!this.changed||!this.changed.length){var t=!0,r=!1,i=void 0;try{for(var o,a=this.line[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value,c=l.text,u=l.tags,s=document.createElement("span");s.textContent=c||"\xa0",s.className=null!==u&&void 0!==u?u:"",n.appendChild(s)}}catch(C){r=!0,i=C}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n}for(var d=0,f=0,p=null,h=null,v=function(n,t){if(!p)throw new Error("range is null");var r=e.line[f],i=r.text,o=r.tags,a=i.slice(d-p.from,t-p.from),l=document.createElement("span");l.textContent=a||"\xa0",l.className=null!==o&&void 0!==o?o:"",n.appendChild(l),d+=a.length};f<this.line.length;){if(!p){var m=this.line[f].text;p={from:d,to:d+m.length}}if(!h){var g=!0,y=!1,Z=void 0;try{for(var b,w=this.changed[Symbol.iterator]();!(g=(b=w.next()).done);g=!0){var x=b.value;if(!(x.from>=p.to||x.to<=d)){var k=document.createElement("span");k.className=mc,h={from:x.from,to:x.to,dom:k},d<h.from&&v(n,h.from),n.appendChild(k);break}}}catch(C){y=!0,Z=C}finally{try{g||null==w.return||w.return()}finally{if(y)throw Z}}}h?(d<h.to&&v(h.dom,h.to),d>=h.to&&(h=null)):v(n,p.to),d>=p.to&&(p=null,f++)}return n},r.eq=function(e){var n,r;return(0,mn.Z)(e,t)&&this.index===e.index&&this.line.length===e.line.length&&(null===(n=this.changed)||void 0===n?void 0:n.length)===(null===(r=e.changed)||void 0===r?void 0:r.length)&&_c()(this.line,e.line)&&_c()(this.changed,e.changed)},r.ignoreEvent=function(e){return e.stopImmediatePropagation(),!0},(0,In.Z)(t,[{key:"estimatedHeight",get:function(){return 21}}]),t}(q.l9),Bc=q.p.line({class:gc}),Ac=q.p.line({class:yc}),Uc=q.p.mark({class:Zc}),Lc=q.tk.decorations.compute([pc],(function(e){var n=function(e,n){if(r.getLineChangeType(e.number,Pl.MF.B)===Pl.dQ.COVERED)o.push(Ac.range(e.from));else{o.push(Bc.range(e.from));var t=!0,i=!1,a=void 0;try{for(var l,c=(0,Pl.Po)(e,n,Pl.MF.B,!1)[Symbol.iterator]();!(t=(l=c.next()).done);t=!0){var u=l.value;o.push(Uc.range(u.from,u.to))}}catch(s){i=!0,a=s}finally{try{t||null==c.return||c.return()}finally{if(i)throw a}}}},t=e.field(pc,!1);if(!t||!t.diff)return q.p.none;var r=t.diff,i=t.tree,o=[],a=!0,l=!1,c=void 0;try{for(var u,s=r.chunks[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var d=u.value;if(d.fromB!==d.endB)for(var f=r.b.lineAt(d.fromB),p=r.b.lineAt(d.endB),h=f.number;h<=p.number;h++)n(r.b.line(h),d);else d.fromA===d.endA&&n(r.b.lineAt(d.fromB),d);if(d.fromA!==d.toA)for(var v=r.a.lineAt(d.fromA),m=(0,Gc.CT)(i,r.a,e,d.fromA,d.endA),g=0;g<m.length;g++){var y=m[g],Z=r.a.line(v.number+g),b=r.getLineChangeType(Z.number,Pl.MF.A)===Pl.dQ.COVERED?null:(0,Pl.Po)(Z,d,Pl.MF.A,!0),w=q.p.widget({widget:new Pc(y,Z.number,b),block:!0,side:-(m.length-g)});o.push(w.range(d.fromB))}}}catch(x){l=!0,c=x}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}return q.p.set(o,!0)})),Xc=(0,q.v5)({class:Fl,renderEmptyElements:!0,lineMarker:function(e,n){var t=e.state.field(pc,!1);if(!t||!t.diff||!t.diff.hasChanges())return null;if(0===t.diff.a.length)return tc;var r=e.state.doc.lineAt(n.from);switch(t.diff.getLineChangeType(r.number,Pl.MF.B)){case Pl.dQ.COVERED:case Pl.dQ.MODIFIED:return tc;default:return null}},widgetMarker:function(e,n){if(!(0,mn.Z)(n,Pc))return null;var t=e.state.field(pc,!1);if(!t||!t.diff||!t.diff.hasChanges())return null;switch(t.diff.getLineChangeType(n.index,Pl.MF.A)){case Pl.dQ.COVERED:case Pl.dQ.MODIFIED:return rc;default:return null}},initialSpacer:function(e){var n=e.state.field(pc,!1);return(null===n||void 0===n?void 0:n.diff)?tc:ac},updateSpacer:function(e,n){var t=n.state.field(pc,!1),r=(null===t||void 0===t?void 0:t.diff)?tc:ac;return e===r?e:r}}),Nc=t(96302),Mc=function(e){(0,ce.Z)(t,e);var n=(0,ue.Z)(t);function t(e,r){var i;return(0,le.Z)(this,t),(i=n.call(this)).left=e,i.right=r,i}var r=t.prototype;return r.toDOM=function(e){var n=e.state.doc.lines.toString().length,t=document.createElement("div"),r=document.createElement("span"),i=document.createElement("span");return t.className=Cc,r.className=Sc,i.className=Tc,t.style.width="".concat(2*n+1,"ch"),null!==this.left&&(r.textContent=this.left.toString()),null!==this.right&&(i.textContent=this.right.toString()),t.appendChild(r),t.appendChild(i),t},r.eq=function(e){return(0,mn.Z)(e,t)&&this.left===e.left&&this.right===e.right},t}(q.SJ),Fc=Nc.X4.of((function(e,n){if((0,mn.Z)(n,Pc))return new Mc(n.index,null)})),Oc=Nc.gy.of((function(e,n){var t=e.state.field(pc,!1);if(t&&t.diff&&t.diff.hasChanges()){var r,i=e.state.doc.lineAt(n.from),o=t.diff.getCorrespondingLine(i.number,Pl.MF.B);return new Mc(null!==(r=null===o||void 0===o?void 0:o.number)&&void 0!==r?r:null,i.number)}})),Wc=[Oc,Fc],Hc=j.r$.define({enables:function(e){return[fc.computeN([e],(function(n){return n.facet(e)})),nc,pc,Ic,Lc,Wc,Xc]}});!function(e){e.GUTTER_DIFF="GUTTER_DIFF",e.INLINE_DIFF="INLINE_DIFF"}(Rc||(Rc={}));var Vc=j.Py.define(),zc=j.Py.define(),jc=j.QQ.define({create:function(){return{head:null,mode:Rc.GUTTER_DIFF}},update:function(e,n){var t=e.head,r=e.mode,i=!0,o=!1,a=void 0;try{for(var l,c=n.effects[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value;u.is(Vc)?t=u.value:u.is(zc)&&(r=u.value)}}catch(s){o=!0,a=s}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return t!==e.head||r!==e.mode?{head:t,mode:r}:e},provide:function(e){return[cc.from(e,(function(e){return e.mode===Rc.GUTTER_DIFF?e.head:null})),Hc.from(e,(function(e){return e.mode===Rc.INLINE_DIFF?e.head:null}))]}}),qc=function(){function e(n,t,r){var i=this;(0,le.Z)(this,e),this.view=n,this.git=t,this.path=r,this.disposed=!1,this.dispose=t.onRefresh((function(){return i.fetchThenUpdateState()})),this.fetchThenUpdateState()}var n=e.prototype;return n.fetchThenUpdateState=function(){var e=this;return(0,H.Z)((function(){var n,t,r,i,o;return(0,V.__generator)(this,(function(a){switch(a.label){case 0:return[4,e.git.getFileContents({path:e.path,revision:"HEAD"})];case 1:return n=a.sent(),e.disposed?[2]:(t=e.view.state.field(jc,!1))?(i=n.error?null:null!==(r=n.content)&&void 0!==r?r:"",(!(o=null===i?null:e.view.state.toText(i))!==!t.head||o&&t.head&&!o.eq(t.head))&&e.view.dispatch({effects:Vc.of(o)}),[2]):[2]}}))}))()},n.destroy=function(){this.dispose(),this.disposed=!0},e}();function $c(e){var n=e.view,t=e.filePath,r=void 0===t?null:t,i=e.disableDiff,o=void 0!==i&&i,a=e.disableConflicts,l=void 0!==a&&a,c=(0,kt.P5)({controlName:"flag-git-gud",logFlagToAnalytics:!1}),u=(0,kt.P5)({controlName:"flag-git-gud-gutter",logFlagToAnalytics:!1}),s=(0,kt.P5)({controlName:"flag-editor-git-conflict-markers",logFlagToAnalytics:!1}),d=(0,ne.Z)().git;pi((function(){var e=[];return o||e.push(function(e,n){if(!n)return[];var t=q.lg.define((function(t){return new qc(t,e,n)}));return[jc,t]}(d,r)),l||e.push(_l),0===e.length?null:e}),[l=!c||!s||l,o=!c||!u||o,r,d],n,"useGitEditorFeatures")}var Yc,Kc=t(42082),Qc=t(13716),Jc=t(34227),eu=t(64804),nu=t(67850),tu="cm-transform-diff-line-deletion-base",ru="cm-transform-diff-line-deletion",iu="cm-transform-diff-text-deletion",ou="cm-transform-diff-line-insertion-base",au="cm-transform-diff-line-insertion",lu="cm-transform-diff-text-insertion",cu="cm-transform-diff-number-marker",uu="rgba(180, 0, 0, 0.1)",su="rgba(180, 0, 0, 0.125)",du="rgba(0, 180, 0, 0.1)",fu="rgba(0, 180, 0, 0.125)";function pu(e,n){var t="linear-gradient(to right, ".concat(e,", ").concat(e,")");return n&&(t+=", linear-gradient(to right, ".concat(n,", ").concat(n,")")),t}var hu,vu,mu=q.tk.theme((Yc={},(0,Cn.Z)(Yc,".".concat(ou,", .").concat(au),{cursor:"text","&.cm-line ::selection":{backgroundColor:"".concat(k.TV.accentPrimaryDimmest," !important")}}),(0,Cn.Z)(Yc,".".concat(tu),{background:pu(uu),backgroundClip:"content-box"}),(0,Cn.Z)(Yc,".".concat(ru),{background:pu(uu,su),backgroundClip:"content-box"}),(0,Cn.Z)(Yc,".".concat(ou),{background:pu(du),backgroundClip:"content-box"}),(0,Cn.Z)(Yc,".".concat(au),{background:pu(du,fu),backgroundClip:"content-box"}),(0,Cn.Z)(Yc,".".concat(lu),{display:"inline-block",background:fu}),(0,Cn.Z)(Yc,".".concat(iu),{display:"inline-block",background:su}),(0,Cn.Z)(Yc,".".concat(cu),{opacity:.5}),Yc)),gu=j.r$.define({combine:function(e){return null!==(hu=e.filter(Boolean)[0])&&void 0!==hu?hu:null}}),yu=j.QQ.define({create:function(){return{diff:null,tree:uc.mp.empty}},update:function(e,n){var t,r,i=n.state.facet(gu),o=null===(t=n.state.facet(Rn.dK))||void 0===t?void 0:t.parser;if(!i)return null===e.diff&&e.tree===uc.mp.empty?e:{diff:null,tree:uc.mp.empty};var a=e.diff,l=e.tree;return a&&a.b.eq(i)?n.docChanged&&(a=a.updateA(n.newDoc,n.changes)):(a=sc.create(n.newDoc,i),l=uc.mp.empty),(null===(r=n.startState.facet(Rn.dK))||void 0===r?void 0:r.parser)!==o&&(l=uc.mp.empty),o&&l.length!==a.b.length?{diff:a,tree:l=(0,dc.p)({parser:o,text:a.b,maxTime:16,base:l})}:e.diff===a&&e.tree===l?e:{diff:a,tree:l}}}),Zu=function(e){(0,ce.Z)(t,e);var n=(0,ue.Z)(t);function t(e,r,i){var o;return(0,le.Z)(this,t),(o=n.call(this)).line=e,o.index=r,o.changed=i,o}var r=t.prototype;return r.toDOM=function(){var e=this,n=document.createElement("div");if(n.className=this.changed?"cm-line ".concat(ou):"cm-line ".concat(au),!this.changed||!this.changed.length){var t=!0,r=!1,i=void 0;try{for(var o,a=this.line[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value,c=l.text,u=l.tags,s=document.createElement("span");s.textContent=c||"\xa0",s.className=null!==u&&void 0!==u?u:"",n.appendChild(s)}}catch(C){r=!0,i=C}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n}for(var d=0,f=0,p=null,h=null,v=function(n,t){if(!p)throw new Error("range is null");var r=e.line[f],i=r.text,o=r.tags,a=i.slice(d-p.from,t-p.from),l=document.createElement("span");l.textContent=a||"\xa0",l.className=null!==o&&void 0!==o?o:"",n.appendChild(l),d+=a.length};f<this.line.length;){if(!p){var m=this.line[f].text;p={from:d,to:d+m.length}}if(!h){var g=!0,y=!1,Z=void 0;try{for(var b,w=this.changed[Symbol.iterator]();!(g=(b=w.next()).done);g=!0){var x=b.value;if(!(x.from>=p.to||x.to<=d)){var k=document.createElement("span");k.className=lu,h={from:x.from,to:x.to,dom:k},d<h.from&&v(n,h.from),n.appendChild(k);break}}}catch(C){y=!0,Z=C}finally{try{g||null==w.return||w.return()}finally{if(y)throw Z}}}h?(d<h.to&&v(h.dom,h.to),d>=h.to&&(h=null)):v(n,p.to),d>=p.to&&(p=null,f++)}return n},r.eq=function(e){var n,r;return(0,mn.Z)(e,t)&&this.index===e.index&&this.line.length===e.line.length&&(null===(n=this.changed)||void 0===n?void 0:n.length)===(null===(r=e.changed)||void 0===r?void 0:r.length)&&_c()(this.line,e.line)&&_c()(this.changed,e.changed)},r.ignoreEvent=function(e){return e.stopImmediatePropagation(),!0},(0,In.Z)(t,[{key:"estimatedHeight",get:function(){return 21}}]),t}(q.l9),bu=q.p.line({class:tu}),wu=q.p.line({class:ru}),xu=q.p.mark({class:iu}),ku=q.tk.decorations.compute([yu],(function(e){var n=function(e,n){if(r.getLineChangeType(e.number,Pl.MF.A)===Pl.dQ.COVERED)o.push(wu.range(e.from));else{o.push(bu.range(e.from));var t=!0,i=!1,a=void 0;try{for(var l,c=(0,Pl.Po)(e,n,Pl.MF.A,!1)[Symbol.iterator]();!(t=(l=c.next()).done);t=!0){var u=l.value;o.push(xu.range(u.from,u.to))}}catch(s){i=!0,a=s}finally{try{t||null==c.return||c.return()}finally{if(i)throw a}}}},t=e.field(yu,!1);if(!t||!t.diff)return q.p.none;var r=t.diff,i=t.tree,o=[],a=!0,l=!1,c=void 0;try{for(var u,s=r.chunks[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var d=u.value;if(d.fromA!==d.endA)for(var f=r.a.lineAt(d.fromA),p=r.a.lineAt(d.endA),h=f.number;h<=p.number;h++)n(r.a.line(h),d);else d.fromB===d.endB&&n(r.a.lineAt(d.fromA),d);if(d.fromB!==d.toB)for(var v=r.b.lineAt(d.fromB),m=(0,Gc.CT)(i,r.b,e,d.fromB,d.endB),g=0;g<m.length;g++){var y=m[g],Z=r.b.line(v.number+g),b=r.getLineChangeType(Z.number,Pl.MF.B)===Pl.dQ.COVERED?null:(0,Pl.Po)(Z,d,Pl.MF.B,!0),w=q.p.widget({widget:new Zu(y,Z.number,b),block:!0,side:g+1}),x=Math.min(d.endA,r.a.length);o.push(w.range(x))}}}catch(k){l=!0,c=k}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}return q.p.set(o,!0)})),Cu=function(e){(0,ce.Z)(t,e);var n=(0,ue.Z)(t);function t(e){var r;return(0,le.Z)(this,t),(r=n.call(this)).index=e,r}var r=t.prototype;return r.toDOM=function(){var e=document.createElement("span");return e.className=cu,e.textContent=String(this.index),e},r.eq=function(e){return this.index===e.index},t}(q.SJ),Su=Nc.X4.of((function(e,n){if((0,mn.Z)(n,Zu))return new Cu(n.index)})),Tu=j.r$.define({enables:function(e){return[gu.computeN([e],(function(n){return n.facet(e)})),yu,mu,ku,Su]}}),Eu=t(12470),Ru=t(42237),Iu=(0,st.X)({headerContainer:[k.l0.backgroundColor.backgroundRoot,k.l0.fontSize(14),{borderBottom:"1px solid ".concat(k.TV.backgroundHigher),'[role="tab"][aria-selected="true"]':{borderBottom:"1px solid ".concat(k.TV.accentPrimaryDefault)}}]});!function(e){e[e.Compare=0]="Compare",e[e.Original=1]="Original",e[e.Suggestion=2]="Suggestion"}(vu||(vu={}));var Gu=new ut.Jf((function(e){var n=e.selection,t=e.onSelected,r=(0,b.useState)(null!==n&&void 0!==n?n:0),i=r[0],o=r[1];return(0,a.tZ)(x.G,{css:Iu.headerContainer,children:(0,a.tZ)(Eu.mQ,{selectedIndex:i,onSelectionChange:function(e){o(e),t(e)},children:(0,a.BX)(Eu.td,{withDividers:!1,withUnderline:!1,children:[(0,a.tZ)(Eu.OK,{iconLeft:(0,a.tZ)(Ru.Diff,{}),children:"Compare"}),(0,a.tZ)(Eu.OK,{iconLeft:(0,a.tZ)(Ru.BookOpen,{}),children:"Original"}),(0,a.tZ)(Eu.OK,{iconLeft:(0,a.tZ)(Ru.Ghostwriter,{}),children:"Suggestion"})]})})})})),Du=j.Py.define(),_u=j.QQ.define({create:function(){return null},update:function(e,n){var t=!0,r=!1,i=void 0;try{for(var o,a=n.effects[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;if(l.is(Du))e=l.value;else if(l.is(Rr.Q))e=null;else if(l.is(Rr.h)){var c=n.state.field(Pr);if("transformCode"===(null===c||void 0===c?void 0:c.type)&&l.value){var u=n.startState.field(Br),s=l.value;!u&&s&&(e=vu.Compare)}}}}catch(d){r=!0,i=d}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return e},provide:function(e){return q.mH.from(e,(function(e){return null!=e?function(e){return{top:!0,dom:Gu.create({selection:e.state.field(_u),onSelected:function(n){e.dispatch({effects:Du.of(n)})}})}}:null}))}}),Pu=t(53265),Bu=j.QQ.define({create:function(){return null},update:function(e,n){if(!(0,Pu.a)(n,"doc",Pr,Rt.Yp,_u,Br))return e;var t=n.state.field(Pr),r=n.state.facet(Rt.Yp),i=n.state.field(_u);if(!t||!r||t.codeReference.filePath!==r||i!==vu.Suggestion)return null;var o,a=t.codeReference.range.indexFrom,l=t.codeReference.range.indexTo,c=n.state.doc.slice(a,l),u=null!==(o=n.state.field(Br))&&void 0!==o?o:"",s=c.lines,d=a,f=u.split(n.state.lineBreak).length-s;return e&&e.after===d&&e.offset===f?e:{after:d,offset:f}}}),Au=Nc.gy.of((function(e,n){var t=e.state.doc.lineAt(n.from),r=e.state.field(Bu);if(r&&!(t.from<=r.after))return new Nc.un(t.number+r.offset)})),Uu=Nc.X4.of((function(e,n){if((0,mn.Z)(n,Lu))return new Nc.un(n.index)})),Lu=function(e){(0,ce.Z)(t,e);var n=(0,ue.Z)(t);function t(e,r,i){var o;return(0,le.Z)(this,t),(o=n.call(this)).line=e,o.block=r,o.index=i,o}var r=t.prototype;return r.toDOM=function(){var e=document.createElement(this.block?"div":"span");e.className=this.block?"cm-line":"";var n=!0,t=!1,r=void 0;try{for(var i,o=this.line[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value,l=a.text,c=a.tags,u=document.createElement("span");u.textContent=l||"\xa0",c&&(u.className=c),e.appendChild(u)}}catch(s){t=!0,r=s}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return e},r.eq=function(e){return this.index===e.index&&(0,Gc.gj)(this.line,e.line)},r.ignoreEvent=function(){return!1},(0,In.Z)(t,[{key:"estimatedHeight",get:function(){return 21}}]),t}(q.l9),Xu=q.tk.decorations.compute([Rn.dK,Pr,Br,_u,yu,Rt.Yp,j.yy.lineSeparator],(function(e){var n,t=e.field(Pr),r=e.facet(Rt.Yp),i=e.field(_u);if(!t||"transformCode"!==t.type||!r||t.codeReference.filePath!==r||i!==vu.Suggestion)return q.p.none;var o,a,l=t.codeReference.range.indexFrom,c=t.codeReference.range.indexTo,u=e.doc.lineAt(l),s=e.doc.lineAt(c),d=e.toText(null!==(o=e.field(Br))&&void 0!==o?o:""),f=e.changes({from:l,to:c,insert:d}),p=f.apply(e.doc),h=l+d.length,v=null===(n=e.facet(Rn.dK))||void 0===n?void 0:n.parser,m=null;if(v)m=(0,dc.p)({parser:v,text:p,changes:f,base:e,upTo:h}),a=(0,Gc.CT)(m,p,e,l,h);else{a=[];var g=!0,y=!1,Z=void 0;try{for(var b,w=d.iterLines()[Symbol.iterator]();!(g=(b=w.next()).done);g=!0){var x=b.value;a.push([{text:x}])}}catch(R){y=!0,Z=R}finally{try{g||null==w.return||w.return()}finally{if(y)throw Z}}}var k=[];a.length>1&&l!==c&&0!==s.length&&c===s.to&&c<e.doc.length?k.push(q.p.replace({inclusive:!1,block:!0}).range(l,c)):k.push(q.p.replace({inclusiveStart:!1,block:!0}).range(l,c));for(var C=0;C<a.length;C++){var S=a[C],T=u.number+C,E=q.p.widget({widget:new Lu(S,C>0,T),inlineOrder:!0,side:C+1,block:C>0});k.push(E.range(l))}return q.p.set(k,!0)})),Nu=[Bu,Au,Uu,Xu],Mu=ar.TV.blurpleDimmest,Fu=ar.TV.accentPrimaryDimmest,Ou=q.tk.theme({".cm-pocket-highlight":{backgroundColor:"rgba(120, 95, 255, 0.1)"},"@keyframes moveGradient":{"0%":{backgroundPositionX:"100%"},"100%":{backgroundPositionX:"0%"}},".cm-pocket-highlight-loading":{background:"linear-gradient(90deg, ".concat(ar.TV.blurpleDimmest,", ").concat(Fu,", ").concat(Mu,", ").concat(Fu,")"),backgroundSize:"300% 100%",backgroundPositionX:"0%",animation:"moveGradient 2s linear infinite"}}),Wu=q.tk.decorations.compute([Pr,Rt.Yp],(function(e){var n=e.field(Pr),t=e.facet(Rt.Yp);if(!n||!t||n.codeReference.filePath!==t)return q.p.none;var r=q.p.widget({widget:new Wr({codeReference:n.codeReference,type:n.type,data:n.data}),block:!0,side:1e3}).range(n.codeReference.range.indexTo);return q.p.set(r)})),Hu=(0,q.EY)({above:!1,update:function(e){return(0,Pu.a)(e,Pr)},markers:function(e){var n=e.state.field(Pr),t=e.state.facet(Rt.Yp);if(!n||!t||n.codeReference.filePath!==t)return[];var r=n.codeReference.range.indexFrom,i=n.codeReference.range.indexTo,o=e.state.doc.lineAt(i);o.from>=r&&o.to===i&&i<e.state.doc.length&&(i+=1);var a=j.jT.range(r,i),l=n.loading&&n.codeReference.range.indexFrom<n.codeReference.range.indexTo?"cm-pocket-highlight-loading":"cm-pocket-highlight";return q.dc.forRange(e,l,a)}}),Vu=Tu.compute([Pr,Br,Rt.Yp,_u],(function(e){var n=e.field(Pr),t=e.field(Br),r=e.facet(Rt.Yp),i=e.field(_u);return n&&t&&r&&n.codeReference.filePath===r&&"transformCode"===n.type&&i===vu.Compare?j.as.of({from:n.codeReference.range.indexFrom,to:n.codeReference.range.indexTo,insert:t},e.doc.length).apply(e.doc):null})),zu=nu.V.compute([Pr,Br,Rt.Yp],(function(e){var n=e.field(Pr),t=e.field(Br),r=e.facet(Rt.Yp);return n&&t&&r&&n.codeReference.filePath===r&&"generateCode"===n.type?j.as.of({from:n.codeReference.range.indexTo,to:n.codeReference.range.indexTo,insert:t},e.doc.length):null})),ju=[Ou,Pr,Br,Wu,Hu,_u,Vu,Nu,zu,Vr],qu=t(20881),$u=t(42785),Yu=[$u.Gj,$u._j,$u.yK,$u.gm,$u.ZF],Ku=[$u.ZF],Qu=new ei.j((function(e,n){return n?null:(0,qu.ZP)({key:"mod",rules:e?Yu:Ku})})),Ju=t(66075);function es(e,n){var t=performance.now();Y.kg.time(e,t-n)}var ns=new ei.j((function(e){var n=e?.01:.001;return j.Wl.highest(q.tk.domEventHandlers({keydown:function(e){if(Math.random()<n){var t=e.timeStamp;requestAnimationFrame((function(){es("editor input latency",t),"undefined"!==typeof requestIdleCallback?requestIdleCallback((function(){es("editor input latency after layout",t)})):setTimeout((function(){es("editor input latency after layout",t)}))}))}}}))})),ts={"Discord Bot Token":/(?:N|M|O)[a-zA-Z0-9]{23}\\.[a-zA-Z0-9-_]{6}\\.[a-zA-Z0-9-_]{27}/g,"Discord Webhook Url":/https?:\/\/(?:ptb\.|canary\.)?discord\.com\/api(?:\/v\d{1,2})?\/webhooks\/(\d{17,19})\/([\w-]{68})/gi,"Dynatrace Token":/dt0[a-zA-Z]{1}[0-9]{2}\\.[A-Z0-9]{24}\\.[A-Z0-9]{64}/gi,"Facebook Access Token":/EAACEdEose0cBA[0-9A-Za-z]+/g,"Google API Key":/AIza[0-9A-Za-z\\-_]{35}/g,"Google Cloud Platform API Key":/(google|gcp|youtube|drive|yt)(.{0,20})?['"][AIza[0-9a-z\\-_]{35}]['"]/gi,"Github Personal Access Token":/ghp_[0-9a-zA-Z]{36}/g,"Github OAuth Access Token":/gho_[0-9a-zA-Z]{36}/g,"Github App Installation Access Token":/(ghu|ghs)_[0-9a-zA-Z]{36}/g,"Github App Refresh Token":/ghr_[0-9a-zA-Z]{76}/g,"Mailgun API Key":/key-[0-9a-zA-Z]{32}/g,"Mailchimp API Key":/[0-9a-f]{32}-us[0-9]{1,2}/g,"npm Access Token":/npm_[0-9a-zA-Z]{36}/g,"NuGet API Key":/oy2[a-z0-9]{43}/g,"OpenAI API Key":/sk-[a-zA-Z0-9]{48}/g,"PyPI API Token":/pypi-AgEIcHlwaS5vcmc[A-Za-z0-9-_]{50,1000}/g,"SendGrid API Key":/SG\\.[0-9A-Za-z\\-_]{22}\\.[0-9A-Za-z-_]{43}/g,"Shopify App Shared Secret":/shpss_[a-fA-F0-9]{32}/g,"Shopify Access Token":/shpat_[a-fA-F0-9]{32}/g,"Shopify Custom App Access Token":/shpca_[a-fA-F0-9]{32}/g,"Shopify Private App Password":/shppa_[a-fA-F0-9]{32}/g,"Slack API Token":/xox[baprs]-([0-9a-zA-Z]{10,48})?/g,"Slack Webhook":/https:\/\/hooks.slack.com\/services\/T[a-zA-Z0-9_]{10}\/B[a-zA-Z0-9_]{10}\/[a-zA-Z0-9_]{24}/g,"Slack Live API Key":/(?:r|s)k_live_[0-9a-zA-Z]{24}/g,"Slack Test API Key":/(?:r|s)k_test_[0-9a-zA-Z]{24}/g,"Twilio API Key":/SK[0-9a-fA-F]{32}/g};var rs=function(e){(0,ce.Z)(t,e);var n=(0,ue.Z)(t);function t(e,r,i){var o;return(0,le.Z)(this,t),(o=n.call(this)).id=e,o.secret=r,o.provider=i,o}return t.range=function(e,n){var t=n.secret,r=n.provider;return new this(this.generateId(),t,r).range(e.from,e.to)},t.generateId=function(){return this.secretId++},t}(j.uU);rs.secretId=0;var is=function(e){(0,ce.Z)(t,e);var n=(0,ue.Z)(t);function t(e){var r;return(0,le.Z)(this,t),(r=n.call(this)).key=e,r}return t.from=function(e){return new this(e)},t}(j.uU),os=j.Py.define(),as=j.Py.define(),ls=j.Py.define(),cs=j.Py.define(),us=j.Py.define(),ss=j.Py.define(),ds=function(e){var n=e.state.field(gs);if(!n.size)return!1;for(var t=n.iter(),r=[];t.value;){var i=t.from,o=t.to,a=t.value;r.push({from:i,to:o,value:a}),t.next()}var l=e.state.doc.length,c=j.as.empty(l),u=[],s=[],d=!0,f=!1,p=void 0;try{for(var h,v=function(){var e=h.value,n=e.from,t=e.to,r=e.value,i=r.secret,o=j.as.of({from:n,to:t,insert:i},l).map(c,!0);u=u.map((function(e){return e.map(o)}));var a=(c=c.compose(o)).mapPos(n)+i.length;u.push(j.jT.cursor(a)),s.push(as.of(r.id)),(0,K.j)(K.U3.PASTE_SCANNER_USED,{action:"original_accepted",provider:r.provider})},m=r[Symbol.iterator]();!(d=(h=m.next()).done);d=!0)v()}catch(g){f=!0,p=g}finally{try{d||null==m.return||m.return()}finally{if(f)throw p}}return e.dispatch({changes:c,effects:s,selection:j.jT.create(u)}),!0},fs=function(e){return!!e.state.field(gs).size&&(setTimeout((function(){e.dispatch({effects:e.state.selection.ranges.map((function(e){return ls.of(e)}))})})),!0)},ps=function(e){return!!e.state.field(gs).size&&(e.dispatch({effects:e.state.selection.ranges.map((function(e){return as.of(e)}))}),!1)};function hs(e,n){var t,o=null===(t=e.clipboardData)||void 0===t?void 0:t.getData("text/plain");if(!o)return!1;var a=function(e){if(e.length>2e3)return!1;var n=!0,t=!1,r=void 0;try{for(var i,o=Object.entries(ts)[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=(0,g.Z)(i.value,2),l=a[0],c=a[1],u=e.search(c);if(!(u<0)){var s=e.match(c);if(s){var d=u+s[0].length;return{start:u,end:d,secret:e.slice(u,d),provider:l}}}}}catch(f){t=!0,r=f}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return!1}(o);if(!a)return!1;e.preventDefault(),e.stopPropagation();var l=o.slice(0,a.start)+o.slice(a.end);return n.dispatch((0,i.Z)((0,r.Z)({},n.state.changeByRange((function(e){var n=e.from,t=e.to,r=j.jT.cursor(n+a.start);return{range:r,changes:{from:n,to:t,insert:l},effects:os.of(rs.range(r,a))}}))),{scrollIntoView:!0})),(0,K.j)(K.U3.PASTE_SCANNER_USED,{action:"secret_detected",provider:a.provider}),!0}var vs=j.QQ.define({create:function(){return j.Xs.empty},update:function(e,n){e=e.map(n.changes);var t=!0,r=!1,i=void 0;try{for(var o,a=n.effects[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;if(l.is(us)){var c=l.value,u=c.from,s=c.to,d=c.secret;e=e.update({add:[is.from(d).range(u,s)],filter:function(){return!1}})}l.is(ss)&&(e=j.Xs.empty)}}catch(f){r=!0,i=f}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return e}}),ms=j.QQ.define({create:function(){return null},update:function(e,n){var t=n.state.field(gs,!1),r=!0,i=!1,o=void 0;try{for(var a,l=n.effects[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;t&&c.is(ls)&&((0,mn.Z)(c.value,j.xm)?t.between(c.value.from,c.value.to,(function(n,t,r){e=r})):e=c.value),c.is(cs)&&(e=null)}}catch(u){i=!0,o=u}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return e}}),gs=j.QQ.define({create:function(){return j.Xs.empty},update:function(e,n){e=e.map(n.changes);var t=!0,r=!1,i=void 0;try{for(var o,a=function(){var n=o.value;n.is(os)&&(e=e.update({add:[n.value],sort:!0})),n.is(as)&&(e=(0,mn.Z)(n.value,j.xm)?e.update({filter:function(){return!1},filterFrom:n.value.from,filterTo:n.value.to}):e.update({filter:function(e,t,r){return r.id!==n.value}}))},l=n.effects[Symbol.iterator]();!(t=(o=l.next()).done);t=!0)a()}catch(c){r=!0,i=c}finally{try{t||null==l.return||l.return()}finally{if(r)throw i}}return e},provide:function(){return[q.tk.domEventHandlers({paste:hs}),j.Wl.highest(q.$f.of([{key:"Mod-z",run:ps},{key:"Enter",run:ds},{key:"Tab",run:fs}]))]}}),ys=t(1436),Zs=t(18988),bs=t(84815),ws=t(34489),xs=(0,st.X)({buttons:[k.l0.display.flex,k.l0.rowWithGap(4),k.l0.justify.end],input:[k.l0.colWithGap(4),k.l0.flex.grow(1)],gap:[k.l0.colWithGap(16)],label:[k.l0.color.foregroundDimmer,k.l0.fontSize(12),k.l0.height(24),k.l0.justify.center],flexRow:[k.l0.display.flex,k.l0.rowWithGap(8),k.l0.align.center]}),ks={fontFamily:"text-security-disc"},Cs=x.K.label;function Ss(e){var n=(0,ne.Z)().fs,t=(0,b.useId)(),o=(0,b.useId)(),l=(0,b.useState)(""),c=l[0],u=l[1],d=(0,b.useState)(e.initialValue),f=d[0],p=d[1],h=(0,b.useState)(!1),v=h[0],m=h[1],g=(0,b.useRef)(null);return(0,b.useEffect)((function(){var n;e.isOpen&&(null===(n=g.current)||void 0===n||n.focus(),(0,K.j)(K.U3.PASTE_SCANNER_USED,{action:"modal_opened",provider:null===e||void 0===e?void 0:e.provider}))}),[e.isOpen,null===e||void 0===e?void 0:e.provider]),(0,a.tZ)(Zs.MT,{contain:!0,children:(0,a.tZ)(to.u,{isOpen:e.isOpen,onRequestClose:e.onCancel,children:(0,a.BX)(x.G,{css:xs.gap,children:[(0,a.tZ)(fe.xv,{variant:"subheadBig",multiline:!1,children:"Add a key name for your secret value"}),(0,a.BX)(x.G,{css:xs.flexRow,children:[(0,a.BX)(x.G,{css:xs.input,children:[(0,a.tZ)(Cs,{css:xs.label,htmlFor:t,children:"Key"}),(0,a.tZ)(pr.II,{id:t,ref:g,value:c,onChange:function(e){return u(e.target.value)}})]}),(0,a.BX)(x.G,{css:xs.input,children:[(0,a.BX)(x.G,{css:xs.flexRow,children:[(0,a.tZ)(Cs,{css:xs.label,htmlFor:o,children:"Value"}),(0,a.tZ)(Ut.h,{alt:"Toggle Secret",onClick:function(){return m((function(e){return!e}))},tooltipPlacement:"top",children:v?(0,a.tZ)(s.Z,{}):(0,a.tZ)(bs.Z,{})})]}),(0,a.tZ)(pr.II,{id:o,value:f,onChange:function(e){return p(e.target.value)},style:v?void 0:ks})]})]}),(0,a.BX)(x.G,{css:xs.buttons,children:[(0,a.tZ)(At.zx,{text:"Cancel",onClick:e.onCancel}),(0,a.tZ)(At.zx,{colorway:"primary",text:"Save Secret",disabled:0===c.length||0===f.length,onClick:(0,H.Z)((function(){var t,o,a;return(0,V.__generator)(this,(function(l){switch(l.label){case 0:return t={},[4,n.readFile(".env")];case 1:return(o=l.sent()).error||(t=ws.Z.parse(o.content.toString())),[4,n.writeFile(".env",ws.Z.serialize((0,i.Z)((0,r.Z)({},t),(0,Cn.Z)({},c,f))))];case 2:return(a=l.sent()).error&&yn.c_.withScope((function(e){e.setExtra("keyInput",c),yn.c_.captureException(a.error)})),e.onSaveSecret(c,f),(0,K.j)(K.U3.PASTE_SCANNER_USED,{action:"secret_created",provider:null===e||void 0===e?void 0:e.provider}),[2]}}))}))})]})]})})})}var Ts=t(13548),Es=t(76735),Rs=t(45353),Is=(0,st.X)({hint:[k.l0.align.center,k.l0.border({color:k.TV.outlineDimmer,direction:"top"}),k.l0.color.foregroundDimmest,k.l0.display.flex,k.l0.flex.row,k.l0.px(8),k.l0.py(4),k.l0.rowWithGap(8)],info:[k.l0.p(8)],key:[k.l0.px(4)],wrapper:[k.l0.backgroundColor.backgroundHigher,k.l0.borderRadius(4),k.l0.cursor.default]});function Gs(e){return(0,a.BX)(x.G,{css:Is.wrapper,children:[(0,a.BX)(x.G,{css:Is.info,children:[(0,a.tZ)(x.G,{children:"The value you pasted looks like a secret."}),(0,a.tZ)(x.G,{children:"Store it securely using our Secrets feature."})]}),(0,a.BX)(x.G,{css:Is.hint,onClick:e.onClickUseSecrets,children:[(0,a.tZ)(Ts.Z,{}),"Press",(0,a.tZ)(x.G,{css:Is.key,children:(0,a.tZ)(Rs.bM,{keyCombo:"Tab",small:!0})}),"to use Secrets"]}),(0,a.BX)(x.G,{css:Is.hint,onClick:e.onClickPasteAnyway,children:[(0,a.tZ)(Es.Z,{}),"Press",(0,a.tZ)(x.G,{css:Is.key,children:(0,a.tZ)(Rs.bM,{keyCombo:"Enter",small:!0})}),"to paste anyway"]})]})}var Ds=t(9493),_s=(0,st.X)({border:[k.l0.border({color:ar.TV.accentPrimaryDefault,direction:"y",width:1})],title:[k.l0.display.flex,k.l0.rowWithGap(8),k.l0.align.center,k.l0.justify.spaceBetween,k.l0.px(8),k.l0.pt(4),k.l0.font.default],wrapper:[k.l0.backgroundColor.backgroundRoot,k.l0.py(0),k.l0.position.relative,k.l0.zIndex(200)]});function Ps(e){return(0,a.tZ)(x.G,{css:_s.wrapper,children:(0,a.BX)(x.G,{css:_s.border,children:[(0,a.BX)(x.G,{css:_s.title,children:[(0,a.BX)(fe.xv,{multiline:!1,children:["Access the secret ",(0,a.tZ)("b",{children:e.keyName}),":"]}),(0,a.tZ)(Ut.h,{alt:"Close",onClick:e.onClose,children:(0,a.tZ)(Lt.Z,{})})]}),(0,a.tZ)(Ao.Tg,{background:"root",children:(0,a.tZ)(Ds.Z,{keyName:e.keyName,filePath:e.filePath,onInsert:e.onInsert})})]})})}var Bs=nu.V.compute([gs],(function(e){var n=e.field(gs).iter();if(null===n.value)return null;for(var t=[];null!==n.value;){var r=n.from,i=n.to,o=n.value;t.push({from:r,to:i,insert:o.secret}),n.next()}return t})),As=q.hJ.computeN([ms,gs],(function(e){var n=function(){var e=r.value;i.push({arrow:!0,pos:r.to,create:function(n){return{dom:(0,ut.VV)((0,a.tZ)(Gs,{onClickUseSecrets:function(){n.dispatch({effects:ls.of(e)})},onClickPasteAnyway:function(){ds(n)}}))}}}),r.next()};if(null!=e.field(ms,!1))return[];var t=e.field(gs,!1);if(!t)return[];for(var r=t.iter(),i=[];r.value;)n();return i})),Us=ys.t.compute([ms],(function(e){var n=e.facet(Rt.Yp),t=e.field(ms);return t&&n?{key:"pasteScannerModal",node:function(e){return(0,a.tZ)(Ss,{isOpen:!0,initialValue:t.secret,provider:t.provider,onSaveSecret:function(){var n=(0,H.Z)((function(n){var r,i;return(0,V.__generator)(this,(function(a){for(r=e.state.field(gs).iter(),i=[];r.value;){var l=r.from,c=r.to,u=r.value;u.id===t.id&&(i.push(as.of(u.id)),i.push(us.of({secret:n,from:l,to:c}))),r.next()}return e.dispatch({effects:(0,o.Z)(i).concat([cs.of()])}),[2]}))}));return function(e){return n.apply(this,arguments)}}(),onCancel:function(){return e.dispatch({effects:cs.of()})}})}}:null})),Ls=q.tk.decorations.compute([vs],(function(e){var n=e.field(vs).iter(),t=n.from,r=n.to,i=n.value,o=e.facet(Rt.Yp);return i&&o?q.p.set(q.p.widget({widget:new Xs(i.key,o),side:1,block:!0}).range(t,r)):q.p.none})),Xs=function(e){(0,ce.Z)(t,e);var n=(0,ue.Z)(t);function t(e,r){var i;return(0,le.Z)(this,t),(i=n.call(this)).key=e,i.filePath=r,i}var r=t.prototype;return r.toDOM=function(e){var n=(0,ut.VV)((0,a.tZ)(Ps,{keyName:this.key,filePath:this.filePath,onClose:function(){return e.dispatch({effects:ss.of()})},onInsert:function(n){e.dispatch(e.state.changeByRange((function(e){return{range:j.jT.cursor(e.from+n.length),changes:{from:e.from,to:e.to,insert:n}}}))),e.focus(),(0,K.j)(K.U3.PASTE_SCANNER_USED,{action:"secret_key_inserted"})}}));return this.adjustForGutter(n,e),n},r.updateDOM=function(e,n){return this.adjustForGutter(e,n),!0},r.adjustForGutter=function(e,n){var t=n.dom.querySelector(".cm-gutters");e.style.marginLeft=t?"-".concat(t.clientWidth,"px"):"inherit"},t}(q.l9),Ns=[Bs,As,Us,Ls];var Ms=new ei.j((function(e,n){return e?null:function(e){return e?[vs,gs,ms,Ns]:[]}(n)})),Fs=q.tk.theme({"&":{contain:"size"},"& > .cm-scroller":{contain:"strict"}}),Os=q.tk.theme({".cm-ruler-element":{backgroundColor:k.TV.backgroundHigher}}),Ws=(0,q.EY)({above:!1,class:"cm-ruler-layer",update:function(e){return(0,Pu.a)(e,Hs,Er.R)},markers:function(e){var n=e.state.facet(Hs);if(0===n.length)return[];var t=[],r=e.dom.getBoundingClientRect(),i=e.contentDOM.getBoundingClientRect().left-r.left,o=r.width-2,a=e.contentHeight,l=!0,c=!1,u=void 0;try{for(var s,d=n[Symbol.iterator]();!(l=(s=d.next()).done);l=!0){var f=s.value,p=i+e.defaultCharacterWidth*f;p<o&&t.push(new q.dc("cm-ruler-element",p,0,2,a))}}catch(h){c=!0,u=h}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}return t}}),Hs=j.r$.define({enables:[Ws,Os]}),Vs=new ei.j((function(e){return e.map((function(e){return Hs.of(e)}))})),zs=t(88253),js=t(75886),qs=t(72499),$s=1e3,Ys=q.tk.theme({"& .cm-gutters.cm-minimap-gutter":{backgroundColor:ar.TV.backgroundDefault,borderLeft:"1px solid ".concat(ar.TV.backgroundHigher)},"& .cm-minimap-box-shadow":{boxShadow:"unset"}}),Ks=new ei.j((function(e,n,t,r){if(e||!n)return null;var i=t.minimapDisplay;return"blocks"!==i&&"characters"!==i?null:new qs.R((function(e){var n=new j.F6;return[Ys,n.of(e.state.doc.lines<=$s?(0,js.r)({displayText:i}):[]),q.tk.updateListener.of((function(e){if(e.docChanged){var t=e.startState.doc.lines<=$s,r=e.state.doc.lines<=$s;return t!==r?e.view.dispatch({effects:n.reconfigure(r?(0,js.r)({displayText:i}):[])}):void 0}})),js.J.compute([Nl],(function(e){var n=e.field(Nl,!1);if(!n)return{};for(var t={},i=1;i<=e.doc.lines;i++)switch(n.getLineChangeType(i)){case Pl.dQ.COVERED:t[i]=r.values.global.greenDefault;break;case Pl.dQ.MODIFIED:t[i]=r.values.global.blueDefault}return t}))]}))})),Qs=t(30929);function Js(e){var n=e.filePath,t=e.autoFocus,r=e.isHidden,i=e.deeplink,o=e.onDeeplinkUpdated,c=e.openFile,u=e.openThreadsInbox,s=(0,ne.Z)(),d=s.fs,f=s.debuggest,v=s.presence,m=(0,Ct.Z)().preferences,y=(0,eu.Z)(),Z=y.ref,w=y.view;(0,G.VD)(w),(0,Qs.g)(w);var x=(0,wi.uV)(),k=(0,Ju.FS)(),C=Ci.use(Boolean(null===k||void 0===k?void 0:k.match(/Chrome/i))&&Boolean(null===k||void 0===k?void 0:k.match(/Android/i))),S=(0,kt.P5)({controlName:"flag-ultra-hardcore",logFlagToAnalytics:!1}),T=(0,kt.P5)({controlName:"flag-editor-rulers",logFlagToAnalytics:!1}),E="/replEnvironmentDesktop"===h().pathname,I=(0,b.useContext)(Kc.B3),D=(0,wi.jT)();il({view:w,path:n,isHidden:r});var _=Fi({view:w,presence:v,fs:d,filePath:n}).isLoading;!function(e){var n=e.view,t=e.isLoading,r=e.autoFocus;b.useEffect((function(){r&&n&&(t||n.focus())}),[n,t,r])}({view:w,autoFocus:t,isLoading:_}),$o({view:w,filePath:n,isLoading:_}),(0,Ta.Y)({view:w});var P=(0,ui.Lh)();yi({view:w,filePath:n,isLoading:_,decorations:P,openFile:c}),li({view:w,debuggest:f,filePath:n,isLoading:_});var B=oi({view:w,filePath:n,openFile:c}),A=B.onAction,U=B.actions,X=B.contextMenuCoords,N=B.onContextMenu,M=B.closeMenu,F=B.resizeRef,H=function(e){var n=e.view,t=e.filePath,r=e.isLoading,i=Bo({replId:(0,Qi.Z)()}),o=(0,g.Z)(b.useState(null),2),a=o[0],l=o[1],c=(0,Ve.Z)({view:n});return b.useEffect((function(){if(n&&i&&!r&&t===i.mainFile){var e=document.createElement("div");return l(e),n.dispatch({effects:c.reconfigure((0,q.W$)(e))}),function(){n.dispatch({effects:c.reconfigure([])}),l(null)}}}),[n,i,t,r,c]),a}({view:w,filePath:n,isLoading:_}),V=function(e){var n=e.view,t=(0,g.Z)(b.useState(null),2),r=t[0],i=t[1],o=(0,Ve.Z)({view:n});return b.useEffect((function(){if(n){var e=document.createElement("div");return i(e),n.dispatch({effects:o.reconfigure([(0,z.yC)({createPanel:function(){return{top:!0,pos:80,dom:e}}}),q.tk.updateListener.of((function(n){if((0,z.Ep)(n.state)!==(0,z.Ep)(n.startState)&&(0,z.Ep)(n.state)){var t=e.querySelector("[main-field]");if(!t)return;t.focus(),t.select()}})),q.$f.of([{win:"Ctrl-h",linux:"Ctrl-h",preventDefault:!0,run:function(){return n.dispatch({effects:Xo.of(null)}),(0,z.nx)(n)}}])])}),function(){n.dispatch({effects:o.reconfigure([])}),i(null)}}}),[n,o]),{domNode:r}}({view:w});(0,qt.Z)({filePath:n,view:w,isLoading:_,deeplink:i,onDeeplinkUpdated:o}),La({view:w,filePath:n}),function(e){var n=e.view,t=(0,Ve.Z)({view:n}),r=(0,O.f6)();b.useEffect((function(){if(n&&r)return n.dispatch({effects:t.reconfigure(_a)}),function(){n.dispatch({effects:t.reconfigure([])})}}),[n,t,r])}({view:w});var j=function(e){var n,t=e.view,r=e.filePath,i=(0,ne.Z)().fs,o=(0,O.xZ)(null!==(n=null===t||void 0===t?void 0:t.state.facet(Rt.Yp))&&void 0!==n?n:null);return(0,g.Z)((0,Ea.L)({accept:[L.z.Code,Ra.FILE],drop:function(e,n){if(t){var a=n.getClientOffset(),l=a?t.posAtCoords(a):null;if(null!==l){var c=function(e){t.focus(),t.dispatch({changes:{from:l,insert:e},selection:{anchor:l,head:l+e.length}})};if(e.type===L.z.Code)c(e.code);else{var u=!0,s=!1,d=void 0;try{for(var f,p=e.files[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var h=f.value;o?(0,jr.L0)(h).then((function(e){return c('"'+e+'"')})):r&&(0,ie.gK)(r)&&Jr(h,i,r).then(c)}}catch(v){s=!0,d=v}finally{try{u||null==p.return||p.return()}finally{if(s)throw d}}}}}}}),2)[1]}({view:w,filePath:n});(0,ci.Z)({view:w,filePath:n,decorations:P});var $=oa({view:w,filePath:n,isLoading:_,enable:E});Ka({view:w,filePath:n}),function(e){var n=e.view,t=e.filePath,r=(0,Ve.Z)({view:n}),i=(0,Qa.K)((0,me.Z)((function(){return{path:t}}),[t]));(0,b.useEffect)((function(){if(n){var e=q.tk.domEventHandlers({scroll:R()((function(){var e=0,t=0,r=!0,o=!1,a=void 0;try{for(var l,c=n.visibleRanges[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var u=l.value;e=Math.min(e,u.from),t=Math.max(e,u.to)}}catch(s){o=!0,a=s}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}i("user:scroll",{visibleLines:{from:n.state.doc.lineAt(e).number,to:n.state.doc.lineAt(t).number}})}),250)}),t=R()((function(e,n,t){i("user:selection",{inputMethod:t,from:e,to:n})}),250),o=q.tk.updateListener.of((function(e){var n=e.transactions,r=!0,o=!1,a=void 0;try{for(var l,c=n[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var u=l.value;u.isUserEvent("input.paste")&&i("user:paste",{}),u.isUserEvent("input.drop")&&i("user:new-drop",{}),u.isUserEvent("move.drop")&&i("user:move-drop",{}),u.isUserEvent("delete.cut")&&i("user:cut",{}),u.isUserEvent("input.complete")&&i("user:complete",{}),u.isUserEvent("select")&&t(u.newSelection.main.from,u.newSelection.main.to,u.isUserEvent("select.pointer")?"pointer":"keyboard"),u.isUserEvent("undo")&&i("user:undo",{}),u.isUserEvent("redo")&&i("user:redo",{})}}catch(s){o=!0,a=s}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}}));return n.dispatch({effects:r.reconfigure([e,o])}),function(){n.dispatch({effects:r.reconfigure([])})}}}),[n,r,i])}({view:w,filePath:n}),$c({view:w,filePath:n});var Y,K=(0,p.useRouter)(),Q=(0,l.Vg)(K),J=(0,O.xZ)(null!==(Y=null===w||void 0===w?void 0:w.state.facet(Rt.Yp))&&void 0!==Y?Y:null),ee=Qu.use(J,Q),te=ri.use(J,d),re=ns.use(Q),oe=Vs.use(T?m.rulers:[]),ae=zs.U.use(Q),le=(0,kt.P5)({controlName:"flag-paste-secrets",logFlagToAnalytics:!1}),ce=Ms.use(Q,le),ue=(0,kt.P5)({controlName:"flag-ws-minimap",logFlagToAnalytics:!1}),de=(0,ia.F)(),fe=Ks.use(Q,ue,m,de),pe=(0,b.useMemo)((function(){return[ae,ee,C,re,fe,ti,te,xi,ju,Fs,oe,ce]}),[ae,ee,C,fe,re,te,oe,ce]);return(0,a.BX)("div",{ref:F,css:Ja.ac,"data-cy":_?"workspace-cm-editor-loading":"workspace-cm-editor-".concat(n),children:[(0,a.tZ)(Jc.Z,{ref:Z,elementRef:j,css:Ja.Mp,initializing:_,filePath:n,extensions:pe,onContextMenu:N,onException:function(e){var t,r=D({filePath:n}),i={filePath:n,cursorPosition:JSON.stringify(null===(t=null===I||void 0===I?void 0:I.get(Qc._s))||void 0===t?void 0:t.position),fileVersion:r};S?x({error:e,tags:{codemirror:!0},extras:i,origin:"CodemirrorEditor: useEditor/onException"}):(0,yn.xp)(e,{tags:{origin:"CodemirrorEditor: useEditor/onException",codemirror:!0},extras:i})},noHistory:!0}),X&&w?(0,a.tZ)(W.ZP,{view:w,coords:X,actions:U,closeMenu:M,onAction:A}):null,H&&n?(0,a.tZ)(Go,{dom:H,onShowGenerateCodeModal:function(){return A(W.D2.GenerateCode)},filePath:n}):null,V.domNode?(0,a.tZ)(zo,{dom:V.domNode,view:w}):null,(0,a.tZ)(ui.Iq,{source:P.observable}),w&&u?(0,a.tZ)(a.HY,{children:Object.entries($.threadElements).map((function(e){var t=(0,g.Z)(e,2),r=t[0],i=t[1];return se.createPortal((0,a.tZ)(Sa,{threadId:r,view:w,filePath:n,openThreadsInbox:u}),i)}))}):null]})}var ed=t(12404),nd=t(38567),td=t(24478),rd=(0,st.X)({base:[k.l0.backgroundColor.backgroundDefault,k.l0.color.foregroundDimmer,k.l0.borderRadius(0),k.l0.height("auto"),k.l0.p(4),{"> div":k.l0.rowWithGap(4)}]}),id=function(e){var n=e.css,t=(0,En.Z)(e,["css"]);return(0,a.tZ)(Ao.Tg,{background:"root",children:(0,a.tZ)(At.zx,(0,r.Z)({small:!0,css:[rd.base,n]},t))})};function od(e){var n=e.performPaneOperation,t=(0,nd.Z)(function(){var e=(0,H.Z)((function(e){var n,t,r,i;return(0,V.__generator)(this,(function(o){switch(o.label){case 0:return[4,e.getRepositoryState()];case 1:return(n=o.sent()).error?[2,n]:(t=n.type,r=null,t===ed.y5.INITIALIZING?[3,3]:[4,e.status()]);case 2:if((i=o.sent()).error)return[2,i];r=i,o.label=3;case 3:return[2,{branchName:null===r||void 0===r?void 0:r.branch,error:null}]}}))}));return function(n){return e.apply(this,arguments)}}()),r=!t||t.error?null:t.branchName;return r?(0,a.tZ)(id,{onClick:function(){return null===n||void 0===n?void 0:n({operation:"open",pane:{type:"git"}})},text:r,iconLeft:(0,a.tZ)(td.Z,{color:ar.TV.foregroundDimmer,size:12})}):null}var ad=t(10035),ld=t(46889);function cd(e){var n=e.onOpen;return(0,a.tZ)(id,{text:"History",iconRight:(0,a.tZ)(ad.Z,{size:12}),onClick:function(){(0,ld.p)("historyOpened"),n()},css:[{borderBottomRightRadius:k.TV.space6}]})}var ud=t(66539),sd=t(60396),dd=t(49828),fd=t(16885),pd=t(24489),hd=t(84912),vd=t(68339);function md(){var e,n=(0,G.uN)(),t=null===n||void 0===n||null===(e=n.state)||void 0===e?void 0:e.facet(Rt.Yp);return t?(0,a.tZ)(gd,{fileName:t}):null}function gd(e){var n=e.fileName,t=(0,Ct.Z)().preferences.codeIntelligence,r=function(){var e=(0,G.uN)(),n=(0,b.useState)(null===e||void 0===e?void 0:e.state.facet(Rt.Q$)),t=n[0],r=n[1],i=(0,Ve.Z)({view:e});return(0,b.useEffect)((function(){if(e)return e.dispatch({effects:i.reconfigure(q.tk.updateListener.of((function(e){var n=e.startState.facet(Rt.Q$),t=e.state.facet(Rt.Q$);n!==t&&r(t)})))}),r(e.state.facet(Rt.Q$)),function(){r(void 0),e.dispatch({effects:i.reconfigure([])})};r(void 0)}),[e,i]),t}(),i=null!=r,o=(0,Q.Z)(n),l=function(e){var n=(0,ne.Z)(),t=n.lsp,r=n.lspnix,i=(0,Q.X)(),o=(0,Ct.Z)().preferences.codeIntelligence,a=(0,b.useState)(!1),l=a[0],c=a[1];(0,b.useEffect)((function(){null!=e&&c(!1)}),[e]);var u=(0,b.useCallback)((function(){null!==i&&o&&(i?(r.disable(),r.enable()):(t.stop(),t.start()),c(!0))}),[t,r,i,o]);return{isRestartingLSP:l,restartLSP:u}}(o),c=l.isRestartingLSP,u=l.restartLSP,s=(0,b.useState)(null===o||void 0===o?void 0:o.getServerState()),d=s[0],f=s[1],p=(0,b.useState)(null===o||void 0===o?void 0:o.getServerHealth()),h=p[0],v=p[1],m=d===fn.a.INITIALIZING||c,g=d===fn.a.INITIALIZED,y=d===fn.a.EXITED||c,Z=null!=o&&h===fn.N.READY,w=null!=o&&h===fn.N.STALLED;(0,b.useEffect)((function(){if(o)return f(o.getServerState()),v(o.getServerHealth()),(0,vd.uf)([o.onServerStateChange((function(e){f(e)})),o.onServerHealthChange((function(e){v(e)}))])}),[o]);var x=function(e){var n=e.codeIntelligence,t=e.isRestartingLSP,r=e.isInitializedLSP,i=e.isExitedLSP,o=e.isReadyLSP,a=e.isStalledLSP,l=e.hasPartialSupport;if(t)return"Restarting language server...";if(!n)return"Code intelligence is disabled. Enable it in settings.";if(i)return"Language support is not available because the language server exited.";if(a)return"Language support is stalled due to a resource constraint.";if(r&&!o)return"Language support may be inaccurate because it is initializing.";if(!r&&l)return"Language support may be inaccurate because code intelligence is not available."}({codeIntelligence:t,isRestartingLSP:c,isInitializedLSP:g,isReadyLSP:Z,isExitedLSP:y,isStalledLSP:w,hasPartialSupport:i}),C=y||m||w||!o;return(0,a.tZ)(ud.u,{isDisabled:void 0===x,tooltip:x,children:(0,a.tZ)(id,{disabled:!C,css:[{svg:[k.l0.width(16),k.l0.height(16)],borderBottomLeftRadius:k.TV.space6}],iconLeft:Zd({isLoadingLSP:m,isInitializedLSP:g,isReadyLSP:Z,isExitedLSP:y,isStalledLSP:w,hasPartialSupport:i}),text:yd({codeMirrorLanguageSupport:r,fileName:n}),onClick:function(){y||m||w?u():o||window.open("https://docs.replit.com/programming-ide/configuring-repl#languages","_blank")}})})}function yd(e){var n,t=e.codeMirrorLanguageSupport,r=e.fileName,i=(0,sd.v)(r);return i||(t?0===t.language.name.length?(0,ie.r6)(r):(n=t.language.name).slice(0,1).toUpperCase()+n.slice(1).toLowerCase():"Plain Text")}function Zd(e){var n=e.isLoadingLSP,t=e.isInitializedLSP,r=e.isReadyLSP,i=e.isExitedLSP,o=e.isStalledLSP,l=e.hasPartialSupport;return o?(0,a.tZ)(hd.Z,{size:16}):n||t&&!r?(0,a.tZ)(vr.Z,{size:16,color:k.TV.blueStronger}):r?(0,a.tZ)(fd.Z,{size:16}):i?(0,a.tZ)(pd.Z,{size:16}):l?(0,a.tZ)(hd.Z,{size:16}):(0,a.tZ)(dd.Z,{size:16})}function bd(){var e=(0,b.useRef)(null),n=(0,G.uN)(),t=(0,Ve.Z)({view:n}),r=function(n){e.current&&(e.current.textContent=n)};return(0,b.useEffect)((function(){if(n){var e=null,i=null,o=function(n){n!==i&&(i=n,null===e&&(e=requestAnimationFrame((function(){e=null,r(i?function(e){var n=e.selection,t="",r=0;if(n.ranges.length>1){r=n.ranges.reduce((function(e,n){return e+(n.to-n.from)}),0);var i=n.ranges.length;t="".concat(i," selections")}else{var o=n.ranges[0],a=e.doc.lineAt(o.head),l=o.head-a.from;r=o.to-o.from,t="Ln ".concat(a.number,", Col ").concat(l+1)}return r>0&&(t+=" (".concat(r," chars)")),t}(i):"")}))))};return n.dispatch({effects:t.reconfigure(q.tk.updateListener.of((function(e){(e.docChanged||e.selectionSet)&&o(e.state)})))}),o(n.state),function(){r(""),null!==e&&(cancelAnimationFrame(e),e=null),n.dispatch({effects:t.reconfigure([])})}}r("")}),[n,t]),(0,b.useMemo)((function(){return(0,a.tZ)(id,{text:(0,a.tZ)("span",{ref:e,"data-cy":"current-position"}),css:[k.l0.color.foregroundDimmest],onClick:n?function(){return(0,z.zo)(n)}:void 0})}),[n])}function wd(){var e=(0,b.useState)(null),n=e[0],r=e[1],i=(0,b.useRef)(null),o=(0,G.uN)(),l=(0,Ve.Z)({view:o}),c=(0,Ct.Z)().preferences,u="vim"===(null===c||void 0===c?void 0:c.keyboardHandler),s=(0,b.useCallback)((function(e){if(i.current){var t=null!==e&&void 0!==e?e:"";if(o&&n&&void 0===e){var r,a,l=n.getCM(o),c=null!==(a=null===(r=null===l||void 0===l?void 0:l.state.vim)||void 0===r?void 0:r.mode)&&void 0!==a?a:"normal";t="-- ".concat(c.toUpperCase()," --")}i.current.innerText!==t&&(i.current.innerText=t||"")}}),[o,n]);return(0,b.useEffect)((function(){u&&!n&&t.e(6338).then(t.bind(t,44549)).then((function(e){r(e),s()}))}),[u,n,s]),(0,b.useEffect)((function(){if(o&&u){var e=!1;return setTimeout((function(){e||(e=!0,o.dispatch({effects:l.reconfigure(q.tk.updateListener.of((function(){return s()})))}))}),0),s(),function(){e?o.dispatch({effects:l.reconfigure([])}):e=!0}}s(null)}),[o,u,l,s]),(0,a.tZ)(a.HY,{children:u?(0,a.tZ)(fe.xv,{ref:i,multiline:!1,color:"dimmer",variant:"small"}):null})}var xd,kd=t(93672),Cd=(0,st.X)({roundedRectanglePill:[k.l0.display.flex,k.l0.center,k.l0.fontWeight.medium,k.l0.fontSize(10),k.l0.borderRadius(4),k.l0.px(2),{flex:"0 0 auto",minWidth:12,height:16}]}),Sd=(xd={},(0,Cn.Z)(xd,$e.DiagnosticSeverity.Error,k.TV.accentNegativeDimmest),(0,Cn.Z)(xd,$e.DiagnosticSeverity.Warning,k.TV.yellowDimmer),xd);function Td(e){var n,t=e.value,r=e.severity,i=e.onClick,o=i?{cursor:"pointer"}:{},l=null!==(n=Sd[r])&&void 0!==n?n:void 0;return(0,a.tZ)("div",{onClick:i,onKeyDown:function(e){"Enter"===e.key&&(null===i||void 0===i||i())},role:"button",tabIndex:0,css:[Cd.roundedRectanglePill,{borderBottom:"solid 1px gray",borderBottomColor:l}],style:o,children:t})}function Ed(){var e,n=(0,G.uN)(),t=null===n||void 0===n||null===(e=n.state)||void 0===e?void 0:e.facet(Rt.Yp);return t?(0,a.tZ)(Rd,{fileName:t}):null}function Rd(e){var n=e.fileName,t=(0,G.uN)(),r=function(e){var n=(0,b.useState)(null),t=n[0],r=n[1],i=(0,Q.Z)(e);return(0,b.useEffect)((function(){if(i)return i.onDiagnostics((function(n){n.path===e&&r(n.diagnostics)}))}),[i,e]),t}(n),i=(0,b.useMemo)((function(){return r?function(e){var n=e.reduce((function(e,n){return void 0===n.severity||(e[n.severity]=(e[n.severity]||0)+1),e}),{});return e.length>0&&0===Object.keys(n).length&&(n[$e.DiagnosticSeverity.Error]=e.length),n}(r):null}),[r]);if(!i)return null;var o=i[$e.DiagnosticSeverity.Error]||0,l=i[$e.DiagnosticSeverity.Warning]||0;return 0===o&&0===l?null:(0,a.BX)(a.HY,{children:[(0,a.tZ)(ud.u,{tooltip:"".concat(o," errors"),children:(0,a.tZ)(Td,{value:o,severity:$e.DiagnosticSeverity.Error,onClick:o>0?function(){if(t&&r)return(0,kd.Z)(t)}:void 0})}),(0,a.tZ)(ud.u,{tooltip:"".concat(l," warnings"),children:(0,a.tZ)(Td,{value:l,severity:$e.DiagnosticSeverity.Warning,onClick:l>0?function(){if(t&&r)return(0,kd.Z)(t)}:void 0})})]})}var Id=t(25381);function Gd(){var e=(0,b.useState)(!1),n=e[0],t=e[1],r=(0,b.useState)(!1),i=r[0],o=r[1],l=(0,di.Z)(n),c=(0,di.Z)(i),u=(0,G.uN)();return pi((function(){return q.tk.updateListener.of((function(e){var n=e.state.field(jc,!1);if(!n||null===n.head)return l.current&&t(!1),void(c.current&&o(!1));var r=n.mode===Rc.INLINE_DIFF;l.current!==r&&t(r),c.current||o(!0)}))}),[l,c],u,"ToggleGitFileDiff"),u&&i?(0,a.tZ)(id,{text:n?"Diffing":"Diff",colorway:n?"primary":void 0,iconLeft:(0,a.tZ)(Id.Z,{}),onClick:function(){u.dispatch({effects:zc.of(n?Rc.GUTTER_DIFF:Rc.INLINE_DIFF)})}}):null}var Dd=(0,st.X)({root:[k.l0.position.relative,k.l0.rowWithGap(16),k.l0.align.center,k.l0.justify.spaceBetween,k.l0.backgroundColor.backgroundDefault,{borderTop:"1px solid ".concat(k.TV.backgroundHigher)},{height:"30px",contain:"strict"}],left:[k.l0.rowWithGap(2),k.l0.align.center,k.l0.px(8)],right:[k.l0.rowWithGap(2),k.l0.display.flex,k.l0.flex.row,k.l0.align.center],group:[k.l0.rowWithGap(2),k.l0.display.flex,k.l0.flex.row,k.l0.flex.shrink(1),k.l0.align.center]});function _d(e){var n=e.filePath,t=e.performPaneOperation,r=(0,kt.P5)({controlName:"flag-lsp-status-in-ws",logFlagToAnalytics:!1}),i=(0,kt.P5)({controlName:"flag-lsp-diagnostics-in-footer",logFlagToAnalytics:!1}),o=(0,D.d)(),c=!o&&r,u=!o&&i,s=(0,kt.P5)({controlName:"flag-status-bar-branch",logFlagToAnalytics:!1}),d=(0,kt.P5)({controlName:"flag-editor-git-inline-diff",logFlagToAnalytics:!1}),f=(0,l.T3)()?void 0:{borderBottomLeftRadius:7,borderBottomRightRadius:7},p=(0,me.Z)((function(){return function(){t({operation:"replace",pane:{type:"history",data:{path:n}}})}}),[n,t]);return(0,a.BX)(Ao.Tg,{css:Dd.root,style:f,children:[(0,a.BX)(x.G,{css:Dd.group,children:[c?(0,a.tZ)(md,{}):null,u?(0,a.tZ)(Ed,{}):null,s?(0,a.tZ)(od,{performPaneOperation:t}):null,d?(0,a.tZ)(Gd,{}):null,(0,a.tZ)(wd,{})]}),(0,a.BX)(x.G,{css:Dd.group,children:[(0,a.tZ)(bd,{}),(0,a.tZ)(cd,{onOpen:p})]})]})}var Pd=t(4143),Bd=t(69861),Ad=t(56581),Ud=t(92683);function Ld(e,n,t){var r=t.find((function(t){var r=t.range;return(0,we.R)(e,r.end)>=n&&(0,we.R)(e,r.start)<=n}));return null==r?[]:r.children?[r].concat(Ld(e,n,r.children)):[r]}function Xd(e,n){return e.length===n.length&&e.every((function(e,t){return e===n[t]}))}var Nd=t(98143),Md=t(51875),Fd=t(80731),Od=t(54301),Wd=t(53674),Hd=(0,uo.iv)([lo.gU.nofill,{transitionProperty:"background-color, box-shadow, opacity",opacity:.8,":focus":{zIndex:1,opacity:1}}]),Vd={button:(0,uo.iv)([k.l0.reset.button,k.l0.p(2),k.l0.rowWithGap(4),k.l0.align.center,Hd]),text:(0,uo.iv)({fontSize:k.TV.fontSizeSmall})},zd={opacity:1};function jd(e){var n=e.icon,t=e.text,o=e.innerRef,l=e.ariaProps,c=e.active,u=(0,Od.U)(l,o).buttonProps,s=(0,Wd.XI)({}),d=s.hoverProps,f=s.isHovered;return(0,a.BX)(x.G,(0,i.Z)((0,r.Z)({tag:"button",css:Vd.button,style:f||c?zd:void 0,innerRef:o},(0,dr.dG)(u,d)),{children:[n?(0,b.cloneElement)(n,{size:16}):null,(0,a.tZ)(x.G,{css:Vd.text,children:t})]}))}var qd=t(73457),$d=t(23257),Yd={underlay:(0,uo.iv)([k.l0.coverContainer,k.l0.position.fixed]),surface:(0,uo.iv)([k.l0.borderRadius(8),{boxShadow:k.TV.shadow2,border:"1px solid",borderColor:k.TV.backgroundHighest}])};function Kd(e){var n=e.state,t=e.triggerRef,o=e.placement,l=e.children,c=(0,g.Z)((0,$d.Z)(),2),u=c[0],s=c[1],d=(0,qd.Sv)({placement:o,triggerRef:t,popoverRef:u,offset:8},n),f=d.popoverProps,p=d.underlayProps;return(0,a.BX)(qd.aV,{children:[(0,a.tZ)(x.G,(0,i.Z)((0,r.Z)({},p),{css:Yd.underlay})),(0,a.BX)(Ao.Tg,(0,i.Z)((0,r.Z)({elevated:!0,css:Yd.surface,innerRef:s},f),{children:[(0,a.tZ)(qd.U4,{onDismiss:n.close}),l,(0,a.tZ)(qd.U4,{onDismiss:n.close})]}))]})}var Qd=t(51936),Jd=(0,uo.iv)([k.l0.p(4)]);function ef(e){var n=e.items,t=e.children,l=e.menuProps,c=e.selectedKeys,u=e.onAction,s=(0,Qd.D)({items:n,children:t,selectedKeys:c,selectionMode:"single"}),d=(0,b.useRef)(null),f=(0,Md.H9)((0,r.Z)({items:n,onAction:u},l),s,d);return(0,a.tZ)(x.G,(0,i.Z)((0,r.Z)({},f.menuProps),{innerRef:d,css:Jd,children:(0,o.Z)(s.collection).map((function(e){return(0,a.tZ)(rf,{item:e,state:s},e.key)}))}))}var nf={root:(0,uo.iv)([k.l0.flex.row,k.l0.align.center,k.l0.position.relative,Hd]),selected:(0,uo.iv)([{opacity:1,backgroundColor:lo.vb.interactiveBackground}])},tf={opacity:1};function rf(e){var n=e.item,t=e.state,o=(0,b.useRef)(null),l=(0,Md.iX)({key:n.key},t,o),c=l.menuItemProps,u=l.isSelected,s=(0,Wd.XI)({}),d=s.hoverProps,f=s.isHovered;return(0,a.tZ)(x.G,(0,i.Z)((0,r.Z)({innerRef:o,css:[nf.root,u&&nf.selected],style:f||u?tf:void 0},(0,dr.dG)(c,d)),{children:n.rendered}))}var of={root:(0,uo.iv)([k.l0.p(4),k.l0.rowWithGap(4),k.l0.align.center]),text:(0,uo.iv)([k.l0.truncate,k.l0.flex.growAndShrink(1),{fontSize:k.TV.fontSizeDefault}])};function af(e){return(0,a.BX)(x.G,{css:[of.root],children:[e.icon?(0,b.cloneElement)(e.icon,{size:16}):null,(0,a.tZ)(x.G,{css:of.text,children:e.text})]})}var lf=t(29892),cf=t(20406),uf=t(14433),sf=t(33064),df=t(53272),ff=t(98355),pf=t(95271),hf=t(70628),vf=t(82874),mf=t(97130),gf=t(65911),yf=t(29143),Zf=function(e){var n=new Set(yf.Z),t=new Map,r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=(0,g.Z)(a.value,3),u=c[0],s=c[1],d=c[2];if(!n.has(u))throw new Error("Symbol not supported by LSP client. Please add to the supported symbol icons array");"string"===typeof s&&(s=mf.s.get(s)),t.set(u,[s,null!==d&&void 0!==d?d:k.TV.foregroundDefault])}}catch(f){i=!0,o=f}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return t}([[$e.SymbolKind.Array,pf.Z],[$e.SymbolKind.Boolean,f.Z],[$e.SymbolKind.Class,"class",k.TV.yellowDefault],[$e.SymbolKind.Constant,"constant",k.TV.blueStronger],[$e.SymbolKind.Constructor,"method",k.TV.blurpleDefault],[$e.SymbolKind.Enum,uf.Z,k.TV.orangeDefault],[$e.SymbolKind.EnumMember,vf.Z,k.TV.blueStronger],[$e.SymbolKind.Event,lf.Z],[$e.SymbolKind.Field,hf.Z],[$e.SymbolKind.File,sf.Z],[$e.SymbolKind.Function,"function",k.TV.blurpleStronger],[$e.SymbolKind.Interface,df.Z,k.TV.blueStronger],[$e.SymbolKind.Key,ff.Z],[$e.SymbolKind.Method,"method",k.TV.blurpleDefault],[$e.SymbolKind.Module,gf.Z,k.TV.purpleDefault],[$e.SymbolKind.Namespace,cf.Z],[$e.SymbolKind.Object,f.Z,k.TV.blueDimmer],[$e.SymbolKind.Operator,f.Z],[$e.SymbolKind.Package,gf.Z,k.TV.purpleDefault],[$e.SymbolKind.Property,hf.Z],[$e.SymbolKind.String,d.Z],[$e.SymbolKind.Struct,cf.Z],[$e.SymbolKind.TypeParameter,vf.Z],[$e.SymbolKind.Variable,vf.Z,k.TV.blueStronger]]);function bf(e){var n,t=e.kind,r=(0,g.Z)(null!==(n=Zf.get(t))&&void 0!==n?n:[f.Z,k.TV.foregroundDefault],2),i=r[0],o=r[1];return(0,a.tZ)(i,{color:o,size:16})}function wf(e){return CSS.escape(e.name)}function xf(e){var n=e.selectedSymbol,t=e.symbols,r=e.moveCursor,i=e.icon,o=e.text,l=(0,Nd.W)({onOpenChange:function(e){e&&(0,K.j)(K.U3.CODE_NAVIGATION_USED,{action:"opened"})}}),c=b.useRef(null),u=(0,Md.u4)({},l,c),s=u.menuTriggerProps,d=u.menuProps,f=n?new Set([n.name]):void 0;return(0,a.BX)(a.HY,{children:[(0,a.tZ)(jd,{text:o,icon:i,innerRef:c,ariaProps:s,active:l.isOpen}),l.isOpen?(0,a.tZ)(Kd,{triggerRef:c,state:l,placement:"bottom left",children:(0,a.tZ)(ef,{menuProps:d,items:t,selectedKeys:f,onAction:function(e){var n=t.find((function(n){return wf(n)===e}));n&&(r(n.selectionRange.start),(0,K.j)(K.U3.CODE_NAVIGATION_USED,{action:"jumped"}))},children:function(e){return(0,a.tZ)(Fd.ck,{children:(0,a.tZ)(af,{icon:(0,a.tZ)(bf,{kind:e.kind}),text:e.name})},wf(e))}})}):null]})}var kf=b.memo((function(e){var n=e.symbols,t=e.symbolsPath,r=e.moveCursor,i=t.length?t[t.length-1]:null,o=i?i.children:n;return(0,a.BX)(a.HY,{children:[t.map((function(e,i){var o=0===i?n:t[i-1].children;return o?(0,a.BX)(b.Fragment,{children:[(0,a.tZ)(Uo.Z,{size:12}),(0,a.tZ)(xf,{symbols:o,icon:(0,a.tZ)(bf,{kind:e.kind}),text:e.name,selectedSymbol:e,moveCursor:r})]},wf(e)):null})),(null===o||void 0===o?void 0:o.length)?(0,a.BX)(a.HY,{children:[(0,a.tZ)(Uo.Z,{size:12}),(0,a.tZ)(xf,{symbols:o,text:"...",moveCursor:r})]}):null]})}));function Cf(e){var n=e.view,t=(0,me.Z)((function(){return(0,m.cn)(null)}),[]),r=(0,Ud.b9)(t),i=b.useCallback((function(e){null===n||void 0===n||n.dispatch({scrollIntoView:!0,selection:j.jT.cursor((0,we.R)(n.state.doc,e))}),null===n||void 0===n||n.focus()}),[n]);pi((function(){var e=R()(r,200);return q.tk.updateListener.of((function(n){var t=n.state.field(vi,!1)||null,r=t!==n.startState.field(vi,!1);(n.selectionSet||r)&&e({doc:n.view.state.doc,cursor:n.state.selection.main.head,symbols:t})}))}),[r],n,"useCodeNav");var o=(0,me.Z)((function(){return(0,Ad.kv)(t,(function(e){return(null===e||void 0===e?void 0:e.symbols)?Ld(e.doc,e.cursor,e.symbols):[]}),Xd)}),[t]),a=(0,me.Z)((function(){return(0,Ad.kv)(t,(function(e){return null===e||void 0===e?void 0:e.symbols}),Nr())}),[t]);return{symbols:(0,Ud.Dv)(a),symbolsPath:(0,Ud.Dv)(o),moveCursor:i}}var Sf=b.memo((function(e){var n=Cf({view:e.view}),t=n.symbols,r=n.symbolsPath,i=n.moveCursor;return(null===t||void 0===t?void 0:t.length)?(0,a.tZ)(kf,{symbols:t,symbolsPath:r,moveCursor:i}):null})),Tf=t(35273),Ef=t(39187);function Rf(e){var n=e.path,t=e.performPaneOperation,r=(0,G.uN)(),i=(0,b.useCallback)((function(e){t({operation:"replace",pane:(0,Tf.$E)(e)})}),[t]);return(0,a.tZ)(Tf.h4,{children:(0,a.tZ)(Tf.Qc,{children:(0,a.tZ)(Ef.tr,{path:n,onFileClick:i,children:(0,a.tZ)(Sf,{view:r})})})})}function If(e){var n=(0,Bd.Z)(),t=(0,O.xZ)(e.filePath),r=(0,Pd.Z)(no.y.Editor),i=(0,w.Z)();return(0,a.BX)("div",{ref:r,css:{position:"relative",display:"flex",flexDirection:"column",overflowY:"hidden",height:"100%",width:"100%",boxShadow:"".concat(n?"0 3px 0 3px ".concat(n):"0")},children:[e.performPaneOperation?(0,a.tZ)(Rf,{performPaneOperation:e.performPaneOperation,path:e.filePath}):null,(0,a.BX)("div",{css:Ja.ev,children:[(0,a.tZ)(Js,{openFile:e.openFile,openThreadsInbox:e.openThreadsInbox,filePath:e.filePath,autoFocus:e.autoFocus,hideMobileKeyboardToolbar:e.hideMobileKeyboardToolbar,isHidden:e.isHidden,deeplink:e.deeplink,onDeeplinkUpdated:e.onDeeplinkUpdated}),t?(0,a.tZ)(F,{}):null]}),(0,a.tZ)("div",{css:{display:i?"none":"block"},children:(0,a.tZ)(_d,{filePath:e.filePath,performPaneOperation:e.performPaneOperation})}),e.hideMobileKeyboardToolbar?null:(0,a.tZ)(U,{filePath:e.filePath,isLoading:!1})]})}var Gf=t(21303),Df=t(27549),_f=t(41681),Pf=t(5616),Bf=t(43330);var Af=t(94452),Uf=t(25198);var Lf=(0,st.X)({root:[k.l0.coverContainer,k.l0.center,k.l0.p(16)]});function Xf(e){var n=function(e,n){switch(e.code){case bi.Df.NotFound:return'"'.concat(n,"\" doesn't exist");case bi.Df.IsDirectory:return'"'.concat(n,'" is a directory');case bi.Df.DiskQuotaExceeded:return"This Repl ran out of disk space";case bi.Df.InvalidPath:return'"'.concat(n,'" is not allowed');default:return'An error occurred reading "'.concat(n,'"')}}(e.error,e.path);return(0,a.tZ)(x.G,{css:Lf.root,children:(0,a.tZ)(x.G,{children:(0,a.tZ)(Uf.E,{icon:(0,a.tZ)(Es.Z,{}),colorway:"orange",text:n})})})}var Nf={Content:function(e){var n=e.pane,t=e.options;return(0,a.tZ)(Ff,(0,i.Z)((0,r.Z)({},n.data),{isActive:t.isActive,isHidden:t.isHidden,performPaneOperation:t.performPaneOperation}))},Icon:function(e){var n=e.pane,t=e.size;return(0,a.tZ)(c.Z,{path:n.data.path||"",size:t})},getTitle:function(e){return e.data.path?(0,ie.UO)(e.data.path):"No file open"}};function Mf(e){var n=e.path,t=e.isActive,r=e.performPaneOperation,i=(0,G.uN)(),c=(0,_f.Gb)({filePath:n});!function(e){var n=e.view,t=e.onUpdate,r=(0,b.useRef)(0);pi((function(){return t?q.tk.updateListener.of((function(e){var n=!0,i=!1,o=void 0;try{for(var a,l=e.transactions[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var c=a.value;if(!(r.current>0)&&!c.annotation(j.YW.remote)&&(c.isUserEvent("input")||c.isUserEvent("delete")))return void(t&&(r.current+=1,setTimeout(t)))}}catch(u){i=!0,o=u}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}})):null}),[t],n,"useDidUpdateOnce")}({view:i,onUpdate:function(){return r({operation:"commit"})}});var p=function(e){return(0,me.Z)((function(){return e?{match:Af.pl,data:{type:"action",label:"Toggle all folds",icon:(0,a.tZ)(Uo.Z,{}),run:function(){0===(0,Rn.q2)(e.state).size?(0,Rn.g_)(e):(0,Rn.jZ)(e)}}}:null}),[e])}(i);(0,Bf.x)(_f.kq,{enabled:Boolean(t&&c),run:function(){null===c||void 0===c||c.format()}});var h=(0,me.Z)((function(){return c?c.isFormatting?{type:"action",icon:(0,a.tZ)(vr.Z,{}),label:"Formatting...",run:function(){}}:{type:"action",icon:(0,a.tZ)(Pf.Z,{}),label:"Format "+(0,ie.UO)(n),run:function(){c.format()}}:null}),[c,n]),v=(0,Tf.Mp)({path:n,performPaneOperation:r}),m=function(){var e=(0,kt.P5)({controlName:"flag-ws-minimap",logFlagToAnalytics:!1}),n=(0,l.T3)(),t=(0,Ct.Z)(),r=t.preferences.minimapDisplay,i=t.update;return(0,me.Z)((function(){return!e||n?null:{match:Af.pl,data:{label:"Minimap",icon:(0,a.tZ)(u.Z,{}),type:"context"},commands:function(e){var n=e.active,t=e.search;return n||t?[{value:"none",label:"Hide",icon:(0,a.tZ)(s.Z,{})},{value:"characters",label:"Characters",icon:(0,a.tZ)(d.Z,{})},{value:"blocks",label:"Blocks",icon:(0,a.tZ)(f.Z,{})}].filter((function(e){return e.value!==r})).map((function(e){return{match:Af.pl,data:{type:"action",label:e.label,icon:e.icon,run:function(){i({minimapDisplay:e.value})}}}})):[]}}}),[i,r,e,n])}();return(0,Df.L5)((function(){var e=function(e){return{match:Af.pl,data:{label:"Preview",icon:(0,a.tZ)(bs.Z,{}),type:"action",run:function(){r({operation:"replace",pane:{type:e,data:{path:n}}})}}}};if(i){var t,l=m?[m]:[];if(p&&l.push(p),v)(t=l).push.apply(t,(0,o.Z)(v));return(0,ie.B4)(n)&&l.unshift(e("media")),(0,ie.gK)(n)&&l.unshift(e("markdown")),{type:"codeEditor",actions:h?[h]:void 0,commands:l,getCurrentSelectionText:function(){if(!i.state.selection.main.empty)return i.state.sliceDoc(i.state.selection.main.from,i.state.selection.main.to)}}}}),[i,h,p,v,m,r,n]),(0,Df.Wk)((function(){return i}),[i]),null}function Ff(e){var n=e.path,t=e.line,r=e.col,i=e.isActive,o=e.isHidden,c=e.performPaneOperation,u=(0,b.useState)((function(){return(0,m.MT)()}))[0],s=(0,b.useState)((function(){return(0,m.MT)()}))[0],d=(0,p.useRouter)(),f=!v()&&!(0,l.Vg)(d)&&i,h=function(e){var n=(0,ne.Z)().fs,t=(0,b.useState)(null),r=t[0],i=t[1];return(0,b.useEffect)((function(){if(e){var t=n.watchTextFile(e,{onError:function(e){i(e)}});return function(){t(),i(null)}}}),[n,e]),r}(n),g=(0,me.Z)((function(){return{line:t,col:r}}),[t,r]),y=(0,me.Z)((function(){return function(){c({operation:"replace",pane:{type:"codeEditor",data:{path:n}}})}}),[c,n]),Z=(0,me.Z)((function(){return function(e){c({operation:"commit"}),c({operation:"open",pane:{type:"codeEditor",data:e}})}}),[c]),w=(0,b.useCallback)((function(){c({operation:"open",secondary:!0,pane:{type:"threadInbox"}})}),[c]);return n?h?(0,a.tZ)(Xf,{path:n,error:h}):(0,a.tZ)(G.Cl.Provider,{value:u,children:(0,a.BX)(Gf.ox.Provider,{value:s,children:[(0,a.tZ)(If,{filePath:n,autoFocus:f,isHidden:null!==o&&void 0!==o&&o,deeplink:g,onDeeplinkUpdated:y,hideMobileKeyboardToolbar:!0,performPaneOperation:c,openFile:Z,openThreadsInbox:w},n),(0,a.tZ)(Mf,{path:n,isActive:i,performPaneOperation:c})]})}):null}},34449:function(e,n,t){t.d(n,{R:function(){return Ht}});var r,i,o=t(74985),a=t(92508),l=t(2272),c=t(50959),u=t(85368),s=t(39541),d=t(25198),f=t(57135),p=t(57389),h=t(72006),v=t(4405),m=t(96583),g=t(45510),y=t(17807),Z=t(33814),b=t(95271),w=t(15544),x=t(10035),k=t(45348),C=t(57475),S=t(77637),T=t(43312),E=function(e){var n=e.children;return(0,o.tZ)(u.G,{css:[s.l0.height("100%"),s.l0.overflowY("auto")],children:(0,o.tZ)(u.G,{css:[s.l0.position.relative],children:n})})},R=(0,T.iv)([s.l0.width("100%"),s.l0.maxWidth("none")]),I=function(e){var n=e.children,t=e.fullWidth,r=(0,S.Z)(e,["children","fullWidth"]);return(0,o.tZ)(u.G,(0,v.Z)((0,h.Z)({},r),{css:[t?R:a.F3,s.l0.px(8),s.l0.pt(16)],children:n}))},G=t(29316),D=t(16572),_=t(61284),P=t(63128),B=t(51631),A=t(32104),U=t(71002),L=(r={},(0,p.Z)(r,B.Fe.Suspended,{title:"Suspended",color:s.TV.greyDefault}),(0,p.Z)(r,B.Fe.UpdatingTier,{title:"Updating tier",color:s.TV.orangeStronger}),(0,p.Z)(r,B.Fe.Suspending,{title:"Suspending",color:s.TV.orangeStronger}),(0,p.Z)(r,B.Fe.Resuming,{title:"Resuming",color:s.TV.orangeStronger}),(0,p.Z)(r,B.Fe.Pending,{title:"Provisioning",color:s.TV.orangeStronger}),(0,p.Z)(r,B.Fe.Building,{title:"Building",color:s.TV.orangeStronger}),(0,p.Z)(r,B.Fe.Running,{title:"Bundling",color:s.TV.orangeStronger}),(0,p.Z)(r,B.Fe.Promoting,{title:"Promoting",color:s.TV.orangeStronger}),(0,p.Z)(r,B.Fe.Failed,{title:"Failed",color:s.TV.accentNegativeDefault}),(0,p.Z)(r,B.Fe.Success,{title:"Success",color:s.TV.accentPositiveDefault}),r),X=function(){var e=(0,U.kW)(),n=(0,U.$y)();if(e===U.z4.Loading||!n)return(0,o.tZ)(A.Z,{size:12});var t=n.status,r=t in L?L[t]:{title:"",color:s.TV.greyDefault},i=r.title,a=r.color;return(0,o.BX)(u.G,{css:[s.l0.align.center,s.l0.rowWithGap(6),{textTransform:"capitalize"}],children:[(0,o.tZ)(u.G,{as:"span",css:[s.l0.width("8px"),s.l0.height("8px"),s.l0.borderRadius("full"),{backgroundColor:a,boxShadow:"0 0 12px ".concat(a)}]}),(0,o.tZ)("div",{className:"always-on-indicator","aria-label":i,"data-microtip-position":"bottom",role:"tooltip"}),(0,o.tZ)(_.xv,{multiline:!1,children:i})]})},N=t(32973),M=t(13548),F=function(e){var n=e.currentBuild,t=(0,l.Z)(c.useState([]),2),r=t[0],i=t[1];return c.useEffect((function(){var e,t="HostingDeployment"===(null===(e=n.repl.hostingDeployment)||void 0===e?void 0:e.__typename)&&n.repl.hostingDeployment.id,r=[];switch(n.provider){case B.r4.Goval:r.push({href:"https://".concat(t,".id.repl.co"),private:!0});break;case B.r4.Gce:case B.r4.CloudRun:case B.r4.Static:var o,a,l,c,u="HostingDeployment"===(null===(o=n.repl.hostingDeployment)||void 0===o?void 0:o.__typename)?null===(a=n.repl.hostingDeployment)||void 0===a?void 0:a.replitAppSubdomain:void 0;if(!u&&(null===(l=n.repl.owner)||void 0===l?void 0:l.username)&&(u="".concat(n.repl.slug,"-").concat(n.repl.owner.username)),u)r.push({href:"https://".concat(u).concat("replit.com"!==(null===window||void 0===window||null===(c=window.location)||void 0===c?void 0:c.hostname)?".staging":"",".replit.app"),private:!1})}if(n.repl.domains){var s=n.repl.domains.filter((function(e){return(null===e||void 0===e?void 0:e.hosting_deployment_id)===t})),d=!0,f=!1,p=void 0;try{for(var h,v=s[Symbol.iterator]();!(d=(h=v.next()).done);d=!0){var m=h.value;m&&r.push({href:"https://".concat(m.domain),private:!1,state:"verified"!==m.state?m.state:void 0})}}catch(g){f=!0,p=g}finally{try{d||null==v.return||v.return()}finally{if(f)throw p}}}i(r)}),[n]),(0,o.tZ)(u.G,{css:[s.l0.colWithGap(8),s.l0.flex.growAndShrink(1)],children:r.map((function(e,n){return(0,o.BX)(u.G,{css:[s.l0.rowWithGap(8),s.l0.align.center],children:[(0,o.tZ)(_.xv,{css:[s.l0.flex.shrink(1)],multiline:!1,children:(0,o.tZ)("a",{href:e.href,target:"_blank",css:[s.l0.color.foregroundDefault],children:e.href})}),e.private?(0,o.tZ)(M.Z,{color:s.TV.foregroundDefault}):null,(0,o.tZ)("a",{href:e.href,target:"_blank",css:[s.l0.display.flex,s.l0.align.center],children:(0,o.tZ)(N.Z,{color:s.TV.foregroundDefault})}),e.state?(0,o.BX)(_.xv,{multiline:!1,children:["(",e.state,")"]}):null]},"domains-".concat(n))}))})},O=t(652),W=t(4421),H=t(76735),V=t(88541),z=(i={},(0,p.Z)(i,B.r4.Gce,"Reserved VM"),(0,p.Z)(i,B.r4.CloudRun,"On Demand"),(0,p.Z)(i,B.r4.Static,"Static"),i),j=t(87076),q=t(43119),$=t(71440),Y=t(24635);function K(){var e=(0,q.Z)(["\n  fragment HostingActivityLogBuild on HostingBuild {\n    id\n    status\n    provider\n  }\n"]);return K=function(){return e},e}function Q(){var e=(0,q.Z)(["\n  fragment HostingActivityLogLine2 on HostingActivityLog {\n    id\n    build {\n      ...HostingActivityLogBuild\n    }\n    type\n    user {\n      id\n      displayName\n    }\n    timeCreated\n  }\n  ","\n"]);return Q=function(){return e},e}function J(){var e=(0,q.Z)(["\n  query HostingDeploymentActivityLogs2(\n    $replId: String!\n    $after: String\n    $count: Int\n  ) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        hostingDeployment {\n          ... on HostingDeployment {\n            id\n            activityLogs(after: $after, count: $count) {\n              items {\n                ...HostingActivityLogLine2\n              }\n              pageInfo {\n                hasNextPage\n                nextCursor\n              }\n            }\n          }\n          ... on NotFoundError {\n            message\n          }\n          ... on UnauthorizedError {\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return J=function(){return e},e}var ee={},ne=(0,$.Ps)(K()),te=(0,$.Ps)(Q(),ne),re=(0,$.Ps)(J(),te);var ie,oe=t(42241),ae=t(66482),le=t(1734),ce=function(e){var n=e.color;return(0,o.tZ)(u.G,{css:[s.l0.align.center,s.l0.rowWithGap(8),{textTransform:"capitalize"}],children:(0,o.tZ)(u.G,{as:"span",css:[s.l0.width("8px"),s.l0.height("8px"),s.l0.borderRadius("full"),{backgroundColor:n,boxShadow:"0 0 12px ".concat(n)}]})})};!function(e){e.Current="current"}(ie||(ie={}));var ue,se,de=(0,p.Z)({},ie.Current,{icon:(0,o.tZ)(ce,{color:s.TV.blueStronger}),text:"Current deployment"}),fe=u.K.div,pe=function(e){var n=e.activityLogItem,t=e.isCurrent?ie.Current:n.type,r=(0,l.Z)(c.useState(!1),2),i=r[0],a=r[1],d=(0,l.Z)(c.useState(!1),2),f=d[0],p=d[1],h=c.useRef(!1);c.useEffect((function(){h.current=!0;var e=setTimeout((function(){p(i)}),200);return function(){clearTimeout(e)}}),[i]);var v=t in de&&de[t];if(!v)return null;var m=v.icon,g=v.text;return(0,o.tZ)(u.G,{css:[s.l0.p(8)],onMouseEnter:function(){return a(!0)},onMouseLeave:function(){return a(!1)},children:(0,o.BX)(le.Z,{isOpen:f,onClickOutside:function(){return p(!1)},padding:8,children:[(0,o.tZ)(fe,{css:s.l0.cursor.pointer,children:m}),(0,o.tZ)(u.G,{css:[s.l0.maxWidth(240)],children:(0,o.tZ)(_.xv,{children:g})})]})})},he=t(93658),ve=function(e){return e.loading?(0,o.tZ)(u.G,{css:[s.l0.p(8),s.l0.center],children:(0,o.tZ)(A.Z,{})}):null},me=t(11086),ge=function(e){var n=e.build,t=n.id.slice(0,8),r=(0,l.Z)(c.useState(!1),2),i=r[0],a=r[1],d=(0,l.Z)(c.useState(!1),2),f=d[0],p=d[1],h=c.useRef(!1);return c.useEffect((function(){h.current=!0;var e=setTimeout((function(){p(i)}),200);return function(){clearTimeout(e)}}),[i]),(0,o.tZ)("span",{onMouseEnter:function(){return a(!0)},onMouseLeave:function(){return a(!1)},children:(0,o.BX)(le.Z,{isOpen:f,onClickOutside:function(){return p(!1)},padding:8,children:[(0,o.tZ)("span",{css:[y.gU.filled,s.l0.display.inlineBlock,s.l0.fontSize("small"),s.l0.px(4),s.l0.py(2),s.l0.borderRadius(4)],children:t}),(0,o.tZ)(u.G,{css:[s.l0.maxWidth(260)],children:(0,o.tZ)(_.xv,{variant:"small",children:n.id})})]})})},ye=(ue={},(0,p.Z)(ue,me.dD.Deploy,(function(e){return(0,o.BX)(o.HY,{children:["deployed ",(0,o.tZ)(ge,{build:e})]})})),(0,p.Z)(ue,me.dD.Rollback,(function(e){return(0,o.BX)(o.HY,{children:["rolled back ",(0,o.tZ)(ge,{build:e})]})})),(0,p.Z)(ue,me.dD.Fail,(function(e){return(0,o.BX)(o.HY,{children:["failed to deploy ",(0,o.tZ)(ge,{build:e})]})})),ue),Ze=function(e){var n=e.activityLogItem,t=n.type,r=n.build,i=n.user.displayName,a=t in ye&&ye[t](r);return a?(0,o.BX)(_.xv,{css:s.l0.color.foregroundDimmer,multiline:!1,children:[(0,o.tZ)("span",{css:[s.l0.color.foregroundDefault,s.l0.fontWeight.medium],children:i+" "}),a]}):null},be=(se={},(0,p.Z)(se,me.dD.Deploy,{icon:(0,o.tZ)(C.Z,{}),color:s.TV.accentPositiveDefault}),(0,p.Z)(se,me.dD.Rollback,{icon:(0,o.tZ)(C.Z,{}),color:s.TV.blurpleStronger}),(0,p.Z)(se,me.dD.Fail,{icon:(0,o.tZ)(H.Z,{}),color:s.TV.accentNegativeDefault}),se),we=function(e){var n=e.type,t=n in be&&be[n];if(!t)return null;var r=t.icon,i=t.color;return(0,o.tZ)(u.G,{css:[s.l0.p(8),{color:i}],children:r})},xe=t(625),ke=function(e){var n=e.context;(0,xe.j)(xe.U3.DEPLOYMENT_SECTION_VIEWED,{context:n})},Ce=t(9970),Se=t(9348);function Te(){var e=(0,q.Z)(["\n  query HostingDeployActionHistory(\n    $input: HostingBuildDeployActionHistoryInput!\n  ) {\n    hostingBuildDeployActionHistory(input: $input) {\n      ... on HostingBuildDeployActionHistoryResults {\n        results {\n          ... on HostingBuildDeployLogAction {\n            log\n          }\n          ... on HostingBuildDeployStatusAction {\n            status\n            message\n          }\n        }\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return Te=function(){return e},e}var Ee={},Re=(0,$.Ps)(Te());var Ie,Ge=t(60583),De=t(45317),_e=t(96351),Pe=t(24592),Be=t(63837),Ae=t(27691),Ue=function(e){var n=e.stage,t=e.activeStage;return n===e.erroredStage?(0,o.tZ)(H.Z,{alt:"error"}):n<t?(0,o.tZ)(Be.Z,{alt:"success"}):n===t?(0,o.tZ)(A.Z,{alt:"current"}):(0,o.tZ)(Pe.Z,{alt:"waiting"})},Le=function(e){var n=e.stage,t=e.activeStage;return n===e.erroredStage?{color:De.TV.white,backgroundColor:De.TV.accentNegativeDefault}:n<t?{color:De.TV.accentPositiveStrongest,backgroundColor:De.TV.accentPositiveDimmer}:n===t?{color:De.TV.white,backgroundColor:De.TV.accentPrimaryDefault}:{color:De.TV.foregroundDimmest,backgroundColor:De.TV.backgroundHigher}},Xe=function(e){var n=e.stage,t=e.totalStagesWithTitle,r=e.activeStage,i=e.text,a=e.erroredStage;return(0,o.tZ)(_e.D,{text:r?i:"",css:[s.l0.border({color:De.TV.backgroundDefault}),r?(0,h.Z)({},Le({stage:n,activeStage:r,erroredStage:a})):Ae.p.foregroundPulse(),{flex:1,height:26,zIndex:t-n,":first-of-type":{paddingLeft:16},":not(:first-of-type)":{paddingLeft:24},":not(:last-of-type)":{marginRight:-24}}],iconRight:r?(0,o.tZ)(Ue,{stage:n,activeStage:r,erroredStage:a}):void 0})},Ne=t(33280),Me=t(42237),Fe=t(45285),Oe=t(82568),We=[{id:0,title:"Provision",statusType:B.Fe.Pending},{id:1,title:"Build",statusType:B.Fe.Building},{id:2,title:"Bundle",statusType:B.Fe.Running},{id:3,title:"Promote",statusType:B.Fe.Promoting},{id:4,statusType:B.Fe.Success}],He=function(e){return We.find((function(n){return n.statusType===e}))},Ve=(0,Oe.X)({base:{borderRadius:6,paddingLeft:6,paddingRight:6,height:24},disabled:{pointerEvents:"none",color:s.TV.greyDefault}}),ze=(0,Oe.X)({container:[s.l0.borderRadius(8),{border:"1px solid var(--outline-dimmest)"}],top:[s.l0.colWithGap(12),s.l0.p(16),s.l0.pt(12)],header:[s.l0.flex.row,s.l0.justify.spaceBetween],cancel:Ve.base,canceling:[Ve.base,Ve.disabled],stages:[s.l0.flex.row,s.l0.flex.grow(1)],bottom:[s.l0.borderRadius(0,0,8,8),s.l0.overflow("hidden")],logsOpen:[s.l0.overflow("hidden"),s.l0.height("auto")],logsClosed:[s.l0.overflow("hidden"),s.l0.height(0)],xterm:[s.l0.width("100%"),s.l0.maxWidth("100%")],errorContainer:[s.l0.p(12),s.l0.colWithGap(4)],warning:[s.l0.rowWithGap(4),s.l0.align.center],link:{color:s.TV.foregroundDefault,textDecoration:"underline",":hover":{color:s.TV.accentPrimaryStronger}}}),je=function(e){var n,t,r,i,a,d,p,v,y,Z,w,x,k=e.initialBuild,C=e.hideHeader,S=e.viewBuildLogsOnLoad,T=e.onViewLogs,E=e.onCanceled,R=e.onError,I=e.openFile,G=(0,U.rm)(),P=(0,U.pn)(),L=P?{id:P.id,status:P.status,provider:P.provider,timeStarted:P.timeCreated,userDisplayName:P.user.displayName}:void 0,X=c.useRef(k||L),N=function(e){var n=(0,h.Z)({},Ee,e);return Y.a(Re,n)}({skip:!(null===(n=X.current)||void 0===n?void 0:n.id),variables:{input:{buildId:null!==(x=null===(t=X.current)||void 0===t?void 0:t.id)&&void 0!==x?x:""}},fetchPolicy:"network-only",ssr:!1,onCompleted:function(e){if(null===e||void 0===e?void 0:e.hostingBuildDeployActionHistory)switch(e.hostingBuildDeployActionHistory.__typename){case"NotFoundError":break;case"UnauthorizedError":R(e.hostingBuildDeployActionHistory.message);break;case"HostingBuildDeployActionHistoryResults":var n=e.hostingBuildDeployActionHistory.results;if(n&&n.length>0){var t=[],r=[],i=!0,o=!1,a=void 0;try{for(var l,c=n[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value;switch(u.__typename){case"HostingBuildDeployLogAction":t.push(u.log);break;case"HostingBuildDeployStatusAction":r.push(u)}}}catch(m){o=!0,a=m}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}le({type:"history",payload:t});var s=!0,d=!1,f=void 0;try{for(var p,h=r[Symbol.iterator]();!(s=(p=h.next()).done);s=!0){var v=p.value;ce(v.status)}}catch(m){d=!0,f=m}finally{try{s||null==h.return||h.return()}finally{if(d)throw f}}}break;default:R("Unexpected typename.")}},onError:function(e){R(e.message)}}),M=N.loading,F=N.refetch;(0,U.U)((function(e){switch(e.__typename){case"HostingBuildDeployLogAction":var n=e.log;le({type:"update",payload:n});break;case"HostingBuildDeployStatusAction":var t=e.status;ce(t)}}));var O=(0,l.Z)(c.useState(X.current?null===(r=He(X.current.status))||void 0===r?void 0:r.id:void 0),2),W=O[0],V=O[1],z=(0,l.Z)(c.useState("failed"===(null===(i=X.current)||void 0===i?void 0:i.status)?null===(d=He(null===(a=X.current)||void 0===a?void 0:a.status))||void 0===d?void 0:d.id:void 0),2),q=z[0],$=z[1],K=(0,l.Z)(c.useState(!1),2),Q=K[0],J=K[1],ee=(0,Fe.Z)().fs,ne=(0,l.Z)((0,Se.Z)({openFile:I,listFiles:ee.listFiles}),2),te=ne[0],re=ne[1],ie=(0,Ge.f)(),oe=(0,l.Z)(c.useReducer((function(e,n){switch(n.type){case"history":return te&&te.clear(),(0,Ce.Z)(n.payload).concat((0,Ce.Z)(e));case"update":return[n.payload];case"refetch":return te&&te.clear(),M||F(),[]}}),[]),2),ae=oe[0],le=oe[1],ce=function(e){if(e===B.Fe.Failed)$(W);else{var n=He(e);if(!n)return;V(n.id)}},ue=function(){var e=(0,f.Z)((function(){return(0,m.__generator)(this,(function(e){switch(e.label){case 0:return J(!0),[4,G()];case 1:return e.sent(),E(),[2]}}))}));return function(){return e.apply(this,arguments)}}(),se=(0,l.Z)(c.useState(S||!1),2),de=se[0],fe=se[1],pe=function(){fe(!de),de||ke({context:"deploy_progress_logs"})};c.useEffect((function(){ke({context:"deploy_progress"})}),[]),c.useEffect((function(){var e;(null===(e=X.current)||void 0===e?void 0:e.id)&&P&&P.id!==X.current.id&&(X.current={id:P.id,status:P.status,provider:P.provider,timeStarted:P.timeCreated,userDisplayName:P.user.displayName},V(void 0),$(void 0),le({type:"refetch"}))}),[P,null===(p=X.current)||void 0===p?void 0:p.id,F]),c.useEffect((function(){var e;void 0!==W&&"failed"===(null===(e=X.current)||void 0===e?void 0:e.status)&&$(W)}),[W,null===(v=X.current)||void 0===v?void 0:v.status]),c.useEffect((function(){te&&ae.forEach((function(e){return te.write(e)}))}),[ae,te]);var he,ve=null===(he=W,y=We.find((function(e){return e.id===he})))||void 0===y?void 0:y.statusType,me=ve!==B.Fe.Success&&!q;if(!X.current)return null;var ge=We.filter((function(e){return"title"in e}));return(0,o.BX)(u.G,{css:ze.container,children:[(0,o.BX)(u.G,{css:ze.top,children:[C?null:(0,o.BX)(u.G,{css:ze.header,children:[(0,o.BX)(u.G,{css:s.l0.rowWithGap(8),children:[(0,o.tZ)(_.xv,{variant:"subheadDefault",multiline:!1,children:"Upcoming"}),me?(0,o.tZ)(g.zx,{small:!0,text:"Cancel",css:Q?ze.canceling:ze.cancel,onClick:ue,iconRight:Q?(0,o.tZ)(A.Z,{}):void 0}):null]}),(0,o.BX)(u.G,{css:s.l0.rowWithGap(6),children:[(null===(Z=X.current)||void 0===Z?void 0:Z.timeStarted)&&(null===(w=X.current)||void 0===w?void 0:w.userDisplayName)?(0,o.BX)(_.xv,{css:s.l0.color.greyStronger,multiline:!1,children:["Started ".concat((0,D.Z)(new Date(X.current.timeStarted),Date.now(),{addSuffix:!0})," by "),(0,o.tZ)("span",{css:s.l0.color.foregroundDefault,children:X.current.userDisplayName})]}):null,(0,o.tZ)(j.h,{onClick:pe,alt:"View build logs",children:de?(0,o.tZ)(Me.ChevronUp,{}):(0,o.tZ)(Me.ChevronDown,{})})]})]}),(0,o.tZ)(u.G,{css:ze.stages,children:ge.map((function(e){var n=e.id,t=e.title;return(0,o.tZ)(Xe,{stage:n,totalStagesWithTitle:ge.length,text:t,activeStage:W,erroredStage:q},n)}))})]}),(0,o.BX)(u.G,{css:ze.bottom,children:[(0,o.BX)(u.G,{css:de?ze.logsOpen:ze.logsClosed,children:[(0,o.tZ)(Ne.R,{}),(0,o.tZ)(u.G,{css:[s.l0.display.flex,s.l0.pt(12),s.l0.pl(16),s.l0.overflow("hidden"),{backgroundColor:null===ie||void 0===ie?void 0:ie.background}],children:(0,o.tZ)(u.K.div,{css:ze.xterm,ref:re})})]}),q&&ve?(0,o.BX)(o.HY,{children:[(0,o.tZ)(Ne.R,{}),ve===B.Fe.Building?(0,o.BX)(u.G,{css:ze.errorContainer,children:[(0,o.BX)(u.G,{css:ze.warning,children:[(0,o.tZ)(H.Z,{color:s.TV.accentNegativeStronger}),(0,o.tZ)(_.xv,{css:s.l0.fontWeight.medium,multiline:!1,children:"Your app failed to build"})]}),(0,o.BX)(_.xv,{css:s.l0.mb(16),children:["It looks like your Repl doesn\u2019t run. In order to deploy, your Repl has to run successfully in the Workspace. Please fix any issues and try deploying again or see"," ",(0,o.tZ)("a",{href:"https://docs.replit.com/hosting/deployments/troubleshooting",target:"_blank",css:ze.link,onClick:function(){return ke({context:"troubleshooting_doc"})},children:"troubleshooting tips"}),"."]}),de?null:(0,o.tZ)(g.zx,{text:"Build logs",iconLeft:(0,o.tZ)(b.Z,{}),onClick:pe})]}):null,ve===B.Fe.Promoting?(0,o.BX)(u.G,{css:ze.errorContainer,children:[(0,o.BX)(u.G,{css:ze.warning,children:[(0,o.tZ)(H.Z,{color:s.TV.accentNegativeStronger}),(0,o.tZ)(_.xv,{css:s.l0.fontWeight.medium,multiline:!1,children:"Your app failed to promote"})]}),(0,o.BX)(_.xv,{css:s.l0.mb(16),children:["It looks like something went wrong on the production server. It might have something to do with your app's logs. Please fix any issue and try deploying again or see"," ",(0,o.tZ)("a",{href:"https://docs.replit.com/hosting/deployments/troubleshooting",target:"_blank",css:ze.link,onClick:function(){return ke({context:"troubleshooting_doc"})},children:"troubleshooting tips"}),"."]}),X.current.provider!==B.r4.Static?(0,o.tZ)(g.zx,{text:"All app logs",iconLeft:(0,o.tZ)(b.Z,{}),onClick:function(){T()}}):null]}):null]}):null]})]})},qe=t(3652);function $e(e){var n,t=e.view,r=e.onViewAction,i=e.onError,a=e.openFile,u=e.data,s=(0,U.$y)(),d=(0,l.Z)(c.useState((0,G.yF)({view:t,data:u},G.kO.History)||{view:Ie.List}),2),f=d[0],p=d[1];if(!s)return i("No current build found"),null;switch(f.view){case Ie.List:n=(0,o.tZ)(Ye,{replId:s.repl.id,buildId:s.id,onError:i,onSelect:function(e,n,t){return p({view:Ie.Logs,buildId:e,buildStatus:n,buildProvider:t})}});break;case Ie.Logs:n=(0,o.tZ)(Ke,{openFile:a,buildId:f.buildId,buildStatus:f.buildStatus,buildProvider:f.buildProvider,onViewLogs:function(){return r({type:G.ap.ChangeView,payload:{view:G.kO.Logs}})},onBack:function(){return p({view:Ie.List})}})}return(0,o.tZ)(I,{children:n})}!function(e){e.List="list",e.Logs="logs"}(Ie||(Ie={}));var Ye=function(e){var n=e.replId,t=e.buildId,r=e.onError,i=e.onSelect,a=function(e){var n=(0,h.Z)({},ee,e);return Y.a(re,n)}({variables:{replId:n,count:20},fetchPolicy:"cache-and-network",ssr:!1}),p=a.data,v=a.loading,g=a.error,y=a.fetchMore,Z=(0,l.Z)(c.useState(null),2),w=Z[0],x=Z[1];c.useEffect((function(){ke({context:G.kO.History})}),[]),c.useEffect((function(){if(null===p||void 0===p?void 0:p.repl)if("Repl"===p.repl.__typename){if(p.repl.hostingDeployment)switch(p.repl.hostingDeployment.__typename){case"HostingDeployment":x(p.repl.hostingDeployment.activityLogs.items);break;case"NotFoundError":case"UnauthorizedError":r(p.repl.hostingDeployment.message)}}else r("Unexpected typename.")}),[p,r]),c.useEffect((function(){g&&r(g.message)}),[g,r]);var k=function(e){var n;return"Repl"===(null===e||void 0===e?void 0:e.repl.__typename)&&"HostingDeployment"===(null===(n=e.repl.hostingDeployment)||void 0===n?void 0:n.__typename)&&"HostingActivityLogConnection"===e.repl.hostingDeployment.activityLogs.__typename&&e.repl.hostingDeployment.activityLogs}(p),C=k&&k.pageInfo.hasNextPage,S=function(){var e=(0,f.Z)((function(){return(0,m.__generator)(this,(function(e){switch(e.label){case 0:return v||k&&null==k.pageInfo.nextCursor||!k||!k.pageInfo.hasNextPage?[2]:[4,y({variables:{input:{after:k.pageInfo.nextCursor,count:20}}})];case 1:return e.sent(),[2]}}))}));return function(){return e.apply(this,arguments)}}(),T=(0,oe.Z)({onLoadMore:S,rootMargin:"0px 0px 300px 0px"}).targetRef;return(0,o.BX)(o.HY,{children:[w&&0===w.length?(0,o.tZ)(u.G,{css:[s.l0.pb(8),s.l0.center,s.l0.align.stretch],children:(0,o.tZ)(d.E,{colorway:"grey",icon:(0,o.tZ)(he.Z,{}),text:"Deployment has no history"})}):null,w&&w.length>0?w.map((function(e){var n=t===e.build.id;return(0,o.BX)(u.G,{css:[s.l0.rowWithGap(12),s.l0.py(12),s.l0.align.center,{borderBottom:"1px solid ".concat(s.TV.outlineDimmest),"&:first-child":{paddingTop:0},"&:last-child":{borderBottom:"none"}}],children:[(0,o.tZ)(we,{type:e.type}),(0,o.BX)(u.G,{css:s.l0.flex.growAndShrink(1),children:[(0,o.tZ)(Ze,{activityLogItem:e}),(0,o.tZ)(_.xv,{variant:"small",css:s.l0.color.foregroundDimmest,multiline:!1,children:(0,D.Z)(new Date(e.timeCreated),Date.now(),{addSuffix:!0})})]}),(0,o.tZ)(u.G,{css:[s.l0.width(32),s.l0.align.end],children:(0,o.tZ)(pe,{activityLogItem:e,isCurrent:n})}),(0,o.tZ)(u.G,{children:(0,o.tZ)(j.h,{alt:"View Build Logs",onClick:function(){return i(e.build.id,e.build.status,e.build.provider)},children:(0,o.tZ)(b.Z,{})})})]},e.id)})):null,(0,o.tZ)(ve,{loading:v}),!v&&C?(0,o.tZ)(u.G,{css:[s.l0.center,s.l0.pt(16)],children:(0,o.tZ)(j.h,{tooltipHidden:!0,alt:"Show more",onClick:S,ref:T,children:(0,o.tZ)(ae.Z,{})})}):null]})},Ke=function(e){var n=e.buildId,t=e.buildStatus,r=e.buildProvider,i=e.onViewLogs,a=e.onBack,l=e.openFile;return(0,o.BX)(u.G,{css:[s.l0.colWithGap(16)],children:[(0,o.tZ)(j.h,{alt:"Back to History",onClick:function(){return a()},children:(0,o.tZ)(qe.Z,{})}),(0,o.tZ)(je,{initialBuild:{id:n,status:t,provider:r},hideHeader:!0,viewBuildLogsOnLoad:!0,onViewLogs:i,onError:function(){},onCanceled:function(){},openFile:l})]})},Qe=function(e){var n=e.text,t=e.onClick;return(0,o.tZ)("button",{css:[s.l0.cursor.pointer,s.l0.reset.button,s.l0.color.accentPrimaryStronger,s.l0.focusRing,{lineHeight:1.2,transitionProperty:"color, box-shadow",transitionDuration:W.H.duration,transitionTimingFunction:W.H.timingFunction,":not([disabled])":{cursor:"pointer","@media (hover: hover)":{":hover":{color:s.TV.accentPrimaryStrongest}},":not(textarea):active":{color:s.TV.accentPrimaryStronger}}}],onClick:t,children:n})},Je=function(e){var n=e.name,t=e.sku,r=e.canManage,i=e.onManageClick;return(0,o.BX)(u.G,{css:s.l0.rowWithGap(4),children:[(0,o.tZ)(_.xv,{multiline:!1,children:n}),(0,o.BX)(_.xv,{color:"dimmest",multiline:!1,children:["(",t,")"]}),r?(0,o.tZ)(Qe,{text:"Manage",onClick:i}):null]})},en=function(e){var n=e.label,t=e.children,r=e.fullWidth;return(0,o.BX)(u.G,{css:[s.l0.flex.row,s.l0.align.baseline,r?[s.l0.flex.grow(1),s.l0.justify.spaceBetween]:null],children:[(0,o.tZ)(u.G,{css:s.l0.minWidth(100),children:(0,o.tZ)(_.xv,{css:[s.l0.color.foregroundDimmer],multiline:!1,children:n})}),t]})},nn=function(e){var n=e.provider,t=e.onViewAction,r=(0,U.kW)(),i=(0,U.Sl)(),a=(0,U.$y)(),l=void 0!==i,c=void 0!==a,f=n===B.r4.Gce&&c&&!l,p=n!==B.r4.Static&&c&&null===a.hasImageTag,h=Boolean((r===U.z4.Ready||r===U.z4.Suspended)&&!p),v=null,m=null,y=null,Z=null;a&&(v=(0,o.BX)(o.HY,{children:[(0,o.BX)(en,{label:"Deployed",children:[(0,D.Z)(new Date(a.timeCreated),Date.now(),{addSuffix:!0})," ","by ",a.user.displayName]}),(0,o.BX)(en,{label:"Status",children:[(0,o.tZ)(X,{}),a.status===B.Fe.Failed?(0,o.tZ)(u.G,{css:s.l0.ml(8),children:(0,o.tZ)(Qe,{text:"View logs",onClick:function(){t({type:G.ap.ChangeView,payload:{view:G.kO.History,data:{view:Ie.Logs,buildId:a.id,buildStatus:a.status,buildProvider:a.provider}}})}})}):null]}),(0,o.tZ)(en,{label:"Domains",children:(0,o.tZ)(F,{currentBuild:a})})]}));var b=(0,V.P5)({controlName:"flag-funky-future",logFlagToAnalytics:!1});switch(n){case B.r4.Gce:l&&(m=(0,o.tZ)(en,{label:"Type",fullWidth:!c,children:(0,o.tZ)(Je,{name:"Reserved VM",sku:(0,O.$)(i.sku),canManage:h,onManageClick:function(){t({type:G.ap.ChangeView,payload:{view:G.kO.TierSelection}})}})}));break;case B.r4.CloudRun:case B.r4.Static:b&&!l&&(m=(0,o.tZ)(en,{label:"Type",fullWidth:!c,children:(0,o.tZ)(Je,{name:z[n],sku:"Beta",canManage:h&&c,onManageClick:function(){t({type:G.ap.ChangeView,payload:{view:G.kO.Settings}})}})}));case B.r4.Goval:}return p&&(y=(0,o.tZ)(u.G,{children:(0,o.tZ)(d.E,{icon:(0,o.tZ)(H.Z,{}),colorway:"warning",text:"To upgrade, please redeploy."})})),f&&(Z=(0,o.tZ)(g.zx,{onClick:function(){t({type:G.ap.ChangeView,payload:{view:G.kO.TierSelection}})},text:"Select hosting tier"})),v||m||y||Z?(0,o.tZ)(I,{children:(0,o.BX)(P.Tg,{elevated:!0,css:[s.l0.colWithGap(8),s.l0.p(16),s.l0.pt(12),s.l0.borderRadius(8)],children:[a?(0,o.tZ)(_.xv,{variant:"subheadDefault",multiline:!1,children:"Production"}):null,(0,o.BX)(u.G,{css:[s.l0.colWithGap(4)],children:[v,m,y,Z]})]})}):null},tn=t(81962),rn=t(56169),on=u.K.div,an=function(e){var n=e.id,t=e.title,r=e.information,i=e.optional,a=void 0!==i&&i,d=e.children,f=(0,rn.H)()(n),p=(0,l.Z)(c.useState(!1),2),h=p[0],v=p[1],m=(0,l.Z)(c.useState(!1),2),g=m[0],y=m[1],Z=c.useRef(!1);return c.useEffect((function(){Z.current=!0;var e=setTimeout((function(){y(h)}),200);return function(){clearTimeout(e)}}),[h]),(0,o.BX)(u.G,{css:[s.l0.colWithGap(8)],children:[(0,o.BX)(u.G,{tag:"label",htmlFor:f,css:[s.l0.flex.row,s.l0.flex.grow(1),s.l0.justify.spaceBetween,s.l0.align.baseline],children:[(0,o.BX)(u.G,{css:[s.l0.rowWithGap(8),s.l0.justify.start,s.l0.align.center,s.l0.justify.center],onMouseEnter:function(){return v(!0)},onMouseLeave:function(){return v(!1)},children:[(0,o.tZ)(_.xv,{color:"dimmer",multiline:!1,children:t}),(0,o.BX)(le.Z,{isOpen:g,onClickOutside:function(){return y(!1)},padding:8,children:[(0,o.tZ)(on,{children:(0,o.tZ)(he.Z,{css:[s.l0.color.foregroundDimmer]})}),(0,o.tZ)(u.G,{css:[s.l0.maxWidth(240)],children:(0,o.tZ)(_.xv,{color:"dimmer",children:r})})]})]}),a?(0,o.tZ)(_.xv,{variant:"small",color:"dimmest",multiline:!1,children:"optional"}):null]}),d]})},ln=t(11192),cn=t(96742),un=t(39137),sn=t(59884),dn=t(8622);function fn(){var e=(0,q.Z)(["\n  query CheckReplitAppSubdomainAvailability(\n    $subdomain: String!\n    $deploymentId: String\n  ) {\n    replitAppSubdomainAvailability(\n      subdomain: $subdomain\n      deploymentId: $deploymentId\n    ) {\n      __typename\n      ... on ReplitAppSubdomainAvailabilityResult {\n        available\n        message\n      }\n      ... on UserError {\n        errorMessage: message\n      }\n    }\n  }\n"]);return fn=function(){return e},e}var pn={},hn=(0,$.Ps)(fn());var vn,mn=t(75920),gn=t(66539),yn=function(e){var n=e.type,t=e.loading,r=e.disabled,i=e.onClick;return(0,o.tZ)(g.zx,{onClick:i,text:t?"":"Add ".concat(n),iconLeft:t?void 0:(0,o.tZ)(dn.Z,{}),disabled:t||r})},Zn=function(e){var n=e.id,t=e.value,r=e.loading,i=e.disabled,a=e.onChange,l=e.error,c=(0,rn.H)(),d=(0,cn.A)(t);return(0,o.BX)(u.G,{css:[s.l0.colWithGap(4)],children:[(0,o.tZ)(un.II,{value:d?t:"",onChange:function(e){return a(e.target.value)},css:[s.l0.color.greyStrongest],disabled:r||i,"aria-describedby":c(n+"reasonError")}),l?(0,o.tZ)(u.G,{css:[s.l0.color.accentNegativeStronger],"aria-live":"polite","aria-atomic":"true",id:c(n+"reasonError"),children:(0,o.tZ)("span",{children:l})}):null]})},bn=function(e){var n=e.index,t=e.name,r=e.value,i=e.disabled,a=e.updateEnvVarName,l=e.updateEnvVarValue,c=e.removeEnvVar,d=(0,rn.H)();return(0,o.BX)(u.G,{css:[s.l0.rowWithGap(12)],children:[(0,o.tZ)(un.II,{placeholder:"Name",id:"".concat(d,"-name-").concat(n),value:t,onChange:function(e){return a(t,e.target.value)},disabled:i}),(0,o.tZ)(un.II,{placeholder:"Value",name:"".concat(d,"-value-").concat(n),value:r,onChange:function(e){return l(t,e.target.value)},disabled:i}),i?null:(0,o.tZ)(j.h,{css:[y.gU.outlined,s.l0.p(16)],onClick:function(){return c(t)},alt:"Remove variable",children:(0,o.tZ)(sn.Z,{})})]})},wn=function(e){var n,t,r=e.subdomain,i=e.deploymentId,a=e.onChange,l=e.updateValidity,f=(0,rn.H)(),p=function(e){var n=(0,h.Z)({},pn,e);return Y.a(hn,n)}({variables:{subdomain:r,deploymentId:i},skip:0===r.length}),v=p.data,m=p.loading,g=p.error,y="ReplitAppSubdomainAvailabilityResult"===(null===v||void 0===v?void 0:v.replitAppSubdomainAvailability.__typename)&&v.replitAppSubdomainAvailability.available,Z="ReplitAppSubdomainAvailabilityResult"===(null===v||void 0===v?void 0:v.replitAppSubdomainAvailability.__typename)?v.replitAppSubdomainAvailability.message:null===v||void 0===v||null===(n=v.replitAppSubdomainAvailability)||void 0===n?void 0:n.errorMessage;return(0,c.useEffect)((function(){l(y)}),[y]),g?(0,o.tZ)(d.E,{colorway:"negative",text:"Something went wrong, please try refreshing the page."}):(0,o.BX)(u.G,{children:[(0,o.BX)(u.G,{css:[s.l0.rowWithGap(4),s.l0.align.center],children:[(0,o.tZ)(un.II,{id:"subdomain-".concat(f),placeholder:"subdomain",value:r,onChange:function(e){return a(e.target.value)}}),(0,o.BX)(_.xv,{multiline:!1,children:["replit.com"!==(null===window||void 0===window||null===(t=window.location)||void 0===t?void 0:t.hostname)?".staging":"",".replit.app"]})]}),(0,o.BX)(u.G,{css:[s.l0.rowWithGap(4),s.l0.align.center,s.l0.pt(4)],children:[m?(0,o.BX)(o.HY,{children:[(0,o.tZ)(A.Z,{}),(0,o.tZ)(_.xv,{multiline:!1,children:"Checking availability"})]}):null,y?(0,o.BX)(o.HY,{children:[(0,o.tZ)(Be.Z,{color:"green"}),(0,o.tZ)(_.xv,{css:[s.l0.color.greenDefault],multiline:!1,children:"Available"})]}):null,y||m?null:(0,o.BX)(o.HY,{children:[(0,o.tZ)(H.Z,{color:"red"}),(0,o.tZ)(_.xv,{css:[s.l0.color.redDefault],multiline:!1,children:Z})]})]})]})},xn=function(e){var n=e.appType,t=e.onChange,r=(0,rn.H)();return(0,o.tZ)(mn.hE,{name:"deploymentTargetSelector",value:n,onChange:t,row:!0,css:[s.l0.width("100%"),s.l0.flex.row],children:[{value:B.Vp.Server,name:"Web Server",description:"ex. an API or website"},{value:B.Vp.Worker,name:"Background Worker",description:"ex. a Discord or Slack bot"}].map((function(e,n){return(0,o.tZ)(u.G,{css:[s.l0.flex.grow(1)],children:(0,o.tZ)(gn.u,{tooltip:e.description,children:(0,o.tZ)(mn.rK,{id:r(e.value),value:e.value,text:e.name})})},n)}))})},kn=t(70991),Cn=function(e){var n,t,r,i,a,d=e.isNewDeployment,p=e.initialSubdomain,h=e.provider,v=e.onDeploy,y=e.onCancel,Z=e.onError,b=(0,U.$y)(),w=(0,U.kW)(),x=(0,U.XA)(),k=(0,Fe.Z)(),S=(0,l.Z)(c.useState(B.Vp.Server),2),T=S[0],E=S[1],R=(0,l.Z)(c.useState(p),2),I=R[0],G=R[1],D=(0,l.Z)(c.useState(!1),2),_=D[0],P=D[1],L=(0,l.Z)(c.useState(null),2),X=L[0],N=L[1],M=(0,l.Z)(c.useState(null),2),F=M[0],O=M[1],W=(0,l.Z)(c.useState(void 0),2),H=W[0],z=W[1],j=(0,l.Z)(c.useState(null!==(a=b&&b.envVars.map((function(e){return{name:e.name,value:e.value}})))&&void 0!==a?a:[]),2),q=j[0],$=j[1],Y=(0,l.Z)(c.useState(!1),2),K=Y[0],Q=Y[1],J=(0,l.Z)(c.useState(null),2),ee=J[0],ne=J[1],te=(0,l.Z)(c.useState(void 0),2),re=te[0],ie=te[1],oe=(0,l.Z)(c.useState("loading"),2),ae=oe[0],le=oe[1],ce=T!==B.Vp.Static,ue=h===B.r4.Gce,se=T===B.Vp.Static,de=(0,V.P5)({controlName:"flag-funky-future",logFlagToAnalytics:!1});c.useEffect((function(){ke({context:"deploy_options"})}),[]),c.useEffect((function(){(0,f.Z)((function(){var e,n,t,r;return(0,m.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,5,,6]),[4,(0,ln.$f)(k.dotReplit)];case 1:return e=i.sent(),n=null,d?[4,(0,ln.xk)(k.fs)]:[3,3];case 2:switch(t=i.sent(),$(t),h){case B.r4.Gce:n=e.ignorePorts?B.Vp.Worker:B.Vp.Server;break;case B.r4.CloudRun:de&&(n=B.Vp.CloudRun);break;case B.r4.Static:de&&(n=B.Vp.Static)}return[3,4];case 3:n=e.appType,i.label=4;case 4:return N(e.buildCommand),n!==B.Vp.Static?O(e.runCommand):ne(e.publicDir),h===B.r4.Gce&&Q(e.ignorePorts||!1),E(n||B.Vp.Server),[3,6];case 5:return r=i.sent(),Z(r),[3,6];case 6:return le("ready"),[2]}}))}))()}),[d,h,de,k.fs,k.dotReplit,b,Z]);var fe=function(e,n){var t=q.findIndex((function(n){return n.name===e})),r=(0,Ce.Z)(q);r[t].name=n,$(r)},pe=function(e,n){var t=q.findIndex((function(n){return n.name===e})),r=(0,Ce.Z)(q);r[t].value=n,$(r)},he=function(e){var n=q.filter((function(n){return n.name!==e}));$(n)},ve=function(){var e=(0,f.Z)((function(){var e,n;return(0,m.__generator)(this,(function(t){switch(t.label){case 0:if(!(e=(_||me)&&I.length?I:void 0))return[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,x(q.filter((function(e){return(0,cn.G)(e)})),e,{buildCommand:X,runCommand:F,appType:T,ignorePorts:K,publicDir:ee})];case 2:return t.sent(),v(),[3,4];case 3:return n=t.sent(),le("ready"),(0,tn.Z)(n,kn.ZG)?(z("Run command cannot be empty."),[2]):(0,tn.Z)(n,kn.KB)?(ie("Public directory cannot be empty."),[2]):(Z(n.message),[3,4]);case 4:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),me="HostingDeployment"===(null===b||void 0===b||null===(n=b.repl)||void 0===n||null===(t=n.hostingDeployment)||void 0===t?void 0:t.__typename)?b.repl.hostingDeployment.replitAppSubdomain:void 0,ge="HostingDeployment"===(null===b||void 0===b||null===(r=b.repl)||void 0===r||null===(i=r.hostingDeployment)||void 0===i?void 0:i.__typename)?b.repl.hostingDeployment.id:void 0,ye="ready"!==ae||w===U.z4.Preparing,Ze=ye||!_&&!me;return(0,o.BX)(u.G,{css:[s.l0.colWithGap(16)],children:[me?null:(0,o.tZ)(an,{id:"primaryDomain",title:"Primary domain",information:"You can add more custom domains after deploying",children:(0,o.tZ)(wn,{subdomain:I,deploymentId:ge,onChange:G,updateValidity:P})}),(0,o.tZ)(an,{id:"buildCommand",title:"Build command",information:"The build command is the command-line statement that compiles your app at build time.",optional:!0,children:(0,o.tZ)(Zn,{id:"buildCommand",value:X,onChange:N,loading:"loading"===ae,disabled:ye})}),ce?(0,o.tZ)(an,{id:"runCommand",title:"Run command",information:"The run command is the command-line statement that launches your app after it has been built.",children:(0,o.tZ)(Zn,{id:"runCommand",value:F,onChange:O,loading:"loading"===ae,disabled:ye,error:H})}):null,(0,o.tZ)(an,{id:"envVars",title:"Environment variables",information:"Choose which environment variables should be used for your deployment.",children:(0,o.BX)(u.G,{css:[s.l0.colWithGap(12)],children:[q.length>0?q.map((function(e,n){var t=e.name,r=e.value;return(0,o.tZ)(bn,{index:n,name:t,value:r,updateEnvVarName:fe,updateEnvVarValue:pe,removeEnvVar:he,disabled:ye},n)})):null,(0,o.tZ)(yn,{onClick:function(){$((0,Ce.Z)(q).concat([{name:"",value:""}]))},type:"environment variable",loading:"loading"===ae,disabled:ye})]})}),se?(0,o.tZ)(an,{id:"publicDir",title:"Public Directory",information:"The public directory is the root of your static site.",children:(0,o.tZ)(Zn,{id:"publicDir",value:ee,onChange:ne,loading:"loading"===ae,disabled:ye,error:re})}):null,ue?(0,o.tZ)(an,{id:"deploymentAppType",title:"App type",information:"The type of app you'd like to deploy.",children:(0,o.tZ)(xn,{appType:T,onChange:function(e){E(e),Q((e===B.Vp.Server||e===B.Vp.Worker)&&e===B.Vp.Worker)}})}):null,(0,o.BX)(u.G,{css:[s.l0.rowWithGap(8)],children:[!ye&&b?(0,o.tZ)(g.zx,{text:"Cancel",onClick:y,disabled:ye}):null,(0,o.tZ)(u.G,{css:s.l0.flex.grow(1),children:(0,o.tZ)(g.zx,{colorway:"primary",onClick:ve,text:(w===U.z4.Preparing?"Preparing":"loading"===ae&&"Fetching options")||"ready"===ae&&"Deploy"||"",iconLeft:ye?(0,o.tZ)(A.Z,{}):(0,o.tZ)(C.Z,{}),disabled:Ze})})]})]})},Sn=function(e){var n=e.view,t=e.onViewAction,r=e.onError,i=e.openFile,a=e.data,l=(0,U.kW)(),u=(0,U.hn)(),s=(0,U.Sl)(),f=(0,U.H7)(),p=(0,U.$y)(),h=(0,U.pn)(),v=(0,G.yF)({view:n,data:a},G.kO.DeploymentOptions),m=!(void 0!==h)&&!("string"===typeof u),y=void 0!==p,Z=void 0!==s&&void 0!==s,b=y?p.provider:null===v||void 0===v?void 0:v.provider,w=b===B.r4.Gce&&y&&!Z,x=l===U.z4.Ready||l===U.z4.Suspended;c.useEffect((function(){ke({context:G.kO.Deployment})}),[]),c.useEffect((function(){l===U.z4.Deploying&&n!==G.kO.DeploymentInProgress&&t({type:G.ap.ChangeView,payload:{view:G.kO.DeploymentInProgress}})}),[l,n,t]);var k=null;switch(n){case G.kO.Deployment:if(w||!y)break;k=(0,o.tZ)(I,{children:(0,o.tZ)(g.zx,{disabled:!x,onClick:function(){return t({type:G.ap.ChangeView,payload:{view:G.kO.DeploymentOptions,data:{provider:p.provider}}})},text:"Redeploy",iconLeft:(0,o.tZ)(Me.Deploy,{})})});break;case G.kO.DeploymentOptions:if(w)break;if(!b){k=(0,o.tZ)(d.E,{colorway:"warning",icon:(0,o.tZ)(H.Z,{}),text:"Provider not found"});break}k=(0,o.tZ)(I,{children:(0,o.tZ)(Cn,{isNewDeployment:m,initialSubdomain:null!==f&&void 0!==f?f:"",provider:b,onDeploy:function(){return t({type:G.ap.ChangeView,payload:{view:G.kO.DeploymentInProgress}})},onCancel:function(){return t({type:G.ap.ChangeView,payload:{view:G.kO.Deployment}})},onError:r})});break;case G.kO.DeploymentInProgress:k=(0,o.BX)(o.HY,{children:[(0,o.tZ)(I,{children:(0,o.tZ)(je,{openFile:i,viewBuildLogsOnLoad:!y,onViewLogs:function(){t({type:G.ap.ChangeView,payload:{view:G.kO.Logs}})},onCanceled:function(){t({type:G.ap.ChangeView,payload:{view:G.kO.Deployment}}),r("Build cancelled")},onError:r})}),x&&y?(0,o.tZ)(I,{children:(0,o.tZ)(g.zx,{onClick:function(){return t({type:G.ap.ChangeView,payload:{view:G.kO.DeploymentOptions,data:{provider:p.provider}}})},text:"Redeploy",iconLeft:(0,o.tZ)(Me.Deploy,{})})}):null]})}return(0,o.BX)(o.HY,{children:[(0,o.tZ)(nn,{provider:b,onViewAction:t}),k,w?(0,o.tZ)(I,{children:(0,o.tZ)(d.E,{colorway:"warning",icon:(0,o.tZ)(he.Z,{}),text:"Your deployment requires a tier in order to re-deploy"})}):null]})},Tn=t(8907),En=t(77806),Rn=t(60566),In=t(91204),Gn=t(10394),Dn=t(11983),_n=function(e){var n=e.onError,t=(0,U.hn)(),r=(0,U.$y)(),i=(r&&r.repl.domains||[]).filter((function(e){return null!==e&&null==(null===e||void 0===e?void 0:e.hosting_deployment_id)})),a=(0,c.useState)(0!==i.length),l=a[0],d=a[1],f=(0,c.useState)(!0),p=f[0],h=f[1];return(0,c.useEffect)((function(){ke({context:G.kO.Domains})}),[]),t&&r?(0,o.tZ)(I,{children:(0,o.BX)(u.G,{css:[s.l0.colWithGap(16)],children:[l?(0,o.tZ)(Bn,{canonicalCustomDomains:i,deploymentId:t,proxyIp:r.repl.apexProxy,replId:r.repl.id,onBegin:function(){return h(!1)},onClose:function(){return h(!0)},onComplete:function(){d(!1),h(!0)}}):null,p?(0,o.tZ)(Tn.Z,{showTitle:!1,replId:r.repl.id,deploymentId:t,onLink:function(){},onUnlink:function(){}}):null]})}):(n("No current build found"),null)};!function(e){e.Intro="intro",e.BeginTransfer="begin-transfer",e.Finished="finished"}(vn||(vn={}));var Pn,Bn=function(e){var n,t=e.canonicalCustomDomains,r=e.deploymentId,i=e.onBegin,a=e.onClose,l=e.onComplete,d=e.replId,f=e.proxyIp,p=(0,c.useState)(vn.Intro),h=p[0],v=p[1],m=0,y=1===t.length?"domain":"domains",Z=(0,o.BX)(u.G,{css:[s.l0.rowWithGap(16)],children:[(0,o.tZ)(j.h,{alt:"Back",onClick:function(){v(vn.Intro),a()},colorway:"grey",children:(0,o.tZ)(qe.Z,{})}),(0,o.tZ)(_.xv,{variant:"subheadDefault",multiline:!1,children:"Transfer Domains"})]});switch(h){case vn.Intro:n=(0,o.BX)(P.Tg,{elevated:!0,css:[s.l0.align.start,s.l0.border({color:s.TV.outlineDimmer}),s.l0.borderRadius(8),s.l0.colWithGap(8),s.l0.p(8)],children:[(0,o.BX)(_.xv,{children:["You have attached ",t.length," custom ",y," to your development Repl. Please transfer"," ","domain"===y?"it":"them"," to your deployment for the best user experience."]}),(0,o.tZ)(g.zx,{colorway:"primary",text:"Transfer ".concat(y," to deployment"),onClick:function(){v(vn.BeginTransfer),i()}})]});break;case vn.BeginTransfer:n=(0,o.BX)(o.HY,{children:[Z,(0,o.tZ)(_.xv,{children:"Update the following records with your domain provider."}),t.map((function(e){return(0,o.tZ)(An,{deploymentId:r,customDomain:e,onTransferred:function(){(m+=1)===t.length&&v(vn.Finished)},proxyIp:f,replId:d},e.domain)}))]});break;case vn.Finished:n=(0,o.BX)(o.HY,{children:[Z,(0,o.BX)(u.G,{css:[s.l0.colWithGap(8),s.l0.align.center,s.l0.justify.center,s.l0.p(32)],children:[(0,o.tZ)(_.xv,{css:[s.l0.textAlign.center],children:"You've finished initiating the domain transfers. It can take up to 48 hours for your domains to be re-verified."}),(0,o.tZ)(g.zx,{colorway:"primary",text:"Return to Domains",onClick:function(){return l()}})]})]})}return(0,o.tZ)(u.G,{css:[s.l0.colWithGap(16)],children:n})};!function(e){e.Overview="overview",e.Transferring="transferring",e.Finished="finished"}(Pn||(Pn={}));var An=function(e){var n,t,r=e.customDomain,i=e.deploymentId,a=e.onTransferred,p=e.proxyIp,h=e.replId,v=(0,l.Z)((0,Dn.h3)(),1)[0],y=(0,l.Z)((0,Gn.N)(),1)[0],Z=(0,c.useState)(),b=Z[0],w=Z[1],x=(0,c.useState)(Pn.Overview),k=x[0],C=x[1],S=[{type:"A",value:p},{type:"TXT",value:"replit-verify=".concat(i)}],T=function(){var e=(0,f.Z)((function(){var e,t,o;return(0,m.__generator)(this,(function(l){switch(l.label){case 0:C(Pn.Transferring),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,y({variables:{input:{id:h,removeDomain:r.domain}}})];case 2:return l.sent().data?[3,4]:(w("Something unexpected happened, please try again."),[2]);case 3:return e=l.sent(),w(e.message),[2];case 4:return l.trys.push([4,6,,7]),[4,v({variables:{replId:h,domain:r.domain,deploymentId:i}})];case 5:return(t=l.sent()).data?"Repl"!==t.data.linkReplDomain2.__typename&&-1===t.data.linkReplDomain2.message.indexOf("DNS updates can take up to 48 hours to fully synchronize")?(w(t.data.linkReplDomain2.message),[2]):("Repl"===t.data.linkReplDomain2.__typename&&(n=!0),[3,7]):(w("Something unexpected happened, please try again."),[2]);case 6:return o=l.sent(),w(o.message),[2];case 7:return C(Pn.Finished),a(),[2]}}))}));return function(){return e.apply(this,arguments)}}();switch(k){case Pn.Overview:t=(0,o.BX)(o.HY,{children:[(0,o.tZ)(_.xv,{variant:"subheadDefault",multiline:!1,children:r.domain}),S.map((function(e,n){return(0,o.BX)(u.G,{css:0===n?[s.l0.border({direction:"bottom"}),s.l0.pb(8)]:[],children:[(0,o.BX)(_.xv,{multiline:!1,children:[e.type," Record"]}),(0,o.BX)(u.G,{css:[s.l0.rowWithGap(24),s.l0.align.end],children:[(0,o.BX)(u.G,{children:[(0,o.tZ)(_.xv,{variant:"small",color:"dimmer",multiline:!1,children:"Hostname"}),(0,o.tZ)(_.xv,{multiline:!1,children:r.domain})]}),(0,o.BX)(u.G,{children:[(0,o.tZ)(_.xv,{variant:"small",color:"dimmer",multiline:!1,children:"Type"}),(0,o.tZ)(_.xv,{multiline:!1,children:e.type})]}),(0,o.BX)(u.G,{css:[s.l0.flex.growAndShrink(1)],children:[(0,o.tZ)(_.xv,{variant:"small",color:"dimmer",multiline:!1,children:"Record"}),(0,o.tZ)(_.xv,{multiline:!1,children:e.value})]}),(0,o.tZ)(j.h,{alt:"Copy to Clipboard",onClick:function(){return(0,Rn.Z)(e.value)},children:(0,o.tZ)(En.Z,{})})]})]},n)})),(0,o.tZ)(u.G,{css:[s.l0.align.start,s.l0.pt(8)],children:(0,o.tZ)(g.zx,{colorway:"primary",text:"I've updated these records",stretch:!1,onClick:function(){return T()}})})]});break;case Pn.Transferring:t=(0,o.BX)(o.HY,{children:[(0,o.tZ)(_.xv,{variant:"subheadDefault",multiline:!1,children:r.domain}),(0,o.BX)(u.G,{css:[s.l0.rowWithGap(8),s.l0.color.accentPrimaryStrongest,s.l0.justify.center,s.l0.align.center,s.l0.py(16)],children:[(0,o.tZ)(A.Z,{}),(0,o.tZ)(_.xv,{multiline:!1,children:"Swapping domain..."})]})]});break;case Pn.Finished:t=(0,o.BX)(u.G,{css:[s.l0.rowWithGap(16),s.l0.align.center,s.l0.justify.spaceBetween],children:[(0,o.tZ)(_.xv,{variant:"subheadDefault",multiline:!1,children:r.domain}),n?(0,o.tZ)(Be.Z,{color:"green"}):(0,o.tZ)(In.Z,{})]})}return(0,o.BX)(P.Tg,{elevated:!0,css:[s.l0.p(8),s.l0.colWithGap(8),s.l0.borderRadius(8)],children:[b?(0,o.tZ)(d.E,{colorway:"negative",text:b}):null,b?null:t]})},Un=t(6543),Ln=t(34017),Xn=t(10434),Nn=t(76232),Mn=t(38068),Fn=t(55021),On=t(59976),Wn=t(28737),Hn=t(80731),Vn=t(36443),zn=function(e){var n=e.replId,t=[{label:"six hours",key:6},{label:"twelve hours",key:12},{label:"one day",key:24},{label:"two days",key:48},{label:"one week",key:168}],r=(0,c.useState)(168),i=r[0],a=r[1],l=(0,c.useState)("1 week"),d=l[0],f=l[1],p=(0,c.useState)((0,Un.Z)((0,Ln.Z)(new Date),i-1)),h=p[0],v=p[1];c.useEffect((function(){var e=!0,n=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){var l=o.value;l.key===i&&f(l.label)}}catch(c){n=!0,r=c}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}}),[i]);var m=(0,Un.Z)((0,Ln.Z)(new Date),23),g=(0,Wn.F)().values,y=[g.global.redDefault,g.global.redDimmer,g.global.redStronger,g.global.redDimmest],Z=[g.global.orangeDefault,g.global.orangeDimmer,g.global.orangeStronger,g.global.orangeDimmest],b=[g.global.blueDefault,g.global.blueDimmer,g.global.blueStronger,g.global.blueDimmest],w=[g.global.greenDefault,g.global.greenDimmer,g.global.greenStronger,g.global.greenDimmest];return c.useEffect((function(){ke({context:G.kO.Analytics})}),[]),(0,o.tZ)(I,{children:(0,o.BX)(u.G,{css:[s.l0.colWithGap(24)],children:[(0,o.tZ)(Hn.ZE,{items:t,label:"Past ".concat(d),icon:(0,o.tZ)(Vn.Z,{}),onAction:function(e){var n="string"===typeof e?parseInt(e,10):e;a(n),v((0,Un.Z)((0,Ln.Z)(new Date),n-1))},cssProps:[s.l0.width("fit-content")],children:t.map((function(e){return(0,o.tZ)(Hn.ck,{children:(0,o.tZ)(u.G,{css:[s.l0.rowWithGap(8),s.l0.align.center,s.l0.color.foregroundDefault],children:(0,o.tZ)(_.xv,{multiline:!1,children:e.label})})},e.key)}))}),(0,o.tZ)(Xn.Z,{replId:n,start:h,hours:i,deployment:!0}),(0,o.BX)(u.G,{css:[s.l0.rowWithGap(24),s.l0.justify.spaceBetween],children:[(0,o.tZ)(u.G,{css:[s.l0.flex.grow(1),{maxWidth:"calc(45% - ".concat(s.TV.space12,")")}],children:(0,o.tZ)(Mn.Z,{replId:n,title:"HTTP Statuses (24h)",metric:Fn.RH.Statuses,start:m,hours:24,deployment:!0,colorFn:function(e,n){var t=Number(e);return t<300?w[n%w.length]:t<400?b[n%b.length]:t<500?Z[n%Z.length]:y[n%y.length]}})}),(0,o.tZ)(u.G,{css:[s.l0.flex.grow(1),{maxWidth:"calc(55% - ".concat(s.TV.space12,")")}],children:(0,o.tZ)(On.Z,{replId:n,start:h,hours:i,deployment:!0})})]}),(0,o.BX)(u.G,{css:[s.l0.rowWithGap(24),s.l0.justify.spaceBetween],children:[(0,o.tZ)(u.G,{css:[s.l0.flex.grow(1),{maxWidth:"calc(70% - 12px)"}],children:(0,o.tZ)(Nn.Z,{replId:n,metric:Fn.Pc.Country,start:h,hours:i,count:100,variant:"map",deployment:!0})}),(0,o.BX)(u.G,{css:[s.l0.flex.grow(1),{maxWidth:"calc(30% - 12px)"}],children:[(0,o.tZ)(Nn.Z,{replId:n,metric:Fn.Pc.Browser,start:h,hours:i,count:100,variant:"pie",deployment:!0}),(0,o.tZ)(Nn.Z,{replId:n,metric:Fn.Pc.Browser,start:h,hours:i,count:100,variant:"device-pie",deployment:!0})]})]}),(0,o.tZ)(Nn.Z,{replId:n,metric:Fn.Pc.Url,start:h,hours:i,deployment:!0,count:5}),(0,o.tZ)(Nn.Z,{replId:n,metric:Fn.Pc.Referrer,start:h,hours:i,deployment:!0,count:5})]})})},jn=t(86615);function qn(){var e=(0,q.Z)(["\n  fragment ReplLogLine2 on ReplLog {\n    __typename\n    timestamp\n    line\n  }\n"]);return qn=function(){return e},e}function $n(){var e=(0,q.Z)(["\n  query HostingDeploymentLogs2($replId: String!, $deploymentId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        __typename\n        hostingDeploymentLogs(deploymentId: $deploymentId) {\n          ... on ReplLogs {\n            result {\n              ...ReplLogLine2\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return $n=function(){return e},e}function Yn(){var e=(0,q.Z)(["\n  subscription HostingDeploymentLogUpdates(\n    $buildId: String!\n    $deploymentId: String!\n  ) {\n    hostingDeploymentLogUpdates(\n      input: { buildId: $buildId, deploymentId: $deploymentId }\n    ) {\n      ... on ReplLog {\n        line\n        timestamp\n      }\n    }\n  }\n"]);return Yn=function(){return e},e}var Kn={},Qn=(0,$.Ps)(qn()),Jn=(0,$.Ps)($n(),Qn);var et=(0,$.Ps)(Yn());var nt=function(e){var n,t,r=e.onError,i=(0,U.hn)(),a=(0,U.$y)(),u=function(e){var n=(0,h.Z)({},Kn,e);return Y.a(Jn,n)}({skip:!i||!a,variables:{replId:null!==(n=null===a||void 0===a?void 0:a.repl.id)&&void 0!==n?n:"",deploymentId:null!==i&&void 0!==i?i:""}}),s=u.data,d=u.loading,f=u.error,p=(0,l.Z)(c.useState(null),2),v=p[0],m=p[1],g=c.useRef([]);c.useEffect((function(){ke({context:G.kO.Logs})}),[]),c.useEffect((function(){if(null===s||void 0===s?void 0:s.repl)if("Repl"===s.repl.__typename){if(s.repl.hostingDeploymentLogs&&"ReplLogs"===s.repl.hostingDeploymentLogs.__typename){var e=s.repl.hostingDeploymentLogs.result;g.current=e,m(e)}}else r("Unexpected typename.")}),[s,r]),c.useEffect((function(){f&&r(f.message)}),[f,r]),function(e){var n=(0,h.Z)({},Kn,e);jn.m(et,n)}({variables:{buildId:null!==(t=null===a||void 0===a?void 0:a.id)&&void 0!==t?t:"",deploymentId:null!==i&&void 0!==i?i:""},skip:!i||!a,onData:function(e){var n=e.data.data;if("ReplLog"===(null===n||void 0===n?void 0:n.hostingDeploymentLogUpdates.__typename)){var t=n.hostingDeploymentLogUpdates;g.current=[t].concat((0,Ce.Z)(g.current)),m(g.current)}},onError:function(e){r(e.message)}});var y=null;return!d&&v&&(y=v.length>0?(0,o.tZ)(tt,{logs:v}):(0,o.tZ)(rt,{})),i&&a?(0,o.BX)(I,{fullWidth:!0,children:[(0,o.tZ)(ve,{loading:d}),y]}):(r("No current build found"),null)},tt=function(e){var n=e.logs;return(0,o.tZ)(u.G,{css:[s.l0.overflow("auto")],children:(0,o.tZ)("table",{css:[{borderCollapse:"separate"}],children:(0,o.tZ)("tbody",{children:n.map((function(e,n){var t=[s.l0.font.code,s.l0.fontSize(12),{border:"1px solid transparent",padding:"6px"},n%2===0?[s.l0.backgroundColor.backgroundHigher,{borderTopColor:"".concat(s.TV.backgroundHighest)},{borderBottomColor:"".concat(s.TV.backgroundHighest)}]:null];return(0,o.BX)("tr",{children:[(0,o.tZ)("td",{css:[t,s.l0.color.foregroundDimmest],children:new Date(e.timestamp).toLocaleString()}),(0,o.tZ)("td",{css:[t],children:e.line})]},"logLine-".concat(n))}))})})})},rt=function(){return(0,o.BX)(u.G,{css:[s.l0.colWithGap(8),s.l0.pt(4)],children:[(0,o.tZ)(_.xv,{css:s.l0.textAlign.center,children:"No logs are available because the most recent build failed before it was promoted."}),(0,o.BX)(_.xv,{color:"dimmer",css:s.l0.textAlign.center,children:["Having trouble?"," ",(0,o.tZ)("a",{href:"https://docs.replit.com/hosting/deployments/troubleshooting",onClick:function(){return ke({context:"troubleshooting_doc"})},children:"Troubleshooting tips"})]})]})},it=t(76963),ot=t(40735),at=t(54873),lt=t(2041),ct=t(43117),ut=(0,Oe.X)({container:s.l0.colWithGap(16),pauseAndResumeButtons:[s.l0.colWithGap(8),s.l0.pt(16),{borderTop:"solid 1px ".concat(s.TV.backgroundHighest)}],shutDownContainer:s.l0.colWithGap(8),shutDownButton:[s.l0.color.accentNegativeStrongest,s.l0.transition.snappy,(0,p.Z)({backgroundColor:y.vb.interactiveBackground,borderColor:"transparent"},s.wl.hover,{borderColor:"transparent"})]}),st=function(e){var n=e.hideResume,t=void 0!==n&&n,r=e.hideSuspend,i=void 0!==r&&r,a=e.onViewAction,s=(0,U.kW)(),d=(0,U.$y)(),p=(0,U.Sl)(),h=(0,U.mF)(),v=(0,l.Z)(c.useState(!1),2),y=v[0],Z=v[1],b=(0,l.Z)(c.useState(!1),2),w=b[0],x=b[1],k=function(){var e=(0,f.Z)((function(e){return(0,m.__generator)(this,(function(n){switch(n.label){case 0:return[4,h(e)];case 1:return n.sent(),a({type:G.ap.SendDeploymentLifecycleCommand,payload:e}),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),C=null!==p,S=(null===d||void 0===d?void 0:d.status)===B.Fe.Resuming,T=(null===d||void 0===d?void 0:d.status)===B.Fe.Suspending,E=(null===d||void 0===d?void 0:d.status)===B.Fe.Suspended,R=S||T||s===U.z4.ProcessingLifecycleCommand||s===U.z4.Deploying,I=!t&&C&&(E||S)&&(null===d||void 0===d?void 0:d.hasImageTag),D=!i&&!E&&!S&&(T||s===U.z4.Deploying||s===U.z4.Ready)&&(null===d||void 0===d?void 0:d.hasImageTag);return(0,o.BX)(o.HY,{children:[(0,o.BX)(u.G,{css:ut.container,children:[(0,o.BX)(u.G,{css:ut.pauseAndResumeButtons,children:[I?(0,o.BX)(o.HY,{children:[(0,o.tZ)(g.zx,{text:S?"Resuming":"Resume",onClick:function(){return k(B.Qc.Resume)},loading:S,disabled:R,iconLeft:S?(0,o.tZ)(A.Z,{}):(0,o.tZ)(ot.Z,{})}),(0,o.tZ)(_.xv,{multiline:!1,children:"Your app will become accessible to users again"})]}):null,D?(0,o.BX)(o.HY,{children:[(0,o.tZ)(g.zx,{text:"Pause",onClick:function(){return k(B.Qc.Suspend)},loading:T,disabled:R,iconLeft:T?(0,o.tZ)(A.Z,{}):(0,o.tZ)(it.Z,{})}),(0,o.tZ)(_.xv,{multiline:!1,children:"Your hosting subscription will continue, but all users will lose access to your app"})]}):null]}),(0,o.BX)(u.G,{css:ut.shutDownContainer,children:[(0,o.tZ)(g.zx,{text:"Shut down",colorway:"negative",outlined:!0,css:ut.shutDownButton,onClick:function(){return Z(!0)},disabled:w,iconLeft:(0,o.tZ)(at.Z,{})}),(0,o.tZ)(_.xv,{multiline:!1,children:"Your hosting subscription will be canceled, and your hosted app will cease to exist"})]})]}),(0,o.tZ)(lt.u,{isOpen:y,onRequestClose:function(){return Z(!1)},children:(0,o.tZ)(ct.Z,{confirmLabel:"Yes, delete my deployment",title:"Delete Deployment",isDestructive:!0,onConfirm:function(){x(!0),Z(!1),k(B.Qc.Destroy)},onCancel:function(){return Z(!1)},children:"This will destroy your deployment and any associated hosting tiers, saved replit.app domain and deployment history. You can always come back and redeploy your repl again."})})]})},dt=function(e){var n=e.onError,t=(0,U.$y)(),r=(0,Fe.Z)(),i=(0,l.Z)(c.useState(null),2),a=i[0],d=i[1],p=(0,l.Z)(c.useState(!0),2),v=p[0],g=p[1];return c.useEffect((function(){ke({context:G.kO.Settings})}),[]),c.useEffect((function(){(0,f.Z)((function(){var e,t;return(0,m.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,(0,ln.$f)(r.dotReplit)];case 1:return e=i.sent(),d(e),[3,3];case 2:return t=i.sent(),n(t),[3,3];case 3:return g(!1),[2]}}))}))()}),[r.dotReplit,t,n]),t?(0,o.BX)(o.HY,{children:[(0,o.BX)(I,{children:[(0,o.tZ)(ve,{loading:v}),!v&&a?(0,o.BX)(u.G,{css:[s.l0.colWithGap(16)],children:[(0,o.tZ)(an,{id:"settingsBuildCommand",title:"Build command",information:"The build command is the command-line statement that compiles your app at build time.",children:(0,o.tZ)(un.II,{value:a.buildCommand?a.buildCommand:"No build command set",css:[a.buildCommand?s.l0.color.greyStrongest:s.l0.color.greyDefault],disabled:!0})}),a.appType!==B.Vp.Static?(0,o.tZ)(an,{id:"settingsRunCommand",title:"Run command",information:"The run command is the command-line statement that launches your app after it has been built.",children:(0,o.tZ)(un.II,{value:a.runCommand?a.runCommand:"No run command set",css:[a.runCommand?s.l0.color.greyStrongest:s.l0.color.greyDefault],disabled:!0})}):null,a.appType===B.Vp.Static?(0,o.tZ)(an,{id:"settingsPublicDir",title:"Public Directory",information:"The public directory is the root of your static site.",children:(0,o.tZ)(un.II,{value:a.publicDir?a.publicDir:"No public directory set",css:[a.publicDir?s.l0.color.greyStrongest:s.l0.color.greyDefault],disabled:!0})}):null,(0,o.tZ)(an,{id:"settingsEnvVars",title:"Environment variables",information:"Choose which environment variables should be used for your deployment.",children:(0,o.tZ)(u.G,{css:[s.l0.colWithGap(8)],children:t.envVars.length>0?t.envVars.map((function(e,n){var t=e.name,r=e.value;return(0,o.tZ)(bn,{index:n,name:t,value:r,updateEnvVarName:function(){},updateEnvVarValue:function(){},removeEnvVar:function(){},disabled:!0},n)})):(0,o.tZ)(un.II,{value:"No environment variables set",css:[s.l0.color.greyDefault],disabled:!0})})})]}):null]}),(0,o.tZ)(I,{children:(0,o.tZ)(st,(0,h.Z)({},e))})]}):(n("No current build found"),null)},ft=t(48330),pt=function(){var e=(0,U.gg)(),n=e.isDeployableRepl,t=e.reason;return n?null:(0,o.tZ)(d.E,{colorway:"warning",text:t})},ht=t(9396),vt=t(70232),mt=t(70104),gt=t(78728),yt=t(58321),Zt=t.n(yt),bt=t(35004),wt=t(80806);function xt(){var e=(0,q.Z)(["\n  query DeploymentsPaneIntro($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        hostingDeploymentPermissions {\n          canDeployStatic {\n            isDeployable\n            deploymentCount\n            limit\n          }\n        }\n      }\n    }\n  }\n"]);return xt=function(){return e},e}var kt={},Ct=(0,$.Ps)(xt());var St=(0,Oe.X)({self:[s.l0.rowWithGap(2),s.l0.align.baseline],price:s.l0.fontWeight.medium,timePeriod:[s.l0.color.foregroundDimmer,s.l0.fontSize(12)]});function Tt(e){var n=e.price,t=e.timePeriod;return(0,o.BX)(u.G,{css:St.self,children:[(0,o.tZ)(_.xv,{css:St.price,multiline:!1,children:n}),(0,o.tZ)(_.xv,{css:St.timePeriod,multiline:!1,children:"/".concat(t)})]})}var Et=(0,T.iv)([s.l0.reset.button,s.l0.cursor.pointer,s.l0.display.flex,s.l0.align.center,s.l0.focusRing,s.l0.rowWithGap(16),s.l0.borderRadius(8),s.l0.p(8)]),Rt=(0,Oe.X)({loading:[Et,Ae.p.foregroundPulse(),s.l0.border({color:s.TV.backgroundHighest})],self:[Et,y.gU.outlined,s.l0.border({color:s.TV.backgroundHighest})],selfActive:[Et,s.l0.backgroundColor.accentPrimaryDimmer,s.l0.border({color:s.TV.accentPrimaryStronger})],disabled:[Et,s.l0.color.foregroundDimmest],icon:[s.l0.mx(16)],body:[s.l0.align.start,s.l0.flex.grow(1)],header:[s.l0.width("100%"),s.l0.display.flex,s.l0.flex.row,s.l0.justify.spaceBetween],tiersTitle:[s.l0.rowWithGap(8),s.l0.align.center]});function It(e){var n=e.loading,t=e.disabled,r=e.active;return n?Rt.loading:t?Rt.disabled:r?Rt.selfActive:Rt.self}function Gt(e){var n,t,r,i,a=e.loading,l=e.active,c=e.provider,d=e.onClick,f=e.canDeploy,p=void 0;switch(c){case B.r4.CloudRun:n=(0,o.tZ)(ht.Z,{size:48}),t="On Demand",r="Only pay for the resources you use",i="Beta";break;case B.r4.Gce:n=(0,o.tZ)(mt.Z,{size:48}),t="Reserved VM",r="Host apps and servers that stay on",p=(0,o.tZ)(Tt,{price:"Starting at $10",timePeriod:"month"});break;case B.r4.Static:n=(0,o.tZ)(gt.Z,{size:48}),t="Static",r="For static websites",i="Beta";break;default:(0,vt.Z)(c)}var h=void 0!==f&&!f.isDeployable;return(0,o.tZ)(P.Tg,{background:"higher",css:s.l0.borderRadius(8),children:(0,o.BX)("button",{css:It({loading:a,disabled:h,active:l}),onClick:function(){return d(c)},disabled:a||h,children:[(0,o.tZ)(u.G,{css:Rt.icon,children:n}),(0,o.BX)(u.G,{css:Rt.body,children:[(0,o.BX)(u.G,{css:Rt.header,children:[(0,o.tZ)(_.xv,{variant:"subheadDefault",multiline:!1,children:t}),(0,o.BX)(u.G,{css:s.l0.rowWithGap(4),children:[i?(0,o.tZ)(_e.D,{text:i,css:[l?s.l0.backgroundColor.accentPrimaryDefault:s.l0.backgroundColor.backgroundDefault]}):null,f?(0,o.tZ)(gn.u,{tooltip:"You can have up to ".concat(f.limit," free ").concat(z[c]," deployments live at one time."),children:(0,o.tZ)(_e.D,{text:"".concat(f.deploymentCount," / ").concat(f.limit),css:[l?s.l0.backgroundColor.accentPrimaryDefault:s.l0.backgroundColor.backgroundDefault]})}):null]})]}),p||null,(0,o.tZ)(_.xv,{multiline:!1,children:r})]})]})})}var Dt,_t=[B.r4.Gce,B.r4.CloudRun,B.r4.Static],Pt=(Dt={},(0,p.Z)(Dt,B.r4.Gce,["Discord/Slack bots","Stock trading bot","Web scraping","Long-running tasks"]),(0,p.Z)(Dt,B.r4.CloudRun,["Dynamic websites","Cloud functions","Stateless apps"]),(0,p.Z)(Dt,B.r4.Static,["Simple HTML websites"]),Dt),Bt=(0,T.iv)([s.l0.width("100%"),s.l0.maxWidth(400)]),At=function(e){var n=e.replId,t=e.onViewAction,r=e.onError,i=(0,U.gg)().isDeployableRepl,a=(0,Fe.Z)(),d=(0,l.Z)(c.useState(void 0),2),p=d[0],v=d[1];c.useEffect((function(){ke({context:"intro"})}),[]);var y=(0,V.P5)({controlName:"flag-funky-future",logFlagToAnalytics:!1}),Z=function(e){var n=(0,h.Z)({},kt,e);return Y.a(Ct,n)}({skip:!y,variables:{id:n},onError:function(e){return r(e.message)}}),b=Z.loading,w=Z.data;c.useEffect((function(){y&&(0,f.Z)((function(){var e,n,t;return(0,m.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,(0,ln.$f)(a.dotReplit)];case 1:return null===(e=i.sent()).appType?(v(B.r4.Gce),[2]):(n=(0,wt.oU)(e.appType))===B.r4.Goval?(r("Did not recognize template deployment provider"),[2]):(v(n),[3,3]);case 2:return t=i.sent(),r(t),[3,3];case 3:return[2]}}))}))()}),[y,r,a.dotReplit]);var x=b||void 0===p;return(0,o.tZ)(I,{children:(0,o.BX)(u.G,{css:[s.l0.colWithGap(16),s.l0.py(32),s.l0.align.center,s.l0.textAlign.center],children:[(0,o.tZ)(u.G,{css:[s.l0.px(32)],children:(0,o.tZ)(C.Z,{size:48})}),(0,o.BX)(u.G,{css:[s.l0.colWithGap(8),Bt],children:[(0,o.tZ)(_.xv,{variant:"headerDefault",children:"Share your Repl with the world"}),(0,o.tZ)(_.xv,{children:"Create a production build of your project so people can use it without being interrupted by changes in progress."})]}),y?(0,o.BX)(u.G,{css:[s.l0.colWithGap(16),s.l0.textAlign.left,Bt],children:[(0,o.BX)(o.HY,{children:[(0,o.tZ)(u.G,{css:[s.l0.colWithGap(8),s.l0.textAlign.left],children:_t.map((function(e){var n=e===B.r4.Static&&"Repl"===(null===w||void 0===w?void 0:w.repl.__typename)?w.repl.hostingDeploymentPermissions.canDeployStatic:void 0;return(0,o.tZ)(Gt,{provider:e,loading:x,active:p===e,onClick:v,canDeploy:n},e)}))}),p?(0,o.BX)(u.G,{css:[s.l0.colWithGap(4),s.l0.align.start],children:[(0,o.BX)(_.xv,{css:s.l0.color.foregroundDimmer,multiline:!1,children:["Example apps for"," ",z[p],":"]}),(0,o.tZ)(u.G,{css:[s.l0.rowWithGap(8),s.l0.flex.grow(1),s.l0.width("100%")],children:Zt()(Pt[p],2).map((function(e,n){return(0,o.tZ)(_.xv,{css:s.l0.flex.grow(1),children:e.map((function(e,t){return(0,o.BX)("span",{children:["\u2022 ".concat(e),(0,o.tZ)("br",{})]},"".concat(n).concat(t))}))},n)}))})]}):null]}),(0,o.tZ)(g.zx,{colorway:"primary",onClick:function(){if(p)switch(p){case B.r4.Gce:t({type:G.ap.ChangeView,payload:{view:G.kO.TierSelection}});break;case B.r4.CloudRun:case B.r4.Static:t({type:G.ap.ChangeView,payload:{view:G.kO.DeploymentOptions,data:{provider:p}}});break;default:(0,vt.Z)(p)}},text:"Continue",iconRight:(0,o.tZ)(bt.Z,{}),disabled:!i,loading:x})]}):(0,o.tZ)(u.G,{css:[s.l0.px(8),s.l0.colWithGap(16)],children:(0,o.tZ)(g.zx,{colorway:"primary",onClick:function(){return t({type:G.ap.ChangeView,payload:{view:G.kO.TierSelection}})},text:"Deploy your project",disabled:!i})}),(0,o.tZ)(pt,{}),(0,o.tZ)(_.xv,{css:[s.l0.textAlign.center,s.l0.fontSize(12),s.l0.color],children:(0,o.tZ)("a",{href:"https://docs.replit.com/category/deployments",target:"_blank",rel:"noopener",children:"What is a deployment?"})})]})})},Ut=t(73204),Lt=t(66195),Xt=function(e){var n=e.replId,t=e.onViewAction,r=e.onError,i=(0,U.hn)(),a=(0,U.Sl)(),p=!(void 0!==(0,U.pn)())&&!("string"===typeof i),y=void 0!==a,Z=(0,l.Z)(c.useState(!1),2),b=Z[0],w=Z[1],x=(0,Lt.P)({step:"not_shown"});c.useEffect((function(){ke({context:"tier_selection"})}),[]),c.useEffect((function(){"checkout_success"!==x.currentStep.step?"not_shown"===x.currentStep.step&&x.goTo({step:"power_up_details",powerUpCategory:"hosting_tier"}):w(!0)}),[x,n]);var k=!y||!p,C=y&&p;if("not_shown"===x.currentStep.step)return(0,o.tZ)(o.HY,{});var S=function(){var e=(0,f.Z)((function(){return(0,m.__generator)(this,(function(e){return b?(t({type:G.ap.CheckoutSuccess}),[2]):(t({type:G.ap.GoBack}),[2])}))}));return function(){return e.apply(this,arguments)}}();return(0,o.tZ)(I,{children:(0,o.BX)(u.G,{css:s.l0.colWithGap(16),children:[k?(0,o.tZ)(Ut.s,(0,v.Z)((0,h.Z)({},x),{analyticsContext:"workspace_hosting_pane",goBack:(0,f.Z)((function(){return(0,m.__generator)(this,(function(e){return"power_up_details"===x.currentStep.step?b?t({type:G.ap.CheckoutSuccess}):S():x.goBack(),[2]}))}))})):null,b?(0,o.tZ)(g.zx,{colorway:p?"primary":void 0,onClick:S,text:p?"Deploy your project":"Back to deployment"}):null,C?(0,o.BX)(o.HY,{children:[(0,o.BX)(u.G,{css:[s.l0.rowWithGap(8),s.l0.align.center],children:[(0,o.tZ)(j.h,{alt:"Back",onClick:S,children:(0,o.tZ)(Me.ArrowLeft,{})}),(0,o.tZ)(d.E,{colorway:"warning",icon:(0,o.tZ)(H.Z,{}),text:"To upgrade hosting tier, please deploy your repl first."})]}),(0,o.tZ)(st,{hideResume:!0,hideSuspend:!0,onViewAction:t,onError:r})]}):null]})})},Nt=t(27549),Mt=t(94716);function Ft(e){var n=e.views,t=e.activeView,r=e.handleOnViewAction,i=n[t],a=(0,G.BJ)(i)?i.alias:t;return(0,o.tZ)(o.HY,{children:Object.keys(n).map((function(e){if((0,G.D1)(e)){var t=n[e];if(!(0,G.BJ)(t))if(t.display&&(0,G.Zs)(t)){var i=t.title,l=t.icon,c=a===e;return(0,o.tZ)(g.zx,{css:[y.gU.nofill,s.l0.borderRadius(0),s.l0.px(12),s.l0.position.relative,{transition:"none",height:38,marginRight:1,borderBottom:"1px solid ".concat(c?s.TV.foregroundDefault:"transparent"),"::after":{content:'""',display:"block",position:"absolute",right:-2,width:1,height:16,backgroundColor:s.TV.outlineDimmest},"&:last-child":{marginRight:0,"::after":{display:"none"}}}],text:i,iconLeft:(0,o.tZ)(l,{}),onClick:function(){var n={view:e};(0,G.Em)(n)&&r({type:G.ap.ChangeView,payload:n})}},e)}}}))})}var Ot=function(e){var n,t=e.initialView,r=e.onViewUpdate,i=e.onError,a=e.refetch,d=e.openFile,g=(0,ft.Z)(),y=(0,U.hn)(),S=(0,U.Sl)(),T=(0,U.pn)(),E=(0,U.$y)(),R=void 0!==S&&void 0!==S,I=!(void 0!==T)&&!("string"===typeof y),D=E?E.provider:void 0,_=(0,V.P5)({controlName:"flag-deployment-analytics",logFlagToAnalytics:!1}),P=(n={},(0,p.Z)(n,G.kO.Intro,{fc:At,display:!0}),(0,p.Z)(n,G.kO.TierSelection,{fc:Xt,display:!0}),(0,p.Z)(n,G.kO.Deployment,{title:"Deployment",icon:C.Z,fc:Sn,display:!0,tabs:Boolean(E)}),(0,p.Z)(n,G.kO.DeploymentOptions,{alias:G.kO.Deployment}),(0,p.Z)(n,G.kO.DeploymentInProgress,{alias:G.kO.Deployment}),(0,p.Z)(n,G.kO.Domains,{title:"Domains",icon:w.Z,fc:_n,display:!0,tabs:!0}),(0,p.Z)(n,G.kO.History,{title:"History",icon:x.Z,fc:$e,display:!0,tabs:!0}),(0,p.Z)(n,G.kO.Analytics,{title:"Analytics",icon:k.Z,fc:zn,display:_,tabs:!0}),(0,p.Z)(n,G.kO.Logs,{title:"Logs",icon:b.Z,fc:nt,display:D!==B.r4.Static,tabs:!0}),(0,p.Z)(n,G.kO.Settings,{title:"Settings",icon:Z.Z,fc:dt,display:!0,tabs:!0}),n),A=(0,l.Z)(c.useState(function(e){var n=e.initialView,t=e.views,r=e.isNewDeployment,i=e.hasHostingTier;return r?i?{view:G.kO.DeploymentOptions,data:{provider:B.r4.Gce}}:(null===n||void 0===n?void 0:n.view)===G.kO.TierSelection?{view:n.view}:{view:G.kO.Intro}:(0,G.Em)(n)&&n.view in t?n:{view:G.kO.Deployment}}({initialView:t,views:P,isNewDeployment:I,hasHostingTier:R})),2),L=A[0],X=A[1],N=L.view,M=c.useRef(void 0),F=function(){var e=(0,f.Z)((function(e){return(0,m.__generator)(this,(function(n){switch(r(),e.type){case G.ap.SendDeploymentLifecycleCommand:if(e.payload===B.Qc.Destroy)return X({view:G.kO.Intro}),a(),[2];X({view:G.kO.Deployment});break;case G.ap.CheckoutSuccess:X(I?{view:G.kO.DeploymentOptions,data:{provider:B.r4.Gce}}:{view:G.kO.Deployment}),a();break;case G.ap.ChangeView:M.current=L,X(e.payload);break;case G.ap.GoBack:if(M.current)return M.current.view===G.kO.DeploymentInProgress?(X({view:G.kO.Deployment}),[2]):(X(M.current),[2]);X({view:I?G.kO.Intro:G.kO.Deployment})}return[2]}))}));return function(n){return e.apply(this,arguments)}}(),O=function(e){var n=e.views,t=n[e.activeView];if((0,G.BJ)(t)){var r=n[t.alias];return!(0,G.BJ)(r)&&r||null}return t}({views:P,activeView:N})||P[G.kO.Deployment],W=O.fc,H=(0,Mt.Z)(O),z=(0,Mt.Z)(P),j=(0,Mt.Z)(F);return(0,Nt.L5)((function(){return{type:"deployments",getTabs:function(){var e;if(null===(e=H.current)||void 0===e?void 0:e.tabs){var n=[],t=!0,r=!1,i=void 0;try{for(var o,a=Object.entries(z.current)[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var c=(0,l.Z)(o.value,2),u=c[0],s=c[1];"display"in s&&s.display&&(0,G.Zs)(s)&&"title"in s&&n.push({label:s.title,Icon:s.icon,id:u})}}catch(d){r=!0,i=d}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n}return null},setTab:function(e){var n={view:e};(0,G.Em)(n)&&j.current({type:G.ap.ChangeView,payload:n})}}}),[H,z,j]),(0,o.BX)(o.HY,{children:[(null===O||void 0===O?void 0:O.tabs)?(0,o.tZ)(u.G,{css:{borderBottom:"1px solid ".concat(s.TV.outlineDimmest)},children:(0,o.tZ)(u.G,{css:[s.l0.position.relative,{"::before":{content:'""',display:"block",position:"absolute",left:0,width:8,height:"100%",background:"linear-gradient(90deg, ".concat(s.TV.backgroundDefault," 0%, rgba(0,0,0,0) 100%);"),zIndex:1},"::after":{content:'""',display:"block",position:"absolute",right:0,width:8,height:"100%",background:"linear-gradient(270deg, ".concat(s.TV.backgroundDefault," 0%, rgba(0,0,0,0) 100%);"),zIndex:1}}],children:(0,o.tZ)(u.G,{css:[s.l0.flex.row,s.l0.align.center,s.l0.overflowX("auto"),s.l0.pl(8)],children:(0,o.tZ)(Ft,{views:P,activeView:N,handleOnViewAction:F})})})}):null,O.display?(0,o.tZ)(W,(0,v.Z)((0,h.Z)({},O,L),{replId:g,onViewAction:F,onError:i,openFile:d})):null]})};function Wt(e){var n=e.initialView,t=e.onViewUpdate,r=e.openFile,i=(0,U.m8)(),a=(0,U.kW)(),f=(0,U.ev)(),p=(0,l.Z)(c.useState(null),2),h=p[0],v=p[1];return a===U.z4.Loading?(0,o.tZ)(u.G,{css:[s.l0.center,s.l0.my(32)],children:(0,o.tZ)(A.Z,{size:16})}):(0,o.BX)(E,{children:[(0,o.tZ)(Ot,{initialView:n,onViewUpdate:function(){h&&v(null),t()},onError:v,refetch:i,openFile:r}),h||f?(0,o.tZ)(I,{css:[s.l0.flex.grow(0),s.l0.mt(0)],children:(0,o.tZ)(d.E,{colorway:"warning",icon:(0,o.tZ)(H.Z,{}),text:h||f})}):null]})}var Ht={Content:function(e){var n=e.pane.data,t=e.options.performPaneOperation,r=(0,c.useRef)(function(e){if((0,G.Em)(e)&&(0,G.D1)(e.view))return e}(n)),i=(0,c.useCallback)((function(e){return t({operation:"open",secondary:!0,pane:{type:(0,a.Dp)(e),data:e}})}),[t]);return(0,o.tZ)(Wt,{initialView:r.current,onViewUpdate:function(){r.current&&(r.current=void 0,t({operation:"replace",pane:{type:"deployments"}}))},openFile:i})},Icon:function(e){var n=e.size;return(0,o.tZ)(C.Z,{size:n})},getTitle:function(){return"Deployments"}}},42916:function(e,n,t){t.d(n,{Z:function(){return l}});var r=t(74985),i=(t(50959),t(85368)),o=t(76735),a=t(24743),l={Content:function(){return(0,r.tZ)(i.G,{style:{padding:32},children:(0,r.tZ)(a.Z,{children:"Sorry, this feature is not supported."})})},Icon:function(){return(0,r.tZ)(o.Z,{})},getTitle:function(){return"Unsupported"}}},23807:function(e,n,t){t.d(n,{R:function(){return f},b:function(){return p}});var r=t(74985),i=t(43330),o=t(45285),a=t(78728),l=t(19660),c=t(92683),u=t(10578),s=t(83505),d=t(95587),f={Content:function(e){var n=e.options,t=n.isHidden,a=n.performPaneOperation,f=(0,o.Z)(),h=f.container,v=f.fs,m=f.session,g=f.runner,y=(0,c.Dv)(u.f),Z=(0,u.Z)();return(0,s.Z)({container:h,runner:g,refreshWebView:Z}),(0,d.Z)({runner:g,refreshWebView:Z}),(0,i.x)(p,{run:function(){Z()}}),(0,r.tZ)(l.Z,{fs:v,session:m,runner:g,ref:y,isVisible:!t,openPane:function(e){a({operation:"open",pane:e})}})},Icon:function(e){var n=e.size;return(0,r.tZ)(a.Z,{size:n})},getTitle:function(){return"Webview"}},p={cmdOrCtrlKey:!0,altKey:!1,shiftKey:!1,key:"S"}},72497:function(e,n,t){t.d(n,{U:function(){return mg}});var r=t(74985),i=t(57389),o=t(2272),a=t(50959),l=t(34495),c=t(4421),u=t(84815),s=t(91821),d=t(45285),f=t(48468),p=t(30826),h=t.n(p),v=t(87978),m=t(79339),g=t(39541),y=t(85368),Z=t(61284),b=t(82568),w=t(4561),x=t(92355),k=t(80906),C=t(94716),S=t(27549),T=t(94452),E=t(1809),R=(0,a.memo)(m.Z);var I=(0,b.X)({root:[g.l0.colWithGap(8),g.l0.height("100%"),g.l0.width("100%"),g.l0.overflow("auto"),g.l0.zIndex(2),g.l0.align.center,g.l0.py(16),g.l0.px(16),g.l0.borderRadius(8),(0,i.Z)({margin:"0 auto"},"@media only screen and (min-width: ".concat(c.j.tabletMin,"px)"),g.l0.px(32))],header:[g.l0.rowWithGap(4),g.l0.height(30),g.l0.width("100%"),g.l0.align.center],markdownContainer:[g.l0.width("100%"),{"& .rendered-markdown":[g.l0.flex.column,g.l0.center],"& .rendered-markdown > *":[g.l0.maxWidth(840),g.l0.width("100%")],"& .rendered-markdown > table":g.l0.maxWidth("100%")}]});function G(e){var n=(0,d.Z)().fs,t=(0,o.Z)(function(){var e=(0,a.useRef)(!1),n=(0,a.useRef)(null);return[(0,f.Z)((function(){e.current=!0,n.current&&clearTimeout(n.current),n.current=setTimeout((function(){e.current=!1}),150)}),{type:"throttle",wait:37.5}),e]}(),2),i=t[0],c=t[1],p=(0,a.useState)(e.path),m=p[0],b=p[1],G=(0,C.Z)(m),D=(0,a.useRef)(null),_=(0,x.T)(),P=e.performPaneOperation;(0,S.L5)((function(){return{commands:[{match:T.pl,data:{label:"Open in Editor",icon:(0,r.tZ)(E.Z,{}),type:"action",run:function(){P({operation:"replace",pane:{type:"codeEditor",data:{path:m}}})}}}]}}),[P,m]);var B=e.path;(0,a.useEffect)((function(){B&&b(B)}),[B]);var A=e.isHidden,U=(0,k.p5)();(0,a.useEffect)((function(){if(!A){U.current&&(0,v.gK)(U.current.path)&&b(U.current.path);var e=h()((function(e){(0,l.Z)(e,{behavior:_?"auto":"smooth",scrollMode:"if-needed"})}),100),n=h()((function(n){if(n)if(n.path===G.current){if(!c.current){var t=D.current?function(e,n){var t=e.querySelectorAll(".rendered-markdown [data-sourcepos]");if(!(null===t||void 0===t?void 0:t.length))return null;var r=Array.from(t).reverse(),i=n.line,a=n.column,l=!0,c=!1,u=void 0;try{for(var s,d=r[Symbol.iterator]();!(l=(s=d.next()).done);l=!0){var f=s.value,p=f.dataset.sourcepos;if(!p)throw new Error("Expected data source pos on selected element");var h=(0,o.Z)(p.split("-"),2),v=h[0],m=h[1],g=(0,o.Z)(v.split(":").map(Number),2),y=g[0],Z=g[1],b=(0,o.Z)(m.split(":").map(Number),2),w=b[0],x=b[1];if(i>=y&&a>=Z&&(i<w||i===w&&a<=x))return f}}catch(k){c=!0,u=k}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}}(D.current,n.position):null;t&&e(t)}}else(0,v.gK)(n.path)&&b(n.path)}),200),t=U.subscribe(n);return function(){n.cancel(),e.cancel(),t()}}}),[U,A,_]);var L=(0,a.useState)(null),X=L[0],N=L[1];return(0,a.useEffect)((function(){if(N(null),m&&(0,v.Mb)(m))return n.watchTextFile(m,{onReady:function(e){var n=e.initialContent;N(n.toString())},onChange:function(e){var n=e.latestContent;N(n)},onMoveOrDelete:function(e){e.eventType===w.kS.Delete&&b(null)}})}),[m,n]),m?null===X?(0,r.tZ)(s.Z,{preventHighlightBorder:!0}):(0,r.BX)(y.G,{css:I.root,innerRef:i,children:[(0,r.BX)(y.G,{css:I.header,children:[(0,r.tZ)(u.Z,{}),(0,r.BX)(Z.xv,{color:"dimmer",multiline:!1,children:["Preview of ",(0,r.tZ)("a",{href:"#".concat(m),children:m})]})]}),(0,r.tZ)(y.G,{innerRef:D,css:I.markdownContainer,children:(0,r.tZ)(R,{path:m,source:X,fs:n,sourcePos:!0})})]}):(0,r.tZ)(y.G,{css:[g.l0.height("100%"),g.l0.width("100%"),g.l0.center],children:(0,r.tZ)(Z.xv,{multiline:!1,children:"No previewed file"})})}var D=t(98215),_={Content:function(e){var n=e.pane,t=e.options;return(0,r.tZ)(G,{path:n.data.path,isHidden:Boolean(t.isHidden),performPaneOperation:t.performPaneOperation})},Icon:function(e){var n=e.size;return(0,r.tZ)(D.Z,{fill:"currentColor",size:n})},getTitle:function(){return"Markdown"}},P=t(39319),B=t(92508),A=t(55281),U=t(4747),L=t(73872),X=t(49514),N=t(77511),M=t(72006),F=t(77637),O=t(92153),W=t(9348),H=t(79032),V=function(){var e="\x1b[",n="\x1b[2J";return{eraseDownZero:"\x1b[0J",eraseDown:"\x1b[J",eraseUp:"\x1b[1J",eraseScreen:n,clearScreen:"\x1bc",clearTerminal:"".concat(n).concat(e,"3J").concat(e,"H")}}(),z=(0,b.X)({wrapper:[g.l0.position.relative],basic:[g.l0.overflow("hidden"),{"& .xterm":[g.l0.p(8)]}],roundedBottomCorners:{"& .xterm-viewport":[g.l0.borderRadius(0,0,8,8)]},disabledViewportScrolling:{"& .xterm":{overflow:"hidden"},"& .xterm-scroll-area":{height:"0px !important"}},scrollbackGradient:{position:"absolute",top:0,left:0,right:0,height:100,zIndex:100,pointerEvents:"none",background:"linear-gradient(".concat(g.TV.backgroundRoot,", transparent)")}}),j=1e3;function q(e){var n=e.output,t=e.onInput,i=e.openFile,l=e.listFiles,c=e.autoFocus,u=e.maxHeight,s=e.enableViewportScroll,d=void 0===s||s,p=e.roudnedBottomCorners,h=void 0!==p&&p,v=(0,o.Z)((0,W.Z)({autoFit:!1,scrollback:j,size:{rows:1},openFile:i,listFiles:l}),2),m=v[0],g=v[1],Z=null===m||void 0===m?void 0:m._term,b=(0,a.useState)(!1),w=b[0],x=b[1],k=(0,C.Z)(0),S=(0,C.Z)(1),T=(0,C.Z)(""),E=(0,C.Z)(j),R=(0,a.useCallback)((function(){if(m&&Z){Z.resize(Z.cols,1),m.fit();var e=Z.buffer.active.length;S.current=e,Z.resize(Z.cols,Math.min(E.current,e));var n=e>E.current;x(n)}}),[m,Z,S,E]),I=(0,f.Z)((function(e){e.widthChanged&&R()}),{type:"debounce",wait:200});return(0,a.useEffect)((function(){if(Z){if(void 0===u)return E.current=j,void R();var e=Z._core._renderService.dimensions.css.cell;E.current=Math.floor(u/e.height);var n=Z.buffer.active.length;Z.resize(Z.cols,Math.min(E.current,n));var t=n>E.current;x(t)}}),[Z,u,R,E]),(0,a.useEffect)((function(){c&&(null===m||void 0===m||m.focus())}),[m,c]),(0,a.useEffect)((function(){if(m){var e=m.onData((function(e){t(e)}));return function(){e.dispose()}}}),[m,t]),(0,a.useEffect)((function(){if(Z){var e=Z.onLineFeed((function(){var e=Z.buffer.active.length;if(e!==S.current){S.current=e,Z.resize(Z.cols,Math.min(E.current,e));var n=e>E.current;x(n)}}));return function(){e.dispose()}}}),[Z,m,S,E]),(0,a.useEffect)((function(){if(n&&m&&Z)if((0,H.FB)(n.substring(0,k.current))!==T.current)m.write(V.clearScreen+n,(function(){k.current=n.length,T.current=(0,H.FB)(n),R()}));else{var e=n.substring(k.current);m.write(e,(function(){T.current=(0,H.FB)(n),k.current=n.length,Object.values(V).some((function(n){return e.includes(n)}))&&R()}))}}),[m,Z,n,k,S,T,R]),(0,r.BX)(y.G,{innerRef:I,css:z.wrapper,children:[w?(0,r.tZ)(y.G,{css:z.scrollbackGradient}):null,(0,r.tZ)(y.G,{css:[z.basic,h&&z.roundedBottomCorners,!d&&z.disabledViewportScrolling],innerRef:g})]})}var $=t(10841),Y=t(54873),K=t(63128),Q=t(96351),J=t(26992),ee=t(76735),ne=t(63837),te=t(66539),re=t(56412),ie=t(63064),oe=t(67283),ae=t(78973),le=t(84358),ce=t(60583),ue=t(27691),se=t(87076),de=t(81598),fe=t(69071),pe=(0,t(68973).$)(["terminalMinHeight","terminalMaxHeight","terminalBackgroundColor","previewHeight"]),he=pe.cssVars,ve=pe.styleTokens,me=(0,b.X)({emptyStateWrapper:[g.l0.p(8),g.l0.rowWithGap(8),g.l0.align.center,{"& button":g.l0.width(oe.al[$.Ah.IDLE]),"& button span":g.l0.display.block}],outputsListWrapper:[g.l0.height("100%")],outputsList:[g.l0.height("100%"),g.l0.overflowY("scroll")],outputsListSnapToBottom:[g.l0.height("100%"),g.l0.overflowY("scroll"),{scrollSnapType:"y proximity"}],scrollSnap:[g.l0.height(1),{pointerEvents:"none",scrollSnapAlign:"end"}],outputBlock:[g.l0.p(4)],outputBlockFullscreen:[g.l0.p(4),g.l0.coverContainer,g.l0.zIndex(10),{background:g.TV.backgroundDefault}],outputBlockWrapper:[g.l0.borderRadius(8),g.l0.border(),g.l0.height("100%")],outputBlockMetadataWrapper:[g.l0.py(4),g.l0.px(8),g.l0.flex.row,g.l0.align.center,g.l0.justify.spaceBetween],outputBlockMetadataWrapperLeft:[g.l0.rowWithGap(8),g.l0.align.center],outputBlockMetadataWrapperRight:[g.l0.rowWithGap(8),g.l0.align.center],outputBlockTerminalWrapper:[g.l0.flex.growAndShrink(1),g.l0.mx(1),g.l0.mb(1),g.l0.minHeight(ve.terminalMinHeight),g.l0.maxHeight(ve.terminalMaxHeight),{backgroundColor:ve.terminalBackgroundColor}],outputBlockTerminalWrapperDone:{opacity:.66},outputError:[g.l0.p(8),g.l0.color.accentNegativeStronger],terminalLoadingWrapper:[g.l0.p(8),g.l0.overflow("hidden"),g.l0.height(ve.previewHeight)],terminalLoadingLine:[g.l0.borderRadius(2),ue.p.backgroundPulse(),g.l0.height(16),g.l0.mb(4)],fullscreenTerminal:[g.l0.height("100%")]});function ge(e,n){var t=n-e;return t<1e3?"".concat(Math.floor(t),"ms"):t<6e4?"".concat(Math.floor(t/1e3),"s"):"".concat(Math.floor(t/6e4),"m")}function ye(e){var n,t=e.isDone,i=e.hasError,o=e.errorTooltipText,a=e.executionPillText,l=e.duration,c=e.time,u=e.isFullscreen,s=e.onRequestFullscreen,d=(n=c,(0,re.Z)(new Date(n),"h:mm:ss bbb, MMM dd, yyyy"));return(0,r.BX)(y.G,{css:me.outputBlockMetadataWrapper,children:[(0,r.BX)(y.G,{css:me.outputBlockMetadataWrapperLeft,children:[t?(0,r.tZ)(te.u,{tooltip:o,children:i?(0,r.tZ)(ee.Z,{}):(0,r.tZ)(ne.Z,{})}):(0,r.tZ)(te.u,{tooltip:"Running...",children:(0,r.tZ)(J.Z,{color:g.TV.accentPositiveDefault})}),(0,r.tZ)(Q.D,{color:"grey",text:a})]}),(0,r.BX)(y.G,{css:me.outputBlockMetadataWrapperRight,children:[(0,r.BX)(Z.xv,{color:"dimmer",variant:"small",children:[l?"".concat(l," on "):"",d]}),(0,r.tZ)(se.h,{alt:u?"Exit fullscreen":"Enter fullscreen",onClick:function(){s(!u)},children:u?(0,r.tZ)(de.Z,{}):(0,r.tZ)(fe.Z,{})})]})]})}function Ze(e){var n,t=e.startTime,i=e.endTime,o=e.localStartTime,l=e.exitCode,c=e.executionMode,u=e.isDone,s=e.isFullscreen,d=e.onRequestFullscreen,f=(0,a.useState)((function(){return Date.now()})),p=f[0],h=f[1],v=(0,ie.Z)();return(0,a.useEffect)((function(){if(v.current&&!u){var e=setInterval((function(){h(Date.now())}),100);return function(){clearInterval(e)}}}),[u,v]),t&&i?n=ge(t,i):!u&&o&&(n=ge(o,p)),(0,r.tZ)(ye,{isDone:u,hasError:0!==l,errorTooltipText:void 0!==l?"Exit code: ".concat(l):"Error",executionPillText:null!==c&&void 0!==c?c:"unknown",duration:n,time:null!==t&&void 0!==t?t:o,isFullscreen:s,onRequestFullscreen:d})}function be(e){var n,t=e.localStartTime,i=e.localEndTime,o=e.isDone,l=e.hasError,c=e.isFullscreen,u=e.onRequestFullscreen,s=(0,a.useState)((function(){return Date.now()})),d=s[0],f=s[1],p=(0,ie.Z)();return(0,a.useEffect)((function(){if(p.current&&!o){var e=setInterval((function(){f(Date.now())}),100);return function(){clearInterval(e)}}}),[o,p]),i?n=ge(t,i):!o&&t&&(n=ge(t,d)),(0,r.tZ)(ye,{isDone:o,hasError:l,errorTooltipText:"Packager error",executionPillText:"packager",duration:n,time:t,isFullscreen:c,onRequestFullscreen:u})}function we(e){var n=e.error;return(0,r.tZ)(y.G,{css:me.outputError,children:n.split("\n").map((function(e,n){return(0,r.tZ)(Z.xv,{multiline:!0,children:e},n)}))})}function xe(e){var n=e.targetHeight,t=Math.min(Math.floor((n-8)/20),4),o=(0,a.useMemo)((function(){return Array.from({length:t}).map((function(e,n){return(0,r.tZ)(y.G,{css:[me.terminalLoadingLine,g.l0.width(100*Math.random()+"%")]},n)}))}),[t]);return(0,r.tZ)(y.G,{css:me.terminalLoadingWrapper,style:(0,i.Z)({},he.previewHeight,n+"px"),children:o})}function ke(e){var n=e.type,t=e.output,o=e.error,l=e.startTime,c=e.localStartTime,u=e.localEndTime,s=e.endTime,d=e.isDone,p=e.onInput,h=e.openFile,v=e.listFiles,m=e.autoFocus,g=e.rootRef,Z=e.maxHeight,b=e.isFullscreen,w=e.onRequestFullscreen,x=(0,F.Z)(e,["type","output","error","startTime","localStartTime","localEndTime","endTime","isDone","onInput","openFile","listFiles","autoFocus","rootRef","maxHeight","isFullscreen","onRequestFullscreen"]),k=(0,a.useRef)(null),C=(0,a.useState)(0),S=C[0],T=C[1],E=(0,a.useState)(0),R=E[0],I=E[1],G=(0,a.useState)(!0),D=G[0],_=G[1],P=(0,a.useState)(!1),B=P[0],A=P[1],U=(0,ce.f)(),L=(0,le.Z)(b||D,B?6e4:500),X=(0,f.Z)((function(e){var n=e.height;T(n)}),{type:"throttle",wait:200}),N=(0,f.Z)((function(e){var n=e.height;b||I(n)}),{type:"throttle",wait:200});(0,a.useEffect)((function(){if(g.current){var e,n=g.current,t=function(){A(!0),e&&clearTimeout(e),e=setTimeout((function(){A(!1)}),500)};return n.addEventListener("scroll",t),function(){clearInterval(e),n.removeEventListener("scroll",t)}}}),[g]),(0,a.useEffect)((function(){if(k.current&&g.current)return(0,ae.j)(k.current,(function(){return _(!0),function(){_(!1)}}),{root:g.current,threshold:0})}),[g,k]);var O,W=n===$.kH.EXECUTION?(0,r.tZ)(Ze,(0,M.Z)({startTime:l,localStartTime:c,endTime:s,isDone:d,isFullscreen:b,onRequestFullscreen:w},x)):(0,r.tZ)(be,{localStartTime:c,localEndTime:u,isDone:d,hasError:void 0!==o,isFullscreen:b,onRequestFullscreen:w});return(0,r.BX)(y.G,{css:me.outputBlock,innerRef:k,children:[b?(0,r.tZ)(y.G,{style:{height:R+"px"}}):null,(0,r.tZ)(y.G,{innerRef:N,children:(0,r.tZ)(y.G,{css:b&&me.outputBlockFullscreen,children:(0,r.BX)(K.Tg,{elevated:!0,css:me.outputBlockWrapper,children:[W,t.length>0?(0,r.tZ)(y.G,{css:[me.outputBlockTerminalWrapper,d&&me.outputBlockTerminalWrapperDone],style:(O={},(0,i.Z)(O,he.terminalMinHeight,S+"px"),(0,i.Z)(O,he.terminalMaxHeight,b?"none":Z+"px"),(0,i.Z)(O,he.terminalBackgroundColor,null===U||void 0===U?void 0:U.background),O),children:!d||L?(0,r.tZ)(y.G,{innerRef:X,css:b&&me.fullscreenTerminal,children:(0,r.tZ)(q,{output:t,onInput:p,openFile:h,listFiles:v,maxHeight:b?S-4:Z,roudnedBottomCorners:void 0===o,enableViewportScroll:b,autoFocus:m})}):(0,r.tZ)(xe,{targetHeight:S})}):null,void 0!==o?(0,r.tZ)(we,{error:o}):null]})})})]})}function Ce(){var e=(0,d.Z)().runner,n=(0,a.useState)((function(){return e.getRunState()})),t=n[0],i=n[1];return(0,a.useEffect)((function(){var n=e.onStateChanged((function(e){i(e)}));return function(){return n()}}),[e]),t===$.Ah.OFFLINE?(0,r.tZ)(y.G,{css:me.emptyStateWrapper,children:(0,r.tZ)(y.G,{children:"The Repl is booting..."})}):(0,r.BX)(y.G,{css:me.emptyStateWrapper,children:[(0,r.tZ)(y.G,{children:"Results of your code will appear here when you"}),(0,r.tZ)(oe.ZP,{runner:e}),(0,r.tZ)(y.G,{children:"the project."})]})}function Se(e){var n,t=e.performPaneOperation,i=e.isActive,o=(0,d.Z)(),l=o.runner,c=o.fs,u=(0,a.useState)([]),s=u[0],p=u[1],h=(0,a.useState)(0),v=h[0],m=h[1],g=(0,a.useRef)(null),Z=(0,a.useState)(null),b=Z[0],w=Z[1];if("outputs"!==l.mode)throw new Error("outputs pane actions are only supported with outputs runner");var x=(0,f.Z)((function(e){var n=e.height;m(n)}),{type:"throttle",wait:200}),k=(0,a.useMemo)((function(){return[{type:"action",label:"Clear outputs history",icon:(0,r.tZ)(Y.Z,{}),run:function(){l.clearBlockHistory(),p(l.getOutputBlocks())}}]}),[l]);(0,S.L5)((function(){return{actions:k}}),[k]);var C=(0,a.useCallback)((function(e){t({operation:"open",secondary:!0,pane:{type:(0,B.Dp)(e),data:e}})}),[t]);(0,a.useEffect)((function(){p(l.getOutputBlocks())}),[l]),(0,a.useEffect)((function(){var e=l.onBlockChanged((function(e){var n=!s.find((function(n){return n.id===e.id}));n&&g.current&&g.current.scrollTo(0,g.current.scrollHeight),n&&(0===s.length?w(e.id):w(null)),p((0,O.ZP)((function(n){var t=n.findIndex((function(n){return n.id===e.id}));t>=0?n[t]=e:n.push(e)})))}));return function(){return e()}}),[l,s]);var T=Math.floor(.85*v),E=null!==b,R=!0===(null===(n=s[s.length-1])||void 0===n?void 0:n.isDone),I=!E&&!R;return(0,r.tZ)(y.G,{css:me.outputsListWrapper,innerRef:x,children:0===s.length?(0,r.tZ)(Ce,{}):(0,r.BX)(y.G,{css:I?me.outputsListSnapToBottom:me.outputsList,innerRef:g,children:[s.map((function(e,n){var t=n===s.length-1,o=b===e.id;return(0,r.tZ)(ke,(0,M.Z)({rootRef:g,isFullscreen:o,onRequestFullscreen:function(n){n?w(e.id):o&&w(null)},maxHeight:T,onInput:l.sendInput,openFile:C,listFiles:c.listFiles,autoFocus:i&&t},e),e.id)})),I?(0,r.tZ)(y.G,{css:me.scrollSnap}):null]})})}var Te=t(88541),Ee={Content:function(e){var n=e.options;return(0,Te.P5)({controlName:"flag-outputs",logFlagToAnalytics:!1})?(0,r.tZ)(Se,{isActive:n.isActive,performPaneOperation:n.performPaneOperation}):(0,r.tZ)(Re,{isActive:n.isActive,performPaneOperation:n.performPaneOperation})},Icon:function(e){var n=e.size;return(0,r.tZ)(U.Z,{size:n})},getTitle:function(){return"Console"}};function Re(e){var n=e.isActive,t=e.performPaneOperation,i=(0,d.Z)(),o=i.runner,l=i.packager,c=i.container,u=i.debuggest,s=i.fs,f=a.useRef(null),p=(0,L.Z)(u.mainClient),h=(0,X.K)();a.useEffect((function(){if(p)return p.onOutput((function(e){f.current&&f.current.write(e)}))}),[p]);var v=(0,N.T3)();a.useEffect((function(){if(!v)return o.onLocalRun((function(){var e,t;(null===(e=f.current)||void 0===e||e.clear(),n)&&(null===(t=f.current)||void 0===t||t.focus())}))}),[v,n,o]);var m=(0,S.Wk)();(0,S.L5)((function(){return{type:"runnerOutput",clear:function(){var e;return null===(e=f.current)||void 0===e?void 0:e.clear()},write:function(e){var n;return null===(n=f.current)||void 0===n?void 0:n.write(e)}}}),[f]);var g=a.useCallback((function(e){t({operation:"open",secondary:!0,pane:{type:(0,B.Dp)(e),data:e}})}),[t]);return"html"===o.mode?null:(0,r.tZ)(A.Z,{tracker:h,runner:o,debugClient:p,packager:l,ref:f,onBootStatus:c.client().onBootStatus,openPane:function(e){t({operation:"open",pane:e})},focusOnLoad:n&&!v,focusRef:m,openFile:g,listFiles:s.listFiles})}var Ie,Ge=t(57135),De=t(4405),_e=t(96583),Pe=t(34489),Be=t(1050),Ae=t(11969),Ue=t(68825),Le=t(625),Xe=t(31672),Ne=t(28814),Me=t(34227),Fe=t(64804),Oe=t(45510),We=t(2041),He=t(25198),Ve=t(20406),ze=t(57467),je=t(1468),qe=Le.U3.ENV_EDITOR_USED;function $e(e){var n=e.secrets,t=e.update,i=(0,a.useState)(!1),o=i[0],l=i[1],c=(0,a.useState)(!1),u=c[0],s=c[1],d=(0,a.useState)(!1),f=d[0],p=d[1],h=(0,a.useState)(0),v=h[0],m=h[1],b=0===v,w=(0,a.useRef)();w.current||(w.current=(0,Ne.ir)((function(e){var n=Ye(e.state.doc.toString());return m(n),0!==n?(0,Le.j)(qe,{action:"rawEditorUpdatedError"}):(0,Le.j)(qe,{action:"rawEditorUpdated"}),[]})));var x=(0,Fe.Z)(),k=x.ref,C=x.view,S=function(){u||l(!1)},T=function(){var e=(0,Ge.Z)((function(){var e,n;return(0,_e.__generator)(this,(function(r){switch(r.label){case 0:if(!C)return[2];if(!function(){if(!C)return!1;var e=Ye(C.state.doc.toString());return m(e),0===e}())return[2];s(!0),r.label=1;case 1:return r.trys.push([1,3,,4]),e=JSON.parse(C.state.doc.toString()),[4,t(e)];case 2:return r.sent(),s(!1),p(!0),setTimeout((function(){S(),setTimeout((function(){p(!1)}),500)}),500),[3,4];case 3:return n=r.sent(),je.c_.captureException(n),(0,Le.j)(qe,{action:"rawEditorUpdatedError"}),m(3),s(!1),[3,4];case 4:return[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,a.useEffect)((function(){if(C){var e=JSON.stringify(n,null,2);"{}"===e&&(e="{\n  \n}"),C.dispatch({changes:{from:0,to:C.state.doc.length,insert:e}}),C.dispatch({selection:{anchor:C.state.doc.length-2}}),C.focus()}}),[C,n]),(0,r.BX)(r.HY,{children:[(0,r.tZ)(Oe.zx,{onClick:function(){return p(!1),l(!0),void(0,Le.j)(qe,{action:"rawEditorOpened"})},text:"Edit as JSON",iconLeft:(0,r.tZ)(Ve.Z,{}),small:!0}),(0,r.tZ)(We.u,{isOpen:o,onRequestClose:function(){return S()},children:(0,r.BX)(y.G,{css:[g.l0.colWithGap(24)],children:[(0,r.tZ)(Z.h4,{level:1,variant:"headerDefault",children:"Raw Secrets Editor"}),(0,r.tZ)(Z.xv,{children:"Secrets are specified in JSON. Values must be strings."}),(0,r.tZ)(K.Tg,{css:[g.l0.borderRadius(8),g.l0.transition.snappy,g.l0.p(4),{border:"1px solid var(--outline-dimmer)",":hover":{borderColor:"var(--outline-stronger)"}}],elevated:!0,children:(0,r.tZ)(Me.Z,{ref:k,readOnly:u||f,extensions:w.current,language:"json",hideGutter:!0})}),(0,r.BX)(y.G,{css:[g.l0.rowWithGap(4),g.l0.justify.end],children:[!b&&(0,r.tZ)(He.E,{icon:(0,r.tZ)(ze.Z,{}),colorway:"negative",text:Ke(v)}),(0,r.BX)(y.G,{css:[g.l0.rowWithGap(12)],children:[(0,r.tZ)(Oe.zx,{onClick:S,text:"Cancel"}),(0,r.tZ)(Oe.zx,{iconLeft:(0,r.tZ)(ne.Z,{}),stretch:!0,colorway:f?"positive":"primary",text:f?"Saved!":"Save",disabled:!b||u||f,onClick:function(){return T()}})]})]})]})})]})}function Ye(e){try{var n=JSON.parse(e);for(var t in n){if("string"!==typeof t)return 2;if("string"!==typeof n[t])return 2}return 0}catch(r){return 1}}function Ke(e){switch(e){case 1:return"Make sure the data is valid JSON.";case 2:return"Make sure that all values are strings.";case 3:return"There was an error saving the secrets.";default:return""}}!function(e){e[e.VALID=0]="VALID",e[e.ERROR_PARSE=1]="ERROR_PARSE",e[e.ERROR_STRINGS=2]="ERROR_STRINGS",e[e.ERROR_SAVE=3]="ERROR_SAVE"}(Ie||(Ie={}));var Qe=t(39137),Je=t(32104),en=t(13716),nn=t(62405),tn=t(99397),rn=t(8622),on=t(86302),an=t(33280),ln=t(79637),cn=t(13233),un=t(77806),sn=t(31854),dn=t(5889),fn=t(9493),pn=t(18171),hn=(0,b.X)({addSecretContainer:[g.l0.p(8),g.l0.backgroundColor.backgroundHigher,g.l0.flex.column,g.l0.colWithGap(8)],addSecretHeader:[g.l0.flex.row,g.l0.justify.spaceBetween,g.l0.align.center],colGap4:[g.l0.flex.column,g.l0.colWithGap(4)],colGap8:[g.l0.flex.column,g.l0.colWithGap(8)],secretItemEdit:[g.l0.p(8),g.l0.borderRadius(0),g.l0.backgroundColor.backgroundHigher,g.l0.flex.column,g.l0.colWithGap(8)],secretItem:[g.l0.p(8),g.l0.flex.row,g.l0.rowWithGap(16),g.l0.align.center,g.l0.borderRadius(0),g.l0.backgroundColor.backgroundHigher],secretItemKey:[g.l0.flex.grow(2),g.l0.flex.row,g.l0.rowWithGap(8),g.l0.align.center,g.l0.pr(16),{minWidth:0,flex:"1 0 0"}],secretItemValue:[g.l0.flex.row,g.l0.rowWithGap(4),g.l0.align.center,g.l0.flex.grow(1),g.l0.flex.shrink(1),{minWidth:0,flexBasis:0}],secretItemValueToggle:[g.l0.py(2),g.l0.px(4),g.l0.borderRadius(4),g.l0.flex.shrink(1),{minWidth:0}],headerStyle:[g.l0.flex.row,g.l0.rowWithGap(8),g.l0.align.center,g.l0.p(8)],codeInserter:[g.l0.borderRadius(8),g.l0.p(8),g.l0.flex.row,g.l0.rowWithGap(8),g.l0.align.center],stepWrapper:[g.l0.p(8),g.l0.colWithGap(8)]}),vn={fontFamily:"text-security-disc"};function mn(e){var n=e.onClose,t=e.onAdd,i=e.otherKeys,l=(0,o.Z)(a.useState(!0),2),c=l[0],s=l[1],d=(0,o.Z)(a.useState({key:"",value:""}),2),f=d[0],p=d[1],h=f.key.length>0&&!i.includes(f.key);return(0,r.tZ)(r.HY,{children:(0,r.BX)(K.Tg,{elevated:!0,css:[hn.addSecretContainer,0!==i.length?g.l0.border({direction:"bottom",color:g.TV.backgroundHighest}):null],children:[(0,r.BX)(y.G,{css:g.l0.layout.columns,children:[(0,r.BX)(y.G,{css:[hn.colGap4,g.l0.layout.colSpan(5)],children:[(0,r.tZ)(Z.xv,{css:[g.l0.pt(2),g.l0.pb(4)],variant:"small",color:"dimmer",multiline:!1,children:"Key"}),(0,r.tZ)(Qe.II,{value:f.key,onChange:function(e){return p((0,De.Z)((0,M.Z)({},f),{key:e.target.value}))},placeholder:"SECRET_KEY",autoComplete:"off"}),i.includes(f.key)?(0,r.BX)(Z.xv,{multiline:!1,variant:"small",css:{color:g.TV.accentNegativeDefault},children:['Secret "',f.key,'" already exists']}):null]}),(0,r.BX)(y.G,{css:[hn.colGap4,g.l0.layout.colSpan(7)],children:[(0,r.BX)(y.G,{css:[g.l0.flex.row,g.l0.rowWithGap(4),g.l0.align.center],children:[(0,r.tZ)(Z.xv,{variant:"small",color:"dimmer",multiline:!1,children:"Value"}),(0,r.tZ)(se.h,{alt:"Toggle Visibility",tooltipHidden:!0,onClick:function(){return s(!c)},children:c?(0,r.tZ)(u.Z,{}):(0,r.tZ)(nn.Z,{})})]}),(0,r.tZ)(Qe.II,{value:f.value,onChange:function(e){return p((0,De.Z)((0,M.Z)({},f),{value:e.target.value}))},style:c?vn:void 0,autoComplete:"off",placeholder:"Value"})]})]}),(0,r.BX)(y.G,{css:[g.l0.rowWithGap(8),g.l0.justify.end],children:[(0,r.tZ)(Oe.zx,{text:"Cancel",onClick:function(){n()}}),(0,r.tZ)(Oe.zx,{text:"Save",colorway:"primary",disabled:!h,onClick:function(){t({key:f.key.trim(),value:f.value}),p({key:"",value:""})}})]})]})})}function gn(e){var n=e.value,t=(0,cn.Z)();return(0,r.tZ)(se.h,{alt:"Copy",tooltipHidden:!0,onClick:function(){navigator.clipboard.writeText(n).then((function(){t.showConfirm("Copied")}))},children:(0,r.tZ)(un.Z,{})})}function yn(e){var n=e.secret,t=e.onUpdateSecret,i=e.onDeleteSecret,l=e.last,c=(0,o.Z)(a.useState(null),2),s=c[0],d=c[1],f=(0,o.Z)(a.useState(!1),2),p=f[0],h=f[1],v=(0,o.Z)(a.useState(!1),2),m=v[0],b=v[1],w=(0,o.Z)(a.useState(n.value),2),x=w[0],k=w[1],C=(0,o.Z)(a.useState(!0),2),S=C[0],T=C[1];return s?(0,r.BX)(r.HY,{children:[(0,r.BX)(K.Tg,{elevated:!0,css:[hn.secretItemEdit,l?{borderBottom:"none"}:g.l0.border({direction:"bottom",color:g.TV.backgroundHighest})],children:[(0,r.BX)(y.G,{css:g.l0.layout.columns,children:[(0,r.BX)(y.G,{css:[hn.colGap4,g.l0.layout.colSpan(5)],children:[(0,r.tZ)(Z.xv,{multiline:!1,css:[g.l0.pt(2),g.l0.pb(4)],variant:"small",color:"dimmer",children:"Key"}),(0,r.tZ)(Qe.II,{value:s.key,onChange:function(e){return d((function(n){return n?(0,De.Z)((0,M.Z)({},n),{key:e.target.value}):n}))},placeholder:"SECRET_KEY",autoComplete:"off"})]}),(0,r.BX)(y.G,{css:[hn.colGap4,g.l0.layout.colSpan(7)],children:[(0,r.BX)(y.G,{css:[g.l0.flex.row,g.l0.rowWithGap(4),g.l0.align.center],children:[(0,r.tZ)(Z.xv,{multiline:!1,css:[g.l0.pt(2),g.l0.pb(4)],variant:"small",color:"dimmer",children:"Value"}),(0,r.tZ)(se.h,{alt:"Toggle Visibility",tooltipHidden:!0,onClick:function(){return T(!S)},children:S?(0,r.tZ)(u.Z,{}):(0,r.tZ)(nn.Z,{})})]}),(0,r.tZ)(Qe.II,{value:s.value,style:S?vn:void 0,onChange:function(e){return d((function(n){return n?(0,De.Z)((0,M.Z)({},n),{value:e.target.value}):n}))}})]})]}),(0,r.BX)(y.G,{css:[g.l0.flex.row,g.l0.rowWithGap(8)],children:[(0,r.tZ)(Oe.zx,{text:"Delete",colorway:"negative",onClick:function(){return b(!0)}}),(0,r.tZ)(y.G,{css:g.l0.flex.grow(1)}),(0,r.tZ)(Oe.zx,{text:"Cancel",onClick:function(){return d(null)}}),(0,r.tZ)(Oe.zx,{colorway:"primary",text:"Save",disabled:!s.key.length,onClick:function(){t(n.key,{key:s.key.trim(),value:s.value}),d(null)}})]})]}),(0,r.tZ)(We.u,{isOpen:m,onRequestClose:function(){return b(!1)},children:(0,r.BX)(y.G,{css:hn.colGap8,children:[(0,r.BX)(Z.xv,{variant:"subheadDefault",multiline:!1,children:["Delete ",n.key,"?"]}),(0,r.tZ)(Z.xv,{color:"dimmer",multiline:!1,children:"Are you sure you would like to delete this secret? This cannot be undone."}),(0,r.BX)(y.G,{css:[g.l0.justify.end,g.l0.flex.row,g.l0.rowWithGap(8)],children:[(0,r.tZ)(Oe.zx,{text:"Cancel",onClick:function(){return b(!1)}}),(0,r.tZ)(Oe.zx,{text:"Delete",colorway:"negative",onClick:function(){return i(n.key)}})]})]})})]}):(0,r.BX)(K.Tg,{elevated:!0,children:[(0,r.BX)(y.G,{css:[hn.secretItem,l?{borderBottom:"none"}:{borderBottom:"1px solid ".concat(g.TV.backgroundHighest)}],children:[(0,r.BX)(y.G,{css:hn.secretItemKey,children:[(0,r.tZ)(gn,{value:n.key}),(0,r.tZ)(Z.xv,{multiline:!1,children:n.key})]}),""===n.value?(0,r.BX)(y.G,{css:hn.secretItemValue,children:[(0,r.tZ)(Qe.II,{value:x,onChange:function(e){return k(e.target.value)},autoComplete:"off",style:S?vn:void 0,placeholder:"Enter a value",css:[g.l0.maxWidth(200),g.l0.py(2),g.l0.px(6)]}),(0,r.tZ)(se.h,{alt:"Toggle Visibility",tooltipHidden:!0,onClick:function(){return T(!S)},children:S?(0,r.tZ)(u.Z,{}):(0,r.tZ)(nn.Z,{})}),(0,r.tZ)(se.h,{colorway:"primary",alt:"Save Secret Value",tooltipHidden:!0,onClick:function(){t(n.key,{key:n.key,value:x}),k("")},children:(0,r.tZ)(ne.Z,{})})]}):(0,r.BX)(y.G,{css:hn.secretItemValue,children:[(0,r.tZ)(gn,{value:n.value}),(0,r.tZ)(se.h,{alt:"Toggle Secret",tooltipHidden:!0,onClick:function(){return h(!p)},children:p?(0,r.tZ)(nn.Z,{}):(0,r.tZ)(u.Z,{})}),(0,r.tZ)(y.G,{css:hn.secretItemValueToggle,children:(0,r.tZ)(Z.xv,{multiline:!1,css:{fontFamily:g.TV.fontFamilyCode},children:p?n.value:"\u2022".repeat(12)})})]}),(0,r.tZ)(y.G,{children:(0,r.tZ)(ln.Z,{label:"Options",items:[{label:(0,r.BX)(y.G,{css:[g.l0.flex.row,g.l0.rowWithGap(8),g.l0.align.center],children:[(0,r.tZ)(Be.Z,{}),(0,r.tZ)(Z.xv,{multiline:!1,children:"Edit"})]}),onClick:function(){d(n)}},{label:(0,r.BX)(y.G,{css:[g.l0.flex.row,g.l0.rowWithGap(8),g.l0.align.center],children:[(0,r.tZ)(Y.Z,{color:g.TV.accentNegativeStronger}),(0,r.tZ)(Z.xv,{css:{color:g.TV.accentNegativeStronger},multiline:!1,children:"Delete"})]}),isDescructive:!0,onClick:function(){b(!0)}}],onItemClick:function(e){var n;return null===(n=e.onClick)||void 0===n?void 0:n.call(e)}})})]}),(0,r.tZ)(We.u,{isOpen:m,onRequestClose:function(){return b(!1)},children:(0,r.BX)(y.G,{css:[g.l0.colWithGap(24)],children:[(0,r.BX)(Z.xv,{multiline:!1,variant:"headerDefault",children:["Delete ",n.key,"?"]}),(0,r.tZ)(Z.xv,{color:"dimmer",multiline:!1,children:"Are you sure you would like to delete this secret? This cannot be undone."}),(0,r.BX)(y.G,{css:[g.l0.justify.end,g.l0.flex.row,g.l0.rowWithGap(12)],children:[(0,r.tZ)(Oe.zx,{text:"Cancel",onClick:function(){return b(!1)}}),(0,r.tZ)(Oe.zx,{iconLeft:(0,r.tZ)(Y.Z,{}),text:"Yes, delete secret",colorway:"negative",onClick:function(){return i(n.key)}})]})]})})]})}function Zn(e){var n=e.secrets,t=e.onUpdateSecret,i=e.onDeleteSecret,a=e.onAddSecret,l=e.showAddSecret,c=e.onClose,u=Object.entries(n).filter((function(e){var n=(0,o.Z)(e,2);n[0];return""===n[1]})),s=Object.entries(n).filter((function(e){var n=(0,o.Z)(e,2);n[0];return""!==n[1]}));return(0,r.BX)(r.HY,{children:[0!==u.length&&(0,r.BX)(y.G,{css:[g.l0.colWithGap(8),g.l0.p(8)],children:[(0,r.tZ)(Z.xv,{variant:"subheadDefault",multiline:!1,children:"Configure missing Secret values"}),(0,r.tZ)(Z.xv,{variant:"small",children:"This Repl contains Secrets that might be required. Add values to ensure the code runs as expected."}),(0,r.tZ)(K.Tg,{css:[g.l0.borderRadius(8),{overflow:"hidden"}],children:u.map((function(e,n){var a=(0,o.Z)(e,2),l=a[0],c=a[1];return(0,r.tZ)(yn,{secret:{key:l,value:c},onUpdateSecret:t,onDeleteSecret:i,last:n===u.length-1},l)}))})]}),0!==u.length&&0!==s.length&&(0,r.tZ)(an.R,{}),(0,r.tZ)(y.G,{css:[g.l0.colWithGap(8),g.l0.p(8)],children:(0,r.BX)(K.Tg,{css:[g.l0.borderRadius(8),{overflow:"hidden"}],children:[l?(0,r.tZ)(mn,{onClose:c,onAdd:a,otherKeys:Object.keys(n)}):null,(0,r.tZ)(y.G,{children:s.map((function(e,n){var a=(0,o.Z)(e,2),l=a[0],c=a[1];return(0,r.tZ)(yn,{secret:{key:l,value:c},onUpdateSecret:t,onDeleteSecret:i,last:n===s.length-1},l)}))})]})})]})}function bn(e){var n=e.secrets,t=e.activeFile,i=e.onInsertDone,l=(0,o.Z)(a.useState(Object.keys(n)[0]),2),c=l[0],u=l[1],s=(0,Xe.Z)(t),d=(0,en.Qt)();return s&&(0,fn.e)(t,c)&&0!==Object.keys(n).length?(0,r.BX)(r.HY,{children:[(0,r.tZ)(an.R,{}),(0,r.BX)(y.G,{css:[g.l0.colWithGap(16),g.l0.p(8)],children:[(0,r.BX)(y.G,{css:[g.l0.flex.row,g.l0.rowWithGap(8),g.l0.align.center],children:[(0,r.tZ)(Z.xv,{variant:"subheadDefault",multiline:!1,children:"Access secret"}),(0,r.tZ)(sn.P,{css:g.l0.minWidth(48),items:Object.keys(n).map((function(e){return{title:e}})),selectedItem:{title:c},onChange:function(e){return u(e.title)}})]}),(0,r.tZ)(K.Tg,{background:"default",children:(0,r.tZ)(fn.Z,{elevated:!0,keyName:c,filePath:t,onInsert:function(e){var n,t,r=null!==(t=null===(n=d())||void 0===n?void 0:n.position.offset)&&void 0!==t?t:0;s({code:e,insertAt:r}),i&&i(),(0,Le.j)(Le.U3.ENV_EDITOR_USED,{action:"insert"})}})})]})]}):null}function wn(e,n){var t=(0,M.Z)({},e);return"add"===n.type?t[n.key]=n.value:"update"===n.type?(delete t[n.oldKey],t[n.key]=n.value):delete t[n.key],t}function xn(e){var n=e.readRawEnv,t=e.writeRawEnv,i=e.getRunState,l=(0,en.R3)(),c=(0,ie.Z)(),u=(0,o.Z)(a.useState(null),2),s=u[0],d=u[1],f=(0,o.Z)(a.useState(!1),2),p=f[0],h=f[1],v=function(){h(!1)},m=(0,Ue.Z)();a.useEffect((function(){(0,Le.Cn)(Le.U3.ENV_EDITOR_USED,{action:"opened"}),Ae.Z.set("enveditortour",!0)}),[]),a.useEffect((function(){function e(){return(e=(0,Ge.Z)((function(){var e,t;return(0,_e.__generator)(this,(function(r){switch(r.label){case 0:return[4,n()];case 1:if((e=r.sent()).error===w.Df.NotFound)return c.current&&d({}),[2];if(e.error)throw new Error("Error getting .env");return c.current?(t=Pe.Z.parse(e.content.toString()),d(t),[2]):[2]}}))}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[n,d,c]);var b=a.useRef(null),x=a.useRef([]),k=function(){var e=(0,Ge.Z)((function(e){var r,i,o,a,l;return(0,_e.__generator)(this,(function(c){switch(c.label){case 0:if(!s)throw new Error("trying to write secrets before loading");return r=wn(s,e),d(r),x.current.push(e),i=Math.random(),b.current=i,[4,n()];case 1:return a=c.sent(),b.current!==i?[2]:(a.error?o=r:(o=Pe.Z.parse(a.content.toString()),x.current.forEach((function(e){o=wn(o,e)})),d(o)),x.current=[],l=Pe.Z.serialize(o),[4,t(l)]);case 2:return c.sent(),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),C=(0,cn.Z)().showConfirm,S=function(){var e=(0,Ge.Z)((function(e){return(0,_e.__generator)(this,(function(n){return(0,Le.j)(Le.U3.ENV_EDITOR_USED,{action:"created",multiline:e.value.includes("\n")}),k((0,M.Z)({type:"add"},e)),i()===$.Ah.RUNNING&&C("Re-run your Repl to use this secret"),v(),[2]}))}));return function(n){return e.apply(this,arguments)}}(),T=function(){var e=(0,Ge.Z)((function(e,n){return(0,_e.__generator)(this,(function(t){return(0,Le.j)(Le.U3.ENV_EDITOR_USED,{action:"updated",multiline:n.value.includes("\n")}),k((0,M.Z)({type:"update",oldKey:e},n)),[2]}))}));return function(n,t){return e.apply(this,arguments)}}(),E=function(){var e=(0,Ge.Z)((function(e){return(0,_e.__generator)(this,(function(n){return(0,Le.j)(Le.U3.ENV_EDITOR_USED,{action:"deleted"}),k({type:"delete",key:e}),[2]}))}));return function(n){return e.apply(this,arguments)}}(),R=(0,pn.Z)((function(){return s&&Object.keys(s).length>0}),[s]);return s&&m?(0,r.BX)(y.G,{css:[g.l0.flex.column],children:[(0,r.BX)(y.G,{css:hn.headerStyle,children:[(0,r.tZ)(Z.xv,{variant:"subheadBig",multiline:!1,children:"Secrets"}),(0,r.tZ)(y.G,{css:g.l0.flex.grow(1)}),(0,r.tZ)($e,{secrets:s,update:function(){var e=(0,Ge.Z)((function(e){var n;return(0,_e.__generator)(this,(function(r){switch(r.label){case 0:return d(e),n=Pe.Z.serialize(e),[4,t(n)];case 1:return r.sent(),[2]}}))}));return function(n){return e.apply(this,arguments)}}()}),(0,r.tZ)(on.Z,{iconLeft:(0,r.tZ)(tn.Z,{}),href:"https://docs.replit.com/programming-ide/workspace-features/secrets",small:!0,text:"Docs",target:"_blank"}),(0,r.tZ)(Oe.zx,{iconLeft:(0,r.tZ)(rn.Z,{}),text:"New Secret",colorway:"primary",small:!0,onClick:function(){return h(!0)}})]}),(0,r.BX)(r.HY,{children:[(0,r.tZ)(an.R,{}),0===Object.keys(s).length&&!1===p&&(0,r.BX)(y.G,{css:[g.l0.center,g.l0.flex.shrink(1)],children:[(0,r.tZ)(dn.Z,{alt:"A rotating key",src:"/public/images/secrets/secretskey.gif",height:200,width:200,objectFit:"contain"}),(0,r.tZ)(Z.xv,{variant:"subheadDefault",multiline:!1,children:"Store sensitive information securely using Secrets."}),(0,r.tZ)(Z.xv,{css:[g.l0.textAlign.center,g.l0.mt(8),g.l0.color],multiline:!1,children:(0,r.tZ)("a",{href:"https://docs.replit.com/programming-ide/workspace-features/secrets#how-replit-keeps-your-secrets-safe",target:"_blank",rel:"noopener",children:"How does Replit keep my Secrets safe?"})})]}),(0,r.tZ)(Zn,{secrets:s,onUpdateSecret:T,onDeleteSecret:E,onAddSecret:S,showAddSecret:p,onClose:v}),l&&R?(0,r.tZ)(r.HY,{children:(0,r.tZ)(bn,{secrets:s,activeFile:l})}):null]})]}):(0,r.tZ)(y.G,{css:[g.l0.center,g.l0.coverContainer],children:(0,r.tZ)(Je.Z,{size:24})})}var kn=t(13548),Cn={Content:function(){return(0,r.tZ)(Sn,{})},Icon:function(e){var n=e.size;return(0,r.tZ)(kn.Z,{size:n})},getTitle:function(){return"Secrets"}};function Sn(){var e=(0,d.Z)().fs,n=(0,d.Z)().runner;return(0,r.tZ)(xn,{readRawEnv:function(){return e.readFile(".env")},writeRawEnv:function(n){return e.writeFile(".env",n)},getRunState:n.getRunState})}var Tn=t(65911),En=t(48330),Rn=t(36443),In=t(94045),Gn=t(62755),Dn=t(46688),_n=t(92683);var Pn,Bn=t(57913),An=t(63740);!function(e){e.INSTALL="Install",e.INSTALLED="Installed",e.REMOVE="Remove",e.ERROR="Failed to Install"}(Pn||(Pn={}));var Un=(0,b.X)({self:[g.l0.p(8),g.l0.borderRadius(8),g.l0.width("100%")],header:[g.l0.flex.row,g.l0.justify.spaceBetween],description:[g.l0.colWithGap(16),g.l0.mt(8)]});function Ln(e){var n=e.onActionClick,t=e.isAlreadyInstalled,i=e.isPackagerRunning,o=e.isIconLoading,l=e.statusMessage,c=e.itemName,u=e.itemDescription,s=e.itemVersion,d=e.itemHomepageURL,f=e.itemLicense,p=e.itemAuthor,h=e.itemDependencies,v=e.htmlItem,m=(0,a.useState)(!1),g=m[0],b=m[1],w=d||f||p||h&&h.length;return(0,r.BX)(K.Tg,{css:Un.self,elevated:!0,children:[(0,r.BX)(y.G,{css:Un.header,children:[(0,r.tZ)(Z.h4,{variant:"subheadDefault",level:3,children:c}),w?(0,r.tZ)(se.h,{alt:"Show more about package",tooltipHidden:!0,onClick:function(){return b((function(e){return!e}))},children:(0,r.tZ)(Bn.Z,{rotate:g?90:0})}):null]}),(0,r.BX)(y.G,{css:Un.description,children:[(0,r.tZ)(On,{title:"Version ".concat(s),value:u||"This package has no description.",showMore:g}),d&&g?(0,r.tZ)(On,{title:"Website",value:(0,r.tZ)("a",{href:d,rel:"noreferrer noopener",target:"_blank",children:d}),showMore:g}):null,f&&g?(0,r.tZ)(On,{title:"License",value:f,showMore:g}):null,p&&g?(0,r.tZ)(On,{title:"Author",value:p,showMore:g}):null,h&&h.length&&g?(0,r.tZ)(On,{title:"Dependencies",value:(0,r.tZ)("ul",{css:{listStyle:"none"},children:null===h||void 0===h?void 0:h.map((function(e){return(0,r.tZ)("li",{children:e},e||"")}))}),showMore:g}):null,(0,r.tZ)(Oe.zx,(0,M.Z)({iconLeft:(0,r.tZ)(Wn,{isAlreadyInstalled:t,isPackagerRunning:i,isIconLoading:o,htmlItem:!!v}),text:l,onClick:function(){return n()},disabled:i&&!o,loading:o},Mn(l)))]})]})}var Xn=(0,b.X)({self:[Un.self,ue.p.backgroundPulse(),g.l0.height(128)]});function Nn(){return(0,r.tZ)(r.HY,{children:new Array(3).fill(0).map((function(e,n){return(0,r.tZ)(K.Tg,{css:Xn.self,elevated:!0},"itemDetailSkeleton".concat(n))}))})}function Mn(e){switch(e){case Pn.REMOVE:return{colorway:"negative",outlined:!0};case Pn.INSTALLED:return{colorway:"positive",outlined:!0};default:return{}}}var Fn=(0,b.X)({self:[g.l0.colWithGap(2)],title:[g.l0.color.foregroundDimmer]});function On(e){var n=e.title,t=e.value,i=e.showMore;return(0,r.BX)(y.G,{css:Fn.self,children:[(0,r.tZ)(Z.xv,{css:Fn.title,multiline:!1,children:n}),t?(0,r.tZ)(Z.xv,{maxLines:i?void 0:2,children:t}):null]})}function Wn(e){var n=e.isAlreadyInstalled,t=e.isIconLoading,i=e.htmlItem;return t?(0,r.tZ)(Je.Z,{}):n?i?(0,r.tZ)(ne.Z,{}):(0,r.tZ)(Y.Z,{}):(0,r.tZ)(An.Z,{})}var Hn,Vn=t(35981),zn=t(91398),jn=(0,zn.cn)({replId:"",packageManagers:{}});!function(e){e.Installing="Installing",e.Uninstalling="Uninstalling",e.Idle="Idle"}(Hn||(Hn={}));var qn="index.html";function $n(e,n){return n.some((function(n){var t,r;return(null===(t=n.name)||void 0===t?void 0:t.toLowerCase())===(null===(r=e.name)||void 0===r?void 0:r.toLowerCase())}))}function Yn(e){var n=(0,o.Z)((0,_n.KO)(jn),2),t=n[0],r=n[1],l=(0,d.Z)(),c=l.fs,u=l.packager;return(0,a.useEffect)((function(){if((null===e||void 0===e?void 0:e.id)&&!t.packageManagers[e.id]){var n="html"===e.id?function(e){var n=(0,Vn.u)(Hn.Idle),t=(0,Vn.u)(!1),r=(0,Vn.u)([]);function i(){return(i=(0,Ge.Z)((function(){return(0,_e.__generator)(this,(function(e){switch(e.label){case 0:return t.current=!0,[4,u()];case 1:return e.sent(),t.current=!1,[2]}}))}))).apply(this,arguments)}function o(){return o=(0,Ge.Z)((function(r){return(0,_e.__generator)(this,(function(i){return[2,new Promise(function(){var i=(0,Ge.Z)((function(i){var o;return(0,_e.__generator)(this,(function(a){switch(a.label){case 0:return t.current?[2]:(t.current=!0,n.current=Hn.Installing,[4,e.stat(qn)]);case 1:return a.sent().exists?(o=e.watchTextFile(qn,{onReady:function(a){var l=a.initialContent,c=a.writeChange,s='<script src="'.concat(r.sourceCodeURL,'"><\/script>\n'),d=l,f=d.indexOf("<script");-1===f&&(f=d.indexOf("</body>")),c({from:f,insert:s}),e.flush().then((0,Ge.Z)((function(){return(0,_e.__generator)(this,(function(e){switch(e.label){case 0:return[4,u()];case 1:return e.sent(),i(),[2]}}))}))).catch((function(){i()})).finally((function(){o(),n.current=Hn.Idle,t.current=!1}))},onError:function(){o(),i(),n.current=Hn.Idle,t.current=!1}}),[2]):[2,i()]}}))}));return function(e){return i.apply(this,arguments)}}())]}))})),o.apply(this,arguments)}function a(){return a=(0,Ge.Z)((function(r){return(0,_e.__generator)(this,(function(i){return[2,new Promise(function(){var i=(0,Ge.Z)((function(i){var o;return(0,_e.__generator)(this,(function(a){switch(a.label){case 0:return t.current?[2]:(t.current=!0,n.current=Hn.Uninstalling,[4,e.stat(qn)]);case 1:return a.sent().exists?(o=e.watchTextFile(qn,{onReady:function(a){var l=a.initialContent,c=a.writeChange,s=l,d=0,f=!0,p=!1,h=void 0;try{for(var v,m=s.split("\n")[Symbol.iterator]();!(f=(v=m.next()).done);f=!0){var g,y=v.value;if(g=y.match(/^\s*<script src="https:\/\/cdnjs.cloudflare.com\/ajax\/libs\/(.+)\/(.+)\/(.+).js"><\/script>$/)){var Z=g[1];r.name===Z&&c({from:d,to:d+y.length+1,insert:""})}d+=y.length+1}}catch(b){p=!0,h=b}finally{try{f||null==m.return||m.return()}finally{if(p)throw h}}e.flush().then((0,Ge.Z)((function(){return(0,_e.__generator)(this,(function(e){switch(e.label){case 0:return[4,u()];case 1:return e.sent(),i(),[2]}}))}))).catch((function(){i()})).finally((function(){o(),n.current=Hn.Idle,t.current=!1}))},onError:function(){o(),i(),n.current=Hn.Idle,t.current=!1}}),[2]):[2,i()]}}))}));return function(e){return i.apply(this,arguments)}}())]}))})),a.apply(this,arguments)}function l(){return(l=(0,Ge.Z)((function(e){return(0,_e.__generator)(this,(function(n){switch(n.label){case 0:return[4,fetch("/data/cdnjs/search/".concat(encodeURIComponent(e)),{credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json"}})];case 1:return[4,n.sent().json()];case 2:return[2,n.sent().map((function(e){return{name:e.name,version:e.version,description:e.description,homepageURL:e.link,sourceCodeURL:e.include}}))]}}))}))).apply(this,arguments)}function c(){return(c=(0,Ge.Z)((function(e){var n,t;return(0,_e.__generator)(this,(function(r){switch(r.label){case 0:return[4,fetch("/data/cdnjs/info/".concat(encodeURIComponent(e)),{credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json"}})];case 1:n=r.sent(),r.label=2;case 2:return r.trys.push([2,4,,5]),[4,n.json()];case 3:return(t=r.sent())?[2,{name:t.name,version:t.version,description:t.description,homepageURL:t.link,sourceCodeURL:t.include}]:[3,5];case 4:return r.sent(),[2,void 0];case 5:return[2]}}))}))).apply(this,arguments)}function u(){return s.apply(this,arguments)}function s(){return(s=(0,Ge.Z)((function(){var e;return(0,_e.__generator)(this,(function(n){switch(n.label){case 0:return[4,d()];case 1:return(e=n.sent()).error?r.current=[]:e.packages&&(r.current=e.packages),[2]}}))}))).apply(this,arguments)}function d(){return f.apply(this,arguments)}function f(){return f=(0,Ge.Z)((function(){return(0,_e.__generator)(this,(function(n){return[2,new Promise(function(){var n=(0,Ge.Z)((function(n){var t,r;return(0,_e.__generator)(this,(function(i){switch(i.label){case 0:return[4,e.stat(qn)];case 1:return i.sent().exists?(t=[],r=e.watchTextFile(qn,{onReady:function(e){var i=e.initialContent,o=!0,a=!1,l=void 0;try{for(var c,u=i.split("\n")[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var s;if(s=c.value.match(/^\s*<script src="https:\/\/cdnjs\.cloudflare\.com\/ajax\/libs\/(.+)\/(.+)\/(.+).js"><\/script>$/)){var d=s[1],f=s[2];t.push({name:d,version:f})}}}catch(p){a=!0,l=p}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}r(),n({packages:t,error:null})},onError:function(e){r(),n({packages:null,error:e.message})}}),[2]):(n({packages:[],error:null}),[2])}}))}));return function(e){return n.apply(this,arguments)}}())]}))})),f.apply(this,arguments)}return{initialize:function(){return i.apply(this,arguments)},install:function(e){return o.apply(this,arguments)},uninstall:function(e){return a.apply(this,arguments)},search:function(e){return l.apply(this,arguments)},installedPackages:r,isInstalled:function(e){return r.current.some((function(n){var t,r;return(null===(t=n.name)||void 0===t?void 0:t.toLowerCase())===(null===(r=e.name)||void 0===r?void 0:r.toLowerCase())}))},fetchPackageInfo:function(e){return c.apply(this,arguments)},isRunning:t,status:n}}(c):function(e,n){var t=(0,Vn.u)(Hn.Idle),r=(0,Vn.u)(!1),i=(0,Vn.u)([]);function o(){return(o=(0,Ge.Z)((function(){var t;return(0,_e.__generator)(this,(function(o){switch(o.label){case 0:return r.current=!0,[4,e.listSpecfile(n)];case 1:return(t=o.sent()).error?i.current=[]:t.packages&&(i.current=t.packages),r.current=!1,[2]}}))}))).apply(this,arguments)}function a(){return(a=(0,Ge.Z)((function(t){return(0,_e.__generator)(this,(function(r){return[2,e.searchPackages(t,n)]}))}))).apply(this,arguments)}function l(){return l=(0,Ge.Z)((function(o){var a,l,c;return(0,_e.__generator)(this,(function(u){switch(u.label){case 0:if(r.current)return[2];if((0,Le.j)(Le.U3.PACKAGE_MANAGER_USED,{action:"installed",packageId:o.name}),!o.name)throw new Error("Package has no name");return $n(o,i.current)?[2]:(r.current=!0,t.current=Hn.Installing,[4,e.addPackages([o],n)]);case 1:return u.sent(),[4,e.listSpecfile(n)];case 2:return a=u.sent(),l=a.packages,c=a.error,t.current=Hn.Idle,l&&(i.current=l),c&&(i.current=[]),r.current=!1,[2]}}))})),l.apply(this,arguments)}function c(){return c=(0,Ge.Z)((function(o){var a,l,c;return(0,_e.__generator)(this,(function(u){switch(u.label){case 0:if(r.current)return[2];if(!o.name)throw new Error("Package has no name");return $n(o,i.current)?((0,Le.j)(Le.U3.PACKAGE_MANAGER_USED,{action:"removed",packageId:o.name}),r.current=!0,t.current=Hn.Uninstalling,[4,e.removePackages([o.name],n)]):[2];case 1:return u.sent(),[4,e.listSpecfile(n)];case 2:return a=u.sent(),l=a.packages,c=a.error,t.current=Hn.Idle,l&&(i.current=l),c&&(i.current=[]),r.current=!1,[2]}}))})),c.apply(this,arguments)}function u(){return(u=(0,Ge.Z)((function(t){return(0,_e.__generator)(this,(function(r){switch(r.label){case 0:return[4,e.fetchPackageInfo(t,n)];case 1:return[2,r.sent()]}}))}))).apply(this,arguments)}return{initialize:function(){return o.apply(this,arguments)},install:function(e){return l.apply(this,arguments)},uninstall:function(e){return c.apply(this,arguments)},search:function(e){return a.apply(this,arguments)},installedPackages:i,isInstalled:function(e){return $n(e,i.current)},fetchPackageInfo:function(e){return u.apply(this,arguments)},isRunning:r,status:t}}(u,e.id);r({replId:t.replId,packageManagers:(0,De.Z)((0,M.Z)({},t.packageManagers),(0,i.Z)({},e.id,n))})}}),[c,t,null===e||void 0===e?void 0:e.id,u,r]),e&&t.packageManagers[e.id]||null}var Kn=(0,b.X)({self:[g.l0.color.foregroundDefault,g.l0.colWithGap(16)],installedHeader:[g.l0.fontSize(g.TV.fontSizeSubheadDefault)],searchUIOuter:[g.l0.flex.row,g.l0.align.center],searchUIInner:[g.l0.flex.grow(1),g.l0.pr(8)],searchResult:[g.l0.flex.column,{gap:g.TV.space8,listStyle:"none",webkitOverflowScrolling:"touch"}],packagerSection:[g.l0.flex.row,g.l0.align.center],packagerSectionExpandHandle:[g.l0.pr(8),{cursor:"pointer",userSelect:"none"}]}),Qn=t(43312),Jn={fadeIn:{animation:"".concat((0,Qn.F4)("from{opacity:0}to{opacity:1}")," 100ms forwards ease-in-out alternate")}};function et(e){var n=e.loading,t=e.children;return(0,r.tZ)(r.HY,{children:(0,r.tZ)("ul",{css:[Kn.searchResult,Jn.fadeIn],children:n?(0,r.tZ)(Nn,{}):t},n?"packagerLoading":"packagerLoaded")})}var nt=t(80336),tt=(0,b.X)({self:[g.l0.p(8),g.l0.borderRadius(8),g.l0.colWithGap(16)],header:[g.l0.flex.row,g.l0.align.center,g.l0.justify.spaceBetween],headerTitle:[g.l0.rowWithGap(4),g.l0.align.center]});function rt(e){var n=e.title,t=e.children,i=e.onClose,o=void 0===i?function(){}:i,l=(0,a.useState)(!0),c=l[0],u=l[1];return(0,r.BX)(K.Tg,{css:tt.self,elevated:!0,children:[(0,r.BX)(y.G,{css:tt.header,children:[(0,r.BX)(y.G,{css:tt.headerTitle,children:[(0,r.tZ)(Z.h4,{variant:"subheadDefault",level:2,children:n}),(0,r.tZ)(se.h,{alt:c?"Minimize tip information":"Expand tip information",tooltipHidden:!0,onClick:function(){return u((function(e){return!e}))},children:(0,r.tZ)(Bn.Z,{rotate:c?90:0})})]}),(0,r.tZ)(se.h,{alt:"Dismiss tip",tooltipHidden:!0,onClick:o,children:(0,r.tZ)(nt.Z,{})})]}),c?(0,r.tZ)(y.G,{children:t}):null]})}var it=t(33064),ot=(0,b.X)({header:[g.l0.fontSize(g.TV.fontSizeSubheadDefault),g.l0.flex.row,g.l0.align.center,g.l0.justify.spaceBetween,{textTransform:"capitalize"}],headerLeft:[g.l0.rowWithGap(8),g.l0.align.center],headerRight:[g.l0.rowWithGap(8)],loading:[g.l0.height(22),g.l0.width("100%"),g.l0.borderRadius(4),ue.p.backgroundPulse()],container:[Jn.fadeIn,g.l0.flex.growAndShrink(1)]});function at(e){var n=e.packagerTitle,t=e.error,i=e.loading,o=e.packagesCount,a=e.displayingInstalledPackages,l=e.affectedFile,c=e.openFile,u=e.status,s=(0,pn.Z)((function(){return a?0===o?"No packages installed.":"Installed ".concat(o," packages"):t?"We couldn't search for your packages. Try again.":0===o?"No packages found":o+" packages found"}),[t,o,a]);return(0,r.tZ)(y.G,{css:ot.container,children:i?(0,r.tZ)(y.G,{css:ot.loading}):(0,r.BX)(r.HY,{children:[(0,r.BX)(y.G,{css:ot.header,children:[(0,r.BX)(y.G,{css:ot.headerLeft,children:[(0,r.tZ)(Z.h4,{variant:"subheadDefault",level:2,children:n}),u===Hn.Idle?null:(0,r.tZ)(y.G,{children:(0,r.tZ)(Je.Z,{})})]}),(0,r.BX)(y.G,{css:ot.headerRight,children:[(0,r.tZ)(Z.h4,{level:3,children:s}),o>0&&a&&l?(0,r.tZ)(se.h,{alt:"Open "+l,tooltipPlacement:"bottom-start",onClick:function(){return c(l)},children:(0,r.tZ)(it.Z,{})}):null]})]}),0===o?(0,r.BX)(Z.xv,{css:[g.l0.pt(4)],children:["You don\u2019t have any packages installed. Try searching for a package to install, or"," ",(0,r.tZ)("a",{href:"https://docs.replit.com/programming-ide/installing-packages",target:"_blank",rel:"noreferrer",children:"learn more about packages here"}),"."]}):null]})},i?"packagerTitleLoading":"packagerTitleLoaded")}var lt=t(60471),ct={nodejs:["package.json","package-lock.json","yarn.lock","node_modules"],python:["poetry.lock","pyproject.toml","requirements.txt",".venv/",".local"],ruby:["Gemfile","Gemfile.lock"],java:["pom.xml","target"]};var ut=y.K.li;function st(e){var n=function(){var e=(0,Ue.Z)(),n=(0,lt.T)(),t=(0,a.useMemo)((function(){var t,r=(null===n||void 0===n?void 0:n.packagers)||[],i=(null===r||void 0===r?void 0:r.map((function(e){var n;return(0,De.Z)((0,M.Z)({},e),{title:e.language,packagerFiles:(null===(n=e.packagerFiles)||void 0===n?void 0:n.length)?e.packagerFiles:null!==(t=ct[e.language])&&void 0!==t?t:[]})})))||[];return"html"!==(null===e||void 0===e?void 0:e.language)&&"html_beta"!==(null===e||void 0===e?void 0:e.language)||i.push({id:"html",title:"html",name:"HTML Packager",language:"html",packageSearch:!0,guessImports:!1,packagerFiles:[]}),i}),[n,e]);return t}(),t=(0,a.useState)(null),i=t[0],l=t[1],c=(0,d.Z)().packager,u=(0,En.Z)(),s=(0,o.Z)((0,_n.KO)(jn),2),f=s[0],p=s[1];(0,a.useEffect)((function(){u!==f.replId&&p({replId:u,packageManagers:{}})}),[u,f.replId]),(0,a.useEffect)((function(){!function(e,n){var t=e.map((function(e){return e.id})),r=n.getPackagerIds(),i=!0,o=!1,a=void 0;try{for(var l,c=r[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value;u&&-1===t.indexOf(u)&&n.clearPackager(u)}}catch(s){o=!0,a=s}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}}(n,c)}),[n,c]),(0,a.useEffect)((function(){(null===i&&n.length>0||i&&!n.find((function(e){return e.id===i.id})))&&l(n[0])}),[n,i]);var h=(0,a.useState)(""),v=h[0],m=h[1],g=function(e){var n=e.query,t=e.packagerType,r=e.config,i=(0,a.useState)([]),o=i[0],l=i[1],c=(0,a.useState)(),u=c[0],s=c[1],d=(0,a.useState)(!1),f=d[0],p=d[1],h=Yn(r),v=(0,a.useState)(null),m=v[0],g=v[1],y=(0,le.Z)(n,400);return(0,a.useEffect)((function(){if(s(null),""===y)return p(!1),void l([]);p(!0),(0,Le.j)(Le.U3.PACKAGE_MANAGER_USED,{action:"searched",query:y,packagerType:t});var e=!1;return h?(h.search(y).then((function(n){e||(l(n.slice(0,50)),g(h))})).catch((function(n){je.c_.captureException(n),e||s(n)})).finally((function(){e||p(!1)})),function(){e=!0}):void 0}),[h,y,t]),{searchResults:o,isLoading:f,error:u,searchResultsPackageManager:m}}({query:v,packagerType:"upm",config:i}),Z=g.searchResults,b=g.isLoading,w=g.searchResultsPackageManager,x=""===v,k=(0,Dn.Z)("packager","show_packager_about_tooltip"),C=k.shouldDisplay,S=k.register,T=k.dismiss;(0,a.useEffect)((function(){S()}),[S]);var E=(0,Dn.Z)("packager","show_packager_import_tooltip"),R=E.shouldDisplay,I=E.register,G=E.dismiss;return(0,a.useEffect)((function(){I()}),[I]),(0,r.BX)(y.G,{css:Kn.self,children:[(0,r.BX)(y.G,{css:Kn.searchUIOuter,children:[(0,r.tZ)(y.G,{css:Kn.searchUIInner,children:(0,r.tZ)(Gn.E,{value:v,placeholder:i?"Search ".concat(i.language," packages"):void 0,onClear:function(){return m("")},onChange:function(e){return m(e.target.value)},loading:b})}),n.length>1&&(0,r.tZ)(sn.P,{items:n,selectedItem:i,onChange:function(e){l(e)},"aria-label":"Select packager configuration"})]}),x?null===n||void 0===n?void 0:n.map((function(n){return(0,r.tZ)(ft,{config:n,openFile:e.openFile,displayingInstalledPackages:!0},n.id)})):i&&(0,r.tZ)(dt,{searchResults:Z,packageManager:w,isLoading:b,config:i,openFile:e.openFile}),C&&x?(0,r.BX)(rt,{title:"What are packages?",onClose:function(){return T()},children:["Packages are collections of code that can extend the functionality of your programs. For example, you could add a package to make adding image carousels easier on websites, or a package to manage currency comparisons."," ",(0,r.tZ)("a",{href:"https://docs.replit.com/programming-ide/installing-packages",target:"_blank",rel:"noreferrer",children:"Learn more about packages"})]}):null,x&&R?(0,r.tZ)(rt,{title:"Tip\u2014Auto Import",onClose:function(){return G()},children:"If you know which packages you want to use, you can just import and use them in your files as if they were already installed, and they will be installed automatically the next time you run the Repl."}):null]})}function dt(e){var n,t=e.searchResults,i=e.packageManager,o=e.isLoading,a=e.config,l=e.openFile,c=null!==(n=(0,L.Z)(null===i||void 0===i?void 0:i.status))&&void 0!==n?n:Hn.Idle;return(0,r.BX)(r.HY,{children:[(0,r.tZ)(at,{loading:o,packagesCount:t.length,displayingInstalledPackages:!1,affectedFile:a.packagerFiles&&a.packagerFiles[0],openFile:l,status:c}),(0,r.tZ)(y.G,{children:(0,r.tZ)(et,{loading:o,children:t.map((function(e,n){return(0,r.tZ)(ut,{children:(0,r.tZ)(pt,{packageManager:i,pkg:e})},e.name||"Unknown"+n)}))})})]})}function ft(e){var n,t=e.config,i=e.displayingInstalledPackages,o=e.openFile,l=Yn(t),c=(0,L.Z)(null===l||void 0===l?void 0:l.installedPackages),u=(null===c||void 0===c?void 0:c.length)||0,s=(0,a.useState)(!1),d=s[0],f=s[1],p=null!==(n=(0,L.Z)(null===l||void 0===l?void 0:l.status))&&void 0!==n?n:Hn.Idle;return(0,a.useEffect)((function(){l&&l.initialize()}),[l]),l&&null!==c?(0,r.BX)(r.HY,{children:[(0,r.BX)(y.G,{css:Kn.packagerSection,children:[u>0?(0,r.tZ)(y.G,{onClick:function(){return f((function(e){return!e}))},css:Kn.packagerSectionExpandHandle,children:d?(0,r.tZ)(In.Z,{}):(0,r.tZ)(Rn.Z,{})}):null,(0,r.tZ)(at,{packagerTitle:"".concat(t.language," Packages"),loading:!1,packagesCount:c.length,displayingInstalledPackages:Boolean(i),affectedFile:t.packagerFiles&&t.packagerFiles[0],openFile:o,status:p})]}),d?null:(0,r.tZ)(y.G,{children:(0,r.tZ)(et,{loading:!1,children:c.map((function(e,n){return(0,r.tZ)(ut,{children:(0,r.tZ)(pt,{packageManager:l,pkg:e})},e.name||"Unknown"+n)}))})})]}):null}function pt(e){var n=e.packageManager,t=(0,F.Z)(e,["packageManager"]),i=function(e){var n=e.packageManager,t=e.pkg,r=(0,o.Z)(a.useState(!1),2),i=r[0],l=r[1],c=(0,o.Z)(a.useState(null),2),u=c[0],s=c[1];return a.useEffect((function(){if(n&&t.name){var e=!1;return n.fetchPackageInfo(t.name).then((function(n){e||(s(n||null),l(!1))})),function(){e=!0}}s(null)}),[n,t.name]),{isLoading:i,packageInfo:u}}({packageManager:n,pkg:t.pkg}).packageInfo,l=(0,L.Z)(null===n||void 0===n?void 0:n.isRunning)||!1,c=(0,a.useState)(!1),u=c[0],s=c[1],d=(0,ie.Z)(),f=i||t.pkg,p="dependencies"in f&&f.dependencies&&f.dependencies.length>0?f.dependencies.map((function(e){return e.name})):null,h=(0,cn.Z)().showNotice,v=(null===n||void 0===n?void 0:n.isInstalled(f))||!1;return(0,r.tZ)(Ln,{onActionClick:function(){n&&!l&&(s(!0),v?n.uninstall(f).then((function(){d.current&&s(!1)})):n.install(f).then((function(){d.current&&(h("Installed ".concat(f.name)),s(!1))})))},isAlreadyInstalled:v,isPackagerRunning:l,isIconLoading:u,statusMessage:v?Pn.REMOVE:Pn.INSTALL,itemName:f.name,itemDescription:f.description,itemVersion:f.version,itemHomepageURL:f.homepageURL,itemLicense:f.license,itemAuthor:f.author,itemDependencies:p})}var ht,vt,mt=t(35273),gt=t(2757),yt=t(55749),Zt=t(82325);(0,zn.cn)({replId:"",packageManagers:{}});function bt(){return(0,a.useState)((function(){return(0,zn.MT)()}))[0]}!function(e){e.Initializing="Initializing",e.Installing="Installing",e.Uninstalling="Uninstalling",e.Idle="Idle"}(ht||(ht={})),function(e){e.Install="Install",e.Uninstall="Uninstall"}(vt||(vt={}));var wt=(0,a.createContext)(null);function xt(){var e=(0,a.useContext)(wt);if(!e)throw new Error("Expected store in context");return e}var kt=function(e){return(0,_n.b9)(e,{store:xt()})};function Ct(e){return(0,Zt.lV)((0,a.useCallback)((function(n){return n(e)}),[e]),{store:xt()})}function St(e){return(0,_n.Dv)(e,{store:xt()})}var Tt=(0,zn.cn)(null);function Et(){return St(Tt)}var Rt=(0,zn.cn)(null);var It=(0,zn.cn)(ht.Idle);var Gt=(0,zn.cn)(null);var Dt=(0,zn.cn)([]);var _t=(0,zn.cn)([]);function Pt(){return St(_t)}var Bt=(0,zn.cn)(null,(function(e,n,t){if(!t.name)throw new Error("Package does not have a name.");n(Dt,(function(e){return(0,O.ZP)(e,(function(e){if(!e.find((function(e){return e.pkgs.find((function(e){return e.name===t.name}))}))){var n=e.find((function(e){return e.kind===vt.Install}));n?n.pkgs.push(t):e.push({kind:vt.Install,pkgs:[t]})}}))}))}));var At=(0,zn.cn)(null,(function(e,n,t){if(!t.name)throw new Error("Package does not have a name.");n(Dt,(function(e){return(0,O.ZP)(e,(function(e){if(!e.find((function(e){return e.pkgs.find((function(e){return e.name===t.name}))}))){var n=e.find((function(e){return e.kind===vt.Uninstall}));n?n.pkgs.push(t):e.push({kind:vt.Uninstall,pkgs:[t]})}}))}))}));(0,zn.cn)(null);var Ut=(0,zn.cn)(null,(function(e,n,t){var r=(0,yt.Z)(e(Dt)),i=r[0],o=r.slice(1);t===i&&(n(Dt,o),n(Gt,t))}));function Lt(e){var n=Et(),t=St(Rt),r=(0,d.Z)(),i=(0,o.Z)(a.useState(null),2),l=i[0],c=i[1];return a.useEffect((function(){if((null===n||void 0===n?void 0:n.id)&&t&&e.name){var i=!1,o=function(){var o=(0,Ge.Z)((function(){var o;return(0,_e.__generator)(this,(function(a){switch(a.label){case 0:return[4,t.getPackageInfo({id:n.id,name:e.name,packager:r.packager})];case 1:return o=a.sent(),i?[2]:(c(null!==o&&void 0!==o?o:null),[2])}}))}));return function(){return o.apply(this,arguments)}}();return o(),function(){i=!0}}}),[null===n||void 0===n?void 0:n.id,e.name,t]),l}var Xt=t(24592);function Nt(e){var n=e.isInstalled,t=e.isInQueue;return e.isCurrentAction?(0,r.tZ)(Je.Z,{}):t?(0,r.tZ)(Xt.Z,{}):n?(0,r.tZ)(Y.Z,{}):(0,r.tZ)(An.Z,{})}var Mt=(0,b.X)({metadata:[g.l0.colWithGap(2)],metadataSkeleton:[g.l0.colWithGap(8),g.l0.pt(4)],metadataSkeletonVersion:[ue.p.foregroundPulse(),g.l0.height(16),g.l0.maxWidth(64),g.l0.borderRadius(4)],metadataSkeletonDescription:[ue.p.foregroundPulse(),g.l0.height(16),g.l0.borderRadius(4),g.l0.maxWidth(425)],root:[g.l0.borderRadius(8),g.l0.p(8)],header:[g.l0.flex.row,g.l0.justify.spaceBetween],headerTitle:[],headerButton:[],content:[g.l0.colWithGap(4)],actions:[g.l0.colWithGap(4),g.l0.flex.grow(1),g.l0.justify.end],actionButton:[g.l0.mt(8)]});function Ft(e){var n=e.title,t=e.content,i=e.isExpanded;return(0,r.BX)(y.G,{css:Mt.metadata,children:[(0,r.tZ)(Z.xv,{color:"dimmer",children:n}),t?(0,r.tZ)(Z.xv,{maxLines:i?void 0:1,children:t}):null]})}function Ot(){return(0,r.BX)(y.G,{css:Mt.metadataSkeleton,children:[(0,r.tZ)(y.G,{css:Mt.metadataSkeletonVersion}),(0,r.tZ)(y.G,{css:Mt.metadataSkeletonDescription})]})}function Wt(e){var n,t,i=e.pkg,o=e.isMetadataLoading,l=void 0!==o&&o,c=St(Gt),u=Pt(),s=St(Dt),d=(0,a.useMemo)((function(){return Boolean(null!==c&&c.pkgs.find((function(e){return e.name===i.name})))}),[c]),f=(0,a.useMemo)((function(){return Boolean(s.find((function(e){return e.pkgs.find((function(e){return e.name===i.name}))})))}),[s]),p=(0,a.useMemo)((function(){return Boolean(u.find((function(e){return e.name===i.name})))}),[u]),h=Boolean(i.homepageURL||i.license||i.author||i.dependencies&&i.dependencies.length>0),v=(0,a.useState)(!1),m=v[0],g=v[1],b=kt(Bt),w=kt(At);return(0,r.BX)(K.Tg,{css:Mt.root,elevated:!0,children:[(0,r.BX)(y.G,{css:Mt.header,children:[(0,r.tZ)(Z.h4,{css:Mt.headerTitle,level:2,variant:"subheadDefault",multiline:!1,children:i.name}),h?(0,r.tZ)(se.h,{css:Mt.headerButton,alt:"Show more info",tooltipHidden:!0,onClick:function(){return g((function(e){return!e}))},children:(0,r.tZ)(Bn.Z,{rotate:m?90:0})}):null]}),(0,r.tZ)(y.G,{css:Mt.content,children:l?(0,r.tZ)(Ot,{}):(0,r.BX)(r.HY,{children:[(0,r.tZ)(Ft,{title:"Version ".concat(null!==(n=i.version)&&void 0!==n?n:"unknown"),content:null!==(t=i.description)&&void 0!==t?t:"This package has no description.",isExpanded:m}),i.homepageURL&&m?(0,r.tZ)(Ft,{title:"Website",content:(0,r.tZ)("a",{href:i.homepageURL,rel:"noreferrer noopener",target:"_blank",children:i.homepageURL}),isExpanded:m}):null,i.license&&m?(0,r.tZ)(Ft,{title:"License",content:i.license,isExpanded:m}):null,i.author&&m?(0,r.tZ)(Ft,{title:"Author",content:i.author,isExpanded:m}):null]})}),(0,r.tZ)(y.G,{css:Mt.actions,children:(0,r.tZ)(Oe.zx,{css:Mt.actionButton,text:p?"Remove":"Install",onClick:function(){p?w(i):b(i)},disabled:d||f,colorway:p?"red":void 0,outlined:p,iconLeft:(0,r.tZ)(Nt,{isInstalled:p,isInQueue:f,isCurrentAction:d})})})]})}function Ht(e){var n,t=e.pkg,i=Lt(t),o=i?(0,De.Z)((0,M.Z)({},i),{version:null!==(n=t.spec)&&void 0!==n?n:i.version}):t;return(0,r.tZ)(Wt,{pkg:o,isMetadataLoading:null===i})}var Vt=(0,b.X)({root:[{containerType:"inline-size"}],header:[g.l0.flex.row,g.l0.justify.spaceBetween,g.l0.py(4)],headerLeft:[g.l0.rowWithGap(4)],headerRight:[g.l0.rowWithGap(4)],headerTitle:[{textTransform:"capitalize"}],packages:[g.l0.pt(8),g.l0.colWithGap(8),{"@container (min-width: 750px)":[g.l0.colWithGap(0),g.l0.align.start,{display:"grid",gridTemplate:"auto / 1fr 1fr",gap:g.TV.space8}]}]});function zt(e){var n=e.openFile,t=Et(),i=Pt(),o=(0,a.useState)(!0),l=o[0],c=o[1];return null===t?null:(0,r.BX)(y.G,{css:Vt.root,children:[(0,r.BX)(y.G,{css:Vt.header,children:[(0,r.BX)(y.G,{css:Vt.headerLeft,children:[i.length>0?(0,r.tZ)(se.h,{alt:"Show packages",tooltipHidden:!0,onClick:function(){return c((function(e){return!e}))},children:(0,r.tZ)(Bn.Z,{rotate:l?90:0})}):null,(0,r.BX)(Z.h4,{css:Vt.headerTitle,variant:"subheadDefault",level:2,children:[t.language," Packages"]})]}),(0,r.tZ)(y.G,{css:Vt.headerRight,children:0===i.length?(0,r.tZ)(Z.h4,{level:3,children:"No Packages Installed."}):(0,r.BX)(r.HY,{children:[(0,r.BX)(Z.h4,{level:3,children:["Installed ",i.length," ",(0,gt.Z)("package",i.length)]}),t.packagerFiles.length>0?(0,r.tZ)(se.h,{alt:"Open ".concat(t.packagerFiles[0]),onClick:function(){t&&n(t.packagerFiles[0])},children:(0,r.tZ)(it.Z,{})}):null]})})]}),l?(0,r.tZ)(y.G,{css:Vt.packages,children:0===i.length?(0,r.BX)(Z.xv,{children:["You don't have any packages installed. Try searching for a package to install, or"," ",(0,r.tZ)("a",{href:"https://docs.replit.com/programming-ide/installing-packages",target:"_blank",rel:"noreferrer",children:"learn more about packages here"}),"."]}):i.map((function(e){return(0,r.tZ)(Ht,{pkg:e},e.name)}))}):null]})}var jt=t(5795);function qt(){var e=(0,d.Z)(),n=Ct(Tt),t=Ct(Rt);return(0,a.useCallback)((function(r){var i=n(),o=t();if(null!==o)return(null===i||void 0===i?void 0:i.id)?o.search({id:i.id,query:r,packager:e.packager}):[]}),[])}function $t(e){var n=e.onResults,t=e.onLoading,i=e.className,o=Et(),l=(0,a.useState)(""),c=l[0],u=l[1],s=(0,a.useRef)(0),d=function(){s.current++,null===n||void 0===n||n(null),null===t||void 0===t||t(!1)},f=qt();return(0,jt.Z)((function(){if(""!==c.trim()){var e=++s.current,r=function(){var r=(0,Ge.Z)((function(){var r;return(0,_e.__generator)(this,(function(i){switch(i.label){case 0:return null===t||void 0===t||t(!0),[4,f(c)];case 1:return r=i.sent(),e!==s.current?[2]:(null===n||void 0===n||n(null!==r&&void 0!==r?r:[]),null===t||void 0===t||t(!1),[2])}}))}));return function(){return r.apply(this,arguments)}}();r()}}),[c],500),(0,r.tZ)(y.G,{className:i,children:(0,r.tZ)(Gn.E,{value:c,onChange:function(e){""===e.target.value.trim()&&d(),u(e.target.value)},onClear:function(){u(""),d()},placeholder:o?"Search ".concat(o.language," packages"):void 0})})}var Yt=(0,b.X)({skeleton:[g.l0.borderRadius(8),g.l0.p(8),ue.p.backgroundPulse(),g.l0.height(128)]});function Kt(){return(0,r.tZ)(r.HY,{children:Array.from({length:3},(function(e,n){return(0,r.tZ)(K.Tg,{css:Yt.skeleton,elevated:!0},"SearchLoading-".concat(n))}))})}function Qt(e){var n=e.pkg;return(0,r.tZ)(Wt,{pkg:n})}var Jt=(0,b.X)({root:[g.l0.colWithGap(8)],results:[g.l0.colWithGap(8)],empty:[g.l0.flex.row,g.l0.justify.center]});function er(e){var n=e.results;return(0,r.tZ)(y.G,{css:Jt.root,children:(0,r.tZ)(y.G,{css:Jt.results,children:0===n.length?(0,r.tZ)(Z.xv,{color:"dimmer",css:Jt.empty,children:"No Packages Found"}):n.map((function(e){return(0,r.tZ)(Qt,{pkg:e},e.name)}))})})}var nr=(0,b.X)({root:[g.l0.p(8),g.l0.borderRadius(8),g.l0.colWithGap(16)],header:[g.l0.flex.row,g.l0.align.center,g.l0.justify.spaceBetween],headerLeft:[g.l0.rowWithGap(4),g.l0.align.center],headerRight:[],content:[]});function tr(e){var n=e.title,t=e.onClose,i=e.children,o=(0,a.useState)(!0),l=o[0],c=o[1];return(0,r.BX)(K.Tg,{elevated:!0,css:nr.root,children:[(0,r.BX)(y.G,{css:nr.header,children:[(0,r.BX)(y.G,{css:nr.headerLeft,children:[(0,r.tZ)(Z.h4,{level:2,variant:"subheadDefault",children:n}),(0,r.tZ)(se.h,{alt:l?"Minimize tip information":"Expand tip information",tooltipHidden:!0,onClick:function(){return c((function(e){return!e}))},children:(0,r.tZ)(Bn.Z,{rotate:l?90:0})})]}),(0,r.tZ)(y.G,{css:nr.headerRight,children:(0,r.tZ)(se.h,{alt:"Dismiss tip",tooltipHidden:!0,onClick:t,children:(0,r.tZ)(nt.Z,{})})})]}),l?(0,r.tZ)(y.G,{css:nr.content,children:i}):null]})}var rr=t(53870);var ir="index.html",or=/^\s*<script src="https:\/\/cdnjs\.cloudflare\.com\/ajax\/libs\/([^/]+)\/([^/]+)\/.+.js"><\/script>$/,ar={name:"html",getInstalledPackages:function(e){var n=e.fs;return(0,Ge.Z)((function(){return(0,_e.__generator)(this,(function(e){switch(e.label){case 0:return[4,n.stat(ir)];case 1:return e.sent().exists?[2,new Promise(function(){var e=(0,Ge.Z)((function(e){var t;return(0,_e.__generator)(this,(function(r){return t=n.watchTextFile(ir,{onReady:function(n){var r=n.initialContent,i=[],o=!0,a=!1,l=void 0;try{for(var c,u=r.split("\n")[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var s=c.value.match(or);s&&i.push({name:s[1],version:s[2]})}}catch(d){a=!0,l=d}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}t(),e(i)},onError:function(){t(),e([])}}),[2]}))}));return function(n){return e.apply(this,arguments)}}())]:[2,[]]}}))}))()},getPackageInfo:function(e){var n=e.name;return(0,Ge.Z)((function(){var e,t;return(0,_e.__generator)(this,(function(r){switch(r.label){case 0:return[4,fetch("/data/cdnjs/info/".concat(encodeURIComponent(n)),{credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json"}})];case 1:if(!(e=r.sent()).ok)return[2,void 0];r.label=2;case 2:return r.trys.push([2,4,,5]),[4,e.json()];case 3:return(t=r.sent())?[2,{name:t.name,version:t.version,description:t.description,homepageURL:t.link,sourceCodeURL:t.include}]:[3,5];case 4:return r.sent(),[2,void 0];case 5:return[2]}}))}))()},search:function(e){var n=e.query;return(0,Ge.Z)((function(){var e,t;return(0,_e.__generator)(this,(function(r){switch(r.label){case 0:return[4,fetch("/data/cdnjs/search/".concat(encodeURIComponent(n)),{credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json"}})];case 1:return(e=r.sent()).ok?[4,e.json()]:[2,[]];case 2:return t=r.sent(),[2,t.map((function(e){return{name:e.name,version:e.version,description:e.description,homepageURL:e.link,sourceCodeURL:e.include}}))]}}))}))()},install:function(e){var n=e.pkgs,t=e.fs;return(0,Ge.Z)((function(){var e,r,i,o,a,l,c;return(0,_e.__generator)(this,(function(u){switch(u.label){case 0:return[4,t.stat(ir)];case 1:if(!u.sent().exists)return[2];e=!0,r=!1,i=void 0,u.label=2;case 2:u.trys.push([2,7,8,9]),o=function(){var e;return(0,_e.__generator)(this,(function(n){switch(n.label){case 0:return e=l.value,[4,new Promise(function(){var n=(0,Ge.Z)((function(n){var r;return(0,_e.__generator)(this,(function(i){return r=t.watchTextFile(ir,{onReady:function(i){var o=i.initialContent,a=i.writeChange;return(0,Ge.Z)((function(){var i,l;return(0,_e.__generator)(this,(function(c){switch(c.label){case 0:i='<script src="'.concat(e.sourceCodeURL,'"><\/script>\n'),-1===(l=o.indexOf("<script"))&&(l=o.indexOf("</body>")),-1===l&&(l=o.length),a({from:l,insert:i}),c.label=1;case 1:return c.trys.push([1,3,4,5]),[4,t.flush()];case 2:return c.sent(),[3,5];case 3:return c.sent(),[3,5];case 4:return r(),n(),[7];case 5:return[2]}}))}))()},onError:function(){r(),n()}}),[2]}))}));return function(e){return n.apply(this,arguments)}}())];case 1:return n.sent(),[2]}}))},a=n[Symbol.iterator](),u.label=3;case 3:return(e=(l=a.next()).done)?[3,6]:[5,(0,_e.__values)(o())];case 4:u.sent(),u.label=5;case 5:return e=!0,[3,3];case 6:return[3,9];case 7:return c=u.sent(),r=!0,i=c,[3,9];case 8:try{e||null==a.return||a.return()}finally{if(r)throw i}return[7];case 9:return[2]}}))}))()},uninstall:function(e){var n=e.pkgs,t=e.fs;return(0,Ge.Z)((function(){var e,r,i,o,a,l,c;return(0,_e.__generator)(this,(function(u){switch(u.label){case 0:return[4,t.stat(ir)];case 1:if(!u.sent().exists)return[2];e=!0,r=!1,i=void 0,u.label=2;case 2:u.trys.push([2,7,8,9]),o=function(){var e;return(0,_e.__generator)(this,(function(n){switch(n.label){case 0:return e=l.value,[4,new Promise(function(){var n=(0,Ge.Z)((function(n){var r;return(0,_e.__generator)(this,(function(i){return r=t.watchTextFile(ir,{onReady:function(i){var o=i.initialContent,a=i.writeChange;return(0,Ge.Z)((function(){var i,l,u,s,d,f,p,h,v;return(0,_e.__generator)(this,(function(m){switch(m.label){case 0:i=0,l=!0,u=!1,s=void 0;try{for(d=o.split("\n")[Symbol.iterator]();!(l=(f=d.next()).done);l=!0)p=f.value,(h=p.match(or))&&(v=h[1],e.name===v&&a({from:i,to:i+p.length+1})),i+=p.length+1}catch(c){u=!0,s=c}finally{try{l||null==d.return||d.return()}finally{if(u)throw s}}m.label=1;case 1:return m.trys.push([1,3,4,5]),[4,t.flush()];case 2:return m.sent(),[3,5];case 3:return m.sent(),[3,5];case 4:return r(),n(),[7];case 5:return[2]}}))}))()},onError:function(){r(),n()}}),[2]}))}));return function(e){return n.apply(this,arguments)}}())];case 1:return n.sent(),[2]}}))},a=n[Symbol.iterator](),u.label=3;case 3:return(e=(l=a.next()).done)?[3,6]:[5,(0,_e.__values)(o())];case 4:u.sent(),u.label=5;case 5:return e=!0,[3,3];case 6:return[3,9];case 7:return c=u.sent(),r=!0,i=c,[3,9];case 8:try{e||null==a.return||a.return()}finally{if(r)throw i}return[7];case 9:return[2]}}))}))()}},lr=ar,cr={name:"upm",getInstalledPackages:function(e){var n=e.id,t=e.packager;return(0,Ge.Z)((function(){var e;return(0,_e.__generator)(this,(function(r){switch(r.label){case 0:return[4,t.listSpecfile(n)];case 1:return(e=r.sent()).error||null===e.packages?[2,[]]:[2,e.packages]}}))}))()},getPackageInfo:function(e){var n=e.id,t=e.name,r=e.packager;return(0,Ge.Z)((function(){return(0,_e.__generator)(this,(function(e){return[2,r.fetchPackageInfo(t,n)]}))}))()},search:function(e){var n=e.id,t=e.query,r=e.packager;return(0,Ge.Z)((function(){return(0,_e.__generator)(this,(function(e){return[2,r.searchPackages(t,n)]}))}))()},install:function(e){var n=e.id,t=e.pkgs,r=e.packager;return(0,Ge.Z)((function(){return(0,_e.__generator)(this,(function(e){switch(e.label){case 0:return[4,r.addPackages(t,n)];case 1:return e.sent(),[2]}}))}))()},uninstall:function(e){var n=e.id,t=e.pkgs,r=e.packager;return(0,Ge.Z)((function(){var e;return(0,_e.__generator)(this,(function(i){switch(i.label){case 0:return e=t.filter((function(e){return e.name})).map((function(e){return e.name})),[4,r.removePackages(e,n)];case 1:return i.sent(),[2]}}))}))()}},ur=cr;function sr(e){var n=e.children,t=e.config,i=(0,a.useState)(!1),o=i[0],l=i[1],c=(0,d.Z)(),u=kt(Tt),s=Ct(Rt),f=kt(Rt),p=St(Dt),h=St(Gt),v=kt(Gt),m=St(It),g=kt(It),y=kt(_t),Z=kt(Ut),b=(0,cn.Z)();return(0,a.useEffect)((function(){if(null===t||void 0===t?void 0:t.id)if(u(t),"html"===(null===t||void 0===t?void 0:t.id))f(lr);else f(ur)}),[t]),(0,a.useEffect)((function(){if(null===t||void 0===t?void 0:t.id){var e=s();if(null!==e&&!o){var n=!1,r=function(){var r=(0,Ge.Z)((function(){var r;return(0,_e.__generator)(this,(function(i){switch(i.label){case 0:return g(ht.Initializing),[4,e.getInstalledPackages({id:t.id,packager:c.packager,fs:c.fs})];case 1:return r=i.sent(),n?[2]:(y(r),g(ht.Idle),l(!0),[2])}}))}));return function(){return r.apply(this,arguments)}}();return r(),function(){n=!0}}}}),[null===t||void 0===t?void 0:t.id,o]),(0,a.useEffect)((function(){o&&m===ht.Idle&&null===h&&0!==p.length&&Z(p[0])}),[m,h,p]),(0,a.useEffect)((function(){if(null===t||void 0===t?void 0:t.id)if(null!==h){var e=s();if(null!==e){var n=!1,r=function(){var r=(0,Ge.Z)((function(){var r,i,o,a,l,u,s,d,f,p,m,Z,w,x,k,C,S;return(0,_e.__generator)(this,(function(T){switch(T.label){case 0:switch(h.kind){case vt.Install:return[3,1];case vt.Uninstall:return[3,6]}return[3,11];case 1:g(ht.Installing),r=!0,i=!1,o=void 0;try{for(a=h.pkgs[Symbol.iterator]();!(r=(l=a.next()).done);r=!0)u=l.value,(0,Le.j)(Le.U3.PACKAGE_MANAGER_USED,{action:"installed",packageId:u.name})}catch(E){i=!0,o=E}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}T.label=2;case 2:return T.trys.push([2,4,,5]),[4,e.install({id:t.id,pkgs:h.pkgs,packager:c.packager,fs:c.fs})];case 3:return T.sent(),1===h.pkgs.length?b.showNotice("Installed ".concat(null!==(s=h.pkgs[0].name)&&void 0!==s?s:"package")):b.showNotice("Installed ".concat(h.pkgs.length," packages")),[3,5];case 4:return T.sent(),1===h.pkgs.length?b.showError("Failed to install ".concat(null!==(d=h.pkgs[0].name)&&void 0!==d?d:"package")):b.showError("Failed to install ".concat(h.pkgs.length," packages")),[3,5];case 5:return[3,11];case 6:g(ht.Uninstalling),f=!0,p=!1,m=void 0;try{for(Z=h.pkgs[Symbol.iterator]();!(f=(w=Z.next()).done);f=!0)x=w.value,(0,Le.j)(Le.U3.PACKAGE_MANAGER_USED,{action:"removed",packageId:x.name})}catch(E){p=!0,m=E}finally{try{f||null==Z.return||Z.return()}finally{if(p)throw m}}T.label=7;case 7:return T.trys.push([7,9,,10]),[4,e.uninstall({id:t.id,pkgs:h.pkgs,packager:c.packager,fs:c.fs})];case 8:return T.sent(),1===h.pkgs.length?b.showNotice("Removed ".concat(null!==(k=h.pkgs[0].name)&&void 0!==k?k:"package")):b.showNotice("Removed ".concat(h.pkgs.length," packages")),[3,10];case 9:return T.sent(),1===h.pkgs.length?b.showError("Failed to remove ".concat(null!==(C=h.pkgs[0].name)&&void 0!==C?C:"package")):b.showError("Failed to remove ".concat(h.pkgs.length," packages")),[3,10];case 10:return[3,11];case 11:return n?[2]:[4,e.getInstalledPackages({id:null===t||void 0===t?void 0:t.id,packager:c.packager,fs:c.fs})];case 12:return S=T.sent(),n?[2]:(y(S),g(ht.Idle),v(null),[2])}}))}));return function(){return r.apply(this,arguments)}}();return r(),function(){n=!0}}}else g(ht.Idle)}),[null===t||void 0===t?void 0:t.id,h]),(0,a.useEffect)((function(){u(t)}),[]),(0,r.tZ)(r.HY,{children:n})}function dr(e){var n=e.children,t=e.config,i=bt();return(0,r.tZ)(wt.Provider,{value:i,children:t?(0,r.tZ)(sr,{config:t,children:n}):n})}var fr=(0,b.X)({root:[g.l0.pt(16),g.l0.p(8),{containerType:"inline-size"}],center:[g.l0.width("100%"),g.l0.maxWidth(600),{marginLeft:"auto",marginRight:"auto"},{"@container (min-width: 400px)":[g.l0.maxWidth("100%")]}],title:[],content:[g.l0.pt(8),{containerType:"inline-size"}],search:[g.l0.rowWithGap(8)],searchInput:[g.l0.flex.grow(1)],configSelect:[],packages:[g.l0.pt(16),g.l0.colWithGap(16)]});function pr(e){var n=e.openFile,t=(0,rr.I)(),i=(0,o.Z)(function(){var e=(0,rr.I)(),n=(0,a.useState)(null),t=n[0],r=n[1];return(0,a.useEffect)((function(){e.length>0&&(null==t||!e.find((function(e){return e&&e.id===t.id})))&&r(e[0])}),[t,e]),[t,r]}(),2),l=i[0],c=i[1],u=(0,a.useState)(null),s=u[0],d=u[1],f=(0,a.useState)(!1),p=f[0],h=f[1],v=(0,Dn.Z)("packager","show_packager_about_tooltip"),m=(0,Dn.Z)("packager","show_packager_import_tooltip");(0,a.useEffect)((function(){v.register()}),[v.register]),(0,a.useEffect)((function(){m.register()}),[m.register]);return(0,r.tZ)(y.G,{css:fr.root,children:(0,r.BX)(y.G,{css:fr.center,children:[(0,r.tZ)(Z.h4,{css:fr.title,level:2,variant:"subheadBig",children:"Packages"}),(0,r.tZ)(y.G,{css:fr.content,children:(0,r.BX)(dr,{config:l,children:[(0,r.BX)(y.G,{css:fr.search,children:[(0,r.tZ)($t,{css:fr.searchInput,onResults:d,onLoading:h}),t.length>1&&(0,r.tZ)(sn.P,{css:fr.configSelect,items:t,selectedItem:l,onChange:function(e){return c(e)},"aria-label":"Select packager configuration"})]}),(0,r.tZ)(y.G,{css:fr.packages,children:null!==s?(0,r.tZ)(er,{results:s}):p?(0,r.tZ)(Kt,{}):(0,r.BX)(r.HY,{children:[v.shouldDisplay?(0,r.BX)(tr,{title:"What are packages?",onClose:v.dismiss,children:["Packages are collections of code that can extend the functionality of your programs. For example, you could add a package to make adding image carousels easier on websites, or a package to manage currency comparisons."," ",(0,r.tZ)("a",{href:"https://docs.replit.com/programming-ide/installing-packages",target:"_blank",rel:"noreferrer",children:"Learn more about packages"})]}):null,m.shouldDisplay?(0,r.tZ)(tr,{title:"Tip\u2014Auto Import",onClose:m.dismiss,children:"If you know which packages you want to use, you can just import and use them in your files as if they were already installed, and they will be installed automatically the next time you run the Repl."}):null,t.map((function(e){return e.id===(null===l||void 0===l?void 0:l.id)?(0,r.tZ)(zt,{openFile:n},e.id):(0,r.tZ)(dr,{config:e,children:(0,r.tZ)(zt,{openFile:n})},e.id)}))]})})]})})]})})}var hr=(0,b.X)({self:[g.l0.p(8),B.F3],packagerWrapper:g.l0.mt(8)}),vr={Content:function(e){var n=e.options;return(0,Te.P5)({controlName:"flag-packages2",default:!1,logFlagToAnalytics:!1})?(0,r.tZ)(pr,{openFile:function(e){return n.performPaneOperation({operation:"open",pane:(0,mt.$E)(e),secondary:!0})}}):(0,r.BX)(y.G,{css:hr.self,children:[(0,r.tZ)(Z.h4,{level:2,variant:"subheadBig",children:"Packages"}),(0,r.tZ)(y.G,{css:hr.packagerWrapper,children:(0,r.tZ)(st,{openFile:function(e){return n.performPaneOperation({operation:"open",pane:(0,mt.$E)(e),secondary:!0})}})})]})},Icon:function(e){var n=e.size;return(0,r.tZ)(Tn.Z,{size:n})},getTitle:function(){return"Packages"}},mr=t(70104),gr=t(35004),yr=t(60566),Zr=(0,b.X)({button:{width:"fit-content"}});function br(e){var n=e.code,t=e.activeFile,i=(0,Xe.Z)(t),o=i?{text:"Insert",iconRight:(0,r.tZ)(gr.Z,{}),onClick:function(){return i({code:n,insertAt:"end"})}}:{text:"Copy",iconLeft:(0,r.tZ)(un.Z,{}),onClick:function(){return(0,yr.Z)(n)}};return(0,r.tZ)(K.Tg,{background:"default",children:(0,r.tZ)(Oe.zx,(0,M.Z)({small:!0,outlined:!0,css:Zr.button},o))})}var wr=(0,b.X)({self:g.l0.colWithGap(4),content:[g.l0.rowWithGap(4),g.l0.backgroundColor.backgroundRoot,g.l0.borderRadius(4),g.l0.p(4),g.l0.align.center,{width:"fit-content"}]});function xr(e){var n=e.method,t=e.content,i=e.activeFile,o=(0,a.useState)(t),l=o[0],c=o[1];return(0,r.BX)(y.G,{css:wr.self,children:[(0,r.tZ)(Ir,{title:n}),(0,r.tZ)(y.G,{css:wr.content,children:l.map((function(e,t){var i="".concat(n,"-").concat(t);return"input"===e.type?(0,r.tZ)(Cr,{i:t,value:e.value,placeholder:e.placeholder,setContent:c},i):(0,r.tZ)(Tr,{value:e.value},i)}))}),(0,r.tZ)(br,{code:Gr(l),activeFile:i})]})}var kr=(0,b.X)({self:[g.l0.width(64),g.l0.height(24),g.l0.zIndex(1)]});function Cr(e){var n=e.i,t=e.value,i=e.placeholder,o=e.setContent;return(0,r.tZ)(Qe.II,{onChange:function(e){o((function(t){return t.map((function(t,r){return n===r?(0,De.Z)((0,M.Z)({},t),{value:e.target.value}):t}))}))},placeholder:i,value:t||"",css:kr.self})}var Sr=(0,b.X)({self:[g.l0.borderRadius(0),g.l0.backgroundColor.backgroundRoot],code:[g.l0.font.code,g.l0.color.greyStronger,g.l0.p(4)]});function Tr(e){var n=e.value;return(0,r.tZ)(y.G,{css:Sr.self,children:(0,r.tZ)(Z.xv,{css:Sr.code,multiline:!1,children:n})})}var Er,Rr=(0,b.X)({self:g.l0.rowWithGap(4),bold:{fontWeight:g.TV.fontWeightMedium}});function Ir(e){var n=e.title,t=(0,o.Z)((0,pn.Z)((function(){var e=(0,yt.Z)(n.split(" "));return[e[0],e.slice(1).join(" ")]}),[n]),2),i=t[0],a=t[1];return(0,r.BX)(y.G,{css:Rr.self,children:[(0,r.tZ)(Z.xv,{css:Rr.bold,multiline:!1,children:i}),(0,r.tZ)(Z.xv,{color:"dimmer",multiline:!1,children:a})]})}function Gr(e){return e.reduce((function(e,n){return e+(n.value||("input"===n.type?n.placeholder:""))}),"")}!function(e){e.IMPORT="Import the database",e.CREATE="Create a new database",e.SET="Set a key to a value",e.GET="Get a key's value",e.DELETE="Delete a key",e.LIST="List all keys",e.LIST_PREFIX="List keys with a prefix"}(Er||(Er={}));var Dr={language:"Bash",methods:[Ar(Er.SET,"curl $REPLIT_DB_URL -d '{{key}} = {{value}}'"),Ar(Er.GET,"curl $REPLIT_DB_URL/{{key}}"),Ar(Er.DELETE,"curl -XDELETE $REPLIT_DB_URL/{{key}}"),Ar(Er.LIST,'curl "$REPLIT_DB_URL?prefix={{key}}"')]},_r={language:"Node",methods:[Ar(Er.IMPORT,'const Database = require("@replit/database")'),Ar(Er.CREATE,"const db = new Database()"),Ar(Er.SET,'db.set("{{key}}", "{{value}}").then(() => {})'),Ar(Er.GET,'db.get("{{key}}").then(value => {})'),Ar(Er.DELETE,'db.delete("{{key}}").then(() => {})'),Ar(Er.LIST,"db.list().then(keys => {})"),Ar(Er.LIST_PREFIX,'db.list("{{prefix}}").then(matches => {})')]},Pr={language:"Go",methods:[Ar(Er.IMPORT,'import "github.com/replit/database-go"'),Ar(Er.SET,'db.Set("{{key}}", "{{value}}")'),Ar(Er.GET,'value, _ := database.Get("{{key}}")'),Ar(Er.DELETE,'database.Delete("{{key}}")'),Ar(Er.LIST,'keys, _ := database.ListKeys("")'),Ar(Er.LIST_PREFIX,'matches, _ := database.ListKeys("{{prefix}}")')]},Br={language:"Python",methods:[Ar(Er.IMPORT,"from replit import db"),Ar(Er.SET,'db["{{key}}"] = "{{value}}"'),Ar(Er.GET,'db["{{key}}"]'),Ar(Er.DELETE,'del db["{{key}}"]'),Ar(Er.LIST,"keys = db.keys()"),Ar(Er.LIST_PREFIX,'matches = db.prefix("{{prefix}}")')]};function Ar(e,n){return{method:e,content:Ur(n)}}function Ur(e){for(var n=[],t=0;t<e.length;){var r=e.indexOf("{{",t),i=e.indexOf("}}",t);if(-1===r||-1===i){n.push({type:"code",value:e.substring(t)});break}n.push({type:"code",value:e.substring(t,r)}),n.push({type:"input",placeholder:e.substring(r+"{{".length,i)}),t=i+"}}".length}return n}var Lr=(0,b.X)({self:g.l0.colWithGap(24),code:[g.l0.font.code,g.l0.color.greyStronger,g.l0.backgroundColor.backgroundRoot,g.l0.p(4),g.l0.borderRadius(4)]});function Xr(e){var n=e.activeFile,t=(0,pn.Z)((function(){return function(e){switch(e?(0,v.r6)(e):"bash"){case"js":case"ts":case"tsx":case"jsx":case"mjs":return _r;case"go":return Pr;case"py":return Br;default:return Dr}}(n)}),[n]);return(0,r.BX)(y.G,{css:Lr.self,children:[(0,r.BX)(Z.xv,{color:"dimmer",children:["You can use the Database from any Repl by making HTTP requests or a client library as outlined below. We\u2019ve set an environment variable called ",(0,r.tZ)("code",{css:Lr.code,children:"REPLIT_DB_URL"})," in your Repl if you'd like to interact with the database directly."]}),t.methods.map((function(e){return(0,r.tZ)(xr,{method:e.method,content:e.content,activeFile:n},"".concat(t.language).concat(e.method))}))]})}var Nr=t(33594),Mr=(0,b.X)({children:[g.l0.p(12),g.l0.colWithGap(8)]});function Fr(e){var n=e.title,t=e.defaultExpanded,i=e.children;return(0,r.tZ)(Nr.Q,{defaultExpanded:t,headerContent:(0,r.tZ)(Z.xv,{variant:"subheadDefault",multiline:!1,children:n}),children:(0,r.tZ)(y.G,{css:Mr.children,children:i})})}var Or=t(84563),Wr=(0,Qn.F4)("from{opacity:0}to{opacity:1}"),Hr=(0,b.X)({self:[g.l0.colWithGap(8),{animation:"".concat(Wr," 100ms forwards ease-in-out alternate")}],selfLoadingText:[g.l0.height(16),g.l0.width(48),g.l0.borderRadius(4),ue.p.backgroundPulse()],selfLoading:[g.l0.height(12),g.l0.borderRadius(16),ue.p.backgroundPulse()],text:[g.l0.rowWithGap(4)],textSpan:[g.l0.width("fit-content"),g.l0.display.inlineFlex]});function Vr(e){var n=e.database,t=e.loading,i=(null===n||void 0===n?void 0:n.sizeMB)||0,o=function(e){return"".concat((e=1e6*e/1048576).toFixed(),"/50 MiB")}(i),a=t||!n;return(0,r.tZ)(y.G,{css:Hr.self,children:a?(0,r.BX)(r.HY,{children:[(0,r.tZ)(y.G,{css:Hr.selfLoadingText}),(0,r.tZ)(y.G,{css:Hr.selfLoading})]}):(0,r.BX)(r.HY,{children:[(0,r.BX)(Z.xv,{color:"dimmer",css:Hr.text,multiline:!1,children:[(0,r.tZ)(y.K.span,{css:Hr.textSpan,children:o}),(0,r.tZ)(y.K.span,{css:Hr.textSpan,children:"|"}),(0,r.tZ)(y.K.span,{css:Hr.textSpan,children:zr(null===n||void 0===n?void 0:n.keysCount)})]}),(0,r.tZ)(Or.J,{current:i,total:50,tooltip:o})]})},a?"databaseLoadingStats":"databaseLoadedStats")}function zr(e){return"".concat(e=e||0," ").concat((0,gt.Z)("key",e))}var jr=t(43119),qr=t(71440),$r=t(24635);function Yr(){var e=(0,jr.Z)(["\n  fragment DatabaseUsage on Database {\n    id\n    keysCount\n    sizeMB\n  }\n"]);return Yr=function(){return e},e}function Kr(){var e=(0,jr.Z)(["\n  query Database($replID: String!) {\n    repl(id: $replID) {\n      ... on Repl {\n        id\n        database {\n          id\n          ...DatabaseUsage\n        }\n      }\n    }\n    currentUser {\n      id\n      isLoggedIn\n    }\n  }\n  ","\n"]);return Kr=function(){return e},e}var Qr={},Jr=(0,qr.Ps)(Yr()),ei=(0,qr.Ps)(Kr(),Jr);function ni(){var e,n,t,r=function(e){var n=(0,M.Z)({},Qr,e);return $r.a(ei,n)}({variables:{replID:(0,En.Z)()},pollInterval:1e4}),i=r.data,o=r.error,a=r.loading;i&&("Repl"===i.repl.__typename?n=null===i||void 0===i||null===(t=i.repl)||void 0===t?void 0:t.database:e="Could not fetch Database info");return o&&("GraphQL error: You don't have access to this database"===o.message?n=null:e=o.message),{db:n,loading:a,error:e}}var ti=t(30504),ri=(0,b.X)({self:[g.l0.colWithGap(16),g.l0.p(8),g.l0.backgroundColor.backgroundDefault,B.F3],link:[g.l0.color.accentPrimaryStronger,g.l0.pr(4)],sectionWrapper:[g.l0.colWithGap(16),g.l0.overflowY("auto"),g.l0.width("100%"),{flex:"1"}]});function ii(e){var n=e.performPaneOperation,t=ni(),i=t.db,o=t.error,a=t.loading,l=(0,en.R3)();return(0,r.BX)(y.G,{css:ri.self,children:[(0,r.tZ)(Z.h4,{level:2,variant:"subheadBig",children:"Database"}),(0,r.BX)(y.G,{css:ri.sectionWrapper,children:[(0,r.BX)(y.G,{children:[(0,r.BX)(Z.xv,{children:[(0,r.tZ)("a",{href:ti.TT.REPL_DATABASE,target:"_blank",rel:"noopener",onClick:function(e){e.preventDefault(),n({operation:"open",pane:{type:"docs",data:{url:ti.TT.REPL_DATABASE}}})},children:"Replit Database"})," ","is a free, easy to use key-value store. No configuration is necessary, so you can start using it right away."]}),o?(0,r.tZ)(Z.xv,{css:[g.l0.color.accentNegativeStronger],children:o}):null]}),(0,r.tZ)(Fr,{title:"Database Info",defaultExpanded:!0,children:(0,r.tZ)(Vr,{database:i,loading:a})}),(0,r.tZ)(Fr,{title:"Using the database",defaultExpanded:!0,children:(0,r.tZ)(Xr,{activeFile:l})})]})]})}var oi={Content:function(e){var n=e.options.performPaneOperation;return(0,r.tZ)(ii,{performPaneOperation:n})},Icon:function(e){var n=e.size;return(0,r.tZ)(mr.Z,{size:n})},getTitle:function(){return"Database"}},ai=t(50216);function li(){var e=(0,jr.Z)(["\n  mutation CreateNeonDatabase($input: CreateNeonDatabaseInput!) {\n    createNeonDatabase(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on CreateNeonDatabaseResult {\n        databaseId\n        databaseName\n        projectId\n        connectionString\n        isFrozen\n      }\n    }\n  }\n"]);return li=function(){return e},e}function ci(){var e=(0,jr.Z)(["\n  mutation DeleteNeonDatabase($input: DeleteNeonDatabaseInput!) {\n    deleteNeonDatabase(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on DeleteNeonDatabaseResult {\n        success\n      }\n    }\n  }\n"]);return ci=function(){return e},e}function ui(){var e=(0,jr.Z)(["\n  query GetNeonDatabases($input: GetNeonDatabasesInput!) {\n    getNeonDatabases(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on GetNeonDatabasesResult {\n        databases {\n          databaseId\n          databaseName\n          projectId\n          connectionString\n          isFrozen\n        }\n      }\n    }\n  }\n"]);return ui=function(){return e},e}function si(){var e=(0,jr.Z)(["\n  mutation UnfreezeNeonDatabase($input: UnfreezeNeonDatabaseInput!) {\n    unfreezeNeonDatabase(input: $input) {\n      ... on UnfreezeNeonDatabaseResult {\n        success\n      }\n    }\n  }\n"]);return si=function(){return e},e}var di={},fi=(0,qr.Ps)(li());var pi=(0,qr.Ps)(ci());var hi=(0,qr.Ps)(ui());var vi=(0,qr.Ps)(si());var mi=t(69994),gi=t(98381),yi=t(14806),Zi=t(9970),bi=t(44322),wi=t(18988),xi=t(34204),ki=t(52132),Ci={"td,th":{border:"1px solid "+g.TV.outlineDefault}},Si={"td,th":{paddingLeft:8,paddingTop:8,paddingBottom:8,paddingRight:8,whiteSpace:"nowrap"},"td:first-of-type,th:first-of-type":{paddingLeft:8}},Ti={outline:"2px solid ".concat(g.TV.accentPrimaryDefault),outlineOffset:"-2px"},Ei=(0,Qn.iv)({":focus:focus-visible":Ti}),Ri=(0,Qn.iv)(Ti),Ii=(0,Qn.iv)([Si,Ci,Ei]),Gi=(0,Qn.iv)([g.l0.fontWeight.medium,Si,Ci,Ei]),Di=(0,Qn.iv)({"tbody > tr:hover":{backgroundColor:g.TV.backgroundHigher,cursor:"pointer"}});function _i(e){var n=e.type,t=e.style,i=e.children,o=(0,bi.LA)().rowGroupProps;return(0,r.tZ)(n,(0,De.Z)((0,M.Z)({},o),{style:t,children:i}))}function Pi(e){var n=e.item,t=e.state,i=e.children,o=(0,a.useRef)(null),l=(0,bi.Qm)({node:n},t,o).rowProps;return(0,r.tZ)("tr",(0,De.Z)((0,M.Z)({css:Gi},l),{ref:o,children:i}))}function Bi(e){var n,t=e.column,i=e.state,o=(0,a.useRef)(null),l=(0,bi.WY)({node:t},i,o).columnHeaderProps,c=(0,wi.Fx)(),u=c.isFocusVisible,s=c.focusProps;return(0,r.tZ)("th",(0,De.Z)((0,M.Z)({},(0,xi.dG)(l,s)),{css:[u&&Ri,Ei],colSpan:t.colspan,style:{textAlign:(null!==(n=t.colspan)&&void 0!==n?n:1)>1?"center":"left"},ref:o,children:t.rendered}))}function Ai(e){var n=e.item,t=e.children,i=e.state,o=(0,a.useRef)(null),l=(0,bi.U)({node:n},i,o).rowProps,c=(0,wi.Fx)(),u=c.isFocusVisible,s=c.focusProps;return(0,r.tZ)("tr",(0,De.Z)((0,M.Z)({css:[u&&Ri,Ii]},(0,xi.dG)(l,s)),{ref:o,children:t}))}function Ui(e){var n=e.cell,t=e.state,i=(0,a.useRef)(null),o=(0,bi.fs)({node:n},t,i).gridCellProps,l=(0,wi.Fx)(),c=l.isFocusVisible,u=l.focusProps;return(0,r.tZ)("td",(0,De.Z)((0,M.Z)({},(0,xi.dG)(o,u)),{css:[c&&Ri,Ei],ref:i,children:n.rendered}))}function Li(e){var n=e.selectionMode,t=e.selectionBehavior,i=(0,ki.oy)((0,De.Z)((0,M.Z)({},e),{showSelectionCheckboxes:"multiple"===n&&"replace"!==t})),o=(0,a.useRef)(null),l=i.collection,c=(0,bi.x6)(e,i,o).gridProps;return(0,r.BX)("table",(0,De.Z)((0,M.Z)({},c),{ref:o,css:[(null===e||void 0===e?void 0:e.onRowAction)&&Di],style:{borderCollapse:"collapse"},children:[(0,r.tZ)(_i,{type:"thead",children:l.headerRows.map((function(e){return(0,r.tZ)(Pi,{item:e,state:i,children:(0,Zi.Z)(e.childNodes).map((function(e){return(0,r.tZ)(Bi,{column:e,state:i},e.key)}))},e.key)}))}),(0,r.tZ)(_i,{type:"tbody",children:(0,Zi.Z)(l.body.childNodes).map((function(e){return(0,r.tZ)(Ai,{item:e,state:i,children:(0,Zi.Z)(e.childNodes).map((function(e){return(0,r.tZ)(Ui,{cell:e,state:i},e.key)}))},e.key)}))})]}))}var Xi=function(e){var n=e.ariaTableProps,t=e.rows,i=e.columns;return(0,r.BX)(Li,(0,De.Z)((0,M.Z)({},n),{children:[(0,r.tZ)(ki.xD,{columns:i,children:function(e){return(0,r.tZ)(ki.sg,{children:e.value})}}),(0,r.tZ)(ki.RM,{items:t,children:function(e){return(0,r.tZ)(ki.X2,{children:function(n){return(0,r.tZ)(ki.bL,{children:e[n]})}})}})]}))};function Ni(e){var n=e.headerColumns,t=e.bodyData,i=e.ariaLabel,o=void 0===i?"Database Table":i,a=e.scrollRef,l=e.onRowAction,c=n.map((function(e,n){return{key:"string"===typeof e?e:"".concat(n),value:e}})),u=t.map((function(e,t){for(var r={id:t},i=0;i<e.length;i++){var o=n[i];r["string"===typeof o?o:"".concat(i)]=e[i]}return r}));return(0,r.tZ)(Xi,{ariaTableProps:{selectionMode:"none","aria-label":o,onRowAction:l,scrollRef:a},columns:c,rows:u})}var Mi=function(e,n){var t=(0,d.Z)().psql,r=(0,o.Z)(a.useState(),2),i=r[0],l=r[1],c=(0,o.Z)(a.useState(!1),2),u=c[0],s=c[1],f=a.useCallback(function(){var r=(0,Ge.Z)((function(){var r;return(0,_e.__generator)(this,(function(i){switch(i.label){case 0:if(!e)return[2];i.label=1;case 1:return i.trys.push([1,,3,4]),s(!0),[4,t.run({query:e,connectionString:n})];case 2:return r=i.sent(),l(r),[3,4];case 3:return s(!1),[7];case 4:return[2]}}))}));return function(){return r.apply(this,arguments)}}(),[n,t,e]);return a.useEffect((function(){f()}),[n,t,e,f]),{data:i,loading:u,refetch:f}},Fi=function(e){var n=e.rows,t=e.columns;return!Array.isArray(n)||n.length<1?null:{headerColumns:null!==t&&void 0!==t?t:[],bodyData:n.map((function(e){return Object.values(e)}))}},Oi=function(e){var n=e.connectionString;return Mi("SELECT n.nspname as \"Schema\",\n  c.relname as \"Name\",\n  CASE c.relkind WHEN 'r' THEN 'table' WHEN 'v' THEN 'view' WHEN 'm' THEN 'materialized view' WHEN 'i' THEN 'index' WHEN 'S' THEN 'sequence' WHEN 's' THEN 'special' WHEN 'f' THEN 'foreign table' WHEN 'p' THEN 'partitioned table' WHEN 'I' THEN 'partitioned index' END as \"Type\",\n  pg_catalog.pg_get_userbyid(c.relowner) as \"Owner\",\n  pg_catalog.pg_size_pretty(pg_catalog.pg_total_relation_size(c.oid)) as \"Size\",\n  pg_catalog.obj_description(c.oid, 'pg_class') as \"Description\"\nFROM pg_catalog.pg_class c\n     LEFT JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace\nWHERE c.relkind IN ('r','p','v','m','S','f','')\n      AND n.nspname <> 'pg_catalog'\n      AND n.nspname <> 'information_schema'\n      AND n.nspname !~ '^pg_toast'\n  AND pg_catalog.pg_table_is_visible(c.oid)\nORDER BY 1,2;",n)},Wi=(0,zn.cn)(void 0),Hi=(0,zn.cn)((function(e){var n=e(Wi);return null===n||void 0===n?void 0:n.rows.reduce((function(e,n){var t=n.table_name,r=n.column_name;return e[t]||(e[t]=[]),e[t].push(r),e}),{})})),Vi=t(10035),zi=t(3652),ji=function(e){var n=e.headerTitle,t=e.onGoBack,i=e.children;return(0,r.BX)(y.G,{css:[g.l0.flex.column,g.l0.height("100%")],children:[(0,r.BX)(y.G,{css:[g.l0.flex.row,g.l0.py(16),g.l0.px(8),g.l0.align.center],children:[(0,r.tZ)(se.h,{alt:"Go back",size:28,type:"button",onClick:t,children:(0,r.tZ)(zi.Z,{})}),(0,r.tZ)(Z.xv,{css:[g.l0.fontSize(16),g.l0.ml(8)],multiline:!1,children:n})]}),(0,r.tZ)(y.G,{css:[g.l0.overflow("auto"),g.l0.height("calc(100% - 60px)")],children:i})]})},qi=function(e){(0,Le.j)(Le.U3.DATABASE_USED,(0,M.Z)({type:"PostgreSQL",provider:"neon"},e))},$i=(0,zn.cn)(["databaseManager"]),Yi=(0,zn.cn)(null,(function(e,n,t){var r=e($i);n($i,(0,Zi.Z)(r).concat([t])),qi({action:"pageNav",databasePage:t})})),Ki=(0,zn.cn)(null,(function(e,n){var t=e($i);n($i,t.slice(0,t.length-1))})),Qi=(0,zn.cn)((function(e){var n=e($i);return n[n.length-1]})),Ji=function(){return(0,_n.b9)(Yi)},eo=function(){return(0,_n.b9)(Ki)},no=t(5005),to=t(40696),ro=(0,zn.cn)(""),io=(0,zn.cn)(null),oo=(0,zn.cn)(null,(function(e,n,t){var r=t.query;r&&n(ro,r);var i=e(io);i&&i.dispatch({changes:{from:0,to:i.state.doc.length,insert:r}})})),ao=t(85234),lo=t.n(ao),co=t(56581),uo=(0,co.O4)("replDatabasesQueryHistory",[]),so=function(e,n){return!e.isPinned&&n.isPinned?1:e.isPinned&&!n.isPinned?-1:"number"===typeof e.pinnedTimestamp&&"number"===typeof n.pinnedTimestamp?e.pinnedTimestamp-n.pinnedTimestamp:n.timestamp-e.timestamp},fo=function(){return(0,Zt.lV)(a.useCallback((function(e,n,t){if(t){var r={id:lo()(),data:t,timestamp:Date.now()},i=e(uo),o=(0,O.ZP)(i,(function(e){!function(e,n){var t=e.findIndex((function(e){return!e.isPinned&&e.data===n.data}));-1!==t?e.splice(t,1,n):e.push(n),e.sort(so);var r=e.filter((function(e){return!e.isPinned})).length;if(r>=5){var i=r-5;e.splice(e.length-i,i)}}(e,r)}));n(uo,o)}}),[]))},po=t(49129),ho=t(69051),vo=t(8345),mo=t(72669),go=t(55143),yo=t(72499),Zo=function(e){var n=e.id,t=e.data,i=e.isPinned,o=function(e){return(0,Zt.lV)(a.useCallback((function(n,t){var r=n(uo).find((function(n){return n.id===e})),i=(null===r||void 0===r?void 0:r.data)||"";i&&(t(oo,{query:i}),qi({action:"queryHistoryItemSelected"}))}),[e]))}(n),l=function(e){return(0,Zt.lV)(a.useCallback((function(n,t){var r=n(uo),i=(0,O.ZP)(r,(function(n){var t=n.find((function(n){return n.id===e}));t&&(t.isPinned=!t.isPinned,t.isPinned?t.pinnedTimestamp=Date.now():t.pinnedTimestamp=void 0),n.sort(so)}));t(uo,i),qi({action:"queryHistoryItemPinned"})}),[e]))}(n);return(0,r.BX)(y.G,{css:[{borderTop:"1px solid ".concat(g.TV.outlineDefault),":hover":{background:g.TV.backgroundHigher}},g.l0.flex.row,g.l0.p(8),g.l0.color.foregroundDimmer,g.l0.align.center,g.l0.cursor.pointer],onClick:o,children:[(0,r.tZ)(Z.xv,{css:[g.l0.flex.growAndShrink(1)],multiline:!1,children:t}),(0,r.tZ)(se.h,{alt:"Pin query",onClick:l,children:i?(0,r.tZ)(vo.Z,{fill:g.TV.accentPrimaryDefault}):(0,r.tZ)(to.Z,{})})]})},bo=function(e){var n=e.onExpand,t=(0,_n.Dv)(uo);return(0,r.tZ)(Nr.Q,{onClick:n,headerContent:(0,r.BX)(y.G,{css:[g.l0.rowWithGap(8),g.l0.align.center,g.l0.p(2)],children:[(0,r.tZ)(Vi.Z,{}),(0,r.tZ)(Z.xv,{css:[g.l0.color.foregroundDimmest],multiline:!1,children:"Query History"})]}),children:(0,r.tZ)(y.G,{css:[g.l0.colWithGap(8),g.l0.height("100%")],children:0===t.length?(0,r.tZ)(y.G,{css:[g.l0.p(8)],children:(0,r.tZ)(Z.xv,{css:[g.l0.color.foregroundDimmer],multiline:!1,children:"No query history"})}):(0,r.tZ)(y.G,{children:t.map((function(e){return(0,r.tZ)(Zo,(0,M.Z)({},e),e.id)}))})})})},wo=new yo.R((function(){return(0,mi.W$)((0,mo.VV)((0,r.tZ)("div",{css:[{fontFamily:g.TV.fontFamilyCode},g.l0.color.foregroundDimmest],children:"Type PostgreSQL queries here to use the database."})))})),xo=new go.j((function(e){return yi.Wl.high((0,gi.sql)((0,M.Z)({dialect:gi.PostgreSQL},e)))})),ko=function(e){var n=e.queryResult,t=e.scrollRef;if(null===n||void 0===n?void 0:n.error)return(0,r.tZ)(y.G,{css:g.l0.px(8),children:(0,r.tZ)(Z.xv,{css:[g.l0.color.accentNegativeDefault],children:null===n||void 0===n?void 0:n.error})});if(!(null===n||void 0===n?void 0:n.rows))return null;var i=Fi(n);if(!i)return(0,r.tZ)(y.G,{css:g.l0.px(8),children:(0,r.tZ)(Z.xv,{css:[g.l0.color.accentPositiveDefault],children:"Query successful, no rows returned"})});var o=i.headerColumns,a=i.bodyData;return(0,r.tZ)(y.G,{css:g.l0.px(8),children:(0,r.tZ)(Ni,{headerColumns:o,bodyData:a,scrollRef:t})})},Co=(0,Qn.iv)([g.l0.height("100%"),g.l0.position.relative,g.l0.overflow("auto")]),So=(0,Qn.iv)([g.l0.position.sticky,g.l0.top(0),g.l0.left(0),g.l0.zIndex(1),g.l0.backgroundColor.backgroundDefault]),To=function(e){var n=e.connectionString,t=(0,o.Z)((0,_n.KO)(ro),2),i=t[0],l=t[1],c=(0,Fe.Z)(),u=c.ref,s=c.view,f=(0,o.Z)(a.useState(!1),2),p=f[0],h=f[1];a.useEffect((function(){return function(){var e;l(null!==(e=null===s||void 0===s?void 0:s.state.doc.toString())&&void 0!==e?e:"")}}),[l,null===s||void 0===s?void 0:s.state.doc]);var v=(0,_n.b9)(io);a.useEffect((function(){v(s)}),[v,s]),function(e){var n=e.connectionString,t=Mi("SELECT table_name, column_name, data_type FROM information_schema.columns WHERE table_schema = 'public';",n).data,r=(0,_n.b9)(Wi);a.useEffect((function(){r(t)}),[t,r])}({connectionString:n});var m=(0,_n.Dv)(Hi),Z=(0,po.Lh)();(0,ho.Z)({view:s,filePath:"mark.sql",decorations:Z});var b=(0,d.Z)().psql,w=(0,o.Z)(a.useState(),2),x=w[0],k=w[1],C=(0,o.Z)(a.useState(!1),2),S=C[0],T=C[1],E=fo(),R=a.useCallback((function(){function e(){return(e=(0,Ge.Z)((function(){var e,t;return(0,_e.__generator)(this,(function(r){switch(r.label){case 0:if(!s)return[2];r.label=1;case 1:return r.trys.push([1,,3,4]),T(!0),e=null===s||void 0===s?void 0:s.state.doc.toString(),E(e),[4,b.run({query:e,connectionString:n})];case 2:return t=r.sent(),k(t),qi({action:"queryRan"}),[3,4];case 3:return T(!1),[7];case 4:return[2]}}))}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[n,b,E,s]),I=Ji(),G=a.useCallback((function(){I("databaseManager")}),[I]),D=a.useCallback((function(){I("tableSchemas")}),[I]),_=a.useRef(null),P=[xo.use({schema:m})];return(0,r.tZ)(ji,{headerTitle:"Database Contents",onGoBack:G,children:(0,r.BX)(y.G,{css:[g.l0.colWithGap(8),Co],innerRef:_,children:[(0,r.BX)(y.G,{css:[g.l0.colWithGap(8),g.l0.px(8),g.l0.pb(8),p?null:So],children:[(0,r.BX)(y.G,{css:[{border:"1px solid ".concat(g.TV.outlineDefault)},g.l0.borderRadius(2)],children:[(0,r.tZ)(Me.Z,{ref:u,css:[g.l0.viewStyle,g.l0.backgroundColor.backgroundDefault,g.l0.borderRadius(8),g.l0.overflow("auto"),g.l0.maxHeight(300),{".cm-panel":{zIndex:1}}],initialDoc:i,extensions:[wo,P]}),(0,r.tZ)(bo,{expanded:p,onExpand:function(){h((function(e){return!e}))}})]}),(0,r.tZ)(Oe.zx,{text:"Run Query",iconLeft:S?(0,r.tZ)(Je.Z,{}):(0,r.tZ)(ne.Z,{}),onClick:R,disabled:S})]}),(0,r.tZ)(ko,{queryResult:x,scrollRef:_}),(0,r.tZ)(y.G,{css:[g.l0.colWithGap(8),g.l0.px(8),g.l0.py(8)],children:(0,r.tZ)(Oe.zx,{css:g.l0.backgroundColor.backgroundDefault,text:"Show All Contents",iconLeft:(0,r.tZ)(no.Z,{}),onClick:D})})]})})},Eo=t(49085),Ro=t(22011),Io=t(56169),Go="DATABASE_URL",Do="PGDATABASE",_o="PGHOST",Po="PGPORT",Bo="5432",Ao="PGUSER",Uo="PGPASSWORD",Lo=function(e){var n=e.envVarKey,t=e.envVarValue,i=e.isSecret,l=(0,Io.H)()("db-env-var-".concat(n)),c=(0,o.Z)(a.useState(!1),2),s=c[0],d=c[1],f=!i||s?"text":"password";return(0,r.BX)(y.G,{css:[g.l0.flex.row,g.l0.flex.wrap,g.l0.align.end,g.l0.pb(8),{gap:g.TV.space8}],children:[(0,r.BX)(y.G,{css:[g.l0.colWithGap(8),{flexBasis:250},g.l0.flex.grow(0),g.l0.flex.shrink(1)],children:[(0,r.tZ)("label",{css:g.l0.color.foregroundDimmer,htmlFor:l,children:n}),(0,r.tZ)(Qe.II,{id:l,type:f,readOnly:!0,value:t})]}),(0,r.tZ)(Oe.zx,{text:"Copy",iconLeft:(0,r.tZ)(Eo.Z,{}),onClick:function(){(0,yr.Z)(t),qi({action:"envVarCopied",envVarKey:n,envVarType:"value"})}}),i?(0,r.tZ)(Oe.zx,{text:"View",iconLeft:(0,r.tZ)(u.Z,{}),onClick:function(){return d((function(e){return!e}))}}):null]})},Xo=function(e){var n,t=e.connectionString,r=e.databaseName,o=new URL(t.replace("postgres://","https://")),a=o.host,l=o.username,c=o.password;return n={},(0,i.Z)(n,Go,t),(0,i.Z)(n,Do,r),(0,i.Z)(n,_o,a),(0,i.Z)(n,Po,Bo),(0,i.Z)(n,Ao,l),(0,i.Z)(n,Uo,c),n},No=function(){var e=(0,d.Z)().fs;return a.useCallback((function(n){var t=n.connectionString,r=n.databaseName,i=Xo({connectionString:t,databaseName:r});function a(){return a=(0,Ge.Z)((function(){var n,t,r,a,l,c,u,s,d,f,p,h,v,m;return(0,_e.__generator)(this,(function(g){switch(g.label){case 0:return[4,e.readFile(".env")];case 1:if(n=g.sent(),t="",n.error){if(n.error!==w.Df.NotFound)throw new Error("Error getting .env");t=""}else t=n.content;r=Pe.Z.parse(t.toString()),a=!1,l=(0,M.Z)({},r),c=!0,u=!1,s=void 0;try{for(d=Object.entries(i)[Symbol.iterator]();!(c=(f=d.next()).done);c=!0)p=(0,o.Z)(f.value,2),h=p[0],v=p[1],l[h]!==v&&(a=!0,l[h]=v)}catch(y){u=!0,s=y}finally{try{c||null==d.return||d.return()}finally{if(u)throw s}}return a?(m=Pe.Z.serialize(l),[4,e.writeFile(".env",Ro.Z.from(m))]):[2];case 2:return g.sent(),[2]}}))})),a.apply(this,arguments)}!function(){a.apply(this,arguments)}()}),[e])},Mo=function(e){var n=e.connectionString,t=e.databaseName,i=(0,pn.Z)((function(){return Xo({connectionString:n,databaseName:t})}),[n,t]),o=i.PGHOST,l=i.PGUSER,c=i.PGPASSWORD,u=No();return a.useEffect((function(){u({connectionString:n,databaseName:t})}),[n,t,u]),(0,r.BX)(y.G,{css:[g.l0.colWithGap(8)],children:[(0,r.tZ)(Lo,{envVarKey:Go,envVarValue:n,isSecret:!0}),(0,r.tZ)(Lo,{envVarKey:Do,envVarValue:t}),(0,r.tZ)(Lo,{envVarKey:_o,envVarValue:o}),(0,r.tZ)(Lo,{envVarKey:Po,envVarValue:Bo}),(0,r.tZ)(Lo,{envVarKey:Ao,envVarValue:l}),(0,r.tZ)(Lo,{envVarKey:Uo,envVarValue:c,isSecret:!0})]})},Fo=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],Oo=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];function Wo(e,n){var t,r=n||{},i=r.signed,o=void 0!==i&&i,a=r.digitsNumber,l=void 0===a?2:a,c=r.isKib,u=void 0===c||c,s=r.isKibNotation,d=void 0!==s&&s;if(t=o?e<0?"-":"+":"",0===e)return"".concat(t,"0B");var f=u?1024:1e3,p=d?Fo:Oo,h=Math.floor(Math.log(Math.abs(e))/Math.log(f));return"".concat(t).concat(parseFloat(Math.abs(e/Math.pow(f,h)).toFixed(l))).concat(p[h])}var Ho=t(73162),Vo=t(48667),zo=function(e){var n=e.tableData,t=e.scrollRef,i=n.headerColumns,o=n.bodyData,l=Ji(),c=a.useCallback((function(e){var n=parseInt(String(e),10);if(!isNaN(n)){var t=o[n][i.indexOf("Name")];l("table/".concat(t))}}),[l,i,o]);return(0,r.tZ)(Ni,{headerColumns:i,bodyData:o,onRowAction:c,scrollRef:t})},jo=function(e){var n=e.psqlQueryResult,t=e.scrollRef,i=n.data;if(n.loading)return(0,r.tZ)(y.G,{css:[g.l0.flex.row,g.l0.justify.center,g.l0.p(32)],children:(0,r.tZ)(Je.Z,{})});if(null===i||void 0===i?void 0:i.error)return(0,r.tZ)(y.G,{css:[g.l0.flex.row,g.l0.justify.center,g.l0.p(32)],children:(0,r.tZ)(Z.xv,{css:[g.l0.color.accentNegativeDefault,g.l0.maxWidth("100%")],children:null===i||void 0===i?void 0:i.error})});var o=i?Fi(i):null;return o?(0,r.tZ)(zo,{tableData:o,scrollRef:t}):(0,r.tZ)(y.G,{css:[g.l0.flex.row,g.l0.justify.center,g.l0.p(32)],children:(0,r.tZ)(Z.xv,{css:[g.l0.color.accentPositiveDefault,g.l0.maxWidth("100%")],children:"No tables found"})})},qo=function(e){var n=e.connectionString,t=eo(),i=a.useRef(null),o=Oi({connectionString:n}),l=o.refetch;return(0,r.BX)(y.G,{css:[g.l0.flex.column,g.l0.height("100%")],children:[(0,r.BX)(y.G,{css:[g.l0.flex.row,g.l0.py(16),g.l0.px(8),g.l0.align.center],children:[(0,r.tZ)(se.h,{alt:"Go back",size:28,type:"button",onClick:t,children:(0,r.tZ)(zi.Z,{})}),(0,r.tZ)(y.G,{css:[g.l0.flex.growAndShrink(1)],children:(0,r.tZ)(Z.xv,{css:[g.l0.fontSize(16),g.l0.ml(8)],multiline:!1,children:"All tables"})}),(0,r.tZ)(se.h,{alt:"Refresh",size:24,type:"button",onClick:l,children:(0,r.tZ)(Vo.Z,{})})]}),(0,r.tZ)(y.G,{css:[g.l0.flex.growAndShrink(1),g.l0.overflow("auto"),g.l0.px(8)],innerRef:i,children:(0,r.tZ)(jo,{psqlQueryResult:o,scrollRef:i})})]})},$o="1px solid "+g.TV.outlineDefault,Yo=(0,Qn.iv)([g.l0.p(8),g.l0.backgroundColor.backgroundDefault,g.l0.align.center,g.l0.borderRadius(0),{borderLeft:$o,borderRight:$o,borderBottom:$o},{":not([disabled])":{":focus":{boxShadow:"none",outline:"2px solid ".concat(g.TV.accentPrimaryDefault),outlineOffset:"-2px"},":hover":{backgroundColor:g.TV.backgroundHigher}}}]),Ko=function(e){var n=e.connectionString,t=Oi({connectionString:n}),i=t.data,l=t.loading,c=(0,o.Z)(a.useState(!1),2),u=c[0],s=c[1],d=a.useCallback((function(){s(!0)}),[]),f=i?Fi(i):null,p=a.useRef(null);if(!f||l)return null;var h=f.bodyData.length,v=f.headerColumns,m=f.bodyData,Z=h-5>0&&!u;return(0,r.tZ)(r.HY,{children:(0,r.BX)(y.G,{css:[g.l0.overflow("auto"),g.l0.display.grid],innerRef:p,children:[(0,r.tZ)(zo,{tableData:{headerColumns:v,bodyData:u?m:m.slice(0,5)},scrollRef:p}),Z?(0,r.tZ)(Oe.zx,{text:"".concat(h-5," more"),css:Yo,onClick:d}):null]})})},Qo=t(14351),Jo=10*Math.pow(1024,3),ea=Qo.z4["neon-database-preview"],na=(0,Qo.qJ)(ea),ta="".concat(ea.toLocaleString()," Cycles (").concat(na,") / day"),ra="https://docs.replit.com/hosting/databases/postgresql-on-replit",ia=function(e){var n=e.dbSize,t=e.totalSize,i=n,o=t,a=Wo(n),l=Wo(t),c=(0,pn.Z)((function(){return(0,zn.cn)(i)}),[i]),u=(0,pn.Z)((function(){return(0,zn.cn)(o)}),[o]);return(0,r.BX)(r.HY,{children:[(0,r.BX)(Z.xv,{css:g.l0.color.foregroundDimmer,multiline:!1,children:[a,"/",l]}),(0,r.tZ)(Ho.hF,{totalAtom:u,currentAtom:c,limitText:"".concat(a," / ").concat(l),inactive:!1,measure:"MB"})]})},oa=function(e){var n,t,i=e.connectionString,o=Mi("SELECT sum(pg_database_size(datname)) FROM pg_database;",i),a=o.data,l=o.loading,c=Mi("SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' ORDER BY table_name;",i),u=c.data,s=c.loading,d=parseInt(null!==(t=null===(n=null===a||void 0===a?void 0:a.rows[0])||void 0===n?void 0:n.sum)&&void 0!==t?t:"0",10),f=null===u||void 0===u?void 0:u.rows.length;return(0,r.BX)(y.G,{css:g.l0.rowWithGap(8),children:[s?null:(0,r.BX)(Z.xv,{multiline:!1,children:[f," ",1===f?"table":"tables"]}),l?null:(0,r.tZ)(ia,{dbSize:d,totalSize:Jo})]})},aa=function(e){var n=e.connectionString,t=e.onOpenDatabaseViewerClick;return(0,r.BX)(y.G,{css:[g.l0.colWithGap(8)],children:[(0,r.tZ)(oa,{connectionString:n}),(0,r.tZ)(Ko,{connectionString:n}),(0,r.tZ)(Oe.zx,{text:"See Database Contents",iconLeft:(0,r.tZ)(no.Z,{}),onClick:t})]})},la=t(87762),ca=function(e){var n=e.size,t=void 0===n?16:n;return(0,r.BX)("svg",{viewBox:"0 0 128 36",preserveAspectRatio:"xMidYMin",height:t,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 6.207A6.207 6.207 0 0 1 6.207 0h23.586A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36H6.207A6.207 6.207 0 0 1 0 29.793V6.207Zm6.207-1.241c-.686 0-1.241.555-1.241 1.24v23.587c0 .686.555 1.242 1.24 1.242h10.925c.343 0 .434-.278.434-.621V16.18c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V6.207c0-.686.064-1.241-.621-1.241H6.207Z",fill:"#12FFF7"}),(0,r.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 6.207A6.207 6.207 0 0 1 6.207 0h23.586A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36H6.207A6.207 6.207 0 0 1 0 29.793V6.207Zm6.207-1.241c-.686 0-1.241.555-1.241 1.24v23.587c0 .686.555 1.242 1.24 1.242h10.925c.343 0 .434-.278.434-.621V16.18c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V6.207c0-.686.064-1.241-.621-1.241H6.207Z",fill:"url(#a)"}),(0,r.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 6.207A6.207 6.207 0 0 1 6.207 0h23.586A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36H6.207A6.207 6.207 0 0 1 0 29.793V6.207Zm6.207-1.241c-.686 0-1.241.555-1.241 1.24v23.587c0 .686.555 1.242 1.24 1.242h10.925c.343 0 .434-.278.434-.621V16.18c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V6.207c0-.686.064-1.241-.621-1.241H6.207Z",fill:"url(#b)"}),(0,r.tZ)("path",{d:"M29.793 0A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36a.62.62 0 0 0 .62-.62v-19.2c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V1.241C31.035.556 30.479 0 29.793 0Z",fill:"#B9FFB3"}),(0,r.tZ)("path",{d:"M60.686 10.6v9.416l-9.13-9.416h-4.752V26h4.334V15.88L61.082 26h3.938V10.6h-4.334ZM73.054 22.568V19.84h9.702v-3.278h-9.702v-2.53h11.77V10.6H68.632V26h16.434v-3.432H73.054ZM96.583 26.506c6.094 0 10.054-2.992 10.054-8.206 0-5.214-3.96-8.206-10.054-8.206S86.551 13.086 86.551 18.3c0 5.214 3.938 8.206 10.032 8.206Zm0-3.652c-3.388 0-5.478-1.65-5.478-4.554 0-2.904 2.112-4.554 5.478-4.554 3.388 0 5.478 1.65 5.478 4.554 0 2.904-2.09 4.554-5.478 4.554ZM123.249 10.6v9.416l-9.13-9.416h-4.752V26h4.334V15.88L123.645 26h3.938V10.6h-4.334Z",fill:"currentColor"}),(0,r.BX)("defs",{children:[(0,r.BX)("linearGradient",{id:"a",x1:"36",y1:"36",x2:"4.345",y2:"0",gradientUnits:"userSpaceOnUse",children:[(0,r.tZ)("stop",{stopColor:"#B9FFB3"}),(0,r.tZ)("stop",{offset:"1",stopColor:"#B9FFB3",stopOpacity:"0"})]}),(0,r.BX)("linearGradient",{id:"b",x1:"36",y1:"36",x2:"14.617",y2:"27.683",gradientUnits:"userSpaceOnUse",children:[(0,r.tZ)("stop",{stopColor:"#1A1A1A",stopOpacity:".9"}),(0,r.tZ)("stop",{offset:"1",stopColor:"#1A1A1A",stopOpacity:"0"})]})]})]})},ua=(0,Qn.iv)([g.l0.color.foregroundDimmest,{textDecoration:"underline"}]),sa=function(){return(0,r.tZ)(y.G,{css:[g.l0.colWithGap(8),g.l0.py(8),g.l0.width("100%")],children:(0,r.BX)(y.G,{css:[g.l0.rowWithGap(8),g.l0.align.center,g.l0.justify.spaceBetween],children:[(0,r.tZ)("a",{target:"_blank",href:ra,css:ua,children:"Docs"}),(0,r.BX)(y.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:[(0,r.tZ)(Z.xv,{css:[g.l0.fontSize(14)],multiline:!1,children:"Powered by"}),(0,r.tZ)(ca,{})]})]})})},da=function(e){var n=e.psqlQueryResult,t=e.tableName,i=e.connectionString,o=e.scrollRef,a=n.data,l=n.loading,c=function(e){var n=e.tableName,t=e.connectionString,r=Mi(function(e){return"SELECT table_name, column_name, data_type FROM information_schema.columns WHERE table_schema = 'public' AND table_name = '".concat(e.replace(/"/g,'""'),"';")}(n),t).data;return r}({tableName:t,connectionString:i});if(l)return(0,r.tZ)(y.G,{css:[g.l0.flex.row,g.l0.justify.center,g.l0.p(32)],children:(0,r.tZ)(Je.Z,{})});if(null===a||void 0===a?void 0:a.error)return(0,r.tZ)(y.G,{css:[g.l0.flex.row,g.l0.justify.center,g.l0.p(32)],children:(0,r.tZ)(Z.xv,{css:[g.l0.color.accentNegativeDefault,g.l0.maxWidth("100%")],children:null===a||void 0===a?void 0:a.error})});var u=a?Fi(a):null;if(!u)return(0,r.tZ)(y.G,{css:[g.l0.flex.row,g.l0.justify.center,g.l0.p(32)],children:(0,r.tZ)(Z.xv,{css:[g.l0.color.accentPositiveDefault,g.l0.maxWidth("100%")],children:"No rows"})});var s=u.headerColumns,d=u.bodyData;return(0,r.tZ)(Ni,{headerColumns:s.map((function(e,n){var t,i=null===c||void 0===c||null===(t=c.rows)||void 0===t?void 0:t.find((function(n){return n.column_name===e})),o=null===i||void 0===i?void 0:i.data_type,a=o?(0,r.tZ)(Q.D,{text:o}):null;return(0,r.BX)(y.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:[(0,r.tZ)(Z.xv,{multiline:!1,children:e}),a]},n)})),bodyData:d,scrollRef:o})},fa=function(e){var n=e.tableName,t=e.connectionString,i=eo(),o=a.useRef(null),l=Mi('SELECT * FROM "'.concat(n.replace(/"/g,'""'),'" LIMIT ').concat(500),t),c=l.refetch;return(0,r.BX)(y.G,{css:[g.l0.flex.column,g.l0.height("100%")],children:[(0,r.BX)(y.G,{css:[g.l0.flex.row,g.l0.py(16),g.l0.px(8),g.l0.align.center],children:[(0,r.tZ)(se.h,{alt:"Go back",size:28,type:"button",onClick:i,children:(0,r.tZ)(zi.Z,{})}),(0,r.tZ)(y.G,{css:[g.l0.flex.growAndShrink(1)],children:(0,r.tZ)(Z.xv,{css:[g.l0.fontSize(16),g.l0.ml(8)],multiline:!1,children:n})}),(0,r.tZ)(se.h,{alt:"Refresh",size:24,type:"button",onClick:c,children:(0,r.tZ)(Vo.Z,{})})]}),(0,r.tZ)(y.G,{css:[g.l0.flex.growAndShrink(1),g.l0.overflow("auto"),g.l0.px(8)],innerRef:o,children:(0,r.tZ)(da,{psqlQueryResult:l,tableName:n,connectionString:t,scrollRef:o})})]})},pa=function(e){var n=e.cyclesLow;return(0,r.BX)(r.HY,{children:[(0,r.tZ)(Z.xv,{css:[g.l0.fontSize(12),g.l0.color.foregroundDimmest],children:"You\u2019re paying ".concat(ta)}),n?(0,r.tZ)(y.G,{children:(0,r.tZ)(He.E,{icon:(0,r.tZ)(ee.Z,{}),colorway:"warning",text:"If your database use continues, you will be out of\n Cycles in [X] days and access to your database will be paused. \n Buy more Cycles or add a recurring Cycles subscription to prevent that from happening."})}):null]})},ha=t(20811),va=t(26721),ma=t(82108),ga=t(66016),ya=t(48506);var Za=t(49810),ba=t(47900),wa=(0,zn.cn)(null),xa=(0,zn.cn)(null),ka=function(e){var n=e.title,t=e.children,i=e.isAccordion,o=e.sectionStyles;return(0,r.tZ)(y.G,{css:[g.l0.colWithGap(8),g.l0.pt(8),{borderTopWidth:1,borderTopStyle:"solid",borderTopColor:g.TV.outlineDefault},o],children:i?(0,r.tZ)(Nr.Q,{headerContent:(0,r.tZ)(y.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:(0,r.tZ)(Z.xv,{variant:"subheadDefault",multiline:!1,children:n})}),children:(0,r.tZ)(y.G,{css:[g.l0.p(12),g.l0.colWithGap(8),g.l0.height("100%")],children:t})}):(0,r.BX)(r.HY,{children:[(0,r.tZ)(Z.xv,{multiline:!1,css:[g.l0.fontSize(g.TV.fontSizeSubheadDefault),g.l0.fontWeight.medium],children:n}),t]})})},Ca=function(e){var n,t=e.neonDatabases,i=e.onDatabaseDeleted,l=e.onDatabaseUnfreezed,c=t[0],u=(0,cn.Z)().showError,s=(0,En.Z)(),d=function(){var e=a.useContext(ya.Z);if(!e)throw new Error("Expected Repl info to be in context");return e.slug}(),f=(0,_n.Dv)(Qi),p=Ji(),h=a.useCallback((function(){p("queryEditor")}),[p]),v=(0,o.Z)(function(e){var n=(0,M.Z)({},di,e);return ai.D(pi,n)}(),2),m=v[0],b=v[1].loading,w=a.useCallback((function(){I(!0)}),[]),x=(0,ma.Z)({forceFetch:!1}),k=x.cycles,C=x.formattedBalanceValue,S="number"===typeof k&&k>ea,T=a.useCallback((0,Ge.Z)((function(){var e,n,t;return(0,_e.__generator)(this,(function(r){switch(r.label){case 0:return[4,m({variables:{input:{replId:s,databaseId:c.databaseId}}})];case 1:return e=r.sent(),n=e.data,t=e.errors,I(!1),t&&t.length>0?(u("Error when deleting Neon database: ".concat(null===t||void 0===t?void 0:t.join())),qi({action:"removed",success:!1}),[2]):"DeleteNeonDatabaseResult"!==(null===n||void 0===n?void 0:n.deleteNeonDatabase.__typename)?(u("Error: ".concat(null===n||void 0===n?void 0:n.deleteNeonDatabase.message)),qi({action:"removed",success:!1}),[2]):((null===n||void 0===n?void 0:n.deleteNeonDatabase.success)?(i(),qi({action:"removed",success:!0})):(u("Error: Delete Neon Database failed."),qi({action:"removed",success:!1})),[2])}}))})),[m,c.databaseId,i,s,u]),E=(0,o.Z)(a.useState(!1),2),R=E[0],I=E[1],G=a.useCallback((function(){I(!1)}),[]),D=(0,o.Z)(a.useState(!1),2),_=D[0],P=D[1],B=a.useCallback((function(){P(!0)}),[]),A=(0,o.Z)(function(e){var n=(0,M.Z)({},di,e);return ai.D(vi,n)}(),2),U=A[0],L=A[1].loading,X=a.useCallback((0,Ge.Z)((function(){var e,n,t;return(0,_e.__generator)(this,(function(r){switch(r.label){case 0:return[4,U({variables:{input:{neonProjectId:c.projectId,replId:s}}})];case 1:return e=r.sent(),n=e.data,(t=e.errors)&&t.length>0?(u("Error when unfreezing Neon database: ".concat(null===t||void 0===t?void 0:t.join())),qi({action:"unfreeze",success:!1}),[2]):"UnfreezeNeonDatabaseResult"!==(null===n||void 0===n?void 0:n.unfreezeNeonDatabase.__typename)?(u("Error: Unfreezes Neon Database failed."),qi({action:"unfreeze",success:!1}),[2]):((null===n||void 0===n?void 0:n.unfreezeNeonDatabase.success)?(l(),qi({action:"unfreeze",success:!0})):(u("Error: Unfreezes Neon Database failed."),qi({action:"unfreeze",success:!1})),[2])}}))})),[c.projectId,l,s,u,U]),N=(0,_n.Dv)(xa),F=Xo({connectionString:c.connectionString,databaseName:c.databaseName}).PGHOST.split(".")[0],O=N||"".concat(c.connectionString,"/").concat(c.databaseName,"?sslmode=require&options=project%3D").concat(F);if("queryEditor"===f)return(0,r.tZ)(To,{connectionString:O});if("tableSchemas"===f)return(0,r.tZ)(qo,{connectionString:O});if(f.startsWith("table/")){var W=f.slice(f.indexOf("/")+1);return(0,r.tZ)(fa,{tableName:W,connectionString:O})}return n=c.isFrozen?(0,r.BX)(r.HY,{children:[(0,r.BX)(y.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:[(0,r.tZ)(y.G,{css:[g.l0.width(8),g.l0.height(8),g.l0.backgroundColor.foregroundDimmer,g.l0.borderRadius("full")]}),(0,r.tZ)(Z.xv,{css:[g.l0.color.foregroundDimmest],multiline:!1,children:"Database paused"})]}),(0,r.BX)(Z.xv,{css:[g.l0.fontSize(12),g.l0.color.foregroundDimmest],children:["Databases cost ",ta]}),(0,r.BX)(y.G,{css:[g.l0.colWithGap(8),g.l0.align.center],children:[(0,r.tZ)(kn.Z,{size:32,fill:g.TV.foregroundDimmest,css:g.l0.mt(32)}),(0,r.BX)(Z.xv,{variant:"subheadDefault",css:[g.l0.my(16)],multiline:!1,children:["Your Database is paused. You have ",C," cycles."]}),(0,r.BX)(Z.xv,{children:["Access to your databases will be paused until you"," ",S?"use cycles to resume database":"refill your Cycles balance","."]}),S?(0,r.tZ)(Oe.zx,{css:g.l0.pt(8),iconLeft:(0,r.tZ)(ga.Z,{}),onClick:X,disabled:L,text:"Unpause Database",colorway:"primary"}):null,(0,r.tZ)(Oe.zx,{css:g.l0.pt(8),iconLeft:(0,r.tZ)(rn.Z,{}),onClick:B,text:S?"Buy more cycles":"Buy Cycles"})]}),(0,r.tZ)(va.Z,{noPadding:!0,isOpen:_,maxWidth:ha.W,onRequestClose:function(){return P(!1)},fitContent:!0,replTitle:d,uponPurchaseGoTo:"workspace",context:"workspace_postgresql_pane",initialTab:"cycles"})]}):(0,r.BX)(r.HY,{children:[(0,r.BX)(y.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:[(0,r.tZ)(y.G,{css:[g.l0.width(8),g.l0.height(8),g.l0.backgroundColor.accentPositiveStronger,g.l0.borderRadius("full"),{filter:"drop-shadow(0 0 6px ".concat(g.TV.accentPositiveStronger,")")}]}),(0,r.tZ)(Z.xv,{css:[g.l0.color.accentPositiveStronger],multiline:!1,children:"Database connected"})]}),(0,r.tZ)(pa,{}),(0,r.tZ)(ka,{title:"Database Info",children:(0,r.tZ)(aa,{connectionString:O,onOpenDatabaseViewerClick:h})}),(0,r.tZ)(ka,{title:"Using the database",isAccordion:!0,children:(0,r.tZ)(ba.ZP,{css:[Za.Z,g.l0.maxWidth("100%")],children:"\nPostgreSQL is a powerful open source relational database system that is widely used in web applications and other software development projects. You can easily create a production-ready PostgreSQL database directly within Replit. For more information on PostgreSQL, visit the [official documentation](https://www.postgresql.org/docs/). Repls use PostgreSQL version 15.\n\nHere is some information to help you get started:\n\n1. Replit databases are backed by [Neon](https://neon.tech/). The [Neon documentation](https://neon.tech/docs/connect/connect-from-any-app#connection-examples) provides guides on how to connect various frameworks, such as Django, to your PostgreSQL database.\n\n1. Environment Variables: We provided environment variables `DATABASE_URL`, `PGDATABASE`, `PGHOST`, `PGHOST`, `PGPORT`, `PGUSER`, `PGPASSWORD`. Provide these values to your framework of choice to connect to your database.\n\n1. Connection pooling: If you need to enable connection pooling for any reason, contact us at support@repl.it.\n\n1. Compute lifecycle: Neon databases go to sleep after 5 minutes of inactivity. You may experience disconnects or reconnects depending on your client.\n"})}),(0,r.tZ)(ka,{title:"Environment variables",isAccordion:!0,children:(0,r.tZ)(Mo,{connectionString:O,databaseName:c.databaseName})})]}),(0,r.BX)(y.G,{css:[g.l0.colWithGap(0),g.l0.height("100%"),g.l0.p(8)],children:[(0,r.tZ)(y.G,{css:[g.l0.colWithGap(16),g.l0.flex.grow(1),g.l0.flex.shrink(0)],children:n}),(0,r.tZ)(y.G,{css:[g.l0.pt(16)],children:R||b?(0,r.BX)(K.Tg,{css:[g.l0.p(8),g.l0.colWithGap(8)],elevated:!0,children:[(0,r.tZ)(Z.xv,{children:"Removing this database will remove access to the data for this Repl, and remove the daily Cycles subscription of ".concat(ta,".")}),(0,r.tZ)(He.E,{icon:(0,r.tZ)(ee.Z,{}),colorway:"warning",text:"This action cannot be undone."}),(0,r.tZ)(Oe.zx,{text:"Yes, Remove Database",colorway:"negative",disabled:b,iconLeft:(0,r.tZ)(Y.Z,{}),onClick:T}),(0,r.tZ)(Oe.zx,{text:"Cancel",disabled:b,onClick:G})]}):(0,r.tZ)(Oe.zx,{css:[g.l0.py(8)],text:"Remove Database",disabled:b,iconLeft:(0,r.tZ)(Y.Z,{}),onClick:w})}),(0,r.tZ)(sa,{})]})},Sa=t(69583),Ta=t(93658),Ea=t(32973),Ra="Buy Cycles & Create a DB",Ia="Use Cycles to create a DB",Ga='Press "'.concat(Ra,'" to initiate a daily Cycles subscription and activate a Neon Database. You will be redirected to our payment processor.\n'),Da='Press "'.concat(Ia,'" to initiate a daily Cycles subscription and activate a Neon Database.'),_a=function(e){var n=e.onDatabaseCreated,t=(0,En.Z)(),i=(0,cn.Z)().showError,l=(0,o.Z)(function(e){var n=(0,M.Z)({},di,e);return ai.D(fi,n)}(),2),c=l[0],u=l[1].loading,s=(0,ma.Z)({forceFetch:!0}),d=s.cycles,f=s.loading,p=null!=d&&d>=ea,h=f?"Loading Cycles Balance":p?Ia:Ra,v=p?Da:Ga,m=a.useCallback((0,Ge.Z)((function(){var e,r,o,a,l,u,s,d,f;return(0,_e.__generator)(this,(function(p){switch(p.label){case 0:return[4,c({variables:{input:{replId:t}}})];case 1:return e=p.sent(),r=e.data,(o=e.errors)&&o.length>0?(i("Error when creating Neon database: ".concat(null===o||void 0===o?void 0:o.join())),qi({action:"created",success:!1}),[2]):"CreateNeonDatabaseResult"!==(null===r||void 0===r?void 0:r.createNeonDatabase.__typename)?(i("Error: ".concat(null===r||void 0===r?void 0:r.createNeonDatabase.message)),qi({action:"created",success:!1}),[2]):(a=r.createNeonDatabase,l=a.databaseId,u=a.databaseName,s=a.connectionString,d=a.projectId,f=a.isFrozen,n({__typename:"NeonDatabase",databaseId:l,databaseName:u,connectionString:s,projectId:d,isFrozen:f}),qi({action:"created",success:!0}),[2])}}))})),[c,t,i,n]),b=(0,o.Z)(a.useState(!1),2),w=b[0],x=b[1],k=a.useCallback((0,Ge.Z)((function(){return(0,_e.__generator)(this,(function(e){return x(!0),[2]}))})),[]),C=a.useCallback((0,Ge.Z)((function(){return(0,_e.__generator)(this,(function(e){return x(!1),[2]}))})),[]),S=a.useCallback((0,Ge.Z)((function(){return(0,_e.__generator)(this,(function(e){switch(e.label){case 0:return[4,m()];case 1:return e.sent(),x(!1),[2]}}))})),[m]);return(0,r.BX)(y.G,{css:[g.l0.colWithGap(0),g.l0.height("100%"),g.l0.align.center,g.l0.p(8)],children:[(0,r.BX)(y.G,{css:[g.l0.colWithGap(16),g.l0.flex.grow(1),g.l0.flex.shrink(0),g.l0.maxWidth(600)],children:[(0,r.BX)(y.G,{css:[g.l0.colWithGap(8),g.l0.align.center],children:[(0,r.tZ)(y.G,{css:[g.l0.p(16)],children:(0,r.tZ)(dn.Z,{src:"/public/images/db_illustration.png",width:"144px",height:"144px",alt:"FPO visual"})}),(0,r.tZ)(Z.xv,{css:[g.l0.fontSize(16),g.l0.fontWeight.bold],multiline:!1,children:"Fully-managed PostgreSQL database"}),(0,r.tZ)(Z.xv,{css:[g.l0.fontSize(14)],multiline:!1,children:"10GB of fast read/write storage"}),(0,r.BX)(y.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:[(0,r.tZ)(Z.xv,{css:[g.l0.fontSize(14)],multiline:!1,children:ta}),(0,r.tZ)(se.h,{alt:v,size:24,children:(0,r.tZ)(Ta.Z,{})})]})]}),(0,r.BX)(K.Tg,{css:[g.l0.colWithGap(8),g.l0.mb(8)],background:"default",children:[(0,r.tZ)(Oe.zx,{text:h,colorway:"primary",iconLeft:(0,r.tZ)(mr.Z,{}),disabled:f||u,onClick:k}),(0,r.tZ)(on.Z,{outlined:!0,href:ra,target:"_blank",text:"Learn More",iconRight:(0,r.tZ)(Ea.Z,{})})]}),(0,r.tZ)("hr",{css:[g.l0.my(16),{borderColor:g.TV.outlineDefault}]}),(0,r.tZ)(Z.xv,{css:[g.l0.fontSize(12),g.l0.color.foregroundDimmest],children:v}),(0,r.tZ)(Sa.Z,{isOpen:w,onRequestClose:C,onRequestPowerUp:S,uponPurchaseGoTo:"workspace",context:"workspace_postgresql_pane",powerUp:"neon-database-preview"})]}),(0,r.tZ)(sa,{})]})},Pa=function(){var e=(0,En.Z)(),n=(0,cn.Z)().showError,t=(0,d.Z)().psql,i=(0,o.Z)(a.useState([]),2),l=i[0],c=i[1],u=function(e){var n=(0,M.Z)({},di,e);return $r.a(hi,n)}({variables:{input:{replId:e}},fetchPolicy:"no-cache",onCompleted:function(e){"GetNeonDatabasesResult"!==e.getNeonDatabases.__typename?n("Error: ".concat(e.getNeonDatabases.message)):c(e.getNeonDatabases.databases)}}),s=u.loading,f=u.refetch,p=No(),h=a.useCallback(function(){var e=(0,Ge.Z)((function(e){var r,i,o;return(0,_e.__generator)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),c([e]),[4,t.ensureNixPsqlPackageInstalled(!0)];case 1:return a.sent(),r=e.connectionString,i=e.databaseName,p({connectionString:r,databaseName:i}),[3,3];case 2:return o=a.sent(),n("Error: ".concat(o.message)),[3,3];case 3:return[2]}}))}));return function(n){return e.apply(this,arguments)}}(),[t,p,n]),v=(0,_n.Dv)(wa);return v?(0,r.tZ)(Ca,{neonDatabases:[v],onDatabaseDeleted:f,onDatabaseUnfreezed:f}):s?(0,r.tZ)(y.G,{css:[g.l0.flex.row,g.l0.justify.center,g.l0.p(32)],children:(0,r.tZ)(Je.Z,{})}):l.length?(0,r.tZ)(Ca,{neonDatabases:l,onDatabaseDeleted:f,onDatabaseUnfreezed:f}):(0,r.tZ)(_a,{onDatabaseCreated:h})},Ba=t(78707),Aa={Content:function(){return(0,r.tZ)(Pa,{})},Icon:function(e){var n=e.size;return(0,r.tZ)(Ba.Z,{size:n})},getTitle:function(){return"PostgreSQL"}},Ua=t(23807),La=t(78728),Xa=t(79686),Na={Content:function(){return(0,r.tZ)(Ma,{})},Icon:function(e){var n=e.size;return(0,r.tZ)(La.Z,{size:n})},getTitle:function(){return"Output"}};function Ma(){var e=(0,d.Z)(),n=e.fs,t=e.container;return(0,r.tZ)(y.G,{css:[g.l0.flex.growAndShrink(1)],children:(0,r.tZ)(Xa.Z,{fs:n,container:t})})}var Fa=t(27495),Oa=t(10671),Wa={Content:function(e){var n,t=e.pane;return(0,r.tZ)(Ha,{initialPwd:null===(n=t.data)||void 0===n?void 0:n.initialPwd})},Icon:function(e){var n=e.size;return(0,r.tZ)(Oa.Z,{size:n})},getTitle:function(){return"Shell"}};function Ha(e){var n=e.initialPwd,t=(0,d.Z)().container,i=(0,o.Z)(a.useState(!1),2),l=i[0],c=i[1],u=(0,o.Z)((0,Fa.St)({container:t,initialPwd:n,onOutput:(0,a.useCallback)((function(){c(!0)}),[c])}),3),s=u[0],f=u[1],p=u[2];return(0,S.Wk)((function(){return s}),[s]),(0,S.L5)((function(){if(s&&l)return{type:"shell",exec:function(e){p(e+"\n")}}}),[s,p,l]),(0,r.tZ)(Fa.N2,{shell:s,shellRef:f})}var Va=t(86763),za=t.n(Va),ja=t(28737);function qa(){var e=(0,jr.Z)(["\n  query WorkspaceDrawCurrentUser {\n    currentUser {\n      id\n      username\n    }\n  }\n"]);return qa=function(){return e},e}function $a(){var e=(0,jr.Z)(["\n  mutation sawDrawCtaToursSeen($name: String!) {\n    toursSeen(name: $name) {\n      name\n      success\n    }\n  }\n"]);return $a=function(){return e},e}var Ya={},Ka=(0,qr.Ps)(qa());$a();var Qa=t(24746),Ja=t(84630),el=function(e,n,t){var r;if(!e)return[];var i=n(e.getSceneElementsIncludingDeleted()),o=e.getAppState();return(r=t.reduce((function(e,n){var t,r,a;return n.id===(null===(t=o.editingElement)||void 0===t?void 0:t.id)||n.id===(null===(r=o.resizingElement)||void 0===r?void 0:r.id)||n.id===(null===(a=o.draggingElement)||void 0===a?void 0:a.id)||(i[n.id]&&i[n.id].version>n.version?(e.push(i[n.id]),delete i[n.id]):i[n.id]&&i[n.id].version===n.version&&i[n.id].versionNonce!==n.versionNonce?(i[n.id].versionNonce<n.versionNonce?e.push(i[n.id]):e.push(n),delete i[n.id]):(e.push(n),delete i[n.id])),e}),[])).concat.apply(r,(0,Zi.Z)(Object.values(i)))},nl=function(){var e,n,t=new Promise((function(t,r){e=t,n=r}));return t.resolve=e,t.reject=n,t},tl=function(e){return e.reduce((function(e,n){return e[n.id]=n,e}),{})},rl=t(92674),il=t.n(rl);function ol(e){var n,i=e.fs,l=e.presence,c=e.broadcast,u=e.filePath,s=(0,a.useState)(void 0),d=s[0],f=s[1],p=(0,a.useRef)((function(e){return(0,Zi.Z)(e)})),h=(0,a.useRef)((function(e){return-1})),v=(0,a.useRef)({readyPromise:nl()}),m=(0,a.useRef)({promise:null});(0,a.useEffect)((function(){Promise.all([t.e(6655),t.e(3668)]).then(t.t.bind(t,63668,23)).then((function(e){p.current=function(n){return n.filter((function(n){return n.isDeleted||!e.isInvisiblySmallElement(n)}))},h.current=e.getSceneVersion,f(e.Excalidraw)}))}),[]);var Z=function(){return v.current},b=function(e){var n=(0,M.Z)({},Ya,e);return $r.a(Ka,n)}({ssr:!1}),w=b.data,x=b.loading,k=(null===w||void 0===w||null===(n=w.currentUser)||void 0===n?void 0:n.username)||"",C=(0,ja.F)().isDarkColorScheme,S=(0,Qa.Z)({presence:l}),T=(0,Ja.Z)(),E=null===T||void 0===T?void 0:T.color,R=(0,a.useState)(new Map),I=R[0],G=R[1],D=(0,a.useState)(-1),_=D[0],P=D[1],B=(0,a.useRef)(il()()).current;(0,a.useEffect)((function(){function e(){return e=(0,Ge.Z)((function(){var e,n;return(0,_e.__generator)(this,(function(t){switch(t.label){case 0:return w&&w.currentUser?[4,v.current.readyPromise]:[2];case 1:return t.sent(),e=Z().getAppState().collaborators,n=new Map,S.forEach((function(t){var r;if(t.username!==(null===w||void 0===w||null===(r=w.currentUser)||void 0===r?void 0:r.username)){var i=e.get(t.username)||{};n.set(t.username,(0,De.Z)((0,M.Z)({},i),{username:t.username,color:{background:t.color,foreground:t.color}}))}})),Z().updateScene({collaborators:n}),[2]}}))})),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[w,S]);var A=function(){var e=(0,Ge.Z)((function(e,n){var t,r,i,o,a,l;return(0,_e.__generator)(this,(function(s){n||(e=e.filter((function(e){return!I.has(e.id)||e.version>I.get(e.id)}))),t=!0,r=!1,i=void 0;try{for(o=e[Symbol.iterator]();!(t=(a=o.next()).done);t=!0)l=a.value,I.set(l.id,l.version),G(new Map(I))}catch(d){r=!0,i=d}finally{try{t||null==o.return||o.return()}finally{if(r)throw i}}return c.broadcastMessage(B,{text:JSON.stringify({elements:e,path:u})}),[2]}))}));return function(n,t){return e.apply(this,arguments)}}();(0,a.useEffect)((function(){if(c)return c.onBroadcastReceived(B,(function(e){var n=e.username,t=e.text,r=JSON.parse(t);if(r.path===u)if(r.collaborator&&v.current){var i=Z().getAppState().collaborators;i.set(n,(0,De.Z)((0,M.Z)({},i.get(n),r.collaborator),{username:n})),Z().updateScene({collaborators:i})}else if(r.elements){var o=el(Z(),tl,r.elements);P(h.current(o)),Z().updateScene({elements:o})}else if(r.removePresence){var a=Z().getAppState().collaborators;a.delete(r.removePresence),Z().updateScene({collaborators:a})}}))}),[c,u,B]),(0,a.useEffect)((function(){function e(){return e=(0,Ge.Z)((function(){return(0,_e.__generator)(this,(function(e){return u&&i?(m.current.promise=new Promise(function(){var e=(0,Ge.Z)((function(e){var n,t,r,a,l;return(0,_e.__generator)(this,(function(c){switch(c.label){case 0:return[4,Promise.all([i.readFile(u),v.current.readyPromise])];case 1:return n=o.Z.apply(void 0,[c.sent(),1]),"content"in(t=n[0])&&(r=t.content.toString(),a=JSON.parse(r||"{}"),l=Z().getAppState(),a.appState=(0,M.Z)({},l),a.scrollToContent=!0,e(a)),[2]}}))}));return function(n){return e.apply(this,arguments)}}()),[2]):[2]}))})),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[u,i]);var U=(0,a.useCallback)(za()(function(){var e=(0,Ge.Z)((function(e,n){var t;return(0,_e.__generator)(this,(function(r){switch(r.label){case 0:return t=e.filter((function(e){return!e.isDeleted})),u?[4,i.writeFile(u,Ro.Z.from(JSON.stringify({elements:t,files:n})))]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}));return function(n,t){return e.apply(this,arguments)}}(),350),[u]);return(0,r.tZ)(y.G,{css:{position:"relative",height:"100%",width:"100%",flex:1,boxShadow:E?"0 3px 0 3px ".concat(E):"none",backgroundColor:g.TV.backgroundDefault,"& .excalidraw [title~=Library]":{display:"none"}},onMouseLeave:function(){c.broadcastMessage(B,{text:JSON.stringify({removePresence:k,path:u})})},children:d&&!x?(0,r.tZ)(d,{ref:v,UIOptions:{canvasActions:{loadScene:!1}},isCollaborating:!0,theme:C?"dark":"light",initialData:m.current.promise,onPointerUpdate:function(e){var n=e.pointer,t=Z().getAppState().selectedElementIds||{};c.broadcastMessage(B,{text:JSON.stringify({collaborator:{pointer:n,selectedElementIds:t},path:u})})},onChange:function(e,n,t){!function(e){h.current(e)>_&&(_>-1&&A(p.current(e),!1),P(h.current(e)))}(e),P(h.current(e)),h.current(e)>_&&U(e,t)},user:{name:k}}):null})}function al(e){var n=e.fs,t=e.presence,i=e.broadcast,o=e.filePath;return(0,r.tZ)(ol,{fs:n,presence:t,broadcast:i,filePath:o},o)}var ll=t(3947),cl={Content:function(e){var n=e.pane,t=e.options.performPaneOperation;return(0,r.tZ)(ul,{path:n.data.path,performPaneOperation:t})},Icon:function(e){var n=e.size;return(0,r.tZ)(ll.Z,{size:n})},getTitle:function(e){return(0,v.UO)(e.data.path)}};function ul(e){var n=e.path,t=e.performPaneOperation,i=(0,d.Z)(),o=i.fs,a=i.broadcast,l=i.presence,c=(0,mt.Mp)({path:n,performPaneOperation:t});return(0,S.L5)((function(){if(c)return{commands:c}}),[c]),(0,r.BX)(r.HY,{children:[(0,r.tZ)(mt.HK,{path:n,performPaneOperation:t}),(0,r.tZ)(mt.VY,{children:(0,r.tZ)(al,{fs:o,broadcast:a,presence:l,filePath:n})})]})}var sl=t(18196),dl=t(83005),fl={Content:function(e){var n=e.pane,t=e.options;return(0,r.tZ)(pl,{path:n.data.path,performPaneOperation:t.performPaneOperation})},Icon:function(e){var n=e.pane,t=e.size;return(0,r.tZ)(dl.Z,{path:n.data.path,size:t})},getTitle:function(e){return(0,v.UO)(e.data.path)}};function pl(e){var n=e.path,t=e.performPaneOperation,i=(0,d.Z)().fs,o=(0,mt.Mp)({path:n,performPaneOperation:t}),a=o?(0,Zi.Z)(o):[],l={match:T.pl,data:{label:"Open in Editor",icon:(0,r.tZ)(E.Z,{}),type:"action",run:function(){t({operation:"replace",pane:{type:"codeEditor",data:{path:n}}})}}};return(0,v.B4)(n)&&a.push(l),(0,S.L5)((function(){if(o)return{commands:a}}),[o]),(0,r.BX)(r.HY,{children:[(0,r.tZ)(mt.HK,{path:n,performPaneOperation:t}),(0,r.tZ)(mt.VY,{centered:!0,children:(0,r.tZ)(sl.Z,{filePath:n,fs:i})})]})}var hl=t(84607),vl=t(12404),ml=t(85281),gl=t(38567),yl=t(70232),Zl=t(73377),bl=t(81962),wl=t(73299),xl=t(63181);function kl(e){return!!e&&("string"===typeof e?e.includes(xl.Kd):e.fetch.includes(xl.Kd))}function Cl(e){return e.endsWith(".git")?e.slice(0,-4):e}function Sl(e){if(!e)return null;var n="string"===typeof e?e:e.fetch;return kl(n)?Cl(n):null}function Tl(){var e=(0,gl.Z)(function(){var e=(0,Ge.Z)((function(e){return(0,_e.__generator)(this,(function(n){return[2,{connectedToGithub:El(e),error:null}]}))}));return function(n){return e.apply(this,arguments)}}());return null==e||e.error?null:e.connectedToGithub}function El(e){return e.hasProfile(Zl.rG.GITHUB)}var Rl=t(33105),Il=t(89562),Gl=t(9353);function Dl(e,n){(0,Le.j)(Gl.U3.GIT_FEATURE_USED,(0,M.Z)({action:e,source:"git-pane"},n))}function _l(e){var n=e.label,t=void 0===n?"Connect to GitHub":n,i=e.allowReconnect,o=void 0!==i&&i,l=e.callback,c=(0,a.useState)(!1),u=c[0],s=c[1],f=(0,d.Z)().git,p=Tl(),h=(0,Rl.v)({onAuth:function(){Dl("github-user-connected"),s(!1),f.refreshProfiles({preferredProvider:Zl.rG.GITHUB}),null===l||void 0===l||l()}});return p&&!o?(0,r.tZ)(Oe.zx,{text:"Connected to GitHub",colorway:"primary",iconLeft:(0,r.tZ)(ne.Z,{}),disabled:!0}):(0,r.tZ)(Oe.zx,{text:u||null===p?"Connecting...":t,colorway:"primary",iconLeft:u?(0,r.tZ)(Je.Z,{}):(0,r.tZ)(Il.Z,{}),loading:u,onClick:function(){s(!0),h()}})}var Pl=(0,Qn.iv)(g.l0.p(4),g.l0.colWithGap(8),g.l0.borderRadius(0,0,8,8)),Bl=(0,Qn.iv)(g.l0.rowWithGap(8),g.l0.align.center,g.l0.justify.end);function Al(e){var n=e.description,t=e.remedies,i=e.error;return(0,r.BX)(K.Tg,{css:Pl,elevated:!0,children:[(0,r.tZ)(Z.xv,{children:n}),(0,r.BX)(y.G,{css:Bl,children:[t,(0,r.tZ)(Oe.zx,{text:"Dismiss",iconLeft:(0,r.tZ)(nt.Z,{}),onClick:i.dismiss})]})]})}function Ul(e){switch(e.type){case Zl.aq.UNKNOWN_NOT_GIT:return"Unknown Error";case Zl.aq.UNKNOWN:return"Unknown Git Error";case Zl.aq.NOT_INITIALIZED:case Zl.aq.UNAUTHENTICATED:case Zl.aq.INDEX_FILE_CORRUPT:case Zl.aq.UNKNOWN_REMOTE:case Zl.aq.INDEX_LOCKED:case Zl.aq.NO_COMMITS:case Zl.aq.PATH_MATCHED_NO_FILES:case Zl.aq.USER_NOT_CONFIGURED:case Zl.aq.INVALID_REFERENCE:case Zl.aq.BRANCH_ALREADY_EXISTS:case Zl.aq.MERGE_CONFLICT:case Zl.aq.HEAD_DETACHED:case Zl.aq.DIRTY_WORKTREE:case Zl.aq.PUSH_REJECTED:case Zl.aq.REMOTE_ALREADY_EXISTS:case Zl.aq.ALREADY_INITIALIZED:case Zl.aq.TIMEOUT:return"Git Error";default:return"Unknown Error"}}function Ll(e){var n=e.error,t=(0,gl.Z)(function(){var e=(0,Ge.Z)((function(e){var t,i,o,a,l,c,u,s,d;return(0,_e.__generator)(this,(function(f){switch(f.label){case 0:switch(n.type){case Zl.aq.UNKNOWN_NOT_GIT:return[3,1];case Zl.aq.UNKNOWN:return[3,2];case Zl.aq.CHANNEL_CLOSED:return[3,3];case Zl.aq.NOT_INITIALIZED:return[3,4];case Zl.aq.UNAUTHENTICATED:return[3,5];case Zl.aq.INDEX_FILE_CORRUPT:return[3,7];case Zl.aq.UNKNOWN_REMOTE:return[3,8];case Zl.aq.INDEX_LOCKED:return[3,9];case Zl.aq.NO_COMMITS:return[3,10];case Zl.aq.PATH_MATCHED_NO_FILES:return[3,11];case Zl.aq.USER_NOT_CONFIGURED:return[3,12];case Zl.aq.INVALID_REFERENCE:return[3,13];case Zl.aq.BRANCH_ALREADY_EXISTS:return[3,14];case Zl.aq.MERGE_CONFLICT:return[3,15];case Zl.aq.UPSTREAM_NOT_SET:return[3,16];case Zl.aq.HEAD_DETACHED:return[3,17];case Zl.aq.DIRTY_WORKTREE:return[3,18];case Zl.aq.PUSH_REJECTED:return[3,19];case Zl.aq.REMOTE_ALREADY_EXISTS:return[3,20];case Zl.aq.TIMEOUT:return[3,21];case Zl.aq.ALREADY_INITIALIZED:return[3,22]}return[3,23];case 1:return t="Unknown error from the Git service. This is probably a bug in the app.",i=null,[3,24];case 2:return t="There was an unrecognized fatal error with Git. This is probably a bug in the app.",i=null,[3,24];case 3:return t="The command was interrupted. Please try again.",i=null,[3,24];case 4:return t="There isn't a Git repository in the Repl's root directory.",i=null,[3,24];case 5:return[4,e.getRemotes()];case 6:if((o=f.sent()).error)return[2,o];if(0!==o.remotes.size){a=!1,l=!0,c=!1,u=void 0;try{for(s=o.remotes.values()[Symbol.iterator]();!(l=(d=s.next()).done);l=!0)if(kl(d.value)){a=!0;break}}catch(p){c=!0,u=p}finally{try{l||null==s.return||s.return()}finally{if(c)throw u}}if(a)return El(e)?(t="Failed to authenticate with the remote. Please ensure that Replit has access to this repository on GitHub.",i=(0,r.tZ)(_l,{label:"Update GitHub Repository Access",callback:n.dismiss,allowReconnect:!0}),[3,24]):(t="Failed to authenticate with the remote. You have not connected your Replit account to GitHub, so Replit may not have access to the remote repository. Please connect your account to GitHub and try again.",i=(0,r.tZ)(_l,{label:"Connect to GitHub",callback:n.dismiss,allowReconnect:!0}),[3,24])}return t="Failed to authenticate with the remote.",i=null,[3,24];case 7:return t="The Git index file is corrupt. This can happen if the index file is manually edited, or if the Git repository is corrupted.",i=null,[3,24];case 8:return t="The remote specified isn't configured.",i=null,[3,24];case 9:return t="Git tried to perform an action but the index lockfile still exists. This means Git either crashed previously or is still running an action.",i=null,[3,24];case 10:return t="There are no commits in the repository.",i=null,[3,24];case 11:return t="The path specified didn't match any files.",i=null,[3,24];case 12:return t="There isn't any user information configured for Git.",i=null,[3,24];case 13:return t="An unknown/invalid reference was specified. This is usually a branch, but it could be something else, such as a tag.",i=null,[3,24];case 14:return t="The branch specified already exists.",i=null,[3,24];case 15:return t="There was an unexpected merge conflict.",i=null,[3,24];case 16:return t="The upstream branch isn't set.",i=null,[3,24];case 17:return t="The HEAD is detached. You have a commit checked out, not a branch.",i=null,[3,24];case 18:return t="There are uncommitted changes.",i=null,[3,24];case 19:return t="The push was rejected by the remote. This is usually because the remote has commits that aren't in the local repository.",i=null,[3,24];case 20:return t="The remote specified already exists.",i=null,[3,24];case 21:return t="The remote operation timed out.",i=null,[3,24];case 22:return t="There is already a Git repository in the Repl's root directory.",i=null,[3,24];case 23:return t="We ran into an unknown error that we don't have a description for. This is probably a bug with the app.",i=null,[3,24];case 24:return[2,{description:t,remedies:i,error:null}]}}))}));return function(n){return e.apply(this,arguments)}}(),[n],{refresh:!1});if(!t)return(0,r.tZ)(Al,{description:null,remedies:null,error:n});if(t.error){return(0,r.tZ)(Al,{description:"Unknown error from the Git service. This is probably a bug in the app.",remedies:null,error:n})}var i=t.description,o=t.remedies;return(0,r.tZ)(Al,{description:i,remedies:o,error:n})}var Xl=(0,Qn.iv)({pointerEvents:"all"},g.l0.p(1),g.l0.backgroundColor.accentNegativeDimmer,g.l0.borderRadius(8),g.l0.shadow(3)),Nl=(0,Qn.iv)(g.l0.py(4),g.l0.px(8),g.l0.display.flex,g.l0.flex.row,g.l0.align.center,g.l0.justify.spaceBetween,g.l0.color.accentNegativeStrongest),Ml=(0,Qn.iv)(g.l0.rowWithGap(4),g.l0.align.center),Fl=(0,Qn.iv)({opacity:.75},g.l0.font.code),Ol=(0,Qn.iv)(g.l0.pt(4),g.l0.pb(8),g.l0.px(8),g.l0.colWithGap(8),g.l0.backgroundColor.backgroundHigher,g.l0.borderRadius(0,0,8,8));function Wl(e){var n=e.error;return(0,r.BX)(y.G,{css:Xl,children:[(0,r.BX)(y.G,{css:Nl,children:[(0,r.BX)(y.G,{css:Ml,children:[(0,r.tZ)(ee.Z,{}),(0,r.tZ)(Z.xv,{variant:"subheadDefault",multiline:!1,children:Ul(n)})]}),(0,r.tZ)(Z.xv,{css:Fl,multiline:!1,children:n.type})]}),(0,r.tZ)(y.G,{css:Ol,children:(0,r.tZ)(Ll,{error:n})})]})}var Hl=(0,a.createContext)(null);function Vl(){var e=(0,a.useContext)(Hl);if(!e)throw new Error("Expected store in context");return e}var zl=(0,zn.cn)([]),jl=(0,zn.cn)((function(e){return e(zl)}),(function(e,n,t){var r=e(zl),i=Math.random().toString(36).substring(7),o={id:i,type:t,dismiss:function(){var t=e(zl).filter((function(e){return e.id!==i}));n(zl,t)}};n(zl,[o].concat((0,Zi.Z)(r)))}));function ql(){return(0,_n.b9)(jl,{store:Vl()})}var $l=(0,Qn.iv)({pointerEvents:"none"},{transition:"background-color 100ms"},g.l0.position.absolute,g.l0.top(0),g.l0.bottom(0),g.l0.left(0),g.l0.right(0),g.l0.p(8),g.l0.colWithGap(16),g.l0.zIndex(10));function Yl(){var e=(0,_n.Dv)(jl,{store:Vl()});return(0,r.tZ)(y.G,{style:{backgroundColor:e.length>0?"rgba(0, 0, 0, 0.25)":"transparent"},css:$l,children:e.map((function(e){return(0,r.tZ)(Wl,{error:e},e.id)}))})}var Kl=t(9327),Ql=t(45851),Jl=t(12260),ec=t(33814);function nc(){var e=(0,a.useState)(!1),n=e[0],t=e[1],i=(0,d.Z)().git,o=function(){var e=(0,a.useState)(!1),n=e[0],t=e[1],r=(0,d.Z)().git;return(0,a.useEffect)((function(){return r.onBusyChange(t)}),[r]),n}(),l=ql(),c=(0,gl.Z)(function(){var e=(0,Ge.Z)((function(e){var n;return(0,_e.__generator)(this,(function(t){switch(t.label){case 0:return[4,e.getRemotes()];case 1:return(n=t.sent()).error?(l(n.error),[2,n]):[2,{hasRemotes:n.remotes.size>0,error:null}]}}))}));return function(n){return e.apply(this,arguments)}}(),[l]);if(null===c||void 0===c?void 0:c.error)return null;var u=!!c&&c.hasRemotes,s=o||n||null===c;function f(){return(f=(0,Ge.Z)((function(){var e;return(0,_e.__generator)(this,(function(n){switch(n.label){case 0:return i.isBusy()||s?[2]:(t(!0),u?[4,i.fetch()]:[3,2]);case 1:(e=n.sent()).error?l(e.error):Dl("remote-fetched"),n.label=2;case 2:return[4,i.refreshProfiles()];case 3:return n.sent(),i.forceRefresh(),setTimeout((function(){return t(!1)}),500),[2]}}))}))).apply(this,arguments)}var p=u?"Refresh and Fetch":"Refresh";return(0,r.tZ)(se.h,{alt:p,size:24,onClick:function(){return f.apply(this,arguments)},disabled:s,children:s?(0,r.tZ)(Je.Z,{}):(0,r.tZ)(Vo.Z,{})})}var tc,rc=t(24478);!function(e){e.SUCCESS="SUCCESS",e.WARNING="WARNING",e.FAILED="FAILED",e.OFF="OFF"}(tc||(tc={}));var ic=(0,b.X)({root:[g.l0.rowWithGap(8),g.l0.align.center,g.l0.py(4)],circle:[g.l0.width(8),g.l0.height(8),g.l0.borderRadius("full")]});var oc=function(e){var n,t,i,o=e.display,a=void 0===o?"inline":o,l=(0,F.Z)(e,["display"]);switch(l.status){case tc.SUCCESS:n=g.TV.accentPositiveStronger,t=g.TV.accentPositiveStronger;break;case tc.WARNING:n=g.TV.yellowStronger,t=g.TV.yellowStronger;break;case tc.FAILED:n=g.TV.accentNegativeStronger,t=g.TV.accentNegativeStronger;break;case tc.OFF:n=g.TV.greyStronger,t=g.TV.greyStronger}var c=(0,r.BX)(y.G,{onClick:null!==(i=l.onClick)&&void 0!==i?i:function(){},css:[ic.root,l.onClick?{cursor:"pointer"}:{}],children:[(0,r.tZ)("div",{css:ic.circle,style:{backgroundColor:n,boxShadow:"0px 0px 6px ".concat(t)}}),"inline"===a?(0,r.tZ)(Z.xv,{color:"dimmer",multiline:!1,children:l.content}):null]});return"tooltip"===a&&(c=(0,r.tZ)(te.u,{tooltip:l.content,children:c})),c},ac=(0,Qn.iv)(g.l0.color.orangeStronger,g.l0.fontWeight.medium);function lc(e){var n=e.text,t=e.className;return(0,r.tZ)("span",{className:t,css:ac,children:n})}var cc=(0,Qn.iv)(g.l0.color.purpleStronger,g.l0.fontWeight.medium);function uc(e){var n=e.text,t=e.className;return(0,r.tZ)("span",{className:t,css:cc,children:n})}var sc=(0,Qn.iv)(g.l0.fontWeight.medium);function dc(e){var n,t=e.id,i=e.hash,o=void 0===i||i,a=e.className;return n=o?"string"===typeof t&&t.startsWith("#")?t:"#".concat(t):"string"===typeof t&&t.startsWith("#")?t.slice(1):"".concat(t),(0,r.tZ)("span",{className:a,css:sc,children:n})}var fc=(0,Qn.iv)(g.l0.fontWeight.medium);function pc(e){var n=e.hash,t=e.length,i=void 0===t?8:t,o=e.className;return(0,r.tZ)("span",{className:o,css:fc,children:n.slice(0,i+1)})}function hc(e){var n=e.subject,t=e.quoted,i=void 0!==t&&t,o=e.className;return(0,r.tZ)("span",{className:o,children:i?'"'.concat(n,'"'):n})}var vc=(0,Qn.iv)({whiteSpace:"pre-wrap"},{fontSize:g.TV.fontSizeSmall},g.l0.font.code);function mc(e){var n=e.body,t=e.className;return(0,r.tZ)("pre",{className:t,css:vc,children:n})}var gc=(0,b.X)({headingWrapper:[g.l0.display.inlineFlex,g.l0.rowWithGap(4),g.l0.align.center,g.l0.flex.shrink(1),g.l0.overflow("hidden")],headingRemote:[{verticalAlign:"text-bottom"},g.l0.mr(4),g.l0.color.foregroundDimmest],headingCurrent:[g.l0.px(4)],text:[g.l0.fontWeight.medium],remote:[{verticalAlign:"text-bottom"},{fontSize:g.TV.fontSizeSmall},g.l0.mr(4),g.l0.color.foregroundDimmest],current:[g.l0.position.relative,g.l0.top("-1px"),g.l0.display.inlineFlex,g.l0.pl(2),g.l0.pr(8)],icon:[{verticalAlign:"baseline !important"},g.l0.mr(4)]});function yc(e){var n=e.name,t=e.remote,i=e.current,o=void 0!==i&&i,a=e.heading,l=void 0!==a&&a,c=e.icon,u=void 0!==c&&c,s=e.onClick,d=e.className,f=null;return!0===u||!u&&o?f=o?(0,r.tZ)("span",{css:l?gc.headingCurrent:gc.current,children:(0,r.tZ)(oc,{display:"tooltip",content:"This is your current branch.",status:tc.SUCCESS})}):l?(0,r.tZ)(rc.Z,{size:16}):(0,r.tZ)(rc.Z,{css:gc.icon,size:12}):u&&(f=u),l?(0,r.BX)("div",{css:gc.headingWrapper,children:[f,(0,r.BX)(Z.xv,{variant:"subheadDefault",multiline:!1,children:[t?(0,r.BX)(r.HY,{children:[(0,r.tZ)("span",{css:gc.headingRemote,children:t}),(0,r.tZ)("span",{css:gc.headingRemote,children:"/"})]}):null,s?(0,r.tZ)(Tc,{label:"View branch",onClick:s,children:n}):(0,r.tZ)("span",{children:n})]})]}):(0,r.BX)("span",{className:d,css:gc.text,children:[f,t?(0,r.tZ)("span",{css:gc.remote,children:t}):null,s?(0,r.tZ)(Tc,{label:"View branch",onClick:s,children:n}):(0,r.tZ)("span",{children:n})]})}var Zc=(0,Qn.iv)(g.l0.color.foregroundDimmest),bc=(0,Qn.iv)({"& > span":{display:"inline-block"}});function wc(e){var n=e.path,t=e.prefix,i=e.onClick,o=e.className,a=(0,v.UO)(n),l=!i&&(a===n||null!==t&&t+a===n);return(0,r.tZ)("span",{css:bc,children:(0,r.tZ)(te.u,{maxWidth:"auto",tooltip:(0,r.tZ)(kc,{path:n,openable:Boolean(i)}),isDisabled:l,children:i?(0,r.BX)(Tc,{label:"Open ".concat(a),onClick:i,className:o,children:[t?(0,r.tZ)("span",{css:Zc,children:t}):null,(0,r.tZ)("span",{children:a})]}):(0,r.BX)("span",{className:o,children:[t?(0,r.tZ)("span",{css:Zc,children:t}):null,(0,r.tZ)("span",{children:a})]})})})}var xc=(0,b.X)({tooltip:[g.l0.display.inlineFlex,g.l0.rowWithGap(4),g.l0.align.center],path:[{fontSize:g.TV.fontSizeSmall},g.l0.font.code]});function kc(e){var n=e.path,t=e.openable,i=void 0===t||t;return(0,r.BX)("span",{css:xc.tooltip,children:[i?(0,r.tZ)("span",{children:"Open"}):null,(0,r.tZ)("span",{css:xc.path,children:n})]})}var Cc,Sc=(0,Qn.iv)({cursor:"pointer","&:hover":{textDecoration:"underline"}});function Tc(e){var n=e.label,t=e.onClick,i=e.className,o=e.children;return(0,r.tZ)("span",{className:i,css:Sc,role:"button",tabIndex:-1,"aria-label":n,onClick:t,onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||null===t||void 0===t||t()},children:o})}!function(e){e.DASHBOARD="DASHBOARD",e.BRANCH="BRANCH",e.CURRENT_BRANCH="CURRENT_BRANCH",e.SETTINGS="SETTINGS"}(Cc||(Cc={}));var Ec=(0,b.X)({container:[g.l0.height(36),g.l0.px(8),g.l0.py(4),g.l0.rowWithGap(8),g.l0.backgroundColor.backgroundDefault,g.l0.align.center,g.l0.justify.spaceBetween,g.l0.zIndex(1),{borderBottom:"1px solid ".concat(g.TV.outlineDimmer)}],left:[g.l0.rowWithGap(4),g.l0.align.center,g.l0.flex.growAndShrink(1)],right:[g.l0.rowWithGap(8),g.l0.align.center],back:{marginLeft:-4}});function Rc(e){var n=e.mode,t=e.branch,i=e.switchMode,o=e.onBack,l=e.onSearchOpen,c=e.onSearchClose,u=e.onSearchChange,s=(0,a.useState)(!1),d=s[0],f=s[1],p=function(){return i({mode:Cc.SETTINGS})},h=n===Cc.DASHBOARD||n===Cc.BRANCH||n===Cc.CURRENT_BRANCH,v=(0,a.useCallback)((function(){if(!h)throw new Error("Cannot open search in this mode");Dl("search-started",{mode:n===Cc.DASHBOARD?"branches":"commits"}),f(!0),null===l||void 0===l||l()}),[h,n,l]),m=(0,a.useCallback)((function(){f(!1),null===c||void 0===c||c()}),[c]),g=null,b=null;if(d)g=(0,r.tZ)(Bc,{mode:n,onSearchChange:u,closeSearch:m}),b=(0,r.tZ)(Pc,{closeSearch:m});else switch(n){case Cc.DASHBOARD:g=(0,r.BX)(r.HY,{children:[(0,r.tZ)(Ql.Z,{size:16}),(0,r.tZ)(Z.xv,{variant:"subheadDefault",multiline:!1,children:"Repository"})]}),b=(0,r.BX)(r.HY,{children:[(0,r.tZ)(_c,{openSettings:p}),(0,r.tZ)(Dc,{openSearch:v}),(0,r.tZ)(nc,{})]});break;case Cc.BRANCH:case Cc.CURRENT_BRANCH:if(null===t)throw new Error("Tried to show branch in header, but branch is null");g=(0,r.BX)(r.HY,{children:[(0,r.tZ)(Gc,{switchMode:i}),(0,r.tZ)(yc,{name:t.name,remote:t.type===ml.HO.REMOTE?t.remote:null,current:n===Cc.CURRENT_BRANCH,heading:!0})]}),b=(0,r.BX)(r.HY,{children:[(0,r.tZ)(_c,{openSettings:p}),(0,r.tZ)(Dc,{openSearch:v}),(0,r.tZ)(nc,{})]});break;case Cc.SETTINGS:g=(0,r.BX)(r.HY,{children:[(0,r.tZ)(Ic,{onBack:o,alt:"Back"}),(0,r.tZ)(Z.xv,{variant:"subheadDefault",multiline:!1,children:"Settings"})]})}return(0,r.BX)(y.G,{css:Ec.container,children:[(0,r.tZ)(y.G,{css:Ec.left,children:g}),(0,r.tZ)(y.G,{css:Ec.right,children:b})]})}function Ic(e){var n=e.onBack,t=e.alt;return(0,r.tZ)(se.h,{css:Ec.back,alt:t,size:28,onClick:n,children:(0,r.tZ)(Kl.Z,{})})}function Gc(e){var n=e.switchMode;return(0,r.tZ)(Ic,{css:Ec.back,onBack:function(){return n({mode:Cc.DASHBOARD})},alt:"Back to dashboard"})}function Dc(e){var n=e.openSearch;return(0,r.tZ)(se.h,{alt:"Search (coming soon!)",size:24,onClick:n,disabled:!0,children:(0,r.tZ)(Jl.Z,{})})}function _c(e){var n=e.openSettings;return(0,r.tZ)(se.h,{alt:"Settings",size:24,onClick:n,children:(0,r.tZ)(ec.Z,{})})}function Pc(e){var n=e.closeSearch;return(0,r.tZ)(Oe.zx,{css:[g.l0.p(4),{background:"none"}],text:"Cancel",onClick:n})}function Bc(e){var n=e.mode,t=e.onSearchChange,i=e.closeSearch,o=n===Cc.DASHBOARD?"Search for branches...":"Search for commits...";return(0,r.BX)("div",{css:[g.l0.position.relative,g.l0.flex.grow(1)],children:[(0,r.tZ)(Jl.Z,{css:[g.l0.position.absolute,g.l0.left(8),g.l0.top(8)],color:g.TV.foregroundDimmest}),(0,r.tZ)(Qe.II,{css:[g.l0.width("100%"),g.l0.pl(32),g.l0.py(4),g.l0.borderRadius(4),{border:"none"}],autoFocus:!0,placeholder:o,onBlur:function(e){e.target.value.trim()||i()},onChange:function(e){return n=e.target.value,void(null===t||void 0===t||t(n));var n},onKeyDown:function(e){"Escape"===e.key&&i()}})]})}function Ac(){return(0,r.BX)(y.G,{children:[(0,r.tZ)(Z.xv,{multiline:!1,children:"Unsupported state: you are applying a mailbox patch."}),(0,r.tZ)(Z.xv,{multiline:!1,children:"Please finish the patch manually."})]})}function Uc(){return(0,r.BX)(y.G,{children:[(0,r.tZ)(Z.xv,{multiline:!1,children:"Unsupported state: you are in the middle of a bisect."}),(0,r.tZ)(Z.xv,{multiline:!1,children:"Please finish the bisect manually."})]})}var Lc=/\s\(#(\d+)\)$/,Xc=/^Revert "(.+)"/,Nc=/^This reverts commit ([a-f0-9]+)(?:, reversing changes made to ([a-f0-9]+))?\./;function Mc(e){var n=Xc.exec(e.subject),t=Nc.exec(e.body);if(n&&t){var r,i=t[1],o=n[1],a=Lc.exec(o);return a&&(r=parseInt(a[1],10)),{hash:i,subject:o,pr:r}}return null}var Fc=/\B#\d+\b/g,Oc=/^Merged? pull request (#\d+\b)/,Wc=/^Merge branch '(.+)'/,Hc=/into (.+)$/;var Vc=t(88132),zc=t(28199),jc=20,qc=(0,Qn.iv)({minHeight:jc,minWidth:jc,display:"flex",alignItems:"center",justifyContent:"center"});function $c(e){var n=function(e){switch(e){case"none":default:return null;case"commit":return(0,r.tZ)(Kc,{});case"revert":return(0,r.tZ)(Jc,{});case"merge":return(0,r.tZ)(ou,{});case"boundary":return(0,r.tZ)(lu,{});case"collapsed":return(0,r.tZ)(du,{})}}(e.type);return n?(0,r.tZ)("div",{css:qc,children:n}):null}var Yc=(0,Qn.iv)({height:4,width:4,backgroundColor:g.TV.foregroundDefault,borderRadius:"50%"});function Kc(){return(0,r.tZ)("div",{css:Yc})}var Qc=(0,Qn.iv)({display:"flex",height:jc,width:jc,backgroundColor:g.TV.orangeDimmest,borderRadius:"50%",alignItems:"center",justifyContent:"center"});function Jc(){return(0,r.tZ)("div",{css:Qc,children:(0,r.tZ)(zc.Z,{size:12,color:g.TV.orangeStrongest})})}var eu=(0,Qn.iv)({display:"flex",height:jc,width:jc,backgroundColor:g.TV.purpleDimmest,borderRadius:"50%",alignItems:"center",justifyContent:"center"}),nu=(0,Qn.iv)({position:"relative",height:9,width:13}),tu={position:"absolute",top:0,height:9,width:9,border:"1px solid ".concat(g.TV.purpleStrongest),borderRadius:"50%"},ru=(0,Qn.iv)((0,De.Z)((0,M.Z)({},tu),{left:0})),iu=(0,Qn.iv)((0,De.Z)((0,M.Z)({},tu),{right:0}));function ou(){return(0,r.tZ)("div",{css:eu,children:(0,r.BX)("div",{css:nu,children:[(0,r.tZ)("div",{css:ru}),(0,r.tZ)("div",{css:iu})]})})}var au=(0,Qn.iv)({height:6,width:6,backgroundColor:g.TV.backgroundDefault,border:"1px solid ".concat(g.TV.backgroundHighest),borderRadius:"50%"});function lu(){return(0,r.tZ)("div",{css:au})}var cu=(0,Qn.iv)({display:"flex",height:jc,width:jc,backgroundColor:g.TV.backgroundHighest,borderRadius:"50%",alignItems:"center",justifyContent:"center"}),uu=(0,Qn.iv)({display:"flex",alignItems:"center",justifyContent:"center","div + div":{marginLeft:1}}),su=(0,Qn.iv)({width:3,height:3,backgroundColor:g.TV.foregroundDimmer,borderRadius:"50%"});function du(){return(0,r.tZ)("div",{css:cu,children:(0,r.BX)("div",{css:uu,children:[(0,r.tZ)("div",{css:su}),(0,r.tZ)("div",{css:su}),(0,r.tZ)("div",{css:su})]})})}function fu(e){var n=e.boundaryTop,t=void 0!==n&&n,i=e.boundaryBottom,o=void 0!==i&&i,a=e.joint,l=void 0===a?"top":a,c=e.hideTop,u=void 0!==c&&c,s=e.hideBottom,d=void 0!==s&&s;if(u&&d)return null;if(t===o&&!u&&!d)return(0,r.tZ)(gu,{top:0,bottom:0,dashed:t&&o});var f=u?null:(0,r.tZ)(pu,{start:"top",joint:l,dashed:t}),p=d?null:(0,r.tZ)(pu,{start:"bottom",joint:l,dashed:o});return(0,r.BX)(r.HY,{children:[f,p]})}function pu(e){var n,t,o=e.start,a=e.joint,l=e.dashed,c=void 0!==l&&l,u="center"===a?(n={},(0,i.Z)(n,o,0),(0,i.Z)(n,"height","50%"),n):(t={},(0,i.Z)(t,o,0),(0,i.Z)(t,o===a?"height":a,8),t);return(0,r.tZ)(gu,(0,De.Z)((0,M.Z)({},u),{dashed:c}))}var hu=(0,Qn.iv)({position:"absolute",left:0,width:18}),vu=(0,Qn.iv)({borderRight:"1px solid ".concat(g.TV.outlineDimmest)}),mu=(0,Qn.iv)({borderRight:"1px dashed ".concat(g.TV.outlineDimmest)});function gu(e){var n=e.top,t=e.bottom,i=e.height,o=e.dashed,a=void 0!==o&&o;return(0,r.tZ)("div",{css:[hu,a?mu:vu,{top:n,bottom:t,height:i}]})}var yu=t(17807),Zu=(0,b.X)({container:{position:"relative",marginLeft:30,marginRight:4,paddingLeft:6,userSelect:"none"},containerInteractive:[yu.gU.nofill,{position:"relative",marginLeft:30,marginRight:4,paddingLeft:6,userSelect:"none"}],nodeFoldedIconContainer:{position:"absolute",top:"50%",transform:"translateY(-50%)",right:8,zIndex:1,opacity:0,"div:hover > &":{transition:"opacity 120ms ease-out",opacity:1}},nodeUnFoldedIconContainer:{position:"absolute",top:"50%",transform:"translateY(-50%)",right:8,zIndex:1},nodeContentContainer:[g.l0.colWithGap(4),{position:"relative",paddingTop:8,paddingBottom:8,paddingRight:8}],nodeHeader:{display:"block",height:jc},nodeUnfoldedContentSurface:[g.l0.mt(4),g.l0.mb(8),g.l0.p(8),g.l0.borderRadius(8),{marginLeft:36,marginRight:8,overflowX:"hidden"}],unfoldedContentContainer:[g.l0.position.relative]});function bu(e){var n=e.boundaryTop,t=void 0!==n&&n,i=e.boundaryBottom,o=void 0!==i&&i,l=e.hideConnectorTop,c=void 0!==l&&l,u=e.hideConnectorBottom,s=void 0!==u&&u,d=e.joint,f=void 0===d?"top":d,p=e.marker,h=e.header,v=e.unfoldedContent,m=e.children,Z=e.className,b=(0,a.useState)(!0),w=b[0],x=b[1];return(0,r.BX)(y.G,{className:Z,css:g.l0.position.relative,children:[(0,r.tZ)(fu,{boundaryTop:t,boundaryBottom:o,joint:f,hideTop:c,hideBottom:s}),p?(0,r.tZ)(xu,{joint:f,children:p}):null,v?(0,r.BX)(y.G,{css:Zu.containerInteractive,role:"button",tabIndex:0,onClick:function(){x(!w)},onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||x(!w)},children:[w?(0,r.tZ)("div",{css:Zu.nodeFoldedIconContainer,children:(0,r.tZ)(Rn.Z,{})}):(0,r.tZ)("div",{css:Zu.nodeUnFoldedIconContainer,children:(0,r.tZ)(In.Z,{})}),(0,r.BX)(y.G,{css:Zu.nodeContentContainer,children:[h?(0,r.tZ)(y.G,{css:Zu.nodeHeader,children:h}):null,m?(0,r.tZ)(y.G,{children:m}):null]})]}):(0,r.tZ)(y.G,{css:Zu.container,children:(0,r.BX)(y.G,{css:Zu.nodeContentContainer,children:[h?(0,r.tZ)(y.G,{css:Zu.nodeHeader,children:h}):null,m?(0,r.tZ)(y.G,{children:m}):null]})}),!v||w?null:(0,r.BX)(y.G,{css:Zu.unfoldedContentContainer,children:[s?null:(0,r.tZ)(gu,{top:0,bottom:0,dashed:o}),(0,r.tZ)(K.Tg,{css:Zu.nodeUnfoldedContentSurface,elevated:!0,children:v})]})]})}var wu=(0,b.X)({top:{position:"absolute",top:8,left:18,transform:"translateX(-50%)"},bottom:{position:"absolute",bottom:8,left:18,transform:"translateX(-50%)"},center:{position:"absolute",top:"50%",left:18,transform:"translateX(-50%) translateY(-50%)"}});function xu(e){var n=e.joint,t=void 0===n?"top":n,i=e.children;return(0,r.tZ)("div",{css:wu[t],children:i})}var ku=(0,Qn.iv)(g.l0.rowWithGap(8),g.l0.align.center,g.l0.justify.spaceBetween,g.l0.height("100%")),Cu=(0,Qn.iv)(g.l0.rowWithGap(4),g.l0.center),Su=(0,Qn.iv)(g.l0.flex.shrink(0));function Tu(e){var n=e.text,t=(0,F.Z)(e,["text"]);return(0,r.tZ)(bu,(0,M.Z)({marker:(0,r.tZ)($c,{type:"boundary"}),joint:"center",header:(0,r.BX)(y.G,{css:ku,children:[(0,r.tZ)(an.R,{}),(0,r.BX)(y.G,{css:Cu,children:[(0,r.tZ)(Vc.Z,{size:12,color:g.TV.foregroundDimmest}),(0,r.tZ)(Z.xv,{css:Su,variant:"small",color:"dimmest",multiline:!1,children:n})]}),(0,r.tZ)(an.R,{})]})},t))}var Eu=t(3923),Ru=t(90349),Iu=t(79597),Gu=t(17705),Du=t(9125);function _u(){var e=(0,jr.Z)(["\n  query GitUserImageByUsername($username: String!) {\n    userByUsername(username: $username) {\n      id\n      image\n    }\n  }\n"]);return _u=function(){return e},e}var Pu={},Bu=(0,qr.Ps)(_u());var Au=t(7914);function Uu(e){var n=e.name,t=e.email,i=e.allowPlaceholderAvatar,o=void 0!==i&&i,a=e.color,l=void 0===a?"default":a,c=e.small,u=void 0!==c&&c,s=e.flip,d=void 0!==s&&s;return(0,r.BX)(y.G,{css:[g.l0.rowWithGap(4),g.l0.align.baseline,d?g.l0.flex.rowReverse:g.l0.flex.row,g.l0.flex.shrink(1)],children:[(0,r.tZ)(Lu,{email:t,name:n,enablePlaceholder:o,small:u}),(0,r.tZ)(Z.xv,{multiline:!1,css:[g.l0.fontWeight.medium],color:l,variant:u?"small":"text",children:n})]})}function Lu(e){var n=e.name,t=e.email,i=e.enablePlaceholder,l=void 0!==i&&i,c=e.small,u=void 0!==c&&c,s=(0,o.Z)(function(e){var n=(0,M.Z)({},Pu,e);return Du.t(Bu,n)}({initialFetchPolicy:"cache-and-network",nextFetchPolicy:"cache-first",ssr:!1}),1)[0],d=(0,a.useState)(null),f=d[0],p=d[1];return(0,a.useEffect)((function(){var e=function(){var e=(0,Ge.Z)((function(){var e,n,r,i,a,l,c,u,d,f,h,v,m;return(0,_e.__generator)(this,(function(g){switch(g.label){case 0:return t.endsWith("@".concat(Iu.O))?(e=t.split("@")[0],n=(0,o.Z)(e.split("+"),2),n[0],r=n[1],i=(0,Au.vt)("https://github.com/".concat(r,".png")),p(i),[3,4]):[3,1];case 1:return t.endsWith("@".concat(Iu.J))?(c=t.split("@")[0],u=(0,o.Z)(c.split("-"),2),u[0],d=u[1],[4,s({variables:{username:d}})]):[3,3];case 2:return f=g.sent(),(h=null===(a=f.data)||void 0===a||null===(l=a.userByUsername)||void 0===l?void 0:l.image)&&p(h),[3,4];case 3:v=(0,H.FB)(t),(m=new URL("https://gravatar.com/avatar/".concat(v))).searchParams.append("d","404"),p(m.toString()),g.label=4;case 4:return[2]}}))}));return function(){return e.apply(this,arguments)}}();e()}),[t,s]),(0,a.useMemo)((function(){var e=u?12:16;return null===f?l?(0,r.tZ)(Gu.Z,{css:{alignSelf:"center"},size:e}):null:(0,r.tZ)(Ru.q,{css:{alignSelf:"center"},username:n,src:f,onError:function(){return p(null)},size:e})}),[f,l,u,n])}var Xu=(0,b.X)({definitionList:{display:"grid",gridTemplateColumns:"auto 1fr",paddingLeft:g.TV.space4,"> dt":{display:"flex",alignItems:"center",paddingBottom:g.TV.space2},"> dd":{marginLeft:g.TV.space12,paddingBottom:g.TV.space2}},listHeader:[g.l0.fontWeight.medium],content:[g.l0.colWithGap(8)],description:[g.l0.colWithGap(8)],commitList:[g.l0.colWithGap(2),g.l0.pl(4)]});function Nu(e){var n=e.commit,t=e.info,i=void 0===t?null:t,o=n.committer.name!==n.author.name&&n.committer.email!==n.author.email,a=Math.abs(n.author.date-n.committer.date)>6e4,l=!n.body,c=null,u=null;return i&&"type"in i?(c=i,"pull-request"===i.type&&(i.reverts&&(u=i.reverts),i.subject&&(l=!0))):i&&(u=i),(0,r.BX)(y.G,{css:Xu.content,children:[l?null:(0,r.BX)(y.G,{css:Xu.description,children:[(0,r.tZ)(Z.xv,{children:(0,r.tZ)(mc,{body:n.body})}),(0,r.tZ)(an.R,{css:g.l0.backgroundColor.outlineDimmer})]}),(0,r.BX)(y.G,{children:[(0,r.tZ)(Z.xv,{css:Xu.listHeader,multiline:!1,children:"Author"}),(0,r.BX)("dl",{css:Xu.definitionList,children:[(0,r.tZ)("dt",{children:"Name:"}),(0,r.tZ)("dd",{children:n.author.name}),(0,r.tZ)("dt",{children:"Email:"}),(0,r.tZ)("dd",{children:n.author.email})]})]}),o?(0,r.BX)(y.G,{children:[(0,r.tZ)(Z.xv,{css:Xu.listHeader,multiline:!1,children:"Committer"}),(0,r.BX)("dl",{css:Xu.definitionList,children:[(0,r.tZ)("dt",{children:"Name:"}),(0,r.tZ)("dd",{children:n.committer.name}),(0,r.tZ)("dt",{children:"Email:"}),(0,r.tZ)("dd",{children:n.committer.email})]})]}):null,(0,r.BX)(y.G,{children:[(0,r.tZ)(Z.xv,{css:Xu.listHeader,multiline:!1,children:"Commit"}),(0,r.BX)("dl",{css:Xu.definitionList,children:[a?(0,r.BX)(r.HY,{children:[(0,r.tZ)("dt",{children:"Authored:"}),(0,r.tZ)("dd",{children:(0,r.tZ)(Eu.E,{date:n.author.date,dateFormat:"absolute"})}),(0,r.tZ)("dt",{children:"Committed:"}),(0,r.tZ)("dd",{children:(0,r.tZ)(Eu.E,{date:n.committer.date,dateFormat:"absolute"})})]}):(0,r.BX)(r.HY,{children:[(0,r.tZ)("dt",{children:"Date:"}),(0,r.tZ)("dd",{children:(0,r.tZ)(Eu.E,{date:n.author.date,dateFormat:"absolute"})})]}),(0,r.tZ)("dt",{children:"Hash:"}),(0,r.tZ)("dd",{children:n.hash}),c&&"pull-request"===c.type?(0,r.BX)(r.HY,{children:[(0,r.tZ)("dt",{children:"PR:"}),(0,r.BX)("dd",{children:["#",c.id]})]}):null,c&&"branch"===c.type?(0,r.BX)(r.HY,{children:[(0,r.tZ)("dt",{children:"Merged:"}),(0,r.tZ)("dd",{children:c.source}),c.target?(0,r.BX)(r.HY,{children:[(0,r.tZ)("dt",{children:"Into:"}),(0,r.tZ)("dd",{children:c.target})]}):null]}):null,u?(0,r.BX)(r.HY,{children:[(0,r.tZ)("dt",{children:"Reverted:"}),(0,r.tZ)("dd",{children:u.hash})]}):null]})]}),c&&"simple"===c.type?(0,r.BX)(y.G,{children:[(0,r.tZ)(Z.xv,{css:Xu.listHeader,multiline:!1,children:"Merged"}),(0,r.BX)(y.G,{css:Xu.commitList,children:[(0,r.tZ)(Z.xv,{multiline:!1,children:c.a}),(0,r.tZ)(Z.xv,{multiline:!1,children:c.b})]})]}):null,c&&"octopus"===c.type?(0,r.BX)(y.G,{children:[(0,r.tZ)(Z.xv,{css:Xu.listHeader,multiline:!1,children:"Merged"}),(0,r.tZ)(y.G,{css:Xu.commitList,children:c.parents.map((function(e,n){return(0,r.tZ)(Z.xv,{multiline:!1,children:e},n)}))})]}):null]})}function Mu(e){var n=e.commit,t=(0,F.Z)(e,["commit"]);return(0,r.tZ)(bu,(0,De.Z)((0,M.Z)({marker:(0,r.tZ)($c,{type:"commit"}),header:(0,r.tZ)(Z.xv,{css:g.l0.fontWeight.medium,multiline:!1,children:(0,r.tZ)(hc,{subject:n.subject})}),unfoldedContent:(0,r.tZ)(Nu,{commit:n})},t),{children:(0,r.BX)(y.G,{css:[g.l0.rowWithGap(8),g.l0.align.baseline],children:[(0,r.tZ)(Uu,{name:n.author.name,email:n.author.email,color:"dimmer",allowPlaceholderAvatar:!0,small:!0}),(0,r.tZ)(Eu.E,{date:n.author.date,textColor:"dimmest",textVariant:"small"})]})}))}var Fu=t(63651);function Ou(e){var n,t=e.commit,i=e.info,o=(0,F.Z)(e,["commit","info"]);return"branch"!==i.type&&(n="pull-request"===i.type&&i.subject?i.subject:t.subject),(0,r.tZ)(bu,(0,De.Z)((0,M.Z)({marker:(0,r.tZ)($c,{type:"merge"}),header:(0,r.BX)(Z.xv,{css:[g.l0.rowWithGap(4),g.l0.align.baseline],multiline:!1,children:[(0,r.tZ)(uc,{text:"merged"}),(0,r.tZ)(Wu,{info:i,hash:t.hash,subject:t.subject})]}),unfoldedContent:(0,r.tZ)(Nu,{commit:t,info:i})},o),{children:(0,r.BX)(y.G,{css:[g.l0.colWithGap(8)],children:[n?(0,r.tZ)(Z.xv,{color:"dimmer",variant:"small",multiline:!1,children:(0,r.tZ)(hc,{subject:n})}):null,(0,r.BX)(y.G,{css:[g.l0.rowWithGap(8),g.l0.align.baseline,g.l0.flex.shrink(1)],children:[(0,r.tZ)(Uu,{name:t.author.name,email:t.author.email,color:"dimmer",allowPlaceholderAvatar:!0,small:!0}),(0,r.tZ)(Eu.E,{date:t.author.date,textColor:"dimmest",textVariant:"small"})]})]})}))}function Wu(e){var n=e.info,t=e.hash,i=e.subject,o=(0,r.tZ)("span",{css:g.l0.fontWeight.medium,children:i});switch(n.type){case"pull-request":return(0,r.BX)(r.HY,{children:[(0,r.tZ)("span",{children:"pull request"}),(0,r.tZ)(dc,{id:n.id}),n.reverts&&n.reverts.pr?(0,r.BX)(r.HY,{children:[(0,r.tZ)("span",{children:"-"}),(0,r.tZ)(lc,{text:"reverts"}),(0,r.tZ)(dc,{id:n.reverts.pr})]}):null]});case"branch":return n.target?(0,r.BX)(r.HY,{children:[(0,r.tZ)(yc,{name:n.source}),(0,r.tZ)("span",{children:"into"}),(0,r.tZ)(yc,{name:n.target})]}):(0,r.BX)(r.HY,{children:[(0,r.tZ)("span",{children:"branch"}),(0,r.tZ)(yc,{name:n.source})]});case"simple":return(0,r.BX)(r.HY,{children:[(0,r.tZ)(pc,{hash:n.a}),(0,r.tZ)(Fu.Z,{css:{alignSelf:"center"},size:12}),(0,r.tZ)(pc,{hash:n.b})]});case"octopus":return(0,r.BX)(r.HY,{children:[(0,r.tZ)("span",{children:"commit"}),(0,r.tZ)(pc,{hash:t}),(0,r.BX)("span",{children:["(",n.parents.length," parents)"]})]});default:return o}}function Hu(e){var n=e.commit,t=e.info,i=(0,F.Z)(e,["commit","info"]);return(0,r.tZ)(bu,(0,De.Z)((0,M.Z)({marker:(0,r.tZ)($c,{type:"revert"}),header:(0,r.BX)(Z.xv,{css:[g.l0.rowWithGap(4),g.l0.align.baseline],multiline:!1,children:[(0,r.tZ)(lc,{text:"reverted"}),(0,r.tZ)(pc,{hash:t.hash}),(0,r.tZ)(hc,{subject:t.subject,quoted:!0})]}),unfoldedContent:(0,r.tZ)(Nu,{commit:n,info:t})},i),{children:(0,r.BX)(y.G,{css:[g.l0.rowWithGap(8),g.l0.align.baseline],children:[(0,r.tZ)(Uu,{name:n.author.name,email:n.author.email,color:"dimmer",allowPlaceholderAvatar:!0,small:!0}),(0,r.tZ)(Eu.E,{date:n.author.date,textColor:"dimmest",textVariant:"small"})]})}))}function Vu(e){var n=e.button,t=(0,F.Z)(e,["button"]);return(0,r.tZ)(bu,(0,De.Z)((0,M.Z)({marker:(0,r.tZ)($c,{type:"boundary"}),joint:"center"},t),{children:(0,r.tZ)(y.G,{children:n})}))}function zu(e){var n=e.items;return(0,r.tZ)(y.G,{children:n.map((function(e,t){return function(e,n){var t=e[n],i=0===n,o=n===e.length-1;if("boundary"===t.type)return(0,r.tZ)(Tu,{text:t.text,hideConnectorTop:i,hideConnectorBottom:o,boundaryTop:!0,boundaryBottom:!0},t.text);if("button"===t.type)return(0,r.tZ)(Vu,{button:t.button,hideConnectorTop:i,hideConnectorBottom:o,boundaryTop:!0,boundaryBottom:!0},t.key);var a=e[n-1]?e[n-1].type:null,l=e[n+1]?e[n+1].type:null,c="commit"!==a,u="commit"!==l;return(0,r.tZ)(ju,{commit:t.commit,hideConnectorTop:i,hideConnectorBottom:o,boundaryTop:c,boundaryBottom:u},t.commit.hash)}(n,t)}))})}function ju(e){var n=e.commit,t=(0,F.Z)(e,["commit"]),i=function(e){if("GitHub"===e.committer.name&&"noreply@github.com"===e.committer.email){var n=e.subject.match(Fc);if(n){var t,r=parseInt(n[n.length-1].slice(1),10);if(r)return Lc.test(e.subject)&&(t=e.subject.replace(Lc,"").trim()),!t&&Oc.test(e.subject)&&e.body&&-1===e.body.indexOf("\n")&&(t=e.body),{type:"pull-request",id:r,subject:t,reverts:Mc(e)}}}if(Oc.test(e.subject)){var i,o=Oc.exec(e.subject);if(o)return e.body&&-1===e.body.indexOf("\n")&&(i=e.body),{type:"pull-request",id:parseInt(o[1].slice(1),10),subject:i,reverts:Mc(e)}}if(Wc.test(e.subject)){var a=Wc.exec(e.subject);if(a){var l=Hc.exec(e.subject);return{type:"branch",source:a[1],target:l?l[1]:null}}}return e.parents&&e.parents.length>2?{type:"octopus",parents:e.parents}:e.parents&&e.parents.length>1?{type:"simple",a:e.parents[0],b:e.parents[1]}:null}(n);if(i)return(0,r.tZ)(Ou,(0,M.Z)({info:i,commit:n},t));var o=Mc(n);return o?(0,r.tZ)(Hu,(0,M.Z)({info:o,commit:n},t)):(0,r.tZ)(Mu,(0,M.Z)({commit:n},t))}var qu=(0,Qn.F4)({from:{opacity:0},to:{opacity:1}}),$u=(0,Qn.iv)({animation:"".concat(qu," 0.125s 0.25s linear backwards")},g.l0.flex.grow(1),g.l0.display.flex,g.l0.center);function Yu(){return(0,r.tZ)(y.G,{css:$u,children:(0,r.tZ)(Je.Z,{size:48})})}var Ku=t(32985);var Qu=t(84682);function Ju(e){var n,t,i,o,l,c,u=e.status,s=e.gotoPendingState,f=(0,a.useState)(!1),p=f[0],h=f[1],v=ql(),m=(0,d.Z)().git,g=u.branch,y=null!==(o=null===(n=u.upstream)||void 0===n?void 0:n.branch)&&void 0!==o?o:null,Z=null!==(l=null===(t=u.upstream)||void 0===t?void 0:t.behind)&&void 0!==l?l:0,b=null!==(c=null===(i=u.upstream)||void 0===i?void 0:i.ahead)&&void 0!==c?c:0,w=u.changes.length>0,x=(0,gl.Z)(function(){var e=(0,Ge.Z)((function(e){var n,t;return(0,_e.__generator)(this,(function(r){switch(r.label){case 0:return g&&y&&Z&&!w?[4,e.canMergeBranches(g,y)]:[2,{canPull:!1,mode:Qu.T.FF_ONLY,error:null}];case 1:return(n=r.sent()).error?(v(n.error),[2,n]):(t=Qu.T.FF_ONLY,b>0&&(t=n.canMerge?Qu.T.REBASE:Qu.T.MERGE),[2,{canPull:!0,mode:t,error:null}])}}))}));return function(n){return e.apply(this,arguments)}}(),[v,g,y,Z,b,w],{keepStaleResult:!1});if(null===x||void 0===x?void 0:x.error)return null;var k,C,S,T=null===x,E=null!==(k=null===x||void 0===x?void 0:x.canPull)&&void 0!==k&&k,R=null!==(C=null===x||void 0===x?void 0:x.mode)&&void 0!==C?C:Qu.T.FF_ONLY;function I(){return(I=(0,Ge.Z)((function(){var e;return(0,_e.__generator)(this,(function(n){switch(n.label){case 0:return p?[2]:(h(!0),[4,m.pull({mode:R,allowConflicts:!0})]);case 1:return e=n.sent(),m.forceRefresh(),e.error?(v(e.error),h(!1)):(e.hasConflicts&&s(),Dl("upstream-pulled")),[2]}}))}))).apply(this,arguments)}return p?S="Pulling...":g?w?S="Cannot pull with uncommitted changes":0===Z?S="Nothing to pull":T?S="Checking for merge conflicts\u2026":E?(S="Pull ".concat(Z," ").concat((0,gt.Z)("commit",Z)),R===Qu.T.REBASE?S+=" with rebase":R===Qu.T.MERGE&&(S+=" with merge")):S="Cannot pull due to merge conflict":S="Cannot pull - the HEAD is detached",(0,r.tZ)(Oe.zx,{text:S,iconLeft:T||p?(0,r.tZ)(Je.Z,{}):(0,r.tZ)(An.Z,{}),onClick:function(){return I.apply(this,arguments)},loading:T||p,disabled:!E})}var es=t(88467);function ns(e){var n,t,i,o,l,c=e.status,u=(0,a.useState)(!1),s=u[0],f=u[1],p=ql(),h=(0,d.Z)().git,v=null===c.branch,m=null!==(i=null===(n=c.upstream)||void 0===n?void 0:n.behind)&&void 0!==i?i:0,g=null!==(o=null===(t=c.upstream)||void 0===t?void 0:t.ahead)&&void 0!==o?o:0,y=v||m>0||0===g;function Z(){return(Z=(0,Ge.Z)((function(){var e;return(0,_e.__generator)(this,(function(n){switch(n.label){case 0:return y||s?[2]:(f(!0),[4,h.push()]);case 1:return e=n.sent(),h.forceRefresh(),e.error?(p(e.error),f(!1)):Dl("upstream-pushed"),[2]}}))}))).apply(this,arguments)}return l=s?"Pushing...":v?"Cannot push - the HEAD is detached":0===g?"Nothing to push":m>0?"Cannot push due to unpulled changes":"Push ".concat(g," ").concat((0,gt.Z)("commit",g)),(0,r.tZ)(Oe.zx,{text:l,iconLeft:s?(0,r.tZ)(Je.Z,{}):(0,r.tZ)(es.Z,{}),onClick:function(){return Z.apply(this,arguments)},disabled:y,loading:s})}function ts(e){var n=e.branch,t=(0,a.useState)(!1),i=t[0],o=t[1],l=ql(),c=(0,d.Z)().git;function u(){return(u=(0,Ge.Z)((function(){var e;return(0,_e.__generator)(this,(function(t){switch(t.label){case 0:return i?[2]:(o(!0),[4,c.switchBranch(n)]);case 1:return(e=t.sent()).error?(l(e.error),o(!1)):(c.forceRefresh(),Dl("branch-switched")),[2]}}))}))).apply(this,arguments)}(0,a.useEffect)((function(){return o(!1)}),[n]);var s=i?"Switching to branch...":"Switch to Branch";return(0,r.tZ)(Oe.zx,{text:s,colorway:"primary",onClick:function(){return u.apply(this,arguments)},iconLeft:i?(0,r.tZ)(Je.Z,{}):(0,r.tZ)(rc.Z,{}),loading:i})}var rs=t(49760);function is(e){for(var n=e.split("/").slice(0,-1),t=[],r=0;r<n.length;r++){var i=n.slice(r).join("/")+"/";0!==r&&(i="\u2026/"+i),t.push(i)}return t.reverse()}function os(e){if(0===e.length)return new Map;if(1===e.length)return new Map([[e[0],null]]);var n=new Map,t=!0,r=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var c=a.value,u=(0,v.UO)(c),s=n.get(u);s||(s=[],n.set(u,s)),s.push(c)}}catch(Z){r=!0,i=Z}finally{try{t||null==l.return||l.return()}finally{if(r)throw i}}var d=new Map,f=!0,p=!1,h=void 0;try{for(var m,g=function(){var e=function(e){var n=[],i=new Map,a=!0,l=!1,c=void 0;try{for(var u,s=t[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var f=(0,o.Z)(u.value,2),p=f[0],h=f[1];if(!r.has(p)){var v=h[e];v||(v=h[h.length-1]),n.push(v),i.set(v,p)}}}catch(Z){l=!0,c=Z}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}if(0===n.length)return"break";var m=!0,g=!1,y=void 0;try{for(var b,w=function(){var e=b.value,t=i.get(e);if(void 0===t)throw new Error("Unpopulated segment map");1===n.filter((function(n){return n===e})).length&&(r.add(t),d.set(t,e))},x=n[Symbol.iterator]();!(m=(b=x.next()).done);m=!0)w()}catch(Z){g=!0,y=Z}finally{try{m||null==x.return||x.return()}finally{if(g)throw y}}},n=(0,o.Z)(m.value,2)[1];if(1===n.length)return d.set(n[0],null),"continue";var t=new Map,r=new Set,i=0,a=!0,l=!1,c=void 0;try{for(var u,s=n[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var f=u.value;if(-1!==f.indexOf("/")){var p=is(f);t.set(f,p),p.length>i&&(i=p.length)}else d.set(f,null),r.add(f)}}catch(Z){l=!0,c=Z}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}for(var h=0;h<=i;h++){if("break"===e(h))break}if(r.size!==n.length){var v=!0,g=!1,y=void 0;try{for(var b,w=n[Symbol.iterator]();!(v=(b=w.next()).done);v=!0){var x=b.value;if(!r.has(x)){var k=x.split("/").slice(0,-1).join("/");d.set(x,k)}}}catch(Z){g=!0,y=Z}finally{try{v||null==w.return||w.return()}finally{if(g)throw y}}}},y=n[Symbol.iterator]();!(f=(m=y.next()).done);f=!0)g()}catch(Z){p=!0,h=Z}finally{try{f||null==y.return||y.return()}finally{if(p)throw h}}return d}var as=t(59884),ls=(0,b.X)({actionsIndex:[g.l0.height(24),g.l0.align.center,g.l0.borderRadius(4)],actionsWorktree:[g.l0.height(24),g.l0.flex.row,g.l0.align.center,g.l0.borderRadius(4)],unstage:[g.l0.height(24),g.l0.width(24),g.l0.borderRadius(2)],stage:[g.l0.px(12),g.l0.height(24),g.l0.width(24),g.l0.borderRadius(2)],reset:[g.l0.pl(16),g.l0.pr(12),g.l0.height(24),g.l0.width(24),g.l0.borderRadius(2)],resetIcon:{transform:"scale(0.85)"},divider:[g.l0.height("75%"),g.l0.width(1),g.l0.backgroundColor.outlineStronger]});function cs(e){var n=e.file,t=e.list,i=e.stageFiles,o=e.restoreFiles,l=e.disabled,c=void 0!==l&&l,u=(0,a.useState)(!1),s=u[0],d=u[1],f=(0,a.useState)(!1),p=f[0],h=f[1];function v(){return(v=(0,Ge.Z)((function(){return(0,_e.__generator)(this,(function(e){switch(e.label){case 0:return c?[2]:(d(!0),[4,i({reset:[n.path]})]);case 1:return e.sent(),d(!1),[2]}}))}))).apply(this,arguments)}function m(){return(m=(0,Ge.Z)((function(){return(0,_e.__generator)(this,(function(e){switch(e.label){case 0:return c?[2]:(d(!0),[4,i({add:[n.path]})]);case 1:return e.sent(),d(!1),[2]}}))}))).apply(this,arguments)}function g(){return(g=(0,Ge.Z)((function(){return(0,_e.__generator)(this,(function(e){switch(e.label){case 0:return c||"worktree"!==t?[2]:(h(!0),[4,o(n.path)]);case 1:return e.sent(),h(!1),[2]}}))}))).apply(this,arguments)}return c=c||p||s,"index"===t?(0,r.tZ)(K.Tg,{elevated:!0,css:ls.actionsIndex,children:(0,r.tZ)(se.h,{css:ls.unstage,alt:"Unstage changes",size:18,tooltipDelay:"long",onClick:function(){return v.apply(this,arguments)},disabled:c,children:s?(0,r.tZ)(Je.Z,{}):(0,r.tZ)(as.Z,{})})}):(0,r.BX)(K.Tg,{elevated:!0,css:ls.actionsWorktree,children:[(0,r.tZ)(se.h,{css:ls.reset,alt:"Reset changes",size:18,tooltipDelay:"long",onClick:function(){return g.apply(this,arguments)},disabled:c,children:p?(0,r.tZ)(Je.Z,{}):(0,r.tZ)(zc.Z,{css:ls.resetIcon})}),(0,r.tZ)("div",{css:ls.divider}),(0,r.tZ)(se.h,{css:ls.stage,alt:"Stage changes",size:18,tooltipDelay:"long",onClick:function(){return m.apply(this,arguments)},disabled:c,children:s?(0,r.tZ)(Je.Z,{}):(0,r.tZ)(rn.Z,{})})]})}var us=(0,b.X)({path:[g.l0.rowWithGap(8),g.l0.flex.growAndShrink(1),g.l0.align.center],source:[g.l0.color.foregroundDimmest],sourceArrow:[g.l0.mx(8)]});function ss(e){var n=e.path,t=e.prefix,i=e.source,o=e.onClick;return(0,r.BX)(y.G,{css:us.path,children:[(0,r.tZ)(dl.Z,{path:n}),(0,r.BX)(Z.xv,{multiline:!1,children:[(0,r.tZ)(wc,{path:n,prefix:t,onClick:o}),i?(0,r.BX)("span",{css:us.source,children:[(0,r.tZ)("span",{css:us.sourceArrow,children:"\u2190"}),(0,r.tZ)(wc,{path:i})]}):null]})]})}var ds=(0,Qn.iv)({width:60,height:24},g.l0.display.flex,g.l0.center,g.l0.borderRadius(4),g.l0.fontSize(g.TV.fontSizeSmall));function fs(e){var n,t,i;switch(e.type){case rs.h.ADDED:case rs.h.UNTRACKED:n="Added",t=g.TV.greenDimmest,i=g.TV.greenStrongest;break;case rs.h.MODIFIED:n="Modified",t=g.TV.yellowDimmest,i=g.TV.yellowStrongest;break;case rs.h.DELETED:n="Deleted",t=g.TV.redDimmest,i=g.TV.redStrongest;break;case rs.h.RENAMED:n="Renamed",t=g.TV.tealDimmest,i=g.TV.tealStrongest;break;case rs.h.COPIED:n="Copy",t=g.TV.limeDimmest,i=g.TV.limeStrongest;break;default:return null}return(0,r.tZ)(y.G,{style:{backgroundColor:t,color:i},css:ds,children:(0,r.tZ)("span",{children:n})})}var ps=(0,Qn.iv)(g.l0.py(2),g.l0.rowWithGap(4),g.l0.align.center);function hs(e){var n,t=e.file,i=e.list,o=e.stageFiles,a=e.restoreFiles,l=e.pathMap,c=e.disabled,u=void 0!==c&&c,s=e.onFilePathClick,d=null===l||void 0===l?void 0:l.get(t.path),f=null===(n=t.source)||void 0===n?void 0:n.path,p="index"===i?t.type.index:t.type.worktree,h=(0,pn.Z)((function(){if(p!==rs.h.DELETED)return function(){return s(t.path)}}),[t.path,s,p]);return(0,r.BX)(y.G,{css:ps,children:[(0,r.tZ)(ss,{path:t.path,prefix:d,source:f,onClick:h}),(0,r.tZ)(fs,{type:p}),(0,r.tZ)(cs,{file:t,list:i,stageFiles:o,restoreFiles:a,disabled:u})]})}var vs=(0,b.X)({actions:[g.l0.rowWithGap(2),g.l0.backgroundColor.backgroundHighest,g.l0.borderRadius(8)],buttonReset:[g.l0.borderRadius(8,0,0,8)],buttonStage:[g.l0.borderRadius(0,8,8,0)],divider:[g.l0.my(8),g.l0.width(1),g.l0.backgroundColor.outlineStronger]});function ms(e){var n=e.type,t=e.stageFiles,i=e.restoreFiles,o=e.disabled,l=void 0!==o&&o,c=(0,a.useState)(!1),u=c[0],s=c[1],d=(0,a.useState)(!1),f=d[0],p=d[1];function h(){return v.apply(this,arguments)}function v(){return(v=(0,Ge.Z)((function(){return(0,_e.__generator)(this,(function(e){switch(e.label){case 0:return l?[2]:(s(!0),[4,t({all:"index"!==n})]);case 1:return e.sent(),s(!1),[2]}}))}))).apply(this,arguments)}function m(){return(m=(0,Ge.Z)((function(){return(0,_e.__generator)(this,(function(e){switch(e.label){case 0:return l||"worktree"!==n?[2]:(p(!0),[4,i(!0)]);case 1:return e.sent(),p(!1),[2]}}))}))).apply(this,arguments)}return l=l||f||u,"index"===n?(0,r.tZ)(Oe.zx,{text:"Unstage All",iconLeft:u?(0,r.tZ)(Je.Z,{}):(0,r.tZ)(as.Z,{}),onClick:h,disabled:l,loading:u,small:!0}):(0,r.BX)(y.G,{css:vs.actions,children:[(0,r.tZ)(Oe.zx,{css:vs.buttonReset,text:"Reset All",iconLeft:f?(0,r.tZ)(Je.Z,{}):(0,r.tZ)(zc.Z,{}),onClick:function(){return m.apply(this,arguments)},disabled:l,loading:f,small:!0}),(0,r.tZ)("div",{css:vs.divider}),(0,r.tZ)(Oe.zx,{css:vs.buttonStage,text:"Stage All",iconLeft:u?(0,r.tZ)(Je.Z,{}):(0,r.tZ)(rn.Z,{}),onClick:h,disabled:l,loading:u,small:!0})]})}var gs=t(94629),ys=(0,b.X)({list:[g.l0.pt(4),g.l0.pb(8),g.l0.colWithGap(4)],listFolded:[g.l0.py(4)],header:[g.l0.px(8),g.l0.rowWithGap(4),g.l0.align.center],headerFoldable:[g.l0.py(4),g.l0.pl(4),g.l0.pr(8),g.l0.rowWithGap(4),g.l0.align.center],headerText:[g.l0.flex.grow(1)],body:[g.l0.px(8),g.l0.maxHeight("50vh"),g.l0.overflowY("auto")]});function Zs(e){var n,t=e.files,i=e.type,o=e.stageFiles,l=e.restoreFiles,c=e.onFilePathClick,u=e.pathMap,s=e.foldable,d=void 0!==s&&s,f=e.disabled,p=void 0!==f&&f,h=(0,a.useState)(!1),v=h[0],m=h[1],g=(0,a.useRef)(null),Z=(0,a.useRef)(null),b=(0,gs.MG)({count:t.length,getScrollElement:function(){return Z.current},getItemKey:function(e){return t[e].path},estimateSize:function(){return 28},overscan:20}),w=b.getVirtualItems();return d&&v?(0,r.tZ)(y.G,{css:ys.listFolded,children:(0,r.BX)(y.G,{css:d?ys.headerFoldable:ys.header,children:[(0,r.tZ)(bs,{files:t,type:i,setFolded:m,foldable:!0,folded:!0}),(0,r.tZ)(ms,{type:i,stageFiles:o,restoreFiles:l,disabled:p})]})}):(0,r.BX)(y.G,{innerRef:g,css:ys.list,children:[(0,r.BX)(y.G,{css:d?ys.headerFoldable:ys.header,children:[(0,r.tZ)(bs,{files:t,type:i,setFolded:m,foldable:d}),(0,r.tZ)(ms,{type:i,stageFiles:o,restoreFiles:l,disabled:p})]}),(0,r.tZ)(y.K.div,{ref:Z,css:ys.body,children:(0,r.tZ)("div",{style:{minHeight:b.getTotalSize()},children:(0,r.tZ)("div",{style:{transform:"translateY(".concat(null===(n=w[0])||void 0===n?void 0:n.start,"px)"),willChange:"transform"},children:w.map((function(e){var n=t[e.index];return(0,r.tZ)("div",{"data-index":e.index,children:(0,r.tZ)(hs,{file:n,list:i,stageFiles:o,restoreFiles:l,onFilePathClick:c,pathMap:u,disabled:p},n.path)},e.key)}))})})})]})}function bs(e){var n=e.files,t=e.type,i=e.setFolded,o=e.foldable,a=void 0!==o&&o,l=e.folded,c=void 0!==l&&l,u="index"===t?"staged":"changed",s=(0,gt.Z)("file",n.length),d="".concat(n.length," ").concat(u," ").concat(s);return a&&c?(0,r.BX)(r.HY,{children:[(0,r.tZ)(se.h,{alt:"Show list",onClick:function(){return i(!1)},children:(0,r.tZ)(Rn.Z,{})}),(0,r.tZ)(Z.xv,{css:ys.headerText,multiline:!1,children:d})]}):(0,r.BX)(r.HY,{children:[a?(0,r.tZ)(se.h,{alt:"Hide list",onClick:function(){return i(!0)},children:(0,r.tZ)(In.Z,{color:g.TV.foregroundDimmest})}):null,(0,r.tZ)(Z.xv,{css:ys.headerText,color:"dimmest",multiline:!1,children:d})]})}var ws=t(60803),xs=(0,b.X)({container:[g.l0.colWithGap(8)],buttons:[g.l0.rowWithGap(8),g.l0.justify.end],restoringBoth:[g.l0.colWithGap(12)],listContainer:[g.l0.colWithGap(4)],list:[g.l0.px(4),g.l0.colWithGap(2)]});function ks(e){var n=e.show,t=e.files,i=e.pathMap,o=e.callback,l=(0,C.Z)(o),c=(0,a.useCallback)((function(){var e;null===(e=l.current)||void 0===e||e.call(l,!0)}),[l]),u=(0,a.useCallback)((function(){var e;null===(e=l.current)||void 0===e||e.call(l,!1)}),[l]);return(0,r.tZ)(We.u,{isOpen:n,onRequestClose:u,children:n?(0,r.BX)(y.G,{css:xs.container,children:[(0,r.BX)(Z.h4,{level:2,children:["Discard ",(0,gt.Z)("Change",t.length)]}),(0,r.tZ)(Cs,{files:t,pathMap:i}),(0,r.BX)(y.G,{css:xs.buttons,children:[(0,r.tZ)(Oe.zx,{text:"Cancel",iconLeft:(0,r.tZ)(ws.Z,{}),onClick:u}),(0,r.tZ)(Oe.zx,{text:"Discard ".concat((0,gt.Z)("Change",t.length)),iconLeft:(0,r.tZ)(zc.Z,{}),colorway:"negative",onClick:c})]})]}):null})}function Cs(e){var n=e.files,t=e.pathMap,i=[],o=[],a=!0,l=!1,c=void 0;try{for(var u,s=n[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var d=u.value;d.type.worktree===rs.h.UNTRACKED?o.push(d):i.push(d)}}catch(f){l=!0,c=f}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}return!i.length&&o.length?(0,r.BX)(y.G,{css:xs.listContainer,children:[(0,r.tZ)(Z.xv,{children:1===o.length?"Do you want to permanently delete this file?":"Do you want to permanently delete these files?"}),(0,r.tZ)(Ss,{files:o,pathMap:t})]}):i.length&&!o.length?(0,r.BX)(y.G,{css:xs.listContainer,children:[(0,r.tZ)(Z.xv,{children:1===i.length?"Do you want to undo the changes to this file?":"Do you want to undo the changes to these files?"}),(0,r.tZ)(Ss,{files:i,pathMap:t})]}):(0,r.BX)(y.G,{css:xs.restoringBoth,children:[i.length?(0,r.BX)(y.G,{css:xs.listContainer,children:[(0,r.BX)(Z.h4,{level:3,children:["Tracked ",(0,gt.Z)("File",i.length)]}),(0,r.tZ)(Z.xv,{multiline:!1,children:1===i.length?"This file will have its changes undone.":"These files will have their changes undone."}),(0,r.tZ)(Ss,{files:i,pathMap:t})]}):null,o.length?(0,r.BX)(y.G,{css:xs.listContainer,children:[(0,r.BX)(Z.h4,{level:3,children:["Untracked ",(0,gt.Z)("File",o.length)]}),(0,r.tZ)(Z.xv,{multiline:!1,children:1===o.length?"This file will be permanently deleted.":"These files will be permanently deleted."}),(0,r.tZ)(Ss,{files:o,pathMap:t})]}):null]})}function Ss(e){var n=e.files,t=e.pathMap,i=(0,a.useMemo)((function(){return n.length>20?n.slice(0,20):n}),[n]);return(0,r.tZ)(y.G,{children:(0,r.BX)("ul",{css:xs.list,children:[i.map((function(e){var n;return(0,r.tZ)("li",{children:(0,r.tZ)(ss,{path:e.path,prefix:t.get(e.path),source:null===(n=e.source)||void 0===n?void 0:n.path})},e.path)})),n.length<=20?null:(0,r.tZ)("li",{children:(0,r.BX)(Z.xv,{color:"dimmer",children:["... ",n.length-20," more"," ",(0,gt.Z)("file",n.length-20)]})})]})})}var Ts=[{"& > span:first-child":[g.l0.flex.grow(1),g.l0.textAlign.left]},{"& > span":[g.l0.flex.shrink(1)]}],Es=(0,b.X)({buttonFolded:[Ts,g.l0.height("auto"),g.l0.py(8),g.l0.fontWeight.medium],buttonUnfolded:[Ts,g.l0.height("auto"),g.l0.py(8),g.l0.fontWeight.medium,g.l0.border({color:g.TV.outlineDimmer,direction:"bottom"}),g.l0.borderRadius(8,8,0,0)],container:[g.l0.flex.grow(1),g.l0.borderRadius(8)],lists:[g.l0.borderRadius(0,0,8,8)],divider:[g.l0.height(1),g.l0.minHeight(1),g.l0.width("100%"),g.l0.backgroundColor.outlineDimmer],autoStageMessage:[g.l0.pt(4),g.l0.pb(8),g.l0.px(4),g.l0.center],noChangesMessage:[g.l0.py(16),g.l0.px(4),g.l0.center],buttonText:[g.l0.flex.grow(1)],details:[g.l0.rowWithGap(4),g.l0.fontWeight.normal,g.l0.color.foregroundDimmest]});function Rs(e){var n=e.status,t=e.stageFiles,i=e.restoreFiles,o=e.onStagedFileClick,l=e.disabled,c=void 0!==l&&l,u=(0,a.useState)(!1),s=u[0],d=u[1],f=(0,a.useState)(!1),p=f[0],h=f[1],v=(0,a.useState)(!1),m=v[0],g=v[1],b=(0,a.useMemo)((function(){return os(n.changes.map((function(e){return e.path})))}),[n]),w=(0,a.useMemo)((function(){var e=[],t=[],r=!0,i=!1,o=void 0;try{for(var a,l=n.changes[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;c.staged&&e.push(c),c.type.worktree!==rs.h.UNMODIFIED&&t.push(c)}}catch(u){i=!0,o=u}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return[e,t]}),[n.changes]),x=w[0],k=w[1],C=x.length>0&&k.length>0,S=function(e){var n=(0,a.useState)((function(){return{show:!1,files:[]}})),t=n[0],i=n[1],o=(0,a.useCallback)((function(e){return new Promise((function(n){0===e.length&&n(!1),i({show:!0,files:e,callback:function(e){i({show:!1,files:[],callback:void 0}),n(e)}})}))}),[]);return{openRestoreConfirmationModal:o,restoreConfirmationModal:(0,a.useMemo)((function(){return(0,r.tZ)(ks,(0,De.Z)((0,M.Z)({},t),{pathMap:e}))}),[t,e])}}(b),T=S.openRestoreConfirmationModal,E=S.restoreConfirmationModal,R=(0,a.useCallback)(function(){var e=(0,Ge.Z)((function(e){return(0,_e.__generator)(this,(function(n){switch(n.label){case 0:return"all"in e?(h(!0),[4,t(e)]):[3,2];case 1:return n.sent(),h(!1),[3,4];case 2:return[4,t(e)];case 3:n.sent(),n.label=4;case 4:return[2]}}))}));return function(n){return e.apply(this,arguments)}}(),[t]),I=(0,a.useCallback)(function(){var e=(0,Ge.Z)((function(e){var n,t;return(0,_e.__generator)(this,(function(r){switch(r.label){case 0:return!0!==e?[3,4]:(g(!0),[4,T(k)]);case 1:return r.sent()?[4,i(e)]:[3,3];case 2:r.sent(),r.label=3;case 3:return g(!1),[3,8];case 4:if("string"===typeof e){if(!(t=k.find((function(n){return n.path===e}))))throw g(!1),new Error("Could not find file in worktree list");n=[t]}else n=k.filter((function(n){return e.includes(n.path)}));return[4,T(n)];case 5:return r.sent()?[4,i(e)]:[3,7];case 6:r.sent(),r.label=7;case 7:g(!1),r.label=8;case 8:return[2]}}))}));return function(n){return e.apply(this,arguments)}}(),[T,i,k]);return s?(0,r.tZ)(Is,{setFolded:d,changeCount:k.length,stagedCount:x.length,disabled:c,folded:!0}):0===x.length&&0===k.length?(0,r.BX)(y.G,{style:{opacity:c?.725:void 0},css:Es.container,children:[(0,r.tZ)(Is,{setFolded:d,changeCount:k.length,stagedCount:x.length,disabled:c}),(0,r.tZ)(K.Tg,{css:Es.lists,elevated:!0,children:(0,r.tZ)(y.G,{css:Es.noChangesMessage,children:(0,r.tZ)(Z.xv,{color:"dimmest",multiline:!1,children:"No changed or staged files."})})})]}):(0,r.BX)(r.HY,{children:[(0,r.BX)(y.G,{style:{opacity:c?.725:void 0},css:Es.container,children:[(0,r.tZ)(Is,{setFolded:d,changeCount:k.length,stagedCount:x.length,disabled:c}),(0,r.BX)(K.Tg,{css:Es.lists,elevated:!0,children:[0===x.length?null:(0,r.tZ)(Zs,{type:"index",files:x,stageFiles:R,restoreFiles:I,onFilePathClick:o,pathMap:b,foldable:C,disabled:c||p||m}),C?(0,r.tZ)("div",{css:Es.divider}):null,0===k.length?null:(0,r.BX)(r.HY,{children:[(0,r.tZ)(Zs,{type:"worktree",files:k,stageFiles:R,restoreFiles:I,onFilePathClick:o,pathMap:b,foldable:C,disabled:c||p||m}),C?null:(0,r.tZ)(y.G,{css:Es.autoStageMessage,children:(0,r.tZ)(Z.xv,{variant:"small",color:"dimmest",multiline:!1,children:"Committing will automatically stage your changes."})})]})]})]}),E]})}function Is(e){var n=e.folded,t=void 0!==n&&n,i=e.setFolded,o=e.changeCount,a=e.stagedCount,l=e.disabled,c=void 0!==l&&l;return(0,r.tZ)(Oe.zx,{css:t?Es.buttonFolded:Es.buttonUnfolded,text:"Staging Area",secondaryText:(0,r.tZ)(Gs,{folded:t,changeCount:o,stagedCount:a}),onClick:function(){return i(!t)},iconRight:t?(0,r.tZ)(Rn.Z,{}):(0,r.tZ)(In.Z,{}),disabled:c,small:!0})}function Gs(e){var n=e.folded,t=e.changeCount,i=e.stagedCount;if(!n)return null;var o=t>0,a=i>0;return o||a?(0,r.BX)("span",{css:Es.details,children:[o?(0,r.BX)("span",{children:[t," ",(0,gt.Z)("change",t)]}):null,o&&a?(0,r.tZ)("span",{children:"/"}):null,a?(0,r.BX)("span",{children:[i," staged"]}):null]}):(0,r.tZ)("span",{css:Es.details,children:(0,r.tZ)("span",{children:"no changes"})})}var Ds=t(95434),_s=t(47518),Ps=t(45353),Bs=t(82001),As=t(15823),Us=t(95245),Ls=(0,Qn.iv)({height:32,width:"100%",resize:"none",border:"none"}),Xs=(0,Qn.iv)({width:"100%",resize:"none",border:"none"}),Ns=(0,b.X)({surface:[g.l0.p(8),g.l0.colWithGap(12),g.l0.borderRadius(0,0,8,8)],button:[g.l0.height("auto"),g.l0.py(8),g.l0.fontWeight.medium,g.l0.borderRadius(8,8,0,0),g.l0.justify.start,g.l0.border({color:g.TV.outlineDimmer,direction:"bottom"}),{"> span:first-child":{flexGrow:1,textAlign:"start"}}],requiredText:[g.l0.display.inlineFlex,g.l0.rowWithGap(4)],subjectField:[g.l0.colWithGap(8)],bodyField:[g.l0.colWithGap(8)],subjectInput:Ls,bodyInput:Xs,subjectInputDisabled:[Ls,{opacity:.5}],bodyInputDisabled:[Xs,{opacity:.5}],required:[g.l0.color.accentNegativeStronger],keyCombo:[g.l0.display.inlineFlex,g.l0.rowWithGap(4),g.l0.flex.grow(1),g.l0.align.center],keyComboText:[g.l0.fontWeight.normal,g.l0.color.foregroundDimmest]});function Ms(e){var n=e.message,t=e.disabled,i=void 0!==t&&t,o=e.onMessageChange,l=e.onCommitShortcut,c=function(e,n){e=e.replaceAll("\n"," "),o(e+(n?"\n\n"+n:""))},u=(0,a.useState)(!0),s=u[0],d=u[1],f=(0,a.useState)(!1),p=f[0],h=f[1],v=(0,a.useState)(!1),m=v[0],g=v[1],Z=(0,a.useRef)(null),b=(0,a.useRef)(null),w=(0,yt.Z)(n.split("\n\n")),x=w[0],k=void 0===x?"":x,C=w.slice(1).join("\n\n"),S=(0,Us.d)(),T=(0,Ps.gf)(As.CN.gitCommit.id);return(0,Bs.ow)(As.CT,m),(0,Ps.Il)((function(){return[As.CN.gitCommit.id,{run:function(){null===l||void 0===l||l()},scope:As.CT,bubble:!1}]}),[l]),(0,r.BX)(y.G,{children:[(0,r.tZ)(Oe.zx,{css:Ns.button,text:(0,r.BX)("span",{css:Ns.requiredText,children:[(0,r.tZ)("span",{children:"Commit Message"}),s?(0,r.tZ)(Vs,{}):null]}),secondaryText:S||!T?void 0:(0,r.BX)("span",{css:Ns.keyCombo,children:[(0,r.tZ)("span",{css:Ns.keyComboText,children:"Commit:"}),(0,r.tZ)(Ps.bM,{keyCombo:T,small:!0})]}),iconRight:s?(0,r.tZ)(Rn.Z,{}):(0,r.tZ)(In.Z,{}),onClick:function(){return d((function(e){return!e}))},small:!0}),(0,r.BX)(K.Tg,{css:Ns.surface,elevated:!0,children:[(0,r.tZ)(Os,{ref:Z,value:k,compact:s,disabled:i,onChange:function(e){c(e,C)},onNewline:function(){if(s)d(!1),h(!0);else{if(!b.current)return;b.current.focus(),b.current.setSelectionRange(0,0)}},onFocus:function(){g(!0)},onBlur:function(){g(!1)}}),s&&!C?null:(0,r.tZ)(Hs,{ref:b,value:C,compact:s,disabled:i,onChange:function(e){var n;(c(k,e),s&&!e)?null===(n=Z.current)||void 0===n||n.focus():s&&d(!1)},onBackspaceWhenEmpty:function(){Z.current&&Z.current.focus()},onFocus:function(){p&&h(!1),g(!0)},onBlur:function(){g(!1)},autoFocus:p})]})]})}function Fs(e,n){var t=e.value,i=e.compact,o=void 0!==i&&i,a=e.disabled,l=void 0!==a&&a,c=e.onChange,u=e.onNewline,s=e.onFocus,d=e.onBlur;return(0,r.BX)(y.G,{css:Ns.subjectField,children:[o?null:(0,r.tZ)(Z.xv,{variant:"small",color:"dimmer",multiline:!1,children:(0,r.BX)("span",{css:Ns.requiredText,children:[(0,r.tZ)("span",{children:"Summary"}),(0,r.tZ)(Vs,{})]})}),(0,r.tZ)(Qe.B,{ref:n,css:l?Ns.subjectInputDisabled:Ns.subjectInput,placeholder:"Summary of your commit...",value:t,disabled:l,onChange:function(e){return null===c||void 0===c?void 0:c(e.currentTarget.value)},onKeyDown:function(e){"Enter"!==e.key||e.defaultPrevented||(e.preventDefault(),e.stopPropagation(),null===u||void 0===u||u())},onFocus:s,onBlur:d})]})}var Os=(0,a.forwardRef)(Fs);function Ws(e,n){var t=e.value,i=e.compact,o=void 0!==i&&i,a=e.disabled,l=void 0!==a&&a,c=e.autoFocus,u=void 0!==c&&c,s=e.onChange,d=e.onBackspaceWhenEmpty,f=e.onFocus,p=e.onBlur,h=(0,Ds.Z)().ref;return(0,r.BX)(y.G,{css:Ns.bodyField,children:[o?null:(0,r.tZ)(Z.xv,{variant:"small",color:"dimmer",multiline:!1,children:"Description"}),(0,r.tZ)(Qe.B,{ref:o?n:(0,_s.l)(n,h),css:l?Ns.bodyInputDisabled:Ns.bodyInput,placeholder:"Description of your commit...",value:t,disabled:l,onChange:function(e){return null===s||void 0===s?void 0:s(e.currentTarget.value)},onKeyDown:function(e){"Backspace"===e.key&&""===t&&(e.preventDefault(),e.stopPropagation(),null===d||void 0===d||d())},onFocus:f,onBlur:p,autoFocus:u})]})}var Hs=(0,a.forwardRef)(Ws);function Vs(){return(0,r.tZ)(te.u,{tooltip:"This field is required.",placement:"top",children:(0,r.tZ)("span",{css:Ns.required,children:"*"})})}var zs=(0,Qn.iv)(g.l0.colWithGap(8));function js(e){var n=e.status,t=e.onStagedFileClick,i=(0,a.useState)(n),o=i[0],l=i[1],c=(0,a.useState)(""),u=c[0],s=c[1],f=(0,a.useState)(0),p=f[0],h=f[1],v=(0,a.useState)(!1),m=v[0],g=v[1],b=ql();(0,a.useEffect)((function(){return l(n)}),[n]);var w=(0,d.Z)().git;if(!o||!o.changes.length)return(0,r.tZ)(y.G,{css:zs,children:(0,r.tZ)(Z.xv,{color:"dimmest",multiline:!1,children:"There are no changes to commit."})});var x=o.changes.length,k=o.changes.filter((function(e){return e.staged})).length;function C(){return(C=(0,Ge.Z)((function(e){var n,t;return(0,_e.__generator)(this,(function(r){switch(r.label){case 0:return m?[2]:(h((function(e){return e+1})),[4,w.stageFiles(e)]);case 1:return(n=r.sent()).error?[3,3]:[4,w.status()];case 2:return(t=r.sent()).error?b(t.error):l(t),w.forceRefresh(),[3,4];case 3:b(n.error),r.label=4;case 4:return h((function(e){return e-1})),[2]}}))}))).apply(this,arguments)}function S(){return S=(0,Ge.Z)((function(e){var n,t;return(0,_e.__generator)(this,(function(r){switch(r.label){case 0:return m?[2]:(h((function(e){return e+1})),[4,w.restoreFiles(e)]);case 1:return(n=r.sent()).error?[3,3]:[4,w.status()];case 2:return(t=r.sent()).error?b(t.error):l(t),w.forceRefresh(),[3,4];case 3:b(n.error),r.label=4;case 4:return h((function(e){return e-1})),[2]}}))})),S.apply(this,arguments)}function T(){return E.apply(this,arguments)}function E(){return(E=(0,Ge.Z)((function(){var e,n;return(0,_e.__generator)(this,(function(t){switch(t.label){case 0:return m||0===x||p>0?[2]:(g(!0),0!==k?[3,2]:[4,w.stageFiles({all:!0})]);case 1:t.sent(),t.label=2;case 2:return[4,w.commit({message:u})];case 3:return(e=t.sent()).error?(g(!1),b(e.error),[3,6]):[3,4];case 4:return Dl("commit-created",{hasDescription:-1!==u.trim().indexOf("\n\n")}),[4,w.status()];case 5:n=t.sent(),g(!1),n.error?b(n.error):(s(""),l(n)),w.forceRefresh(),t.label=6;case 6:return[2]}}))}))).apply(this,arguments)}var R="Nothing to commit";if(m)R="Committing...";else if(k>0){var I=(0,gt.Z)("change",k);R="Commit ".concat(k," staged ").concat(I)}else x>0&&0===k&&(R="Stage and commit all changes");var G=!u||0===x||p>0||m;return(0,r.BX)(y.G,{css:zs,children:[(0,r.tZ)(Ms,{message:u,disabled:m,onMessageChange:s,onCommitShortcut:T}),(0,r.tZ)(Rs,{status:o,stageFiles:function(e){return C.apply(this,arguments)},restoreFiles:function(e){return S.apply(this,arguments)},onStagedFileClick:t,disabled:m}),(0,r.tZ)(Oe.zx,{text:R,onClick:T,disabled:G,loading:m,colorway:"primary",iconLeft:(0,r.tZ)(ne.Z,{}),stretch:!0})]})}var qs=(0,b.X)({warning:[g.l0.align.start],header:[g.l0.fontWeight.bold]});function $s(){var e=(0,Te.P5)({controlName:"flag-disable-github-import",logFlagToAnalytics:!1});return(0,r.BX)(r.HY,{children:[(0,r.tZ)(He.E,{css:qs.warning,icon:(0,r.tZ)(ee.Z,{}),colorway:"warning",text:(0,r.BX)(r.HY,{children:[(0,r.tZ)("span",{css:qs.header,children:"Can't push or pull from GitHub"}),(0,r.tZ)("br",{}),(0,r.tZ)("span",{children:"This Repl has a GitHub repository as a remote, but you are not connected to GitHub."})]})}),e?null:(0,r.tZ)(_l,{})]})}var Ys=t(2447),Ks=(0,Qn.iv)(g.l0.flex.shrink(1));function Qs(e){var n=e.date,t=(0,a.useState)(null),i=t[0],o=t[1];return(0,a.useEffect)((function(){if(n){var e=function(){var e=new Date,t="just now";e.getTime()-n.getTime()>6e4&&(t=(0,Ys.Z)(n,e,{addSuffix:!0})),t=t.replace(/minutes?/,"min"),o(t)};e();var t=setInterval(e,6e4);return function(){clearInterval(t),o(null)}}}),[n]),i?(0,r.BX)(Z.xv,{css:Ks,color:"dimmest",variant:"small",multiline:!1,children:["last fetched ",i]}):null}function Js(e){var n=e.hasRemoteMergeConflict,t=e.hasUnpulledCommits,i=e.hasUnpushedCommits,o=e.workTreeDirty,a=[];return o&&t&&a.push("Can't pull: you have uncommitted changes"),n&&(t||i)&&(t&&i?(o||a.push("Warning: pulling will start a merge with conflicts"),a.push("Can't push: unpulled changes must be merged first")):t?o||a.push("Warning: pulling will start a merge with conflicts"):i&&a.push("Can't push: merge conflict with remote")),(0,r.tZ)(r.HY,{children:a.map((function(e){return(0,r.tZ)(He.E,{text:e,colorway:"warning",icon:(0,r.tZ)(ee.Z,{})},e)}))})}var ed=(0,Qn.iv)(g.l0.mx(8));function nd(e){var n=e.ahead,t=e.behind;if(!n&&!t)return(0,r.tZ)(Z.xv,{color:"dimmest",multiline:!1,children:"Nothing to pull or push"});var i=null,o=null;if(t){var a=(0,gt.Z)("commit",t);i="".concat(t," ").concat(a," to pull")}if(n){var l=(0,gt.Z)("commit",n);o="".concat(n," ").concat(l," to push")}return(0,r.BX)(Z.xv,{color:"dimmer",variant:"small",multiline:!1,children:[i?(0,r.tZ)("span",{children:i}):null,i&&o?(0,r.tZ)("span",{css:ed,children:"\u2022"}):null,o?(0,r.tZ)("span",{children:o}):null]})}var td=(0,b.X)({container:[g.l0.flex.grow(1)],branch:[g.l0.mr(4),g.l0.color.foregroundDefault,g.l0.fontWeight.medium,{"&:hover":{textDecoration:"underline"}}],divider:[g.l0.color.foregroundDimmest],text:[g.l0.ml(4),g.l0.color.foregroundDimmest]});function rd(e){var n=e.upstream,t=e.remotes,i=(0,a.useMemo)((function(){return function(e,n){var t=null,r=null;if((0,bl.Z)(e,Map)){var i=(0,wl.Tg)(n),o=i[0];if(t=i[1],!o||!t)return null;var a=e.get(o);if(!a)return null;r=Sl(a)}else t=n,r=Sl(e);return r&&kl(r)?"".concat(r,"/tree/").concat(t):null}(t,n)}),[n,t]);return(0,r.BX)(Z.xv,{css:td.container,variant:"small",multiline:!1,children:[i?(0,r.tZ)("a",{css:td.branch,href:i,target:"_blank",children:n}):(0,r.tZ)("span",{css:td.branch,children:n}),(0,r.tZ)("span",{css:td.divider,children:"\u2022"}),(0,r.tZ)("span",{css:td.text,children:"upstream"})]})}var id=(0,b.X)({container:[g.l0.borderRadius(8)],loading:[g.l0.height(64),ue.p.backgroundPulse(),g.l0.borderRadius(8)],header:[g.l0.py(4),g.l0.px(8),g.l0.rowWithGap(8),g.l0.align.center,g.l0.flex.shrink(1),g.l0.border({color:g.TV.outlineDimmer,direction:"bottom"})],fetch:{border:"none"},body:[g.l0.px(8),g.l0.pt(8),g.l0.pb(12),g.l0.colWithGap(8)],buttons:[g.l0.rowWithGap(8),g.l0.flex.grow(1)],sync:[g.l0.flex.grow(1)],pullPush:[g.l0.flex.row],pull:[g.l0.pr(12),g.l0.borderRadius(8,0,0,8),g.l0.border({color:g.TV.outlineDefault,direction:"right"})],push:[g.l0.borderRadius(0,8,8,0)]});function od(e){return ad.apply(this,arguments)}function ad(){return(ad=(0,Ge.Z)((function(e){var n,t;return(0,_e.__generator)(this,(function(r){switch(r.label){case 0:return n=null,[4,Promise.race([e,new Promise((function(e){return n=setTimeout((function(){je.c_.withScope((function(e){e.setTag("gitPane",!0),je.c_.captureException(new Error("Remote update operation timed out"))})),e({error:Zl.aq.TIMEOUT})}),9e4)}))])];case 1:return t=r.sent(),n&&clearTimeout(n),[2,t]}}))}))).apply(this,arguments)}function ld(e){var n=e.remotes,t=e.gotoPendingState,i=(0,a.useState)(!1),o=i[0],l=i[1],c=(0,a.useState)(!1),u=c[0],s=c[1],f=(0,a.useState)(!1),p=f[0],h=f[1],v=(0,a.useState)(!1),m=v[0],g=v[1],Z=(0,d.Z)().git,b=(0,gl.Z)(function(){var e=(0,Ge.Z)((function(e){var n,t,r,i,o,a,l,c,u,s,d,f,p,h,v,m,g,y;return(0,_e.__generator)(this,(function(Z){switch(Z.label){case 0:return i={upstream:null,hasUnpulledCommits:!1,hasUnpushedCommits:!1,hasRemoteMergeConflict:!1,pullMode:Qu.T.FF_ONLY,canPull:!1,canPush:!1,workTreeDirty:!1,needGitHubConnection:!1,ahead:0,behind:0,lastFetched:null},[4,e.getRepositoryState()];case 1:return(o=Z.sent()).error?[2,o]:(a=o.state,o.type!==vl.y5.NORMAL?[2,{error:Zl.aq.INVALID_STATE}]:(a!==vl.yG.DIRTY_WORKTREE&&a!==vl.yG.DIRTY_INDEX||(i.workTreeDirty=!0),[4,e.status()]));case 2:return(l=Z.sent()).error?[2,l]:(c=l.branch,u=null===(n=l.upstream)||void 0===n?void 0:n.branch,d=null!==(s=null===(t=l.upstream)||void 0===t?void 0:t.ahead)&&void 0!==s?s:0,p=null!==(f=null===(r=l.upstream)||void 0===r?void 0:r.behind)&&void 0!==f?f:0,c?(i.ahead=d,i.behind=p,u?(i.upstream=u,i.hasUnpulledCommits=p>0,i.hasUnpushedCommits=d>0,[4,e.lastFetched()]):[3,7]):[2,{error:Zl.aq.HEAD_DETACHED}]);case 3:return(h=Z.sent()).error?[2,h]:(i.lastFetched=h.lastFetched,[4,e.canMergeBranches(c,u)]);case 4:return(v=Z.sent()).error?[2,v]:(v.canMerge||(i.hasRemoteMergeConflict=!0),e.hasProfile(Zl.rG.GITHUB)?[3,6]:(m=(0,Ku.CH)(u))?[4,e.getRemotes()]:[2,{error:Zl.aq.INVALID_REFERENCE}]);case 5:if((g=Z.sent()).error)return[2,g];if(!(y=g.remotes.get(m)))return[2,{error:Zl.aq.INVALID_REFERENCE}];kl(y)&&(i.needGitHubConnection=!0),Z.label=6;case 6:!i.hasUnpulledCommits||i.workTreeDirty||i.needGitHubConnection||(i.canPull=!0),!i.hasUnpushedCommits||i.hasUnpulledCommits||i.needGitHubConnection||(i.canPush=!0),d>0&&(i.pullMode=i.hasRemoteMergeConflict?Qu.T.MERGE:Qu.T.REBASE),Z.label=7;case 7:return[2,(0,De.Z)((0,M.Z)({},i),{error:null})]}}))}));return function(n){return e.apply(this,arguments)}}()),w=ql();if((0,a.useEffect)((function(){(null===b||void 0===b?void 0:b.error)&&w(b.error)}),[null===b||void 0===b?void 0:b.error,w]),!b)return(0,r.tZ)(K.Tg,{css:id.loading,elevated:!0});if(b.error||!b.upstream)return null;var x=b.upstream,k=b.hasUnpulledCommits,C=b.hasUnpushedCommits,S=b.hasRemoteMergeConflict,T=b.pullMode,E=b.canPull,R=b.canPush,I=b.workTreeDirty,G=b.needGitHubConnection,D=b.ahead,_=b.behind,P=b.lastFetched;if(G)return(0,r.BX)(K.Tg,{css:id.container,elevated:!0,children:[(0,r.BX)(y.G,{css:id.header,children:[(0,r.tZ)(rd,{upstream:x,remotes:n}),(0,r.tZ)(Oe.zx,{css:id.fetch,text:"Fetch",iconLeft:(0,r.tZ)(Vo.Z,{}),disabled:!0,outlined:!0,small:!0})]}),(0,r.tZ)(y.G,{css:id.body,children:(0,r.tZ)($s,{})})]});var B=o||u||p||m,A=!x||G||B,U=!E||B,L=!R||B,X=!E&&!R||S||B;function N(){return(N=(0,Ge.Z)((function(){var e;return(0,_e.__generator)(this,(function(n){switch(n.label){case 0:return A?[2]:(l(!0),[4,od(Z.fetch())]);case 1:return e=n.sent(),Z.forceRefresh(),l(!1),e.error?w(e.error):Dl("remote-fetched"),[2]}}))}))).apply(this,arguments)}function F(){return(F=(0,Ge.Z)((function(){var e;return(0,_e.__generator)(this,(function(n){switch(n.label){case 0:return U?[2]:(s(!0),[4,od(Z.pull({mode:T,allowConflicts:!0}))]);case 1:return e=n.sent(),s(!1),e.error?w(e.error):(e.hasConflicts&&t(),Z.forceRefresh(),Dl("upstream-pulled")),[2]}}))}))).apply(this,arguments)}function O(){return(O=(0,Ge.Z)((function(){var e;return(0,_e.__generator)(this,(function(n){switch(n.label){case 0:return L?[2]:(h(!0),[4,od(Z.push())]);case 1:return e=n.sent(),Z.forceRefresh(),h(!1),e.error?w(e.error):Dl("upstream-pushed"),[2]}}))}))).apply(this,arguments)}function W(){return(W=(0,Ge.Z)((function(){var e,n;return(0,_e.__generator)(this,(function(t){switch(t.label){case 0:return X?[2]:(g(!0),E?[4,od(Z.pull({mode:T}))]:[3,2]);case 1:if((e=t.sent()).error)return w(e.error),g(!1),[2];Dl("upstream-pulled"),t.label=2;case 2:return R?[4,Z.push()]:[3,4];case 3:if((n=t.sent()).error)return w(n.error),g(!1),[2];Dl("upstream-pushed"),t.label=4;case 4:return Z.forceRefresh(),g(!1),[2]}}))}))).apply(this,arguments)}return(0,r.BX)(K.Tg,{css:id.container,elevated:!0,children:[(0,r.BX)(y.G,{css:id.header,children:[(0,r.tZ)(rd,{upstream:x,remotes:n}),(0,r.tZ)(Qs,{date:P}),(0,r.tZ)(Oe.zx,{css:id.fetch,text:"Fetch",iconLeft:o?(0,r.tZ)(Je.Z,{}):(0,r.tZ)(Vo.Z,{}),onClick:function(){return N.apply(this,arguments)},loading:o,disabled:A,outlined:!0,small:!0})]}),(0,r.BX)(y.G,{css:id.body,children:[(0,r.tZ)(Js,{hasRemoteMergeConflict:S,hasUnpulledCommits:k,hasUnpushedCommits:C,workTreeDirty:I}),(0,r.tZ)(nd,{ahead:D,behind:_}),(0,r.BX)(y.G,{css:id.buttons,children:[(0,r.tZ)(Oe.zx,{css:id.sync,text:"Synchronize",iconLeft:m?(0,r.tZ)(Je.Z,{}):(0,r.tZ)(Fu.Z,{rotate:90}),onClick:function(){return W.apply(this,arguments)},loading:m,disabled:X,small:!0}),(0,r.BX)(y.G,{css:id.pullPush,children:[(0,r.tZ)(Oe.zx,{css:id.pull,text:"Pull",iconLeft:u?(0,r.tZ)(Je.Z,{}):(0,r.tZ)(An.Z,{}),onClick:function(){return F.apply(this,arguments)},loading:u,disabled:U,small:!0}),(0,r.tZ)(Oe.zx,{css:id.push,text:"Push",iconLeft:p?(0,r.tZ)(Je.Z,{}):(0,r.tZ)(es.Z,{}),onClick:function(){return O.apply(this,arguments)},loading:p,disabled:L,small:!0})]})]})]})]})}var cd=t(9396);function ud(e){var n=e.branch,t=(0,a.useState)(!1),i=t[0],o=t[1],l=ql(),c=(0,d.Z)().git,u=(0,gl.Z)(function(){var e=(0,Ge.Z)((function(e){var n,t,r;return(0,_e.__generator)(this,(function(i){switch(i.label){case 0:return[4,e.getRemotes()];case 1:return(n=i.sent()).error?(l(n.error),[2,n]):(t=n.remotes,r="",(null===t||void 0===t?void 0:t.size)&&(r=t.has("origin")?"origin":t.keys().next().value),[2,{remote:r,error:null}])}}))}));return function(n){return e.apply(this,arguments)}}(),[l],{keepStaleResult:!1});if(null===u||void 0===u?void 0:u.error)return null;var s,f=u?u.remote:null,p=null===f,h=n.type!==ml.HO.LOCAL||!f;function v(){return(v=(0,Ge.Z)((function(){return(0,_e.__generator)(this,(function(e){switch(e.label){case 0:return!f||i?[2]:(o(!0),[4,c.push({publish:{remote:f}})]);case 1:return e.sent().error?o(!1):(c.forceRefresh(),Dl("branch-published-to-remote")),[2]}}))}))).apply(this,arguments)}return s=i?"Publishing...":n.type!==ml.HO.LOCAL?"Branch has already been published":p?"Checking if branch can be published...":f?"Publish branch as '".concat(f,"/").concat(n.name,"'"):"No remotes to publish to",(0,r.tZ)(Oe.zx,{text:s,iconLeft:p||i?(0,r.tZ)(Je.Z,{}):(0,r.tZ)(cd.Z,{}),onClick:function(){return v.apply(this,arguments)},loading:p||i,disabled:h})}var sd=(0,Qn.iv)({border:"none"},g.l0.height("auto"),g.l0.py(4),g.l0.px(8));function dd(e){var n=e.branch,t=e.remotes,i=(0,a.useMemo)((function(){if(n.type===ml.HO.LOCAL)return[null,null,null];var e=t.get(n.remote);if(!e)return[null,null,null];var r=Sl(e),i=function(e){var n="string"===typeof e?e:e.fetch;if(kl(n)){var t=(n=Cl(n)).split("/");if(t.length<2)return null;var r=t[t.length-2],i=t[t.length-1];return"".concat(r,"/").concat(i)}return null}(e);return[r,i,kl(r)]}),[n,t]),o=i[0],l=i[1],c=i[2];return o&&l?(0,r.tZ)(on.Z,{css:sd,text:l,href:o,target:"_blank",iconLeft:c?(0,r.tZ)(Il.Z,{}):void 0,iconRight:(0,r.tZ)(Ea.Z,{}),outlined:!0,small:!0}):null}var fd=(0,b.X)({view:[g.l0.pt(4),g.l0.pb(8),g.l0.px(4),g.l0.colWithGap(8),g.l0.flex.grow(1)],sectionContainer:[g.l0.colWithGap(8)],section:[g.l0.pt(8),g.l0.pb(16),g.l0.px(8),g.l0.colWithGap(8),g.l0.border({color:g.TV.outlineDimmest,direction:"bottom"})],remoteUpdatesHeader:[g.l0.rowWithGap(8),g.l0.align.center,g.l0.justify.spaceBetween],reviewChangesHeader:[g.l0.rowWithGap(8),g.l0.align.center],changesPill:[g.l0.fontWeight.bold],headerText:[g.l0.fontWeight.medium]});function pd(e){var n,t,i=e.status,l=e.remotes,c=e.branch,u=e.onStagedFileClick,s=e.gotoPendingState,d=e.current,f=void 0!==d&&d,p=function(e,n,t){var r=ql(),i=(0,gl.Z)(function(){var r=(0,Ge.Z)((function(r){var i,a,l,c,u,s,d,f,p;return(0,_e.__generator)(this,(function(h){switch(h.label){case 0:return e?!e.tracking||0===n&&0===t?(i=(0,Ku.bF)(e,!0),[4,r.log({max:100,revRange:i})]):[3,2]:[2,{error:null}];case 1:return(a=h.sent()).error?[2,a]:[2,{log:a.commits,error:null}];case 2:return l=(0,Ku.bF)(e),[4,Promise.all([r.log({max:100,revRange:e.name}),r.log({max:100,revRange:"".concat(e.name,"..").concat(l)}),r.log({max:100,revRange:"".concat(l,"..").concat(e.name)})])];case 3:return c=h.sent(),u=(0,o.Z)(c,3),s=u[0],d=u[1],f=u[2],(p=s.error||d.error||f.error)?[2,{error:p}]:[2,{log:s.commits,onlyRemote:d.commits,onlyLocal:f.commits,error:null}]}}))}));return function(e){return r.apply(this,arguments)}}(),[e,n,t]);return(0,a.useMemo)((function(){if(!i)return null;if(i.error)return r(i.error),{error:i.error};var e=i.log,n=i.onlyRemote,t=i.onlyLocal;if(!n&&!t)return{log:e,error:null};if(e){var o=new Set;if(n){var a=!0,l=!1,c=void 0;try{for(var u,s=n[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var d=u.value;o.add(d.hash)}}catch(y){l=!0,c=y}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}}if(t){var f=!0,p=!1,h=void 0;try{for(var v,m=t[Symbol.iterator]();!(f=(v=m.next()).done);f=!0){var g=v.value;o.add(g.hash)}}catch(y){p=!0,h=y}finally{try{f||null==m.return||m.return()}finally{if(p)throw h}}}e=e.filter((function(e){return!o.has(e.hash)}))}return{log:e,onlyRemote:n,onlyLocal:t,error:null}}),[r,i])}(c,f?null===i||void 0===i||null===(n=i.upstream)||void 0===n?void 0:n.behind:void 0,f?null===i||void 0===i||null===(t=i.upstream)||void 0===t?void 0:t.ahead:void 0),h=!!l&&l.size>0,v=(null===c||void 0===c?void 0:c.type)===ml.HO.LOCAL,m=(0,a.useMemo)((function(){if(!p||p.error)return[];var e,n,t,o=[],a=p.log,l=void 0===a?[]:a,c=p.onlyRemote,u=void 0===c?[]:c,d=p.onlyLocal,h=void 0===d?[]:d,v=l.length>0,m=u.length>0,g=h.length>0;m&&(o.push({type:"boundary",text:"Not pulled from remote"}),f&&i&&o.push({type:"button",key:"pull-button",button:(0,r.tZ)(Ju,{status:i,gotoPendingState:s})}),(e=o).push.apply(e,(0,Zi.Z)(hd(u))));g&&(o.push({type:"boundary",text:"Not pushed to remote"}),f&&i&&o.push({type:"button",key:"push-button",button:(0,r.tZ)(ns,{status:i})}),(n=o).push.apply(n,(0,Zi.Z)(hd(h))));v&&((m||g)&&o.push({type:"boundary",text:"Up to date with remote"}),(t=o).push.apply(t,(0,Zi.Z)(hd(l))));return o}),[p,i,f,s]);return c?(0,r.BX)(y.G,{css:fd.view,children:[(0,r.BX)(y.G,{css:fd.sectionContainer,children:[f?null:(0,r.tZ)(y.G,{css:fd.section,children:(0,r.tZ)(ts,{branch:c})}),v&&h?(0,r.tZ)(y.G,{css:fd.section,children:(0,r.tZ)(ud,{branch:c})}):null,f&&!v&&l&&h?(0,r.BX)(y.G,{css:fd.section,children:[(0,r.BX)(y.G,{css:fd.remoteUpdatesHeader,children:[(0,r.tZ)(Z.xv,{css:fd.headerText,multiline:!1,children:"Remote Updates"}),(0,r.tZ)(dd,{branch:c,remotes:l})]}),(0,r.tZ)(ld,{remotes:l,gotoPendingState:s})]}):null,f&&i?(0,r.BX)(y.G,{css:fd.section,children:[(0,r.BX)(y.G,{css:fd.reviewChangesHeader,children:[(0,r.tZ)(Q.D,{css:fd.changesPill,colorway:i.changes.length<=0?"grey":"primary",text:i.changes.length.toString()}),(0,r.tZ)(Z.xv,{css:fd.headerText,multiline:!1,children:"Review Changes"})]}),(0,r.tZ)(js,{status:i,onStagedFileClick:u})]}):null]}),p?(0,r.tZ)(zu,{items:m}):(0,r.tZ)(Yu,{})]}):(0,r.tZ)("div",{children:"No branch"})}function hd(e){return e.map((function(e){return{type:"commit",commit:e}}))}function vd(){return(0,r.BX)(y.G,{children:[(0,r.tZ)(Z.xv,{multiline:!1,children:"Unsupported state: you are in the middle of a cherry-pick."}),(0,r.tZ)(Z.xv,{multiline:!1,children:"Please finish the cherry-pick manually."})]})}var md=(0,Qn.iv)(yu.gU.nofill,g.l0.py(12),g.l0.px(8),g.l0.colWithGap(2),g.l0.justify.center,g.l0.borderRadius(8),g.l0.flex.shrink(1));function gd(e){var n=e.branch,t=e.current,i=void 0!==t&&t,o=e.onPreview;return(0,r.BX)(y.G,{css:md,tabIndex:0,role:"button","aria-label":"Preview branch ".concat((0,Ku.bF)(n,!0)),onClick:o,onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||null===o||void 0===o||o()},children:[(0,r.tZ)(Z.xv,{multiline:!1,children:(0,r.tZ)(yc,{name:n.name,remote:n.type===ml.HO.REMOTE?n.remote:null,current:i,onClick:o,icon:!0})}),(0,r.tZ)(Zd,{branch:n})]})}var yd=(0,Qn.iv)(g.l0.rowWithGap(8),g.l0.align.baseline,g.l0.flex.shrink(1));function Zd(e){var n=e.branch;return(0,r.BX)(y.G,{css:yd,children:[(0,r.tZ)(Uu,{name:n.commit.author.name,email:n.commit.author.email,color:"dimmest",allowPlaceholderAvatar:!0}),(0,r.tZ)(Eu.E,{date:n.commit.author.date,textColor:"dimmest",textVariant:"small"})]})}var bd=(0,Qn.iv)({verticalAlign:"middle"},g.l0.justify.spaceBetween),wd=(0,Qn.iv)(g.l0.display.flex),xd=(0,Qn.iv)(g.l0.p(4),g.l0.flex.row,g.l0.align.center,g.l0.justify.spaceBetween),kd=(0,Qn.iv)({verticalAlign:"middle"},g.l0.justify.spaceBetween,g.l0.borderRadius(8,8,0,0)),Cd=(0,Qn.iv)(g.l0.borderRadius(8)),Sd=(0,Qn.iv)(g.l0.borderRadius(0,0,8,8));function Td(e){var n=e.name,t=e.branches,i=e.current,o=void 0===i?null:i,l=e.switchMode,c=e.foldable,u=void 0!==c&&c,s=e.folded,d=void 0!==s&&s,f=(0,a.useState)(!!u&&d),p=f[0],h=f[1],v=(0,a.useMemo)((function(){return t.map((function(e){return(0,r.tZ)(gd,{branch:e,current:(0,ml.p3)(e,o),onPreview:function(){return l({mode:Cc.BRANCH,branch:e})}},(0,Ku.Qj)(e))}))}),[t,o,l]);return p?(0,r.tZ)(Oe.zx,{css:bd,text:n,iconRight:(0,r.tZ)(Rn.Z,{}),onClick:function(){return h(!1)},big:!0}):u?(0,r.BX)(y.G,{css:wd,children:[(0,r.tZ)(Oe.zx,{css:kd,text:n,iconRight:(0,r.tZ)(In.Z,{}),onClick:function(){return h(!0)},big:!0}),(0,r.tZ)(K.Tg,{css:Sd,elevated:!0,children:v})]}):(0,r.BX)(y.G,{css:wd,children:[(0,r.tZ)(y.G,{css:xd,children:(0,r.tZ)(Z.xv,{variant:"subheadDefault",multiline:!1,children:n})}),(0,r.tZ)(K.Tg,{css:Cd,elevated:!0,children:v})]})}var Ed=(0,Qn.iv)(g.l0.p(8),g.l0.colWithGap(8),g.l0.borderRadius(8)),Rd=(0,Qn.iv)(g.l0.rowWithGap(4)),Id=(0,Qn.iv)(g.l0.flex.grow(1));function Gd(){var e=function(){i(!0),c("")},n=(0,a.useState)(!0),t=n[0],i=n[1],o=(0,a.useState)(""),l=o[0],c=o[1],u=(0,a.useState)(!1),s=u[0],f=u[1],p=ql(),h=(0,d.Z)().git;function v(){return m.apply(this,arguments)}function m(){return(m=(0,Ge.Z)((function(){var e;return(0,_e.__generator)(this,(function(n){switch(n.label){case 0:return t||!l||s?[2]:(f(!0),[4,h.createBranch({name:l,checkout:!0})]);case 1:return(e=n.sent()).error?(p(e.error),f(!1)):(h.forceRefresh(),f(!1),c(""),i(!0),Dl("branch-created")),[2]}}))}))).apply(this,arguments)}if(t)return(0,r.tZ)(Oe.zx,{text:"Create Branch",iconLeft:(0,r.tZ)(rn.Z,{}),onClick:function(){return i(!1)}});var g=!l||!(0,Ku.Dc)(l);return(0,r.BX)(K.Tg,{css:Ed,elevated:!0,children:[(0,r.tZ)(_d,{value:l,onChange:c,onSubmit:v,onCancel:e,disabled:s}),(0,r.BX)(y.G,{css:Rd,children:[(0,r.tZ)(Oe.zx,{css:Id,text:"Cancel",onClick:e,disabled:s}),(0,r.tZ)(Oe.zx,{css:Id,text:"Create Branch",colorway:"primary",iconLeft:(0,r.tZ)(rn.Z,{}),onClick:v,loading:s,disabled:g})]})]})}var Dd=(0,Qn.iv)({opacity:.75});function _d(e){var n=e.value,t=e.disabled,i=e.onChange,o=e.onSubmit,a=e.onCancel,l=function(e){(0,Ku.dC)(e)&&(null===i||void 0===i||i(e))};return(0,r.tZ)(Qe.II,{value:n,css:t?Dd:void 0,disabled:t,placeholder:"Enter a name for your new branch",onChange:function(e){return l(e.currentTarget.value)},onKeyDown:function(e){return function(e,t){switch(e){case"Enter":null===o||void 0===o||o(),t();break;case"Escape":null===a||void 0===a||a(),t();break;case" ":if(""===n){t();break}l(n+"-"),t()}}(e.key,(function(){return e.preventDefault()}))},onBlur:function(){""===n&&(null===a||void 0===a||a())},autoFocus:!0})}function Pd(e){var n=e.currentBranch,t=e.switchMode,i=ql(),o=(0,gl.Z)(function(){var e=(0,Ge.Z)((function(e){var n,t,r,o,a,l,c,u,s,d,f,p,h,v,m,g,y,Z,b,w;return(0,_e.__generator)(this,(function(x){switch(x.label){case 0:return[4,e.listBranches()];case 1:return(n=x.sent()).error?(i(n.error),[2,n]):[4,e.findDefaultBranches()];case 2:if((t=x.sent()).error)return i(t.error),[2,t];r=n.branches,o=new Set,a=!0,l=!1,c=void 0;try{for(u=function(){var e=d.value,n=r.find((function(n){return(0,Ku.Pi)(n,e)}));n&&o.add(n)},s=t.refs[Symbol.iterator]();!(a=(d=s.next()).done);a=!0)u()}catch(k){l=!0,c=k}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}f=Date.now()-5184e6,p=[],h=[],v=!0,m=!1,g=void 0;try{for(y=r[Symbol.iterator]();!(v=(Z=y.next()).done);v=!0)b=Z.value,o.has(b)||(b.commit.author.date>f?p.push(b):h.push(b))}catch(k){m=!0,g=k}finally{try{v||null==y.return||y.return()}finally{if(m)throw g}}return w=Array.from(o),[2,{active:p,stale:h,important:w,error:null}]}}))}));return function(n){return e.apply(this,arguments)}}(),[i]);if(!o)return(0,r.tZ)(Yu,{});if(o.error)return(0,r.tZ)("div",{children:o.error});var a=o.active,l=o.stale,c=o.important;return(0,r.tZ)(y.G,{css:[g.l0.colWithGap(8)],children:(0,r.BX)(y.G,{css:[g.l0.pb(8),g.l0.px(8),g.l0.colWithGap(16)],children:[n?(0,r.BX)(y.G,{css:g.l0.colWithGap(8),children:[(0,r.tZ)(Td,{branches:[n],current:n,name:"Current",switchMode:t}),(0,r.tZ)(Gd,{})]}):null,0===c.length?null:(0,r.tZ)(Td,{branches:c,current:n,name:"Important",switchMode:t}),0===a.length?null:(0,r.tZ)(Td,{branches:a,current:n,name:"Active",switchMode:t,foldable:!0}),0===l.length?null:(0,r.tZ)(Td,{branches:l,current:n,name:"Stale",switchMode:t,foldable:!0,folded:!0})]})})}function Bd(){return(0,r.BX)(y.G,{children:[(0,r.tZ)(Z.xv,{multiline:!1,children:"Unsupported state: your HEAD is currently detached."}),(0,r.tZ)(Z.xv,{multiline:!1,children:"Please checkout a branch."})]})}var Ad=t(34938),Ud=t(62841),Ld=(0,b.X)({container:[g.l0.colWithGap(4)],file:[g.l0.rowWithGap(8),g.l0.align.center],fileLeft:[g.l0.rowWithGap(8),g.l0.flex.grow(1),g.l0.align.center],filePrefix:[g.l0.color.foregroundDimmest]});function Xd(e){var n=e.files,t=e.uniquePathMap,i=e.onFileClick,a=[];if((0,bl.Z)(n,Map)){var l=!0,c=!1,u=void 0;try{for(var s,d=n[Symbol.iterator]();!(l=(s=d.next()).done);l=!0){var f=(0,o.Z)(s.value,2),p=f[0],h=f[1],v=t.get(p);a.push({path:p,prefix:v,resolved:h})}}catch(T){c=!0,u=T}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}}else{var m=!0,b=!1,w=void 0;try{for(var x,k=n[Symbol.iterator]();!(m=(x=k.next()).done);m=!0){var C=x.value,S=t.get(C);a.push({path:C,prefix:S,resolved:!0})}}catch(T){b=!0,w=T}finally{try{m||null==k.return||k.return()}finally{if(b)throw w}}}return(0,r.tZ)(y.G,{css:Ld.container,children:a.map((function(e){var n=e.path,t=e.prefix,o=e.resolved;return(0,r.BX)(y.G,{css:Ld.file,children:[(0,r.BX)(y.G,{css:Ld.fileLeft,children:[(0,r.tZ)(dl.Z,{path:n}),(0,r.tZ)(Z.xv,{multiline:!1,children:(0,r.tZ)(wc,{path:n,prefix:t,onClick:function(){return i(n)}})})]}),o?(0,r.tZ)(ne.Z,{color:g.TV.greenStronger}):(0,r.tZ)(ee.Z,{color:g.TV.orangeStronger})]},n)}))})}function Nd(e){var n=e.hasConflicts?(0,r.BX)(r.HY,{children:[(0,r.tZ)("span",{css:g.l0.fontWeight.medium,children:"Resolve all conflicts to complete merge."}),(0,r.tZ)("br",{}),(0,r.tZ)("span",{children:"You can't do anything else until the merge has been completed or aborted."})]}):(0,r.BX)(r.HY,{children:[(0,r.tZ)("span",{css:g.l0.fontWeight.medium,children:"You are in the middle of a merge."}),(0,r.tZ)("br",{}),(0,r.tZ)("span",{children:"You can't do anything else until the merge has been completed or aborted. You have no conflicts to resolve, so the merge can be completed without any further action."})]});return(0,r.tZ)(He.E,{colorway:"warning",icon:(0,r.tZ)(ee.Z,{}),text:n})}var Md=t(6454),Fd=(0,b.X)({container:[g.l0.rowWithGap(4),g.l0.align.center,g.l0.justify.spaceBetween],left:[{flexBasis:0,flexGrow:1},g.l0.colWithGap(8)],right:{flexBasis:0,flexGrow:1},branch:[g.l0.p(8),g.l0.rowWithGap(4),g.l0.flex.grow(1),g.l0.center,g.l0.borderRadius(8)]});function Od(e){var n,t=e.branch,i=e.refs,a=e.refsAreBranches,l=e.isUpstreamPull;if(!i.length)return null;if(l){var c=(0,o.Z)((0,wl.Tg)(i[0]),2),u=c[0],s=c[1];u&&s&&(n=(0,r.tZ)(K.Tg,{css:Fd.branch,elevated:!0,children:(0,r.tZ)(yc,{remote:u,name:s,icon:!0,heading:!0})}))}return n||(n=i.map((function(e){return(0,r.tZ)(K.Tg,{css:Fd.branch,elevated:!0,children:(0,r.tZ)(yc,{name:e,icon:!!a||(0,r.tZ)(Md.Z,{size:16}),heading:!0})},e)}))),(0,r.BX)(y.G,{css:Fd.container,children:[(0,r.tZ)(y.G,{css:Fd.left,children:n}),(0,r.tZ)(gr.Z,{size:24,color:g.TV.foregroundDimmest}),(0,r.tZ)(y.G,{css:Fd.right,children:(0,r.tZ)(K.Tg,{css:Fd.branch,elevated:!0,children:(0,r.tZ)(yc,{name:t,icon:!0,current:!0,heading:!0})})})]})}var Wd=(0,b.X)({container:[g.l0.colWithGap(12),g.l0.pt(16),g.l0.pb(8),g.l0.px(8)],fakePaneHeader:[g.l0.p(8),g.l0.rowWithGap(8),g.l0.backgroundColor.backgroundDefault,g.l0.align.center,{borderBottom:"1px solid ".concat(g.TV.outlineDimmer)}],conflictResolution:[g.l0.colWithGap(16)],listContainer:[g.l0.p(8),g.l0.colWithGap(8),g.l0.borderRadius(8)],list:[g.l0.pb(8),g.l0.colWithGap(8)],listDisabled:[{opacity:.5},g.l0.pb(8),g.l0.colWithGap(8)],listHeader:[g.l0.pb(4),g.l0.flex.grow(1),g.l0.border({color:g.TV.outlineDimmer,direction:"bottom"})],listFiles:[g.l0.px(8)],includeOtherFiles:[{cursor:"pointer",maxWidth:"max-content",userSelect:"none"},g.l0.rowWithGap(8)],buttons:[g.l0.colWithGap(8)]});function Hd(e){var n=e.onFileClick,t=e.gotoPendingState,i=(0,a.useState)(!0),l=i[0],c=i[1],u=(0,a.useState)(!1),s=u[0],f=u[1],p=(0,a.useState)(!1),h=p[0],v=p[1],m=s||h,b=ql(),w=(0,d.Z)().git,x=(0,Io.D)(),k=function(){var e=(0,gl.Z)(function(){var e=(0,Ge.Z)((function(e){var n,t,r,i,a,l,c,u,s,d,f,p,h,v,m,g,y,Z,b,w;return(0,_e.__generator)(this,(function(x){switch(x.label){case 0:return[4,e.status()];case 1:return(n=x.sent()).error?[2,n]:(t=n.branch)?[4,e.getConflictingFiles()]:[2,{error:Zl.aq.HEAD_DETACHED}];case 2:return(r=x.sent()).error?[2,r]:(i=r.files,[4,e.getMergingRefs()]);case 3:if((a=x.sent()).error)return[2,a];l=a.commits,c=a.branches,u=c.length>0,s=u?c:l,d=n.changes.filter((function(e){return!e.unmerged})).map((function(e){return e.path})),f=!0,p=!0,h=!1,v=void 0;try{for(m=i[Symbol.iterator]();!(p=(g=m.next()).done);p=!0)if(!(0,o.Z)(g.value,2)[1]){f=!1;break}}catch(k){h=!0,v=k}finally{try{p||null==m.return||m.return()}finally{if(h)throw v}}return y=os(n.changes.map((function(e){return e.path}))),Z=i.size>0,b=d.length>0,w=null!==n.upstream&&1===c.length&&c[0]===n.upstream.branch,[2,{refs:s,branch:t,conflictingFiles:i,otherChangedFiles:d,refsAreBranches:u,allIsResolved:f,uniquePathMap:y,hasConflicts:Z,hasOtherChanges:b,isUpstreamPull:w,error:null}]}}))}));return function(n){return e.apply(this,arguments)}}());return e}();if((0,a.useEffect)((function(){(null===k||void 0===k?void 0:k.error)&&b(k.error)}),[null===k||void 0===k?void 0:k.error,b]),!k)return(0,r.tZ)(Yu,{});if(k.error)return null;var C=k.refs,S=k.branch,T=k.conflictingFiles,E=k.otherChangedFiles,R=k.refsAreBranches,I=k.allIsResolved,G=k.uniquePathMap,D=k.hasConflicts,_=k.hasOtherChanges,P=k.isUpstreamPull;function B(){return B=(0,Ge.Z)((function(){var e,n,r,i,o,a,c,u,s,d,p;return(0,_e.__generator)(this,(function(h){switch(h.label){case 0:if(!I||m)return[2];f(!0),e=[],n=!0,r=!1,i=void 0;try{for(o=T.keys()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0)c=a.value,e.push(c)}catch(v){r=!0,i=v}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return l&&(u=e).push.apply(u,(0,Zi.Z)(E)),[4,w.stageFiles({all:!1})];case 1:return(s=h.sent()).error?(b(s.error),f(!1),[2]):[4,w.stageFiles({add:e})];case 2:return(d=h.sent()).error?(b(d.error),f(!1),[2]):[4,w.mergeContinue()];case 3:return(p=h.sent()).error?[4,w.stageFiles({all:!1})]:[3,5];case 4:return h.sent(),b(p.error),f(!1),[3,6];case 5:t(),w.forceRefresh(),h.label=6;case 6:return[2]}}))})),B.apply(this,arguments)}function A(){return(A=(0,Ge.Z)((function(){var e;return(0,_e.__generator)(this,(function(n){switch(n.label){case 0:return m?[2]:(v(!0),[4,w.mergeAbort()]);case 1:return(e=n.sent()).error?(b(e.error),v(!1)):(t(),w.forceRefresh()),[2]}}))}))).apply(this,arguments)}var U=P?"Complete in-progress pull":"Complete in-progress merge";return D&&(U=P?"Resolve pull conflicts":"Resolve merge conflicts"),(0,r.BX)(y.G,{children:[(0,r.BX)(y.G,{css:Wd.fakePaneHeader,children:[(0,r.tZ)(Ud.Z,{}),(0,r.tZ)(Z.xv,{variant:"subheadDefault",multiline:!1,children:U})]}),(0,r.BX)(y.G,{css:Wd.container,children:[(0,r.tZ)(Od,{branch:S,refs:C,refsAreBranches:R,isUpstreamPull:P}),(0,r.tZ)(Nd,{hasConflicts:D}),(0,r.BX)(K.Tg,{css:Wd.listContainer,elevated:!0,children:[(0,r.BX)(y.G,{css:Wd.list,children:[(0,r.tZ)(y.G,{css:Wd.listHeader,children:(0,r.tZ)(Z.xv,{css:g.l0.fontWeight.medium,multiline:!1,children:"Conflicting Files"})}),(0,r.tZ)(y.G,{css:Wd.listFiles,children:D?(0,r.tZ)(Xd,{files:T,uniquePathMap:G,onFileClick:n}):(0,r.tZ)(Z.xv,{variant:"small",color:"dimmest",multiline:!1,children:"There are no conflicting files in this merge."})})]}),_?(0,r.BX)(y.G,{css:l?Wd.list:Wd.listDisabled,children:[(0,r.tZ)(y.G,{css:Wd.listHeader,children:(0,r.tZ)(Z.xv,{css:g.l0.fontWeight.medium,multiline:!1,children:"Other Changed Files"})}),(0,r.tZ)(y.G,{css:Wd.listFiles,children:(0,r.tZ)(Xd,{files:E,uniquePathMap:G,onFileClick:n})})]}):null]}),(0,r.BX)(y.G,{css:Wd.includeOtherFiles,tag:"label",children:[(0,r.tZ)(Ad.X,{id:x,checked:l,onChange:function(e){return c(e.target.checked)}}),(0,r.tZ)(Z.xv,{multiline:!1,children:"Include other changed files in commit"})]}),(0,r.BX)(y.G,{css:Wd.buttons,children:[(0,r.tZ)(Oe.zx,{text:P?"Complete pull":"Complete merge and commit",colorway:"primary",iconLeft:s?(0,r.tZ)(Je.Z,{}):(0,r.tZ)(Ud.Z,{}),disabled:!I||m,loading:s,onClick:function(){return B.apply(this,arguments)}}),(0,r.tZ)(Oe.zx,{text:P?"Abort pull":"Abort merge",colorway:"negative",iconLeft:h?(0,r.tZ)(Je.Z,{}):(0,r.tZ)(ws.Z,{}),disabled:m,loading:h,onClick:function(){return A.apply(this,arguments)}})]})]})]})}function Vd(){var e=(0,a.useState)(!1),n=e[0],t=e[1],i=ql(),o=(0,d.Z)().git;function l(){return(l=(0,Ge.Z)((function(){var e;return(0,_e.__generator)(this,(function(r){switch(r.label){case 0:return n?[2]:(t(!0),[4,o.init()]);case 1:return(e=r.sent()).error?(t(!1),i(e.error)):(o.forceRefresh(),Dl("repository-initialized")),[2]}}))}))).apply(this,arguments)}var c=n?"Initializing...":"Initialize Git Repository";return(0,r.tZ)(Oe.zx,{text:c,iconLeft:n?(0,r.tZ)(Je.Z,{}):(0,r.tZ)(hl.Z,{}),colorway:"primary",loading:n,onClick:function(){return l.apply(this,arguments)}})}var zd=(0,Qn.iv)(g.l0.height("100%"),g.l0.p(16),g.l0.colWithGap(16),g.l0.center),jd=(0,Qn.iv)(g.l0.colWithGap(16),g.l0.center,g.l0.flex.shrink(1));function qd(){return(0,r.BX)(y.G,{css:zd,children:[(0,r.BX)(y.G,{css:jd,children:[(0,r.tZ)(dn.Z,{alt:"A potted plant morphing into a branching graph like structure",src:"/public/images/git/git_uninitialized_art.svg",height:300,width:280,objectFit:"contain"}),(0,r.tZ)(Z.xv,{variant:"subheadDefault",multiline:!1,children:"Version control for your Repl."})]}),(0,r.tZ)(Vd,{})]})}function $d(){return(0,r.BX)(y.G,{children:[(0,r.tZ)(Z.xv,{multiline:!1,children:"Unsupported state: you are in the middle of a rebase."}),(0,r.tZ)(Z.xv,{multiline:!1,children:"Please finish the rebase manually."})]})}function Yd(){return(0,r.BX)(y.G,{children:[(0,r.tZ)(Z.xv,{multiline:!1,children:"Unsupported state: you are in the middle of a revert."}),(0,r.tZ)(Z.xv,{multiline:!1,children:"Please finish the revert manually."})]})}var Kd=t(81669),Qd=t(48511),Jd=t(9247),ef=(0,Qn.iv)(g.l0.rowWithGap(8),g.l0.align.center);function nf(e){var n=e.username,t=e.avatar;return(0,r.BX)(y.G,{css:ef,children:[(0,r.tZ)(Jd.Z,{url:null!==t&&void 0!==t?t:"/images/evalbot/evalbot_24"}),(0,r.tZ)(Z.xv,{variant:"subheadDefault",multiline:!1,children:n})]})}var tf=t(90171),rf=(0,b.X)({list:{"> div:first-child":g.l0.borderRadius(8,8,0,0),"> div:last-child":[g.l0.borderRadius(0,0,8,8),{border:"none"}]},profile:[yu.gU.filled,g.l0.flex.row,g.l0.justify.spaceBetween,g.l0.p(12),g.l0.borderRadius(0),g.l0.border({color:g.TV.outlineDefault,direction:"bottom"})],information:[g.l0.colWithGap(4),g.l0.flex.shrink(1)],informationRow:[g.l0.rowWithGap(8),g.l0.align.center],email:[g.l0.flex.shrink(1)],connectToGithubContainer:[g.l0.colWithGap(4),g.l0.p(12),g.l0.backgroundColor.backgroundHigher],divider:[g.l0.backgroundColor.outlineDefault],connectToGitHubTitle:[g.l0.rowWithGap(4),g.l0.align.center],notConnectedText:[g.l0.pb(4)],settingsButton:{background:"transparent",border:"none","&:hover":{textDecoration:"underline"}},radio:{pointerEvents:"none"}});function of(e){var n=e.profiles,t=e.current,i=e.showConnectToGithub,o=e.onSelectProvider,a=(0,Te.P5)({controlName:"flag-disable-github-import",logFlagToAnalytics:!1}),l=(0,tf.useRouter)(),c=(0,N.Vg)(l),u=(0,Io.D)();return(0,r.BX)(Qd.E,{name:u,css:rf.list,value:null!==t&&void 0!==t?t:"",children:[n.map((function(e){var n;n=e.provider===Zl.rG.GITHUB?"GitHub":"Default Profile";var i=void 0;return e.provider===Zl.rG.GITHUB&&(i=c?"/mobile/auth/github/app_permissions":"/auth/github/app_permissions?close=1"),(0,r.tZ)(af,{profile:e,providerName:n,current:e.provider===t,onSelectProvider:o,settingsURL:i},e.provider)})),i?(0,r.BX)(y.G,{css:rf.connectToGithubContainer,children:[(0,r.tZ)(y.G,{css:rf.connectToGitHubTitle,children:(0,r.tZ)(nf,{username:"GitHub Account"})}),(0,r.tZ)(Z.xv,{color:"dimmest",css:rf.notConnectedText,multiline:!1,children:"Your GitHub account is not connected."}),a?null:(0,r.tZ)(_l,{})]}):null]})}function af(e){var n=e.profile,t=e.current,i=e.providerName,o=e.settingsURL,a=e.onSelectProvider,l=n.provider,c=n.username,u=n.email,s=n.avatar,d=(0,Io.D)();return(0,r.BX)(y.G,{onClick:function(){return a(l)},css:rf.profile,children:[(0,r.BX)(y.G,{css:rf.information,children:[(0,r.BX)(y.G,{css:rf.informationRow,children:[(0,r.tZ)(nf,{username:c,avatar:s}),o?(0,r.tZ)(on.Z,{css:rf.settingsButton,text:"".concat(i," Settings"),iconRight:(0,r.tZ)(Ea.Z,{}),href:o,target:"_blank",outlined:!0,small:!0}):(0,r.tZ)(Z.xv,{color:"dimmest",variant:"small",multiline:!1,children:i})]}),(0,r.tZ)(Z.xv,{color:"dimmest",css:rf.email,multiline:!1,children:u})]}),(0,r.tZ)(Qd.Y,{css:rf.radio,id:d,checked:t,value:l})]})}var lf=(0,Qn.iv)(g.l0.flex.column);function cf(){var e=(0,d.Z)().git,n=(0,gl.Z)(function(){var e=(0,Ge.Z)((function(e){var n,t,r,i,o;return(0,_e.__generator)(this,(function(a){return n=e.getCurrentProfile(),t=e.getProfiles(),i=null!==(r=null===n||void 0===n?void 0:n.provider)&&void 0!==r?r:null,o=!e.hasProfile(Zl.rG.GITHUB),[2,{profiles:t,current:i,hasGitHub:o,error:null}]}))}));return function(n){return e.apply(this,arguments)}}());if(!n||n.error)return null;var t=n.profiles,i=n.current,o=n.hasGitHub;return(0,r.tZ)(y.G,{css:lf,children:(0,r.tZ)(of,{profiles:t,current:i,showConnectToGithub:o,onSelectProvider:function(n){e.setCurrentProfile(n),n===Zl.rG.REPLIT_DEFAULT?Dl("profile-changed",{profile:"replit"}):n===Zl.rG.GITHUB&&Dl("profile-changed",{profile:"github"})}})})}var uf=t(75920),sf=t(14654),df=t(51631);function ff(){var e=(0,jr.Z)(["\n  query GithubRemoteConfigRepl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        description\n        isPrivate\n        slug\n        url\n      }\n    }\n  }\n"]);return ff=function(){return e},e}function pf(){var e=(0,jr.Z)(['\n  query GithubRemoteConfigUser {\n    currentUser {\n      ... on CurrentUser {\n        id\n        gitHubInfo {\n          accessToken\n        }\n        repositories(count: 1, after: "0") {\n          ... on RepositoryConnection {\n            items {\n              id\n            }\n          }\n        }\n      }\n    }\n  }\n']);return pf=function(){return e},e}function hf(){var e=(0,jr.Z)(["\n  mutation GithubRemoteConfigCreateGithubRepo($input: CreateGithubRepoInput!) {\n    createGithubRepo(input: $input) {\n      ... on CreateGithubRepoResult {\n        remoteUrl\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return hf=function(){return e},e}var vf={},mf=(0,qr.Ps)(ff());pf();var gf=(0,qr.Ps)(hf());var yf=(0,Qn.iv)(g.l0.color.accentNegativeStronger,g.l0.pl(4));function Zf(e){var n=e.remoteName,t=e.updateRemote,i=(0,d.Z)().git,l=Tl(),c=(0,Io.H)(),u=(0,En.Z)(),s=(0,a.useRef)(null),f=(0,a.useRef)(null),p=(0,a.useState)(),h=p[0],v=p[1],m=function(e){var n=(0,M.Z)({},vf,e);return $r.a(mf,n)}({variables:{replId:u}}).data,b="Repl"===(null===m||void 0===m?void 0:m.repl.__typename)?m.repl:{slug:void 0,description:void 0,isPrivate:void 0,url:void 0},w=b.slug,x=b.description,k=b.isPrivate,C=b.url,S=(0,o.Z)(function(e){var n=(0,M.Z)({},vf,e);return ai.D(gf,n)}(),2),T=S[0],E=S[1].loading,R=(0,Rl.v)({onAuth:function(){Dl("github-user-connected")}}),I=(0,a.useState)(null===k||void 0===k||k),G=I[0],D=I[1],_=(0,a.useState)(w),P=_[0],B=_[1],A=(0,a.useState)(),U=A[0],L=A[1],X=(0,a.useState)(null!==x&&void 0!==x?x:C&&"Repository for https://replit.com".concat(C)),N=X[0],F=X[1],O=(0,a.useState)(),W=O[0],H=O[1],V=function(){var e=(0,Ge.Z)((function(e){var r,o,a;return(0,_e.__generator)(this,(function(l){switch(l.label){case 0:return[4,i.getRemotes()];case 1:return(r=l.sent()).error?(v("Error finding current remotes, ".concat(r.error)),[2]):r.remotes.has(n)?[4,i.setRemoteURL({remote:n,url:e})]:[3,3];case 2:return(o=l.sent()).error?(v("Error (".concat(o.error,") setting ").concat(n," to use ").concat(e," as a remote.")),[2]):(t(e),Dl("remote-edited"),[2]);case 3:return[4,i.addRemote({name:n,url:e})];case 4:return(a=l.sent()).error?(v("Error (".concat(a.error,") adding ").concat(n," ").concat(e," as a remote.")),[2]):(t(e),Dl("remote-added"),[2])}}))}));return function(n){return e.apply(this,arguments)}}(),z=function(){var e=(0,Ge.Z)((function(){var e,n,t,r;return(0,_e.__generator)(this,(function(i){switch(i.label){case 0:return L(void 0),H(void 0),v(void 0),P?(0,Ku.GE)(P)?[4,T({variables:{input:{name:P,description:null!==x&&void 0!==x?x:null,homepage:"replit.com".concat(C),isPrivate:G,ownerType:df.xJ.User}}})]:(L("Invalid remote name."),[2]):[2];case 1:return r=i.sent(),"UnauthorizedError"===(null===(e=r.data)||void 0===e?void 0:e.createGithubRepo.__typename)||"UserError"===(null===(n=r.data)||void 0===n?void 0:n.createGithubRepo.__typename)?(v(r.data.createGithubRepo.message),[2]):("CreateGithubRepoResult"===(null===(t=r.data)||void 0===t?void 0:t.createGithubRepo.__typename)&&(V(r.data.createGithubRepo.remoteUrl),Dl("github-repository-published")),[2])}}))}));return function(){return e.apply(this,arguments)}}();return l?(0,r.BX)(y.G,{children:[(0,r.tZ)(Z.xv,{color:"dimmest",multiline:!1,children:"Repository name"}),(0,r.tZ)(Qe.II,{ref:s,label:"Repository name",name:"Repository name",placeholder:"Enter repository name",value:P,onChange:function(e){L(void 0),B(e.target.value)},"aria-label":"Enter a name for the GitHub repository to be created for this Repl.",onKeyDown:function(e){var n;"Enter"===e.key&&(e.preventDefault(),null===(n=f.current)||void 0===n||n.focus())}}),(0,r.tZ)(Z.xv,{css:yf,multiline:!1,children:U}),(0,r.tZ)(Kd.Z,{height:1}),(0,r.tZ)(Z.xv,{color:"dimmest",multiline:!1,children:"Repository description"}),(0,r.tZ)(Qe.B,{ref:f,maxLength:350,label:"Repository description",name:"Repository description",placeholder:"Enter repository description",value:null!==N&&void 0!==N?N:void 0,onChange:function(e){H(void 0),F(e.target.value)},"aria-label":"Enter a description for the GitHub repository to be created for this Repl."}),(0,r.tZ)(Z.xv,{css:yf,multiline:!1,children:W}),(0,r.tZ)(Kd.Z,{height:1}),(0,r.tZ)(Z.xv,{color:"dimmest",multiline:!1,children:"Privacy"}),(0,r.BX)(uf.hE,{tag:"fieldset",id:c("privacy"),name:c("privacy"),value:G,onChange:function(e){return D(e)},row:!0,css:[g.l0.width("100%")],children:[(0,r.tZ)(uf.rK,{id:c("false"),value:!1,text:"Public",icon:(0,r.tZ)(sf.Z,{})}),(0,r.tZ)(uf.rK,{id:c("true"),value:!0,text:"Private",icon:(0,r.tZ)(kn.Z,{})})]}),(0,r.tZ)(Kd.Z,{height:2}),(0,r.tZ)(Oe.zx,{text:E?"Creating Repository on GitHub\u2026":"Create Repository on GitHub",colorway:"primary",iconLeft:(0,r.tZ)(Il.Z,{}),onClick:z,loading:E}),h?(0,r.tZ)(Z.xv,{css:yf,maxLines:2,multiline:!1,children:h}):null]}):(0,r.tZ)(y.G,{children:(0,r.tZ)(Oe.zx,{colorway:"primary",iconLeft:(0,r.tZ)(Il.Z,{}),text:"Connect to GitHub",onClick:R})})}var bf=(0,Qn.iv)(g.l0.rowWithGap(4)),wf=(0,Qn.iv)(g.l0.flex.growAndShrink(1)),xf=(0,Qn.iv)(g.l0.color.accentNegativeStronger,g.l0.pl(4));function kf(e){var n=e.initialRemoteUrl,t=e.remoteName,i=e.updateRemote,o=(0,d.Z)().git,l=(0,a.useState)(),c=l[0],u=l[1];(0,a.useEffect)((function(){u(void 0)}),[n]);var s=(0,a.useState)(),f=s[0],p=s[1],h=(0,a.useState)(!1),v=h[0],m=h[1],g=function(){var e=(0,Ge.Z)((function(){var e,n,r,a;return(0,_e.__generator)(this,(function(l){switch(l.label){case 0:if(l.trys.push([0,5,6,7]),!c)return[2];if(m(!0),!(0,Ku.LY)(c))throw Error("Invalid remote url.");return[4,o.getRemotes()];case 1:if((e=l.sent()).error)throw Error("Error finding current remotes, ".concat(e.error));return e.remotes.has(t)?[4,o.setRemoteURL({remote:t,url:c})]:[3,3];case 2:if((n=l.sent()).error)throw Error("Error (".concat(n.error,") setting ").concat(t," to use ").concat(c," as a remote."));return Dl("remote-edited"),i(c),[2];case 3:return[4,o.addRemote({name:t,url:c})];case 4:if((r=l.sent()).error)throw Error("Error (".concat(r.error,") adding ").concat(t," ").concat(c," as a remote."));return Dl("remote-added"),[3,7];case 5:return a=l.sent(),p(a.message),[3,7];case 6:return m(!1),[7];case 7:return[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,r.BX)(y.G,{children:[(0,r.tZ)(Qe.II,{label:"Remote URL",name:"Remote URL",placeholder:"Enter Remote URL",value:null!==c&&void 0!==c?c:n,autoComplete:"off",autoCorrect:"off",onChange:function(e){p(void 0),u(e.target.value)},inputMode:"url","aria-label":"Set remote URL to ".concat(c),onKeyDown:function(e){"Enter"===e.key&&g()}}),f?(0,r.tZ)(Z.xv,{variant:"small",css:xf,multiline:!1,children:f}):null,c&&c!==n?(0,r.BX)(r.HY,{children:[(0,r.tZ)(Kd.Z,{height:1}),(0,r.BX)(y.G,{css:bf,children:[(0,r.tZ)(Oe.zx,{css:wf,text:"Cancel",iconLeft:(0,r.tZ)(nt.Z,{}),onClick:function(){return u(void 0)}}),(0,r.tZ)(Oe.zx,{css:wf,text:v?"Saving\u2026":"Save",loading:v,colorway:"primary",iconLeft:(0,r.tZ)(ne.Z,{}),onClick:g})]})]}):null]})}var Cf=(0,Qn.iv)(g.l0.border({width:1,color:g.TV.outlineDimmer}),g.l0.borderRadius(8)),Sf=(0,Qn.iv)(yu.gU.filled,g.l0.flex.row,g.l0.justify.spaceBetween,g.l0.align.center,g.l0.px(8),g.l0.py(4),g.l0.borderRadius(8,8,0,0)),Tf=(0,Qn.iv)(g.l0.borderRadius(8,8,0,0)),Ef=(0,Qn.iv)(g.l0.borderRadius(8)),Rf=(0,Qn.iv)(g.l0.p(8)),If=(0,Qn.iv)(g.l0.flex.growAndShrink(1));function Gf(e){var n=e.title,t=e.expanded,i=e.content,o=e.onClick;return(0,r.BX)(y.G,{css:Cf,children:[(0,r.BX)(y.G,{css:[Sf,t?Tf:Ef],onClick:o,children:[(0,r.tZ)(y.G,{css:If,children:(0,r.tZ)(Z.xv,{variant:"subheadDefault",multiline:!1,children:n})}),t?(0,r.tZ)(In.Z,{size:20}):(0,r.tZ)(Rn.Z,{size:20})]}),t?(0,r.tZ)(y.G,{css:Rf,children:i}):null]})}var Df,_f="origin";function Pf(){var e=(0,gl.Z)(function(){var e=(0,Ge.Z)((function(e){var n,t,r,i,a;return(0,_e.__generator)(this,(function(l){switch(l.label){case 0:return[4,e.getRemotes()];case 1:return(n=l.sent()).error?[2,{url:void 0,name:_f,error:n.error}]:(r=(0,o.Z)(null!==(t=n.remotes.values())&&void 0!==t?t:void 0,1),(i=r[0])?[2,{url:i.push||i.fetch,name:null!==(a=i.name)&&void 0!==a?a:_f,error:null}]:[2,{url:void 0,name:_f,error:null}])}}))}));return function(n){return e.apply(this,arguments)}}());return null==e?(0,r.BX)(y.G,{css:g.l0.center,children:[(0,r.tZ)(Z.xv,{color:"dimmest",multiline:!1,children:"Loading remote information."}),(0,r.tZ)(Yu,{})]}):(null===e||void 0===e?void 0:e.error)?null:(0,r.tZ)(Bf,{initialRemoteUrl:null===e||void 0===e?void 0:e.url,remoteName:null===e||void 0===e?void 0:e.name})}function Bf(e){var n=e.initialRemoteUrl,t=e.remoteName,i=(0,a.useState)(n),o=i[0],l=i[1],c=(0,a.useState)(),u=c[0],s=c[1],d=function(e){l(e)};return(0,r.BX)(y.G,{children:[(0,r.tZ)(Z.xv,{variant:"subheadDefault",multiline:!1,children:"Remote"}),(0,r.tZ)(Kd.Z,{height:1}),(0,r.tZ)(kf,{remoteName:t,initialRemoteUrl:o,updateRemote:d}),(0,r.tZ)(Kd.Z,{height:2}),(0,r.tZ)(Gf,{title:"GitHub",expanded:u===Df.GitHub,onClick:function(){return s((function(e){return e===Df.GitHub?void 0:Df.GitHub}))},content:(0,r.tZ)(Zf,{remoteName:t,updateRemote:d})})]})}!function(e){e[e.GitHub=0]="GitHub"}(Df||(Df={}));var Af=(0,Qn.iv)(g.l0.px(16));function Uf(){return(0,r.BX)(y.G,{css:Af,children:[(0,r.tZ)(Kd.Z,{height:2}),(0,r.tZ)(Pf,{}),(0,r.tZ)(Kd.Z,{height:2}),(0,r.tZ)(Lf,{})]})}function Lf(){return(0,r.BX)(y.G,{children:[(0,r.tZ)(Z.xv,{variant:"subheadDefault",multiline:!1,children:"Commit author"}),(0,r.tZ)(Kd.Z,{height:1}),(0,r.tZ)(cf,{})]})}var Xf=(0,Qn.iv)(g.l0.colWithGap(16),g.l0.p(8),g.l0.pt(16)),Nf=(0,Qn.iv)(g.l0.colWithGap(16)),Mf=(0,Qn.iv)(g.l0.rowWithGap(8));function Ff(){var e=(0,a.useState)(!1),n=e[0],t=e[1],i=(0,a.useState)("Initial Commit"),o=i[0],l=i[1],c=(0,a.useState)(!0),u=c[0],s=c[1],f=ql(),p=(0,d.Z)().git,h=(0,Io.D)();function v(){return(v=(0,Ge.Z)((function(){var e,r,i;return(0,_e.__generator)(this,(function(a){switch(a.label){case 0:return n?[2]:(t(!0),u?[4,p.stageFiles({all:!0})]:[3,2]);case 1:return r=a.sent(),[3,4];case 2:return[4,p.stageFiles({all:!1})];case 3:r=a.sent(),a.label=4;case 4:return(e=r).error?(f(e.error),t(!1),[3,7]):[3,5];case 5:return[4,p.commit({message:o})];case 6:(i=a.sent()).error?(f(i.error),t(!1)):p.forceRefresh(),a.label=7;case 7:return[2]}}))}))).apply(this,arguments)}return(0,r.BX)(y.G,{children:[(0,r.tZ)(Wf,{}),(0,r.BX)(y.G,{css:Xf,children:[(0,r.tZ)(He.E,{colorway:"orange",icon:(0,r.tZ)(ee.Z,{}),text:"Your current branch doesn't have any commits. You need to make an initial commit before continuing."}),(0,r.BX)(y.G,{css:Nf,children:[(0,r.tZ)(Ms,{message:o,onMessageChange:l,disabled:n}),(0,r.BX)(y.G,{css:Mf,tag:"label",children:[(0,r.tZ)(Ad.X,{id:h,checked:u,onChange:function(e){return s(e.target.checked)}}),(0,r.tZ)(Z.xv,{multiline:!1,children:"Include all files in commit"})]}),(0,r.tZ)(Oe.zx,{text:n?"Committing...":"Create initial commit",iconLeft:n?(0,r.tZ)(Je.Z,{}):(0,r.tZ)(ne.Z,{}),colorway:"primary",disabled:!o,loading:n,onClick:function(){return v.apply(this,arguments)}})]})]})]})}var Of=(0,Qn.iv)(g.l0.px(8),g.l0.py(4),g.l0.rowWithGap(8),g.l0.backgroundColor.backgroundDefault,g.l0.align.center,{borderBottom:"1px solid ".concat(g.TV.outlineDimmer)});function Wf(){var e=ql(),n=(0,gl.Z)(function(){var n=(0,Ge.Z)((function(n){var t;return(0,_e.__generator)(this,(function(r){switch(r.label){case 0:return[4,n.status()];case 1:return(t=r.sent()).error&&e(t.error),[2,t]}}))}));return function(e){return n.apply(this,arguments)}}(),[e]);return(null===n||void 0===n?void 0:n.error)?null:(0,r.BX)(y.G,{css:Of,children:[(0,r.tZ)(se.h,{alt:"Back to dashboard",size:18,disabled:!0,children:(0,r.tZ)(Kl.Z,{})}),(null===n||void 0===n?void 0:n.branch)?(0,r.tZ)(yc,{name:n.branch,current:!0,heading:!0}):null]})}function Hf(e){var n=e.error;return(0,r.BX)(y.G,{children:[(0,r.tZ)(Z.xv,{multiline:!1,children:"Failed to start the Git pane."}),(0,r.BX)(Z.xv,{multiline:!1,children:["Error: ",n]})]})}var Vf=(0,Qn.iv)(g.l0.position.relative,g.l0.display.flex,g.l0.height("100%")),zf=(0,Qn.iv)(g.l0.flex.growAndShrink(1),g.l0.overflow("auto"));function jf(e){var n=e.isActive,t=void 0!==n&&n,i=e.performPaneOperation,o=(0,a.useRef)(),l=(0,a.useState)(Cc.CURRENT_BRANCH),c=l[0],u=l[1],s=(0,a.useState)(null),f=s[0],p=s[1],h=(0,a.useState)(!1),v=h[0],m=h[1];!function(e){var n=(0,d.Z)().git;(0,a.useEffect)((function(){e&&n.forceRefresh()}),[e,n])}(t);var g=(0,gl.Z)(function(){var e=(0,Ge.Z)((function(e){var n,t,r,i,o,a,l,c,u;return(0,_e.__generator)(this,(function(s){switch(s.label){case 0:return[4,e.getRepositoryState()];case 1:return(n=s.sent()).error?[2,n]:(t=n.state,r=n.type,i=null,o=null,a=null,r===vl.y5.INITIALIZING?[3,5]:[4,e.status()]);case 2:return(l=s.sent()).error?[2,l]:(i=l,[4,e.getRemotes()]);case 3:return(c=s.sent()).error?[2,c]:(o=c.remotes,i.branch?[4,e.getBranch(i.branch)]:[3,5]);case 4:if((u=s.sent()).error)return[2,u];a=u.branch,s.label=5;case 5:return[2,{state:t,type:r,status:i,remotes:o,currentBranch:a,error:null}]}}))}));return function(n){return e.apply(this,arguments)}}()),y=!g||g.error?null:g.currentBranch,Z=(0,a.useCallback)((function(e){switch(u(e),e){case Cc.DASHBOARD:Dl("pane-mode-changed",{mode:"dashboard"});break;case Cc.BRANCH:Dl("pane-mode-changed",{mode:"branch"});break;case Cc.CURRENT_BRANCH:Dl("pane-mode-changed",{mode:"current-branch"});break;case Cc.SETTINGS:Dl("pane-mode-changed",{mode:"settings"})}}),[]),b=(0,a.useCallback)((function(){o.current?(Z(o.current),o.current=void 0):Z(Cc.DASHBOARD)}),[Z]),w=(0,a.useCallback)((function(e){var n=function(e){o.current=c,Z(e)};switch(e.mode){case Cc.DASHBOARD:n(Cc.DASHBOARD);break;case Cc.BRANCH:if((0,ml.p3)(e.branch,y)){n(Cc.CURRENT_BRANCH);break}p(e.branch),n(Cc.BRANCH);break;case Cc.CURRENT_BRANCH:n(Cc.CURRENT_BRANCH);break;case Cc.SETTINGS:n(Cc.SETTINGS)}}),[Z,c,y]),x=(0,a.useCallback)((function(e){var n=(0,B.Dp)({path:e});i({operation:"open",pane:{type:n,data:{path:e}}})}),[i]),k=(0,a.useCallback)((function(){m(!0)}),[]);if(c===Cc.BRANCH&&(0,ml.p3)(f,y)&&Z(Cc.CURRENT_BRANCH),(0,a.useEffect)((function(){return m(!1)}),[g]),v||!g||g.error)return(0,r.tZ)(qf,{children:(null===g||void 0===g?void 0:g.error)?(0,r.tZ)(Hf,{error:g.error}):(0,r.tZ)(Yu,{})});var C=g.status,S=g.remotes,T=g.state;switch(g.type){case vl.y5.INITIALIZING:case vl.y5.INTERMEDIATE:case vl.y5.DETACHED_HEAD:return(0,r.tZ)(qf,{children:(0,r.tZ)($f,{state:T,onFileClick:x,gotoPendingState:k})});case vl.y5.NORMAL:return c===Cc.BRANCH&&!f||c===Cc.CURRENT_BRANCH&&!y?(0,r.tZ)(qf,{header:(0,r.tZ)(Rc,{mode:Cc.DASHBOARD,branch:null,switchMode:w,onBack:b}),children:(0,r.tZ)(Pd,{currentBranch:null,switchMode:w})}):(0,r.tZ)(qf,{header:(0,r.tZ)(Rc,{mode:c,branch:c===Cc.CURRENT_BRANCH?y:f,switchMode:w,onBack:b}),children:(0,r.tZ)(Yf,{mode:c,status:C,remotes:S,previewBranch:f,currentBranch:y,switchMode:w,onStagedFileClick:x,gotoPendingState:k})})}}function qf(e){var n=e.header,t=e.children,i=(0,a.useState)((function(){return(0,zn.MT)()}))[0];return(0,r.tZ)(Hl.Provider,{value:i,children:(0,r.BX)(y.G,{css:Vf,children:[(0,r.tZ)(Yl,{}),n,(0,r.tZ)(y.G,{css:zf,children:t})]})})}function $f(e){var n=e.state,t=e.onFileClick,i=e.gotoPendingState;switch(n){case vl.yG.NOT_INITIALIZED:return(0,r.tZ)(qd,{});case vl.yG.ON_UNBORN_BRANCH:return(0,r.tZ)(Ff,{});case vl.yG.MERGING:return(0,r.tZ)(Hd,{onFileClick:t,gotoPendingState:i});case vl.yG.REBASING:return(0,r.tZ)($d,{});case vl.yG.REVERTING:return(0,r.tZ)(Yd,{});case vl.yG.CHERRY_PICKING:return(0,r.tZ)(vd,{});case vl.yG.APPLYING_MAILBOX:return(0,r.tZ)(Ac,{});case vl.yG.BISECTING:return(0,r.tZ)(Uc,{});case vl.yG.DETACHED_HEAD:return(0,r.tZ)(Bd,{});default:return null}}function Yf(e){var n=e.mode,t=e.status,i=e.remotes,o=e.previewBranch,a=e.currentBranch,l=e.switchMode,c=e.onStagedFileClick,u=e.gotoPendingState;switch(n){case Cc.DASHBOARD:return(0,r.tZ)(Pd,{currentBranch:a,switchMode:l});case Cc.BRANCH:return(0,r.tZ)(pd,{status:t,branch:o,remotes:i,onStagedFileClick:c,gotoPendingState:u});case Cc.CURRENT_BRANCH:return(0,r.tZ)(pd,{status:t,remotes:i,branch:a,onStagedFileClick:c,gotoPendingState:u,current:!0});case Cc.SETTINGS:return(0,r.tZ)(Uf,{});default:(0,yl.Z)(n)}}var Kf={Content:function(e){var n=e.options,t=n.isActive,i=n.performPaneOperation;return(0,r.tZ)(jf,{isActive:t,performPaneOperation:i})},Icon:function(e){var n=e.size;return(0,r.tZ)(hl.Z,{size:n})},getTitle:function(){return"Git"}},Qf=t(21303),Jf=t(43668);function ep(e){var n=e.reversed,t=void 0!==n&&n,i=e.hideName,o=void 0!==i&&i,l=e.color,c=void 0===l?"default":l,u=(0,Qf.bA)(),s=(0,a.useMemo)((function(){return[t?g.l0.rowReverseWithGap(4):g.l0.rowWithGap(4),g.l0.align.center]}),[t]);if(!u)return null;if(0===u.count)return(0,r.BX)(y.G,{css:s,children:[(0,r.tZ)(Jf.Z,{size:24}),(0,r.tZ)(Z.xv,{color:c,multiline:!1,children:"Server Authored"})]});var d=u.changes[u.version];if(!u.users)return(0,r.BX)(y.G,{css:s,children:[(0,r.tZ)(Ru.q,{size:24,src:"/public/images/ghost.svg",username:"Unknown"}),o?null:(0,r.tZ)(Z.xv,{color:c,multiline:!1,children:"Unknown"})]});var f=u.users[d.userId];return f?(0,r.BX)(y.G,{css:s,children:[(0,r.tZ)(Ru.q,{size:24,src:f.image,username:f.username}),o?null:(0,r.tZ)(Z.xv,{color:c,multiline:!1,children:f.username})]}):d.timestamp>16546464e5?(0,r.BX)(y.G,{css:s,children:[(0,r.tZ)(Jf.Z,{size:24}),o?null:(0,r.tZ)(Z.xv,{color:c,multiline:!1,children:"Server Authored"})]}):(0,r.BX)(y.G,{css:s,children:[(0,r.tZ)(Ru.q,{size:24,src:"/public/images/ghost.svg",username:"Unknown"}),o?null:(0,r.tZ)(Z.xv,{color:c,multiline:!1,children:"Unknown"})]})}function np(){var e=(0,jr.Z)(["\n  query WorkspaceHistory2Users($ids: [Int!]!) {\n    currentUser {\n      id\n      username\n      image\n    }\n    usersByIds(ids: $ids) {\n      id\n      username\n      image\n    }\n  }\n"]);return np=function(){return e},e}function tp(){var e=(0,jr.Z)(["\n  query WorkspaceHistory2CurrentUserDate {\n    currentUser {\n      id\n      timeCreated\n    }\n  }\n"]);return tp=function(){return e},e}var rp=(0,qr.Ps)(np());tp();var ip=t(4821),op=t(66091),ap=t(5683),lp=t(83451),cp=t(45347),up=function(e){(0,ap.Z)(t,e);var n=(0,cp.Z)(t);function t(e){var r;return(0,op.Z)(this,t),(r=n.call(this,e)).name="UserError",r}return t}((0,lp.Z)(Error));function sp(e,n,t){return new Promise((function(r,i){try{var o=e.watchTextFile(n,{onReady:function(){var e=(0,Ge.Z)((function(e){var n,a;return(0,_e.__generator)(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,t(e)];case 1:return n=l.sent(),r(n),[3,3];case 2:return a=l.sent(),i(a),[3,3];case 3:return o(),[2]}}))}));return function(n){return e.apply(this,arguments)}}()})}catch(a){i(a)}}))}var dp,fp=ip.I;function pp(e,n){return hp.apply(this,arguments)}function hp(){return hp=(0,Ge.Z)((function(e,n){var t,r,i,o,a,l,c,u,s,d,f,p,h,v,m,g,y,Z;return(0,_e.__generator)(this,(function(b){switch(b.label){case 0:t=new Set,r=!0,i=!1,o=void 0;try{for(a=n[Symbol.iterator]();!(r=(l=a.next()).done);r=!0)(c=l.value).userId&&t.add(c.userId)}catch(w){i=!0,o=w}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return 0===t.size?[2,{}]:t.size>=fp?[2,dp.TooManyUsersRequestedError]:[4,e.query({query:rp,variables:{ids:Array.from(t)}})];case 1:if(u=b.sent(),s=u.data,d=u.error)throw d;f=s.currentUser?[s.currentUser].concat((0,Zi.Z)(s.usersByIds)):s.usersByIds,p={},h=!0,v=!1,m=void 0;try{for(g=f[Symbol.iterator]();!(h=(y=g.next()).done);h=!0)Z=y.value,p[Z.id]={id:Z.id,username:Z.username,image:Z.image}}catch(w){v=!0,m=w}finally{try{h||null==g.return||g.return()}finally{if(v)throw m}}return[2,p]}}))})),hp.apply(this,arguments)}function vp(){return vp=(0,Ge.Z)((function(e,n,t){var r,i,o;return(0,_e.__generator)(this,(function(a){switch(a.label){case 0:return[4,sp(e,t,function(){var e=(0,Ge.Z)((function(e){var n,t;return(0,_e.__generator)(this,(function(r){return n=e.fetchChanges,0===(t=e.version)?[2,{isDisposed:!1,result:[]}]:[2,n(1,t,"")]}))}));return function(n){return e.apply(this,arguments)}}())];case 1:return(r=a.sent()).isDisposed?[2,{data:null,handledError:"File deleted or removed."}]:(i=r.result,[4,pp(n,i)]);case 2:return(o=a.sent())===dp.TooManyUsersRequestedError?[2,{data:{changes:i,users:null},handledError:null}]:[2,{data:{changes:i,users:o},handledError:null}]}}))})),vp.apply(this,arguments)}function mp(e,n,t){return sp(e,n,function(){var n=(0,Ge.Z)((function(n){var r,i,o,a,l,c,u,s,d;return(0,_e.__generator)(this,(function(f){switch(f.label){case 0:if(r=n.fetchChanges,i=n.writeChange,o=n.version,t>o)throw new Error("Cannot restore to a version that does not exist");if(t===o)return[2];a=null,f.label=1;case 1:return f.trys.push([1,3,,4]),[4,r(1,o,"")];case 2:if((l=f.sent()).isDisposed)throw new up("File deleted or removed.");return a=l.result,[3,4];case 3:throw f.sent(),new up("Something went wrong while restoring the file. It is possible that a bad connection is to blame. Please try again.");case 4:c=(0,yt.Z)(a.slice(t,a.length).reverse()),u=c[0],s=c.slice(1),d=s.reduce((function(e,n){return e.compose(n.invertedChanges)}),u.invertedChanges);try{i(d)}catch(p){throw je.c_.captureException(p),new up("Something went wrong while restoring the file. Maybe the file changed while you were restoring it? Please try again.")}return[4,e.flush()];case 5:return f.sent(),[2]}}))}));return function(e){return n.apply(this,arguments)}}())}!function(e){e.TooManyUsersRequestedError="too_many_users"}(dp||(dp={}));var gp=t(46889),yp=(0,Qn.iv)({display:"grid",gridTemplateColumns:"auto 1fr",rowGap:"0.5rem",columnGap:"1rem","> dt":{display:"flex",alignItems:"center",fontWeight:"bold"}});function Zp(e){var n=e.onCloseHistory,t=(0,cn.Z)().showError,i=(0,a.useState)(!1),o=i[0],l=i[1],c=(0,a.useState)(!1),u=c[0],s=c[1],f=(0,d.Z)().fs,p=(0,Qf.bA)(),h=(0,gp.j)(),v="Restore",m=!0;function b(){return(b=(0,Ge.Z)((function(){var e,r,i;return(0,_e.__generator)(this,(function(o){switch(o.label){case 0:if(!p||!f||u)return[2];o.label=1;case 1:return o.trys.push([1,3,4,5]),s(!0),(0,gp.p)("versionRestored"),e=p.filePath,r=p.version,[4,mp(f,e,r+1)];case 2:return o.sent(),n(),[3,5];case 3:return i=o.sent(),(0,bl.Z)(i,up)?(t(i.message),[2]):(h(i,"restore"),[3,5]);case 4:return l(!1),s(!1),[7];case 5:return[2]}}))}))).apply(this,arguments)}return p?0===p.count?(v="No history",m=!0):u||o?(v="Restoring...",m=!0):p.playing?(v="Playing...",m=!0):p.version===p.count-1?(v="Viewing latest",m=!0):(v="Restore to here",m=!1):(v="Loading...",m=!0),(0,r.BX)(r.HY,{children:[(0,r.tZ)(Oe.zx,{text:v,disabled:m,onClick:function(){return l(!0)},colorway:"primary",iconLeft:(0,r.tZ)(Vi.Z,{})}),p&&0!==p.count&&(0,r.tZ)(We.u,{isOpen:o,onRequestClose:function(){u||l(!1)},children:(0,r.BX)(y.G,{css:g.l0.colWithGap(24),children:[(0,r.tZ)(Z.h4,{variant:"headerDefault",level:2,children:"Restore file version"}),(0,r.tZ)(K.Tg,{elevated:!0,css:[g.l0.px(16),g.l0.py(12),g.l0.borderRadius(8)],children:(0,r.BX)("dl",{css:yp,children:[(0,r.tZ)("dt",{children:"File"}),(0,r.tZ)("dd",{children:p.filePath}),(0,r.tZ)("dt",{children:"Version"}),(0,r.BX)("dd",{children:[p.version+1,(0,r.BX)("span",{css:[g.l0.color.foregroundDimmest],children:[(0,r.tZ)("span",{css:g.l0.mx(8),children:"/"}),p.count]})]}),(0,r.tZ)("dt",{children:"Date"}),(0,r.tZ)("dd",{children:(0,r.tZ)(Eu.E,{date:p.changes[p.version].timestamp,dateFormat:"absolute"})}),(0,r.tZ)("dt",{children:"Author"}),(0,r.tZ)("dd",{children:(0,r.tZ)(ep,{})})]})}),(0,r.tZ)(He.E,{icon:(0,r.tZ)(Ta.Z,{}),colorway:"positive",text:"Restoring is non-destructive. The restored content will become a new version at the end of history. You can always go back to the version you just had."}),(0,r.BX)(y.G,{css:[g.l0.rowWithGap(8),g.l0.justify.end],children:[(0,r.tZ)(Oe.zx,{text:"Cancel",disabled:u,onClick:function(){return l(!1)}}),(0,r.tZ)(Oe.zx,{text:u?"Restoring Version...":"Restore Version",disabled:u,colorway:"primary",onClick:function(){return b.apply(this,arguments)},iconLeft:(0,r.tZ)(Vi.Z,{})})]})]})})]})}var bp=t(12808);function wp(e,n){var t=(0,Qf.bA)(),i=(0,a.useRef)(null);(0,a.useImperativeHandle)(n,(function(){return i.current})),t&&i.current&&(i.current.setAttribute("aria-valuemin","1"),i.current.setAttribute("aria-valuemax",String(t.count)),i.current.setAttribute("aria-valuenow",String(t.version+1)));var o=(0,a.useMemo)((function(){return(0,r.tZ)("div",{ref:i,role:"slider",tabIndex:0,css:{position:"absolute",top:"0",left:"calc((100% - 16px) * var(--scrubber-progress, 0))",width:"16px",height:"16px",backgroundColor:g.TV.accentPrimaryDefault,borderRadius:"100%",outline:"none",cursor:"pointer",transition:"left var(--scrubber-transition-time, 100ms) ease-out",willChange:"left, transition",":focus":{boxShadow:"0 0 0 1px ".concat(g.TV.foregroundDefault," inset")}}})}),[]);return t&&t.count>1?o:null}var xp=(0,a.forwardRef)(wp);function kp(e,n){var t=(0,Qf.bA)(),i=(0,a.useMemo)((function(){return(0,r.BX)(r.HY,{children:[(0,r.tZ)("div",{ref:n,"aria-hidden":!0,css:{position:"relative",top:"0",width:"100%",height:"16px",margin:"0",cursor:"pointer"}}),(0,r.tZ)("div",{"aria-hidden":!0,css:{position:"absolute",top:"6px",left:"0",width:"100%",height:"4px",margin:"0",overflow:"hidden",pointerEvents:"none",backgroundColor:g.TV.backgroundHighest,borderRadius:"2px"},children:(0,r.tZ)("div",{"aria-hidden":!0,css:{position:"absolute",top:"0",left:"0",width:"100%",height:"4px",margin:"0",pointerEvents:"none",backgroundColor:g.TV.accentPrimaryDefault,transformOrigin:"left",transform:"scaleX(var(--scrubber-progress, 0))",transition:"transform var(--scrubber-transition-time, 100ms) ease-out",willChange:"transform, transition"}})})]})}),[n]),o=(0,a.useMemo)((function(){return(0,r.tZ)("div",{ref:n,"aria-hidden":!0,css:{width:"100%",height:"16px",pointerEvents:"none"},children:(0,r.tZ)("div",{css:{position:"absolute",width:"100%",height:"4px",top:"6px",left:"0",backgroundColor:g.TV.backgroundHighest,borderRadius:"2px"}})})}),[n]);return t&&t.count>1?i:o}var Cp,Sp=(0,a.forwardRef)(kp),Tp=["ArrowLeft","ArrowRight","Home","End"];function Ep(){var e=(0,Qf.bA)(),n=(0,Qf._Z)(),t=(0,a.useState)(!1),i=t[0],o=t[1],l=(0,a.useRef)(null),c=(0,a.useRef)(null),u=(0,a.useRef)(null),s=function(e){(0,bp.A)(l,"--scrubber-transition-time",e)},d=function(e){(0,bp.A)(l,"--scrubber-progress",e.toString())};if(e&&!i){var f=e.version/(e.count-1);d(f),e.playing?s("50ms"):s("100ms")}return(0,a.useEffect)((function(){if(e&&c.current&&u.current&&!i){var t=c.current,r=u.current,a=function(i){if(0===i.button){o(!0),r.focus();var a=t.getBoundingClientRect(),l=r.getBoundingClientRect(),c=a.width,u=l.width,f=i.target===t?u/2:i.clientX-l.left,p=null,h=function(t){var r=t-a.left-f,i=Math.max(0,Math.min(1,r/(c-u)));i!==p&&(p=i,d(i),n({version:Math.round(i*(e.count-1)),playing:!1}))};h(i.clientX);var v=function(e){s("0ms"),h(e.clientX),e.preventDefault(),e.stopPropagation()},m=function(){window.removeEventListener("pointermove",v),window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",m),s("100ms"),o(!1)};window.addEventListener("pointermove",v),window.addEventListener("pointerup",m),window.addEventListener("pointercancel",m),i.preventDefault(),i.stopPropagation()}};return t.addEventListener("pointerdown",a),r.addEventListener("pointerdown",a),function(){t.removeEventListener("pointerdown",a),r.removeEventListener("pointerdown",a)}}}),[e,n,i]),(0,a.useEffect)((function(){if(e&&u.current&&!i){var t=u.current,r=function(t){if(e&&Tp.includes(t.key)){var r=t.shiftKey?10:1,i=e.version,o=e.count-1,a=Math.max(0,i-r),l=Math.min(o,i+r),c=null;switch(t.key){case"ArrowLeft":c=a;break;case"ArrowRight":c=l;break;case"Home":c=0;break;case"End":c=o}null!==c&&(n({version:c,playing:!1}),t.preventDefault(),t.stopPropagation())}};return t.addEventListener("keydown",r),function(){t.removeEventListener("keydown",r)}}}),[e,n,i]),(0,a.useMemo)((function(){return(0,r.BX)(y.G,{innerRef:l,css:{position:"relative",height:"16px",width:"100%",touchAction:"none","--scrubber-progress":1,"--scrubber-transition-time":"100ms",":hover, :focus-within":{filter:"brightness(1.1)"},":hover:focus-within":{filter:"brightness(1.2)"}},children:[(0,r.tZ)(Sp,{ref:c}),(0,r.tZ)(xp,{ref:u})]})}),[])}!function(e){e.None="0ms",e.Normal="100ms",e.Fast="50ms"}(Cp||(Cp={}));var Rp=t(57843);function Ip(e){var n=(0,a.useState)({data:null,loading:!0,error:null,handledError:null}),t=n[0],r=n[1],i=(0,d.Z)().fs,o=(0,Rp.x)();return(0,a.useEffect)((function(){if(e){r({data:null,loading:!0,error:null,handledError:null});var n=!1;return function(e,n,t){return vp.apply(this,arguments)}(i,o,e).then((function(e){var t=e.data,i=e.handledError;n||r(i?{data:null,loading:!1,error:null,handledError:i}:{data:t,loading:!1,error:null,handledError:null})})).catch((function(e){n||((0,bl.Z)(e,Error)||(e=new Error(e)),r({data:null,loading:!1,error:e,handledError:null}))})),function(){n=!0}}r({data:null,loading:!1,error:null,handledError:null})}),[e,i,o]),t}function Gp(e){var n=e.onClose;return(0,r.tZ)(Oe.zx,{text:"Cancel",onClick:function(){(0,gp.p)("historyExplicitlyClosed"),n()}})}var Dp=t(35458),_p=(0,Qn.iv)({filter:"grayscale(100%) opacity(0.5)",pointerEvents:"none"});function Pp(){var e,n="/replEnvironmentMobile"===(0,tf.useRouter)().pathname,t=(0,Qf.bA)(),i=(0,Qf._Z)(),o=(0,Io.H)(),a=!t||0===t.count;return(0,r.BX)(y.G,{css:[g.l0.rowWithGap(8),g.l0.align.center,a?_p:null],children:[(0,r.tZ)(Dp.Z,{id:o("diffButton"),isOn:null!==(e=null===t||void 0===t?void 0:t.comparing)&&void 0!==e&&e,onChange:function(e){if(!a){var n=e.target.checked;i({comparing:n})}}}),(0,r.tZ)("label",{css:[{cursor:"pointer",userSelect:"none"},g.l0.flex.column,g.l0.align.center],htmlFor:o("diffButton"),children:(0,r.tZ)(Z.xv,{multiline:!1,children:n?"Compare":"Compare Latest"})})]})}function Bp(){var e=(0,Qf.bA)(),n=0,t=0;e&&0!==e.count&&(n=e.version+1,t=e.count);var i=e?"default":"dimmer";return(0,r.BX)(y.G,{css:[g.l0.rowWithGap(4),g.l0.justify.spaceBetween],children:[(0,r.tZ)(Z.xv,{css:{minWidth:"2ch",textAlign:"right"},color:i,multiline:!1,children:n}),(0,r.tZ)(Z.xv,{css:{width:"1ch",textAlign:"center"},color:"dimmer",multiline:!1,children:"/"}),(0,r.tZ)(Z.xv,{css:{minWidth:"2ch",textAlign:"left"},color:"dimmer",multiline:!1,children:t})]})}var Ap=t(40735),Up=t(76963);function Lp(e){if(e<0)throw new Error('Require at least zero ops to compute pace, got "'+e+'"');return 1/Math.log(e+2)*100}function Xp(){var e,n,t,i,o=(0,Qf.bA)(),l=(0,Qf._Z)(),c=(null!==(n=null===o||void 0===o||null===(e=o.changes)||void 0===e?void 0:e.length)&&void 0!==n?n:1)-1,u=null!==(t=null===o||void 0===o?void 0:o.version)&&void 0!==t?t:0,s=null!==(i=null===o||void 0===o?void 0:o.playing)&&void 0!==i&&i,d=!o||0===o.count,f=function(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Lp,i=(0,a.useState)(!1),o=i[0],l=i[1],c=(0,a.useCallback)((function(){n(1)}),[n]),u=(0,a.useCallback)((function(){e+1>t?l(!1):n(e+1)}),[n,e,t]),s=function(){l(!0)},d=function(){l(!1)};return(0,a.useEffect)((function(){if(o){var e=setTimeout((function(){u()}),r(t));return function(){return clearTimeout(e)}}}),[o,u,r,t]),{isPlaying:o,start:s,stop:d,reset:c}}(u,(function(e){return l({version:e})}),c),p=f.isPlaying,h=f.start,v=f.stop;(0,a.useEffect)((function(){p&&!s?v():!p&&s&&h()}),[s,p,h,v]);var m="Loading...";return o&&(p?m="Pause":o.version===o.count-1?m="Play file history from beginning":0===o.version?m="Play file history":o.version>0&&(m="Play file history from here")),(0,r.tZ)(se.h,{alt:m,size:24,disabled:d,onClick:function(){l(u===c?{version:0,playing:!0}:{playing:!s})},children:p?(0,r.tZ)(Up.Z,{}):(0,r.tZ)(Ap.Z,{})})}function Np(){return(0,r.BX)(y.G,{css:[g.l0.rowWithGap(4),g.l0.align.center],children:[(0,r.tZ)(Xp,{}),(0,r.tZ)(Mp,{}),(0,r.tZ)(Bp,{}),(0,r.tZ)(Fp,{})]})}function Mp(){var e=(0,Qf.bA)(),n=(0,Qf._Z)(),t=!e||0===e.version||0===e.count;return(0,r.tZ)(se.h,{alt:"Move backwards one version",size:24,disabled:t,onClick:function(){e&&e.version>0&&n({version:e.version-1})},children:(0,r.tZ)(Kl.Z,{})})}function Fp(){var e=(0,Qf.bA)(),n=(0,Qf._Z)(),t=!e||e.version===e.count-1||0===e.count;return(0,r.tZ)(se.h,{alt:"Move forwards one version",size:24,disabled:t,onClick:function(){e&&e.version<e.count-1&&n({version:e.version+1})},children:(0,r.tZ)(Bn.Z,{})})}function Op(){var e=(0,Qf.bA)();if(!e||0===e.count)return null;var n=e.changes[e.version].timestamp;return(0,r.tZ)(Eu.E,{textColor:"dimmer",dateFormat:"switch",date:n})}function Wp(e){var n=e.filePath,t=e.onCloseHistory,i="/replEnvironmentMobile"===(0,tf.useRouter)().pathname,o=i?g.l0.borderRadius(0):g.l0.borderRadius(0,0,8,8),l=(0,Qf.bA)(),c=(0,Qf._Z)(),u=(0,Qf.Ai)(),s=(0,gp.j)(),d=Ip(n),f=d.data,p=d.loading,h=d.error;return(0,a.useEffect)((function(){if(h)s(h,"history2-index",{filePath:n});else if(f&&!p)return c({filePath:n,changes:f.changes,users:f.users}),(0,gp.p)("historyLoaded"),function(){u()}}),[n,f,p,h,s,c,u]),(0,r.BX)(y.G,{css:[g.l0.colWithGap(8),g.l0.p(8),g.l0.zIndex(3),g.l0.overflow("hidden"),o,g.l0.backgroundColor.backgroundDefault,{borderTop:"2px solid ".concat(g.TV.backgroundHigher),boxShadow:"rgba(2, 2, 3, 0.125) 0px -16px 32px 0px"}],children:[(0,r.BX)(K.Tg,{css:[g.l0.position.relative,g.l0.colWithGap(4),g.l0.px(12),g.l0.pt(8),g.l0.pb(8),g.l0.align.center,g.l0.borderRadius(8),g.l0.overflow("hidden")],elevated:!0,children:[(0,r.tZ)(Ep,{}),(0,r.BX)(y.G,{css:[g.l0.display.flex,g.l0.flex.row,g.l0.align.center,g.l0.justify.spaceBetween,g.l0.width("100%")],children:[(0,r.tZ)(Np,{}),l&&l.count>0?(0,r.BX)(y.G,{css:[g.l0.rowWithGap(4),g.l0.align.center],children:[(0,r.tZ)(Op,{}),p||i?null:(0,r.tZ)(Z.xv,{color:"dimmer",multiline:!1,children:"\u2022"}),(0,r.tZ)(ep,{color:"dimmer",hideName:i,reversed:!0})]}):null]})]}),(0,r.BX)(y.G,{css:[g.l0.display.flex,g.l0.flex.row],children:[(0,r.tZ)(Hp,{justify:"flex-start",children:(0,r.tZ)(Pp,{})}),(0,r.BX)(Hp,{justify:"flex-end",children:[(0,r.tZ)(Gp,{onClose:t}),(0,r.tZ)(Zp,{onCloseHistory:t})]})]})]})}function Hp(e){var n=e.children,t=e.justify;return(0,r.tZ)("div",{css:{display:"flex",flexGrow:1,flexBasis:0,alignItems:"center",justifyContent:t,columnGap:g.TV.space8,minWidth:0},children:n})}var Vp=t(68935),zp=t(52682),jp=t(47581),qp=t(63230),$p=(0,jp.B)();function Yp(e){if((0,bl.Z)(e,yi.YW)){var n=e.state.field($p.state,!1);return{compareTo:n,changed:e.startState.field($p.state,!1)!==n}}return{compareTo:e.field($p.state,!1),changed:!1}}function Kp(e,n){e.state.field($p.state,!1)!==n&&e.dispatch({effects:$p.effect.of(n)})}var Qp,Jp,eh=yi.QQ.define({create:function(){return null},update:function(e,n){var t=Yp(n),r=t.compareTo,i=t.changed;if(!r)return null;if(!n.docChanged&&!i)return e;var o=n.state.doc.toString();return new qp.PO(o,r)}}),nh=null!==(Qp=globalThis.requestIdleCallback)&&void 0!==Qp?Qp:globalThis.requestAnimationFrame,th=null!==(Jp=globalThis.cancelIdleCallback)&&void 0!==Jp?Jp:globalThis.cancelAnimationFrame,rh=mi.p.line({class:"cm-diff-deleted"}),ih=function(e){(0,ap.Z)(t,e);var n=(0,cp.Z)(t);function t(e,r){var i;return(0,op.Z)(this,t),(i=n.call(this)).insertion=e,i.highlight=r,i}var r=t.prototype;return r.destroy=function(){this.pendingHighlight&&th(this.pendingHighlight)},r.toDOM=function(){var e=document.createElement("div");return e.className="cm-diff-inserted cm-line",this.updateDOM(e),e},r.eq=function(e){return!e.pendingHighlight&&this.insertion===e.insertion},r.updateDOM=function(e){var n=this;return this.pendingHighlight&&(th(this.pendingHighlight),this.pendingHighlight=null),this.insertion.length?e.textContent=this.insertion:e.innerHTML="&nbsp;",this.highlight&&this.insertion.length&&(this.pendingHighlight=nh((function(){if(n.highlight){n.pendingHighlight=null;try{var t=n.highlight();e.innerHTML="",e.append(t)}catch(r){}}}))),!0},t}(mi.l9),oh=yi.QQ.define({create:function(){return mi.p.none},update:function(e,n){var t=n.state.field(eh,!1);if(!t)return mi.p.none;var r=Yp(n).changed;if(!n.docChanged&&!r)return e.map(n.changes);var i=[],o=function(e,n){i.push({from:e,to:e,value:n})},a=t.startInsertions();if(a){var l=!0,c=!1,u=void 0;try{for(var s,d=function(){var e=s.value,t=new ih(e.content,(function(){return ah(n.state,e.content)}));o(0,mi.p.widget({widget:t,side:-1,block:!0}))},f=a[Symbol.iterator]();!(l=(s=f.next()).done);l=!0)d()}catch(Z){c=!0,u=Z}finally{try{l||null==f.return||f.return()}finally{if(c)throw u}}}var p=!0,h=!1,v=void 0;try{for(var m,g=function(){var e=m.value;if(e.isDeleted&&o(e.from,rh),e.insertions){var t=!0,r=!1,i=void 0;try{for(var a,l=function(){var t=a.value,r=new ih(t.content,(function(){return ah(n.state,t.content)}));o(e.to,mi.p.widget({widget:r,side:1,block:!0}))},c=e.insertions[Symbol.iterator]();!(t=(a=c.next()).done);t=!0)l()}catch(Z){r=!0,i=Z}finally{try{t||null==c.return||c.return()}finally{if(r)throw i}}}},y=t.lines()[Symbol.iterator]();!(p=(m=y.next()).done);p=!0)g()}catch(Z){h=!0,v=Z}finally{try{p||null==y.return||y.return()}finally{if(h)throw v}}return mi.p.set(i,!0)},provide:function(e){return mi.tk.decorations.from(e)}});function ah(e,n){var t,r=document.createDocumentFragment(),i=null===(t=e.facet(Vp.dK))||void 0===t?void 0:t.parser;if(!i){var o=document.createElement("span");return o.textContent=n,r.append(o),r}var a=i.parse(n),l={style:function(n){return(0,Vp.QN)(e,n)}},c=0;if((0,zp.bW)(a,l,(function(e,t,i){if(e>c){var o=document.createElement("span");o.textContent=n.slice(c,e),r.append(o)}var a=document.createElement("span");a.className=i,a.textContent=n.slice(e,t),r.append(a),c=t})),c<n.length){var u=document.createElement("span");u.textContent=n.slice(c),r.append(u)}return r}var lh,ch=function(e){(0,ap.Z)(t,e);var n=(0,cp.Z)(t);function t(e){var r;return(0,op.Z)(this,t),(r=n.call(this)).line=e,r}var r=t.prototype;return r.eq=function(e){return this.line===e.line},r.toDOM=function(){var e=document.createElement("div");return e.className="cm-diff-gutter-element-fallback",e.innerText=this.line.toString(),e},t}(mi.SJ),uh=function(e){(0,ap.Z)(t,e);var n=(0,cp.Z)(t);function t(e,r){var i;return(0,op.Z)(this,t),(i=n.call(this)).elementClass="cm-diff-gutter-block",i.lines=e,r&&(i.preceding=r),i}var r=t.prototype;return r.eq=function(e){var n,t,r,i;if((null===(n=this.lines)||void 0===n?void 0:n.length)!==(null===e||void 0===e||null===(t=e.lines)||void 0===t?void 0:t.length))return!1;if((null===(r=this.preceding)||void 0===r?void 0:r.length)!==(null===e||void 0===e||null===(i=e.preceding)||void 0===i?void 0:i.length))return!1;if(this.preceding&&e.preceding)for(var o=0;o<this.preceding.length;o++){var a=this.preceding[o],l=e.preceding[o];if(a.height!==l.height||a.left!==l.left||a.right!==l.right)return!1}if(this.lines&&e.lines)for(var c=0;c<this.lines.length;c++){var u=this.lines[c],s=e.lines[c];if(u.height!==s.height||u.left!==s.left||u.right!==s.right)return!1}return!0},r.toDOM=function(){var e,n=this,t=document.createElement("div");if(this.preceding){var r=this.preceding.slice().reverse(),i=0,o=!0,a=!1,l=void 0;try{for(var c,u=r[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var s=c.value;i+=s.height;var d=this.piece(s);d.style.position="absolute",d.style.top="-".concat(i,"px"),t.prepend(d)}}catch(p){a=!0,l=p}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}}var f=this.lines.map((function(e){return n.piece(e)}));return(e=t).append.apply(e,(0,Zi.Z)(f)),t},r.piece=function(e){var n=e.height,t=e.left,r=e.right,i=document.createElement("span");i.className="cm-diff-gutter-part",null!==t&&(i.innerText=t.toString());var o=document.createElement("span");o.className="cm-diff-gutter-part",null!==r&&(o.innerText=r.toString());var a=document.createElement("div");return a.className="cm-diff-gutter-element",a.style.height="".concat(n,"px"),a.append(i,o),null!==t&&null!==r||(null===r&&a.classList.add("cm-diff-gutter-deleted"),null===t&&a.classList.add("cm-diff-gutter-inserted")),a},t}(mi.SJ),sh=(0,mi.v5)({class:"cm-lineNumbers cm-diff-gutter",markers:function(e){var n=e.viewportLineBlocks,t=[],r=Yp(e.state).compareTo,i=e.state.field(eh,!1),o=function(e,n){t.push({from:e,to:e,value:n})};if(!r||!i){var a=!0,l=!1,c=void 0;try{for(var u,s=n[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var d=u.value,f=e.state.doc.lineAt(d.from).number;if(d.type===mi.kH.Text)o(d.from,new ch(f));else if(Array.isArray(d.type)){var p=!0,h=!1,v=void 0;try{for(var m,g=d.type[Symbol.iterator]();!(p=(m=g.next()).done);p=!0){var y=m.value;if(y.type===mi.kH.Text){o(y.from,new ch(f));break}}}catch(ie){h=!0,v=ie}finally{try{p||null==g.return||g.return()}finally{if(h)throw v}}}}}catch(ie){l=!0,c=ie}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}return yi.Xs.of(t,!0)}var Z=!0,b=!1,w=void 0;try{for(var x,k=n[Symbol.iterator]();!(Z=(x=k.next()).done);Z=!0){var C=x.value,S=[],T=e.state.doc.lineAt(C.from).number,E=i.line(T);if(E){var R,I=e.defaultLineHeight,G=E.offset,D=E.isDeleted,_=E.insertions,P=1===T?i.startInsertions():null,B=P?P.length:0,A=P?[]:null;if(Array.isArray(C.type)&&C.type.length>=B+(null!==(R=null===_||void 0===_?void 0:_.length)&&void 0!==R?R:0)+1){for(var U=0;U<C.type.length;U++){var L=C.type[U];if((null===L||void 0===L?void 0:L.type)===mi.kH.Text){if(P&&A)for(var X=0;X<P.length;X++){var N,M=P[X],F=C.type[U-X-1];A.push({height:null!==(N=null===F||void 0===F?void 0:F.height)&&void 0!==N?N:I,left:null,right:M.number})}if(S.push({height:L.height,left:T,right:D?null:T+G}),_)for(var O=0;O<_.length;O++){var W,H=_[O],V=C.type[U+O+1];S.push({height:null!==(W=null===V||void 0===V?void 0:V.height)&&void 0!==W?W:I,left:null,right:H.number})}break}}o(C.from,new uh(S,A))}else{if(P&&A){var z=!0,j=!1,q=void 0;try{for(var $,Y=P[Symbol.iterator]();!(z=($=Y.next()).done);z=!0){var K=$.value;A.push({height:I,left:null,right:K.number})}}catch(ie){j=!0,q=ie}finally{try{z||null==Y.return||Y.return()}finally{if(j)throw q}}}if(S.push({height:C.height,left:T,right:D?null:T+G}),_){var Q=!0,J=!1,ee=void 0;try{for(var ne,te=_[Symbol.iterator]();!(Q=(ne=te.next()).done);Q=!0){var re=ne.value;S.push({height:I,left:null,right:re.number})}}catch(ie){J=!0,ee=ie}finally{try{Q||null==te.return||te.return()}finally{if(J)throw ee}}}o(C.from,new uh(S,A))}}}}catch(ie){b=!0,w=ie}finally{try{Z||null==k.return||k.return()}finally{if(b)throw w}}return yi.Xs.of(t,!0)},lineMarkerChange:function(e){if(e.docChanged)return!0;var n=!0,t=!1,r=void 0;try{for(var i,o=e.transactions[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){if(Yp(i.value).changed)return!0}}catch(a){t=!0,r=a}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return!1},initialSpacer:function(e){return new ch(e.state.doc.lines)},updateSpacer:function(e,n){var t=n.state.doc.lines;return Yp(n.state).compareTo?new uh([{height:0,left:t,right:t}]):new ch(t)}}),dh="#0053A644",fh="#c93c3733",ph=[mi.tk.theme({".cm-diff-inserted":{backgroundColor:dh},".cm-diff-deleted":{backgroundColor:fh},".cm-diff-gutter .cm-diff-gutter-block":{position:"relative",padding:"0"},".cm-diff-gutter-element":{display:"flex",width:"100%",alignItems:"center",columnGap:"8px",padding:"0 6px",borderLeft:"4px solid transparent"},".cm-diff-gutter-part":{display:"inline-block",height:"100%",width:"50%",textAlign:"center"},".cm-diff-gutter-inserted":{backgroundColor:dh,borderLeftColor:"#0053A6"},".cm-diff-gutter-deleted":{backgroundColor:fh,borderLeftColor:"#c93c37"},".cm-diff-gutter + .cm-foldGutter":{width:"0",transform:"translateX(-12px)",overflow:"visible"},".cm-diff-gutter .cm-diff-gutter-element":{paddingRight:"16px"},".cm-diff-gutter .cm-diff-gutter-element-fallback":{paddingRight:"12px"}}),$p.state,eh,oh,sh,(0,Vp.mi)({openText:"\u25bc",closedText:"\u25b6\ufe0e"})],hh=t(57988),vh=function(){function e(n){var t=this;(0,op.Z)(this,e),this.view=n,this.overlay=document.createElement("div"),this.overlay.className="cm-overlay-generic",this.overlay.style.pointerEvents="none",this.overlay.style.contain="size style",this.overlay.setAttribute("aria-hidden","true"),this.view.scrollDOM.appendChild(this.overlay),this.elements=new Map,this.measureRequest={key:this,read:function(){var e=[],n=t.view.scrollDOM.getBoundingClientRect(),r=t.view.scrollDOM.scrollTop,i=t.view.scrollDOM.scrollLeft,o=!0,a=!1,l=void 0;try{for(var c,u=t.elements.values()[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var s=c.value,d=s.dom,f=s.pos,p=s.offsetX,h=s.offsetY,v=t.view.coordsAtPos(f),m=t.view.lineBlockAt(f);if(v){var g=m.top-r+n.top+t.view.documentPadding.top,y=Math.round((v.top-g)/t.view.defaultLineHeight)*t.view.defaultLineHeight+g,Z=i+v.left-n.left+p,b=r+y-n.top+h;e.push({dom:d,x:Z,y:b})}else e.push({dom:d,x:null,y:null})}}catch(w){a=!0,l=w}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}return e},write:function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=function(){var e=i.value,n=e.dom,t=e.x,r=e.y;if(null===t||null===r)return n.style.visibility="hidden",n.style.transition="none","continue";n.style.visibility="",n.style.transform="translate(".concat(t,"px, ").concat(r,"px)"),n.style.transition.startsWith("none")&&requestAnimationFrame((function(){n.style.transition=""}))},a=e[Symbol.iterator]();!(n=(i=a.next()).done);n=!0)o()}catch(l){t=!0,r=l}finally{try{n||null==a.return||a.return()}finally{if(t)throw r}}}}}var n=e.prototype;return n.destroy=function(){this.view.scrollDOM.removeChild(this.overlay)},n.map=function(e){if(e.geometryChanged||e.viewportChanged){if(e.docChanged){var n=Array.from(this.elements.values()),t=!0,r=!1,i=void 0;try{for(var o,a=n[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value,c=e.changes.mapPos(l.pos,-1,yi.gc.TrackDel);c?l.pos=c:this.removeElement(l.dom)}}catch(u){r=!0,i=u}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}}this.view.requestMeasure(this.measureRequest)}},n.addElement=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(!this.elements.has(e)){var i={dom:e,pos:n,offsetX:t,offsetY:r};return this.elements.set(e,i),this.overlay.appendChild(e),e.style.visibility="hidden",e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.willChange="transform",e.style.transition="none",this.view.requestMeasure(this.measureRequest),i}},n.removeElement=function(e){this.elements.has(e)&&(this.elements.delete(e),e.parentNode===this.overlay&&this.overlay.removeChild(e))},n.updateElement=function(e,n){var t=n.pos,r=n.offsetX,i=n.offsetY,o=this.elements.get(e);o&&(void 0!==t&&(o.pos=t),void 0!==r&&(o.offsetX=r),void 0!==i&&(o.offsetY=i),this.view.requestMeasure(this.measureRequest))},n.clear=function(){this.elements.clear(),this.overlay.innerHTML=""},e}();!function(e){e[e.Insertion=0]="Insertion",e[e.Deletion=1]="Deletion"}(lh||(lh={}));var mh=Symbol.iterator,gh=function(){function e(n){(0,op.Z)(this,e),this.map=new Map,this.duration=n}var n=e.prototype;return n.set=function(e,n,t,r,i){var o=this.map.get(e);o||(o=new Map,this.map.set(e,o)),o.set(n,{from:e,to:n,time:t,type:r,cursor:i})},n.get=function(e,n){var t=this.map.get(e);if(t)return t.get(n)},n.update=function(n){var t=Date.now(),r=new e(this.duration),i=!0,o=!1,a=void 0;try{for(var l,c=this[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value;if(!(t-u.time>this.duration)){var s=n.changes.mapPos(u.from,-1,yi.gc.TrackDel),d=n.changes.mapPos(u.to,-1,yi.gc.TrackDel);if(null!==s&&null!==d){var f=u.cursor;n.docChanged&&(f=!1),r.set(s,d,u.time,u.type,f)}}}}catch(p){o=!0,a=p}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return n.changes.iterChangedRanges((function(e,n,i,o){var a=i!==o?lh.Insertion:lh.Deletion;r.set(i,o,t,a,!0)}),!0),r},n.cursors=function(){var e,n,t,r,i,o,a;return(0,_e.__generator)(this,(function(l){switch(l.label){case 0:e=!0,n=!1,t=void 0,l.label=1;case 1:l.trys.push([1,6,7,8]),r=this[Symbol.iterator](),l.label=2;case 2:return(e=(i=r.next()).done)?[3,5]:(o=i.value).cursor?[4,{type:o.type,pos:o.to}]:[3,4];case 3:l.sent(),l.label=4;case 4:return e=!0,[3,2];case 5:return[3,8];case 6:return a=l.sent(),n=!0,t=a,[3,8];case 7:try{e||null==r.return||r.return()}finally{if(n)throw t}return[7];case 8:return[2]}}))},n[mh]=function(){var e=[],n=!0,t=!1,r=void 0;try{for(var i,o=this.map.values()[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value,l=!0,c=!1,u=void 0;try{for(var s,d=a.values()[Symbol.iterator]();!(l=(s=d.next()).done);l=!0){var f=s.value;e.push(f)}}catch(p){c=!0,u=p}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}}}catch(p){t=!0,r=p}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return e[Symbol.iterator]()},e}(),yh=1e3,Zh="cm-flash-insertion",bh="cm-flash-deletion",wh="cm-flash-element",xh=mi.tk.theme((0,i.Z)({},".".concat(Zh,", .").concat(bh),{display:"inline-block"}));function kh(e){return mi.p.mark({class:bh,tagName:wh,attributes:{"data-time":e.toString()}})}function Ch(e,n){var t=e===lh.Insertion?"rgba(0, 100, 255, 1)":"rgba(255, 32, 32, 1)",r=document.createElement("div");return r.style.width="3px",r.style.height=n,r.style.borderRadius="1px",r.style.backgroundColor=t,r.animate&&r.animate({opacity:[1,0]},{duration:500,delay:400,fill:"forwards"}),r}var Sh=function(e){(0,ap.Z)(t,e);var n=(0,cp.Z)(t);function t(){return(0,op.Z)(this,t),n.apply(this,arguments)}var r=t.prototype;return r.isNested=function(){for(var e=this.parentElement;e&&!e.classList.contains("cm-line");){if((0,bl.Z)(e,t)&&e.type===this.type)return!0;e=e.parentElement}return!1},r.stop=function(){var e,n;null===(e=this.animation)||void 0===e||null===(n=e.cancel)||void 0===n||n.call(e)},r.play=function(){var e=this.isPlaying;if(this.stop(),!this.isNested()){var n=Date.now()-parseInt(this.getAttribute("data-time")||"0",10);if(!(n>yh)){var t=this.type===lh.Insertion?"rgba(100, 255, 0, 0.3)":"rgba(255, 32, 32, 0.25)",r={backgroundColor:e?[t,t,"transparent"]:["transparent",t,"transparent"],offset:[0,.05,1]},i={id:"cm-flash-anim",duration:yh,easing:"ease-in-out",delay:-n};this.animate&&(this.animation=this.animate(r,i))}}},r.connectedCallback=function(){this.play()},r.attributeChangedCallback=function(e,n,t){"data-time"===e&&t&&this.play()},(0,hh.Z)(t,[{key:"type",get:function(){return this.classList.contains(Zh)?lh.Insertion:lh.Deletion}},{key:"isPlaying",get:function(){var e;return"running"===(null===(e=this.animation)||void 0===e?void 0:e.playState)}}],[{key:"observedAttributes",get:function(){return["data-time"]}}]),t}((0,lp.Z)(HTMLElement));customElements.get(wh)||customElements.define(wh,Sh);var Th=function(){function e(n){(0,op.Z)(this,e),this.view=n,this.prevFlashes=new gh(yh),this.decorations=mi.p.set([]),this.hasRenderedOnce=!1,this.overlay=new vh(n)}var n=e.prototype;return n.destroy=function(){this.overlay.destroy()},n.update=function(e){if(this.hasRenderedOnce){var n,t=this.prevFlashes.update(e),r=[],i=!0,o=!1,a=void 0;try{for(var l,c=t[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value;switch(u.type){case lh.Insertion:r.push({from:u.from,to:u.to,value:(n=u.time,mi.p.mark({class:Zh,tagName:wh,attributes:{"data-time":n.toString()}}))});break;case lh.Deletion:var s=e.state.wordAt(u.from);s&&r.push({from:s.from,to:u.to,value:kh(u.time)})}}}catch(w){o=!0,a=w}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}this.overlay.clear();var d=this.view.defaultLineHeight.toString()+"px",f=!0,p=!1,h=void 0;try{for(var v,m=t.cursors()[Symbol.iterator]();!(f=(v=m.next()).done);f=!0){var g=v.value,y=g.type,Z=g.pos,b=Ch(y,d);this.overlay.addElement(b,Z)}}catch(w){p=!0,h=w}finally{try{f||null==m.return||m.return()}finally{if(p)throw h}}this.prevFlashes=t,this.decorations=mi.p.set(r,!0)}else e.docChanged&&(this.hasRenderedOnce=!0)},e}(),Eh=mi.lg.fromClass(Th,{decorations:function(e){return e.decorations}}),Rh=yi.Wl.lowest([xh,Eh]),Ih=t(74121),Gh=t(52491),Dh=t(20864),_h=function(){function e(n){(0,op.Z)(this,e),this.changes=[],this.forward=[],this.inverted=[],this.locations=[];var t=!0,r=!1,i=void 0;try{for(var o,a=this,l=function(){var e=o.value,n=e.changes,t=e.invertedChanges,r=null,i=!1;n.iterChangedRanges((function(e,n,t,o){i||(r||(r=o),t!==o&&(i=!0))})),a.forward.push(n),a.inverted.push(t),a.locations.push(r)},c=n[Symbol.iterator]();!(t=(o=c.next()).done);t=!0)l()}catch(u){r=!0,i=u}finally{try{t||null==c.return||c.return()}finally{if(r)throw i}}}var n=e.prototype;return n.slice=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;if(e>this.length||n>this.length||e<0||n<0)throw new Error("Invalid version range");if(e===n){if(0===this.length)return[yi.as.empty(0),null];var t=this.forward[e].newLength;return[yi.as.empty(t),null]}var r,i=Ph(e<n?this.forward.slice(e,n):this.inverted.slice(n,e).reverse()),o=e<n?e:n-1,a=null!==(r=this.locations[o])&&void 0!==r?r:null;return null!==a&&a>i.newLength&&(a=i.newLength),[i,a]},n.get=function(e){if(e>this.length||e<0)throw new Error("Invalid version");return this.changes[e]},n.documentFor=function(e){if(e>this.length||e<0)throw new Error("Invalid version");if(0===this.length)return"";var n=(0,o.Z)(this.slice(0,e),1)[0],t=yi.xv.of([""]);return n.apply(t).sliceString(0)},(0,hh.Z)(e,[{key:"length",get:function(){return this.forward.length}}]),e}();function Ph(e){if(0===e.length)return yi.as.empty(0);if(1===e.length)return e[0];var n=(0,yt.Z)(e),t=n[0],r=n.slice(1),i=t,o=!0,a=!1,l=void 0;try{for(var c,u=r[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var s=c.value;i=i.compose(s)}}catch(d){a=!0,l=d}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}return i}function Bh(e,n){var t=(0,a.useMemo)((function(){return(null===n||void 0===n?void 0:n.changes)?new _h(n.changes):null}),[null===n||void 0===n?void 0:n.changes]),r=(0,a.useMemo)((function(){return t?t.documentFor(t.length):null}),[t]),i=(0,a.useRef)({current:-1,next:0,pending:!1});(0,a.useEffect)((function(){if(e)return function(){i.current.pending=!1,i.current={current:-1,next:0,pending:!1}}}),[e]),(0,a.useEffect)((function(){if(e&&n&&t){n.comparing?Kp(e,r):Kp(e,null);var a=i.current;a.next=n.version,a.pending||a.current===a.next||(a.pending=!0,requestAnimationFrame((function(){!1!==a.pending&&(a.pending=!1,e&&t&&a.current!==a.next&&(!function(e,n,t,r){var i=(0,o.Z)(n.slice(t+1,r+1),2),a=i[0],l=i[1];if(a.length!==e.state.doc.length){var c=(0,o.Z)(n.slice(0,r+1),1)[0];if(c.length!==e.state.doc.length)throw new Error("Unresolvable mismatch between changes and document");return e.dispatch({changes:{from:0,to:e.state.doc.length}}),void e.dispatch({changes:c})}e.dispatch({changes:a,effects:l?mi.tk.scrollIntoView(l,{yMargin:10}):void 0})}(e,t,a.current,a.next),a.current=a.next))})))}}),[e,n,t,r])}var Ah=t(88253),Uh=[Rh,ph];function Lh(e){var n=e.filePath,t=(0,Qf.bA)(),i=(0,Fe.Z)(),o=i.ref,l=i.view;(0,Ih.VD)(l),(0,Qf._H)(l);var c=(0,gp.j)();(0,Gh.Y)({view:l}),Bh(l,t);var u=(0,tf.useRouter)(),s=(0,N.Vg)(u),d=Ah.U.use(s),f=(0,a.useMemo)((function(){return[d,Uh]}),[d]);return(0,r.tZ)("div",{css:Dh.ev,children:(0,r.tZ)("div",{css:Dh.ac,children:t&&0===t.count?(0,r.tZ)(Xh,{}):(0,r.tZ)("div",{css:Dh.ac,children:(0,r.tZ)(Me.Z,{ref:o,css:Dh.Mp,filePath:n,extensions:f,initializing:!t,onException:function(e){c(e,"viewer-codemirror")},readOnly:!0,noHistory:!0,hideGutter:!0})})})})}function Xh(){return(0,r.tZ)("div",{css:[Dh.ac,{display:"flex",alignItems:"center",justifyContent:"center"}],children:(0,r.tZ)("span",{children:"This file has no history."})})}var Nh={Content:function(e){var n=e.pane,t=e.options;return(0,r.tZ)(Mh,(0,De.Z)((0,M.Z)({},n.data),{performPaneOperation:t.performPaneOperation}))},Icon:function(e){var n=e.size;return(0,r.tZ)(Vi.Z,{size:n})},getTitle:function(e){return e.data.path?"History - ".concat((0,v.UO)(e.data.path)):"History - no file open"}};function Mh(e){var n=e.path,t=e.performPaneOperation,i=(0,a.useState)((function(){return(0,zn.MT)()}))[0],o=(0,a.useState)((function(){return(0,zn.MT)()}))[0],l=(0,mt.Mp)({path:n,performPaneOperation:t});(0,S.L5)((function(){if(l)return{commands:l}}),[l]);var c=(0,pn.Z)((function(){return function(){t({operation:"replace",pane:{type:"codeEditor",data:{path:n}}})}}),[n,t]);return n?(0,r.tZ)(Ih.Cl.Provider,{value:i,children:(0,r.tZ)(Qf.ox.Provider,{value:o,children:(0,r.BX)("div",{css:{position:"relative",display:"flex",flexDirection:"column",overflowY:"hidden",height:"100%",width:"100%"},children:[(0,r.tZ)(mt.HK,{path:n,performPaneOperation:t}),(0,r.tZ)(Lh,{filePath:n}),(0,r.tZ)(Wp,{filePath:n,onCloseHistory:c})]})})}):null}var Fh=t(91715),Oh=t.n(Fh),Wh=t(89025),Hh=t(86785),Vh=(0,b.X)({create:[g.l0.colWithGap(8),g.l0.p(8)],pedit:{width:"100%",height:"100%"},canvas:{width:"100%",height:"100%",outline:"none",position:"absolute",top:0,left:0},upgradeButton:[g.l0.position.absolute,g.l0.top(8),g.l0.left("50%"),{transform:"translateX(-50%)"}]});function zh(e){var n=e.data,t=e.onSave,i=a.useRef(null),l=a.useRef(null),c=(0,d.Z)().fs,u=(0,cn.Z)(),s=u.showError,p=u.showConfirm,h=(0,o.Z)(a.useState(!1),2),v=h[0],m=h[1],g=(0,f.Z)((function(){var e=i.current;if(!e)return null;e.width=e.offsetWidth,e.height=e.offsetHeight;var n=e.getContext("2d");n&&(n.imageSmoothingEnabled=!1)}),{type:"debounce",wait:100});return a.useEffect((function(){var e=i.current;if(e){e.width=e.offsetWidth,e.height=e.offsetHeight;var r=Oh()({canvas:e,data:n}),o=function(){return t(r.save())};return r.on("change",o),r.on("save",o),r.on("export",(function(){return m(!0)})),l.current=r,e.focus(),function(){r&&r.cleanUp(),l.current&&(l.current=null)}}}),[n,t,i]),(0,r.BX)(r.HY,{children:[(0,r.tZ)("canvas",{css:Vh.canvas,ref:function(e){i.current=e,g(e)},tabIndex:0}),(0,r.tZ)(We.u,{isOpen:v,onRequestClose:function(){return m(!1)},children:(0,r.tZ)(Wh.Z,{prompt:"Export",desc:"What name to give to the exported file?",placeholder:"filename",type:"text",onCancel:function(){return m(!1)},onConfirm:function(e){if(l.current){var n="".concat(e,".png"),t=l.current.curFrame().toPNG();c.writeFile(n,Ro.Z.from(t)).then((function(e){e.error?s("Failed to write to file ".concat(n)):(p("Successfully exported to ".concat(n)),m(!1))}))}else m(!1)}})})]})}function jh(e){var n=e.activeFile,t=(0,d.Z)().fs,i=(0,o.Z)(a.useState(!0),2),l=i[0],c=i[1],u=(0,o.Z)(a.useState(null),2),s=u[0],f=u[1],p=(0,cn.Z)().showError,h=n.endsWith(".kbmsprite");a.useEffect((function(){var e=!1;function r(){return(r=(0,Ge.Z)((function(){var r,i,o;return(0,_e.__generator)(this,(function(a){switch(a.label){case 0:return[4,t.readFile(n)];case 1:return r=a.sent(),c(!1),e?[2]:r.error?(p("failed to read ".concat(n)),[2]):(i=r.content.toString(),o=i&&JSON.parse(i),f(h?(0,Hh.C)(o):o),[2])}}))}))).apply(this,arguments)}return function(){r.apply(this,arguments)}(),function(){e=!0}}),[t,n,p,h]);var v=a.useCallback(function(){var e=(0,Ge.Z)((function(e){return(0,_e.__generator)(this,(function(r){switch(r.label){case 0:return h?[4,(0,Hh.u)(e)]:[3,2];case 1:e=r.sent(),r.label=2;case 2:return[4,t.writeFile(n,Ro.Z.from(JSON.stringify(e)))];case 3:return r.sent().error&&p("Failed to save ".concat(n,", please try again")),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),[t,n,p,h]);return l?(0,r.tZ)(Je.Z,{}):s?(0,r.tZ)(zh,{data:s,onSave:v}):(0,r.tZ)(qh,{onCreate:function(e){return f(e)}})}function qh(e){var n=e.onCreate,t=(0,o.Z)(a.useState(""),2),i=t[0],l=t[1],c=(0,o.Z)(a.useState(""),2),u=c[0],s=c[1],d=Number(i),f=Number(u),p=d>0&&f>0;return(0,r.BX)(y.G,{css:Vh.create,children:[(0,r.tZ)(Z.xv,{variant:"subheadDefault",multiline:!1,children:"Create a Pedit file"}),(0,r.tZ)(Qe.II,{placeholder:"width",value:i,onChange:function(e){return l(e.target.value)}}),(0,r.tZ)(Qe.II,{placeholder:"height",value:u,onChange:function(e){return s(e.target.value)}}),(0,r.tZ)(Oe.zx,{text:"Create",disabled:!p,onClick:function(){n({width:Math.ceil(d),height:Math.ceil(f)})}})]})}var $h={Content:function(e){var n=e.pane,t=e.options.performPaneOperation;return(0,r.tZ)(Yh,{path:n.data.path,performPaneOperation:t})},Icon:function(e){var n=e.size;return(0,r.tZ)(Be.Z,{size:n})},getTitle:function(e){return(0,v.UO)(e.data.path)}};function Yh(e){var n=e.path,t=e.performPaneOperation,i=(0,mt.Mp)({path:n,performPaneOperation:t});return(0,S.L5)((function(){if(i)return{commands:i}}),[i]),(0,r.BX)(r.HY,{children:[(0,r.tZ)(mt.HK,{path:n,performPaneOperation:t}),(0,r.tZ)(mt.VY,{children:(0,r.tZ)(jh,{activeFile:n})})]})}var Kh=t(71603),Qh=t(53472),Jh={Content:function(e){var n=e.options,t=function(){var e=i().find((function(e){var n=(0,o.Z)(e,2);n[0];return"runnerOutput"===n[1].type}));if(e)return e[0]},i=(0,Qh.nC)(),a=(0,S.dr)();return(0,r.tZ)(y.G,{css:[g.l0.p(8),B.F3],children:(0,r.tZ)(Kh.Z,{getRunnerOutput:function(){var e=t();if(e||n.performPaneOperation({operation:"open",secondary:!0,pane:{type:"runnerOutput"}}),e=t()){var r=a(e);if("runnerOutput"===(null===r||void 0===r?void 0:r.type))return r}}})})},Icon:function(e){var n=e.size;return(0,r.tZ)(ne.Z,{size:n})},getTitle:function(){return"Unit Tests"}},ev=t(12470),nv=t(52364),tv=t(14292),rv=t(22642),iv=t(16988),ov=t(2954),av=t(6009),lv=t(21225),cv=function(e){var n=e.title,t=e.json,i=e.initialExpanded,o=void 0===i||i,l=(0,a.useState)(o),c=l[0],u=l[1];return(0,r.tZ)(Nr.Q,{expanded:c,onClick:function(){return u((function(e){return!e}))},headerContent:(0,r.tZ)(y.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:(0,r.tZ)(Z.xv,{variant:"subheadDefault",multiline:!1,children:n})}),children:(0,r.tZ)(y.G,{css:[g.l0.p(12),g.l0.colWithGap(8),g.l0.height("100%")],children:(0,r.tZ)(ov.Z,{json:t})})})},uv=function(e){var n=e.title,t=e.text,i=(0,a.useState)(!0),o=i[0],l=i[1];return(0,r.tZ)(Nr.Q,{expanded:o,onClick:function(){return l((function(e){return!e}))},headerContent:(0,r.tZ)(y.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:(0,r.tZ)(Z.xv,{variant:"subheadDefault",multiline:!1,children:n})}),children:(0,r.tZ)(y.G,{css:[g.l0.p(12),g.l0.colWithGap(8),g.l0.height("100%")],children:(0,r.tZ)(Z.xv,{css:[g.l0.fontSize(16),{whiteSpace:"pre-wrap"}],children:t})})})},sv=t(49520),dv=t(6394),fv=t(16022),pv=t(98059);function hv(){var e=(0,jr.Z)(["\n  query AdminPanelGitView {\n    currentUser {\n      id\n      gitHubInfo {\n        accessToken\n        installations {\n          id\n          type\n          avatarUrl\n          name\n        }\n        userInfo {\n          name\n          email\n          avatarUrl\n        }\n      }\n    }\n  }\n"]);return hv=function(){return e},e}var vv={},mv=(0,qr.Ps)(hv());function gv(e){var n=e.event,t=n.input,i=n.output,o=n.error,l=n.start,c=n.end,u=n.cached,s=(0,a.useState)(!0),d=s[0],f=s[1],p=(0,a.useCallback)((function(){return f((function(e){return!e}))}),[]),h="bash"===t[0]&&"-c"===t[1]?t.slice(2).join(" "):t.join(" "),v=i.trimEnd();return(0,r.BX)(y.G,{css:[(0,fv.ec)(o?"negative":"positive"),u?{opacity:.75}:void 0,g.l0.borderRadius(8)],children:[(0,r.BX)(y.G,{onClick:p,onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||p()},tabIndex:0,css:[g.l0.rowWithGap(4),g.l0.justify.spaceBetween,g.l0.py(4),g.l0.px(8),g.l0.font.code,g.l0.cursor.pointer],children:[(0,r.BX)("span",{css:{whiteSpace:"pre-wrap",wordBreak:"break-word"},children:["$ ",h]}),(0,r.BX)("span",{css:[g.l0.color.foregroundDimmer,g.l0.flex.shrink(0)],children:[o?(0,r.tZ)("span",{css:[g.l0.mr(16)],children:o}):null,u?(0,r.tZ)("span",{children:"CACHED"}):(0,r.BX)("span",{children:[c-l," ms"]})]})]}),d?null:(0,r.tZ)(y.G,{css:[g.l0.px(2),g.l0.pb(2),g.l0.borderRadius(0,0,8,8)],children:(0,r.tZ)(K.Tg,{elevated:!0,css:[g.l0.p(8),g.l0.borderRadius(8)],children:(0,r.tZ)(dv.Z,{code:v})})})]})}var yv=t(58424),Zv=t(68282),bv=t(99453);function wv(e){var n=e.t,t=e.children;return(0,r.BX)("span",{css:{display:"flex",alignItems:"flex-start",columnGap:"0.5rem"},children:[(0,r.BX)(Z.xv,{css:{minWidth:"8em"},multiline:!1,children:[n,":"," "]}),(0,r.tZ)("span",{children:t})]})}var xv=t(44171),kv=t(91476);function Cv(e){return"in"===e.dir?(0,r.tZ)(y.G,{css:g.l0.color.greenStrongest,children:"\u2192"}):"out"===e.dir?(0,r.tZ)(y.G,{css:g.l0.color.redStrongest,children:"\u2190"}):(0,r.tZ)(y.G,{css:g.l0.color.magentaStrongest,children:"\u26a0"})}var Sv=a.memo((function(e){var n,t=e.log,i=e.timeRef,l=e.setTimeRef,c=null!==(n=t.cmd.channel)&&void 0!==n?n:0,u=(0,a.useMemo)((function(){var e=(0,M.Z)({},t.cmd);return delete e.channel,e}),[t]),s=JSON.stringify(u,null,2),d=i?t.timestamp-i:t.timestamp,f=(0,o.Z)((0,bv.Z)(!0),2),p=f[0],h=f[1];return(0,r.BX)(y.G,{css:[g.l0.my(4),g.l0.mx(4)],children:[(0,r.tZ)(y.G,{role:"button",onClick:h,onKeyDown:h,tabIndex:0,css:[t.highlighted?g.l0.backgroundColor.accentPositiveDimmer:null,g.l0.flex.row,g.l0.rowWithGap(4),{"&:hover":{cursor:"pointer",".link":{textDecoration:"underline"}}}],children:(0,r.BX)(y.G,{css:[g.l0.flex.grow(1),g.l0.rowWithGap(4),{maxWidth:"100%"}],children:[(0,r.tZ)(Z.xv,{className:"icon",multiline:!1,children:Cv(t)}),(0,r.tZ)(Z.xv,{className:"link",multiline:!1,children:(0,r.BX)("code",{children:["#",c," - ",t.channel.service,t.channel.name?"::".concat(t.channel.name):""]})}),(0,r.tZ)(Z.xv,{css:[g.l0.flex.growAndShrink(1),{opacity:.5}],multiline:!1,children:(0,r.tZ)("code",{style:{overflow:"hidden",textOverflow:"ellipsis"},children:s})}),null!=d&&(0,r.tZ)(y.G,{onClick:function(){l(t.timestamp)},css:{opacity:.5},children:(0,r.tZ)(Z.xv,{css:[g.l0.fontSize(13),{cursor:"pointer"}],multiline:!1,children:t.timestamp===i?"(reference)":(0,r.BX)(r.HY,{children:[d.toFixed(0)," ms"]})})})]})}),!p&&(0,r.tZ)(r.HY,{children:void 0!==u&&(0,r.tZ)(kv.g,{name:"cmd",src:u})})]})})),Tv=function(e){var n=e.logs,t=e.timeRef,i=e.setTimeRef;return(0,r.BX)("div",{className:"log-list",children:[n.map((function(e){return(0,r.tZ)(Sv,{log:e,timeRef:t,setTimeRef:i},e.index)})),(0,r.tZ)("div",{className:"bottom-anchor"})]})};function Ev(e){return"in"===e||"out"===e||""===e}var Rv=function(e){var n=e.filters,t=e.updateFilters;return(0,r.BX)(y.G,{css:g.l0.colWithGap(4),children:[(0,r.tZ)(Z.xv,{variant:"subheadDefault",multiline:!1,children:"Regex (regex,flags):"}),(0,r.tZ)(Qe.II,{id:"regex",onChange:function(e){var n=null;if(e.currentTarget.value){var r=(0,o.Z)(e.currentTarget.value.split(","),2),i=r[0],a=r[1];try{n=new RegExp(i,a)}catch(l){}}t({regexp:n})},placeholder:"\\w+,gi"}),(0,r.tZ)(Z.xv,{variant:"subheadDefault",multiline:!1,children:"Directions:"}),(0,r.tZ)(Qd.E,{css:g.l0.rowWithGap(16),name:"direction",value:n.direction,onChange:function(e){var n=e.target.value;t({direction:Ev(n)?n:""})},children:[{val:"",text:"Both"},{val:"in",text:"In"},{val:"out",text:"Out"}].map((function(e){return(0,r.BX)(y.G,{css:[g.l0.rowWithGap(8)],children:[(0,r.tZ)(Qd.Y,{id:e.val,value:e.val}),(0,r.tZ)("label",{htmlFor:e.val,children:e.text})]},e.val)}))}),(0,r.tZ)(Z.xv,{variant:"subheadDefault",multiline:!1,children:"Filter style:"}),(0,r.tZ)(Qd.E,{css:g.l0.rowWithGap(16),name:"filter-style",value:n.highlightOnly?"highlight":"filter",onChange:function(e){return t({highlightOnly:"highlight"===e.target.value})},children:[{val:"highlight",text:"Highlight"},{val:"filter",text:"Filter"}].map((function(e){return(0,r.BX)(y.G,{css:[g.l0.rowWithGap(8)],children:[(0,r.tZ)(Qd.Y,{id:e.val,value:e.val}),(0,r.tZ)("label",{htmlFor:e.val,children:e.text})]},e.val)}))})]})},Iv=t(48306),Gv=t.n(Iv),Dv=t(63763),_v=t(89479),Pv=t(94971),Bv=t(27522),Av=t(19791);function Uv(){var e=(0,jr.Z)(["\n  fragment AdminPanelRepl on Repl {\n    id\n    title\n    description\n    isProject\n    isPrivate\n    timeCreated\n    timeUpdated\n    slug\n    url\n    language\n    user {\n      id\n    }\n    config {\n      isServer\n      isVnc\n    }\n    isRenamed\n    isProjectFork\n    folderId\n    isOwner\n    origin {\n      id\n    }\n    source {\n      release {\n        id\n        repl {\n          id\n          url\n          templateLabel\n        }\n      }\n    }\n  }\n"]);return Uv=function(){return e},e}function Lv(){var e=(0,jr.Z)(["\n  query AdminPanelReplView($replId: String!) {\n    repl(id: $replId) {\n      ...AdminPanelRepl\n    }\n  }\n  ","\n"]);return Lv=function(){return e},e}var Xv={},Nv=(0,qr.Ps)(Uv()),Mv=(0,qr.Ps)(Lv(),Nv);var Fv=t(49287),Ov=t(47726),Wv=t(29457);function Hv(e){var n=e.sessionId,t=(0,a.useState)(!1),i=t[0],o=t[1],l=(0,a.useState)(""),c=l[0],u=l[1],s=(0,a.useState)(!1),d=s[0],f=s[1],p=(0,cn.Z)().showConfirm,h=(0,Io.H)();return null==n?(0,r.tZ)(y.G,{children:(0,r.tZ)(Z.xv,{multiline:!1,children:"Something went wrong... no RUM session found... Try refreshing the page"})}):(0,r.BX)(y.G,{css:[g.l0.colWithGap(8)],children:[(0,r.BX)(Z.xv,{variant:"small",multiline:!1,children:["RUM Session ID: ",n]}),(0,r.tZ)(Z.xv,{variant:"headerDefault",multiline:!1,children:"Submit an Issue"}),(0,r.BX)(y.G,{css:[g.l0.colWithGap(16)],children:[(0,r.tZ)(Qe.B,{id:h("message"),placeholder:"What can we do better?",value:c,onChange:function(e){return u(e.target.value)},disabled:i}),(0,r.BX)(y.G,{css:[g.l0.rowWithGap(8)],children:[(0,r.tZ)(Ad.X,{id:h("issueInRecording"),checked:d,onChange:function(e){return f(e.target.checked)}}),(0,r.tZ)("label",{htmlFor:h("issueInRecording"),children:(0,r.tZ)(Z.xv,{multiline:!1,children:"Issue is demoed in recording"})})]}),(0,r.tZ)(Oe.zx,{onClick:function(){var e=lo()();o(!0),(0,Wv.fc)({name:"replitOnReplit:issue",context:{message:c,issueInRecording:d,customEventId:e}}),p("Issue submitted! Have a cookie \ud83c\udf6a",5e3),setTimeout((function(){o(!1),u(""),f(!1)}),5e3)},text:"Submit",disabled:i||0===c.trim().length,colorway:"primary"})]})]})}var Vv,zv;!function(e){e.Repl="repl",e.Logs="logs",e.LSP="lsp",e.AI="ai",e.GhostwriterChat="aiChat",e.AST="ast",e.Git="git",e.History2="history2",e.Metadata="metadata",e.Override="override",e.DDRum="rum"}(Vv||(Vv={}));var jv=(zv={},(0,i.Z)(zv,Vv.Repl,(function(){var e,n,t,i,o,a,l,c,u=(0,En.Z)(),s=function(e){var n=(0,M.Z)({},Xv,e);return $r.a(Mv,n)}({variables:{replId:u}}).data,d="Repl"===(null===s||void 0===s?void 0:s.repl.__typename)?JSON.parse(JSON.stringify(s.repl)):void 0;d&&(delete d.__typename,null===(e=d.user)||void 0===e||delete e.__typename,null===(n=d.origin)||void 0===n||delete n.__typename,delete d.config.__typename,null===(t=d.source)||void 0===t||delete t.__typename,null===(i=d.source)||void 0===i||null===(o=i.release)||void 0===o||delete o.__typename,null===(a=d.source)||void 0===a||null===(l=a.release)||void 0===l||null===(c=l.repl)||void 0===c||delete c.__typename);return(0,r.BX)(y.G,{css:[g.l0.colWithGap(16),g.l0.p(4)],children:[(0,r.tZ)(Fv.Z,{replId:u}),(0,r.tZ)("div",{className:"jsx-3187c500f6b377b0",children:d?(0,r.tZ)(ov.Z,{json:d}):null}),(0,r.tZ)(Gv(),{id:"3187c500f6b377b0",children:"pre.jsx-3187c500f6b377b0{white-space:pre-wrap;word-wrap:break-word}"})]})})),(0,i.Z)(zv,Vv.Logs,(function(e){var n=e.isHidden,t=(0,o.Z)((0,bv.Z)(!1),2),i=t[0],l=t[1],c=(0,a.useState)(null),u=c[0],s=c[1],d=(0,_n.Dv)(xv.Sj),f=(0,o.Z)((0,_n.KO)(xv.a0),2),p=f[0],h=f[1],v=(0,o.Z)((0,_n.KO)(xv.ot),2),m=v[0],Z=v[1],b=(0,_n.b9)(xv.UB);return n?null:(0,r.BX)(y.G,{css:[g.l0.colWithGap(8)],children:[(0,r.BX)(y.G,{css:[g.l0.colWithGap(8),g.l0.position.sticky,g.l0.top(0),g.l0.px(4),g.l0.pb(8),g.l0.backgroundColor.backgroundDefault],children:[(0,r.tZ)(Oe.zx,{colorway:p?void 0:"positive",onClick:function(){h((function(e){return!e}))},text:p?"Stop logging goval":"Start logging goval"}),(0,r.BX)(y.G,{css:[g.l0.rowWithGap(4),g.l0.justify.spaceBetween],children:[(0,r.tZ)(Oe.zx,{onClick:l,text:i?"Hide filters":"Show filters"}),u?(0,r.tZ)(Oe.zx,{onClick:function(){return s(null)},text:"Reset Time Ref"}):null,(0,r.tZ)(se.h,{alt:"Download as JSON",onClick:function(){var e="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(d)),n=document.createElement("a");n.setAttribute("href",e);var t=(new Date).toISOString();n.setAttribute("download","logs-".concat(t.slice(0,t.indexOf(".")).replaceAll("-","").replaceAll(":",""),".json")),n.click()},size:32,children:(0,r.tZ)(An.Z,{})}),(0,r.tZ)(Oe.zx,{colorway:"negative",onClick:function(){return b()},text:"Clear logs"})]}),i?(0,r.tZ)(Rv,{filters:m,updateFilters:function(e){Z((0,M.Z)({},m,e))}}):null]}),(0,r.tZ)(y.G,{css:[g.l0.flex.growAndShrink(1),g.l0.overflow("auto"),g.l0.height("100%")],children:(0,r.tZ)(Tv,{logs:d,timeRef:u,setTimeRef:s})})]})})),(0,i.Z)(zv,Vv.LSP,kv.L),(0,i.Z)(zv,Vv.AI,sv.ho),(0,i.Z)(zv,Vv.GhostwriterChat,(function(){var e=(0,iv.v)(),n=(0,En.Z)(),t=(0,lv.ae)(),i=(0,en.R3)(),l=(0,nv.Og)(),c=(0,nv.Cd)(),u=(0,o.Z)((0,av.Kz)(),1)[0],s=(0,o.Z)((0,av.u0)(),1)[0],f="chat-".concat(t,".json"),p=(0,a.useState)(".ghostwriter/".concat(f)),h=p[0],v=p[1],m=(0,d.Z)().fs,b=(0,cn.Z)().showError,w=(0,o.Z)((0,nv.zu)(),2),x=w[0],k=w[1],C=(0,a.useCallback)((function(){return JSON.stringify({chatModel:e,chatId:t,replId:n,messages:x},null,2)}),[e,t,n,x]),S=(0,a.useCallback)((0,Ge.Z)((function(){var e,n,t;return(0,_e.__generator)(this,(function(r){switch(r.label){case 0:e=C(),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,m.writeFile(h,Ro.Z.from(e))];case 2:if((n=r.sent()).error)throw new Error("fs error: ".concat(n.error));return[3,4];case 3:return t=r.sent(),b(t.message),[3,4];case 4:return[2]}}))})),[C,m,h,b]),T=(0,a.useCallback)((0,Ge.Z)((function(){var e,n,t;return(0,_e.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,m.readFile(h)];case 1:if((e=r.sent()).error)throw new Error("fs error: ".concat(e.error));if(n=JSON.parse(e.content.toString()),!Array.isArray(n.messages))throw new Error("invalid chat JSON");return k(n.messages),[3,3];case 2:return t=r.sent(),b(t.message),[3,3];case 3:return[2]}}))})),[h,m,k,b]);return(0,r.tZ)(y.G,{css:g.l0.height("100%"),children:(0,r.BX)(ev.mQ,{css:[{width:"100%"}],children:[(0,r.BX)(ev.td,{withDividers:!1,children:[(0,r.tZ)(ev.OK,{iconLeft:(0,r.tZ)(tv.Z,{}),children:"File Context"}),(0,r.tZ)(ev.OK,{iconLeft:(0,r.tZ)(tv.Z,{}),children:"Debugger"}),(0,r.tZ)(ev.OK,{iconLeft:(0,r.tZ)(rv.Z,{}),children:"Messages"})]}),(0,r.BX)(ev.nP,{children:[(0,r.BX)(ev.x4,{children:[(0,r.tZ)(cv,{title:"active file",json:i}),(0,r.tZ)(cv,{title:"last stop reason",json:c}),(0,r.tZ)(uv,{title:"last prompt",text:l})]}),(0,r.BX)(ev.x4,{children:[(0,r.tZ)(cv,{title:"buffered output",json:u}),(0,r.tZ)(cv,{title:"debug error context",json:s})]}),(0,r.tZ)(ev.x4,{children:(0,r.BX)(y.G,{css:[g.l0.colWithGap(8),g.l0.m(8)],children:[(0,r.BX)(K.Tg,{background:"higher",css:[g.l0.borderRadius(8),g.l0.colWithGap(8),g.l0.p(8)],children:[(0,r.tZ)(Z.xv,{multiline:!1,children:"Chat History"}),(0,r.tZ)(Qe.II,{type:"text",value:h,onChange:function(e){v(e.target.value)}}),(0,r.BX)(y.G,{css:[g.l0.rowWithGap(8),g.l0.flex.wrap],children:[(0,r.tZ)(Oe.zx,{text:"Download",colorway:"primary",iconLeft:(0,r.tZ)(An.Z,{}),onClick:function(){var e=C(),n="data:text/json;charset=utf-8,"+encodeURIComponent(e),t=document.createElement("a");t.setAttribute("href",n),t.setAttribute("download","".concat(f)),t.click()}}),(0,r.tZ)(Oe.zx,{text:"Save to Repl",onClick:S,iconLeft:(0,r.tZ)(An.Z,{})}),(0,r.tZ)(Oe.zx,{text:"Load from Repl",onClick:T,iconLeft:(0,r.tZ)(es.Z,{})})]})]}),(0,r.BX)(y.G,{css:[g.l0.colWithGap(8)],children:[(0,r.tZ)("label",{css:g.l0.color.foregroundDimmer,htmlFor:"gw-debug-chatModel",children:"Chat Model"}),(0,r.tZ)(Qe.II,{id:"gw-debug-chatModel",type:"text",readOnly:!0,value:e})]}),(0,r.BX)(y.G,{css:[g.l0.colWithGap(8)],children:[(0,r.tZ)("label",{css:g.l0.color.foregroundDimmer,htmlFor:"gw-debug-replId",children:"Repl Id"}),(0,r.tZ)(Qe.II,{id:"gw-debug-replId",type:"text",readOnly:!0,value:n})]}),(0,r.BX)(y.G,{css:[g.l0.colWithGap(8)],children:[(0,r.tZ)("label",{css:g.l0.color.foregroundDimmer,htmlFor:"gw-debug-chatId",children:"Chat Id"}),(0,r.tZ)(Qe.II,{id:"gw-debug-chatId",type:"text",readOnly:!0,value:t})]})]})})]})]})})})),(0,i.Z)(zv,Vv.AST,Gh.Z),(0,i.Z)(zv,Vv.Git,(function(){var e=(0,a.useState)([]),n=e[0],t=e[1],i=function(e){var n=(0,M.Z)({},vv,e);return $r.a(mv,n)}().data,o=(0,L.Z)(pv.e);return(0,a.useEffect)((function(){o&&t((function(e){return e.length&&e[0].key===o.key?e:[o].concat((0,Zi.Z)(e)).slice(0,100)}))}),[o]),(0,r.BX)(y.G,{css:[g.l0.p(8)],children:[(0,r.BX)(K.Tg,{elevated:!0,css:[g.l0.borderRadius(8),g.l0.p(8),g.l0.mb(8)],children:[(0,r.tZ)("span",{children:"Git Service Connection Info"}),(0,r.tZ)("pre",{children:(null===i||void 0===i?void 0:i.currentUser)?JSON.stringify(i,(function(e,n){return"accessToken"===e?"censored":n}),2):"No gitHubInfo"})]}),(0,r.tZ)(y.G,{css:[g.l0.colWithGap(4)],children:n.length?n.map((function(e){return(0,r.tZ)(gv,{event:e},e.key)})):"No events yet..."})]})})),(0,i.Z)(zv,Vv.History2,(function(){var e=(0,L.Z)(Qf.BI)(),n=(0,L.Z)(Qf.Jp)(),t=(0,o.Z)((0,bv.Z)(!1),2),i=t[0],a=t[1];if(!e)return null;var l=e.filePath,c=e.changes,u=e.users,s=e.version,d=e.playing,f=e.count,p=c[s],h=null===u||void 0===u?void 0:u[p.userId],v=p.timestamp,m=i&&n?function(e,n){try{return(0,Zv.ed)(e,n).op}catch(t){return t}}(p.changes,n.state.doc.sliceString(0)):null;return(0,r.BX)(y.G,{css:[g.l0.colWithGap(16),g.l0.p(4)],children:[(0,r.BX)(y.G,{css:[g.l0.colWithGap(4)],children:[(0,r.tZ)(wv,{t:"File",children:(0,r.tZ)("pre",{children:l})}),(0,r.BX)(wv,{t:"Version",children:[s," / ",f-1]}),(0,r.tZ)(wv,{t:"Playing",children:(0,r.tZ)(yv.Z,{children:d?"true":"false"})}),(0,r.tZ)(wv,{t:"Date",children:(0,r.tZ)(Eu.E,{date:v})})]}),h?(0,r.BX)(y.G,{children:[(0,r.tZ)(wv,{t:"Author",children:h.username}),(0,r.BX)(y.G,{css:[g.l0.pl(8),g.l0.colWithGap(4)],children:[(0,r.tZ)(wv,{t:"ID",children:h.id}),(0,r.tZ)(wv,{t:"Name",children:h.username}),(0,r.tZ)(wv,{t:"Image",children:(0,r.tZ)("a",{href:h.image,children:h.image})})]})]}):null,(0,r.BX)(y.G,{css:[g.l0.rowWithGap(8),{alignItems:"center"}],children:[(0,r.tZ)(Dp.Z,{id:"toggleIsShowingChanges",isOn:i,onChange:a}),(0,r.tZ)("label",{children:"Changes"})]}),p?null:"No changes",i&&p?(0,r.tZ)(r.HY,{children:(0,r.BX)(y.G,{children:[(0,r.tZ)(wv,{t:"Changeset",children:(0,r.tZ)("pre",{children:JSON.stringify(p,null,2)})}),n?(0,r.tZ)(r.HY,{children:(0,r.BX)(y.G,{css:[g.l0.mt(4)],children:[(0,r.tZ)(wv,{t:"OT",children:(0,r.tZ)("pre",{children:JSON.stringify(m,null,2)})}),(0,r.tZ)("p",{children:(0,r.BX)("small",{children:["Note that the OT value is translated ",(0,r.tZ)("em",{children:"back"})," to an operational transformation from the CodeMirror changeset."]})})]})}):null]})}):null]})})),(0,i.Z)(zv,Vv.Metadata,(function(){var e=(0,d.Z)().container;(0,_v.Z)();var n=e.getConnectionMetadata();if(!n)return(0,r.tZ)("div",{children:"no token yet, wait for connection"});var t=n.token,i=new URL(n.conmanURL).host,o='./conman-repl -t "'.concat(t,'" -u ').concat(i);return(0,r.BX)("div",{className:"jsx-2e9ac5ab034fc317 token-viewer",children:[(0,r.BX)(y.G,{css:g.l0.rowWithGap(2),children:[(0,r.BX)(Z.xv,{css:g.l0.flex.shrink(1),multiline:!1,children:["conman Repl command: ",(0,r.tZ)(yv.Z,{children:o})]}),(0,r.tZ)(se.h,{alt:"Copy to clipboard",onClick:function(){return(0,yr.Z)(o)},children:(0,r.tZ)(Eo.Z,{})})]}),(0,r.BX)("div",{className:"jsx-2e9ac5ab034fc317",children:["metadata:",(0,r.tZ)("pre",{className:"jsx-2e9ac5ab034fc317",children:JSON.stringify(n,null,2)})]}),(0,r.tZ)("br",{className:"jsx-2e9ac5ab034fc317"}),(0,r.tZ)("br",{className:"jsx-2e9ac5ab034fc317"}),(0,r.BX)("div",{className:"jsx-2e9ac5ab034fc317",children:["parsed token:",(0,r.tZ)("pre",{className:"jsx-2e9ac5ab034fc317",children:JSON.stringify((0,Dv.he)(n.token),null,2)})]}),(0,r.tZ)("br",{className:"jsx-2e9ac5ab034fc317"}),(0,r.tZ)("br",{className:"jsx-2e9ac5ab034fc317"}),(0,r.tZ)(Gv(),{id:"2e9ac5ab034fc317",children:".token-viewer.jsx-2e9ac5ab034fc317{height:100%;overflow:auto;padding:10px}pre.jsx-2e9ac5ab034fc317{white-space:pre-wrap;word-wrap:break-word}"})]})})),(0,i.Z)(zv,Vv.Override,(function(){var e=(0,o.Z)(a.useState(Ae.Z.get("gurl","string")||""),2),n=e[0],t=e[1],i=(0,o.Z)(a.useState(""),2),l=i[0],c=i[1],u=function(){var e=(0,_n.b9)(wa),n=(0,_n.b9)(xa);return(0,a.useCallback)((function(t){if(!t)return e(null),void n(null);e({connectionString:t,databaseId:-1,databaseName:"Admin Override",isFrozen:!1,projectId:"mock-project-id-does-not-exist",__typename:"NeonDatabase"}),n(t)}),[n,e])}();return(0,r.BX)("div",{style:{height:"100%",overflow:"auto"},children:[(0,r.tZ)(Pv.ZP,{label:"Custom gurl",placeholder:"ws://localhost:8080",value:n,onChange:function(e){return t(e.currentTarget.value)}}),(0,r.BX)("pre",{children:["metadata override preview:",JSON.stringify((0,Av.t)(n),null,2)]}),(0,r.tZ)("br",{}),(0,r.BX)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,r.tZ)(Bv.Z,{color:"positive",onClick:function(){Ae.Z.set("gurl",n),window.location.reload()},children:"Set gurl and reload"}),(0,r.tZ)(Bv.Z,{color:"orange",onClick:function(){Ae.Z.remove("gurl"),window.location.reload()},children:"Unset gurl and reload"})]}),(0,r.tZ)("br",{}),(0,r.tZ)("br",{}),(0,r.tZ)("div",{children:Ae.Z.get("gurl","string")?"currently in localStorage: ".concat(Ae.Z.get("gurl","string")):'No gurl set in local storage, using default gurl for this user, check "Token" tab for details'}),(0,r.tZ)("br",{}),(0,r.tZ)("br",{}),"Gurl order of precedence:",(0,r.BX)("ol",{style:{margin:20},children:[(0,r.tZ)("li",{children:"\u2018gurl\u2019 in localStorage (set above)"}),(0,r.BX)("li",{children:["If in development webapp and a there\u2019s a response from",(0,r.tZ)("code",{children:"https://currenthost:4563"})," or",(0,r.tZ)("code",{children:"http://currenthost:4560"}),", then it will use that."]}),(0,r.BX)("li",{children:["default is ",(0,r.tZ)("code",{children:"wss://eval.<usercluster>.replit.com"})]})]}),(0,r.BX)(y.G,{css:[g.l0.pt(16),g.l0.border({direction:"top"})],children:[(0,r.tZ)(Z.xv,{multiline:!1,children:"Override Database"}),(0,r.tZ)(Pv.ZP,{type:"text",value:l,onChange:function(e){c(e.target.value)}}),(0,r.tZ)(y.G,{css:[g.l0.rowWithGap(8)],children:(0,r.tZ)(Bv.Z,{color:"positive",onClick:function(){u(l)},children:"Override Postgres connection string"})})]})]})})),(0,i.Z)(zv,Vv.DDRum,(function(){var e,n=null===(e=Ov.v.getInternalContext())||void 0===e?void 0:e.session_id,t=Ov.v.getInitConfiguration(),i=null!=t&&100===t.sampleRate,o=(0,a.useState)(null!=n),l=o[0],c=o[1];return(0,r.tZ)(y.G,{css:[g.l0.colWithGap(16),g.l0.p(4)],children:i?(0,r.BX)(r.HY,{children:[(0,r.tZ)(Oe.zx,{onClick:l?function(){Ov.v.stopSessionReplayRecording(),document.cookie="_dd_s=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",window.location.href=window.location.href.split("?")[0]}:function(){(0,Wv.Oo)({name:"replitOnReplit"}),setTimeout((function(){c(!0)}),1e3)},text:l?"\ud83d\udd34 Recording... Click to stop and reload page":"Start Recording",colorway:l?void 0:"primary",css:(0,M.Z)({},l&&ue.p.backgroundPulse(g.TV.redDimmest,g.TV.redDimmer))}),l?(0,r.tZ)(Hv,{sessionId:n}):null]}):(0,r.tZ)(Oe.zx,{onClick:function(){window.location.href=window.location.href.split("?")[0].split("#")[0]+"?rum=1"},text:"Click to reload and start recording",colorway:"primary"})})})),zv),qv=Object.values(Vv);function $v(e){var n=e.paneOptions,t=(0,a.useState)(Vv.Repl),i=t[0],l=t[1],c=qv.map((function(e){return(0,r.tZ)(Oe.zx,{colorway:e===i?"primary":void 0,onClick:function(){return l(e)},text:e},e)}));return(0,r.BX)(K.Tg,{background:"default",css:[g.l0.colWithGap(8),g.l0.p(4),g.l0.height("100%")],children:[(0,r.tZ)(y.G,{css:{flexWrap:"wrap",flexDirection:"row",gap:"4px"},children:c}),(0,r.tZ)(y.G,{css:[g.l0.flex.growAndShrink(1),g.l0.overflow("auto")],children:Object.entries(jv).map((function(e){var t=(0,o.Z)(e,2),a=t[0],l=t[1];return(0,r.tZ)(y.G,{css:a!==i&&g.l0.display.none,children:a===Vv.Override&&i!==Vv.Override?null:(0,r.tZ)(l,{isHidden:n.isHidden||i!==a})},a)}))})]})}var Yv=t(50575),Kv={Content:function(e){var n=e.options;return(0,r.tZ)($v,{paneOptions:n})},Icon:function(e){var n=e.size;return(0,r.tZ)(Yv.Z,{color:"red",size:n})},getTitle:function(){return"Debug"}},Qv=t(19065),Jv=t(98355),em=t(41120);function nm(){var e=(0,jr.Z)(["\n  query SshConfigurator($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        slug\n        user {\n          id\n          username\n        }\n      }\n    }\n  }\n"]);return nm=function(){return e},e}var tm={},rm=(0,qr.Ps)(nm());var im=t(56997),om=["ssh-dsa","ssh-ecdsa","ssh-ed25519","ssh-rsa"];function am(e){return function(n){n.stopPropagation(),e(n)}}function lm(e,n){if(!e)return"Please add a key for this secret";if(!e.trim())return"The key must include a non-space character";if(n.includes(e))return"You already have this key";var t=e.split(" ");return 3!==t.length?"This seems to be an invalid key.":om.includes(t[0])?null:"Key type is not valid."}function cm(e){return(0,r.BX)(y.G,{css:[g.l0.colWithGap(4)],children:[(0,r.tZ)("label",{htmlFor:e.id,children:(0,r.tZ)(Z.xv,{variant:"small",color:"dimmer",multiline:!1,children:e.label})}),e.children,e.error?(0,r.BX)(y.G,{css:[g.l0.rowWithGap(2),g.l0.align.center],children:[(0,r.tZ)(ze.Z,{}),(0,r.tZ)(Z.xv,{variant:"small",css:g.l0.color.accentNegativeStrongest,multiline:!1,children:e.error})]}):null]})}function um(e){var n=e.authorizedKey,t=e.otherKeys,i=e.onUpdateKey,l=e.onSave,c=(0,o.Z)(a.useState(),2),u=c[0],s=c[1],d=a.useRef(null),f=function(){var e=lm(n.key,t);if(e)return s(e),void(d.current&&d.current.focus());l()};a.useEffect((function(){u&&(lm(n.key,t)||s(null))}),[n.key,u,t]);var p=am((function(e){"Enter"===e.key&&(e.preventDefault(),f())})),h=(0,Us.d)(),v=(0,Io.H)()("key"),m='ssh-keygen -t ed25519 -f ~/.ssh/replit -q -N "" && cat ~/.ssh/replit.pub';return(0,r.BX)(K.Tg,{elevated:!0,css:[g.l0.p(16),g.l0.borderRadius(8),g.l0.colWithGap(16)],children:[t&&0!==t.length?null:(0,r.tZ)(Z.xv,{children:"Before you can SSH to your Repl, you need to add an SSH key."}),(0,r.tZ)(cm,{id:v,label:"Key (in OpenSSH Public Key format)",error:u,children:(0,r.tZ)(Qe.II,{id:v,ref:d,name:"key",value:n.key,spellCheck:!1,onChange:function(e){i(e.currentTarget.value)},onKeyDown:p})}),im.ED||h?(0,r.tZ)(y.G,{css:[g.l0.colWithGap(8)],children:(0,r.BX)(Z.xv,{children:["Need a hand? The"," ",(0,r.tZ)("a",{href:"https://docs.replit.com/power-ups/ssh",target:"_blank",children:"SSH documentation"})," ","provides information about generating SSH keys."]})}):(0,r.BX)(y.G,{css:[g.l0.colWithGap(8)],children:[(0,r.tZ)(Z.xv,{children:"Need a hand? Generate a key:"}),(0,r.BX)(K.Tg,{tag:"pre",elevated:!0,css:[g.l0.borderRadius(8),g.l0.p(8),g.l0.rowWithGap(8),g.l0.justify.spaceBetween,g.l0.align.center],children:[(0,r.tZ)(Z.xv,{multiline:!1,css:[g.l0.overflow("auto"),g.l0.font.code,g.l0.flex.growAndShrink(1),{"::-webkit-scrollbar":[g.l0.display.none]}],maxLines:1,children:m}),(0,r.tZ)(se.h,{onClick:function(){return(0,yr.Z)(m)},alt:"Copy",children:(0,r.tZ)(un.Z,{})})]}),(0,r.tZ)(Z.xv,{children:"Paste the result in the form above."})]}),(0,r.tZ)(y.G,{css:[g.l0.rowWithGap(8),g.l0.justify.spaceBetween],children:(0,r.tZ)(y.G,{css:g.l0.rowWithGap(8),children:(0,r.tZ)(Oe.zx,{colorway:"primary",onClick:am(f),text:"Add SSH Key"})})})]})}function sm(e){var n=e.onAdd,t=e.otherKeys,i=(0,o.Z)(a.useState({key:""}),2),l=i[0],c=i[1];return(0,r.tZ)(um,{authorizedKey:l,otherKeys:t,onUpdateKey:function(e){c((function(n){return n?(0,De.Z)((0,M.Z)({},n),{key:e}):n}))},onSave:function(){c({key:""}),l.key&&n(l)}})}function dm(e){var n=e.authorizedKey,t=e.onDelete;return(0,r.BX)(y.G,{css:[yu.gU.filled,g.l0.p(8),g.l0.rowWithGap(8),g.l0.align.center,g.l0.justify.spaceBetween,g.l0.borderRadius(8)],children:[(0,r.tZ)(Jv.Z,{size:24}),(0,r.BX)(Z.xv,{css:[g.l0.flex.growAndShrink(1)],maxLines:1,multiline:!1,children:[n.keytype," ",n.key.substring(0,8),"...",n.key.substring(n.key.length-8)," ",n.comment]}),(0,r.tZ)(se.h,{onClick:function(){return t(n)},alt:"Delete",size:28,children:(0,r.tZ)(em.Z,{})})]})}function fm(e){if(!e.length)return null;var n=e.split(" ");return n.length<3?null:{keytype:n[0],key:n[1],comment:n[2]}}function pm(e){var n=e.sshUser,t=e.sshHostname;return(0,r.BX)(r.HY,{children:[(0,r.tZ)(Z.xv,{children:"When configuring your SSH client to connect to this Repl, you will need the following configuration values:"}),(0,r.BX)(y.G,{css:g.l0.colWithGap(2),children:[(0,r.tZ)(Z.xv,{multiline:!1,children:"Hostname"}),(0,r.BX)(K.Tg,{tag:"pre",elevated:!0,css:[g.l0.borderRadius(8),g.l0.p(8),g.l0.rowWithGap(8)],children:[(0,r.tZ)(Z.xv,{multiline:!1,css:[g.l0.overflow("auto"),g.l0.font.code,g.l0.flex.growAndShrink(1),{"::-webkit-scrollbar":[g.l0.display.none]}],maxLines:1,children:t}),(0,r.tZ)(se.h,{onClick:function(){return(0,yr.Z)(t)},alt:"Copy",children:(0,r.tZ)(un.Z,{})})]})]}),(0,r.BX)(y.G,{css:g.l0.colWithGap(2),children:[(0,r.tZ)(Z.xv,{multiline:!1,children:"Username"}),(0,r.BX)(K.Tg,{tag:"pre",elevated:!0,css:[g.l0.borderRadius(8),g.l0.p(8),g.l0.rowWithGap(8)],children:[(0,r.tZ)(Z.xv,{multiline:!1,css:[g.l0.overflow("auto"),g.l0.font.code,g.l0.flex.growAndShrink(1),{"::-webkit-scrollbar":[g.l0.display.none]}],maxLines:1,children:n}),(0,r.tZ)(se.h,{onClick:function(){return(0,yr.Z)(n)},alt:"Copy",children:(0,r.tZ)(un.Z,{})})]})]})]})}function hm(e){var n,t=e.repl,i=e.onlyCommand,o=void 0===i||i,a=(0,Us.d)();if("Repl"!==t.__typename)return null;var l=t.id,c="".concat(t.slug,".").concat(null===(n=t.user)||void 0===n?void 0:n.username,".repl.co"),u="ssh -i ~/.ssh/replit ".concat(l,"@").concat(c),s="Host ".concat(c,"\n  User ").concat(l,"\n  IdentityFile ~/.ssh/replit"),d="ssh ".concat(c);return im.ED||a?o?null:(0,r.BX)(y.G,{css:g.l0.colWithGap(16),children:[(0,r.tZ)(Qv.Z,{level:4,children:"Client Configuration"}),(0,r.tZ)(pm,{sshUser:l,sshHostname:c}),(0,r.BX)(Z.xv,{children:["For more detailed configuration instructions",im.ED?" on Windows":null,", check the"," ",(0,r.tZ)("a",{href:"https://docs.replit.com/power-ups/ssh",target:"_blank",children:"SSH Power-Up documentation"}),"."]})]}):(0,r.tZ)(y.G,{css:g.l0.colWithGap(16),children:o?(0,r.BX)(r.HY,{children:[(0,r.tZ)(Qv.Z,{level:4,children:"Quick-Start SSH Command"}),(0,r.BX)(K.Tg,{tag:"pre",elevated:!0,css:[g.l0.borderRadius(8),g.l0.p(8),g.l0.rowWithGap(8)],children:[(0,r.tZ)(Z.xv,{multiline:!1,css:[g.l0.overflow("auto"),g.l0.font.code,g.l0.flex.growAndShrink(1),{"::-webkit-scrollbar":[g.l0.display.none]}],maxLines:1,children:u}),(0,r.tZ)(se.h,{onClick:function(){return(0,yr.Z)(u)},alt:"Copy",children:(0,r.tZ)(un.Z,{})})]})]}):(0,r.BX)(r.HY,{children:[(0,r.tZ)(Qv.Z,{level:4,children:"Client Configuration"}),(0,r.tZ)(pm,{sshUser:l,sshHostname:c}),(0,r.tZ)(Qv.Z,{level:5,children:"SSH Configuration File"}),(0,r.BX)(Z.xv,{children:["You can add this snippet to your SSH configuration file (typically"," ",(0,r.tZ)(Z.xv,{css:[g.l0.font.code,g.l0.display.inline,g.l0.align.baseline],children:"~/.ssh/config"}),"):"]}),(0,r.BX)(K.Tg,{tag:"pre",elevated:!0,css:[g.l0.borderRadius(8),g.l0.p(8),g.l0.rowWithGap(8)],children:[(0,r.tZ)(Z.xv,{css:[g.l0.overflow("auto"),g.l0.font.code,g.l0.flex.growAndShrink(1),{"::-webkit-scrollbar":[g.l0.display.none]}],children:s}),(0,r.tZ)(se.h,{onClick:function(){return(0,yr.Z)(s)},alt:"Copy",children:(0,r.tZ)(un.Z,{})})]}),(0,r.tZ)(Z.xv,{children:"Then, to connect to your Repl you can simply run:"}),(0,r.BX)(K.Tg,{tag:"pre",elevated:!0,css:[g.l0.borderRadius(8),g.l0.p(8),g.l0.rowWithGap(8)],children:[(0,r.tZ)(Z.xv,{multiline:!1,css:[g.l0.overflow("auto"),g.l0.font.code,g.l0.flex.growAndShrink(1),{"::-webkit-scrollbar":[g.l0.display.none]}],maxLines:1,children:d}),(0,r.tZ)(se.h,{onClick:function(){return(0,yr.Z)(d)},alt:"Copy",children:(0,r.tZ)(un.Z,{})})]})]})})}function vm(e){return mm.apply(this,arguments)}function mm(){return(mm=(0,Ge.Z)((function(e){return(0,_e.__generator)(this,(function(n){switch(n.label){case 0:return[4,e.createDir(".config")];case 1:return n.sent(),[4,e.createDir(".config/ssh")];case 2:return n.sent(),[2]}}))}))).apply(this,arguments)}function gm(e){var n=e.fs,t=(0,ie.Z)(),i=(0,o.Z)(a.useState(null),2),l=i[0],c=i[1],u=function(e){var n=(0,M.Z)({},tm,e);return $r.a(rm,n)}({variables:{replId:(0,En.Z)()}}).data,s="Repl"===(null===u||void 0===u?void 0:u.repl.__typename)?u.repl:null;a.useEffect((function(){function e(){return(e=(0,Ge.Z)((function(){var e,r;return(0,_e.__generator)(this,(function(i){switch(i.label){case 0:return[4,vm(n)];case 1:return i.sent(),[4,n.readFile(".config/ssh/.authorized_keys")];case 2:if((e=i.sent()).error===w.Df.NotFound)return t.current&&c({}),[2];if(e.error)throw new Error("Error getting .authorized_keys");return t.current?(r={},e.content.toString().split("\n").forEach((function(e){if(!e.startsWith("#")){var n=fm(e);null!==n&&(r[n.key]=n)}})),c(r),[2]):[2]}}))}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[n,c,t]);var d=function(){var e=(0,Ge.Z)((function(e){var t,r;return(0,_e.__generator)(this,(function(i){switch(i.label){case 0:if(!l)throw new Error("trying to write authorized keys before loading");return t=function(e,n){var t=(0,M.Z)({},e);if("add"===n.type){var r=fm(n.key);r&&(t[r.key]=r)}else delete t[n.key];return t}(l,e),c(t),r="# generated file, use the SSH tool instead of editing\n"+Object.values(t).map((function(e){return"".concat((n=e).keytype," ").concat(n.key," ").concat(n.comment);var n})).join("\n"),[4,n.writeFile(".config/ssh/.authorized_keys",Ro.Z.from(r))];case 1:return i.sent(),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),f=function(){var e=(0,Ge.Z)((function(e){return(0,_e.__generator)(this,(function(n){switch(n.label){case 0:return[4,d((0,M.Z)({type:"add"},e))];case 1:return n.sent(),(0,Le.j)(Le.U3.SSH_CONFIGURATOR_USED,{action:"added"}),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),p=function(){var e=(0,Ge.Z)((function(e){return(0,_e.__generator)(this,(function(n){switch(n.label){case 0:return[4,d({type:"delete",key:e.key})];case 1:return n.sent(),(0,Le.j)(Le.U3.SSH_CONFIGURATOR_USED,{action:"deleted"}),[2]}}))}));return function(n){return e.apply(this,arguments)}}();return l&&s?(0,r.tZ)(y.G,{css:g.l0.colWithGap(32),children:(0,r.BX)(y.G,{css:g.l0.colWithGap(16),children:[Object.keys(l).length>0?(0,r.tZ)(hm,{repl:s,onlyCommand:!0}):null,(0,r.tZ)(Qv.Z,{level:4,children:"Manage SSH Keys"}),Object.values(l).map((function(e){return(0,r.tZ)(dm,{authorizedKey:e,onDelete:p},e.key)})),(0,r.tZ)(sm,{onAdd:f,otherKeys:Object.keys(l)}),Object.keys(l).length>0?(0,r.tZ)(hm,{repl:s,onlyCommand:!1}):null]})}):(0,r.tZ)(y.G,{css:[g.l0.center,g.l0.coverContainer],children:(0,r.tZ)(Je.Z,{size:24})})}function ym(e){var n=e.children;return(0,r.tZ)(y.G,{css:[g.l0.height("100%"),g.l0.overflowY("auto"),B.F3],children:(0,r.BX)(y.G,{css:[g.l0.p(8),g.l0.colWithGap(8),g.l0.flex.grow(1)],children:[(0,r.tZ)(y.G,{css:[g.l0.rowWithGap(8)],children:(0,r.tZ)(Qv.Z,{truncate:!0,level:4,children:"SSH Configuration"})}),(0,r.BX)(Z.xv,{variant:"small",color:"dimmer",children:["Add authorized keys to configure SSH access to this Repl."," ",(0,r.tZ)("a",{href:"https://docs.replit.com/power-ups/ssh",target:"_blank",children:"Learn more here"}),"."]}),(0,r.tZ)(y.G,{css:[g.l0.flex.grow(1),g.l0.py(8),g.l0.position.relative],children:n})]})})}var Zm=t(91291),bm={Content:function(){return(0,r.tZ)(wm,{})},Icon:function(e){var n=e.size;return(0,r.tZ)(Zm.Z,{size:n})},getTitle:function(){return"SSH"}};function wm(){var e=(0,d.Z)().fs;return(0,r.tZ)(ym,{children:(0,r.tZ)(gm,{fs:e})})}var xm=t(47880),km=t(86411),Cm=t(54414),Sm=t(21568),Tm=t(13902),Em=t(18180),Rm=t(64918),Im=t(12171),Gm=t(88161);var Dm=t(23398),_m=t(97130),Pm=t(37425),Bm=new go.j((function(e){function n(){return(n=(0,Ge.Z)((function(e){return(0,_e.__generator)(this,(function(e){return[2,null]}))}))).apply(this,arguments)}var t=(0,Dm.ys)({defaultKeymap:!1,icons:!1,addToOptions:[_m.t],override:[function(e){return n.apply(this,arguments)}]});return t})),Am=new yo.R((function(){return(0,mi.W$)((0,mo.VV)((0,r.tZ)("div",{css:[{fontFamily:g.TV.fontFamilyDefault},g.l0.color.foregroundDimmest],children:"Ask a question about your code\u2026"})))})),Um=new go.j((function(e){if("number"===typeof e)return yi.yy.transactionFilter.of((function(n){if(n.docChanged&&n.newDoc.length>e){var t=0,r=[];return n.changes.iterChanges((function(i,o,a,l,c){var u=l-a-(o-i),s=n.startState.doc.length+t+u;if(s<=e){var d=c;r.push({from:i,to:o,insert:d})}else{var f=c.slice(0,c.length-(s-e));t+=f.length,r.push({from:i,to:o,insert:f})}t+=u})),{changes:r,scrollIntoView:!0}}return n}))})),Lm=new go.j((function(e,n){var t=mi.tk.domEventHandlers({keydown:function(e,t){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),n())}});return[mi.tk.updateListener.of((function(n){if(n.docChanged&&"function"===typeof e){var t=n.state.doc.toString();e(t,n)}})),t]})),Xm=mi.tk.theme((0,i.Z)({"&":{backgroundColor:g.TV.backgroundHighest,fontFamily:g.TV.fontFamilyDefault,borderRadius:g.TV.borderRadius8,height:"100%"},"& .cm-content":{fontFamily:g.TV.fontFamilyDefault},"& .cm-scroller":{fontFamily:g.TV.fontFamilyDefault}},"& .".concat(Pm.ll),{display:"none"})),Nm=(0,b.X)({inputContainer:[g.l0.borderRadius(8),yu.gU.filledAndOutlined,{"@media (hover: hover)":{":not([disabled])":{"&:not([disabled])":{cursor:"text"},":focus-within":(0,M.Z)({},g._X,{outlineOffset:-1,":not(:focus-visible)":{outlineColor:g.TV.accentPrimaryDefault}})}}}],codeMirror:[g.l0.borderRadius(8),g.l0.maxHeight(300),g.l0.overflow("auto")]}),Mm=(0,a.forwardRef)((function(e,n){var t=e.value,i=e.maxLength,o=e.onSubmit,l=e.onChange,c=e.onFocus,u=(0,Fe.Z)(),s=u.ref,f=u.view,p=(0,d.Z)().fs,h=Bm.use(p),v=Um.use(i);(0,a.useImperativeHandle)(n,(function(){return{focus:function(){null===f||void 0===f||f.contentDOM.focus(),null===f||void 0===f||f.dispatch({selection:{anchor:f.state.doc.length}})}}})),(0,a.useEffect)((function(){f&&f.state.doc.toString()!==t&&f.dispatch({changes:{from:0,to:f.state.doc.length,insert:t}})}),[t,f]);var m=Lm.use(l,o),g=(0,a.useMemo)((function(){return[m,v,h]}),[m,v,h]);return(0,r.tZ)(y.G,{css:Nm.inputContainer,children:(0,r.tZ)(Me.Z,{onFocus:c,language:"markdown",ref:s,css:Nm.codeMirror,hideGutter:!0,autocomplete:!1,extensions:[Xm,Am].concat((0,Zi.Z)(g))})})})),Fm=t(26752),Om=(0,b.X)({surface:[g.l0.flex.growAndShrink(0),g.l0.borderRadius(0,0,8,8),{borderTop:"1px solid ".concat(g.TV.outlineDimmer)}],feedback:[g.l0.flex.rowReverse,g.l0.pb(4)],messageBoxContainer:[g.l0.p(8)],messageBoxSubContainer:[g.l0.rowWithGap(8),g.l0.align.center],messageBoxInputContainer:[g.l0.flex.growAndShrink(1),g.l0.maxHeight(300)],messageBoxInput:[g.l0.height(32),g.l0.align.start,{resize:"vertical",width:"100%",flexGrow:1}],inputCharacterCount:[g.l0.flex.row,g.l0.align.center,g.l0.rowWithGap(4),g.l0.color.foregroundDimmer],inputCharacterCountMax:[g.l0.flex.row,g.l0.align.center,g.l0.rowWithGap(4),g.l0.color.accentNegativeStronger],inputButton:[g.l0.backgroundColor.blueDefault,g.l0.borderRadius(8),{"@media (hover: hover)":{":not([disabled]):hover":{backgroundColor:g.TV.blueDefault}}}],upgradeButton:[g.l0.m(8)]}),Wm=function(){var e=(0,a.useState)(!1),n=e[0],t=e[1];return(0,r.BX)(r.HY,{children:[(0,r.tZ)(Oe.zx,{colorway:"primary",onClick:function(e){e.preventDefault(),t(!0)},text:"Upgrade now",iconLeft:(0,r.tZ)(Fm.Z,{}),css:Om.upgradeButton}),(0,r.tZ)(Sa.Z,{context:"ghostwriter_chat_metered_trial",isOpen:n,onRequestClose:function(){t(!1)},uponPurchaseGoTo:"workspace",powerUp:"ghostwriter"})]})},Hm=function(e){var n=e.currentUser,t=e.inputRef,i=e.model,l=Boolean((0,tf.useRouter)().query.hideChatInput),c=(0,Ds.Z)(),u=c.ref,s=c.update,d=(0,o.Z)((0,nv.Jc)(),2),f=d[0],p=d[1],h=(0,nv.gp)(),v=(0,nv.ql)(),m=(0,Em.d)(),g=(0,N.Vg)((0,tf.useRouter)()),Z=(0,nv.J)(),b=(0,a.useState)(!1),w=b[0],x=b[1],k=(0,Rm.yL)(i).messageCharacters,C=(0,Te.P5)({controlName:"flag-ghostwriter-prompt-editor",logFlagToAnalytics:!1}),S=function(e){if(e.preventDefault(),!f)return null;p(""),requestAnimationFrame((function(){s()})),v({chatMessage:{type:"chat",text:f}})},T=function(){(0,Le.j)(Le.U3.GHOSTWRITER_CHAT_INPUT_FOCUSED)},E=function(e){var n=e.enableBridge,t=e.model,r=e.sendChatMessage,i=e.abortResponse,l=(0,o.Z)((0,nv.Jc)(),2),c=l[0],u=(l[1],(0,nv.J)()),s=(0,nv.gp)(),d=(0,Te.P5)({controlName:"flag-mb-gw-chat-bridge",logFlagToAnalytics:!0});(0,a.useEffect)((function(){if(n&&d){var e=function(e){return(0,Im.I6)(e,(function(e){var n=e.type;switch(n){case Gm.cF.GHOSTWRITER_CHAT_SEND:r(e.chatMessage),(0,Im.gU)(e.id);break;case Gm.cF.GHOSTWRITER_CHAT_ABORT_RESPONSE:i(),(0,Im.gU)(e.id);break;default:(0,yl.Z)(n)}}))};return window.addEventListener("message",e),function(){return window.removeEventListener("message",e)}}}),[i,r,n,d]);var f=(0,a.useCallback)((function(){var e={messageType:Gm.cF.GHOSTWRITER_CHAT_FOCUS_INPUT};(0,Im.bG)(e,il()())}),[]);return(0,a.useEffect)((function(){var e=(0,Rm.yL)(t).messageCharacters,n={messageType:Gm.cF.GHOSTWRITER_CHAT_STATE,chatInputText:c,isSending:s,showStopGenerating:u,characterLimit:e};(0,Im.bG)(n,il()())}),[c,t,u,d,s]),{focusNativeMobileInput:f}}({enableBridge:m&&g,model:i,sendChatMessage:function(e){v({chatMessage:{type:"chat",text:e}})},abortResponse:function(){I&&D()}}).focusNativeMobileInput,R=(0,a.useCallback)((function(){var e;(T(),g)?E():null===(e=t.current)||void 0===e||e.focus()}),[t,E,g]);(0,a.useEffect)((function(){g&&m&&R()}),[t,m,E,R]),(0,a.useEffect)((function(){if(h||x(!1),w){var e=setTimeout((function(){x(!1)}),2e3);return function(){clearTimeout(e)}}}),[h,w]),(0,a.useEffect)((function(){p((function(e){return e.slice(0,k)}))}),[p,k]);var I=(0,Tm.j3)(),G=(0,Tm.em)(),D=(0,a.useCallback)((function(){G(),R()}),[G,R]),_=f.length===k;return l?null:(0,r.tZ)(K.Tg,{elevated:!0,css:Om.surface,children:m?(0,r.BX)(y.G,{css:Om.messageBoxContainer,children:[(0,r.tZ)(y.G,{css:Om.feedback,children:(0,r.BX)(y.G,{css:_?Om.inputCharacterCountMax:Om.inputCharacterCount,children:[_?(0,r.tZ)(ee.Z,{}):void 0,(0,r.tZ)(km.Z,{maxLength:k,value:f,hideLabel:!0,fontSize:"inherit"})]})}),(0,r.BX)(y.G,{css:Om.messageBoxSubContainer,tag:"form",disabled:h,onSubmit:S,children:[(0,r.tZ)(Ru.q,{src:n.image,username:n.username,size:24}),(0,r.tZ)(y.G,{css:Om.messageBoxInputContainer,children:C?(0,r.tZ)(Mm,{value:f,ref:t,maxLength:k,onChange:function(e){p(e)},onSubmit:function(){f&&(h?x(!0):(p(""),v({chatMessage:{type:"chat",text:f}})))},onFocus:function(){T()}}):(0,r.tZ)(Qe.B,{type:"text",inputMode:"text",maxLength:k,placeholder:"Ask a question about your code\u2026",ref:(0,_s.l)(u,t),css:Om.messageBoxInput,onChange:function(e){p(e.target.value)},value:f,onFocus:function(){T()},onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),e.shiftKey?(p((function(e){var n,r;return e.slice(0,null===t||void 0===t||null===(n=t.current)||void 0===n?void 0:n.selectionStart)+"\n"+e.slice(null===t||void 0===t||null===(r=t.current)||void 0===r?void 0:r.selectionEnd,e.length)})),requestAnimationFrame((function(){s()}))):h?x(!0):S(e))}})}),Z?(0,r.tZ)(se.h,{size:28,alt:"Stop generating",onClick:D,tooltipContents:w?"You cannot send a message while another message is sending.":void 0,tooltipOpen:!!w||void 0,children:(0,r.tZ)(Sm.Z,{})}):(0,r.tZ)(se.h,{alt:"Send message",size:28,type:"submit",disabled:h,css:Om.inputButton,children:(0,r.tZ)(Cm.Z,{})})]})]}):(0,r.tZ)(Wm,{})})},Vm=t(37584),zm=t(45317),jm=function(e){var n=e.inputRef,t=e.text,i=e.promptToFill,a=(0,o.Z)((0,nv.Jc)(),2)[1];return(0,r.tZ)(Oe.zx,{iconLeft:(0,r.tZ)(Cm.Z,{}),text:t,onClick:function(){!function(){var e;a(i),(0,Le.j)(Le.U3.GHOSTWRITER_CHAT_EXAMPLE_CLICKED,{prompt:i}),null===n||void 0===n||null===(e=n.current)||void 0===e||e.focus()}()}})},qm=[{text:'"How do I scrape a website for <a> tags?"',promptToFill:"How do I scrape a website for <a> tags?"},{text:'"Write a login page in HTML and CSS"',promptToFill:"Write a login page in HTML and CSS"},{text:(0,r.BX)(r.HY,{children:['"How can I improve the code in ',(0,r.tZ)("em",{children:"filename.js"}),'?"']}),promptToFill:"How can I improve the code in "},{text:'"How do I use the pandas apply function?"',promptToFill:"How do I use the pandas apply function?"}],$m=function(e){var n=e.inputRef,t=e.samplesNumber,i=(0,pn.Z)((function(){return qm.sort((function(){return Math.random()-.5}))}),[]);return(0,r.tZ)(r.HY,{children:i.map((function(e,t){return(0,r.tZ)(jm,{inputRef:n,text:e.text,promptToFill:e.promptToFill},t)})).slice(0,t)})},Ym=(0,b.X)({messageEmptyStateSamplePrompts:[g.l0.rowWithGap(8),g.l0.flex.wrap,g.l0.px(16),g.l0.align.center,{gap:zm.TV.space8}],messageEmptyState:[g.l0.colWithGap(16),g.l0.overflow("auto"),g.l0.flex.growAndShrink(1),g.l0.pt(12)]}),Km=function(e){var n=e.inputRef,t=e.username,i=(0,r.tZ)(y.G,{css:Ym.messageEmptyStateSamplePrompts,children:(0,r.tZ)($m,{inputRef:n,samplesNumber:3})});return(0,r.tZ)(y.G,{css:Ym.messageEmptyState,role:"log",children:(0,r.tZ)(Vm.v,{message:{id:"empty-state",type:"chat",loading:!1,text:"Hey @".concat(t,", I\u2019m Ghostwriter, Replit\u2019s AI pair programmer. I\u2019m here to answer questions about your code and assist your thinking!"),author:{username:"Ghostwriter",image:"/public/images/ghostwriter/blurple-circle.svg"},attribution:"Assistant"},postMessageComponent:i})})},Qm=function(){return(0,r.BX)(y.G,{css:[g.l0.colWithGap(16),g.l0.align.center,g.l0.p(24),g.l0.height("100%"),g.l0.justify.center],children:[(0,r.tZ)(y.G,{css:[g.l0.maxWidth(200)],children:(0,r.tZ)(dn.Z,{src:"/public/images/ghostwriter/orb.jpg",css:[{userSelect:"none",mixBlendMode:"screen",filter:"brightness(110%) saturate(1.2)",maskImage:"linear-gradient(".concat(g.TV.backgroundRoot,", transparent)")}],width:200,height:200,objectFit:"contain","aria-hidden":"true",alt:"",draggable:!1})}),(0,r.tZ)(Z.xv,{variant:"subheadBig",multiline:!1,children:"Chat with Ghostwriter"}),(0,r.BX)(y.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:[(0,r.tZ)(Je.Z,{}),(0,r.tZ)(Z.xv,{color:"dimmer",multiline:!1,children:"Loading\u2026"})]})]})},Jm=t(51624),eg=t(69365),ng=t(40675),tg=t(94236),rg=t(90273),ig=function(){return(0,r.BX)(y.G,{css:[g.l0.center,g.l0.textAlign.center,g.l0.px(16),g.l0.colWithGap(8),g.l0.flex.growAndShrink(1)],children:[(0,r.tZ)(Z.xv,{variant:"headerBig",children:"Ghostwriter is currently unavailable. Please try again later."}),(0,r.tZ)(dn.Z,{src:"/public/images/ghostwriter/orb.jpg",css:[{userSelect:"none",mixBlendMode:"screen",filter:"brightness(110%) saturate(1.2)",maskImage:"linear-gradient(".concat(g.TV.backgroundRoot,", transparent)")}],width:200,height:200,objectFit:"contain","aria-hidden":"true",alt:"",draggable:!1})]})},og=t(40207),ag=t(39691);function lg(e){return(0,r.tZ)(la.Z,(0,De.Z)((0,M.Z)({viewBox:"0 0 11 12",fill:"none"},e),{children:(0,r.tZ)("path",{d:"M5.25 0.721688C5.4047 0.632371 5.5953 0.632371 5.75 0.721688L9.94615 3.14434C10.1009 3.23365 10.1962 3.39872 10.1962 3.57735V8.42265C10.1962 8.60128 10.1009 8.76635 9.94615 8.85566L5.75 11.2783C5.5953 11.3676 5.4047 11.3676 5.25 11.2783L1.05385 8.85566C0.899148 8.76635 0.803848 8.60128 0.803848 8.42265V3.57735C0.803848 3.39872 0.899147 3.23365 1.05385 3.14434L5.25 0.721688Z",stroke:"#F5F9FC"})}))}var cg=t(42237),ug=t(5790),sg=(0,b.X)({container:[g.l0.rowWithGap(4),g.l0.flex.wrap,g.l0.border({direction:"bottom",color:g.TV.outlineDimmest})],headerLeftContainer:[g.l0.rowWithGap(4),g.l0.flex.growAndShrink(1),g.l0.p(8)],headerText:[g.l0.height(12),g.l0.fontSize(12),g.l0.color.foregroundDimmer,{lineHeight:1}],advancedButton:[{border:"none",borderRadius:0}],advancedPopover:[g.l0.borderRadius(8),g.l0.p(8),g.l0.backgroundColor.backgroundHigher,g.l0.maxWidth(320)],advancedPopoverTopSection:[g.l0.rowWithGap(4),g.l0.pb(12),g.l0.align.center,g.l0.justify.spaceBetween],advancedPopoverText:[g.l0.color.foregroundDimmest],advancedPopoverHeader:[g.l0.fontWeight.medium]}),dg=function(){var e=(0,a.useState)(!1),n=e[0],t=e[1],i=(0,lv.Cp)();return(0,r.BX)(y.G,{css:sg.container,children:[(0,r.BX)(y.G,{css:sg.headerLeftContainer,children:[(0,r.tZ)(Z.xv,{css:sg.headerText,children:"number"===typeof i?new Date(i).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0}):null}),(0,r.tZ)(Z.xv,{css:sg.headerText,children:"Session"})]}),(0,r.BX)(ug.x,{label:"Notifications",noArrow:!0,isOpen:n,onOpenChange:function(e){t(e)},placement:"bottom",children:[(0,r.tZ)(Oe.zx,{small:!0,css:sg.advancedButton,outlined:!0,onClick:function(){return t((function(e){return!e}))},iconLeft:(0,r.tZ)(lg,{}),iconRight:n?(0,r.tZ)(cg.ChevronUp,{}):(0,r.tZ)(cg.ChevronDown,{}),text:"Advanced"}),(0,r.BX)(y.G,{css:sg.advancedPopover,children:[(0,r.BX)(y.G,{css:sg.advancedPopoverTopSection,children:[(0,r.BX)(y.G,{children:[(0,r.tZ)(Z.xv,{css:sg.advancedPopoverHeader,children:"Advanced Model Usage"}),(0,r.tZ)(Z.xv,{css:sg.advancedPopoverText,children:"Next refill in ".concat("4 days")})]}),(0,r.BX)(y.G,{css:[g.l0.colWithGap(4),g.l0.pt(4)],children:[(0,r.tZ)(Or.J,{total:100,current:50,color:g.TV.blurpleDefault}),(0,r.tZ)(Z.xv,{css:sg.advancedPopoverText,children:"".concat(50,"/").concat(100," messages left")})]})]}),(0,r.tZ)(Z.xv,{css:sg.advancedPopoverText,children:"Advanced models require a lot of power, so it can only be used occasionally on code generation, editing, and explanation."})]})]})]})};function fg(e){var n,t=(0,N.T3)(),i=(0,o.Z)((0,nv.zu)(),1)[0],l=(0,ag.Ne)(),c=l.currentUserData,u=l.currentUserLoading,s=l.currentUserError,d=l.chatModel,f=(0,a.useState)(!1),p=f[0],h=f[1],v=null===c||void 0===c||null===(n=c.currentUser)||void 0===n?void 0:n.isStaff,m=(0,o.Z)((0,og.RN)(),2),Z=m[0],b=m[1],w=(0,nv.ZT)(),x=(0,pn.Z)((function(){return[{type:"action",label:"Clear chat history",icon:(0,r.tZ)(Y.Z,{}),run:function(){(0,Le.j)(Le.U3.GHOSTWRITER_CHAT_CLEARED),w()}}]}),[w]),k=(0,pn.Z)((function(){var e=[{match:T.pl,data:{type:"action",icon:(0,r.tZ)(rg.Z,{}),label:"Share feedback",run:function(){return h(!0)}}}];if(v){var n={match:T.pl,data:{type:"action",icon:(0,r.tZ)(Yv.Z,{fill:Z?g.TV.accentPrimaryDefault:g.TV.foregroundDefault}),label:"Toggle debug mode",run:function(){b((function(e){return!e}))}}};e.push(n)}return e}),[Z,b,v]),C=(0,a.useRef)(null);(0,S.Wk)((function(){return C.current}),[]),(0,S.L5)((function(){return{actions:x,commands:k}}),[x,k]);var E=(0,a.useRef)(null),R=(0,o.Z)((0,eg.Z_)(),2),I=R[0],G=R[1],D=(0,o.Z)((0,eg.Z9)(),2),_=D[0],P=D[1],B=(0,a.useCallback)((function(){_?P(!1):null==E.current||E.current.scrollHeight-E.current.scrollTop!==E.current.clientHeight?G(!1):G(!0)}),[_,G,P]),A=(0,Te.P5)({controlName:"flag-ghostwriter-model-selection",logFlagToAnalytics:!0});return u?(0,r.tZ)(Qm,{}):s||!(null===c||void 0===c?void 0:c.currentUser)?(0,r.BX)(y.G,{children:["error:"," ",(null===s||void 0===s?void 0:s.message)||"User not found, please log in or reload"]}):(0,r.BX)(y.G,{css:[g.l0.flex.column,g.l0.maxHeight("100%"),g.l0.maxWidth("100%"),g.l0.flex.grow(1)],dataCy:"ghostwriter-chat",children:[(0,r.tZ)(tg.Z,{isOpen:p,setOpen:h,feature:ng.l.GhostWriter}),i.length?(0,r.BX)(r.HY,{children:[A?(0,r.tZ)(dg,{}):null,(0,r.tZ)(y.G,{innerRef:E,css:[g.l0.colWithGap(16),g.l0.overflow("auto"),g.l0.flex.growAndShrink(1),g.l0.pt(12)],onScroll:B,role:"log",children:i.map((function(n,o){return(0,r.tZ)(Vm.v,{message:n,autoScroll:I&&o===i.length-1&&(e.paneIsActive||!t),canReclassify:i.length-1===o&&"chat"===n.type&&"Assistant"===n.attribution,onReply:function(){var e;null===(e=C.current)||void 0===e||e.focus()}},o)}))})]}):(0,r.tZ)(Km,{inputRef:C,username:c.currentUser.username}),(0,r.tZ)(Hm,{currentUser:c.currentUser,inputRef:C,model:d})]})}var pg=function(e){var n=(0,Te.P5)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1});return(0,Jm.e)({performPaneOperation:e.performPaneOperation}),(0,r.tZ)(r.HY,{children:n?(0,r.tZ)(ig,{}):(0,r.tZ)(fg,{paneIsActive:e.paneIsActive})})},hg={Content:function(e){var n=e.options;return(0,r.tZ)(pg,{paneIsActive:n.isActive,performPaneOperation:n.performPaneOperation})},Icon:function(e){var n=e.size;return(0,r.tZ)(xm.Z,{size:n})},getTitle:function(){return"Ghostwriter"}},vg=t(42916);function mg(){return{filetree:vg.Z,codeEditor:P.D,webview:Ua.R,media:fl,pedit:$h,vnc:Na,unitTests:Jh,adminPanel:Kv,runnerOutput:Ee,shell:Wa,packager:vr,envEditor:Cn,draw:cl,git:Kf,history:Nh,database:oi,neon:Aa,markdown:_,sshConfigurator:bm,ghostwriterChat:hg}}},92508:function(e,n,t){t.d(n,{kz:function(){return x},F3:function(){return p},fK:function(){return Z},ME:function(){return s},DQ:function(){return f},Dp:function(){return c},Ur:function(){return d},RX:function(){return u},b:function(){return v},v:function(){return r},Se:function(){return w}});var r={filetree:!0,codeEditor:!0,database:!0,neon:!0,replAuth:!0,webview:!0,media:!0,vnc:!0,pedit:!0,education:!0,runnerOutput:!0,unitTests:!0,autograder:!0,markdown:!0,shell:!0,packager:!0,envEditor:!0,commands:!0,draw:!0,preferences:!0,adminPanel:!0,git:!0,history:!0,kaboombar:!0,instructions:!0,debugger:!0,tutorial:!0,config:!0,threadInbox:!0,extension:!0,extensionStore:!0,docs:!0,videoPlayer:!0,chat:!0,deployments:!0,modules:!0,sshConfigurator:!0,multiplayer:!0,ghostwriterChat:!0,submitEduRepl:!0,searchReplace:!0,extensionDevtools:!0},i=t(4561),o=t(43312),a=t(39541),l=t(87978);function c(e){var n=e.path;return n?(0,l.T3)(n)?"media":(0,l.sL)(n)?"draw":(0,l.IQ)(n)?"pedit":"codeEditor":"codeEditor"}function u(e){return"codeEditor"===e||"media"===e||"pedit"===e||"draw"===e||"history"===e}function s(e){return e.filter((function(e){return e.type===i.Tv.File})).map((function(e){return{type:c({path:e.path}),data:{path:e.path}}}))}function d(e){return u(e.type)}function f(e){return d(e)?e.data.path:null}var p=(0,o.iv)([a.l0.width("100%"),a.l0.maxWidth(600),{marginLeft:"auto",marginRight:"auto"}]),h=["autograder","education","instructions","markdown","threadInbox","extensionStore","chat","docs","webview","vnc","runnerOutput","git","packager","envEditor","debugger","tutorial","kaboombar","database","neon","replAuth","autograder","unitTests","education","preferences","deployments","ghostwriterChat","extensionDevtools"];function v(e){return h.includes(e)}var m=t(74985),g=t(50959),y={type:"commands",data:{autoFocus:!1}};function Z(e){var n=e.config;return{Icon:function(e){var t=e.pane,r=e.size,i=void 0===r?16:r,o=n[t.type]?t:y,a=n[o.type].Icon;return(0,m.tZ)(a,{pane:o,size:i})},Content:function(e){var t=e.pane,r=e.options,i=n[t.type]?t:y,o=n[i.type].Content;return(0,m.tZ)(o,{pane:i,options:r})},getTitle:function(e){var t=n[e.type]?e:y;return n[t.type].getTitle(t)}}}var b=(0,g.createContext)(null);function w(){var e=(0,g.useContext)(b);if(!e)throw new Error("Expected PaneUI in context");return e}var x=b.Provider},80906:function(e,n,t){t.d(n,{NH:function(){return c},Qt:function(){return s},R3:function(){return u},_s:function(){return o},p5:function(){return d}});var r=t(91398),i=t(42082),o=(0,r.cn)(null),a=(0,r.cn)((function(e){var n=e(o);return(null===n||void 0===n?void 0:n.isVisible)?n.path:null})),l=(0,r.cn)(null,(function(e,n,t,r){switch(r.type){case"focus":return void n(o,{hasFocus:!0,isVisible:!0,position:r.position,path:t});case"update":return void n(o,{hasFocus:r.hasFocus,isVisible:!0,position:r.position,path:t});case"blur":var i;return void n(o,(function(e){return{hasFocus:!1,isVisible:Boolean(null===e||void 0===e?void 0:e.isVisible),position:null!==(i=null===e||void 0===e?void 0:e.position)&&void 0!==i?i:{line:1,column:1,offset:0},path:t}}));case"unmount":return void n(o,null);case"hidden":var a;return void n(o,(function(e){return{hasFocus:!1,isVisible:!1,position:null!==(a=null===e||void 0===e?void 0:e.position)&&void 0!==a?a:{line:1,column:1,offset:0},path:t}}));case"unhidden":var l;return void n(o,(function(e){return{hasFocus:Boolean(null===e||void 0===e?void 0:e.hasFocus),isVisible:!1,position:null!==(l=null===e||void 0===e?void 0:e.position)&&void 0!==l?l:{line:1,column:1,offset:0},path:t}}))}}));function c(){return(0,i.$X)(l)}function u(){return(0,i.Hg)(a)}function s(){return(0,i.XD)(o)}function d(){return(0,i.yL)(o)}},70991:function(e,n,t){t.d(n,{KB:function(){return s},P3:function(){return u},Q5:function(){return c},QO:function(){return d},ZG:function(){return l}});var r=t(66091),i=t(5683),o=t(83451),a=t(45347),l=function(e){(0,i.Z)(t,e);var n=(0,a.Z)(t);function t(){var e;return(0,r.Z)(this,t),(e=n.apply(this,arguments)).name="RunCommandNotFoundError",e.message="Could not find run command",e}return t}((0,o.Z)(Error)),c=function(e){(0,i.Z)(t,e);var n=(0,a.Z)(t);function t(){var e;return(0,r.Z)(this,t),(e=n.apply(this,arguments)).name="SubdomainNotFoundError",e.message="Could not find subdomain",e}return t}((0,o.Z)(Error)),u=function(e){(0,i.Z)(t,e);var n=(0,a.Z)(t);function t(){var e;return(0,r.Z)(this,t),(e=n.apply(this,arguments)).name="AppTypeFoundError",e.message="Could not find app type",e}return t}((0,o.Z)(Error)),s=function(e){(0,i.Z)(t,e);var n=(0,a.Z)(t);function t(){var e;return(0,r.Z)(this,t),(e=n.apply(this,arguments)).name="PublicDirFoundError",e.message="Could not find public directory",e}return t}((0,o.Z)(Error)),d=function(e){(0,i.Z)(t,e);var n=(0,a.Z)(t);function t(){var e;return(0,r.Z)(this,t),(e=n.apply(this,arguments)).name="ReplOfflineError",e.message="Repl is offline",e}return t}((0,o.Z)(Error))},71002:function(e,n,t){t.d(n,{z4:function(){return W.z},_U:function(){return we},rm:function(){return Pe},XA:function(){return Ie},$y:function(){return de},ev:function(){return ve},Sl:function(){return ue},hn:function(){return ie},pn:function(){return pe},kW:function(){return te},H7:function(){return ae},_o:function(){return Se},gg:function(){return Be},U:function(){return xe},m8:function(){return Te},mF:function(){return De}});var r=t(57135),i=t(2272),o=t(96583),a=t(94716),l=t(48330),c=t(12379),u=t(72006),s=t(43119),d=t(71440),f=t(27942);function p(){var e=(0,s.Z)(["\n  fragment ReplDomain2 on Domain {\n    hosting_deployment_id\n    domain\n    state\n  }\n"]);return p=function(){return e},e}function h(){var e=(0,s.Z)(["\n  fragment CustomDomain on Domain {\n    ...ReplDomain2\n  }\n  ","\n"]);return h=function(){return e},e}function v(){var e=(0,s.Z)(["\n  fragment TargetHostingDeployment on HostingDeployment {\n    id\n    replitAppSubdomain\n  }\n"]);return v=function(){return e},e}function m(){var e=(0,s.Z)(["\n  fragment CurrentBuild2 on HostingBuild {\n    id\n    description\n    status\n    timeCreated\n    hasImageTag\n    envVars {\n      name\n      value\n    }\n    repl {\n      id\n      slug\n      apexProxy\n      domains {\n        ... on Domain {\n          ...CustomDomain\n        }\n      }\n      owner {\n        ... on Team {\n          id\n          username\n        }\n        ... on User {\n          id\n          username\n        }\n      }\n      hostingDeployment {\n        ... on HostingDeployment {\n          ...TargetHostingDeployment\n        }\n      }\n    }\n    provider\n    user {\n      id\n      displayName\n      username\n    }\n  }\n  ","\n  ","\n"]);return m=function(){return e},e}var g=(0,d.Ps)(p()),y=(0,d.Ps)(h(),g),Z=(0,d.Ps)(v()),b=(0,d.Ps)(m(),y,Z),w=t(9125),x=t(86615),k=t(50216);function C(){var e=(0,s.Z)(["\n  fragment DeploymentSessionHostingDeployment on HostingDeployment {\n    ...TargetHostingDeployment\n    currentBuild {\n      ...CurrentBuild2\n    }\n    inProgressBuild {\n      ...CurrentBuild2\n    }\n  }\n  ","\n  ","\n"]);return C=function(){return e},e}function S(){var e=(0,s.Z)(["\n  fragment DeploymentSessionRepl on Repl {\n    id\n    __typename\n    slug\n    lang {\n      id\n      displayName\n    }\n    config {\n      isVnc\n    }\n    source {\n      release {\n        repl {\n          title\n        }\n      }\n    }\n    owner {\n      __typename\n      ... on User {\n        id\n        username\n      }\n      ... on Team {\n        id\n        username\n      }\n    }\n    hostingDeployment {\n      ... on HostingDeployment {\n        ...DeploymentSessionHostingDeployment\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n    ...HostingTierReplPowerUps\n  }\n  ","\n  ","\n"]);return S=function(){return e},e}function T(){var e=(0,s.Z)(["\n  query DeploymentSession($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...DeploymentSessionRepl\n      }\n    }\n  }\n  ","\n"]);return T=function(){return e},e}function E(){var e=(0,s.Z)(["\n  subscription DeploymentSessionBuildDeployActionUpdates(\n    $input: HostingBuildDeployActionUpdatesInput!\n  ) {\n    hostingBuildDeployActionUpdates(input: $input) {\n      ... on HostingBuildDeployLogAction {\n        log\n      }\n      ... on HostingBuildDeployStatusAction {\n        status\n        message\n      }\n    }\n  }\n"]);return E=function(){return e},e}function R(){var e=(0,s.Z)(["\n  mutation DeploymentSessionDeployBuild($input: DeployHostingBuild2Input!) {\n    deployHostingBuild2(input: $input) {\n      ... on DeployHostingBuild2Result {\n        build {\n          ...CurrentBuild2\n        }\n        targetDeployment {\n          ...TargetHostingDeployment\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n  ","\n"]);return R=function(){return e},e}function I(){var e=(0,s.Z)(["\n  mutation DeploymentSessionSendDeploymentLifecycleCommand(\n    $input: SendDeploymentLifecycleCommandInput!\n  ) {\n    sendDeploymentLifecycleCommand(input: $input) {\n      ... on SendDeploymentLifecycleCommandResult {\n        repl {\n          id\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n"]);return I=function(){return e},e}function G(){var e=(0,s.Z)(["\n  mutation DeploymentSessionCancelInProgressDeploymentsBuild(\n    $input: FailHostingBuildInput!\n  ) {\n    failHostingBuild(input: $input) {\n      ... on FailHostingBuildResult {\n        build {\n          ...CurrentBuild2\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return G=function(){return e},e}var D={},_=(0,d.Ps)(C(),Z,b),P=(0,d.Ps)(S(),_,f.Fh),B=(0,d.Ps)(T(),P);var A=(0,d.Ps)(E());var U=(0,d.Ps)(R(),b,Z);var L=(0,d.Ps)(I());var X=(0,d.Ps)(G(),b);function N(e){return M.apply(this,arguments)}function M(){return(M=(0,r.Z)((function(e){var n,t,r,i,a,l,u,s,d;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:if(n=e.command,t=e.replId,r=e.buildId,!c.l)throw new Error("expected apolloClient to be initialized");return[4,c.l.mutate({mutation:L,variables:{input:{command:n,replId:t,buildId:r}}})];case 1:if(u=o.sent(),null===(i=u.errors)||void 0===i?void 0:i.length)throw new Error(u.errors.map((function(e){return e.message})).join(", "));if("SendDeploymentLifecycleCommandResult"!==(null===(a=u.data)||void 0===a||null===(l=a.sendDeploymentLifecycleCommand)||void 0===l?void 0:l.__typename))throw new Error((null===(s=u.data)||void 0===s||null===(d=s.sendDeploymentLifecycleCommand)||void 0===d?void 0:d.message)||"An unexpected error occurred while sending command. Please try again or contact support.");return[2]}}))}))).apply(this,arguments)}function F(e){return O.apply(this,arguments)}function O(){return(O=(0,r.Z)((function(e){var n,t,r,i,a,l,u,s;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:if(n=e.buildId,t=e.targetDeploymentId,!c.l)throw new Error("expected apolloClient to be initialized");return[4,c.l.mutate({mutation:X,variables:{input:{buildId:n,targetDeploymentId:t}}})];case 1:if(l=o.sent(),null===(r=l.errors)||void 0===r?void 0:r.length)throw new Error(l.errors.map((function(e){return e.message})).join(", "));if("FailHostingBuildResult"!==(null===(i=l.data)||void 0===i||null===(a=i.failHostingBuild)||void 0===a?void 0:a.__typename))throw new Error((null===(u=l.data)||void 0===u||null===(s=u.failHostingBuild)||void 0===s?void 0:s.message)||"An unexpected error occurred while trying to cancel. Please try again or contact support.");return[2]}}))}))).apply(this,arguments)}var W=t(1486),H=t(80806),V=t(51631),z=t(92153),j=t(91398),q=t(50959),$=t(42082),Y=t(88541),K=t(96742),Q=t(45285),J=t(11192),ee=t(70991),ne=(0,j.cn)(W.z.Loading);function te(){return(0,$.Hg)(ne)}var re=(0,j.cn)(void 0);function ie(){return(0,$.Hg)(re)}var oe=(0,j.cn)(void 0);function ae(){return(0,$.Hg)(oe)}var le=(0,j.cn)(void 0);var ce=(0,j.cn)(void 0);function ue(){return(0,$.Hg)(ce)}var se=(0,j.cn)(void 0);function de(){return(0,$.Hg)(se)}var fe=(0,j.cn)(void 0);function pe(){return(0,$.Hg)(fe)}var he=(0,j.cn)(void 0);function ve(){return(0,$.Hg)(he)}var me=(0,j.cn)(null,(function(e,n){n(re,void 0),n(oe,void 0),n(ce,void 0),n(se,void 0),n(fe,void 0),n(ne,W.z.Ready)})),ge=(0,j.cn)(null,(function(e,n,t){var r="Repl"===t.repl.__typename?t.repl:null;if(r){var i;n(le,{id:r.lang.id,displayName:r.lang.displayName,isVnc:Boolean(r.config.isVnc)});var o="ReplPowerUpTypes"===r.powerUps.__typename&&null!==(i=r.powerUps.hostingTier)&&void 0!==i?i:void 0;n(ce,o);var a=r.hostingDeployment;if(a)return"HostingDeployment"!==a.__typename?n(he,"Unexpected hosting deployment typename: ".concat(a.__typename)):(n(re,a.id),n(se,a.currentBuild),n(oe,a.replitAppSubdomain||(0,H.Jw)(r)),a.inProgressBuild?(n(fe,a.inProgressBuild),void n(ne,W.z.Deploying)):void n(ne,(0,H.Zx)(a.currentBuild.status)));n(oe,(0,H.Jw)(r)),n(ne,W.z.Ready)}}));function ye(){var e=(0,$.$X)(ge),n=(0,$.$X)(Ee);return(0,i.Z)(function(e){var n=(0,u.Z)({},D,e);return w.t(B,n)}({fetchPolicy:"no-cache",onCompleted:e,onError:function(e){n(e.message)}}),1)[0]}var Ze=(0,j.cn)(null,(function(e,n,t){if("HostingBuildDeployStatusAction"===t.__typename){var r=e(ne),i=e(fe),o=e(se),a=t.status;if(r===W.z.Deploying){if(!i)return void n(Ee,"No deployment in progress found");n(fe,(0,z.ZP)(i,(function(e){e.status=a}))),a!==V.Fe.Success&&a!==V.Fe.Failed||(n(fe,void 0),a!==V.Fe.Success&&o||n(se,(0,z.ZP)(i,(function(e){e.status=a,e.hasImageTag=i.provider!==V.r4.Static&&a===V.Fe.Success}))))}else if(r===W.z.ProcessingLifecycleCommand){if(!o)return void n(Ee,"No current build found");n(se,(0,z.ZP)(o,(function(e){e.status=a})))}n(ne,(0,H.Zx)(a)),t.message&&a===V.Fe.Failed&&n(Ee,t.message)}})),be=(0,j.cn)(null);function we(){return(0,$.Hg)(be)}function xe(e){var n=(0,$.yL)(be),t=(0,a.Z)(e);q.useEffect((function(){return n.subscribe((function(e){e&&t.current(e)}))}),[n,t])}var ke=(0,j.cn)((function(e){switch(e(ne)){case W.z.Deploying:var n;return null===(n=e(fe))||void 0===n?void 0:n.id;case W.z.ProcessingLifecycleCommand:var t;return null===(t=e(se))||void 0===t?void 0:t.id;default:return}})),Ce=(0,j.cn)(null,function(){var e=(0,r.Z)((function(e,n,t){var r;return(0,o.__generator)(this,(function(e){return(r=t.data.data)?(n(Ze,r.hostingBuildDeployActionUpdates),n(be,r.hostingBuildDeployActionUpdates),[2]):[2]}))}));return function(n,t,r){return e.apply(this,arguments)}}());function Se(e){var n=ye(),t=(0,$.$X)(Ce),r=(0,$.$X)(Ee);(0,q.useEffect)((function(){n({variables:{replId:e}})}),[n,e]);var i=(0,$.Hg)(ke);!function(e){var n=(0,u.Z)({},D,e);x.m(A,n)}({variables:{input:{buildId:null!==i&&void 0!==i?i:""}},skip:!i,onData:t,onError:function(e){r(e.message)}})}function Te(){var e=(0,l.Z)(),n=ye(),t=(0,$.$X)(ne);return q.useCallback((function(){return t(W.z.Loading),n({variables:{replId:e}})}),[n,t,e])}var Ee=(0,j.cn)(null,(function(e,n,t){n(he,t)}));var Re=(0,j.cn)(null,(function(e,n,t){var r,i=t.deployHostingBuild2;i&&("DeployHostingBuild2Result"===i.__typename?(n(fe,i.build),n(re,i.targetDeployment.id),n(oe,null!==(r=i.targetDeployment.replitAppSubdomain)&&void 0!==r?r:void 0),n(ne,W.z.Deploying)):n(Ee,i.message))}));function Ie(){var e=(0,l.Z)(),n=ie(),t=(0,Q.Z)(),a=(0,i.Z)(function(e){var n=(0,u.Z)({},D,e);return k.D(U,n)}(),1)[0],c=(0,$.$X)(Re),s=(0,$.$X)(Ee),d=(0,$.$X)(ne),f=(0,$.XD)(fe);return q.useCallback(function(){var i=(0,r.Z)((function(r,i,l){var u,p,h,v,m,g,y,Z,b;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:if(f())return s("Deployment already in progress"),[2];o.label=1;case 1:return o.trys.push([1,5,,6]),d(W.z.Preparing),[4,(0,J.$f)(t.dotReplit)];case 2:if(u=o.sent(),h=(p=l||u).buildCommand,v=p.runCommand,m=p.appType,g=p.publicDir,y=p.ignorePorts,!m)throw new ee.P3;if(!i)throw new ee.Q5;if(m===V.Vp.Static){if(!(0,K.A)(g))throw new ee.KB}else if(!(0,K.A)(v))throw new ee.ZG;return[4,(0,J.OD)({buildCommand:h,runCommand:v,appType:m,publicDir:g,ignorePorts:y},u,t)];case 3:return o.sent(),Z=(0,H.oU)(m),[4,a({variables:{input:{replId:e,targetDeploymentId:n,commands:{build:h,run:v||""},envVars:r,subdomain:i,provider:Z,appType:m}},onCompleted:c})];case 4:return o.sent(),[3,6];case 5:throw b=o.sent(),d(W.z.Ready),b;case 6:return[2]}}))}));return function(e,n,t){return i.apply(this,arguments)}}(),[a,c,s,d,f,n,e,t])}var Ge=(0,j.cn)(null,function(){var e=(0,r.Z)((function(e,n,t){var r,i,a,l,c,u;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:if(r=t.command,i=t.replId,a=void 0,r===V.Qc.Resume||r===V.Qc.Suspend){if(!(l=e(se)))return n(Ee,"No current build found"),[2];a=l.id,(c=(0,H.Ti)(r))&&(n(se,(0,z.ZP)(l,(function(e){e.status=c}))),n(ne,(0,H.Zx)(c)))}o.label=1;case 1:return o.trys.push([1,3,,4]),[4,N({command:r,buildId:a,replId:i})];case 2:return o.sent(),r===V.Qc.Destroy&&n(me),[3,4];case 3:return u=o.sent(),n(Ee,u.message),[3,4];case 4:return[2]}}))}));return function(n,t,r){return e.apply(this,arguments)}}());function De(){var e=(0,l.Z)(),n=(0,$.$X)(Ge);return q.useCallback(function(){var t=(0,r.Z)((function(t){return(0,o.__generator)(this,(function(r){switch(r.label){case 0:return[4,n({replId:e,command:t})];case 1:return r.sent(),[2]}}))}));return function(e){return t.apply(this,arguments)}}(),[n,e])}var _e=(0,j.cn)(null,function(){var e=(0,r.Z)((function(e,n){var t,r,i,a;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:if(!(t=e(re)))return n(Ee,"No deployment found"),[2];if(!(r=e(fe)))return n(Ee,"No deployment in progress found"),[2];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,F({buildId:r.id,targetDeploymentId:t})];case 2:return o.sent(),[3,4];case 3:return i=o.sent(),n(Ee,i.message),[2];case 4:return n(fe,void 0),n(ne,W.z.Ready),!(a=e(se))||a.status!==V.Fe.Success&&a.status!==V.Fe.Failed?(n(se,(0,z.ZP)(r,(function(e){e.status=V.Fe.Failed}))),[2]):[2]}}))}));return function(n,t){return e.apply(this,arguments)}}());function Pe(){return(0,$.$X)(_e)}function Be(){var e=(0,$.Hg)(le),n=(0,Y.P5)({controlName:"flag-funky-future",logFlagToAnalytics:!1});if(!e)return{isDeployableRepl:!1,reason:"Could not find repl language."};if(e.isVnc)return{isDeployableRepl:!1,reason:"VNC deployments are not currently supported."};if("html"===e.id){if(!n)return{isDeployableRepl:!1,reason:"HTML deployments are not currently supported but are coming soon."}}else if("nix"!==e.id)return{isDeployableRepl:!1,reason:"You will need to upgrade your ".concat(e.displayName," Repl to a Nix template in order to deploy.")};return{isDeployableRepl:!0}}},1486:function(e,n,t){var r;t.d(n,{z:function(){return r}}),function(e){e.Loading="Loading",e.Ready="Ready",e.Preparing="Preparing",e.Deploying="Deploying",e.ProcessingLifecycleCommand="ProcessingLifecycleCommand",e.Suspended="Suspended"}(r||(r={}))},80806:function(e,n,t){t.d(n,{Jw:function(){return c},Ti:function(){return s},Zx:function(){return u},oU:function(){return d}});var r=t(1486),i=t(51631),o=t(73966),a=t.n(o),l=t(70232);t(30504);function c(e){var n,t=e.owner?"-".concat(null===(n=e.owner)||void 0===n?void 0:n.username):"";return"".concat("").concat(a()(e.slug)).concat(t)}function u(e){switch(e){case i.Fe.Failed:case i.Fe.Success:return r.z.Ready;case i.Fe.Suspended:return r.z.Suspended;case i.Fe.Suspending:case i.Fe.Resuming:case i.Fe.UpdatingTier:return r.z.ProcessingLifecycleCommand;case i.Fe.Pending:case i.Fe.Building:case i.Fe.Running:case i.Fe.Promoting:return r.z.Deploying;default:(0,l.Z)(e)}}function s(e){switch(e){case i.Qc.Destroy:return null;case i.Qc.Suspend:return i.Fe.Suspending;case i.Qc.Resume:return i.Fe.Resuming;default:(0,l.Z)(e)}}function d(e){switch(e){case i.Vp.CloudRun:return i.r4.CloudRun;case i.Vp.Worker:case i.Vp.Server:return i.r4.Gce;case i.Vp.Static:return i.r4.Static;default:(0,l.Z)(e)}}},13716:function(e,n,t){t.d(n,{eA:function(){return P},_s:function(){return S._s},ex:function(){return v},zo:function(){return Z},t9:function(){return D},R3:function(){return S.R3},pV:function(){return g},Qt:function(){return S.Qt},AA:function(){return b},Y_:function(){return x},b2:function(){return I},ev:function(){return k},Bx:function(){return y},VX:function(){return m},OM:function(){return _},Cp:function(){return R},_o:function(){return C},Gg:function(){return h},QH:function(){return w}});var r=t(74985),i=t(42082),o=t(9970),a=t(92153),l=t(91398),c=t(18171),u=(0,l.cn)(null),s=(0,l.cn)([]),d=(0,l.cn)(null,(function(e,n,t){var r=e(s),i=[t].concat((0,o.Z)(r.filter((function(e){return e!==t})))).slice(0,20);n(s,i)})),f=(0,l.cn)(null,(function(e,n,t){var r=e(s),i=r.indexOf(t.path);-1!==i&&n(s,(0,a.ZP)(r,(function(e){"delete"===t.type?e.splice(i,1):e.splice(i,1,t.to)})))})),p=(0,l.cn)(null);function h(){return(0,i.$X)(f)}function v(){return(0,i.Hg)(u)}function m(){return(0,i.$X)(u)}function g(){return(0,i.XD)(u)}function y(){return(0,i.Hg)(s)}function Z(){return(0,i.$X)(d)}function b(){return(0,i.XD)(s)}function w(){var e=(0,i.yL)(u);return(0,c.Z)((function(){return function(n){return e.subscribe(n)}}),[e])}function x(){return(0,i.yL)(u)}function k(){return(0,i.Hg)(p)}function C(){return(0,i.$X)(p)}var S=t(80906),T=(0,l.cn)({chat:"unread"}),E=(0,l.cn)(null,(function(e,n,t){n(T,(function(e){return(0,a.ZP)(e,(function(e){t.indicatorType?e[t.paneType]=t.indicatorType:delete e[t.paneType]}))}))}));function R(){return(0,i.$X)(E)}function I(e){var n=e.paneType;return(0,i.Hg)(function(e){var n=e.paneType;return(0,c.Z)((function(){return(0,l.cn)((function(e){return n?e(T)[n]:void 0}))}),[n])}({paneType:n}))}var G=(0,t(56581).O4)("areHiddenFilesVisible",!1);function D(){return(0,i.Hg)(G)}function _(){return(0,i.$X)(G)}function P(e){var n=(0,i.ns)();return(0,r.tZ)(i.B3.Provider,{value:n,children:e.children})}},27549:function(e,n,t){t.d(n,{L5:function(){return g},Wk:function(){return E},Xq:function(){return D},Y6:function(){return y},bS:function(){return R},c4:function(){return k},dr:function(){return Z},u1:function(){return x}});var r=t(57135),i=t(9970),o=t(96583),a=t(50959),l=t(91398),c=t(92153),u=t(18171),s=t(56581),d=t(94716),f=t(42082),p=t(77511),h=t(53472),v=(0,l.cn)({}),m=(0,l.cn)(null,(function(e,n,t){n(v,(function(e){return(0,c.ZP)(e,(function(e){null===t.actions?delete e[t.paneId]:e[t.paneId]=t.actions}))}))}));function g(e,n){var t=G(),r=(0,f.$X)(m),o=(0,d.Z)(e);(0,a.useEffect)((function(){var e;return r({paneId:t,actions:null!==(e=o.current())&&void 0!==e?e:null}),function(){r({paneId:t,actions:null})}}),[r,t,o].concat((0,i.Z)(n)))}function y(e){var n=(0,u.Z)((function(){return(0,s.kv)(v,(function(n){return e?n[e]:{}}))}),[e]);return(0,f.Hg)(n)}function Z(){var e=(0,f.XD)(v);return(0,a.useCallback)((function(n){var t;return null!==(t=e()[n])&&void 0!==t?t:null}),[e])}var b=(0,l.cn)(new Map),w=(0,l.cn)(null,(function(e,n,t,r){n(b,(function(e){var n=new Map(e);return null===r?n.delete(t):r&&n.set(t,r),n}))}));function x(){return(0,f.$X)(w)}function k(){var e=function(){var e=(0,f.rF)();return(0,a.useCallback)((function(n){var t=(0,s.kv)(v,(function(e){return e[n]}));return e(t)}),[e])}();return(0,a.useCallback)(function(){var n=(0,r.Z)((function(n){return(0,o.__generator)(this,(function(t){return[2,new Promise((function(t){var r=e(n);if(r.current)t(r.current);else var i=r.subscribe((function(e){e&&(t(e),i())}))}))]}))}));return function(e){return n.apply(this,arguments)}}(),[e])}var C=(0,l.cn)(new Map),S=(0,l.cn)(null,(function(e,n,t){n(C,(function(e){return(0,c.ZP)(e,(function(e){null===t.focus?e.delete(t.paneId):e.set(t.paneId,t.focus)}))}))}));function T(e){var n=document.activeElement;return!(!e||!n)&&(e!==n&&e.contains(n))}function E(e,n){var t=(0,d.Z)(e),r=G(),o=(0,p.T3)(),l=(0,a.useRef)(!o),c=(0,f.$X)(S),u=(0,f.XD)(h.J1),s=(0,f.XD)(b),v=(0,a.useState)(null),m=v[0],g=v[1];return(0,a.useEffect)((function(){t.current&&g(t.current())}),n?(0,i.Z)(n):[]),(0,a.useEffect)((function(){var e=function(e){u()===r&&e.target!==s().get(r)&&(l.current=!1)};return document.body.addEventListener("focus",e,!0),function(){document.body.removeEventListener("focus",e,!0)}}),[u,s,r]),(0,a.useEffect)((function(){if(m){var e=function(){m.focus()};return l.current&&u()===r&&!T(s().get(r))&&e(),c({paneId:r,focus:e}),function(){c({paneId:r,focus:null})}}}),[m,c,r,u,s,o]),g}function R(){var e=(0,f.XD)(C),n=(0,f.XD)(b);return(0,u.Z)((function(){return function(t){var r=e().get(t),i=n().get(t);T(i)||(r?r():null===i||void 0===i||i.focus())}}),[e,n])}var I=(0,a.createContext)(null);function G(){var e=(0,a.useContext)(I);if(!e)throw new Error("Expected pane id in context");return e}var D=I.Provider},53472:function(e,n,t){t.d(n,{J1:function(){return p},Np:function(){return R},WU:function(){return h},Xo:function(){return D},fg:function(){return P},gv:function(){return G},jY:function(){return _},nC:function(){return I}});var r=t(2272),i=t(9970),o=t(92508),a=t(81202),l=t.n(a),c=t(92153),u=t(50959),s=t(91398),d=t(42082),f=t(18171),p=(0,s.cn)(null);function h(){return(0,d.XD)(p)}var v=(0,s.cn)(new Map),m=(0,s.cn)([]),g=(0,s.cn)(null,(function(e,n,t){n(v,(function(e){return(0,c.ZP)(e,(function(e){var n=e.get(t.paneId),r=Date.now();if(n){var i=n.panes.at(-1);n.lastActiveAt=r,l()(t.pane,i)||n.panes.push(t.pane)}else e.set(t.paneId,{panes:[t.pane],lastActiveAt:r})}))})),n(p,t.paneId)})),y=(0,s.cn)(null,(function(e,n,t){var r=e(p),i=e(v).get(t);i&&n(m,(function(e){return(0,c.ZP)(e,(function(e){e.push(i.panes)}))})),n(v,(function(e){return(0,c.ZP)(e,(function(e){e.delete(t)}))})),r===t&&n(p,null)})),Z=(0,s.cn)(null,(function(e,n,t){n(v,(function(e){return(0,c.ZP)(e,(function(e){var n=e.get(t);n&&(n.lastActiveAt=Date.now())}))})),n(p,t)})),b=(0,s.cn)(null,(function(e,n){n(p,null)})),w=(0,s.cn)((function(e){return(0,i.Z)(e(v).values()).sort((function(e,n){return n.lastActiveAt-e.lastActiveAt})).map((function(e){return e.panes}))})),x=(0,s.cn)((function(e){var n=e(v),t=[];return n.forEach((function(e,n){var r=e.panes.at(-1);r&&t.push([n,r,e.lastActiveAt])})),t.sort((function(e,n){return e[2]-n[2]}))})),k=(0,s.cn)((function(e){var n=[],t=!0,i=!1,a=void 0;try{for(var l,c=e(x)[Symbol.iterator]();!(t=(l=c.next()).done);t=!0){var u=(0,r.Z)(l.value,2),s=(u[0],u[1]),d=(0,o.Ur)(s)?s.data.path:null;d&&n.push(d)}}catch(f){i=!0,a=f}finally{try{t||null==c.return||c.return()}finally{if(i)throw a}}return n})),C=(0,s.cn)((function(e){var n=[],t=!0,r=!1,o=void 0;try{for(var a,l=e(w)[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var c,u=a.value;u.length<=1||(c=n).push.apply(c,(0,i.Z)(u.slice(0,-1)))}}catch(y){r=!0,o=y}finally{try{t||null==l.return||l.return()}finally{if(r)throw o}}var s=!0,d=!1,f=void 0;try{for(var p,h=e(m)[Symbol.iterator]();!(s=(p=h.next()).done);s=!0){var v,g=p.value;(v=n).push.apply(v,(0,i.Z)(g))}}catch(y){d=!0,f=y}finally{try{s||null==h.return||h.return()}finally{if(d)throw f}}return n})),S=(0,s.cn)(null,(function(e,n){var t=e(m).flat().pop();return n(m,(function(e){return(0,c.ZP)(e,(function(e){var n=e.pop();n&&n.pop()}))})),t})),T=(0,s.cn)((function(e){var n=[],t=!0,r=!1,i=void 0;try{for(var a,l=e(C)[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var c=a.value,u=(0,o.Ur)(c)?c.data.path:null;u&&n.push(u)}}catch(s){r=!0,i=s}finally{try{t||null==l.return||l.return()}finally{if(r)throw i}}return n})),E=((0,s.cn)((function(e){return(0,i.Z)(e(k)).concat((0,i.Z)(e(T)))})),(0,s.cn)((function(e){var n=e(p);if(!n)return null;var t=e(v).get(n);return(null===t||void 0===t?void 0:t.panes.at(-1))||null})));(0,s.cn)((function(e){var n=e(E);return n&&(0,o.Ur)(n)&&n.data.path||null}));function R(e,n){var t=(0,d.$X)(g),r=(0,d.$X)(y);(0,u.useEffect)((function(){t({paneId:e,pane:n})}),[t,e,n]),(0,u.useEffect)((function(){return function(){r(e)}}),[r,e])}function I(){return(0,d.XD)(x)}function G(){return(0,d.$X)(S)}function D(){return(0,d.$X)(Z)}function _(){return(0,d.$X)(b)}function P(){var e=(0,d.yL)(k);return(0,f.Z)((function(){return function(n){return new Promise((function(t,r){var i=e.subscribe((function(e){e.includes(n)||(i(),t())}))}))}}),[e])}},42082:function(e,n,t){t.d(n,{$X:function(){return h},B3:function(){return u},Hg:function(){return d},XD:function(){return v},ns:function(){return c},rF:function(){return p},yL:function(){return f}});var r=t(50959),i=t(91398),o=t(92683),a=t(82325),l=t(13525);function c(){return(0,r.useState)((function(){return(0,i.MT)()}))[0]}var u=(0,r.createContext)(null);function s(){var e=(0,r.useContext)(u);if(!e)throw new Error("Expected store in context");return e}function d(e){return(0,o.Dv)(e,{store:s()})}function f(e){return(0,l.b)(e,s())}function p(){var e=s();return(0,r.useCallback)((function(n){return(0,l.c)(e,n)}),[e])}var h=function(e){return(0,o.b9)(e,{store:s()})};function v(e){return(0,a.lV)((0,r.useCallback)((function(n){return n(e)}),[e]),{store:s()})}},23763:function(e,n,t){t.d(n,{a9:function(){return a},kM:function(){return l}});var r=t(91398),i=t(42082),o=(0,r.cn)(null);function a(){return(0,i.$X)(o)}function l(){return(0,i.Hg)(o)}},98416:function(e,n,t){t.d(n,{OO:function(){return r},Uw:function(){return i},vw:function(){return o}});var r="replit-code-v1-3b",i={"replit-code-v1-3b":{},"replit-repltuned-v1-3b":{},"self-hosted-santa-1b":{infill:!0},"gwtraining-test1":{},"gwtraining-test2":{},"gwtraining-test3":{},"language-dependent":{},"gpt-3.5-turbo":{implementation:"chat-as-completion",implementationSettings:{model:"gpt-3.5-turbo"}},"google-augdev-001":{implementation:"google-model-as-completion",infill:!0},"code-gecko@001":{implementation:"google-vertex-model-as-completion",implementationSettings:{model:"code-gecko@001"},infill:!0}},o=new Set(Object.keys(i))},96742:function(e,n,t){t.d(n,{A:function(){return r},G:function(){return i}});var r=function(e){return"string"===typeof e&&""!==e.trim()},i=function(e){return"object"===typeof e&&"string"===typeof e.name&&"string"===typeof e.value&&""!==e.name}},4821:function(e,n,t){t.d(n,{I:function(){return i},z:function(){return r}});var r=100,i=250},95844:function(e,n,t){t.d(n,{L:function(){return c}});var r=t(66091),i=t(57988),o=t(2272),a=function e(n,t){(0,r.Z)(this,e),this.next=null,this.prev=null,this.key=n,this.data=t},l=function(){function e(){(0,r.Z)(this,e),this.size_=0,this.head=null,this.tail=null}var n=e.prototype;return n.addFront=function(e){this.tail||(this.tail=e),this.head&&(this.head.prev=e),e.next=this.head,this.head=e,this.size_++},n.popBack=function(){if(!this.tail)return null;var e=this.tail;return this.tail=e.prev,this.size_--,e.prev&&(e.prev.next=null,e.prev=null),e},n.moveToFront=function(e){this.head!==e&&(this.tail===e&&(this.tail=e.prev),e.next&&(e.next.prev=e.prev,e.next=null),e.prev&&(e.prev.next=e.next,e.prev=null),this.size_--,this.addFront(e))},(0,i.Z)(e,[{key:"size",get:function(){return this.size_}}]),e}(),c=function(){function e(n){(0,r.Z)(this,e),this.items=Object.create(null),this.evictList=new l,this.maxSize=n}var n=e.prototype;return n.update=function(e,n){var t=this.items[e];if(t)return this.evictList.moveToFront(t),t.data=n(t.data),t.data;for(;this.evictList.size>=this.maxSize;){var r=this.evictList.popBack();if(!r)throw new Error("invariant violation: could not pop back of the list");delete this.items[r.key]}var i=new a(e,n());return this.evictList.addFront(i),this.items[e]=i,i.data},n.getOrAdd=function(e,n){return this.update(e,(function(e){return null!==e&&void 0!==e?e:n}))},n.entries=function(){return Object.entries(this.items).map((function(e){var n=(0,o.Z)(e,2);return[n[0],n[1].data]}))},n.set=function(e,n){this.update(e,(function(){return n}))},n.get=function(e){var n=this.items[e];return n?n.data:null},n.has=function(e){return e in this.items},(0,i.Z)(e,[{key:"size",get:function(){return this.evictList.size}}]),e}()},63181:function(e,n,t){t.d(n,{F5:function(){return d},Hk:function(){return u},Kd:function(){return s},N$:function(){return c},Ob:function(){return l},Vl:function(){return a},Vt:function(){return r},ig:function(){return i},lF:function(){return o}});var r=/^([A-Za-z0-9_]{1,15})\/?$/,i=/^([%A-Za-z0-9]+|-)*\/?$/,o=/^([A-Za-z\d](?:[A-Za-z\d]|-){0,38})\/?$/,a=/^https:\/\/(www\.)?youtube\.com(\/(c|channel|user|@(\w)+))*(\/([A-Za-z0-9_-]+))*(\/?)$/,l=/^(.{2,32}#[0-9]{4})$|^([a-zA-Z0-9_.]{2,32})$/,c="https://twitter.com/",u="https://www.linkedin.com/in/",s="https://github.com/",d=/\/$/}}]);
//# sourceMappingURL=127-89fbceafc9253ea5.js.map